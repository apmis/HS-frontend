{"version":3,"file":"index.es.js","sources":["../src/useJitsi.js","../src/index.js"],"sourcesContent":["import { useState, useEffect } from 'react'\nimport PropTypes from 'prop-types'\n\nconst useJitsi = ({\n  domain = 'meet.jit.si',\n  parentNode,\n  subject,\n  password,\n  displayName,\n  onMeetingEnd,\n  ...options\n}) => {\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState(null)\n  const [jitsi, setJitsi] = useState(null)\n\n  useEffect(() => {\n    if (!window.JitsiMeetExternalAPI) {\n      setError('JitsiMeetExternalAPI is not available, check if https://meet.jit.si/external_api.js was loaded')\n      return\n    }\n\n    options.parentNode = document.getElementById(parentNode)\n    if (!options.parentNode) {\n      setError(`Parent node is not available, check container have the correct id: \"${parentNode}\"`)\n      return\n    }\n\n    const client = new window.JitsiMeetExternalAPI(domain, {...options})\n    setJitsi(client)\n    setLoading(false)\n    setError(null)\n\n    subject && client.executeCommand('subject', subject)\n\n    client.addEventListener('videoConferenceJoined', () => {\n      password && client.executeCommand('password', password)\n      displayName && client.executeCommand('displayName', displayName)\n    })\n\n    client.addEventListener('passwordRequired', () => {\n      password && client.executeCommand('password', password)\n    })\n    onMeetingEnd && client.addEventListener('readyToClose', onMeetingEnd)\n\n    return () => jitsi && jitsi.dispose()\n  }, [window.JitsiMeetExternalAPI])\n\n  return {jitsi, error, loading}\n}\n\nuseJitsi.propTypes = {\n  options: PropTypes.shape({\n    domain: PropTypes.string,\n    roomName: PropTypes.string.isRequired,\n    subject: PropTypes.string,\n    password: PropTypes.string,\n    displayName: PropTypes.string,\n    onMeetingEnd: PropTypes.func,\n    width: PropTypes.string,\n    height: PropTypes.string,\n    parentNode: PropTypes.string,\n    configOverwrite: PropTypes.object,\n    interfaceConfigOverwrite: PropTypes.object,\n    noSSL: PropTypes.bool,\n    jwt: PropTypes.string,\n    onload: PropTypes.func,\n    invitees: PropTypes.array,\n    devices: PropTypes.object,\n    userInfo: PropTypes.object\n  })\n}\n\nexport default useJitsi\n","import React, { useEffect } from 'react'\nimport PropTypes from 'prop-types'\n\nimport useJitsi from './useJitsi'\n\nconst Jutsu = ({\n  loadingComponent,\n  errorComponent,\n  containerStyles,\n  jitsiContainerStyles,\n  onError,\n  onJitsi,\n  ...options\n}) => {\n  const {loading, error, jitsi} = useJitsi({\n    parentNode: 'jitsi-container',\n    ...options\n  })\n\n  useEffect(() => {\n    if (jitsi && onJitsi) onJitsi(jitsi)\n  }, [jitsi])\n\n  useEffect(() => {\n    if (error && onError) onError(error)\n  }, [error])\n\n  return (\n    <div style={{ ...{ width: '800px', height: '400px' }, ...containerStyles }}>\n      {error && (errorComponent || <p>{error}</p>)}\n      {!error && loading && (loadingComponent || <p>Loading ...</p>)}\n      <div\n        id='jitsi-container'\n        style={{ ...{\n          display: loading ? 'none' : 'block',\n          width: '100%',\n          height: '100%'\n        },\n        ...jitsiContainerStyles }}\n      />\n    </div>\n  )\n}\n\nJutsu.propTypes = {\n  jwt: PropTypes.string,\n  domain: PropTypes.string,\n  subject: PropTypes.string,\n  password: PropTypes.string,\n  roomName: PropTypes.string.isRequired,\n  displayName: PropTypes.string,\n  onMeetingEnd: PropTypes.func,\n  loadingComponent: PropTypes.object,\n  errorComponent: PropTypes.object,\n  containerStyles: PropTypes.object,\n  jitsiContainerStyles: PropTypes.object,\n  configOverwrite: PropTypes.object,\n  interfaceConfigOverwrite: PropTypes.object,\n  onError: PropTypes.func,\n  onJitsi: PropTypes.func\n}\n\nexport { Jutsu, useJitsi }\n"],"names":["useJitsi","domain","parentNode","subject","password","displayName","onMeetingEnd","options","useState","loading","setLoading","error","setError","jitsi","setJitsi","window","JitsiMeetExternalAPI","document","getElementById","client","executeCommand","addEventListener","dispose","propTypes","PropTypes","shape","string","isRequired","func","object","bool","array","Jutsu","loadingComponent","errorComponent","containerStyles","jitsiContainerStyles","onError","onJitsi","width","height"],"mappings":"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"}