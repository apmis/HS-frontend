{"ast":null,"code":"import _defineProperty from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import _objectSpread from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";/* eslint-disable */import React,{useState,useContext,useEffect,useRef}from'react';import client from'../../feathers';import{DebounceInput}from'react-debounce-input';import{useForm}from\"react-hook-form\";//import {useHistory} from 'react-router-dom'\nimport{UserContext,ObjectContext}from'../../context';import{toast}from'bulma-toast';import{ProductCreate}from'./Products';import Encounter from'../EncounterMgt/Encounter';var random=require('random-string-generator');// eslint-disable-next-line\nvar searchfacility={};export default function HmoClaimCreate(){// const { register, handleSubmit,setValue} = useForm(); //, watch, errors, reset \n//const [error, setError] =useState(false)\nvar _useState=useState(false),_useState2=_slicedToArray(_useState,2),success=_useState2[0],setSuccess=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),message=_useState4[0],setMessage=_useState4[1];// eslint-disable-next-line\nvar _useState5=useState(),_useState6=_slicedToArray(_useState5,2),facility=_useState6[0],setFacility=_useState6[1];var SubwalletTxServ=client.service('subwallettransactions');var SubwalletServ=client.service('subwallet');var OrderServ=client.service('order');var InvoiceServ=client.service('invoice');//const history = useHistory()\nvar _useContext=useContext(UserContext),user=_useContext.user;//,setUser\n// eslint-disable-next-line\nvar _useState7=useState(),_useState8=_slicedToArray(_useState7,2),currentUser=_useState8[0],setCurrentUser=_useState8[1];var _useState9=useState(\"Bill\"),_useState10=_slicedToArray(_useState9,2),type=_useState10[0],setType=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),documentNo=_useState12[0],setDocumentNo=_useState12[1];var _useState13=useState(0),_useState14=_slicedToArray(_useState13,2),totalamount=_useState14[0],setTotalamount=_useState14[1];var _useState15=useState(\"\"),_useState16=_slicedToArray(_useState15,2),description=_useState16[0],setDescription=_useState16[1];var _useState17=useState(\"\"),_useState18=_slicedToArray(_useState17,2),productId=_useState18[0],setProductId=_useState18[1];var _useState19=useState(\"\"),_useState20=_slicedToArray(_useState19,2),source=_useState20[0],setSource=_useState20[1];var _useState21=useState(\"\"),_useState22=_slicedToArray(_useState21,2),date=_useState22[0],setDate=_useState22[1];var _useState23=useState(\"\"),_useState24=_slicedToArray(_useState23,2),name=_useState24[0],setName=_useState24[1];var _useState25=useState(\"\"),_useState26=_slicedToArray(_useState25,2),inventoryId=_useState26[0],setInventoryId=_useState26[1];var _useState27=useState(\"\"),_useState28=_slicedToArray(_useState27,2),baseunit=_useState28[0],setBaseunit=_useState28[1];var _useState29=useState(\"\"),_useState30=_slicedToArray(_useState29,2),quantity=_useState30[0],setQuantity=_useState30[1];var _useState31=useState(\"\"),_useState32=_slicedToArray(_useState31,2),sellingprice=_useState32[0],setSellingPrice=_useState32[1];var _useState33=useState(0),_useState34=_slicedToArray(_useState33,2),costprice=_useState34[0],setCostprice=_useState34[1];var _useState35=useState(\"\"),_useState36=_slicedToArray(_useState35,2),invquantity=_useState36[0],setInvQuantity=_useState36[1];var _useState37=useState(0),_useState38=_slicedToArray(_useState37,2),calcamount=_useState38[0],setCalcAmount=_useState38[1];var _useState39=useState([]),_useState40=_slicedToArray(_useState39,2),productItem=_useState40[0],setProductItem=_useState40[1];var _useState41=useState(\"\"),_useState42=_slicedToArray(_useState41,2),billingId=_useState42[0],setBilllingId=_useState42[1];var _useState43=useState(true),_useState44=_slicedToArray(_useState43,2),changeAmount=_useState44[0],setChangeAmount=_useState44[1];var _useState45=useState(\"Cash\"),_useState46=_slicedToArray(_useState45,2),paymentmode=_useState46[0],setPaymentMode=_useState46[1];var _useState47=useState([]),_useState48=_slicedToArray(_useState47,2),paymentOptions=_useState48[0],setPaymentOptions=_useState48[1];var _useState49=useState(\"\"),_useState50=_slicedToArray(_useState49,2),billMode=_useState50[0],setBillMode=_useState50[1];var _useState51=useState(false),_useState52=_slicedToArray(_useState51,2),productModal=_useState52[0],setProductModal=_useState52[1];var _useState53=useState(\"\"),_useState54=_slicedToArray(_useState53,2),obj=_useState54[0],setObj=_useState54[1];var _useState55=useState(0),_useState56=_slicedToArray(_useState55,2),amountPaid=_useState56[0],setAmountPaid=_useState56[1];var _useState57=useState(0),_useState58=_slicedToArray(_useState57,2),balance=_useState58[0],setBalance=_useState58[1];var _useState59=useState(false),_useState60=_slicedToArray(_useState59,2),buttonState=_useState60[0],setButtonState=_useState60[1];var _useState61=useState([]),_useState62=_slicedToArray(_useState61,2),partPay=_useState62[0],setPartPay=_useState62[1];var _useContext2=useContext(ObjectContext),state=_useContext2.state,setState=_useContext2.setState;var inputEl=useRef(0);var calcamount1;var hidestatus;var _useState63=useState({productitems:[],date:date,documentNo:documentNo,type:type,totalamount:totalamount,source:source}),_useState64=_slicedToArray(_useState63,2),productEntry=_useState64[0],setProductEntry=_useState64[1];var medication=state.financeModule.selectedFinance;//console.log(state.financeModule.state)\nvar showDocumentation=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(value){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setProductModal(true);case 1:case\"end\":return _context.stop();}}},_callee);}));return function showDocumentation(_x){return _ref.apply(this,arguments);};}();var handlecloseModal=function handlecloseModal(){setProductModal(false);// handleSearch(val)\n};var handleChangeMode=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(value){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return setPaymentMode(value);case 2:case\"end\":return _context2.stop();}}},_callee2);}));return function handleChangeMode(_x2){return _ref2.apply(this,arguments);};}();var handleRow=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(ProductEntry){var newProductEntryModule;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0://console.log(\"b4\",state)\n//console.log(\"handlerow\",ProductEntry)\n//await setMedication(ProductEntry)\nnewProductEntryModule={selectedMedication:ProductEntry,show:'detail'};_context3.next=3;return setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{medicationModule:newProductEntryModule});});case 3:case\"end\":return _context3.stop();}}},_callee3);}));return function handleRow(_x3){return _ref3.apply(this,arguments);};}();var productItemI={productId:productId,name:name,quantity:quantity,sellingprice:sellingprice,amount:calcamount,//||qamount\nbaseunit:baseunit,costprice:costprice,billingId:billingId};// consider batchformat{batchno,expirydate,qtty,baseunit}\n//consider baseunoit conversions\nvar getSearchfacility=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(obj){var contracts,contract,_contract;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return setObj(obj);case 2:if(obj){_context4.next=12;break;}//\"clear stuff\"\nsetProductId(\"\");setName(\"\");setBaseunit(\"\");setInventoryId(\"\");setSellingPrice(\"\");setInvQuantity(\"\");setDescription(\"\");setCostprice(\"\");// setCalcAmount(null)\nreturn _context4.abrupt(\"return\");case 12:setProductId(obj.productId);setName(obj.name);setBaseunit(obj.baseunit);setInventoryId(obj.inventoryId);setSellingPrice(obj.sellingprice);//modify this based on billing mode\nsetInvQuantity(obj.quantity);setCostprice(obj.costprice);setBilllingId(obj.billingId);contracts=obj.billingDetails.contracts;//const billingserv=client.service('billing')\nif(billMode.type===\"HMO Cover\"){//paymentmode\ncontract=contracts.filter(function(el){return el.source_org===billMode.detail.hmo;});//  console.log(contract[0].price)\nsetSellingPrice(contract[0].price);//  console.log(sellingprice)\n}if(billMode.type===\"Company Cover\"){//paymentmode\n_contract=contracts.filter(function(el){return el.source_org===billMode.detail.company;});//   console.log(contract[0].price)\nsetSellingPrice(_contract[0].price);//   console.log(sellingprice)\n}/*  setValue(\"facility\", obj._id,  {\n             shouldValidate: true,\n             shouldDirty: true\n         }) */case 23:case\"end\":return _context4.stop();}}},_callee4);}));return function getSearchfacility(_x4){return _ref4.apply(this,arguments);};}();useEffect(function(){/*  console.log(obj)\n        console.log(billMode)\n        if( paymentmode!==\"Cash\" && obj){\n            const contracts=obj.billingDetails.contracts\n            let contract=contracts.filter(el=>el.source_org===billMode.detail.hmo)\n           console.log(contract[0].price)\n           setSellingPrice(contract[0].price)\n           console.log(sellingprice)\n       }\n         return () => {\n            \n         } */},[obj]);useEffect(function(){setCurrentUser(user);//console.log(currentUser)\nreturn function(){};},[user]);var handleUpdateTotal=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return setTotalamount(function(prevtotal){return Number(prevtotal)+Number(calcamount);});case 2:case\"end\":return _context5.stop();}}},_callee5);}));return function handleUpdateTotal(){return _ref5.apply(this,arguments);};}();var handleChangeType=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(e){return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return setType(e.target.value);case 2:case\"end\":return _context6.stop();}}},_callee6);}));return function handleChangeType(_x5){return _ref6.apply(this,arguments);};}();var handleAmount=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(){return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return setDescription(\"\");case 2:case\"end\":return _context7.stop();}}},_callee7);}));return function handleAmount(){return _ref7.apply(this,arguments);};}();var handleClickProd=/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(){var billInfo;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:if(!(quantity===0||quantity===\"\"||productId===\"\")){_context8.next=3;break;}toast({message:'You need to choose a product and quantity to proceed',type:'is-danger',dismissible:true,pauseOnHover:true});return _context8.abrupt(\"return\");case 3:_context8.next=5;return setSuccess(false);case 5:_context8.next=7;return setProductItem(function(prevProd){return prevProd.concat(productItemI);});case 7:handleUpdateTotal();// generate billing info\nbillInfo={orderInfo:{orderId:medication._id,orderObj:medication},serviceInfo:{price:productItemI.sellingprice,quantity:productItemI.quantity,productId:productItemI.productId,name:productItemI.name,baseunit:productItemI.baseunit,amount:productItemI.amount,billingId:productItemI.billingId,createdby:user._id},paymentInfo:{},participantInfo:{billingFacility:medication.destination,billingFacilityName:medication.destination_name,locationId:state.StoreModule.selectedStore._id,//selected location,\nclientId:medication.clientId,client:medication.client,paymentmode:billMode},createdBy:user.id,billing_status:\"Unpaid\"};//update order\nOrderServ.patch(medication._id,{order_status:\"Billed\",billInfo:billInfo}).then(function(resp){// medication=resp\n// console.log(resp)\nhandleRow(resp);//update dispense\n}).catch(function(err){console.log(err);});//update status(billed) + action()\n//?attached chosen product to medication\n//dispense helper?\nsetName(\"\");setBaseunit(\"\");setQuantity(\"\");setInventoryId(\"\");setSellingPrice(\"\");setInvQuantity(\"\");handleAmount();// setCalcAmount(null)\n_context8.next=19;return setSuccess(true);case 19:/* console.log(success)\n        console.log(qamount)\n        console.log(productItem) */setChangeAmount(true);case 20:case\"end\":return _context8.stop();}}},_callee8);}));return function handleClickProd(){return _ref8.apply(this,arguments);};}();var handleQtty=/*#__PURE__*/function(){var _ref9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(e){return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:if(!(invquantity<e.target.value)){_context9.next=3;break;}toast({message:'You can not sell more quantity than exist in inventory ',type:'is-danger',dismissible:true,pauseOnHover:true});return _context9.abrupt(\"return\");case 3:setQuantity(e.target.value);calcamount1=quantity*sellingprice;_context9.next=7;return setCalcAmount(calcamount1);case 7:case\"end\":return _context9.stop();}}},_callee9);}));return function handleQtty(_x6){return _ref9.apply(this,arguments);};}();useEffect(function(){setProductEntry({date:date,documentNo:documentNo,type:type,totalamount:totalamount,source:source});setCalcAmount(quantity*sellingprice);return function(){};},[date]);var resetform=function resetform(){setType(\"Sales\");setDocumentNo(\"\");setTotalamount(\"\");setProductId(\"\");setSource(\"\");setDate(\"\");setName(\"\");setBaseunit(\"\");setCostprice(\"\");setProductItem([]);};var handleMedicationDone=/*#__PURE__*/function(){var _ref10=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee10(){var newProductEntryModule;return _regeneratorRuntime.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0://handle selected single order\n//console.log(\"b4\",state)\n//console.log(\"handlerow\",ProductEntry)\n// await setSelectedMedication(\"\")\nnewProductEntryModule={selectedMedication:{},show:'create'};_context10.next=3;return setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{medicationModule:newProductEntryModule});});case 3:case\"end\":return _context10.stop();}}},_callee10);}));return function handleMedicationDone(){return _ref10.apply(this,arguments);};}();var onSubmit=/*#__PURE__*/function(){var _ref11=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee11(e){return _regeneratorRuntime.wrap(function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:e.preventDefault();setMessage(\"\");//setError(false)\nsetSuccess(false);_context11.next=5;return setProductEntry({date:date,documentNo:documentNo,type:type,totalamount:totalamount,source:source});case 5:productEntry.productitems=productItem;productEntry.createdby=user._id;productEntry.transactioncategory=\"debit\";// console.log(\"b4 facility\",productEntry);\nif(!user.currentEmployee){_context11.next=12;break;}productEntry.facility=user.currentEmployee.facilityDetail._id;// or from facility dropdown\n_context11.next=14;break;case 12:toast({message:'You can not remove inventory from any organization',type:'is-danger',dismissible:true,pauseOnHover:true});return _context11.abrupt(\"return\");case 14:if(!state.StoreModule.selectedStore._id){_context11.next=18;break;}productEntry.storeId=state.StoreModule.selectedStore._id;_context11.next=20;break;case 18:toast({message:'You need to select a store before removing inventory',type:'is-danger',dismissible:true,pauseOnHover:true});return _context11.abrupt(\"return\");case 20:case\"end\":return _context11.stop();}}},_callee11);}));return function onSubmit(_x7){return _ref11.apply(this,arguments);};}();var handleChangeAmount=function handleChangeAmount(){setChangeAmount(function(rev){return!rev;});};var newclient=/*#__PURE__*/function(){var _ref12=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee12(){return _regeneratorRuntime.wrap(function _callee12$(_context12){while(1){switch(_context12.prev=_context12.next){case 0:_context12.next=2;return setProductItem([]);case 2:case\"end\":return _context12.stop();}}},_callee12);}));return function newclient(){return _ref12.apply(this,arguments);};}();var handleAccept=/*#__PURE__*/function(){var _ref13=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee13(){var obj,confirm;return _regeneratorRuntime.wrap(function _callee13$(_context13){while(1){switch(_context13.prev=_context13.next){case 0:_context13.next=2;return setButtonState(true);case 2:if(!(paymentmode===\"\"||amountPaid===0||amountPaid===\"\")){_context13.next=7;break;}toast({message:'Kindly choose payment mode or enter amount',type:'is-danger',dismissible:true,pauseOnHover:true});_context13.next=6;return setButtonState(false);case 6:return _context13.abrupt(\"return\");case 7:obj={// toWallet:{ type: Schema.Types.ObjectId, ref:'facility', }, //receiving money\n//fromWallet:{ type: Schema.Types.ObjectId, ref:'facility', },//sending money\n//subwallet:{ type: Schema.Types.ObjectId, ref:'subwallet', },\nclient:medication.participantInfo.client._id,organization:user.employeeData[0].facilityDetail._id,category:\"credit\",//debit/credit\namount:amountPaid,description:description,toName:user.employeeData[0].facilityDetail.facilityName,fromName:medication.participantInfo.client.firstname+\" \"+medication.participantInfo.client.lastname,createdby:user._id,// refBill:[{ type: Schema.Types.ObjectId, ref:'bills'  }], //billid to be paid : ref invoice to pay\n// info:{ type: Schema.Types.Mixed},\npaymentmode:paymentmode,facility:user.employeeData[0].facilityDetail._id,locationId:state.LocationModule.selectedLocation._id,type:\"Deposit\"};confirm=window.confirm(\"Are you sure you want to accept N \".concat(obj.amount,\" from \").concat(obj.fromName));if(!confirm){_context13.next=12;break;}_context13.next=12;return SubwalletTxServ.create(obj).then(function(resp){// console.log(resp)\ntoast({message:'Deposit accepted succesfully',type:'is-success',dismissible:true,pauseOnHover:true});setAmountPaid(0);setDescription(\"\");}).catch(function(err){toast({message:'Error accepting deposit '+err,type:'is-danger',dismissible:true,pauseOnHover:true});});case 12:_context13.next=14;return setButtonState(false);case 14:case\"end\":return _context13.stop();}}},_callee13);}));return function handleAccept(){return _ref13.apply(this,arguments);};}();useEffect(function(){var oldname=medication.participantInfo.client.firstname+\" \"+medication.participantInfo.client.lastname;// console.log(\"oldname\",oldname)\nsetSource(medication.participantInfo.client.firstname+\" \"+medication.participantInfo.client.lastname);var newname=source;// console.log(\"newname\",newname)\nif(oldname!==newname){//newdispense\nsetProductItem([]);setTotalamount(0);}//is the row checked or unchecked\nif(state.financeModule.state){medication.show=\"none\";medication.proposedpayment={balance:0,paidup:medication.paymentInfo.paidup+medication.paymentInfo.balance,amount:medication.paymentInfo.balance};//no payment detail push\nsetProductItem(function(prevProd){return prevProd.concat(medication);});}else{if(productItem.length>0){setProductItem(function(prevProd){return prevProd.filter(function(el){return el._id!==medication._id;});});}}// const paymentoptions= []\n//const info = medication.participantInfo.client.paymentinfo\n//let billme={}\ngetFacilities();return function(){};},[state.financeModule]);var getTotal=/*#__PURE__*/function(){var _ref14=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee14(){return _regeneratorRuntime.wrap(function _callee14$(_context14){while(1){switch(_context14.prev=_context14.next){case 0:setTotalamount(0);productItem.forEach(function(el){if(el.show===\"none\"){if(el.billing_status===\"Unpaid\"){setTotalamount(function(prevtotal){return Number(prevtotal)+Number(el.serviceInfo.amount);});}else{setTotalamount(function(prevtotal){return Number(prevtotal)+Number(el.paymentInfo.balance);});}}if(el.show===\"flex\"){setTotalamount(function(prevtotal){return Number(prevtotal)+Number(el.partPay);});}// \n});case 2:case\"end\":return _context14.stop();}}},_callee14);}));return function getTotal(){return _ref14.apply(this,arguments);};}();useEffect(function(){console.log(productItem);getTotal();return function(){};},[productItem]);var getFacilities=/*#__PURE__*/function(){var _ref15=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee15(){var findProductEntry;return _regeneratorRuntime.wrap(function _callee15$(_context15){while(1){switch(_context15.prev=_context15.next){case 0:_context15.next=2;return SubwalletServ.find({query:{client:medication.participantInfo.client._id,organization:user.employeeData[0].facilityDetail._id,//storeId:state.StoreModule.selectedStore._id,\n//clientId:state.ClientModule.selectedClient._id,\n$limit:100,$sort:{createdAt:-1}}});case 2:findProductEntry=_context15.sent;console.log(findProductEntry);// console.log(\"balance\", findProductEntry.data[0].amount)\nif(!(findProductEntry.data.length>0)){_context15.next=9;break;}_context15.next=7;return setBalance(findProductEntry.data[0].amount);case 7:_context15.next=11;break;case 9:_context15.next=11;return setBalance(0);case 11:case\"end\":return _context15.stop();}}},_callee15);}));return function getFacilities(){return _ref15.apply(this,arguments);};}();useEffect(function(){// const medication =state.medicationModule.selectedMedication\nvar today=new Date().toLocaleString();//console.log(today)\nsetDate(today);var invoiceNo=random(6,'uppernumeric');setDocumentNo(invoiceNo);getFacilities();SubwalletServ.on('created',function(obj){return getFacilities();});SubwalletServ.on('updated',function(obj){return getFacilities();});SubwalletServ.on('patched',function(obj){return getFacilities();});SubwalletServ.on('removed',function(obj){return getFacilities();});return/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee16(){var newProductEntryModule;return _regeneratorRuntime.wrap(function _callee16$(_context16){while(1){switch(_context16.prev=_context16.next){case 0:newProductEntryModule={selectedFinance:{},show:'create'};_context16.next=3;return setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{financeModule:newProductEntryModule});});case 3:_context16.next=5;return setPartPay([]);case 5:case\"end\":return _context16.stop();}}},_callee16);}));},[]);/*   useEffect(() => {\n        calcamount1=quantity*sellingprice\n         setCalcAmount(calcamount1)\n         console.log(calcamount)\n         setChangeAmount(true)\n        return () => {\n            \n        }\n    }, [quantity]) */var handleChangePart=/*#__PURE__*/function(){var _ref17=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee17(bill,e){var item,payObj;return _regeneratorRuntime.wrap(function _callee17$(_context17){while(1){switch(_context17.prev=_context17.next){case 0:console.log(bill,e.target.value);if(e.target.value===\"Part\"){bill.show=\"flex\";setPartPay(function(prev){return prev.concat(bill);});}if(!(e.target.value===\"Full\")){_context17.next=11;break;}bill.show=\"none\";_context17.next=6;return productItem.find(function(el){return el._id===bill._id;});case 6:item=_context17.sent;payObj={amount:item.paymentInfo.balance,mode:\"Full\",date:new Date().toLocaleString()};//item.partPay=\"\"\n// item.paymentInfo.paymentDetails.push(payObj)\nitem.proposedpayment={balance:Number(item.paymentInfo.balance)-Number(payObj.amount),paidup:Number(item.paymentInfo.paidup)+Number(payObj.amount),amount:payObj.amount};// item.paymentInfo.balance=item.paymentInfo.balance - item.paymentInfo.balance\n//  item.paymentInfo.paidup=Number(item.paymentInfo.paidup) + Number(payObj.amount)\ngetTotal();setPartPay(function(prev){return prev.concat(bill);});case 11:case\"end\":return _context17.stop();}}},_callee17);}));return function handleChangePart(_x8,_x9){return _ref17.apply(this,arguments);};}();var handlePartAmount=/*#__PURE__*/function(){var _ref18=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee18(bill,e){var partAmount,item;return _regeneratorRuntime.wrap(function _callee18$(_context18){while(1){switch(_context18.prev=_context18.next){case 0:partAmount=e.target.value;// bill.partPay=partAmount\n//const itemList=productItem\nif(!(partAmount===\"\"||partAmount===0)){_context18.next=4;break;}toast({message:'Please enter an amount as part payment',type:'is-danger',dismissible:true,pauseOnHover:true});return _context18.abrupt(\"return\");case 4:_context18.next=6;return productItem.find(function(el){return el._id===bill._id;});case 6:item=_context18.sent;item.partPay=partAmount;setPartPay(function(prev){return prev.concat(bill);});//setProductItem(productItem)\ncase 9:case\"end\":return _context18.stop();}}},_callee18);}));return function handlePartAmount(_x10,_x11){return _ref18.apply(this,arguments);};}();var handleUpdate=/*#__PURE__*/function(){var _ref19=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee19(bill,e){var item,partAmount,payObj;return _regeneratorRuntime.wrap(function _callee19$(_context19){while(1){switch(_context19.prev=_context19.next){case 0:if(!(bill.partPay===\"\"||bill.partPay===0||bill.partPay===undefined)){_context19.next=3;break;}toast({message:'Please enter an amount as part payment',type:'is-danger',dismissible:true,pauseOnHover:true});return _context19.abrupt(\"return\");case 3:_context19.next=5;return productItem.find(function(el){return el._id===bill._id;});case 5:item=_context19.sent;// console.log(item)\n/* item.partPay=partAmount\n        console.log(item)\n        console.log(productItem) */partAmount=item.partPay;if(bill.show===\"flex\"){payObj={amount:partAmount,mode:\"Part\",date:new Date().toLocaleString()};// item.paymentInfo.paymentDetails.push(payObj)\nitem.proposedpayment={balance:Number(item.paymentInfo.balance)-Number(payObj.amount),paidup:Number(item.paymentInfo.paidup)+Number(payObj.amount),amount:payObj.amount};/* item.paymentInfo.balance=item.paymentInfo.balance-partAmount\n            item.paymentInfo.paidup=Number(item.paymentInfo.paidup)+ Number(partAmount) */}/* if (bill.show===\"none\"){\n            const   payObj={\n                amount:  item.paymentInfo.balance,\n                mode:\"Full\",\n                date: new Date().toLocaleString()\n            }\n            item.paymentInfo.paymentDetails.push(payObj)\n            item.paymentInfo.balance=item.paymentInfo.balance - item.paymentInfo.balance\n            }\n            \n */getTotal();setPartPay(function(prev){return prev.concat(bill);});toast({message:'Part payment updated successfully',type:'is-success',dismissible:true,pauseOnHover:true});case 11:case\"end\":return _context19.stop();}}},_callee19);}));return function handleUpdate(_x12,_x13){return _ref19.apply(this,arguments);};}();var handleAuth=function handleAuth(bill,e){console.log(e.chec);if(e.checked){}/*   const    newProductEntryModule={\n        selectedMedication:ProductEntry,\n        show :'detail'\n    }\n  await setState((prevstate)=>({...prevstate, medicationModule:newProductEntryModule})) */ //console.log(state)\n};var handlePayment=/*#__PURE__*/function(){var _ref20=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee21(){var allItems,obj;return _regeneratorRuntime.wrap(function _callee21$(_context21){while(1){switch(_context21.prev=_context21.next){case 0:if(!(totalamount>balance)){_context21.next=3;break;}toast({message:'Total amount due greater than money received. Kindly top up account or reduce number of bills to be paid',type:'is-danger',dismissible:true,pauseOnHover:true});return _context21.abrupt(\"return\");case 3:productItem.forEach(function(el){if(!el.proposedpayment.amount){toast({message:'one or more bills do not have a payment method selected',type:'is-danger',dismissible:true,pauseOnHover:true});return;}});//transform \nproductItem.forEach(function(el){if(el.show===\"flex\"){var payObj={amount:el.proposedpayment.amount,mode:\"Part\",date:new Date().toLocaleString()};el.paymentInfo.paymentDetails.push(payObj);}if(el.show===\"none\"){var _payObj={amount:el.proposedpayment.amount,mode:\"Full\",date:new Date().toLocaleString()};el.paymentInfo.paymentDetails.push(_payObj);}});allItems=productItem;allItems.forEach(function(el){el.paymentInfo.balance=el.proposedpayment.balance;el.paymentInfo.paidup=el.proposedpayment.paidup;el.paymentInfo.amountpaid=el.proposedpayment.amount;if(el.paymentInfo.balance===0){el.billing_status=\"Fully Paid\";}else{el.billing_status=\"Part Payment\";}el.show=\"none\";el.checked=false;delete el.proposedpayment;delete el.partPay;});obj={clientId:medication.participantInfo.client._id,//sending money\nclientName:source,client:medication.participantInfo.client,facilityId:user.employeeData[0].facilityDetail._id,invoiceNo:documentNo,totalamount:totalamount,createdby:user._id,status:\"Fully Paid\",//billid to be paid : ref invoice to pay\nbills:allItems,balance:balance,facilityName:user.employeeData[0].facilityDetail.facilityName};console.log(obj);InvoiceServ.create(obj).then(/*#__PURE__*/function(){var _ref21=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee20(resp){var newProductEntryModule;return _regeneratorRuntime.wrap(function _callee20$(_context20){while(1){switch(_context20.prev=_context20.next){case 0:setProductItem([]);toast({message:'payment successful',type:'is-success',dismissible:true,pauseOnHover:true});newProductEntryModule={selectedFinance:{},show:'create'};_context20.next=5;return setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{finance:newProductEntryModule});});case 5:case\"end\":return _context20.stop();}}},_callee20);}));return function(_x14){return _ref21.apply(this,arguments);};}()).catch(function(err){toast({message:'Error occurred with payment'+err,type:'is-danger',dismissible:true,pauseOnHover:true});});//2. call single end point for billspayment?\n//2.1 create subwallet transaction- debit\n//2.2 update subwallet\n//2.3 mark orders as paid\n//2.4 mark bills as paid\ncase 10:case\"end\":return _context21.stop();}}},_callee21);}));return function handlePayment(){return _ref20.apply(this,arguments);};}();// console.log(\"simpa\")\nreturn/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card card-overflow mb-2 \",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-header\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"card-header-title\",children:[\"Make Deposit for \",source]}),/*#__PURE__*/_jsxs(\"button\",{className:\"button is-success is-small btnheight mt-2\",children:[\"Balance: N \",balance]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"card-content pb-1\",children:/*#__PURE__*/_jsx(\"div\",{id:\"Deposit\",children:/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal pullup\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field-body\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsx(\"div\",{className:\"control\",children:/*#__PURE__*/_jsx(\"div\",{className:\"select is-small \",children:/*#__PURE__*/_jsxs(\"select\",{name:\"paymentmode\",value:paymentmode,onChange:function onChange(e){return handleChangeMode(e.target.value);},className:\"selectadd\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Payment Mode \"}),/*#__PURE__*/_jsx(\"option\",{value:\"Cash\",children:\"Cash\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Wallet\",children:\"Wallet \"}),/*#__PURE__*/_jsx(\"option\",{value:\"Wallet\",children:\"Bank Transfer \"}),/*#__PURE__*/_jsx(\"option\",{value:\"Card\",children:\"Card\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Cheque\",children:\"Cheque\"})]})})})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",name:\"order\",value:amountPaid,type:\"text\",onChange:function onChange(e){return setAmountPaid(e.target.value);},placeholder:\"Amount\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-hashtag\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsx(\"p\",{className:\"control  \"/* style={{display:\"none\"}} has-icons-left*/,children:/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",name:\"description\",value:description,type:\"text\",onChange:/*#__PURE__*/function(){var _ref22=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee22(e){return _regeneratorRuntime.wrap(function _callee22$(_context22){while(1){switch(_context22.prev=_context22.next){case 0:_context22.next=2;return setDescription(e.target.value);case 2:return _context22.abrupt(\"return\",_context22.sent);case 3:case\"end\":return _context22.stop();}}},_callee22);}));return function(_x15){return _ref22.apply(this,arguments);};}(),placeholder:\"Payment Details\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"field \",children:/*#__PURE__*/_jsx(\"p\",{className:\"control\",children:/*#__PURE__*/_jsx(\"button\",{className:\"button is-info is-small  is-pulled-left selectadd\",disabled:buttonState,children:/*#__PURE__*/_jsx(\"span\",{className:\"is-small\",onClick:handleAccept,children:\"Accept\"})})})})]})})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card card-overflow\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-header-title\",children:[\"Pay Bills for \",source,\"   #\",documentNo]}),/*#__PURE__*/_jsxs(\"button\",{className:\"button is-danger is-small btnheight mt-2\",children:[\"Total Amount Due: N \",totalamount]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"card-content \",children:productItem.length>0&&/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"vscrollable-acc pullup\",children:[/*#__PURE__*/_jsxs(\"table\",{className:\"table is-striped  is-hoverable is-fullwidth is-scrollable \",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Serial No\",children:\"S/No\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Category\",children:\"Category\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Description\",children:\"Description\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Cost Price\",children:\"Type\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Amount\",children:\"Amount\"})})]})}),/*#__PURE__*/_jsx(\"tfoot\",{}),/*#__PURE__*/_jsx(\"tbody\",{children:productItem.map(function(ProductEntry,i){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:i+1}),/*#__PURE__*/_jsx(\"th\",{children:ProductEntry.orderInfo.orderObj.order_category}),/*#__PURE__*/_jsx(\"td\",{children:ProductEntry.serviceInfo.name}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\" is-small\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:ProductEntry._id,value:\"Capitation\",checked:ProductEntry.show===\"none\",onChange:function onChange(e){handleChangePart(ProductEntry,e);}}),/*#__PURE__*/_jsx(\"span\",{children:\" Capitation\"})]}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"label\",{className:\" is-small\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:ProductEntry._id,value:\"Fee for Service\",onChange:function onChange(e){return handleChangePart(ProductEntry,e);}}),/*#__PURE__*/_jsx(\"span\",{children:\" Fee for Service \"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field has-addons\",style:{display:\"\".concat(ProductEntry.show)},children:[/*#__PURE__*/_jsx(\"div\",{className:\"control\",children:/*#__PURE__*/_jsx(\"input\",{className:\"input selectadd\",type:\"text\",name:ProductEntry._id/* value={ProductEntry.partPay}  */,onChange:function onChange(e){return handlePartAmount(ProductEntry,e);}})}),/*#__PURE__*/_jsx(\"div\",{className:\"control\",children:/*#__PURE__*/_jsx(\"button\",{className:\"button is-info selectadd\",onClick:function onClick(e){return handleUpdate(ProductEntry,e);},children:\"Update\"})})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"label\",{className:\" is-small\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:ProductEntry._id,value:\"Co-Pay\",onChange:function onChange(e){return handleChangePart(ProductEntry,e);}}),/*#__PURE__*/_jsx(\"span\",{children:\" Co-Pay \"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field has-addons\",style:{display:\"\".concat(ProductEntry.show)},children:[/*#__PURE__*/_jsx(\"div\",{className:\"control\",children:/*#__PURE__*/_jsx(\"input\",{className:\"input selectadd\",type:\"text\",name:ProductEntry._id/* value={ProductEntry.partPay}  */,onChange:function onChange(e){return handlePartAmount(ProductEntry,e);}})}),/*#__PURE__*/_jsx(\"div\",{className:\"control\",children:/*#__PURE__*/_jsx(\"button\",{className:\"button is-info selectadd\",onClick:function onClick(e){return handleUpdate(ProductEntry,e);},children:\"Update\"})})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"label\",{className:\" is-small\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:ProductEntry._id,value:\"Not Covered\",onChange:function onChange(e){return handleChangePart(ProductEntry,e);}}),/*#__PURE__*/_jsx(\"span\",{children:\" Not Covered \"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field has-addons\",style:{display:\"\".concat(ProductEntry.show)},children:[/*#__PURE__*/_jsx(\"div\",{className:\"control\",children:/*#__PURE__*/_jsx(\"input\",{className:\"input selectadd\",type:\"text\",name:ProductEntry._id/* value={ProductEntry.partPay}  */,onChange:function onChange(e){return handlePartAmount(ProductEntry,e);}})}),/*#__PURE__*/_jsx(\"div\",{className:\"control\",children:/*#__PURE__*/_jsx(\"button\",{className:\"button is-info selectadd\",onClick:function onClick(e){return handleUpdate(ProductEntry,e);},children:\"Update\"})})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"label\",{className:\" is-small\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"Auth\",value:\"Authorization Code\",onChange:function onChange(e){return handleAuth(ProductEntry,e);}}),/*#__PURE__*/_jsx(\"span\",{children:\" Authorization Code \"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field has-addons\",style:{display:\"\".concat(ProductEntry.authcode)},children:[/*#__PURE__*/_jsx(\"div\",{className:\"control\",children:/*#__PURE__*/_jsx(\"input\",{className:\"input selectadd\",type:\"text\",name:ProductEntry._id/* value={ProductEntry.partPay}  */,onChange:function onChange(e){return handlePartAmount(ProductEntry,e);}})}),/*#__PURE__*/_jsx(\"div\",{className:\"control\",children:/*#__PURE__*/_jsx(\"button\",{className:\"button is-info selectadd\",onClick:function onClick(e){return handleUpdate(ProductEntry,e);},children:\"Update\"})})]})]}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Balance Due:\"}),ProductEntry.paymentInfo.balance,\"  (\",ProductEntry.proposedpayment.balance,\")\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Paid Up:\"}),ProductEntry.paymentInfo.paidup,\" (\",ProductEntry.proposedpayment.paidup,\")\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Amount:\"}),ProductEntry.paymentInfo.amountDue]})]})]},i);})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"field mt-2 is-grouped\",children:/*#__PURE__*/_jsx(\"p\",{className:\"control\",children:/*#__PURE__*/_jsx(\"button\",{className:\"button is-success is-small\",disabled:!productItem.length>0,onClick:handlePayment,children:\"Pay\"})})})]})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal \".concat(productModal?\"is-active\":\"\"),children:[/*#__PURE__*/_jsx(\"div\",{className:\"modal-background\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-card  modalbkgrnd\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"modal-card-head  btnheight\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"modal-card-title\",children:\"Documentation\"}),/*#__PURE__*/_jsx(\"button\",{className:\"delete\",\"aria-label\":\"close\",onClick:handlecloseModal})]}),/*#__PURE__*/_jsx(\"section\",{className:\"modal-card-body modalcolor\",children:/*#__PURE__*/_jsx(Encounter,{standalone:\"true\"})})]})]})]});}export function InventorySearch(_ref23){var getSearchfacility=_ref23.getSearchfacility,clear=_ref23.clear;var productServ=client.service('inventory');var _useState65=useState([]),_useState66=_slicedToArray(_useState65,2),facilities=_useState66[0],setFacilities=_useState66[1];// eslint-disable-next-line\nvar _useState67=useState(false),_useState68=_slicedToArray(_useState67,2),searchError=_useState68[0],setSearchError=_useState68[1];// eslint-disable-next-line\nvar _useState69=useState(false),_useState70=_slicedToArray(_useState69,2),showPanel=_useState70[0],setShowPanel=_useState70[1];// eslint-disable-next-line\nvar _useState71=useState(\"\"),_useState72=_slicedToArray(_useState71,2),searchMessage=_useState72[0],setSearchMessage=_useState72[1];// eslint-disable-next-line \nvar _useState73=useState(\"\"),_useState74=_slicedToArray(_useState73,2),simpa=_useState74[0],setSimpa=_useState74[1];// eslint-disable-next-line \nvar _useState75=useState(false),_useState76=_slicedToArray(_useState75,2),chosen=_useState76[0],setChosen=_useState76[1];// eslint-disable-next-line \nvar _useState77=useState(0),_useState78=_slicedToArray(_useState77,2),count=_useState78[0],setCount=_useState78[1];var inputEl=useRef(null);var _useState79=useState(\"\"),_useState80=_slicedToArray(_useState79,2),val=_useState80[0],setVal=_useState80[1];var _useContext3=useContext(UserContext),user=_useContext3.user;var _useContext4=useContext(ObjectContext),state=_useContext4.state;var _useState81=useState(false),_useState82=_slicedToArray(_useState81,2),productModal=_useState82[0],setProductModal=_useState82[1];var handleRow=/*#__PURE__*/function(){var _ref24=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee23(obj){return _regeneratorRuntime.wrap(function _callee23$(_context23){while(1){switch(_context23.prev=_context23.next){case 0:_context23.next=2;return setChosen(true);case 2://alert(\"something is chaning\")\ngetSearchfacility(obj);_context23.next=5;return setSimpa(obj.name);case 5:// setSelectedFacility(obj)\nsetShowPanel(false);_context23.next=8;return setCount(2);case 8:case\"end\":return _context23.stop();}}},_callee23);}));return function handleRow(_x16){return _ref24.apply(this,arguments);};}();var handleBlur=/*#__PURE__*/function(){var _ref25=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee24(e){return _regeneratorRuntime.wrap(function _callee24$(_context24){while(1){switch(_context24.prev=_context24.next){case 0:if(count===2){console.log(\"stuff was chosen\");}/*  console.log(\"blur\")\n         setShowPanel(false)\n        console.log(JSON.stringify(simpa))\n        if (simpa===\"\"){\n            console.log(facilities.length)\n            setSimpa(\"abc\")\n            setSimpa(\"\")\n            setFacilities([])\n            inputEl.current.setValue=\"\"\n        }\n        console.log(facilities.length)\n        console.log(inputEl.current) */case 1:case\"end\":return _context24.stop();}}},_callee24);}));return function handleBlur(_x17){return _ref25.apply(this,arguments);};}();var handleSearch=/*#__PURE__*/function(){var _ref26=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee25(value){var field,_query;return _regeneratorRuntime.wrap(function _callee25$(_context25){while(1){switch(_context25.prev=_context25.next){case 0:setVal(value);if(!(value===\"\")){_context25.next=5;break;}setShowPanel(false);getSearchfacility(false);return _context25.abrupt(\"return\");case 5:field='name';//field variable\nif(!(value.length>=3)){_context25.next=10;break;}productServ.find({query:(_query={},_defineProperty(_query,field,{$regex:value,$options:'i'}),_defineProperty(_query,\"facility\",user.currentEmployee.facilityDetail._id),_defineProperty(_query,\"storeId\",state.StoreModule.selectedStore._id),_defineProperty(_query,\"$limit\",10),_defineProperty(_query,\"$sort\",{createdAt:-1}),_query)}).then(function(res){console.log(\"product  fetched successfully\");console.log(res.data);setFacilities(res.data);setSearchMessage(\" product  fetched successfully\");setShowPanel(true);}).catch(function(err){toast({message:'Error creating ProductEntry '+err,type:'is-danger',dismissible:true,pauseOnHover:true});});_context25.next=16;break;case 10:console.log(\"less than 3 \");console.log(val);setShowPanel(false);_context25.next=15;return setFacilities([]);case 15:console.log(facilities);case 16:case\"end\":return _context25.stop();}}},_callee25);}));return function handleSearch(_x18){return _ref26.apply(this,arguments);};}();var handleAddproduct=function handleAddproduct(){setProductModal(true);};var handlecloseModal=function handlecloseModal(){setProductModal(false);handleSearch(val);};useEffect(function(){if(clear){console.log(\"success has changed\",clear);setSimpa(\"\");}return function(){};},[clear]);return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsx(\"div\",{className:\"control has-icons-left  \",children:/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown \".concat(showPanel?\"is-active\":\"\"),style:{width:\"100%\"},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown-trigger\",style:{width:\"100%\"},children:[/*#__PURE__*/_jsx(DebounceInput,{className:\"input is-small  is-expanded\",type:\"text\",placeholder:\"Search Product\",value:simpa,minLength:3,debounceTimeout:400,onBlur:function onBlur(e){return handleBlur(e);},onChange:function onChange(e){return handleSearch(e.target.value);},inputRef:inputEl}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-search\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"dropdown-menu expanded\",style:{width:\"100%\"},children:/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown-content\",children:[facilities.length>0?\"\":/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown-item\"/* onClick={handleAddproduct} */,children:[\" \",/*#__PURE__*/_jsxs(\"span\",{children:[\" \",val,\" is not in your inventory\"]}),\" \"]}),facilities.map(function(facility,i){return/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown-item\",onClick:function onClick(){return handleRow(facility);},children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"span\",{children:facility.name})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{children:/*#__PURE__*/_jsx(\"strong\",{children:facility.quantity})}),/*#__PURE__*/_jsxs(\"span\",{children:[facility.baseunit,\"(s) remaining\"]}),/*#__PURE__*/_jsxs(\"span\",{className:\"padleft\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Price:\"}),\" N\",facility.sellingprice]})]})]},facility._id);})]})})]})})})});}","map":{"version":3,"sources":["/home/mfybaby/Documents/HealthStack2/HS-frontend/src/components/Finance/HmoClaimCreate.js"],"names":["React","useState","useContext","useEffect","useRef","client","DebounceInput","useForm","UserContext","ObjectContext","toast","ProductCreate","Encounter","random","require","searchfacility","HmoClaimCreate","success","setSuccess","message","setMessage","facility","setFacility","SubwalletTxServ","service","SubwalletServ","OrderServ","InvoiceServ","user","currentUser","setCurrentUser","type","setType","documentNo","setDocumentNo","totalamount","setTotalamount","description","setDescription","productId","setProductId","source","setSource","date","setDate","name","setName","inventoryId","setInventoryId","baseunit","setBaseunit","quantity","setQuantity","sellingprice","setSellingPrice","costprice","setCostprice","invquantity","setInvQuantity","calcamount","setCalcAmount","productItem","setProductItem","billingId","setBilllingId","changeAmount","setChangeAmount","paymentmode","setPaymentMode","paymentOptions","setPaymentOptions","billMode","setBillMode","productModal","setProductModal","obj","setObj","amountPaid","setAmountPaid","balance","setBalance","buttonState","setButtonState","partPay","setPartPay","state","setState","inputEl","calcamount1","hidestatus","productitems","productEntry","setProductEntry","medication","financeModule","selectedFinance","showDocumentation","value","handlecloseModal","handleChangeMode","handleRow","ProductEntry","newProductEntryModule","selectedMedication","show","prevstate","medicationModule","productItemI","amount","getSearchfacility","contracts","billingDetails","contract","filter","el","source_org","detail","hmo","price","company","handleUpdateTotal","prevtotal","Number","handleChangeType","e","target","handleAmount","handleClickProd","dismissible","pauseOnHover","prevProd","concat","billInfo","orderInfo","orderId","_id","orderObj","serviceInfo","createdby","paymentInfo","participantInfo","billingFacility","destination","billingFacilityName","destination_name","locationId","StoreModule","selectedStore","clientId","createdBy","id","billing_status","patch","order_status","then","resp","catch","err","console","log","handleQtty","resetform","handleMedicationDone","onSubmit","preventDefault","transactioncategory","currentEmployee","facilityDetail","storeId","handleChangeAmount","rev","newclient","handleAccept","organization","employeeData","category","toName","facilityName","fromName","firstname","lastname","LocationModule","selectedLocation","confirm","window","create","oldname","newname","proposedpayment","paidup","length","getFacilities","getTotal","forEach","find","query","$limit","$sort","createdAt","findProductEntry","data","today","Date","toLocaleString","invoiceNo","on","handleChangePart","bill","prev","item","payObj","mode","handlePartAmount","partAmount","handleUpdate","undefined","handleAuth","chec","checked","handlePayment","paymentDetails","push","allItems","amountpaid","clientName","facilityId","status","bills","finance","map","i","order_category","display","authcode","amountDue","InventorySearch","clear","productServ","facilities","setFacilities","searchError","setSearchError","showPanel","setShowPanel","searchMessage","setSearchMessage","simpa","setSimpa","chosen","setChosen","count","setCount","val","setVal","handleBlur","handleSearch","field","$regex","$options","res","handleAddproduct","width"],"mappings":"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","sourcesContent":["/* eslint-disable */\nimport React, {useState,useContext, useEffect,useRef} from 'react'\nimport client from '../../feathers'\nimport {DebounceInput} from 'react-debounce-input';\nimport { useForm } from \"react-hook-form\";\n//import {useHistory} from 'react-router-dom'\nimport {UserContext,ObjectContext} from '../../context'\nimport {toast} from 'bulma-toast'\nimport {ProductCreate} from './Products'\nimport Encounter from '../EncounterMgt/Encounter';\nvar random = require('random-string-generator');\n// eslint-disable-next-line\nconst searchfacility={};\n\nexport default function HmoClaimCreate(){\n    // const { register, handleSubmit,setValue} = useForm(); //, watch, errors, reset \n     //const [error, setError] =useState(false)\n     const [success, setSuccess] =useState(false)\n     const [message,setMessage] = useState(\"\")\n     // eslint-disable-next-line\n     const [facility,setFacility] = useState()\n     const SubwalletTxServ=client.service('subwallettransactions')\n     const SubwalletServ=client.service('subwallet')\n     const OrderServ=client.service('order')\n     const InvoiceServ=client.service('invoice')\n     //const history = useHistory()\n     const {user} = useContext(UserContext) //,setUser\n     // eslint-disable-next-line\n     const [currentUser,setCurrentUser] = useState()\n     const [type,setType] = useState(\"Bill\")\n     const [documentNo,setDocumentNo] = useState(\"\")\n     const [totalamount,setTotalamount] = useState(0)\n     const [description,setDescription] = useState(\"\")\n     const [productId,setProductId] = useState(\"\")\n     const [source,setSource] = useState(\"\")\n     const [date,setDate] = useState(\"\")\n     const [name,setName] = useState(\"\")\n     const [inventoryId,setInventoryId] = useState(\"\")\n     const [baseunit,setBaseunit] = useState(\"\")\n     const [quantity,setQuantity] = useState(\"\")\n     const [sellingprice,setSellingPrice] = useState(\"\")\n     const [costprice,setCostprice] = useState(0)\n     const [invquantity,setInvQuantity] = useState(\"\")\n     const [calcamount,setCalcAmount] = useState(0)\n     const [productItem,setProductItem] = useState([])\n      const [billingId,setBilllingId]=useState(\"\")  \n      const [changeAmount, setChangeAmount] = useState(true)\n      const [paymentmode, setPaymentMode] = useState(\"Cash\")\n      const [paymentOptions, setPaymentOptions]=useState([])\n      const [billMode, setBillMode]=useState(\"\")\n      const [productModal, setProductModal]=useState(false)\n      const [obj, setObj]=useState(\"\")\n      const [amountPaid, setAmountPaid]=useState(0)\n      const [balance, setBalance]=useState(0)\n      const [buttonState, setButtonState]=useState(false)\n      const [partPay,setPartPay]=useState([])\n     \n     const {state,setState}=useContext(ObjectContext)\n     const inputEl = useRef(0);\n     let calcamount1\n     let hidestatus\n  \n     const [productEntry,setProductEntry]=useState({\n        productitems:[],\n        date,\n        documentNo,\n        type,\n        totalamount,\n        source,\n\n    })\n \n    \n  let medication =state.financeModule.selectedFinance\n  //console.log(state.financeModule.state)\n\n  const showDocumentation = async (value)=>{\n    setProductModal(true)\n  }\n  const handlecloseModal =()=>{\n    setProductModal(false)\n   // handleSearch(val)\n    }\n\n  const handleChangeMode= async(value)=>{\n        //console.log(value)\n       await setPaymentMode(value)\n      /*   console.log(paymentOptions)\n       let billm= paymentOptions.filter(el=>el.name===value)\n       await setBillMode(billm)\n        console.log(billm) */\n        // at startup\n        // check payment mode options from patient financial info\n        // load that to select options\n        // default to HMO-->company-->family-->cash\n        //when chosen\n        //append payment mode to order\n        //check service contract for pricing info\n        // calculate pricing \n        // pricing\n\n\n    }\n\n  const handleRow= async(ProductEntry)=>{\n    //console.log(\"b4\",state)\n\n    //console.log(\"handlerow\",ProductEntry)\n\n    //await setMedication(ProductEntry)\n\n    const    newProductEntryModule={\n        selectedMedication:ProductEntry,\n        show :'detail'\n    }\n  await setState((prevstate)=>({...prevstate, medicationModule:newProductEntryModule}))\n   //console.log(state)\n  // ProductEntry.show=!ProductEntry.show\n\n        }  \n \n\n  const productItemI={\n         productId,\n         name,\n         quantity,\n         sellingprice,\n         amount:calcamount, //||qamount\n         baseunit,\n         costprice,\n         billingId\n \n     }\n     // consider batchformat{batchno,expirydate,qtty,baseunit}\n     //consider baseunoit conversions\n  const getSearchfacility=async (obj)=>{\n       await setObj(obj)\n        if (!obj){\n            //\"clear stuff\"\n            setProductId(\"\")\n            setName(\"\")\n            setBaseunit(\"\")\n            setInventoryId(\"\")\n            setSellingPrice(\"\")\n            setInvQuantity(\"\")\n            setDescription(\"\")\n            setCostprice(\"\")\n           // setCalcAmount(null)\n            return\n        }\n \n         setProductId(obj.productId)\n         setName(obj.name)\n         setBaseunit(obj.baseunit)\n         setInventoryId(obj.inventoryId)\n         setSellingPrice(obj.sellingprice) //modify this based on billing mode\n         setInvQuantity(obj.quantity)\n         setCostprice(obj.costprice)\n         setBilllingId(obj.billingId)\n\n         const contracts=obj.billingDetails.contracts\n         //const billingserv=client.service('billing')\n        if( billMode.type===\"HMO Cover\"){ //paymentmode\n         let contract=contracts.filter(el=>el.source_org===billMode.detail.hmo)\n       //  console.log(contract[0].price)\n         setSellingPrice(contract[0].price)\n       //  console.log(sellingprice)\n        \n        }\n        if( billMode.type===\"Company Cover\"){ //paymentmode\n            let contract=contracts.filter(el=>el.source_org===billMode.detail.company)\n         //   console.log(contract[0].price)\n            setSellingPrice(contract[0].price)\n         //   console.log(sellingprice)\n           \n           }\n          \n        /*  setValue(\"facility\", obj._id,  {\n             shouldValidate: true,\n             shouldDirty: true\n         }) */\n     }\n\n     useEffect(() => {\n       /*  console.log(obj)\n        console.log(billMode)\n        if( paymentmode!==\"Cash\" && obj){\n            const contracts=obj.billingDetails.contracts\n            let contract=contracts.filter(el=>el.source_org===billMode.detail.hmo)\n           console.log(contract[0].price)\n           setSellingPrice(contract[0].price)\n           console.log(sellingprice)\n       }\n         return () => {\n            \n         } */\n     }, [obj])\n\n     useEffect(() => {\n         setCurrentUser(user)\n         //console.log(currentUser)\n         return () => {\n         \n         }\n     }, [user])\n \n     const handleUpdateTotal=async ()=>{\n        await setTotalamount(prevtotal=>Number(prevtotal) + Number(calcamount))\n     }\n \n     const handleChangeType=async (e)=>{\n         //console.log(e.target.value)\n         await setType(e.target.value)\n     }\n \n     const handleAmount= async()=>{\n         await setDescription(\"\")\n        // alert(\"Iam chaning qamount\")\n     }\n\n     const handleClickProd=async()=>{\n       /*   console.log(\"amount: \",productItemI.amount)\n         console.log(\"qamount: \",qamount)\n         console.log(\"calcamount: \",calcamount) */\n        if ( quantity===0||quantity===\"\"|| productId===\"\"){\n            toast({\n                message: 'You need to choose a product and quantity to proceed',\n                type: 'is-danger',\n                dismissible: true,\n                pauseOnHover: true,\n              }) \n              return \n        }\n\n         await setSuccess(false)\n         await setProductItem(\n             prevProd=>prevProd.concat(productItemI)\n         )\n        handleUpdateTotal()\n            // generate billing info\n            const billInfo={\n                orderInfo:{\n                    orderId:medication._id,\n                    orderObj:medication,\n                  },\n                  serviceInfo:{            \n                    price: productItemI.sellingprice,\n                    quantity: productItemI.quantity,\n                    productId: productItemI.productId,\n                    name: productItemI.name,\n                    baseunit: productItemI.baseunit,\n                    amount:productItemI.amount,\n                    billingId:productItemI.billingId,\n                    createdby:user._id,\n                  },\n                  paymentInfo:{},\n                  participantInfo:{\n                    billingFacility:medication.destination,\n                    billingFacilityName:medication.destination_name,\n                    locationId:state.StoreModule.selectedStore._id, //selected location,\n                    clientId:medication.clientId,\n                    client:medication.client,\n                    paymentmode:billMode\n                  },\n                  createdBy:user.id,\n                  billing_status:\"Unpaid\"\n                }\n\n        //update order\n        \n        OrderServ.patch(medication._id,{\n            order_status:\"Billed\",\n            billInfo,\n        }).then((resp)=>{\n           // medication=resp\n           // console.log(resp)\n             handleRow(resp) \n            //update dispense\n\n        })\n        .catch((err)=>{\n            console.log(err)\n        })\n        \n        //update status(billed) + action()\n        //?attached chosen product to medication\n        //dispense helper?\n         setName(\"\")\n         setBaseunit(\"\")\n         setQuantity(\"\")\n         setInventoryId(\"\")\n         setSellingPrice(\"\")\n         setInvQuantity(\"\")\n             handleAmount()\n        // setCalcAmount(null)\n        await setSuccess(true)\n        /* console.log(success)\n        console.log(qamount)\n        console.log(productItem) */\n        setChangeAmount(true)\n     }\n   \n \n     const handleQtty=async(e)=>{\n         if (invquantity<e.target.value){\n             toast({\n                 message: 'You can not sell more quantity than exist in inventory ' ,\n                 type: 'is-danger',\n                 dismissible: true,\n                 pauseOnHover: true,\n               })\n             return\n         }\n         setQuantity(e.target.value)\n         calcamount1=quantity*sellingprice\n         await setCalcAmount(calcamount1)\n       //  console.log(calcamount)\n     }\n \n     useEffect( () => {\n          setProductEntry({\n             \n             date,\n             documentNo,\n             type,\n             totalamount,\n             source,\n         })\n\n        setCalcAmount(quantity*sellingprice) \n         return () => {\n             \n         }\n     },[date])\n \n     const resetform=()=>{\n      setType(\"Sales\")\n     setDocumentNo(\"\")\n     setTotalamount(\"\")\n     setProductId(\"\")\n     setSource(\"\")\n     setDate(\"\")\n     setName(\"\")\n     setBaseunit(\"\")\n     setCostprice(\"\")\n     setProductItem([])\n     }\n\n\n     const handleMedicationDone= async()=>{ //handle selected single order\n        //console.log(\"b4\",state)\n    \n        //console.log(\"handlerow\",ProductEntry)\n    \n       // await setSelectedMedication(\"\")\n    \n        const    newProductEntryModule={\n            selectedMedication:{},\n            show :'create'\n        }\n        \n      await setState((prevstate)=>({...prevstate, medicationModule:newProductEntryModule}))\n       //console.log(state)\n      // ProductEntry.show=!ProductEntry.show\n    \n    }\n \n     const onSubmit = async(e) =>{\n         e.preventDefault();\n         setMessage(\"\")\n         //setError(false)\n         setSuccess(false)\n         await setProductEntry({\n             \n             date,\n             documentNo,\n             type,\n             totalamount,\n             source,\n         })\n         productEntry.productitems=productItem\n         productEntry.createdby=user._id\n         productEntry.transactioncategory=\"debit\"\n        \n          // console.log(\"b4 facility\",productEntry);\n           if (user.currentEmployee){\n          productEntry.facility=user.currentEmployee.facilityDetail._id  // or from facility dropdown\n           }else{\n             toast({\n                 message: 'You can not remove inventory from any organization',\n                 type: 'is-danger',\n                 dismissible: true,\n                 pauseOnHover: true,\n               }) \n               return\n           }\n           \n           if (state.StoreModule.selectedStore._id){\n             productEntry.storeId=state.StoreModule.selectedStore._id\n           }else{\n             toast({\n                 message: 'You need to select a store before removing inventory',\n                 type: 'is-danger',\n                 dismissible: true,\n                 pauseOnHover: true,\n               }) \n               return\n           }\n       } \n\n    const handleChangeAmount=()=>{\n        setChangeAmount((rev)=>(!rev))\n        \n    }\n\n    const newclient=async ()=>{\n        await  setProductItem([])\n    }\n    const handleAccept=async()=>{\n        await setButtonState(true)\n        if (paymentmode===\"\"||amountPaid===0|| amountPaid===\"\"){\n            toast({\n                message: 'Kindly choose payment mode or enter amount' ,\n                type: 'is-danger',\n                dismissible: true,\n                pauseOnHover: true,\n              })\n              await setButtonState(false)\n              return\n        }\n        let obj={\n           // toWallet:{ type: Schema.Types.ObjectId, ref:'facility', }, //receiving money\n            //fromWallet:{ type: Schema.Types.ObjectId, ref:'facility', },//sending money\n            //subwallet:{ type: Schema.Types.ObjectId, ref:'subwallet', },\n            client:medication.participantInfo.client._id,\n            organization:user.employeeData[0].facilityDetail._id,\n            category:\"credit\", //debit/credit\n            amount:amountPaid,\n            description: description,\n           \n            toName:user.employeeData[0].facilityDetail.facilityName,\n            fromName:medication.participantInfo.client.firstname + \" \"+ medication.participantInfo.client.lastname,\n            createdby: user._id,\n            \n           // refBill:[{ type: Schema.Types.ObjectId, ref:'bills'  }], //billid to be paid : ref invoice to pay\n           // info:{ type: Schema.Types.Mixed},\n            paymentmode:paymentmode,\n            \n            facility: user.employeeData[0].facilityDetail._id,\n            locationId: state.LocationModule.selectedLocation._id,\n            type: \"Deposit\"\n\n        }\n        let confirm = window.confirm(`Are you sure you want to accept N ${obj.amount} from ${obj.fromName}`)\n        if (confirm){\n\n      \n       await SubwalletTxServ.create(obj)\n       .then((resp)=>{\n          // console.log(resp)\n\n        toast({\n            message: 'Deposit accepted succesfully',\n            type: 'is-success',\n            dismissible: true,\n            pauseOnHover: true,\n          })\n          setAmountPaid(0)\n          setDescription(\"\")\n       })\n       .catch((err)=>{\n        toast({\n            message: 'Error accepting deposit ' + err,\n            type: 'is-danger',\n            dismissible: true,\n            pauseOnHover: true,\n          })\n\n       })\n    }\n       await setButtonState(false)\n    }\n\n    useEffect(() => {\n        const oldname=medication.participantInfo.client.firstname + \" \"+ medication.participantInfo.client.lastname\n       // console.log(\"oldname\",oldname)\n        setSource(medication.participantInfo.client.firstname + \" \"+ medication.participantInfo.client.lastname)\n\n        const newname=source\n       // console.log(\"newname\",newname)\n        if (oldname!==newname){\n            //newdispense\n        \n        setProductItem([])\n        setTotalamount(0)\n\n        }\n        //is the row checked or unchecked\n        if (state.financeModule.state){\n            medication.show=\"none\"\n            medication.proposedpayment={\n                balance:0,\n                paidup:medication.paymentInfo.paidup + medication.paymentInfo.balance,\n                amount:medication.paymentInfo.balance\n            }\n            //no payment detail push\n          \n         setProductItem(\n            prevProd=>prevProd.concat(medication)\n        )\n        }else{\n            if(productItem.length>0){\n                setProductItem(\n                    prevProd=>prevProd.filter(el=>el._id!==medication._id)\n                )\n            }\n        }\n\n       // const paymentoptions= []\n        //const info = medication.participantInfo.client.paymentinfo\n        //let billme={}\n        getFacilities()\n       \n        return () => {\n           \n        }\n    }, [state.financeModule])\n\n    const getTotal= async()=>{\n        setTotalamount(0)\n        productItem.forEach(el=>{\n            if (el.show===\"none\"){\n                if (el.billing_status===\"Unpaid\"){\n                    setTotalamount(prevtotal=>Number(prevtotal) + Number(el.serviceInfo.amount) )   \n                }else{\n                    setTotalamount(prevtotal=>Number(prevtotal) + Number(el.paymentInfo.balance) )\n                }\n               \n            }\n            if (el.show===\"flex\"){\n                setTotalamount(prevtotal=>Number(prevtotal) + Number(el.partPay) )\n            }\n          \n            // \n        })\n    }\n\n    useEffect(() => {\n        console.log(productItem)\n       getTotal()\n        return () => {\n        \n        }\n    }, [productItem])\n\n    const getFacilities= async()=>{\n       \n        // console.log(\"here b4 server\")\n        const findProductEntry= await SubwalletServ.find(\n        {query: {\n           \n            client:medication.participantInfo.client._id,\n            organization:user.employeeData[0].facilityDetail._id,\n            //storeId:state.StoreModule.selectedStore._id,\n            //clientId:state.ClientModule.selectedClient._id,\n            $limit:100,\n            $sort: {\n                createdAt: -1\n            }\n            }})\n             console.log(findProductEntry)\n\n     // console.log(\"balance\", findProductEntry.data[0].amount)\n        if (findProductEntry.data.length>0){\n            await setBalance(findProductEntry.data[0].amount)\n        }else{\n            await setBalance(0) \n            \n        } \n\n      //  await setState((prevstate)=>({...prevstate, currentClients:findProductEntry.groupedOrder}))\n        }   \n\n\n\n     useEffect(() => {\n       // const medication =state.medicationModule.selectedMedication\n         const today=new Date().toLocaleString()\n         //console.log(today)\n         setDate(today)\n         const invoiceNo=random(6,'uppernumeric')\n         setDocumentNo(invoiceNo)\n\n            getFacilities()\n            SubwalletServ.on('created', (obj)=>getFacilities())\n            SubwalletServ.on('updated', (obj)=>getFacilities())\n            SubwalletServ.on('patched', (obj)=>getFacilities())\n            SubwalletServ.on('removed', (obj)=>getFacilities())\n\n         return async() => {\n            const    newProductEntryModule={\n                selectedFinance:{},\n                show :'create'\n                }\n           await setState((prevstate)=>({...prevstate, financeModule:newProductEntryModule}))\n           await setPartPay([])\n         }\n     }, [])\n\n  /*   useEffect(() => {\n        calcamount1=quantity*sellingprice\n         setCalcAmount(calcamount1)\n         console.log(calcamount)\n         setChangeAmount(true)\n        return () => {\n            \n        }\n    }, [quantity]) */\n\n    \n    const handleChangePart= async(bill, e)=>{\n        console.log(bill, e.target.value)\n        if(e.target.value===\"Part\"){\n            bill.show=\"flex\"\n        setPartPay((prev)=>prev.concat(bill))\n        }\n      \n        if(e.target.value===\"Full\"){\n            bill.show=\"none\"\n            \n            let item=  await productItem.find(el=>\n                el._id===bill._id\n            )\n            const   payObj={\n                amount:  item.paymentInfo.balance,\n                mode:\"Full\",\n                date: new Date().toLocaleString()\n            }\n            //item.partPay=\"\"\n           // item.paymentInfo.paymentDetails.push(payObj)\n            item.proposedpayment={\n                balance:Number(item.paymentInfo.balance) - Number(payObj.amount),\n                paidup:Number(item.paymentInfo.paidup) + Number(payObj.amount),\n                amount:payObj.amount\n            }\n           // item.paymentInfo.balance=item.paymentInfo.balance - item.paymentInfo.balance\n          //  item.paymentInfo.paidup=Number(item.paymentInfo.paidup) + Number(payObj.amount)\n            getTotal()\n            setPartPay((prev)=>prev.concat(bill))\n\n        }\n        \n    }\n\n    const handlePartAmount= async(bill,e)=>{\n        \n        let partAmount = e.target.value\n       // bill.partPay=partAmount\n       //const itemList=productItem\n       if (partAmount===\"\" ||partAmount===0  ){\n        toast({\n            message: 'Please enter an amount as part payment',\n            type: 'is-danger',\n            dismissible: true,\n            pauseOnHover: true,\n          })\n        return\n       }\n       let item=  await productItem.find(el=>\n        el._id===bill._id\n        )\n    item.partPay=partAmount\n    setPartPay((prev)=>prev.concat(bill))     \n        //setProductItem(productItem)\n    }\n\n    const handleUpdate= async(bill,e)=>{\n        if (bill.partPay===\"\" ||bill.partPay===0||bill.partPay===undefined  ){\n            toast({\n                message: 'Please enter an amount as part payment',\n                type: 'is-danger',\n                dismissible: true,\n                pauseOnHover: true,\n              })\n            return\n           }\n       // console.log(bill)\n        let item=  await productItem.find(el=>\n            el._id===bill._id\n        )\n       // console.log(item)\n        /* item.partPay=partAmount\n        console.log(item)\n        console.log(productItem) */\n        \n        let partAmount= item.partPay\n       \n        if (bill.show===\"flex\"){\n                const  payObj={\n                amount:  partAmount,\n                mode:\"Part\",\n                date: new Date().toLocaleString()\n            }\n           // item.paymentInfo.paymentDetails.push(payObj)\n            item.proposedpayment={\n                balance:Number(item.paymentInfo.balance) - Number(payObj.amount),\n                paidup:Number(item.paymentInfo.paidup) + Number(payObj.amount),\n                amount:payObj.amount\n            }\n            /* item.paymentInfo.balance=item.paymentInfo.balance-partAmount\n            item.paymentInfo.paidup=Number(item.paymentInfo.paidup)+ Number(partAmount) */\n\n        }\n\n        /* if (bill.show===\"none\"){\n            const   payObj={\n                amount:  item.paymentInfo.balance,\n                mode:\"Full\",\n                date: new Date().toLocaleString()\n            }\n            item.paymentInfo.paymentDetails.push(payObj)\n            item.paymentInfo.balance=item.paymentInfo.balance - item.paymentInfo.balance\n            }\n            \n */\n        \n        getTotal()\n        setPartPay((prev)=>prev.concat(bill))\n        toast({\n            message: 'Part payment updated successfully',\n            type: 'is-success',\n            dismissible: true,\n            pauseOnHover: true,\n          })\n\n    }\n\n    const handleAuth= (bill, e)=>{\n\n        console.log(e.chec)\n        if (e.checked){\n           \n        }\n       \n\n        \n  /*   const    newProductEntryModule={\n        selectedMedication:ProductEntry,\n        show :'detail'\n    }\n  await setState((prevstate)=>({...prevstate, medicationModule:newProductEntryModule})) */\n   //console.log(state)\n    }\n    const handlePayment= async ()=>{\n           //1. check if there is sufficient amount\n           if ( totalamount>balance){\n            toast({\n                message: 'Total amount due greater than money received. Kindly top up account or reduce number of bills to be paid',\n                type: 'is-danger',\n                dismissible: true,\n                pauseOnHover: true,\n              })\n    \n              return\n           }\n          \n           \n           \n    productItem.forEach(el=>{\n            if (!el.proposedpayment.amount){\n             toast({\n                 message: 'one or more bills do not have a payment method selected',\n                 type: 'is-danger',\n                 dismissible: true,\n                 pauseOnHover: true,\n               })\n             return\n             }\n            })\n\n             //transform \n    productItem.forEach(el=>{\n            if (el.show===\"flex\"){\n                    const  payObj={\n                    amount:  el.proposedpayment.amount,\n                    mode:\"Part\",\n                    date: new Date().toLocaleString()\n                }\n            el.paymentInfo.paymentDetails.push(payObj)\n            }\n\n            if (el.show===\"none\"){\n                const  payObj={\n                amount:  el.proposedpayment.amount,\n                mode:\"Full\",\n                date: new Date().toLocaleString()\n                }\n                el.paymentInfo.paymentDetails.push(payObj)\n                }\n\n            })\n\n        let allItems=productItem\n\n           allItems.forEach(el=>{\n\n            el.paymentInfo.balance = el.proposedpayment.balance\n            el.paymentInfo.paidup = el.proposedpayment.paidup\n            el.paymentInfo.amountpaid = el.proposedpayment.amount\n\n            if (el.paymentInfo.balance === 0){\n                el.billing_status=\"Fully Paid\"\n            }else{\n                el.billing_status=\"Part Payment\"\n            }\n            el.show=\"none\"\n            el.checked=false\n            delete el.proposedpayment\n            delete el.partPay\n           })\n           \n\n           const obj ={\n            clientId:medication.participantInfo.client._id,//sending money\n            clientName: source ,\n            client:medication.participantInfo.client,\n            facilityId:user.employeeData[0].facilityDetail._id,\n            invoiceNo:documentNo,\n            totalamount:totalamount,\n            createdby:user._id,\n            status:\"Fully Paid\", //billid to be paid : ref invoice to pay\n            bills:allItems,\n            balance:balance,\n            facilityName:user.employeeData[0].facilityDetail.facilityName\n           }\n\n           console.log(obj)\n\n           \n            InvoiceServ.create(obj)\n            .then( async(resp)=>{\n                setProductItem([])\n                toast({\n                    message: 'payment successful',\n                    type: 'is-success',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  })\n                  const    newProductEntryModule={\n                    selectedFinance:{},\n                    show :'create'\n                }\n              await setState((prevstate)=>({...prevstate, finance:newProductEntryModule}))\n            })\n            .catch((err)=>{\n                toast({\n                    message: 'Error occurred with payment' + err,\n                    type: 'is-danger',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  }) \n            })\n\n        \n           \n           //2. call single end point for billspayment?\n\n           //2.1 create subwallet transaction- debit\n\n           //2.2 update subwallet\n\n           //2.3 mark orders as paid\n\n           //2.4 mark bills as paid\n\n        }\n// console.log(\"simpa\")\n     return (\n         <>\n          <div className=\"card card-overflow mb-2 \">\n             <div className=\"card-header\">\n                 <p className=\"card-header-title\">\n                    Make Deposit for {source}\n                 </p>\n                 <button className=\"button is-success is-small btnheight mt-2\" >\n                    Balance: N {balance}\n                 </button>\n             </div>\n             <div className=\"card-content pb-1\">\n             <div id=\"Deposit\">\n         \n         <div className=\"field is-horizontal pullup\">\n             <div className=\"field-body\">\n             \n             <div className=\"field\">    \n                    <div className=\"control\">\n                        <div className=\"select is-small \">\n                            <select name=\"paymentmode\" value={paymentmode} onChange={(e)=>handleChangeMode(e.target.value)} className=\"selectadd\" >\n                                <option value=\"\">Payment Mode </option>\n                                <option value=\"Cash\">Cash</option>\n                                <option value=\"Wallet\">Wallet </option>\n                                <option value=\"Wallet\">Bank Transfer </option>\n                                <option value=\"Card\">Card</option>\n                                <option value=\"Cheque\">Cheque</option> \n                            </select>\n                        </div>\n                    </div>\n                    </div>\n             <div className=\"field\" >\n                 <p className=\"control has-icons-left\" >\n                     <input className=\"input is-small\"  name=\"order\" value={amountPaid} type=\"text\" onChange={ e=> setAmountPaid(e.target.value)} placeholder=\"Amount\"  />\n                     <span className=\"icon is-small is-left\">\n                     <i className=\"fas fa-hashtag\"></i>\n                     </span>\n                 </p>\n             </div> \n             <div className=\"field\" >\n                 <p className=\"control  \" /* style={{display:\"none\"}} has-icons-left*/>\n                     <input className=\"input is-small\"  name=\"description\"  value={description} type=\"text\"  onChange={async e=> await setDescription(e.target.value)}  placeholder=\"Payment Details\"  />\n                     {/* <span className=\"icon is-small is-left\">\n                     <i className=\"fas fa-dollar-sign\"></i> \n                     </span>*/}\n                 </p>\n             </div> \n             <div className=\"field \">\n                <p className=\"control\">\n                     <button className=\"button is-info is-small  is-pulled-left selectadd\" disabled={buttonState}>\n                       <span className=\"is-small\" onClick={handleAccept} >Accept</span>\n                     </button>\n                 </p>\n             </div>\n             </div>\n             </div>\n            \n      \n          \n          </div> \n         </div>\n          </div>\n             <div className=\"card card-overflow\">\n             <div className=\"card-header\">\n                 <div className=\"card-header-title\">\n                     Pay Bills for {source}   #{documentNo} \n                 </div>\n                \n                <button className=\"button is-danger is-small btnheight mt-2\" >\n                    Total Amount Due: N {totalamount}\n                 </button> \n             </div>\n             <div className=\"card-content \">\n    \n            {/*  <form onSubmit={onSubmit}>  */}\n           {/*   <div className=\"field is-horizontal\">\n             <div className=\"field-body\">\n         \n             <div className=\"field\">\n                     <p className=\"control has-icons-left has-icons-right\">\n                         <input className=\"input is-small\"  ref={register({ required: true })}  value={source} name=\"client\" type=\"text\" onChange={e=>setSource(e.target.value)} placeholder=\"Client\" />\n                         <span className=\"icon is-small is-left\">\n                             <i className=\"fas fa-hospital\"></i>\n                         </span>                    \n                     </p>\n                 </div>\n                 <div className=\"field\">\n                 <p className=\"control has-icons-left\">\n                     <input className=\"input is-small\"  ref={register}  name=\"documentNo\" value={documentNo} type=\"text\" onChange={e=>setDocumentNo(e.target.value)} placeholder=\" Invoice Number\"/>\n                     <span className=\"icon is-small is-left\">\n                     <i className=\"fas fa-phone-alt\"></i>\n                     </span>\n                 </p>\n             </div>\n                </div>\n             </div> */}\n             \n             {/* <div className=\"field is-horizontal pullup\">\n             <div className=\"field-body\" >\n             <div className=\"field\">\n             <label className=\"label is-small\">Total Amount Due:</label>\n             </div>\n             <div className=\"field\" style={{width:\"40%\"}}>\n                 <p className=\"control has-icons-left \"  style={{display:\"none\"}} >\n                     <input className=\"input is-small\"  disabled={changeAmount} value={totalamount} name=\"totalamount\"  onChange={e=>setTotalamount(e.target.value)} placeholder=\"Amount\"  />\n                     <span className=\"icon is-small is-left\">\n                     <i className=\"fas fa-dollar-sign\"></i>\n                     </span>\n                 </p>\n                \n \n             </div> \n            \n             </div>\n          </div> */}\n                \n               {/*   </form>   */} \n                \n            \n          {/* array of ProductEntry items */}\n          \n\n        {(productItem.length>0) && <>\n        <div className=\"vscrollable-acc pullup\">\n             \n          <table className=\"table is-striped  is-hoverable is-fullwidth is-scrollable \">\n                 <thead>\n                     <tr>\n                     <th><abbr title=\"Serial No\">S/No</abbr></th>\n                     <th><abbr title=\"Category\">Category</abbr></th>\n                     <th><abbr title=\"Description\">Description</abbr></th>\n                    \n                     <th><abbr title=\"Cost Price\">Type</abbr></th>\n                     <th><abbr title=\"Amount\">Amount</abbr></th>\n                     {/* <th><abbr title=\"Cost Price\">Amount</abbr></th> */}\n                     {/* <th><abbr title=\"Actions\">Actions</abbr></th> */}\n                     </tr>\n                 </thead>\n                 <tfoot>\n                     \n                 </tfoot>\n                 <tbody>\n                    { productItem.map((ProductEntry, i)=>(\n                          <tr key={i}>\n                         <th>{i+1}</th>\n                         <th>{ProductEntry.orderInfo.orderObj.order_category}</th>\n                         <td>{ProductEntry.serviceInfo.name}</td>\n                         <td>\n                             <label className=\" is-small\">\n                             <input  type=\"radio\" name={ProductEntry._id} value=\"Capitation\" checked={ProductEntry.show===\"none\"}  onChange={(e)=>{handleChangePart(ProductEntry,e)}}/>\n                               <span > Capitation</span>\n                              </label> <br/>\n                              <label className=\" is-small\">\n                             <input type=\"radio\" name={ProductEntry._id}  value=\"Fee for Service\" onChange={(e)=>handleChangePart(ProductEntry,e)}/>\n                             <span> Fee for Service </span>\n                              </label>\n                              <div className=\"field has-addons\" style={{display:`${ProductEntry.show}`}}>\n                              <div className=\"control\">\n                                  <input  className=\"input selectadd\" type=\"text\" name={ProductEntry._id}  /* value={ProductEntry.partPay}  */  onChange={(e)=>handlePartAmount(ProductEntry,e)} />\n                                  </div> \n                                  <div className=\"control\">\n                                  <button className=\"button is-info selectadd\" onClick={(e)=>handleUpdate(ProductEntry,e)}>Update</button>\n                                  </div>\n                                  </div>\n                                  <br/><label className=\" is-small\">\n                             <input type=\"radio\" name={ProductEntry._id}  value=\"Co-Pay\" onChange={(e)=>handleChangePart(ProductEntry,e)}/>\n                             <span> Co-Pay </span>\n                              </label>\n                              <div className=\"field has-addons\" style={{display:`${ProductEntry.show}`}}>\n                              <div className=\"control\">\n                                  <input  className=\"input selectadd\" type=\"text\" name={ProductEntry._id}  /* value={ProductEntry.partPay}  */  onChange={(e)=>handlePartAmount(ProductEntry,e)} />\n                                  </div> \n                                  <div className=\"control\">\n                                  <button className=\"button is-info selectadd\" onClick={(e)=>handleUpdate(ProductEntry,e)}>Update</button>\n                                  </div>\n                                  </div>\n                                  <br/><label className=\" is-small\">\n                             <input type=\"radio\" name={ProductEntry._id}  value=\"Not Covered\" onChange={(e)=>handleChangePart(ProductEntry,e)}/>\n                             <span> Not Covered </span>\n                              </label>\n                              <div className=\"field has-addons\" style={{display:`${ProductEntry.show}`}}>\n                              <div className=\"control\">\n                                  <input  className=\"input selectadd\" type=\"text\" name={ProductEntry._id}  /* value={ProductEntry.partPay}  */  onChange={(e)=>handlePartAmount(ProductEntry,e)} />\n                                  </div> \n                                  <div className=\"control\">\n                                  <button className=\"button is-info selectadd\" onClick={(e)=>handleUpdate(ProductEntry,e)}>Update</button>\n                                  </div>\n                                  </div>\n                                  <br/><label className=\" is-small\">\n                             <input type=\"checkbox\" name=\"Auth\"  value=\"Authorization Code\" onChange={(e)=>handleAuth(ProductEntry,e)}/>\n                             <span> Authorization Code </span>\n                              </label>\n                              <div className=\"field has-addons\" style={{display:`${ProductEntry.authcode}`}}>\n                              <div className=\"control\">\n                                  <input  className=\"input selectadd\" type=\"text\" name={ProductEntry._id}  /* value={ProductEntry.partPay}  */  onChange={(e)=>handlePartAmount(ProductEntry,e)} />\n                                  </div> \n                                  <div className=\"control\">\n                                  <button className=\"button is-info selectadd\" onClick={(e)=>handleUpdate(ProductEntry,e)}>Update</button>\n                                  </div>\n                                  </div>\n                             {/*  {ProductEntry.partPay} */}\n                              </td>\n                         <td>\n                            <p><strong>Balance Due:</strong>{ProductEntry.paymentInfo.balance}  ({ProductEntry.proposedpayment.balance})</p>\n                            <p><strong>Paid Up:</strong>{ProductEntry.paymentInfo.paidup} ({ProductEntry.proposedpayment.paidup })</p>\n                            <p><strong>Amount:</strong>{ProductEntry.paymentInfo.amountDue}</p>\n                         </td>\n\n                          \n                        {/* <td>{ProductEntry.amount}</td> */}\n                        {/*  <td><span className=\"showAction\"  >x</span></td> */}\n                         </tr>\n                     ))}\n                 </tbody>\n                 </table>\n               \n                 <div className=\"field mt-2 is-grouped\">\n                    <p className=\"control\">\n                        <button className=\"button is-success is-small\" disabled={!productItem.length>0} onClick={handlePayment}>\n                            Pay\n                        </button>\n                    </p>\n                  {/* <p className=\"control\">\n                     <button className=\"button is-info is-small\" disabled={!productItem.length>0} onClick={onSubmit} >\n                         Generate Invoice\n                     </button>\n                 </p>  */}\n                 </div>\n                 </div>    \n        \n            </>\n        }   \n             \n             \n             </div>\n             </div>\n             <div className={`modal ${productModal?\"is-active\":\"\"}` }>\n                                    <div className=\"modal-background\"></div>\n                                    <div className=\"modal-card  modalbkgrnd\">\n                                        <header className=\"modal-card-head  btnheight\">\n                                        <p className=\"modal-card-title\">Documentation</p>\n                                        <button className=\"delete\" aria-label=\"close\"  onClick={handlecloseModal}></button>\n                                        </header>\n                                        <section className=\"modal-card-body modalcolor\">\n                                      \n                                         <Encounter standalone=\"true\" />\n                                        </section> \n                                        {/* <footer className=\"modal-card-foot\">\n                                        <button className=\"button is-success\">Save changes</button>\n                                        <button className=\"button\">Cancel</button>\n                                        </footer>  */}\n                                   </div>\n                                </div>      \n         </>\n     )\n    \n }\n \n\n export  function InventorySearch({getSearchfacility,clear}) {\n    \n    const productServ=client.service('inventory')\n    const [facilities,setFacilities]=useState([])\n     // eslint-disable-next-line\n     const [searchError, setSearchError] =useState(false)\n     // eslint-disable-next-line\n    const [showPanel, setShowPanel] =useState(false)\n     // eslint-disable-next-line\n   const [searchMessage, setSearchMessage] = useState(\"\") \n   // eslint-disable-next-line \n   const [simpa,setSimpa]=useState(\"\")\n   // eslint-disable-next-line \n   const [chosen,setChosen]=useState(false)\n   // eslint-disable-next-line \n   const [count,setCount]=useState(0)\n   const inputEl=useRef(null)\n   const [val,setVal]=useState(\"\")\n   const {user} = useContext(UserContext) \n   const {state}=useContext(ObjectContext)\n    const [productModal,setProductModal]=useState(false)\n\n   const handleRow= async(obj)=>{\n        await setChosen(true)\n        //alert(\"something is chaning\")\n       getSearchfacility(obj)\n       \n       await setSimpa(obj.name)\n       \n        // setSelectedFacility(obj)\n        setShowPanel(false)\n        await setCount(2)\n        /* const    newfacilityModule={\n            selectedFacility:facility,\n            show :'detail'\n        }\n   await setState((prevstate)=>({...prevstate, facilityModule:newfacilityModule})) */\n   //console.log(state)\n    }\n    const handleBlur=async(e)=>{\n         if (count===2){\n             console.log(\"stuff was chosen\")\n         }\n       \n       /*  console.log(\"blur\")\n         setShowPanel(false)\n        console.log(JSON.stringify(simpa))\n        if (simpa===\"\"){\n            console.log(facilities.length)\n            setSimpa(\"abc\")\n            setSimpa(\"\")\n            setFacilities([])\n            inputEl.current.setValue=\"\"\n        }\n        console.log(facilities.length)\n        console.log(inputEl.current) */\n    }\n    const handleSearch=async(value)=>{\n        setVal(value)\n        if (value===\"\"){\n            setShowPanel(false)\n            getSearchfacility(false)\n            return\n        }\n        const field='name' //field variable\n\n       \n        if (value.length>=3 ){\n            productServ.find({query: {     //service\n                 [field]: {\n                     $regex:value,\n                     $options:'i'\n                    \n                 },\n                 facility: user.currentEmployee.facilityDetail._id,\n                 storeId: state.StoreModule.selectedStore._id,\n                 $limit:10,\n                 $sort: {\n                     createdAt: -1\n                   }\n                     }}).then((res)=>{\n              console.log(\"product  fetched successfully\") \n              console.log(res.data) \n                setFacilities(res.data)\n                 setSearchMessage(\" product  fetched successfully\")\n                 setShowPanel(true)\n             })\n             .catch((err)=>{\n                toast({\n                    message: 'Error creating ProductEntry ' + err,\n                    type: 'is-danger',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  })\n             })\n         }\n        else{\n            console.log(\"less than 3 \")\n            console.log(val)\n            setShowPanel(false)\n            await setFacilities([])\n            console.log(facilities)\n        }\n    }\n\n    const handleAddproduct =()=>{\n        setProductModal(true) \n    }\n    const handlecloseModal =()=>{\n        setProductModal(false)\n        handleSearch(val)\n    }\n    useEffect(() => {\n       if (clear){\n           console.log(\"success has changed\",clear)\n           setSimpa(\"\")\n       }\n        return () => {\n            \n        }\n    }, [clear] )\n    return (\n        <div>\n            <div className=\"field\">\n                <div className=\"control has-icons-left  \">\n                    <div className={`dropdown ${showPanel?\"is-active\":\"\"}`} style={{width:\"100%\"}}>\n                        <div className=\"dropdown-trigger\" style={{width:\"100%\"}}>\n                            <DebounceInput className=\"input is-small  is-expanded\" \n                                type=\"text\" placeholder=\"Search Product\"\n                                value={simpa}\n                                minLength={3}\n                                debounceTimeout={400}\n                                onBlur={(e)=>handleBlur(e)}\n                                onChange={(e)=>handleSearch(e.target.value)}\n                                inputRef={inputEl}\n                                  />\n                            <span className=\"icon is-small is-left\">\n                                <i className=\"fas fa-search\"></i>\n                            </span>\n                        </div>\n                        {/* {searchError&&<div>{searchMessage}</div>} */}\n                        <div className=\"dropdown-menu expanded\" style={{width:\"100%\"}}>\n                            <div className=\"dropdown-content\">\n                          { facilities.length>0?\"\":<div className=\"dropdown-item\" /* onClick={handleAddproduct} */> <span> {val} is not in your inventory</span> </div>}\n\n                              {facilities.map((facility, i)=>(\n                                    \n                                    <div className=\"dropdown-item\" key={facility._id} onClick={()=>handleRow(facility)}>\n                                        \n                                        <div><span>{facility.name}</span></div>\n                                        <div><span><strong>{facility.quantity}</strong></span>\n                                        <span>{facility.baseunit}(s) remaining</span>\n                                        <span className=\"padleft\"><strong>Price:</strong> N{facility.sellingprice}</span></div>\n                                        \n                                    </div>\n                                    \n                                    ))}\n                                    \n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            \n        </div>\n    )\n}"]},"metadata":{},"sourceType":"module"}