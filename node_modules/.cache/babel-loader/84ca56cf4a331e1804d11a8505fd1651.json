{"ast":null,"code":"import{Fragment as _Fragment}from\"react/jsx-runtime\";import _regeneratorRuntime from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _slicedToArray from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";/* eslint-disable */import React,{useState,useContext,useEffect,useRef}from'react';import client from'../../feathers';import{DebounceInput}from'react-debounce-input';import{useForm}from\"react-hook-form\";//import {useHistory} from 'react-router-dom'\nimport{UserContext,ObjectContext}from'../../context';import{toast}from'bulma-toast';import{format,formatDistanceToNowStrict}from'date-fns';import AdmissionCreate from'./AdmissionCreate';import PatientProfile from'../ClientMgt/PatientProfile';/* import {ProductCreate} from './Products' */ // eslint-disable-next-line\n//const searchfacility={};\nimport{Accordion,AccordionItem,AccordionItemHeading,AccordionItemButton,AccordionItemPanel}from'react-accessible-accordion';// Demo styles, see 'Styles' section below for some notes on use.\nimport'react-accessible-accordion/dist/fancy-example.css';import ClientBilledAdmission from'./ClientAdmission';export default function Admission(){//const {state}=useContext(ObjectContext) //,setState\n// eslint-disable-next-line\nvar _useState=useState(),_useState2=_slicedToArray(_useState,2),selectedProductEntry=_useState2[0],setSelectedProductEntry=_useState2[1];//const [showState,setShowState]=useState() //create|modify|detail\nvar _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];// eslint-disable-next-line\nvar _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),success=_useState6[0],setSuccess=_useState6[1];// eslint-disable-next-line\nvar _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),message=_useState8[0],setMessage=_useState8[1];var OrderServ=client.service('order');//const history = useHistory()\n// const {user,setUser} = useContext(UserContext)\nvar _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),facilities=_useState10[0],setFacilities=_useState10[1];// eslint-disable-next-line\nvar _useState11=useState(),_useState12=_slicedToArray(_useState11,2),selectedDispense=_useState12[0],setSelectedDispense=_useState12[1];//\n// eslint-disable-next-line\nvar _useContext=useContext(ObjectContext),state=_useContext.state,setState=_useContext.setState;// eslint-disable-next-line\nvar _useContext2=useContext(UserContext),user=_useContext2.user,setUser=_useContext2.setUser;/*  useEffect(() => {\n        const updatedOne= state.currentClients.filter(el=>(JSON.stringify(el.client_id)===JSON.stringify(state.DispenseModule.selectedDispense.client_id)))\n        console.log(\"udatedone\", updatedOne)\n        console.log(\"state\", state.currentClients)\n        handleRow(updatedOne)\n         return () => {\n             \n         }\n     }, []) */return/*#__PURE__*/_jsx(\"section\",{className:\"section remPadTop\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"columns \",children:[/*#__PURE__*/_jsx(\"div\",{className:\"column is-5 \",children:/*#__PURE__*/_jsx(AdmissionList,{})}),/*#__PURE__*/_jsx(\"div\",{className:\"column is-4 \",children:state.AdmissionModule.show==='detail'&&/*#__PURE__*/_jsx(AdmissionCreate,{})}),/*#__PURE__*/_jsx(\"div\",{className:\"column is-3 \",children:state.AdmissionModule.show==='detail'&&/*#__PURE__*/_jsx(PatientProfile,{})})]})});}export function AdmissionList(){// const { register, handleSubmit, watch, errors } = useForm();\n// eslint-disable-next-line\nvar _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),error=_useState14[0],setError=_useState14[1];// eslint-disable-next-line\nvar _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),success=_useState16[0],setSuccess=_useState16[1];// eslint-disable-next-line\nvar _useState17=useState(\"\"),_useState18=_slicedToArray(_useState17,2),message=_useState18[0],setMessage=_useState18[1];var OrderServ=client.service('order');//const history = useHistory()\n// const {user,setUser} = useContext(UserContext)\nvar _useState19=useState([]),_useState20=_slicedToArray(_useState19,2),facilities=_useState20[0],setFacilities=_useState20[1];// eslint-disable-next-line\nvar _useState21=useState(),_useState22=_slicedToArray(_useState21,2),selectedDispense=_useState22[0],setSelectedDispense=_useState22[1];//\n// eslint-disable-next-line\nvar _useContext3=useContext(ObjectContext),state=_useContext3.state,setState=_useContext3.setState;// eslint-disable-next-line\nvar _useContext4=useContext(UserContext),user=_useContext4.user,setUser=_useContext4.setUser;var _useState23=useState(\"\"),_useState24=_slicedToArray(_useState23,2),selectedMedication=_useState24[0],setSelectedMedication=_useState24[1];var handleSelectedClient=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(Client){var newClientModule;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:// await setSelectedClient(Client)\nnewClientModule={selectedClient:Client,show:'detail'};_context.next=3;return setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{ClientModule:newClientModule});});case 3:case\"end\":return _context.stop();}}},_callee);}));return function handleSelectedClient(_x){return _ref.apply(this,arguments);};}();var handleMedicationRow=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(ProductEntry){var newProductEntryModule;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return handleSelectedClient(ProductEntry.client);case 2:_context2.next=4;return setSelectedMedication(ProductEntry);case 4:newProductEntryModule={selectedAdmission:ProductEntry,show:'detail'};_context2.next=7;return setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{AdmissionModule:newProductEntryModule});});case 7:case\"end\":return _context2.stop();}}},_callee2);}));return function handleMedicationRow(_x2){return _ref2.apply(this,arguments);};}();var handleCreateNew=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var newProductEntryModule;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:newProductEntryModule={selectedDispense:{},show:'create'};_context3.next=3;return setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{DispenseModule:newProductEntryModule});});case 3:case\"end\":return _context3.stop();}}},_callee3);}));return function handleCreateNew(){return _ref3.apply(this,arguments);};}();var handleSearch=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(val){var field;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:field='name';console.log(val);OrderServ.find({query:{$or:[{order:{$regex:val,$options:'i'}},{order_status:{$regex:val,$options:'i'}},{clientname:{$regex:val,$options:'i'}}],order_category:\"Admission Order\",fulfilled:\"False\",destination:user.currentEmployee.facilityDetail._id,destination_location:state.WardModule.selectedWard._id,order_status:\"Pending\",// storeId:state.StoreModule.selectedStore._id,\n//facility:user.currentEmployee.facilityDetail._id || \"\",\n$limit:50,$sort:{createdAt:-1}}}).then(/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(res){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:console.log(res);setFacilities(res.groupedOrder);// await setState((prevstate)=>({...prevstate, currentClients:res.groupedOrder}))\nsetMessage(\" ProductEntry  fetched successfully\");setSuccess(true);case 4:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x4){return _ref5.apply(this,arguments);};}()).catch(function(err){// console.log(err)\nsetMessage(\"Error fetching ProductEntry, probable network issues \"+err);setError(true);});case 3:case\"end\":return _context5.stop();}}},_callee5);}));return function handleSearch(_x3){return _ref4.apply(this,arguments);};}();var getFacilities=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(){var findProductEntry;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:console.log(\"here b4 server\");_context6.next=3;return OrderServ.find({query:{order_category:\"Admission Order\",fulfilled:\"False\",destination:user.currentEmployee.facilityDetail._id,destination_location:state.WardModule.selectedWard._id,order_status:\"Pending\",// need to set this finally\n//storeId:state.StoreModule.selectedStore._id,\n//clientId:state.ClientModule.selectedClient._id,\n$limit:100,$sort:{createdAt:-1}}});case 3:findProductEntry=_context6.sent;console.log(\"updatedorder\",findProductEntry.data);_context6.next=7;return setFacilities(findProductEntry.data);case 7:_context6.next=9;return setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{currentClients:findProductEntry.data});});case 9:case\"end\":return _context6.stop();}}},_callee6);}));return function getFacilities(){return _ref6.apply(this,arguments);};}();//1.consider using props for global data\nuseEffect(function(){// console.log(\"started\")\ngetFacilities();OrderServ.on('created',function(obj){return getFacilities();});OrderServ.on('updated',function(obj){return getFacilities();});OrderServ.on('patched',function(obj){return getFacilities();});OrderServ.on('removed',function(obj){return getFacilities();});return function(){};},[]);var handleRow=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(ProductEntry){var newProductEntryModule;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return setSelectedDispense(ProductEntry);case 2:newProductEntryModule={selectedDispense:ProductEntry,show:'detail'};_context7.next=5;return setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{DispenseModule:newProductEntryModule});});case 5:case\"end\":return _context7.stop();}}},_callee7);}));return function handleRow(_x5){return _ref7.apply(this,arguments);};}();useEffect(function(){getFacilities();return function(){};},[state.WardModule.selectedWard]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"level\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"level-left\",children:/*#__PURE__*/_jsx(\"div\",{className:\"level-item\",children:/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left  \",children:[/*#__PURE__*/_jsx(DebounceInput,{className:\"input is-small \",type:\"text\",placeholder:\"Search Tests\",minLength:3,debounceTimeout:400,onChange:function onChange(e){return handleSearch(e.target.value);}}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-search\"})})]})})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"level-item\",children:[\" \",/*#__PURE__*/_jsx(\"span\",{className:\"is-size-6 has-text-weight-medium\",children:\"Pending Admissions \"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\" pullup\",children:/*#__PURE__*/_jsx(\"div\",{className:\" is-fullwidth vscrollable pr-1\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table is-striped  is-hoverable is-fullwidth is-scrollable mr-2\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Serial No\",children:\"S/No\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Date\",children:\"Date\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Name\",children:\"Name\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Order\",children:\"Admission Order\"})}),/*#__PURE__*/_jsx(\"th\",{children:\"Fulfilled\"}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Status\",children:\"Status\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Requesting Physician\",children:\"Requesting Physician\"})})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:facilities.map(function(order,i){return/*#__PURE__*/_jsxs(\"tr\",{onClick:function onClick(){return handleMedicationRow(order);},className:order._id===((selectedMedication===null||selectedMedication===void 0?void 0:selectedMedication._id)||null)?\"is-selected\":\"\",children:[/*#__PURE__*/_jsx(\"th\",{children:i+1}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{children:format(new Date(order.createdAt),'dd-MM-yy')})}),\" \",/*#__PURE__*/_jsxs(\"th\",{children:[order.client.firstname,\" \",order.client.lastname]}),/*#__PURE__*/_jsx(\"th\",{children:order.order}),/*#__PURE__*/_jsx(\"td\",{children:order.fulfilled===\"True\"?\"Yes\":\"No\"}),/*#__PURE__*/_jsx(\"td\",{children:order.order_status}),/*#__PURE__*/_jsx(\"td\",{children:order.requestingdoctor_Name})]},order._id);})})]})})})]});}export function DispenseDetail(){//const { register, handleSubmit, watch, setValue } = useForm(); //errors,\n// eslint-disable-next-line\nvar _useState25=useState(false),_useState26=_slicedToArray(_useState25,2),error=_useState26[0],setError=_useState26[1];//, \nvar _useState27=useState(\"\"),_useState28=_slicedToArray(_useState27,2),selectedMedication=_useState28[0],setSelectedMedication=_useState28[1];var _useState29=useState(\"\"),_useState30=_slicedToArray(_useState29,2),currentOrder=_useState30[0],setCurrentOrder=_useState30[1];// eslint-disable-next-line\nvar _useState31=useState(\"\"),_useState32=_slicedToArray(_useState31,2),message=_useState32[0],setMessage=_useState32[1];//,\n//const ProductEntryServ=client.service('/ProductEntry')\n//const history = useHistory()\n//const {user,setUser} = useContext(UserContext)\nvar _useContext5=useContext(ObjectContext),state=_useContext5.state,setState=_useContext5.setState;var OrderServ=client.service('order');/* const [ProductEntry, setProductEntry] = useState(\"\")\n    const [facilities, setFacilities] = useState(\"\") */var ProductEntry=state.DispenseModule.selectedDispense;//const facilities=ProductEntry.orders\nvar handleRow=/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(ProductEntry){var newProductEntryModule;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_context8.next=2;return setSelectedMedication(ProductEntry);case 2:newProductEntryModule={selectedMedication:ProductEntry,show:'detail'};_context8.next=5;return setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{medicationModule:newProductEntryModule});});case 5:case\"end\":return _context8.stop();}}},_callee8);}));return function handleRow(_x6){return _ref8.apply(this,arguments);};}();var handleEdit=/*#__PURE__*/function(){var _ref9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(ProductEntry){var newProductEntryModule;return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:newProductEntryModule={selectedDispense:ProductEntry,show:'modify'};_context9.next=3;return setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{DispenseModule:newProductEntryModule});});case 3:case\"end\":return _context9.stop();}}},_callee9);}));return function handleEdit(_x7){return _ref9.apply(this,arguments);};}();useEffect(function(){var client1=state.currentClients.find(function(el){return JSON.stringify(el.client_id)===JSON.stringify(state.DispenseModule.selectedDispense);});setCurrentOrder(client1);// console.log(client1)\nreturn function(){};},[]);/*  \n     const setprod=async()=>{\n        await setProductEntry(state.DispenseModule.selectedDispense)\n    } */useEffect(function(){/* OrderServ.on('created', (obj)=>getFacilities())\n        OrderServ.on('updated', (obj)=>getFacilities())\n       \n        OrderServ.on('removed', (obj)=>getFacilities()) */OrderServ.on('patched',function(obj){//update state.DispenseModule.selectedDispense\n// console.log(obj.clientId)\n// console.log(\"currentClients\",state.currentClients)\nvar current1=state.currentClients.find(function(el){return JSON.stringify(el.client_id)===JSON.stringify(obj.clientId);});setCurrentOrder(current1);// console.log(\"currentone\",current1)\n});return function(){};},[]);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"card \",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsx(\"p\",{className:\"card-header-title\",children:\"Dispense Details\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-content vscrollable\",children:/*#__PURE__*/_jsx(\"div\",{className:\"table-container pullup \",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table is-striped is-narrow is-hoverable is-fullwidth is-scrollable \",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Serial No\",children:\"S/No\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Date\",children:\"Date\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Order\",children:\"Medication\"})}),/*#__PURE__*/_jsx(\"th\",{children:\"Fulfilled\"}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Status\",children:\"Status\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Requesting Physician\",children:\"Requesting Physician\"})})]})}),/*#__PURE__*/_jsx(\"tfoot\",{}),/*#__PURE__*/_jsx(\"tbody\",{children:state.DispenseModule.selectedDispense.orders.map(function(order,i){return/*#__PURE__*/_jsxs(\"tr\",{onClick:function onClick(){return handleRow(order);},className:order._id===((selectedMedication===null||selectedMedication===void 0?void 0:selectedMedication._id)||null)?\"is-selected\":\"\",children:[/*#__PURE__*/_jsx(\"th\",{children:i+1}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{children:format(new Date(order.createdAt),'dd-MM-yy')})}),\" \",/*#__PURE__*/_jsx(\"th\",{children:order.order}),/*#__PURE__*/_jsx(\"td\",{children:order.fulfilled===\"True\"?\"Yes\":\"No\"}),/*#__PURE__*/_jsx(\"td\",{children:order.order_status}),/*#__PURE__*/_jsx(\"td\",{children:order.requestingdoctor_Name})]},order._id);})})]})})})]})});}","map":{"version":3,"sources":["/home/mfybaby/Documents/HealthStack2/HS-frontend/src/components/Ward/Admissions.js"],"names":["React","useState","useContext","useEffect","useRef","client","DebounceInput","useForm","UserContext","ObjectContext","toast","format","formatDistanceToNowStrict","AdmissionCreate","PatientProfile","Accordion","AccordionItem","AccordionItemHeading","AccordionItemButton","AccordionItemPanel","ClientBilledAdmission","Admission","selectedProductEntry","setSelectedProductEntry","error","setError","success","setSuccess","message","setMessage","OrderServ","service","facilities","setFacilities","selectedDispense","setSelectedDispense","state","setState","user","setUser","AdmissionModule","show","AdmissionList","selectedMedication","setSelectedMedication","handleSelectedClient","Client","newClientModule","selectedClient","prevstate","ClientModule","handleMedicationRow","ProductEntry","newProductEntryModule","selectedAdmission","handleCreateNew","DispenseModule","handleSearch","val","field","console","log","find","query","$or","order","$regex","$options","order_status","clientname","order_category","fulfilled","destination","currentEmployee","facilityDetail","_id","destination_location","WardModule","selectedWard","$limit","$sort","createdAt","then","res","groupedOrder","catch","err","getFacilities","findProductEntry","data","currentClients","on","obj","handleRow","e","target","value","map","i","Date","firstname","lastname","requestingdoctor_Name","DispenseDetail","currentOrder","setCurrentOrder","medicationModule","handleEdit","client1","el","JSON","stringify","client_id","current1","clientId","orders"],"mappings":"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","sourcesContent":["/* eslint-disable */\nimport React, {useState,useContext, useEffect,useRef} from 'react'\nimport client from '../../feathers'\nimport {DebounceInput} from 'react-debounce-input';\nimport { useForm } from \"react-hook-form\";\n//import {useHistory} from 'react-router-dom'\nimport {UserContext,ObjectContext} from '../../context'\nimport {toast} from 'bulma-toast'\nimport {format, formatDistanceToNowStrict } from 'date-fns'\nimport AdmissionCreate from './AdmissionCreate'\nimport PatientProfile from '../ClientMgt/PatientProfile'\n/* import {ProductCreate} from './Products' */\n// eslint-disable-next-line\n//const searchfacility={};\nimport {\n    Accordion,\n    AccordionItem,\n    AccordionItemHeading,\n    AccordionItemButton,\n    AccordionItemPanel,\n} from 'react-accessible-accordion';\n\n// Demo styles, see 'Styles' section below for some notes on use.\nimport 'react-accessible-accordion/dist/fancy-example.css';\nimport ClientBilledAdmission from './ClientAdmission';\n\n\n\nexport default function Admission() {\n    //const {state}=useContext(ObjectContext) //,setState\n    // eslint-disable-next-line\n    const [selectedProductEntry,setSelectedProductEntry]=useState()\n    //const [showState,setShowState]=useState() //create|modify|detail\n    const [error, setError] =useState(false)\n    // eslint-disable-next-line\n   const [success, setSuccess] =useState(false)\n    // eslint-disable-next-line\n  const [message, setMessage] = useState(\"\") \n   const OrderServ=client.service('order')\n   //const history = useHistory()\n  // const {user,setUser} = useContext(UserContext)\n   const [facilities,setFacilities]=useState([])\n    // eslint-disable-next-line\n  const [selectedDispense, setSelectedDispense]=useState() //\n   // eslint-disable-next-line\n   const {state,setState}=useContext(ObjectContext)\n   // eslint-disable-next-line\n   const {user,setUser}=useContext(UserContext)\n\n\n\n\n    /*  useEffect(() => {\n        const updatedOne= state.currentClients.filter(el=>(JSON.stringify(el.client_id)===JSON.stringify(state.DispenseModule.selectedDispense.client_id)))\n        console.log(\"udatedone\", updatedOne)\n        console.log(\"state\", state.currentClients)\n        handleRow(updatedOne)\n         return () => {\n             \n         }\n     }, []) */\n    \n    return(\n        <section className= \"section remPadTop\">\n           {/*  <div className=\"level\">\n            <div className=\"level-item\"> <span className=\"is-size-6 has-text-weight-medium\">ProductEntry  Module</span></div>\n            </div> */}\n            <div className=\"columns \">\n                <div className=\"column is-5 \">\n                    <AdmissionList />\n                    </div>\n              \n                <div className=\"column is-4 \">\n                \n                {(state.AdmissionModule.show ==='detail')&&<AdmissionCreate />}\n                </div>\n                <div className=\"column is-3 \">\n                \n                {(state.AdmissionModule.show ==='detail')&&<PatientProfile />}\n                </div>\n\n            </div>                            \n            </section>\n       \n    )\n    \n}\n\nexport function AdmissionList(){\n   // const { register, handleSubmit, watch, errors } = useForm();\n    // eslint-disable-next-line\n    const [error, setError] =useState(false)\n     // eslint-disable-next-line\n    const [success, setSuccess] =useState(false)\n     // eslint-disable-next-line\n   const [message, setMessage] = useState(\"\") \n    const OrderServ=client.service('order')\n    //const history = useHistory()\n   // const {user,setUser} = useContext(UserContext)\n    const [facilities,setFacilities]=useState([])\n     // eslint-disable-next-line\n   const [selectedDispense, setSelectedDispense]=useState() //\n    // eslint-disable-next-line\n    const {state,setState}=useContext(ObjectContext)\n    // eslint-disable-next-line\n    const {user,setUser}=useContext(UserContext)\n    const [selectedMedication, setSelectedMedication] =useState(\"\")\n\n    const handleSelectedClient= async(Client)=>{\n        // await setSelectedClient(Client)\n         const    newClientModule={\n             selectedClient:Client,\n             show :'detail'\n         }\n        await setState((prevstate)=>({...prevstate, ClientModule:newClientModule}))\n     }\n\n    const handleMedicationRow= async(ProductEntry)=>{ //handle selected single order\n        //console.log(\"b4\",state)\n    \n        //console.log(\"handlerow\",ProductEntry)\n        await handleSelectedClient(ProductEntry.client)\n\n    \n        await setSelectedMedication(ProductEntry)\n    \n        const    newProductEntryModule={\n            selectedAdmission:ProductEntry,\n            show :'detail'\n        }\n      await setState((prevstate)=>({...prevstate, AdmissionModule:newProductEntryModule}))\n       //console.log(state)\n      // ProductEntry.show=!ProductEntry.show\n    \n    }\n\n    const handleCreateNew = async()=>{\n        const    newProductEntryModule={\n            selectedDispense:{},\n            show :'create'\n            }\n       await setState((prevstate)=>({...prevstate, DispenseModule:newProductEntryModule}))\n       //console.log(state)\n        \n\n    }\n  \n\n    const handleSearch= async(val)=>{\n       const field='name'\n       console.log(val)\n       OrderServ.find({query: {\n           $or:[\n                {order: {\n                    $regex:val,\n                    $options:'i'\n                   \n                }},\n               { order_status: {\n                    $regex:val,\n                    $options:'i'\n                   \n                }},\n                {clientname: {\n                    $regex:val,\n                    $options:'i'\n                   \n                }}\n                ],\n                order_category:\"Admission Order\",\n                fulfilled:\"False\",\n                destination: user.currentEmployee.facilityDetail._id,\n                destination_location:state.WardModule.selectedWard._id,\n                order_status:\"Pending\",\n               // storeId:state.StoreModule.selectedStore._id,\n               //facility:user.currentEmployee.facilityDetail._id || \"\",\n                $limit:50,\n                $sort: {\n                    createdAt: -1\n                  }\n                }}).then( async(res)=>{\n               console.log(res)\n               setFacilities(res.groupedOrder)\n              // await setState((prevstate)=>({...prevstate, currentClients:res.groupedOrder}))\n                setMessage(\" ProductEntry  fetched successfully\")\n                setSuccess(true)\n            })\n            .catch((err)=>{\n               // console.log(err)\n                setMessage(\"Error fetching ProductEntry, probable network issues \"+ err )\n                setError(true)\n            })\n        }\n\n    const getFacilities= async()=>{\n       \n             console.log(\"here b4 server\")\n    const findProductEntry= await OrderServ.find(\n            {query: {\n                order_category:\"Admission Order\",\n                fulfilled:\"False\",\n                destination: user.currentEmployee.facilityDetail._id,\n                destination_location:state.WardModule.selectedWard._id,\n                order_status:\"Pending\",  // need to set this finally\n                //storeId:state.StoreModule.selectedStore._id,\n                //clientId:state.ClientModule.selectedClient._id,\n                $limit:100,\n                $sort: {\n                    createdAt: -1\n                }\n                }})\n\n                \n           console.log(\"updatedorder\", findProductEntry.data)\n            await setFacilities(findProductEntry.data)\n            await setState((prevstate)=>({...prevstate, currentClients:findProductEntry.data}))\n            }   \n\n    //1.consider using props for global data\n    useEffect(() => {\n        // console.log(\"started\")\n            getFacilities()\n            OrderServ.on('created', (obj)=>getFacilities())\n            OrderServ.on('updated', (obj)=>getFacilities())\n            OrderServ.on('patched', (obj)=>getFacilities())\n            OrderServ.on('removed', (obj)=>getFacilities())\n            return () => {\n            \n            }\n            },[])\n\n    const handleRow= async(ProductEntry)=>{\n    \n        await setSelectedDispense(ProductEntry)\n\n        const    newProductEntryModule={\n            selectedDispense:ProductEntry,\n            show :'detail'\n        }\n        await setState((prevstate)=>({...prevstate, DispenseModule:newProductEntryModule}))\n        //console.log(state)\n        \n        }\n\n   useEffect(() =>{\n    getFacilities()\n\n            return ()=>{\n                \n            }\n\n   }, [state.WardModule.selectedWard])\n\n    return(     \n            <>  \n                <div className=\"level\">\n                    <div className=\"level-left\">\n                        <div className=\"level-item\">\n                            <div className=\"field\">\n                                <p className=\"control has-icons-left  \">\n                                    <DebounceInput className=\"input is-small \" \n                                        type=\"text\" placeholder=\"Search Tests\"\n                                        minLength={3}\n                                        debounceTimeout={400}\n                                        onChange={(e)=>handleSearch(e.target.value)} />\n                                    <span className=\"icon is-small is-left\">\n                                        <i className=\"fas fa-search\"></i>\n                                    </span>\n                                </p>\n                            </div>\n                        </div>\n                    </div>\n                    <div className=\"level-item\"> <span className=\"is-size-6 has-text-weight-medium\">Pending Admissions </span></div>\n                     {/* <div className=\"level-right\">\n                       <div className=\"level-item\"> \n                            <div nclassName=\"level-item\"><div className=\"button is-success is-small\" onClick={handleCreateNew}>New</div></div>\n                        </div> \n                    </div>*/}\n\n                </div>\n                <div className=\" pullup\">\n                    <div className=\" is-fullwidth vscrollable pr-1\">   \n                \n                                    <table className=\"table is-striped  is-hoverable is-fullwidth is-scrollable mr-2\">\n                                            <thead>\n                                                <tr>\n                                                    <th><abbr title=\"Serial No\">S/No</abbr></th>\n                                                    <th><abbr title=\"Date\">Date</abbr></th>\n                                                    <th><abbr title=\"Name\">Name</abbr></th>\n                                                    <th><abbr title=\"Order\">Admission Order</abbr></th>\n                                                    <th>Fulfilled</th>\n                                                    <th><abbr title=\"Status\">Status</abbr></th>\n                                                    <th><abbr title=\"Requesting Physician\">Requesting Physician</abbr></th>\n                                                </tr>\n                                            </thead>\n                                            <tbody>\n                                            { facilities.map((order, i)=>(\n\n                                                        <tr key={order._id} onClick={()=>handleMedicationRow(order)} className={order._id===(selectedMedication?._id||null)?\"is-selected\":\"\"}>                                         \n                                                        <th>{i+1}</th>\n                                                        <td><span>{format(new Date(order.createdAt),'dd-MM-yy')}</span></td> {/* {formatDistanceToNowStrict(new Date(ProductEntry.createdAt),{addSuffix: true})} <br/> */} \n                                                        <th>{order.client.firstname} {order.client.lastname}</th>\n                                                        <th>{order.order}</th>\n                                                        <td>{order.fulfilled===\"True\"?\"Yes\":\"No\"}</td>\n                                                        <td>{order.order_status}</td>\n                                                        <td>{order.requestingdoctor_Name}</td>\n                                                        </tr>\n                                                ))}\n                                            </tbody>\n                                            </table>\n                                            \n                             \n                    </div>                   \n                </div>  \n            </>          \n        )\n    }\n\n\nexport function DispenseDetail(){\n    //const { register, handleSubmit, watch, setValue } = useForm(); //errors,\n     // eslint-disable-next-line\n    const [error, setError] =useState(false) //, \n    const [selectedMedication, setSelectedMedication] =useState(\"\")\n    const [currentOrder, setCurrentOrder] =useState(\"\")\n     // eslint-disable-next-line\n    const [message, setMessage] = useState(\"\") //,\n    //const ProductEntryServ=client.service('/ProductEntry')\n    //const history = useHistory()\n    //const {user,setUser} = useContext(UserContext)\n    const {state,setState} = useContext(ObjectContext)\n    const OrderServ=client.service('order')\n    /* const [ProductEntry, setProductEntry] = useState(\"\")\n    const [facilities, setFacilities] = useState(\"\") */\n\n let ProductEntry =state.DispenseModule.selectedDispense\n   //const facilities=ProductEntry.orders\n\n   const handleRow= async(ProductEntry)=>{\n    //console.log(\"b4\",state)\n\n    //console.log(\"handlerow\",ProductEntry)\n\n    await setSelectedMedication(ProductEntry)\n\n    const    newProductEntryModule={\n        selectedMedication:ProductEntry,\n        show :'detail'\n    }\n  await setState((prevstate)=>({...prevstate, medicationModule:newProductEntryModule}))\n   //console.log(state)\n  // ProductEntry.show=!ProductEntry.show\n\n}\n\n    const handleEdit= async(ProductEntry)=>{\n        const    newProductEntryModule={\n            selectedDispense:ProductEntry,\n            show :'modify'\n        }\n       await setState((prevstate)=>({...prevstate, DispenseModule:newProductEntryModule}))\n       //console.log(state)\n       \n    }\n\n    useEffect(() => {\n\n\n      const client1=  state.currentClients.find(el=>{\n            return JSON.stringify(el.client_id)===JSON.stringify(state.DispenseModule.selectedDispense)\n        })\n\n    setCurrentOrder(client1)\n   // console.log(client1)\n        return () => {\n        \n        }\n    }, [])\n   \n\n /*  \n     const setprod=async()=>{\n        await setProductEntry(state.DispenseModule.selectedDispense)\n    } */\n \n    useEffect(() => {\n        /* OrderServ.on('created', (obj)=>getFacilities())\n        OrderServ.on('updated', (obj)=>getFacilities())\n       \n        OrderServ.on('removed', (obj)=>getFacilities()) */\n        OrderServ.on('patched',  (obj)=>{\n            //update state.DispenseModule.selectedDispense\n           // console.log(obj.clientId)\n           // console.log(\"currentClients\",state.currentClients)\n           const current1=state.currentClients.find(el=>(JSON.stringify(el.client_id)===JSON.stringify(obj.clientId)))\n           setCurrentOrder(current1)\n          // console.log(\"currentone\",current1)\n        })\n      \n        return () => {\n         \n        }\n    },[])\n \n    return (\n        <>\n        <div className=\"card \">\n            <div className=\"card-header\">\n                <p className=\"card-header-title\">\n                    Dispense Details\n                </p>\n            </div>\n            <div className=\"card-content vscrollable\">\n            {/* {JSON.stringify(ProductEntry.orders,2,10)} */}\n            <div className=\"table-container pullup \">\n                                <table className=\"table is-striped is-narrow is-hoverable is-fullwidth is-scrollable \">\n                                    <thead>\n                                        <tr>\n                                        <th><abbr title=\"Serial No\">S/No</abbr></th>\n                                        {/* <th><abbr title=\"Client Name\">Client Name</abbr></th> */}\n                                        {/* <th><abbr title=\"Number of Orders\"># of Medication</abbr></th> */}\n                                        <th><abbr title=\"Date\">Date</abbr></th>\n                                        <th><abbr title=\"Order\">Medication</abbr></th>\n                                        <th>Fulfilled</th>\n                                        <th><abbr title=\"Status\">Status</abbr></th>\n                                        <th><abbr title=\"Requesting Physician\">Requesting Physician</abbr></th>\n                                        \n                                        {/* <th><abbr title=\"Actions\">Actions</abbr></th> */}\n                                        </tr>\n                                    </thead>\n                                    <tfoot>\n                                        \n                                    </tfoot>\n                                    <tbody>\n                                        {state.DispenseModule.selectedDispense.orders.map((order, i)=>(\n\n                                            <tr key={order._id} onClick={()=>handleRow(order)} className={order._id===(selectedMedication?._id||null)?\"is-selected\":\"\"}>\n                                            \n                                               <th>{i+1}</th>\n                                                 {/* <td>{ProductEntry.clientname}</td> \n                                                <td>{ProductEntry.orders.length}</td> */}\n                                           \n                                           \n                                            <td><span>{format(new Date(order.createdAt),'dd-MM-yy')}</span></td> {/* {formatDistanceToNowStrict(new Date(ProductEntry.createdAt),{addSuffix: true})} <br/> */} \n                                          <th>{order.order}</th>\n                                            <td>{order.fulfilled===\"True\"?\"Yes\":\"No\"}</td>\n                                            <td>{order.order_status}</td>\n                                            <td>{order.requestingdoctor_Name}</td>\n                                            \n                                           {/*  <td><span className=\"showAction\"  >...</span></td> */}\n                                           \n                                            </tr>\n\n                                        ))}\n                                    </tbody>\n                                    </table>\n                        \n                </div>              \n               \n            </div>\n        </div>\n        </>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}