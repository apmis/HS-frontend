{"ast":null,"code":"import{Fragment as _Fragment}from\"react/jsx-runtime\";import _regeneratorRuntime from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _slicedToArray from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";/* eslint-disable */import React,{useState,useContext,useEffect,useRef}from'react';import client from'../../feathers';import{DebounceInput}from'react-debounce-input';import{useForm}from\"react-hook-form\";//import {useHistory} from 'react-router-dom'\nimport{UserContext,ObjectContext}from'../../context';import{toast}from'bulma-toast';import{format,formatDistanceToNowStrict}from'date-fns';import BillPrescriptionCreate from'./BillLabCreate';import PatientProfile from'../ClientMgt/PatientProfile';/* import {ProductCreate} from './Products' */ // eslint-disable-next-line\n//const searchfacility={};\nimport{Accordion,AccordionItem,AccordionItemHeading,AccordionItemButton,AccordionItemPanel}from'react-accessible-accordion';// Demo styles, see 'Styles' section below for some notes on use.\nimport'react-accessible-accordion/dist/fancy-example.css';import ClientBilledLab from'./ClientLab';export default function BillLab(){//const {state}=useContext(ObjectContext) //,setState\n// eslint-disable-next-line\nvar _useState=useState(),_useState2=_slicedToArray(_useState,2),selectedProductEntry=_useState2[0],setSelectedProductEntry=_useState2[1];//const [showState,setShowState]=useState() //create|modify|detail\nvar _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];// eslint-disable-next-line\nvar _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),success=_useState6[0],setSuccess=_useState6[1];// eslint-disable-next-line\nvar _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),message=_useState8[0],setMessage=_useState8[1];var OrderServ=client.service('order');//const history = useHistory()\n// const {user,setUser} = useContext(UserContext)\nvar _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),facilities=_useState10[0],setFacilities=_useState10[1];// eslint-disable-next-line\nvar _useState11=useState(),_useState12=_slicedToArray(_useState11,2),selectedDispense=_useState12[0],setSelectedDispense=_useState12[1];//\n// eslint-disable-next-line\nvar _useContext=useContext(ObjectContext),state=_useContext.state,setState=_useContext.setState;// eslint-disable-next-line\nvar _useContext2=useContext(UserContext),user=_useContext2.user,setUser=_useContext2.setUser;/*  useEffect(() => {\n        const updatedOne= state.currentClients.filter(el=>(JSON.stringify(el.client_id)===JSON.stringify(state.DispenseModule.selectedDispense.client_id)))\n        console.log(\"udatedone\", updatedOne)\n        console.log(\"state\", state.currentClients)\n        handleRow(updatedOne)\n         return () => {\n             \n         }\n     }, []) */return/*#__PURE__*/_jsx(\"section\",{className:\"section remPadTop\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"columns \",children:[/*#__PURE__*/_jsx(\"div\",{className:\"column is-5 \",children:/*#__PURE__*/_jsx(BillLabList,{})}),/*#__PURE__*/_jsx(\"div\",{className:\"column is-4 \",children:state.medicationModule.show==='detail'&&/*#__PURE__*/_jsx(BillPrescriptionCreate,{})}),/*#__PURE__*/_jsx(\"div\",{className:\"column is-3 \",children:state.medicationModule.show==='detail'&&/*#__PURE__*/_jsx(PatientProfile,{})})]})});}export function BillLabList(){// const { register, handleSubmit, watch, errors } = useForm();\n// eslint-disable-next-line\nvar _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),error=_useState14[0],setError=_useState14[1];// eslint-disable-next-line\nvar _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),success=_useState16[0],setSuccess=_useState16[1];// eslint-disable-next-line\nvar _useState17=useState(\"\"),_useState18=_slicedToArray(_useState17,2),message=_useState18[0],setMessage=_useState18[1];var OrderServ=client.service('order');//const history = useHistory()\n// const {user,setUser} = useContext(UserContext)\nvar _useState19=useState([]),_useState20=_slicedToArray(_useState19,2),facilities=_useState20[0],setFacilities=_useState20[1];// eslint-disable-next-line\nvar _useState21=useState(),_useState22=_slicedToArray(_useState21,2),selectedDispense=_useState22[0],setSelectedDispense=_useState22[1];//\n// eslint-disable-next-line\nvar _useContext3=useContext(ObjectContext),state=_useContext3.state,setState=_useContext3.setState;// eslint-disable-next-line\nvar _useContext4=useContext(UserContext),user=_useContext4.user,setUser=_useContext4.setUser;var _useState23=useState(\"\"),_useState24=_slicedToArray(_useState23,2),selectedMedication=_useState24[0],setSelectedMedication=_useState24[1];var handleSelectedClient=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(Client){var newClientModule;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:// await setSelectedClient(Client)\nnewClientModule={selectedClient:Client,show:'detail'};_context.next=3;return setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{ClientModule:newClientModule});});case 3:case\"end\":return _context.stop();}}},_callee);}));return function handleSelectedClient(_x){return _ref.apply(this,arguments);};}();var handleMedicationRow=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(ProductEntry){var newProductEntryModule;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return handleSelectedClient(ProductEntry.client);case 2:_context2.next=4;return setSelectedMedication(ProductEntry);case 4:newProductEntryModule={selectedMedication:ProductEntry,show:'detail'};_context2.next=7;return setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{medicationModule:newProductEntryModule});});case 7:case\"end\":return _context2.stop();}}},_callee2);}));return function handleMedicationRow(_x2){return _ref2.apply(this,arguments);};}();var handleCreateNew=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var newProductEntryModule;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:newProductEntryModule={selectedDispense:{},show:'create'};_context3.next=3;return setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{DispenseModule:newProductEntryModule});});case 3:case\"end\":return _context3.stop();}}},_callee3);}));return function handleCreateNew(){return _ref3.apply(this,arguments);};}();var handleSearch=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(val){var field;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:field='name';console.log(val);OrderServ.find({query:{$or:[{order:{$regex:val,$options:'i'}},{order_status:{$regex:val,$options:'i'}},{clientname:{$regex:val,$options:'i'}}],order_category:\"Lab Order\",fulfilled:false,destination:user.currentEmployee.facilityDetail._id,order_status:\"Pending\",// storeId:state.StoreModule.selectedStore._id,\n//facility:user.currentEmployee.facilityDetail._id || \"\",\n$limit:50,$sort:{createdAt:-1}}}).then(/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(res){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:console.log(res);setFacilities(res.groupedOrder);// await setState((prevstate)=>({...prevstate, currentClients:res.groupedOrder}))\nsetMessage(\" ProductEntry  fetched successfully\");setSuccess(true);case 4:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x4){return _ref5.apply(this,arguments);};}()).catch(function(err){// console.log(err)\nsetMessage(\"Error fetching ProductEntry, probable network issues \"+err);setError(true);});case 3:case\"end\":return _context5.stop();}}},_callee5);}));return function handleSearch(_x3){return _ref4.apply(this,arguments);};}();var getFacilities=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(){var findProductEntry;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:console.log(\"here b4 server\");_context6.next=3;return OrderServ.find({query:{order_category:\"Lab Order\",fulfilled:\"False\",destination:user.currentEmployee.facilityDetail._id,order_status:\"Pending\",// need to set this finally\n//storeId:state.StoreModule.selectedStore._id,\n//clientId:state.ClientModule.selectedClient._id,\n$limit:50,$sort:{createdAt:-1}}});case 3:findProductEntry=_context6.sent;_context6.next=6;return setFacilities(findProductEntry.groupedOrder);case 6:_context6.next=8;return setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{currentClients:findProductEntry.groupedOrder});});case 8:case\"end\":return _context6.stop();}}},_callee6);}));return function getFacilities(){return _ref6.apply(this,arguments);};}();//1.consider using props for global data\nuseEffect(function(){// console.log(\"started\")\ngetFacilities();OrderServ.on('created',function(obj){return getFacilities();});OrderServ.on('updated',function(obj){return getFacilities();});OrderServ.on('patched',function(obj){return getFacilities();});OrderServ.on('removed',function(obj){return getFacilities();});return function(){};},[]);var handleRow=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(ProductEntry){var newProductEntryModule;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return setSelectedDispense(ProductEntry);case 2:newProductEntryModule={selectedDispense:ProductEntry,show:'detail'};_context7.next=5;return setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{DispenseModule:newProductEntryModule});});case 5:case\"end\":return _context7.stop();}}},_callee7);}));return function handleRow(_x5){return _ref7.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"level\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"level-left\",children:/*#__PURE__*/_jsx(\"div\",{className:\"level-item\",children:/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left  \",children:[/*#__PURE__*/_jsx(DebounceInput,{className:\"input is-small \",type:\"text\",placeholder:\"Search Tests\",minLength:3,debounceTimeout:400,onChange:function onChange(e){return handleSearch(e.target.value);}}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-search\"})})]})})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"level-item\",children:[\" \",/*#__PURE__*/_jsx(\"span\",{className:\"is-size-6 has-text-weight-medium\",children:\"Pending Tests \"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\" pullup\",children:/*#__PURE__*/_jsx(\"div\",{className:\" is-fullwidth vscrollable pr-1\",children:/*#__PURE__*/_jsx(Accordion,{allowZeroExpanded:true,children:facilities.map(function(Clinic,i){return/*#__PURE__*/_jsxs(AccordionItem,{children:[/*#__PURE__*/_jsx(AccordionItemHeading,{children:/*#__PURE__*/_jsx(AccordionItemButton,{children:/*#__PURE__*/_jsxs(\"strong\",{children:[\" \",i+1,\" \",Clinic.clientname,\" with \",Clinic.orders.length,\" Pending Test(s)  \"]})})}),/*#__PURE__*/_jsxs(AccordionItemPanel,{children:[/*#__PURE__*/_jsxs(\"table\",{className:\"table is-striped  is-hoverable is-fullwidth is-scrollable mr-2\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Serial No\",children:\"S/No\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Date\",children:\"Date\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Order\",children:\"Medication\"})}),/*#__PURE__*/_jsx(\"th\",{children:\"Fulfilled\"}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Status\",children:\"Status\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Requesting Physician\",children:\"Requesting Physician\"})})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:Clinic.orders.map(function(order,i){return/*#__PURE__*/_jsxs(\"tr\",{onClick:function onClick(){return handleMedicationRow(order);},className:order._id===((selectedMedication===null||selectedMedication===void 0?void 0:selectedMedication._id)||null)?\"is-selected\":\"\",children:[/*#__PURE__*/_jsx(\"th\",{children:i+1}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{children:format(new Date(order.createdAt),'dd-MM-yy')})}),\" \",/*#__PURE__*/_jsx(\"th\",{children:order.order}),/*#__PURE__*/_jsx(\"td\",{children:order.fulfilled===\"True\"?\"Yes\":\"No\"}),/*#__PURE__*/_jsx(\"td\",{children:order.order_status}),/*#__PURE__*/_jsx(\"td\",{children:order.requestingdoctor_Name})]},order._id);})})]}),/*#__PURE__*/_jsx(ClientBilledLab,{selectedClient:Clinic.client_id})]})]},Clinic.client_id);})})})})]});}export function DispenseDetail(){//const { register, handleSubmit, watch, setValue } = useForm(); //errors,\n// eslint-disable-next-line\nvar _useState25=useState(false),_useState26=_slicedToArray(_useState25,2),error=_useState26[0],setError=_useState26[1];//, \nvar _useState27=useState(\"\"),_useState28=_slicedToArray(_useState27,2),selectedMedication=_useState28[0],setSelectedMedication=_useState28[1];var _useState29=useState(\"\"),_useState30=_slicedToArray(_useState29,2),currentOrder=_useState30[0],setCurrentOrder=_useState30[1];// eslint-disable-next-line\nvar _useState31=useState(\"\"),_useState32=_slicedToArray(_useState31,2),message=_useState32[0],setMessage=_useState32[1];//,\n//const ProductEntryServ=client.service('/ProductEntry')\n//const history = useHistory()\n//const {user,setUser} = useContext(UserContext)\nvar _useContext5=useContext(ObjectContext),state=_useContext5.state,setState=_useContext5.setState;var OrderServ=client.service('order');/* const [ProductEntry, setProductEntry] = useState(\"\")\n    const [facilities, setFacilities] = useState(\"\") */var ProductEntry=state.DispenseModule.selectedDispense;//const facilities=ProductEntry.orders\nvar handleRow=/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(ProductEntry){var newProductEntryModule;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_context8.next=2;return setSelectedMedication(ProductEntry);case 2:newProductEntryModule={selectedMedication:ProductEntry,show:'detail'};_context8.next=5;return setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{medicationModule:newProductEntryModule});});case 5:case\"end\":return _context8.stop();}}},_callee8);}));return function handleRow(_x6){return _ref8.apply(this,arguments);};}();var handleEdit=/*#__PURE__*/function(){var _ref9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(ProductEntry){var newProductEntryModule;return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:newProductEntryModule={selectedDispense:ProductEntry,show:'modify'};_context9.next=3;return setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{DispenseModule:newProductEntryModule});});case 3:case\"end\":return _context9.stop();}}},_callee9);}));return function handleEdit(_x7){return _ref9.apply(this,arguments);};}();useEffect(function(){var client1=state.currentClients.find(function(el){return JSON.stringify(el.client_id)===JSON.stringify(state.DispenseModule.selectedDispense);});setCurrentOrder(client1);// console.log(client1)\nreturn function(){};},[]);/*  \n     const setprod=async()=>{\n        await setProductEntry(state.DispenseModule.selectedDispense)\n    } */useEffect(function(){/* OrderServ.on('created', (obj)=>getFacilities())\n        OrderServ.on('updated', (obj)=>getFacilities())\n       \n        OrderServ.on('removed', (obj)=>getFacilities()) */OrderServ.on('patched',function(obj){//update state.DispenseModule.selectedDispense\n// console.log(obj.clientId)\n// console.log(\"currentClients\",state.currentClients)\nvar current1=state.currentClients.find(function(el){return JSON.stringify(el.client_id)===JSON.stringify(obj.clientId);});setCurrentOrder(current1);// console.log(\"currentone\",current1)\n});return function(){};},[]);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"card \",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsx(\"p\",{className:\"card-header-title\",children:\"Dispense Details\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-content vscrollable\",children:/*#__PURE__*/_jsx(\"div\",{className:\"table-container pullup \",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table is-striped is-narrow is-hoverable is-fullwidth is-scrollable \",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Serial No\",children:\"S/No\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Date\",children:\"Date\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Order\",children:\"Medication\"})}),/*#__PURE__*/_jsx(\"th\",{children:\"Fulfilled\"}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Status\",children:\"Status\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Requesting Physician\",children:\"Requesting Physician\"})})]})}),/*#__PURE__*/_jsx(\"tfoot\",{}),/*#__PURE__*/_jsx(\"tbody\",{children:state.DispenseModule.selectedDispense.orders.map(function(order,i){return/*#__PURE__*/_jsxs(\"tr\",{onClick:function onClick(){return handleRow(order);},className:order._id===((selectedMedication===null||selectedMedication===void 0?void 0:selectedMedication._id)||null)?\"is-selected\":\"\",children:[/*#__PURE__*/_jsx(\"th\",{children:i+1}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{children:format(new Date(order.createdAt),'dd-MM-yy')})}),\" \",/*#__PURE__*/_jsx(\"th\",{children:order.order}),/*#__PURE__*/_jsx(\"td\",{children:order.fulfilled===\"True\"?\"Yes\":\"No\"}),/*#__PURE__*/_jsx(\"td\",{children:order.order_status}),/*#__PURE__*/_jsx(\"td\",{children:order.requestingdoctor_Name})]},order._id);})})]})})})]})});}","map":{"version":3,"sources":["/home/mfybaby/Documents/HealthStack2/HS-frontend/src/components/Laboratory/BillLab.js"],"names":["React","useState","useContext","useEffect","useRef","client","DebounceInput","useForm","UserContext","ObjectContext","toast","format","formatDistanceToNowStrict","BillPrescriptionCreate","PatientProfile","Accordion","AccordionItem","AccordionItemHeading","AccordionItemButton","AccordionItemPanel","ClientBilledLab","BillLab","selectedProductEntry","setSelectedProductEntry","error","setError","success","setSuccess","message","setMessage","OrderServ","service","facilities","setFacilities","selectedDispense","setSelectedDispense","state","setState","user","setUser","medicationModule","show","BillLabList","selectedMedication","setSelectedMedication","handleSelectedClient","Client","newClientModule","selectedClient","prevstate","ClientModule","handleMedicationRow","ProductEntry","newProductEntryModule","handleCreateNew","DispenseModule","handleSearch","val","field","console","log","find","query","$or","order","$regex","$options","order_status","clientname","order_category","fulfilled","destination","currentEmployee","facilityDetail","_id","$limit","$sort","createdAt","then","res","groupedOrder","catch","err","getFacilities","findProductEntry","currentClients","on","obj","handleRow","e","target","value","map","Clinic","i","orders","length","Date","requestingdoctor_Name","client_id","DispenseDetail","currentOrder","setCurrentOrder","handleEdit","client1","el","JSON","stringify","current1","clientId"],"mappings":"qyBAAA,oBACA,MAAOA,CAAAA,KAAP,EAAeC,QAAf,CAAwBC,UAAxB,CAAoCC,SAApC,CAA8CC,MAA9C,KAA2D,OAA3D,CACA,MAAOC,CAAAA,MAAP,KAAmB,gBAAnB,CACA,OAAQC,aAAR,KAA4B,sBAA5B,CACA,OAASC,OAAT,KAAwB,iBAAxB,CACA;AACA,OAAQC,WAAR,CAAoBC,aAApB,KAAwC,eAAxC,CACA,OAAQC,KAAR,KAAoB,aAApB,CACA,OAAQC,MAAR,CAAgBC,yBAAhB,KAAiD,UAAjD,CACA,MAAOC,CAAAA,sBAAP,KAAmC,iBAAnC,CACA,MAAOC,CAAAA,cAAP,KAA2B,6BAA3B,CACA,8C,CACA;AACA;AACA,OACIC,SADJ,CAEIC,aAFJ,CAGIC,oBAHJ,CAIIC,mBAJJ,CAKIC,kBALJ,KAMO,4BANP,CAQA;AACA,MAAO,mDAAP,CACA,MAAOC,CAAAA,eAAP,KAA4B,aAA5B,CAIA,cAAe,SAASC,CAAAA,OAAT,EAAmB,CAC9B;AACA;AAF8B,cAGuBpB,QAAQ,EAH/B,wCAGvBqB,oBAHuB,eAGFC,uBAHE,eAI9B;AAJ8B,eAKLtB,QAAQ,CAAC,KAAD,CALH,yCAKvBuB,KALuB,eAKhBC,QALgB,eAM9B;AAN8B,eAOFxB,QAAQ,CAAC,KAAD,CAPN,yCAOxByB,OAPwB,eAOfC,UAPe,eAQ9B;AAR8B,eASF1B,QAAQ,CAAC,EAAD,CATN,yCASzB2B,OATyB,eAShBC,UATgB,eAU/B,GAAMC,CAAAA,SAAS,CAACzB,MAAM,CAAC0B,OAAP,CAAe,OAAf,CAAhB,CACA;AACD;AAZgC,eAaE9B,QAAQ,CAAC,EAAD,CAbV,0CAaxB+B,UAbwB,gBAabC,aAba,gBAc9B;AAd8B,gBAechC,QAAQ,EAftB,2CAezBiC,gBAfyB,gBAePC,mBAfO,gBAeyB;AACxD;AAhB+B,gBAiBRjC,UAAU,CAACO,aAAD,CAjBF,CAiBxB2B,KAjBwB,aAiBxBA,KAjBwB,CAiBlBC,QAjBkB,aAiBlBA,QAjBkB,CAkB/B;AAlB+B,iBAmBVnC,UAAU,CAACM,WAAD,CAnBA,CAmBxB8B,IAnBwB,cAmBxBA,IAnBwB,CAmBnBC,OAnBmB,cAmBnBA,OAnBmB,CAwB9B;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAEI,mBACI,gBAAS,SAAS,CAAE,mBAApB,uBAII,aAAK,SAAS,CAAC,UAAf,wBACI,YAAK,SAAS,CAAC,cAAf,uBACI,KAAC,WAAD,IADJ,EADJ,cAKI,YAAK,SAAS,CAAC,cAAf,UAEEH,KAAK,CAACI,gBAAN,CAAuBC,IAAvB,GAA+B,QAAhC,eAA2C,KAAC,sBAAD,IAF5C,EALJ,cASI,YAAK,SAAS,CAAC,cAAf,UAEEL,KAAK,CAACI,gBAAN,CAAuBC,IAAvB,GAA+B,QAAhC,eAA2C,KAAC,cAAD,IAF5C,EATJ,GAJJ,EADJ,CAwBH,CAED,MAAO,SAASC,CAAAA,WAAT,EAAsB,CAC1B;AACC;AAFyB,gBAGAzC,QAAQ,CAAC,KAAD,CAHR,2CAGlBuB,KAHkB,gBAGXC,QAHW,gBAIxB;AAJwB,gBAKIxB,QAAQ,CAAC,KAAD,CALZ,2CAKlByB,OALkB,gBAKTC,UALS,gBAMxB;AANwB,gBAOI1B,QAAQ,CAAC,EAAD,CAPZ,2CAOnB2B,OAPmB,gBAOVC,UAPU,gBAQzB,GAAMC,CAAAA,SAAS,CAACzB,MAAM,CAAC0B,OAAP,CAAe,OAAf,CAAhB,CACA;AACD;AAV0B,gBAWQ9B,QAAQ,CAAC,EAAD,CAXhB,2CAWlB+B,UAXkB,gBAWPC,aAXO,gBAYxB;AAZwB,gBAaoBhC,QAAQ,EAb5B,2CAanBiC,gBAbmB,gBAaDC,mBAbC,gBAa+B;AACxD;AAdyB,iBAeFjC,UAAU,CAACO,aAAD,CAfR,CAelB2B,KAfkB,cAelBA,KAfkB,CAeZC,QAfY,cAeZA,QAfY,CAgBzB;AAhByB,iBAiBJnC,UAAU,CAACM,WAAD,CAjBN,CAiBlB8B,IAjBkB,cAiBlBA,IAjBkB,CAiBbC,OAjBa,cAiBbA,OAjBa,iBAkB0BtC,QAAQ,CAAC,EAAD,CAlBlC,2CAkBlB0C,kBAlBkB,gBAkBEC,qBAlBF,gBAoBzB,GAAMC,CAAAA,oBAAoB,0FAAE,iBAAMC,MAAN,sIACxB;AACUC,eAFc,CAEE,CACrBC,cAAc,CAACF,MADM,CAErBL,IAAI,CAAE,QAFe,CAFF,uBAMlBJ,CAAAA,QAAQ,CAAC,SAACY,SAAD,wCAAkBA,SAAlB,MAA6BC,YAAY,CAACH,eAA1C,IAAD,CANU,uDAAF,kBAApBF,CAAAA,oBAAoB,4CAA1B,CASA,GAAMM,CAAAA,mBAAmB,2FAAE,kBAAMC,YAAN,uKAIjBP,CAAAA,oBAAoB,CAACO,YAAY,CAAC/C,MAAd,CAJH,+BAOjBuC,CAAAA,qBAAqB,CAACQ,YAAD,CAPJ,QASdC,qBATc,CASQ,CAC3BV,kBAAkB,CAACS,YADQ,CAE3BX,IAAI,CAAE,QAFqB,CATR,wBAanBJ,CAAAA,QAAQ,CAAC,SAACY,SAAD,wCAAkBA,SAAlB,MAA6BT,gBAAgB,CAACa,qBAA9C,IAAD,CAbW,yDAAF,kBAAnBF,CAAAA,mBAAmB,8CAAzB,CAmBA,GAAMG,CAAAA,eAAe,2FAAG,kKACXD,qBADW,CACW,CAC3BnB,gBAAgB,CAAC,EADU,CAE3BO,IAAI,CAAE,QAFqB,CADX,wBAKfJ,CAAAA,QAAQ,CAAC,SAACY,SAAD,wCAAkBA,SAAlB,MAA6BM,cAAc,CAACF,qBAA5C,IAAD,CALO,yDAAH,kBAAfC,CAAAA,eAAe,2CAArB,CAYA,GAAME,CAAAA,YAAY,2FAAE,kBAAMC,GAAN,gIACXC,KADW,CACL,MADK,CAEjBC,OAAO,CAACC,GAAR,CAAYH,GAAZ,EACA3B,SAAS,CAAC+B,IAAV,CAAe,CAACC,KAAK,CAAE,CACnBC,GAAG,CAAC,CACC,CAACC,KAAK,CAAE,CACJC,MAAM,CAACR,GADH,CAEJS,QAAQ,CAAC,GAFL,CAAR,CADD,CAMA,CAAEC,YAAY,CAAE,CACXF,MAAM,CAACR,GADI,CAEXS,QAAQ,CAAC,GAFE,CAAhB,CANA,CAWC,CAACE,UAAU,CAAE,CACTH,MAAM,CAACR,GADE,CAETS,QAAQ,CAAC,GAFA,CAAb,CAXD,CADe,CAkBdG,cAAc,CAAC,WAlBD,CAmBdC,SAAS,CAAC,KAnBI,CAoBdC,WAAW,CAAEjC,IAAI,CAACkC,eAAL,CAAqBC,cAArB,CAAoCC,GApBnC,CAqBdP,YAAY,CAAC,SArBC,CAsBf;AACA;AACCQ,MAAM,CAAC,EAxBO,CAyBdC,KAAK,CAAE,CACHC,SAAS,CAAE,CAAC,CADT,CAzBO,CAAR,CAAf,EA4BaC,IA5Bb,2FA4BmB,kBAAMC,GAAN,sHACXpB,OAAO,CAACC,GAAR,CAAYmB,GAAZ,EACA9C,aAAa,CAAC8C,GAAG,CAACC,YAAL,CAAb,CACD;AACEnD,UAAU,CAAC,qCAAD,CAAV,CACAF,UAAU,CAAC,IAAD,CAAV,CALU,wDA5BnB,kEAmCMsD,KAnCN,CAmCY,SAACC,GAAD,CAAO,CACX;AACCrD,UAAU,CAAC,wDAAyDqD,GAA1D,CAAV,CACAzD,QAAQ,CAAC,IAAD,CAAR,CACH,CAvCN,EAHiB,wDAAF,kBAAZ+B,CAAAA,YAAY,8CAAlB,CA4CA,GAAM2B,CAAAA,aAAa,2FAAE,6JAEZxB,OAAO,CAACC,GAAR,CAAY,gBAAZ,EAFY,uBAGS9B,CAAAA,SAAS,CAAC+B,IAAV,CACtB,CAACC,KAAK,CAAE,CACJO,cAAc,CAAC,WADX,CAEJC,SAAS,CAAC,OAFN,CAGJC,WAAW,CAAEjC,IAAI,CAACkC,eAAL,CAAqBC,cAArB,CAAoCC,GAH7C,CAIJP,YAAY,CAAC,SAJT,CAIqB;AACzB;AACA;AACAQ,MAAM,CAAC,EAPH,CAQJC,KAAK,CAAE,CACHC,SAAS,CAAE,CAAC,CADT,CARH,CAAR,CADsB,CAHT,QAGfO,gBAHe,uCAkBPnD,CAAAA,aAAa,CAACmD,gBAAgB,CAACJ,YAAlB,CAlBN,+BAmBP3C,CAAAA,QAAQ,CAAC,SAACY,SAAD,wCAAkBA,SAAlB,MAA6BoC,cAAc,CAACD,gBAAgB,CAACJ,YAA7D,IAAD,CAnBD,yDAAF,kBAAbG,CAAAA,aAAa,2CAAnB,CAsBA;AACAhF,SAAS,CAAC,UAAM,CACZ;AACIgF,aAAa,GACbrD,SAAS,CAACwD,EAAV,CAAa,SAAb,CAAwB,SAACC,GAAD,QAAOJ,CAAAA,aAAa,EAApB,EAAxB,EACArD,SAAS,CAACwD,EAAV,CAAa,SAAb,CAAwB,SAACC,GAAD,QAAOJ,CAAAA,aAAa,EAApB,EAAxB,EACArD,SAAS,CAACwD,EAAV,CAAa,SAAb,CAAwB,SAACC,GAAD,QAAOJ,CAAAA,aAAa,EAApB,EAAxB,EACArD,SAAS,CAACwD,EAAV,CAAa,SAAb,CAAwB,SAACC,GAAD,QAAOJ,CAAAA,aAAa,EAApB,EAAxB,EACA,MAAO,WAAM,CAEZ,CAFD,CAGC,CAVA,CAUC,EAVD,CAAT,CAYA,GAAMK,CAAAA,SAAS,2FAAE,kBAAMpC,YAAN,uKAEPjB,CAAAA,mBAAmB,CAACiB,YAAD,CAFZ,QAIJC,qBAJI,CAIkB,CAC3BnB,gBAAgB,CAACkB,YADU,CAE3BX,IAAI,CAAE,QAFqB,CAJlB,wBAQPJ,CAAAA,QAAQ,CAAC,SAACY,SAAD,wCAAkBA,SAAlB,MAA6BM,cAAc,CAACF,qBAA5C,IAAD,CARD,yDAAF,kBAATmC,CAAAA,SAAS,8CAAf,CAeA,mBACQ,wCACI,aAAK,SAAS,CAAC,OAAf,wBACI,YAAK,SAAS,CAAC,YAAf,uBACI,YAAK,SAAS,CAAC,YAAf,uBACI,YAAK,SAAS,CAAC,OAAf,uBACI,WAAG,SAAS,CAAC,0BAAb,wBACI,KAAC,aAAD,EAAe,SAAS,CAAC,iBAAzB,CACI,IAAI,CAAC,MADT,CACgB,WAAW,CAAC,cAD5B,CAEI,SAAS,CAAE,CAFf,CAGI,eAAe,CAAE,GAHrB,CAII,QAAQ,CAAE,kBAACC,CAAD,QAAKjC,CAAAA,YAAY,CAACiC,CAAC,CAACC,MAAF,CAASC,KAAV,CAAjB,EAJd,EADJ,cAMI,aAAM,SAAS,CAAC,uBAAhB,uBACI,UAAG,SAAS,CAAC,eAAb,EADJ,EANJ,GADJ,EADJ,EADJ,EADJ,cAiBI,aAAK,SAAS,CAAC,YAAf,4BAA6B,aAAM,SAAS,CAAC,kCAAhB,4BAA7B,GAjBJ,GADJ,cA0BI,YAAK,SAAS,CAAC,SAAf,uBACI,YAAK,SAAS,CAAC,gCAAf,uBACA,KAAC,SAAD,EAAW,iBAAiB,KAA5B,UACK3D,UAAU,CAAC4D,GAAX,CAAe,SAACC,MAAD,CAASC,CAAT,qBACZ,MAAC,aAAD,yBACG,KAAC,oBAAD,wBACA,KAAC,mBAAD,wBACO,8BAAUA,CAAC,CAAC,CAAZ,KAAgBD,MAAM,CAACzB,UAAvB,UAAyCyB,MAAM,CAACE,MAAP,CAAcC,MAAvD,wBADP,EADA,EADH,cAMI,MAAC,kBAAD,yBACI,eAAO,SAAS,CAAC,gEAAjB,wBACQ,oCACI,mCACI,iCAAI,aAAM,KAAK,CAAC,WAAZ,kBAAJ,EADJ,cAEI,iCAAI,aAAM,KAAK,CAAC,MAAZ,kBAAJ,EAFJ,cAGI,iCAAI,aAAM,KAAK,CAAC,OAAZ,wBAAJ,EAHJ,cAII,iCAJJ,cAKI,iCAAI,aAAM,KAAK,CAAC,QAAZ,oBAAJ,EALJ,cAMI,iCAAI,aAAM,KAAK,CAAC,sBAAZ,kCAAJ,EANJ,GADJ,EADR,cAWQ,uBACEH,MAAM,CAACE,MAAP,CAAcH,GAAd,CAAkB,SAAC5B,KAAD,CAAQ8B,CAAR,qBAER,YAAoB,OAAO,CAAE,yBAAI3C,CAAAA,mBAAmB,CAACa,KAAD,CAAvB,EAA7B,CAA6D,SAAS,CAAEA,KAAK,CAACU,GAAN,IAAa,CAAA/B,kBAAkB,OAAlB,EAAAA,kBAAkB,SAAlB,QAAAA,kBAAkB,CAAE+B,GAApB,GAAyB,IAAtC,EAA4C,aAA5C,CAA0D,EAAlI,wBACA,oBAAKoB,CAAC,CAAC,CAAP,EADA,cAEA,iCAAI,sBAAOnF,MAAM,CAAC,GAAIsF,CAAAA,IAAJ,CAASjC,KAAK,CAACa,SAAf,CAAD,CAA2B,UAA3B,CAAb,EAAJ,EAFA,kBAGA,oBAAKb,KAAK,CAACA,KAAX,EAHA,cAIA,oBAAKA,KAAK,CAACM,SAAN,GAAkB,MAAlB,CAAyB,KAAzB,CAA+B,IAApC,EAJA,cAKA,oBAAKN,KAAK,CAACG,YAAX,EALA,cAMA,oBAAKH,KAAK,CAACkC,qBAAX,EANA,GAASlC,KAAK,CAACU,GAAf,CAFQ,EAAlB,CADF,EAXR,GADJ,cA0BqB,KAAC,eAAD,EAAkB,cAAc,CAAEmB,MAAM,CAACM,SAAzC,EA1BrB,GANJ,GAAqBN,MAAM,CAACM,SAA5B,CADY,EAAf,CADL,EADA,EADJ,EA1BJ,GADR,CA4EC,CAGL,MAAO,SAASC,CAAAA,cAAT,EAAyB,CAC5B;AACC;AAF2B,gBAGHnG,QAAQ,CAAC,KAAD,CAHL,2CAGrBuB,KAHqB,gBAGdC,QAHc,gBAGa;AAHb,gBAIuBxB,QAAQ,CAAC,EAAD,CAJ/B,2CAIrB0C,kBAJqB,gBAIDC,qBAJC,gCAKW3C,QAAQ,CAAC,EAAD,CALnB,2CAKrBoG,YALqB,gBAKPC,eALO,gBAM3B;AAN2B,gBAOErG,QAAQ,CAAC,EAAD,CAPV,2CAOrB2B,OAPqB,gBAOZC,UAPY,gBAOe;AAC3C;AACA;AACA;AAV4B,iBAWH3B,UAAU,CAACO,aAAD,CAXP,CAWrB2B,KAXqB,cAWrBA,KAXqB,CAWfC,QAXe,cAWfA,QAXe,CAY5B,GAAMP,CAAAA,SAAS,CAACzB,MAAM,CAAC0B,OAAP,CAAe,OAAf,CAAhB,CACA;AACJ,uDAEC,GAAIqB,CAAAA,YAAY,CAAEhB,KAAK,CAACmB,cAAN,CAAqBrB,gBAAvC,CACE;AAEA,GAAMsD,CAAAA,SAAS,2FAAE,kBAAMpC,YAAN,uKAKVR,CAAAA,qBAAqB,CAACQ,YAAD,CALX,QAOPC,qBAPO,CAOe,CAC3BV,kBAAkB,CAACS,YADQ,CAE3BX,IAAI,CAAE,QAFqB,CAPf,wBAWZJ,CAAAA,QAAQ,CAAC,SAACY,SAAD,wCAAkBA,SAAlB,MAA6BT,gBAAgB,CAACa,qBAA9C,IAAD,CAXI,yDAAF,kBAATmC,CAAAA,SAAS,8CAAf,CAiBC,GAAMe,CAAAA,UAAU,2FAAE,kBAAMnD,YAAN,gJACLC,qBADK,CACiB,CAC3BnB,gBAAgB,CAACkB,YADU,CAE3BX,IAAI,CAAE,QAFqB,CADjB,wBAKTJ,CAAAA,QAAQ,CAAC,SAACY,SAAD,wCAAkBA,SAAlB,MAA6BM,cAAc,CAACF,qBAA5C,IAAD,CALC,yDAAF,kBAAVkD,CAAAA,UAAU,8CAAhB,CAUApG,SAAS,CAAC,UAAM,CAGd,GAAMqG,CAAAA,OAAO,CAAGpE,KAAK,CAACiD,cAAN,CAAqBxB,IAArB,CAA0B,SAAA4C,EAAE,CAAE,CACxC,MAAOC,CAAAA,IAAI,CAACC,SAAL,CAAeF,EAAE,CAACN,SAAlB,IAA+BO,IAAI,CAACC,SAAL,CAAevE,KAAK,CAACmB,cAAN,CAAqBrB,gBAApC,CAAtC,CACH,CAFa,CAAhB,CAIFoE,eAAe,CAACE,OAAD,CAAf,CACD;AACK,MAAO,WAAM,CAEZ,CAFD,CAGH,CAZQ,CAYN,EAZM,CAAT,CAeH;AACD;AACA;AACA,QAEIrG,SAAS,CAAC,UAAM,CACZ;AACR;AACA;AACA,0DACQ2B,SAAS,CAACwD,EAAV,CAAa,SAAb,CAAyB,SAACC,GAAD,CAAO,CAC5B;AACD;AACA;AACA,GAAMqB,CAAAA,QAAQ,CAACxE,KAAK,CAACiD,cAAN,CAAqBxB,IAArB,CAA0B,SAAA4C,EAAE,QAAGC,CAAAA,IAAI,CAACC,SAAL,CAAeF,EAAE,CAACN,SAAlB,IAA+BO,IAAI,CAACC,SAAL,CAAepB,GAAG,CAACsB,QAAnB,CAAlC,EAA5B,CAAf,CACAP,eAAe,CAACM,QAAD,CAAf,CACD;AACD,CAPD,EASA,MAAO,WAAM,CAEZ,CAFD,CAGH,CAjBQ,CAiBP,EAjBO,CAAT,CAmBA,mBACI,sCACA,aAAK,SAAS,CAAC,OAAf,wBACI,YAAK,SAAS,CAAC,aAAf,uBACI,UAAG,SAAS,CAAC,mBAAb,8BADJ,EADJ,cAMI,YAAK,SAAS,CAAC,0BAAf,uBAEA,YAAK,SAAS,CAAC,yBAAf,uBACoB,eAAO,SAAS,CAAC,qEAAjB,wBACI,oCACI,mCACA,iCAAI,aAAM,KAAK,CAAC,WAAZ,kBAAJ,EADA,cAIA,iCAAI,aAAM,KAAK,CAAC,MAAZ,kBAAJ,EAJA,cAKA,iCAAI,aAAM,KAAK,CAAC,OAAZ,wBAAJ,EALA,cAMA,iCANA,cAOA,iCAAI,aAAM,KAAK,CAAC,QAAZ,oBAAJ,EAPA,cAQA,iCAAI,aAAM,KAAK,CAAC,sBAAZ,kCAAJ,EARA,GADJ,EADJ,cAeI,gBAfJ,cAkBI,uBACKxE,KAAK,CAACmB,cAAN,CAAqBrB,gBAArB,CAAsC6D,MAAtC,CAA6CH,GAA7C,CAAiD,SAAC5B,KAAD,CAAQ8B,CAAR,qBAE9C,YAAoB,OAAO,CAAE,yBAAIN,CAAAA,SAAS,CAACxB,KAAD,CAAb,EAA7B,CAAmD,SAAS,CAAEA,KAAK,CAACU,GAAN,IAAa,CAAA/B,kBAAkB,OAAlB,EAAAA,kBAAkB,SAAlB,QAAAA,kBAAkB,CAAE+B,GAApB,GAAyB,IAAtC,EAA4C,aAA5C,CAA0D,EAAxH,wBAEG,oBAAKoB,CAAC,CAAC,CAAP,EAFH,cAOA,iCAAI,sBAAOnF,MAAM,CAAC,GAAIsF,CAAAA,IAAJ,CAASjC,KAAK,CAACa,SAAf,CAAD,CAA2B,UAA3B,CAAb,EAAJ,EAPA,kBAQF,oBAAKb,KAAK,CAACA,KAAX,EARE,cASA,oBAAKA,KAAK,CAACM,SAAN,GAAkB,MAAlB,CAAyB,KAAzB,CAA+B,IAApC,EATA,cAUA,oBAAKN,KAAK,CAACG,YAAX,EAVA,cAWA,oBAAKH,KAAK,CAACkC,qBAAX,EAXA,GAASlC,KAAK,CAACU,GAAf,CAF8C,EAAjD,CADL,EAlBJ,GADpB,EAFA,EANJ,GADA,EADJ,CA2DH","sourcesContent":["/* eslint-disable */\nimport React, {useState,useContext, useEffect,useRef} from 'react'\nimport client from '../../feathers'\nimport {DebounceInput} from 'react-debounce-input';\nimport { useForm } from \"react-hook-form\";\n//import {useHistory} from 'react-router-dom'\nimport {UserContext,ObjectContext} from '../../context'\nimport {toast} from 'bulma-toast'\nimport {format, formatDistanceToNowStrict } from 'date-fns'\nimport BillPrescriptionCreate from './BillLabCreate'\nimport PatientProfile from '../ClientMgt/PatientProfile'\n/* import {ProductCreate} from './Products' */\n// eslint-disable-next-line\n//const searchfacility={};\nimport {\n    Accordion,\n    AccordionItem,\n    AccordionItemHeading,\n    AccordionItemButton,\n    AccordionItemPanel,\n} from 'react-accessible-accordion';\n\n// Demo styles, see 'Styles' section below for some notes on use.\nimport 'react-accessible-accordion/dist/fancy-example.css';\nimport ClientBilledLab from './ClientLab';\n\n\n\nexport default function BillLab() {\n    //const {state}=useContext(ObjectContext) //,setState\n    // eslint-disable-next-line\n    const [selectedProductEntry,setSelectedProductEntry]=useState()\n    //const [showState,setShowState]=useState() //create|modify|detail\n    const [error, setError] =useState(false)\n    // eslint-disable-next-line\n   const [success, setSuccess] =useState(false)\n    // eslint-disable-next-line\n  const [message, setMessage] = useState(\"\") \n   const OrderServ=client.service('order')\n   //const history = useHistory()\n  // const {user,setUser} = useContext(UserContext)\n   const [facilities,setFacilities]=useState([])\n    // eslint-disable-next-line\n  const [selectedDispense, setSelectedDispense]=useState() //\n   // eslint-disable-next-line\n   const {state,setState}=useContext(ObjectContext)\n   // eslint-disable-next-line\n   const {user,setUser}=useContext(UserContext)\n\n\n\n\n    /*  useEffect(() => {\n        const updatedOne= state.currentClients.filter(el=>(JSON.stringify(el.client_id)===JSON.stringify(state.DispenseModule.selectedDispense.client_id)))\n        console.log(\"udatedone\", updatedOne)\n        console.log(\"state\", state.currentClients)\n        handleRow(updatedOne)\n         return () => {\n             \n         }\n     }, []) */\n    \n    return(\n        <section className= \"section remPadTop\">\n           {/*  <div className=\"level\">\n            <div className=\"level-item\"> <span className=\"is-size-6 has-text-weight-medium\">ProductEntry  Module</span></div>\n            </div> */}\n            <div className=\"columns \">\n                <div className=\"column is-5 \">\n                    <BillLabList />\n                    </div>\n              \n                <div className=\"column is-4 \">\n                \n                {(state.medicationModule.show ==='detail')&&<BillPrescriptionCreate />}\n                </div>\n                <div className=\"column is-3 \">\n                \n                {(state.medicationModule.show ==='detail')&&<PatientProfile />}\n                </div>\n\n            </div>                            \n            </section>\n       \n    )\n    \n}\n\nexport function BillLabList(){\n   // const { register, handleSubmit, watch, errors } = useForm();\n    // eslint-disable-next-line\n    const [error, setError] =useState(false)\n     // eslint-disable-next-line\n    const [success, setSuccess] =useState(false)\n     // eslint-disable-next-line\n   const [message, setMessage] = useState(\"\") \n    const OrderServ=client.service('order')\n    //const history = useHistory()\n   // const {user,setUser} = useContext(UserContext)\n    const [facilities,setFacilities]=useState([])\n     // eslint-disable-next-line\n   const [selectedDispense, setSelectedDispense]=useState() //\n    // eslint-disable-next-line\n    const {state,setState}=useContext(ObjectContext)\n    // eslint-disable-next-line\n    const {user,setUser}=useContext(UserContext)\n    const [selectedMedication, setSelectedMedication] =useState(\"\")\n\n    const handleSelectedClient= async(Client)=>{\n        // await setSelectedClient(Client)\n         const    newClientModule={\n             selectedClient:Client,\n             show :'detail'\n         }\n        await setState((prevstate)=>({...prevstate, ClientModule:newClientModule}))\n     }\n\n    const handleMedicationRow= async(ProductEntry)=>{ //handle selected single order\n        //console.log(\"b4\",state)\n    \n        //console.log(\"handlerow\",ProductEntry)\n        await handleSelectedClient(ProductEntry.client)\n\n    \n        await setSelectedMedication(ProductEntry)\n    \n        const    newProductEntryModule={\n            selectedMedication:ProductEntry,\n            show :'detail'\n        }\n      await setState((prevstate)=>({...prevstate, medicationModule:newProductEntryModule}))\n       //console.log(state)\n      // ProductEntry.show=!ProductEntry.show\n    \n    }\n\n    const handleCreateNew = async()=>{\n        const    newProductEntryModule={\n            selectedDispense:{},\n            show :'create'\n            }\n       await setState((prevstate)=>({...prevstate, DispenseModule:newProductEntryModule}))\n       //console.log(state)\n        \n\n    }\n  \n\n    const handleSearch= async(val)=>{\n       const field='name'\n       console.log(val)\n       OrderServ.find({query: {\n           $or:[\n                {order: {\n                    $regex:val,\n                    $options:'i'\n                   \n                }},\n               { order_status: {\n                    $regex:val,\n                    $options:'i'\n                   \n                }},\n                {clientname: {\n                    $regex:val,\n                    $options:'i'\n                   \n                }}\n                ],\n                order_category:\"Lab Order\",\n                fulfilled:false,\n                destination: user.currentEmployee.facilityDetail._id,\n                order_status:\"Pending\",\n               // storeId:state.StoreModule.selectedStore._id,\n               //facility:user.currentEmployee.facilityDetail._id || \"\",\n                $limit:50,\n                $sort: {\n                    createdAt: -1\n                  }\n                }}).then( async(res)=>{\n               console.log(res)\n               setFacilities(res.groupedOrder)\n              // await setState((prevstate)=>({...prevstate, currentClients:res.groupedOrder}))\n                setMessage(\" ProductEntry  fetched successfully\")\n                setSuccess(true)\n            })\n            .catch((err)=>{\n               // console.log(err)\n                setMessage(\"Error fetching ProductEntry, probable network issues \"+ err )\n                setError(true)\n            })\n        }\n    const getFacilities= async()=>{\n       \n             console.log(\"here b4 server\")\n    const findProductEntry= await OrderServ.find(\n            {query: {\n                order_category:\"Lab Order\",\n                fulfilled:\"False\",\n                destination: user.currentEmployee.facilityDetail._id,\n                order_status:\"Pending\",  // need to set this finally\n                //storeId:state.StoreModule.selectedStore._id,\n                //clientId:state.ClientModule.selectedClient._id,\n                $limit:50,\n                $sort: {\n                    createdAt: -1\n                }\n                }})\n\n           // console.log(\"updatedorder\", findProductEntry.groupedOrder)\n            await setFacilities(findProductEntry.groupedOrder)\n            await setState((prevstate)=>({...prevstate, currentClients:findProductEntry.groupedOrder}))\n            }   \n\n    //1.consider using props for global data\n    useEffect(() => {\n        // console.log(\"started\")\n            getFacilities()\n            OrderServ.on('created', (obj)=>getFacilities())\n            OrderServ.on('updated', (obj)=>getFacilities())\n            OrderServ.on('patched', (obj)=>getFacilities())\n            OrderServ.on('removed', (obj)=>getFacilities())\n            return () => {\n            \n            }\n            },[])\n\n    const handleRow= async(ProductEntry)=>{\n    \n        await setSelectedDispense(ProductEntry)\n\n        const    newProductEntryModule={\n            selectedDispense:ProductEntry,\n            show :'detail'\n        }\n        await setState((prevstate)=>({...prevstate, DispenseModule:newProductEntryModule}))\n        //console.log(state)\n        \n        }\n\n   \n\n    return(     \n            <>  \n                <div className=\"level\">\n                    <div className=\"level-left\">\n                        <div className=\"level-item\">\n                            <div className=\"field\">\n                                <p className=\"control has-icons-left  \">\n                                    <DebounceInput className=\"input is-small \" \n                                        type=\"text\" placeholder=\"Search Tests\"\n                                        minLength={3}\n                                        debounceTimeout={400}\n                                        onChange={(e)=>handleSearch(e.target.value)} />\n                                    <span className=\"icon is-small is-left\">\n                                        <i className=\"fas fa-search\"></i>\n                                    </span>\n                                </p>\n                            </div>\n                        </div>\n                    </div>\n                    <div className=\"level-item\"> <span className=\"is-size-6 has-text-weight-medium\">Pending Tests </span></div>\n                     {/* <div className=\"level-right\">\n                       <div className=\"level-item\"> \n                            <div className=\"level-item\"><div className=\"button is-success is-small\" onClick={handleCreateNew}>New</div></div>\n                        </div> \n                    </div>*/}\n\n                </div>\n                <div className=\" pullup\">\n                    <div className=\" is-fullwidth vscrollable pr-1\">   \n                    <Accordion allowZeroExpanded>\n                        {facilities.map((Clinic, i)=>(\n                            <AccordionItem  key={Clinic.client_id} >\n                               <AccordionItemHeading >\n                               <AccordionItemButton  >\n                                      <strong> {i+1} {Clinic.clientname} with {Clinic.orders.length} Pending Test(s)  </strong>\n                                </AccordionItemButton>\n                                </AccordionItemHeading>\n                                <AccordionItemPanel>\n                                    <table className=\"table is-striped  is-hoverable is-fullwidth is-scrollable mr-2\">\n                                            <thead>\n                                                <tr>\n                                                    <th><abbr title=\"Serial No\">S/No</abbr></th>\n                                                    <th><abbr title=\"Date\">Date</abbr></th>\n                                                    <th><abbr title=\"Order\">Medication</abbr></th>\n                                                    <th>Fulfilled</th>\n                                                    <th><abbr title=\"Status\">Status</abbr></th>\n                                                    <th><abbr title=\"Requesting Physician\">Requesting Physician</abbr></th>\n                                                </tr>\n                                            </thead>\n                                            <tbody>\n                                            { Clinic.orders.map((order, i)=>(\n\n                                                        <tr key={order._id} onClick={()=>handleMedicationRow(order)} className={order._id===(selectedMedication?._id||null)?\"is-selected\":\"\"}>                                         \n                                                        <th>{i+1}</th>\n                                                        <td><span>{format(new Date(order.createdAt),'dd-MM-yy')}</span></td> {/* {formatDistanceToNowStrict(new Date(ProductEntry.createdAt),{addSuffix: true})} <br/> */} \n                                                        <th>{order.order}</th>\n                                                        <td>{order.fulfilled===\"True\"?\"Yes\":\"No\"}</td>\n                                                        <td>{order.order_status}</td>\n                                                        <td>{order.requestingdoctor_Name}</td>\n                                                        </tr>\n                                                ))}\n                                            </tbody>\n                                            </table>\n                                            {/*   */}<ClientBilledLab  selectedClient={Clinic.client_id}/>{/*  } */}\n                              </AccordionItemPanel>                                          \n                                </AccordionItem>\n                            ))}\n                            {/* <!-- Add Ref to Load More div --> */}\n                            {/*  <div className=\"loading\" ref={loader}>\n                                    <h2>Load More</h2>\n                        </div> */}\n                        </Accordion>\n                    </div>                   \n                </div>  \n            </>          \n    )\n    }\n\n\nexport function DispenseDetail(){\n    //const { register, handleSubmit, watch, setValue } = useForm(); //errors,\n     // eslint-disable-next-line\n    const [error, setError] =useState(false) //, \n    const [selectedMedication, setSelectedMedication] =useState(\"\")\n    const [currentOrder, setCurrentOrder] =useState(\"\")\n     // eslint-disable-next-line\n    const [message, setMessage] = useState(\"\") //,\n    //const ProductEntryServ=client.service('/ProductEntry')\n    //const history = useHistory()\n    //const {user,setUser} = useContext(UserContext)\n    const {state,setState} = useContext(ObjectContext)\n    const OrderServ=client.service('order')\n    /* const [ProductEntry, setProductEntry] = useState(\"\")\n    const [facilities, setFacilities] = useState(\"\") */\n\n let ProductEntry =state.DispenseModule.selectedDispense\n   //const facilities=ProductEntry.orders\n\n   const handleRow= async(ProductEntry)=>{\n    //console.log(\"b4\",state)\n\n    //console.log(\"handlerow\",ProductEntry)\n\n    await setSelectedMedication(ProductEntry)\n\n    const    newProductEntryModule={\n        selectedMedication:ProductEntry,\n        show :'detail'\n    }\n  await setState((prevstate)=>({...prevstate, medicationModule:newProductEntryModule}))\n   //console.log(state)\n  // ProductEntry.show=!ProductEntry.show\n\n}\n\n    const handleEdit= async(ProductEntry)=>{\n        const    newProductEntryModule={\n            selectedDispense:ProductEntry,\n            show :'modify'\n        }\n       await setState((prevstate)=>({...prevstate, DispenseModule:newProductEntryModule}))\n       //console.log(state)\n       \n    }\n\n    useEffect(() => {\n\n\n      const client1=  state.currentClients.find(el=>{\n            return JSON.stringify(el.client_id)===JSON.stringify(state.DispenseModule.selectedDispense)\n        })\n\n    setCurrentOrder(client1)\n   // console.log(client1)\n        return () => {\n        \n        }\n    }, [])\n   \n\n /*  \n     const setprod=async()=>{\n        await setProductEntry(state.DispenseModule.selectedDispense)\n    } */\n \n    useEffect(() => {\n        /* OrderServ.on('created', (obj)=>getFacilities())\n        OrderServ.on('updated', (obj)=>getFacilities())\n       \n        OrderServ.on('removed', (obj)=>getFacilities()) */\n        OrderServ.on('patched',  (obj)=>{\n            //update state.DispenseModule.selectedDispense\n           // console.log(obj.clientId)\n           // console.log(\"currentClients\",state.currentClients)\n           const current1=state.currentClients.find(el=>(JSON.stringify(el.client_id)===JSON.stringify(obj.clientId)))\n           setCurrentOrder(current1)\n          // console.log(\"currentone\",current1)\n        })\n      \n        return () => {\n         \n        }\n    },[])\n \n    return (\n        <>\n        <div className=\"card \">\n            <div className=\"card-header\">\n                <p className=\"card-header-title\">\n                    Dispense Details\n                </p>\n            </div>\n            <div className=\"card-content vscrollable\">\n            {/* {JSON.stringify(ProductEntry.orders,2,10)} */}\n            <div className=\"table-container pullup \">\n                                <table className=\"table is-striped is-narrow is-hoverable is-fullwidth is-scrollable \">\n                                    <thead>\n                                        <tr>\n                                        <th><abbr title=\"Serial No\">S/No</abbr></th>\n                                        {/* <th><abbr title=\"Client Name\">Client Name</abbr></th> */}\n                                        {/* <th><abbr title=\"Number of Orders\"># of Medication</abbr></th> */}\n                                        <th><abbr title=\"Date\">Date</abbr></th>\n                                        <th><abbr title=\"Order\">Medication</abbr></th>\n                                        <th>Fulfilled</th>\n                                        <th><abbr title=\"Status\">Status</abbr></th>\n                                        <th><abbr title=\"Requesting Physician\">Requesting Physician</abbr></th>\n                                        \n                                        {/* <th><abbr title=\"Actions\">Actions</abbr></th> */}\n                                        </tr>\n                                    </thead>\n                                    <tfoot>\n                                        \n                                    </tfoot>\n                                    <tbody>\n                                        {state.DispenseModule.selectedDispense.orders.map((order, i)=>(\n\n                                            <tr key={order._id} onClick={()=>handleRow(order)} className={order._id===(selectedMedication?._id||null)?\"is-selected\":\"\"}>\n                                            \n                                               <th>{i+1}</th>\n                                                 {/* <td>{ProductEntry.clientname}</td> \n                                                <td>{ProductEntry.orders.length}</td> */}\n                                           \n                                           \n                                            <td><span>{format(new Date(order.createdAt),'dd-MM-yy')}</span></td> {/* {formatDistanceToNowStrict(new Date(ProductEntry.createdAt),{addSuffix: true})} <br/> */} \n                                          <th>{order.order}</th>\n                                            <td>{order.fulfilled===\"True\"?\"Yes\":\"No\"}</td>\n                                            <td>{order.order_status}</td>\n                                            <td>{order.requestingdoctor_Name}</td>\n                                            \n                                           {/*  <td><span className=\"showAction\"  >...</span></td> */}\n                                           \n                                            </tr>\n\n                                        ))}\n                                    </tbody>\n                                    </table>\n                        \n                </div>              \n               \n            </div>\n        </div>\n        </>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}