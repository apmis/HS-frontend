{"ast":null,"code":"import _defineProperty from \"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _objectSpread from \"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _regeneratorRuntime from \"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"/home/mfybaby/Documents/HealthStack2/HS-frontend/src/components/Finance/PaymentCreate.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\n/* eslint-disable */\nimport React, { useState, useContext, useEffect, useRef } from 'react';\nimport client from '../../feathers';\nimport { DebounceInput } from 'react-debounce-input';\nimport { useForm } from \"react-hook-form\"; //import {useHistory} from 'react-router-dom'\n\nimport { UserContext, ObjectContext } from '../../context';\nimport { toast } from 'bulma-toast';\nimport { ProductCreate } from './Products';\nimport Encounter from '../EncounterMgt/Encounter';\n\nvar random = require('random-string-generator'); // eslint-disable-next-line\n\n\nvar searchfacility = {};\nexport default function PaymentCreate() {\n  _s();\n\n  var _this = this;\n\n  // const { register, handleSubmit,setValue} = useForm(); //, watch, errors, reset \n  //const [error, setError] =useState(false)\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      success = _useState2[0],\n      setSuccess = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      message = _useState4[0],\n      setMessage = _useState4[1]; // eslint-disable-next-line\n\n\n  var _useState5 = useState(),\n      _useState6 = _slicedToArray(_useState5, 2),\n      facility = _useState6[0],\n      setFacility = _useState6[1];\n\n  var SubwalletTxServ = client.service('subwallettransactions');\n  var SubwalletServ = client.service('subwallet');\n  var OrderServ = client.service('order');\n  var InvoiceServ = client.service('invoice'); //const history = useHistory()\n\n  var _useContext = useContext(UserContext),\n      user = _useContext.user; //,setUser\n  // eslint-disable-next-line\n\n\n  var _useState7 = useState(),\n      _useState8 = _slicedToArray(_useState7, 2),\n      currentUser = _useState8[0],\n      setCurrentUser = _useState8[1];\n\n  var _useState9 = useState(\"Bill\"),\n      _useState10 = _slicedToArray(_useState9, 2),\n      type = _useState10[0],\n      setType = _useState10[1];\n\n  var _useState11 = useState(\"\"),\n      _useState12 = _slicedToArray(_useState11, 2),\n      documentNo = _useState12[0],\n      setDocumentNo = _useState12[1];\n\n  var _useState13 = useState(0),\n      _useState14 = _slicedToArray(_useState13, 2),\n      totalamount = _useState14[0],\n      setTotalamount = _useState14[1];\n\n  var _useState15 = useState(\"\"),\n      _useState16 = _slicedToArray(_useState15, 2),\n      description = _useState16[0],\n      setDescription = _useState16[1];\n\n  var _useState17 = useState(\"\"),\n      _useState18 = _slicedToArray(_useState17, 2),\n      productId = _useState18[0],\n      setProductId = _useState18[1];\n\n  var _useState19 = useState(\"\"),\n      _useState20 = _slicedToArray(_useState19, 2),\n      source = _useState20[0],\n      setSource = _useState20[1];\n\n  var _useState21 = useState(\"\"),\n      _useState22 = _slicedToArray(_useState21, 2),\n      date = _useState22[0],\n      setDate = _useState22[1];\n\n  var _useState23 = useState(\"\"),\n      _useState24 = _slicedToArray(_useState23, 2),\n      name = _useState24[0],\n      setName = _useState24[1];\n\n  var _useState25 = useState(\"\"),\n      _useState26 = _slicedToArray(_useState25, 2),\n      inventoryId = _useState26[0],\n      setInventoryId = _useState26[1];\n\n  var _useState27 = useState(\"\"),\n      _useState28 = _slicedToArray(_useState27, 2),\n      baseunit = _useState28[0],\n      setBaseunit = _useState28[1];\n\n  var _useState29 = useState(\"\"),\n      _useState30 = _slicedToArray(_useState29, 2),\n      quantity = _useState30[0],\n      setQuantity = _useState30[1];\n\n  var _useState31 = useState(\"\"),\n      _useState32 = _slicedToArray(_useState31, 2),\n      sellingprice = _useState32[0],\n      setSellingPrice = _useState32[1];\n\n  var _useState33 = useState(0),\n      _useState34 = _slicedToArray(_useState33, 2),\n      costprice = _useState34[0],\n      setCostprice = _useState34[1];\n\n  var _useState35 = useState(\"\"),\n      _useState36 = _slicedToArray(_useState35, 2),\n      invquantity = _useState36[0],\n      setInvQuantity = _useState36[1];\n\n  var _useState37 = useState(0),\n      _useState38 = _slicedToArray(_useState37, 2),\n      calcamount = _useState38[0],\n      setCalcAmount = _useState38[1];\n\n  var _useState39 = useState([]),\n      _useState40 = _slicedToArray(_useState39, 2),\n      productItem = _useState40[0],\n      setProductItem = _useState40[1];\n\n  var _useState41 = useState(\"\"),\n      _useState42 = _slicedToArray(_useState41, 2),\n      billingId = _useState42[0],\n      setBilllingId = _useState42[1];\n\n  var _useState43 = useState(true),\n      _useState44 = _slicedToArray(_useState43, 2),\n      changeAmount = _useState44[0],\n      setChangeAmount = _useState44[1];\n\n  var _useState45 = useState(\"Cash\"),\n      _useState46 = _slicedToArray(_useState45, 2),\n      paymentmode = _useState46[0],\n      setPaymentMode = _useState46[1];\n\n  var _useState47 = useState([]),\n      _useState48 = _slicedToArray(_useState47, 2),\n      paymentOptions = _useState48[0],\n      setPaymentOptions = _useState48[1];\n\n  var _useState49 = useState(\"\"),\n      _useState50 = _slicedToArray(_useState49, 2),\n      billMode = _useState50[0],\n      setBillMode = _useState50[1];\n\n  var _useState51 = useState(false),\n      _useState52 = _slicedToArray(_useState51, 2),\n      productModal = _useState52[0],\n      setProductModal = _useState52[1];\n\n  var _useState53 = useState(\"\"),\n      _useState54 = _slicedToArray(_useState53, 2),\n      obj = _useState54[0],\n      setObj = _useState54[1];\n\n  var _useState55 = useState(0),\n      _useState56 = _slicedToArray(_useState55, 2),\n      amountPaid = _useState56[0],\n      setAmountPaid = _useState56[1];\n\n  var _useState57 = useState(0),\n      _useState58 = _slicedToArray(_useState57, 2),\n      balance = _useState58[0],\n      setBalance = _useState58[1];\n\n  var _useState59 = useState(false),\n      _useState60 = _slicedToArray(_useState59, 2),\n      buttonState = _useState60[0],\n      setButtonState = _useState60[1];\n\n  var _useState61 = useState([]),\n      _useState62 = _slicedToArray(_useState61, 2),\n      partPay = _useState62[0],\n      setPartPay = _useState62[1];\n\n  var _useContext2 = useContext(ObjectContext),\n      state = _useContext2.state,\n      setState = _useContext2.setState;\n\n  var inputEl = useRef(0);\n  var calcamount1;\n  var hidestatus;\n  var medication = state.financeModule.selectedFinance; //console.log(state.financeModule.state)\n\n  var showDocumentation = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(value) {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setProductModal(true);\n\n            case 1:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function showDocumentation(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var handlecloseModal = function handlecloseModal() {\n    setProductModal(false); // handleSearch(val)\n  };\n\n  var handleChangeMode = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(value) {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return setPaymentMode(value);\n\n            case 2:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function handleChangeMode(_x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var handleRow = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(ProductEntry) {\n      var newProductEntryModule;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              //console.log(\"b4\",state)\n              //console.log(\"handlerow\",ProductEntry)\n              //await setMedication(ProductEntry)\n              newProductEntryModule = {\n                selectedMedication: ProductEntry,\n                show: 'detail'\n              };\n              _context3.next = 3;\n              return setState(function (prevstate) {\n                return _objectSpread(_objectSpread({}, prevstate), {}, {\n                  medicationModule: newProductEntryModule\n                });\n              });\n\n            case 3:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function handleRow(_x3) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var _useState63 = useState({\n    productitems: [],\n    date: date,\n    documentNo: documentNo,\n    type: type,\n    totalamount: totalamount,\n    source: source\n  }),\n      _useState64 = _slicedToArray(_useState63, 2),\n      productEntry = _useState64[0],\n      setProductEntry = _useState64[1];\n\n  var productItemI = {\n    productId: productId,\n    name: name,\n    quantity: quantity,\n    sellingprice: sellingprice,\n    amount: calcamount,\n    //||qamount\n    baseunit: baseunit,\n    costprice: costprice,\n    billingId: billingId\n  }; // consider batchformat{batchno,expirydate,qtty,baseunit}\n  //consider baseunoit conversions\n\n  var getSearchfacility = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(obj) {\n      var contracts, contract, _contract;\n\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.next = 2;\n              return setObj(obj);\n\n            case 2:\n              if (obj) {\n                _context4.next = 12;\n                break;\n              }\n\n              //\"clear stuff\"\n              setProductId(\"\");\n              setName(\"\");\n              setBaseunit(\"\");\n              setInventoryId(\"\");\n              setSellingPrice(\"\");\n              setInvQuantity(\"\");\n              setDescription(\"\");\n              setCostprice(\"\"); // setCalcAmount(null)\n\n              return _context4.abrupt(\"return\");\n\n            case 12:\n              setProductId(obj.productId);\n              setName(obj.name);\n              setBaseunit(obj.baseunit);\n              setInventoryId(obj.inventoryId);\n              setSellingPrice(obj.sellingprice); //modify this based on billing mode\n\n              setInvQuantity(obj.quantity);\n              setCostprice(obj.costprice);\n              setBilllingId(obj.billingId);\n              contracts = obj.billingDetails.contracts; //const billingserv=client.service('billing')\n\n              if (billMode.type === \"HMO Cover\") {\n                //paymentmode\n                contract = contracts.filter(function (el) {\n                  return el.source_org === billMode.detail.hmo;\n                }); //  console.log(contract[0].price)\n\n                setSellingPrice(contract[0].price); //  console.log(sellingprice)\n              }\n\n              if (billMode.type === \"Company Cover\") {\n                //paymentmode\n                _contract = contracts.filter(function (el) {\n                  return el.source_org === billMode.detail.company;\n                }); //   console.log(contract[0].price)\n\n                setSellingPrice(_contract[0].price); //   console.log(sellingprice)\n              }\n              /*  setValue(\"facility\", obj._id,  {\n                   shouldValidate: true,\n                   shouldDirty: true\n               }) */\n\n\n            case 23:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n\n    return function getSearchfacility(_x4) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    /*  console.log(obj)\n     console.log(billMode)\n     if( paymentmode!==\"Cash\" && obj){\n         const contracts=obj.billingDetails.contracts\n         let contract=contracts.filter(el=>el.source_org===billMode.detail.hmo)\n        console.log(contract[0].price)\n        setSellingPrice(contract[0].price)\n        console.log(sellingprice)\n    }\n      return () => {\n         \n      } */\n  }, [obj]);\n  useEffect(function () {\n    setCurrentUser(user); //console.log(currentUser)\n\n    return function () {};\n  }, [user]);\n\n  var handleUpdateTotal = /*#__PURE__*/function () {\n    var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5() {\n      return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              _context5.next = 2;\n              return setTotalamount(function (prevtotal) {\n                return Number(prevtotal) + Number(calcamount);\n              });\n\n            case 2:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5);\n    }));\n\n    return function handleUpdateTotal() {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n\n  var handleChangeType = /*#__PURE__*/function () {\n    var _ref6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6(e) {\n      return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n        while (1) {\n          switch (_context6.prev = _context6.next) {\n            case 0:\n              _context6.next = 2;\n              return setType(e.target.value);\n\n            case 2:\n            case \"end\":\n              return _context6.stop();\n          }\n        }\n      }, _callee6);\n    }));\n\n    return function handleChangeType(_x5) {\n      return _ref6.apply(this, arguments);\n    };\n  }();\n\n  var handleAmount = /*#__PURE__*/function () {\n    var _ref7 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7() {\n      return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n        while (1) {\n          switch (_context7.prev = _context7.next) {\n            case 0:\n              _context7.next = 2;\n              return setDescription(\"\");\n\n            case 2:\n            case \"end\":\n              return _context7.stop();\n          }\n        }\n      }, _callee7);\n    }));\n\n    return function handleAmount() {\n      return _ref7.apply(this, arguments);\n    };\n  }();\n\n  var handleClickProd = /*#__PURE__*/function () {\n    var _ref8 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee8() {\n      var billInfo;\n      return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n        while (1) {\n          switch (_context8.prev = _context8.next) {\n            case 0:\n              if (!(quantity === 0 || quantity === \"\" || productId === \"\")) {\n                _context8.next = 3;\n                break;\n              }\n\n              toast({\n                message: 'You need to choose a product and quantity to proceed',\n                type: 'is-danger',\n                dismissible: true,\n                pauseOnHover: true\n              });\n              return _context8.abrupt(\"return\");\n\n            case 3:\n              _context8.next = 5;\n              return setSuccess(false);\n\n            case 5:\n              _context8.next = 7;\n              return setProductItem(function (prevProd) {\n                return prevProd.concat(productItemI);\n              });\n\n            case 7:\n              handleUpdateTotal(); // generate billing info\n\n              billInfo = {\n                orderInfo: {\n                  orderId: medication._id,\n                  orderObj: medication\n                },\n                serviceInfo: {\n                  price: productItemI.sellingprice,\n                  quantity: productItemI.quantity,\n                  productId: productItemI.productId,\n                  name: productItemI.name,\n                  baseunit: productItemI.baseunit,\n                  amount: productItemI.amount,\n                  billingId: productItemI.billingId,\n                  createdby: user._id\n                },\n                paymentInfo: {},\n                participantInfo: {\n                  billingFacility: medication.destination,\n                  billingFacilityName: medication.destination_name,\n                  locationId: state.StoreModule.selectedStore._id,\n                  //selected location,\n                  clientId: medication.clientId,\n                  client: medication.client,\n                  paymentmode: billMode\n                },\n                createdBy: user.id,\n                billing_status: \"Unpaid\"\n              }; //update order\n\n              OrderServ.patch(medication._id, {\n                order_status: \"Billed\",\n                billInfo: billInfo\n              }).then(function (resp) {\n                // medication=resp\n                // console.log(resp)\n                handleRow(resp); //update dispense\n              }).catch(function (err) {\n                console.log(err);\n              }); //update status(billed) + action()\n              //?attached chosen product to medication\n              //dispense helper?\n\n              setName(\"\");\n              setBaseunit(\"\");\n              setQuantity(\"\");\n              setInventoryId(\"\");\n              setSellingPrice(\"\");\n              setInvQuantity(\"\");\n              handleAmount(); // setCalcAmount(null)\n\n              _context8.next = 19;\n              return setSuccess(true);\n\n            case 19:\n              /* console.log(success)\n              console.log(qamount)\n              console.log(productItem) */\n              setChangeAmount(true);\n\n            case 20:\n            case \"end\":\n              return _context8.stop();\n          }\n        }\n      }, _callee8);\n    }));\n\n    return function handleClickProd() {\n      return _ref8.apply(this, arguments);\n    };\n  }();\n\n  var handleQtty = /*#__PURE__*/function () {\n    var _ref9 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee9(e) {\n      return _regeneratorRuntime.wrap(function _callee9$(_context9) {\n        while (1) {\n          switch (_context9.prev = _context9.next) {\n            case 0:\n              if (!(invquantity < e.target.value)) {\n                _context9.next = 3;\n                break;\n              }\n\n              toast({\n                message: 'You can not sell more quantity than exist in inventory ',\n                type: 'is-danger',\n                dismissible: true,\n                pauseOnHover: true\n              });\n              return _context9.abrupt(\"return\");\n\n            case 3:\n              setQuantity(e.target.value);\n              calcamount1 = quantity * sellingprice;\n              _context9.next = 7;\n              return setCalcAmount(calcamount1);\n\n            case 7:\n            case \"end\":\n              return _context9.stop();\n          }\n        }\n      }, _callee9);\n    }));\n\n    return function handleQtty(_x6) {\n      return _ref9.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    setProductEntry({\n      date: date,\n      documentNo: documentNo,\n      type: type,\n      totalamount: totalamount,\n      source: source\n    });\n    setCalcAmount(quantity * sellingprice);\n    return function () {};\n  }, [date]);\n\n  var resetform = function resetform() {\n    setType(\"Sales\");\n    setDocumentNo(\"\");\n    setTotalamount(\"\");\n    setProductId(\"\");\n    setSource(\"\");\n    setDate(\"\");\n    setName(\"\");\n    setBaseunit(\"\");\n    setCostprice(\"\");\n    setProductItem([]);\n  };\n\n  var handleMedicationDone = /*#__PURE__*/function () {\n    var _ref10 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee10() {\n      var newProductEntryModule;\n      return _regeneratorRuntime.wrap(function _callee10$(_context10) {\n        while (1) {\n          switch (_context10.prev = _context10.next) {\n            case 0:\n              //handle selected single order\n              //console.log(\"b4\",state)\n              //console.log(\"handlerow\",ProductEntry)\n              // await setSelectedMedication(\"\")\n              newProductEntryModule = {\n                selectedMedication: {},\n                show: 'create'\n              };\n              _context10.next = 3;\n              return setState(function (prevstate) {\n                return _objectSpread(_objectSpread({}, prevstate), {}, {\n                  medicationModule: newProductEntryModule\n                });\n              });\n\n            case 3:\n            case \"end\":\n              return _context10.stop();\n          }\n        }\n      }, _callee10);\n    }));\n\n    return function handleMedicationDone() {\n      return _ref10.apply(this, arguments);\n    };\n  }();\n\n  var onSubmit = /*#__PURE__*/function () {\n    var _ref11 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee11(e) {\n      return _regeneratorRuntime.wrap(function _callee11$(_context11) {\n        while (1) {\n          switch (_context11.prev = _context11.next) {\n            case 0:\n              e.preventDefault();\n              setMessage(\"\"); //setError(false)\n\n              setSuccess(false);\n              _context11.next = 5;\n              return setProductEntry({\n                date: date,\n                documentNo: documentNo,\n                type: type,\n                totalamount: totalamount,\n                source: source\n              });\n\n            case 5:\n              productEntry.productitems = productItem;\n              productEntry.createdby = user._id;\n              productEntry.transactioncategory = \"debit\"; // console.log(\"b4 facility\",productEntry);\n\n              if (!user.currentEmployee) {\n                _context11.next = 12;\n                break;\n              }\n\n              productEntry.facility = user.currentEmployee.facilityDetail._id; // or from facility dropdown\n\n              _context11.next = 14;\n              break;\n\n            case 12:\n              toast({\n                message: 'You can not remove inventory from any organization',\n                type: 'is-danger',\n                dismissible: true,\n                pauseOnHover: true\n              });\n              return _context11.abrupt(\"return\");\n\n            case 14:\n              if (!state.StoreModule.selectedStore._id) {\n                _context11.next = 18;\n                break;\n              }\n\n              productEntry.storeId = state.StoreModule.selectedStore._id;\n              _context11.next = 20;\n              break;\n\n            case 18:\n              toast({\n                message: 'You need to select a store before removing inventory',\n                type: 'is-danger',\n                dismissible: true,\n                pauseOnHover: true\n              });\n              return _context11.abrupt(\"return\");\n\n            case 20:\n            case \"end\":\n              return _context11.stop();\n          }\n        }\n      }, _callee11);\n    }));\n\n    return function onSubmit(_x7) {\n      return _ref11.apply(this, arguments);\n    };\n  }();\n\n  var handleChangeAmount = function handleChangeAmount() {\n    setChangeAmount(function (rev) {\n      return !rev;\n    });\n  };\n\n  var newclient = /*#__PURE__*/function () {\n    var _ref12 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee12() {\n      return _regeneratorRuntime.wrap(function _callee12$(_context12) {\n        while (1) {\n          switch (_context12.prev = _context12.next) {\n            case 0:\n              _context12.next = 2;\n              return setProductItem([]);\n\n            case 2:\n            case \"end\":\n              return _context12.stop();\n          }\n        }\n      }, _callee12);\n    }));\n\n    return function newclient() {\n      return _ref12.apply(this, arguments);\n    };\n  }();\n\n  var handleAccept = /*#__PURE__*/function () {\n    var _ref13 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee13() {\n      var obj, confirm;\n      return _regeneratorRuntime.wrap(function _callee13$(_context13) {\n        while (1) {\n          switch (_context13.prev = _context13.next) {\n            case 0:\n              _context13.next = 2;\n              return setButtonState(true);\n\n            case 2:\n              if (!(paymentmode === \"\" || amountPaid === 0 || amountPaid === \"\")) {\n                _context13.next = 7;\n                break;\n              }\n\n              toast({\n                message: 'Kindly choose payment mode or enter amount',\n                type: 'is-danger',\n                dismissible: true,\n                pauseOnHover: true\n              });\n              _context13.next = 6;\n              return setButtonState(false);\n\n            case 6:\n              return _context13.abrupt(\"return\");\n\n            case 7:\n              obj = {\n                // toWallet:{ type: Schema.Types.ObjectId, ref:'facility', }, //receiving money\n                //fromWallet:{ type: Schema.Types.ObjectId, ref:'facility', },//sending money\n                //subwallet:{ type: Schema.Types.ObjectId, ref:'subwallet', },\n                client: medication.participantInfo.client._id,\n                organization: user.employeeData[0].facilityDetail._id,\n                category: \"credit\",\n                //debit/credit\n                amount: amountPaid,\n                description: description,\n                toName: user.employeeData[0].facilityDetail.facilityName,\n                fromName: medication.participantInfo.client.firstname + \" \" + medication.participantInfo.client.lastname,\n                createdby: user._id,\n                // refBill:[{ type: Schema.Types.ObjectId, ref:'bills'  }], //billid to be paid : ref invoice to pay\n                // info:{ type: Schema.Types.Mixed},\n                paymentmode: paymentmode,\n                facility: user.employeeData[0].facilityDetail._id,\n                locationId: state.LocationModule.selectedLocation._id,\n                type: \"Deposit\"\n              };\n              confirm = window.confirm(\"Are you sure you want to accept N \".concat(obj.amount, \" from \").concat(obj.fromName));\n\n              if (!confirm) {\n                _context13.next = 12;\n                break;\n              }\n\n              _context13.next = 12;\n              return SubwalletTxServ.create(obj).then(function (resp) {\n                // console.log(resp)\n                toast({\n                  message: 'Deposit accepted succesfully',\n                  type: 'is-success',\n                  dismissible: true,\n                  pauseOnHover: true\n                });\n                setAmountPaid(0);\n                setDescription(\"\");\n              }).catch(function (err) {\n                toast({\n                  message: 'Error accepting deposit ' + err,\n                  type: 'is-danger',\n                  dismissible: true,\n                  pauseOnHover: true\n                });\n              });\n\n            case 12:\n              _context13.next = 14;\n              return setButtonState(false);\n\n            case 14:\n            case \"end\":\n              return _context13.stop();\n          }\n        }\n      }, _callee13);\n    }));\n\n    return function handleAccept() {\n      return _ref13.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    var oldname = medication.participantInfo.client.firstname + \" \" + medication.participantInfo.client.lastname; // console.log(\"oldname\",oldname)\n\n    setSource(medication.participantInfo.client.firstname + \" \" + medication.participantInfo.client.lastname);\n    var newname = source; // console.log(\"newname\",newname)\n\n    if (oldname !== newname) {\n      //newdispense\n      setProductItem([]);\n      setTotalamount(0);\n    } //is the row checked or unchecked\n\n\n    if (state.financeModule.state) {\n      medication.show = \"none\";\n      medication.proposedpayment = {\n        balance: 0,\n        paidup: medication.paymentInfo.paidup + medication.paymentInfo.balance,\n        amount: medication.paymentInfo.balance\n      }; //no payment detail push\n\n      setProductItem(function (prevProd) {\n        return prevProd.concat(medication);\n      });\n    } else {\n      if (productItem.length > 0) {\n        setProductItem(function (prevProd) {\n          return prevProd.filter(function (el) {\n            return el._id !== medication._id;\n          });\n        });\n      }\n    } // const paymentoptions= []\n    //const info = medication.participantInfo.client.paymentinfo\n    //let billme={}\n\n\n    getFacilities();\n    return function () {};\n  }, [state.financeModule]);\n\n  var getTotal = /*#__PURE__*/function () {\n    var _ref14 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee14() {\n      return _regeneratorRuntime.wrap(function _callee14$(_context14) {\n        while (1) {\n          switch (_context14.prev = _context14.next) {\n            case 0:\n              setTotalamount(0);\n              productItem.forEach(function (el) {\n                if (el.show === \"none\") {\n                  if (el.billing_status === \"Unpaid\") {\n                    setTotalamount(function (prevtotal) {\n                      return Number(prevtotal) + Number(el.serviceInfo.amount);\n                    });\n                  } else {\n                    setTotalamount(function (prevtotal) {\n                      return Number(prevtotal) + Number(el.paymentInfo.balance);\n                    });\n                  }\n                }\n\n                if (el.show === \"flex\") {\n                  setTotalamount(function (prevtotal) {\n                    return Number(prevtotal) + Number(el.partPay);\n                  });\n                } // \n\n              });\n\n            case 2:\n            case \"end\":\n              return _context14.stop();\n          }\n        }\n      }, _callee14);\n    }));\n\n    return function getTotal() {\n      return _ref14.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    console.log(productItem);\n    getTotal();\n    return function () {};\n  }, [productItem]);\n\n  var getFacilities = /*#__PURE__*/function () {\n    var _ref15 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee15() {\n      var findProductEntry;\n      return _regeneratorRuntime.wrap(function _callee15$(_context15) {\n        while (1) {\n          switch (_context15.prev = _context15.next) {\n            case 0:\n              _context15.next = 2;\n              return SubwalletServ.find({\n                query: {\n                  client: medication.participantInfo.client._id,\n                  organization: user.employeeData[0].facilityDetail._id,\n                  //storeId:state.StoreModule.selectedStore._id,\n                  //clientId:state.ClientModule.selectedClient._id,\n                  $limit: 100,\n                  $sort: {\n                    createdAt: -1\n                  }\n                }\n              });\n\n            case 2:\n              findProductEntry = _context15.sent;\n              console.log(findProductEntry); // console.log(\"balance\", findProductEntry.data[0].amount)\n\n              if (!(findProductEntry.data.length > 0)) {\n                _context15.next = 9;\n                break;\n              }\n\n              _context15.next = 7;\n              return setBalance(findProductEntry.data[0].amount);\n\n            case 7:\n              _context15.next = 11;\n              break;\n\n            case 9:\n              _context15.next = 11;\n              return setBalance(0);\n\n            case 11:\n            case \"end\":\n              return _context15.stop();\n          }\n        }\n      }, _callee15);\n    }));\n\n    return function getFacilities() {\n      return _ref15.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    // const medication =state.medicationModule.selectedMedication\n    var today = new Date().toLocaleString(); //console.log(today)\n\n    setDate(today);\n    var invoiceNo = random(6, 'uppernumeric');\n    setDocumentNo(invoiceNo);\n    getFacilities();\n    SubwalletServ.on('created', function (obj) {\n      return getFacilities();\n    });\n    SubwalletServ.on('updated', function (obj) {\n      return getFacilities();\n    });\n    SubwalletServ.on('patched', function (obj) {\n      return getFacilities();\n    });\n    SubwalletServ.on('removed', function (obj) {\n      return getFacilities();\n    });\n    return /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee16() {\n      var newProductEntryModule;\n      return _regeneratorRuntime.wrap(function _callee16$(_context16) {\n        while (1) {\n          switch (_context16.prev = _context16.next) {\n            case 0:\n              newProductEntryModule = {\n                selectedFinance: {},\n                show: 'create'\n              };\n              _context16.next = 3;\n              return setState(function (prevstate) {\n                return _objectSpread(_objectSpread({}, prevstate), {}, {\n                  financeModule: newProductEntryModule\n                });\n              });\n\n            case 3:\n              _context16.next = 5;\n              return setPartPay([]);\n\n            case 5:\n            case \"end\":\n              return _context16.stop();\n          }\n        }\n      }, _callee16);\n    }));\n  }, []);\n  /*   useEffect(() => {\n        calcamount1=quantity*sellingprice\n         setCalcAmount(calcamount1)\n         console.log(calcamount)\n         setChangeAmount(true)\n        return () => {\n            \n        }\n    }, [quantity]) */\n\n  var handleChangePart = /*#__PURE__*/function () {\n    var _ref17 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee17(bill, e) {\n      var item, payObj;\n      return _regeneratorRuntime.wrap(function _callee17$(_context17) {\n        while (1) {\n          switch (_context17.prev = _context17.next) {\n            case 0:\n              console.log(bill, e.target.value);\n\n              if (e.target.value === \"Part\") {\n                bill.show = \"flex\";\n                setPartPay(function (prev) {\n                  return prev.concat(bill);\n                });\n              }\n\n              if (!(e.target.value === \"Full\")) {\n                _context17.next = 11;\n                break;\n              }\n\n              bill.show = \"none\";\n              _context17.next = 6;\n              return productItem.find(function (el) {\n                return el._id === bill._id;\n              });\n\n            case 6:\n              item = _context17.sent;\n              payObj = {\n                amount: item.paymentInfo.balance,\n                mode: \"Full\",\n                date: new Date().toLocaleString()\n              }; //item.partPay=\"\"\n              // item.paymentInfo.paymentDetails.push(payObj)\n\n              item.proposedpayment = {\n                balance: Number(item.paymentInfo.balance) - Number(payObj.amount),\n                paidup: Number(item.paymentInfo.paidup) + Number(payObj.amount),\n                amount: payObj.amount\n              }; // item.paymentInfo.balance=item.paymentInfo.balance - item.paymentInfo.balance\n              //  item.paymentInfo.paidup=Number(item.paymentInfo.paidup) + Number(payObj.amount)\n\n              getTotal();\n              setPartPay(function (prev) {\n                return prev.concat(bill);\n              });\n\n            case 11:\n            case \"end\":\n              return _context17.stop();\n          }\n        }\n      }, _callee17);\n    }));\n\n    return function handleChangePart(_x8, _x9) {\n      return _ref17.apply(this, arguments);\n    };\n  }();\n\n  var handlePartAmount = /*#__PURE__*/function () {\n    var _ref18 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee18(bill, e) {\n      var partAmount, item;\n      return _regeneratorRuntime.wrap(function _callee18$(_context18) {\n        while (1) {\n          switch (_context18.prev = _context18.next) {\n            case 0:\n              partAmount = e.target.value; // bill.partPay=partAmount\n              //const itemList=productItem\n\n              if (!(partAmount === \"\" || partAmount === 0)) {\n                _context18.next = 4;\n                break;\n              }\n\n              toast({\n                message: 'Please enter an amount as part payment',\n                type: 'is-danger',\n                dismissible: true,\n                pauseOnHover: true\n              });\n              return _context18.abrupt(\"return\");\n\n            case 4:\n              _context18.next = 6;\n              return productItem.find(function (el) {\n                return el._id === bill._id;\n              });\n\n            case 6:\n              item = _context18.sent;\n              item.partPay = partAmount;\n              setPartPay(function (prev) {\n                return prev.concat(bill);\n              }); //setProductItem(productItem)\n\n            case 9:\n            case \"end\":\n              return _context18.stop();\n          }\n        }\n      }, _callee18);\n    }));\n\n    return function handlePartAmount(_x10, _x11) {\n      return _ref18.apply(this, arguments);\n    };\n  }();\n\n  var handleUpdate = /*#__PURE__*/function () {\n    var _ref19 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee19(bill, e) {\n      var item, partAmount, payObj;\n      return _regeneratorRuntime.wrap(function _callee19$(_context19) {\n        while (1) {\n          switch (_context19.prev = _context19.next) {\n            case 0:\n              if (!(bill.partPay === \"\" || bill.partPay === 0 || bill.partPay === undefined)) {\n                _context19.next = 3;\n                break;\n              }\n\n              toast({\n                message: 'Please enter an amount as part payment',\n                type: 'is-danger',\n                dismissible: true,\n                pauseOnHover: true\n              });\n              return _context19.abrupt(\"return\");\n\n            case 3:\n              _context19.next = 5;\n              return productItem.find(function (el) {\n                return el._id === bill._id;\n              });\n\n            case 5:\n              item = _context19.sent;\n              // console.log(item)\n\n              /* item.partPay=partAmount\n              console.log(item)\n              console.log(productItem) */\n              partAmount = item.partPay;\n\n              if (bill.show === \"flex\") {\n                payObj = {\n                  amount: partAmount,\n                  mode: \"Part\",\n                  date: new Date().toLocaleString()\n                }; // item.paymentInfo.paymentDetails.push(payObj)\n\n                item.proposedpayment = {\n                  balance: Number(item.paymentInfo.balance) - Number(payObj.amount),\n                  paidup: Number(item.paymentInfo.paidup) + Number(payObj.amount),\n                  amount: payObj.amount\n                };\n                /* item.paymentInfo.balance=item.paymentInfo.balance-partAmount\n                item.paymentInfo.paidup=Number(item.paymentInfo.paidup)+ Number(partAmount) */\n              }\n              /* if (bill.show===\"none\"){\n                  const   payObj={\n                      amount:  item.paymentInfo.balance,\n                      mode:\"Full\",\n                      date: new Date().toLocaleString()\n                  }\n                  item.paymentInfo.paymentDetails.push(payObj)\n                  item.paymentInfo.balance=item.paymentInfo.balance - item.paymentInfo.balance\n                  }\n                  \n              */\n\n\n              getTotal();\n              setPartPay(function (prev) {\n                return prev.concat(bill);\n              });\n              toast({\n                message: 'Part payment updated successfully',\n                type: 'is-success',\n                dismissible: true,\n                pauseOnHover: true\n              });\n\n            case 11:\n            case \"end\":\n              return _context19.stop();\n          }\n        }\n      }, _callee19);\n    }));\n\n    return function handleUpdate(_x12, _x13) {\n      return _ref19.apply(this, arguments);\n    };\n  }();\n\n  var handlePayment = /*#__PURE__*/function () {\n    var _ref20 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee21() {\n      var allItems, obj;\n      return _regeneratorRuntime.wrap(function _callee21$(_context21) {\n        while (1) {\n          switch (_context21.prev = _context21.next) {\n            case 0:\n              if (!(totalamount > balance)) {\n                _context21.next = 3;\n                break;\n              }\n\n              toast({\n                message: 'Total amount due greater than money received. Kindly top up account or reduce number of bills to be paid',\n                type: 'is-danger',\n                dismissible: true,\n                pauseOnHover: true\n              });\n              return _context21.abrupt(\"return\");\n\n            case 3:\n              productItem.forEach(function (el) {\n                if (!el.proposedpayment.amount) {\n                  toast({\n                    message: 'one or more bills do not have a payment method selected',\n                    type: 'is-danger',\n                    dismissible: true,\n                    pauseOnHover: true\n                  });\n                  return;\n                }\n              }); //transform \n\n              productItem.forEach(function (el) {\n                if (el.show === \"flex\") {\n                  var payObj = {\n                    amount: el.proposedpayment.amount,\n                    mode: \"Part\",\n                    date: new Date().toLocaleString()\n                  };\n                  el.paymentInfo.paymentDetails.push(payObj);\n                }\n\n                if (el.show === \"none\") {\n                  var _payObj = {\n                    amount: el.proposedpayment.amount,\n                    mode: \"Full\",\n                    date: new Date().toLocaleString()\n                  };\n                  el.paymentInfo.paymentDetails.push(_payObj);\n                }\n              });\n              allItems = productItem;\n              allItems.forEach(function (el) {\n                el.paymentInfo.balance = el.proposedpayment.balance;\n                el.paymentInfo.paidup = el.proposedpayment.paidup;\n                el.paymentInfo.amountpaid = el.proposedpayment.amount;\n\n                if (el.paymentInfo.balance === 0) {\n                  el.billing_status = \"Fully Paid\";\n                } else {\n                  el.billing_status = \"Part Payment\";\n                }\n\n                el.show = \"none\";\n                el.checked = false;\n                delete el.proposedpayment;\n                delete el.partPay;\n              });\n              obj = {\n                clientId: medication.participantInfo.client._id,\n                //sending money\n                clientName: source,\n                client: medication.participantInfo.client,\n                facilityId: user.employeeData[0].facilityDetail._id,\n                invoiceNo: documentNo,\n                totalamount: totalamount,\n                createdby: user._id,\n                status: \"Fully Paid\",\n                //billid to be paid : ref invoice to pay\n                bills: allItems,\n                balance: balance,\n                facilityName: user.employeeData[0].facilityDetail.facilityName\n              };\n              console.log(obj);\n              InvoiceServ.create(obj).then( /*#__PURE__*/function () {\n                var _ref21 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee20(resp) {\n                  var newProductEntryModule;\n                  return _regeneratorRuntime.wrap(function _callee20$(_context20) {\n                    while (1) {\n                      switch (_context20.prev = _context20.next) {\n                        case 0:\n                          setProductItem([]);\n                          toast({\n                            message: 'payment successful',\n                            type: 'is-success',\n                            dismissible: true,\n                            pauseOnHover: true\n                          });\n                          newProductEntryModule = {\n                            selectedFinance: {},\n                            show: 'create'\n                          };\n                          _context20.next = 5;\n                          return setState(function (prevstate) {\n                            return _objectSpread(_objectSpread({}, prevstate), {}, {\n                              finance: newProductEntryModule\n                            });\n                          });\n\n                        case 5:\n                        case \"end\":\n                          return _context20.stop();\n                      }\n                    }\n                  }, _callee20);\n                }));\n\n                return function (_x14) {\n                  return _ref21.apply(this, arguments);\n                };\n              }()).catch(function (err) {\n                toast({\n                  message: 'Error occurred with payment' + err,\n                  type: 'is-danger',\n                  dismissible: true,\n                  pauseOnHover: true\n                });\n              }); //2. call single end point for billspayment?\n              //2.1 create subwallet transaction- debit\n              //2.2 update subwallet\n              //2.3 mark orders as paid\n              //2.4 mark bills as paid\n\n            case 10:\n            case \"end\":\n              return _context21.stop();\n          }\n        }\n      }, _callee21);\n    }));\n\n    return function handlePayment() {\n      return _ref20.apply(this, arguments);\n    };\n  }(); // console.log(\"simpa\")\n\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card card-overflow mb-2 \",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"card-header-title\",\n          children: [\"Make Deposit for \", source]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 866,\n          columnNumber: 18\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"button is-success is-small btnheight mt-2\",\n          children: [\"Balance: N \", balance]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 869,\n          columnNumber: 18\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 865,\n        columnNumber: 14\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-content pb-1\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"Deposit\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"field is-horizontal pullup\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"field-body\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"field\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"control\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"select is-small \",\n                    children: /*#__PURE__*/_jsxDEV(\"select\", {\n                      name: \"paymentmode\",\n                      value: paymentmode,\n                      onChange: function onChange(e) {\n                        return handleChangeMode(e.target.value);\n                      },\n                      className: \"selectadd\",\n                      children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                        value: \"\",\n                        children: \"Payment Mode \"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 883,\n                        columnNumber: 33\n                      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                        value: \"Cash\",\n                        children: \"Cash\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 884,\n                        columnNumber: 33\n                      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                        value: \"Wallet\",\n                        children: \"Wallet \"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 885,\n                        columnNumber: 33\n                      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                        value: \"Bank Transfer\",\n                        children: \"Bank Transfer \"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 886,\n                        columnNumber: 33\n                      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                        value: \"Card\",\n                        children: \"Card\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 887,\n                        columnNumber: 33\n                      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                        value: \"Cheque\",\n                        children: \"Cheque\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 888,\n                        columnNumber: 33\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 882,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 881,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 880,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 879,\n                columnNumber: 14\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"field\",\n                children: /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"control has-icons-left\",\n                  children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                    className: \"input is-small\",\n                    name: \"order\",\n                    value: amountPaid,\n                    type: \"text\",\n                    onChange: function onChange(e) {\n                      return setAmountPaid(e.target.value);\n                    },\n                    placeholder: \"Amount\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 895,\n                    columnNumber: 22\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"icon is-small is-left\",\n                    children: /*#__PURE__*/_jsxDEV(\"i\", {\n                      className: \"fas fa-hashtag\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 897,\n                      columnNumber: 22\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 896,\n                    columnNumber: 22\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 894,\n                  columnNumber: 18\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 893,\n                columnNumber: 14\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"field\",\n                children: /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"control  \"\n                  /* style={{display:\"none\"}} has-icons-left*/\n                  ,\n                  children: /*#__PURE__*/_jsxDEV(\"input\", {\n                    className: \"input is-small\",\n                    name: \"description\",\n                    value: description,\n                    type: \"text\",\n                    onChange: /*#__PURE__*/function () {\n                      var _ref22 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee22(e) {\n                        return _regeneratorRuntime.wrap(function _callee22$(_context22) {\n                          while (1) {\n                            switch (_context22.prev = _context22.next) {\n                              case 0:\n                                _context22.next = 2;\n                                return setDescription(e.target.value);\n\n                              case 2:\n                                return _context22.abrupt(\"return\", _context22.sent);\n\n                              case 3:\n                              case \"end\":\n                                return _context22.stop();\n                            }\n                          }\n                        }, _callee22);\n                      }));\n\n                      return function (_x15) {\n                        return _ref22.apply(this, arguments);\n                      };\n                    }(),\n                    placeholder: \"Payment Details\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 903,\n                    columnNumber: 22\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 902,\n                  columnNumber: 18\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 901,\n                columnNumber: 14\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"field \",\n                children: /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"control\",\n                  children: /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"button is-info is-small  is-pulled-left selectadd\",\n                    disabled: buttonState,\n                    children: /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"is-small\",\n                      onClick: handleAccept,\n                      children: \"Accept\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 912,\n                      columnNumber: 24\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 911,\n                    columnNumber: 22\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 910,\n                  columnNumber: 17\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 909,\n                columnNumber: 14\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 877,\n              columnNumber: 14\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 876,\n            columnNumber: 10\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 874,\n          columnNumber: 14\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 873,\n        columnNumber: 14\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 864,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card card-overflow\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-header-title\",\n          children: [\"Pay Bills for \", source, \"   #\", documentNo]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 926,\n          columnNumber: 18\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"button is-danger is-small btnheight mt-2\",\n          children: [\"Total Amount Due: N \", totalamount]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 930,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 925,\n        columnNumber: 14\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-content \",\n        children: productItem.length > 0 && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"vscrollable-acc pullup\",\n            children: [/*#__PURE__*/_jsxDEV(\"table\", {\n              className: \"table is-striped  is-hoverable is-fullwidth is-scrollable \",\n              children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                    children: /*#__PURE__*/_jsxDEV(\"abbr\", {\n                      title: \"Serial No\",\n                      children: \"S/No\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 990,\n                      columnNumber: 26\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 990,\n                    columnNumber: 22\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: /*#__PURE__*/_jsxDEV(\"abbr\", {\n                      title: \"Category\",\n                      children: \"Category\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 991,\n                      columnNumber: 26\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 991,\n                    columnNumber: 22\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: /*#__PURE__*/_jsxDEV(\"abbr\", {\n                      title: \"Description\",\n                      children: \"Description\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 992,\n                      columnNumber: 26\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 992,\n                    columnNumber: 22\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: /*#__PURE__*/_jsxDEV(\"abbr\", {\n                      title: \"Cost Price\",\n                      children: \"Type\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 994,\n                      columnNumber: 26\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 994,\n                    columnNumber: 22\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: /*#__PURE__*/_jsxDEV(\"abbr\", {\n                      title: \"Amount\",\n                      children: \"Amount\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 995,\n                      columnNumber: 26\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 995,\n                    columnNumber: 22\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 989,\n                  columnNumber: 22\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 988,\n                columnNumber: 18\n              }, this), /*#__PURE__*/_jsxDEV(\"tfoot\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1000,\n                columnNumber: 18\n              }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                children: productItem.map(function (ProductEntry, i) {\n                  return /*#__PURE__*/_jsxDEV(\"tr\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                      children: i + 1\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1006,\n                      columnNumber: 26\n                    }, _this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      children: ProductEntry.orderInfo.orderObj.order_category\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1007,\n                      columnNumber: 26\n                    }, _this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      children: ProductEntry.serviceInfo.name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1008,\n                      columnNumber: 26\n                    }, _this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                        className: \" is-small\",\n                        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                          type: \"radio\",\n                          name: ProductEntry._id,\n                          value: \"Full\",\n                          checked: ProductEntry.show === \"none\",\n                          onChange: function onChange(e) {\n                            handleChangePart(ProductEntry, e);\n                          }\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1010,\n                          columnNumber: 30\n                        }, _this), /*#__PURE__*/_jsxDEV(\"span\", {\n                          children: \" Full\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1011,\n                          columnNumber: 32\n                        }, _this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1009,\n                        columnNumber: 30\n                      }, _this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1012,\n                        columnNumber: 40\n                      }, _this), /*#__PURE__*/_jsxDEV(\"label\", {\n                        className: \" is-small\",\n                        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                          type: \"radio\",\n                          name: ProductEntry._id,\n                          value: \"Part\",\n                          onChange: function onChange(e) {\n                            return handleChangePart(ProductEntry, e);\n                          }\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1014,\n                          columnNumber: 30\n                        }, _this), /*#__PURE__*/_jsxDEV(\"span\", {\n                          children: \" Part \"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1015,\n                          columnNumber: 30\n                        }, _this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1013,\n                        columnNumber: 31\n                      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"field has-addons\",\n                        style: {\n                          display: \"\".concat(ProductEntry.show)\n                        },\n                        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"control\",\n                          children: /*#__PURE__*/_jsxDEV(\"input\", {\n                            className: \"input selectadd\",\n                            type: \"text\",\n                            name: ProductEntry._id\n                            /* value={ProductEntry.partPay}  */\n                            ,\n                            onChange: function onChange(e) {\n                              return handlePartAmount(ProductEntry, e);\n                            }\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1019,\n                            columnNumber: 35\n                          }, _this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1018,\n                          columnNumber: 31\n                        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"control\",\n                          children: /*#__PURE__*/_jsxDEV(\"button\", {\n                            className: \"button is-info selectadd\",\n                            onClick: function onClick(e) {\n                              return handleUpdate(ProductEntry, e);\n                            },\n                            children: \"Update\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1022,\n                            columnNumber: 35\n                          }, _this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1021,\n                          columnNumber: 35\n                        }, _this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1017,\n                        columnNumber: 31\n                      }, _this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1009,\n                      columnNumber: 26\n                    }, _this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                          children: \"Balance Due:\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1028,\n                          columnNumber: 32\n                        }, _this), ProductEntry.paymentInfo.balance, \"  (\", ProductEntry.proposedpayment.balance, \")\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1028,\n                        columnNumber: 29\n                      }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n                        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                          children: \"Paid Up:\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1029,\n                          columnNumber: 32\n                        }, _this), ProductEntry.paymentInfo.paidup, \" (\", ProductEntry.proposedpayment.paidup, \")\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1029,\n                        columnNumber: 29\n                      }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n                        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                          children: \"Amount:\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1030,\n                          columnNumber: 32\n                        }, _this), ProductEntry.paymentInfo.amountDue]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1030,\n                        columnNumber: 29\n                      }, _this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1027,\n                      columnNumber: 26\n                    }, _this)]\n                  }, i, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1005,\n                    columnNumber: 27\n                  }, _this);\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1003,\n                columnNumber: 18\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 987,\n              columnNumber: 11\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"field mt-2 is-grouped\",\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"control\",\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"button is-success is-small\",\n                  disabled: !productItem.length > 0,\n                  onClick: handlePayment,\n                  children: \"Pay\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1043,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1042,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1041,\n              columnNumber: 18\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 985,\n            columnNumber: 9\n          }, this)\n        }, void 0, false)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 934,\n        columnNumber: 14\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 924,\n      columnNumber: 14\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal \".concat(productModal ? \"is-active\" : \"\"),\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-background\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1062,\n        columnNumber: 37\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-card  modalbkgrnd\",\n        children: [/*#__PURE__*/_jsxDEV(\"header\", {\n          className: \"modal-card-head  btnheight\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"modal-card-title\",\n            children: \"Documentation\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1065,\n            columnNumber: 41\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"delete\",\n            \"aria-label\": \"close\",\n            onClick: handlecloseModal\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1066,\n            columnNumber: 41\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1064,\n          columnNumber: 41\n        }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n          className: \"modal-card-body modalcolor\",\n          children: /*#__PURE__*/_jsxDEV(Encounter, {\n            standalone: \"true\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1070,\n            columnNumber: 42\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1068,\n          columnNumber: 41\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1063,\n        columnNumber: 37\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1061,\n      columnNumber: 14\n    }, this)]\n  }, void 0, true);\n}\n\n_s(PaymentCreate, \"WoKuaIS7NZBXDhgLmpFG1bMgERw=\");\n\n_c = PaymentCreate;\nexport function InventorySearch(_ref23) {\n  _s2();\n\n  var _this2 = this;\n\n  var getSearchfacility = _ref23.getSearchfacility,\n      clear = _ref23.clear;\n  var productServ = client.service('inventory');\n\n  var _useState65 = useState([]),\n      _useState66 = _slicedToArray(_useState65, 2),\n      facilities = _useState66[0],\n      setFacilities = _useState66[1]; // eslint-disable-next-line\n\n\n  var _useState67 = useState(false),\n      _useState68 = _slicedToArray(_useState67, 2),\n      searchError = _useState68[0],\n      setSearchError = _useState68[1]; // eslint-disable-next-line\n\n\n  var _useState69 = useState(false),\n      _useState70 = _slicedToArray(_useState69, 2),\n      showPanel = _useState70[0],\n      setShowPanel = _useState70[1]; // eslint-disable-next-line\n\n\n  var _useState71 = useState(\"\"),\n      _useState72 = _slicedToArray(_useState71, 2),\n      searchMessage = _useState72[0],\n      setSearchMessage = _useState72[1]; // eslint-disable-next-line \n\n\n  var _useState73 = useState(\"\"),\n      _useState74 = _slicedToArray(_useState73, 2),\n      simpa = _useState74[0],\n      setSimpa = _useState74[1]; // eslint-disable-next-line \n\n\n  var _useState75 = useState(false),\n      _useState76 = _slicedToArray(_useState75, 2),\n      chosen = _useState76[0],\n      setChosen = _useState76[1]; // eslint-disable-next-line \n\n\n  var _useState77 = useState(0),\n      _useState78 = _slicedToArray(_useState77, 2),\n      count = _useState78[0],\n      setCount = _useState78[1];\n\n  var inputEl = useRef(null);\n\n  var _useState79 = useState(\"\"),\n      _useState80 = _slicedToArray(_useState79, 2),\n      val = _useState80[0],\n      setVal = _useState80[1];\n\n  var _useContext3 = useContext(UserContext),\n      user = _useContext3.user;\n\n  var _useContext4 = useContext(ObjectContext),\n      state = _useContext4.state;\n\n  var _useState81 = useState(false),\n      _useState82 = _slicedToArray(_useState81, 2),\n      productModal = _useState82[0],\n      setProductModal = _useState82[1];\n\n  var handleRow = /*#__PURE__*/function () {\n    var _ref24 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee23(obj) {\n      return _regeneratorRuntime.wrap(function _callee23$(_context23) {\n        while (1) {\n          switch (_context23.prev = _context23.next) {\n            case 0:\n              _context23.next = 2;\n              return setChosen(true);\n\n            case 2:\n              //alert(\"something is chaning\")\n              getSearchfacility(obj);\n              _context23.next = 5;\n              return setSimpa(obj.name);\n\n            case 5:\n              // setSelectedFacility(obj)\n              setShowPanel(false);\n              _context23.next = 8;\n              return setCount(2);\n\n            case 8:\n            case \"end\":\n              return _context23.stop();\n          }\n        }\n      }, _callee23);\n    }));\n\n    return function handleRow(_x16) {\n      return _ref24.apply(this, arguments);\n    };\n  }();\n\n  var handleBlur = /*#__PURE__*/function () {\n    var _ref25 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee24(e) {\n      return _regeneratorRuntime.wrap(function _callee24$(_context24) {\n        while (1) {\n          switch (_context24.prev = _context24.next) {\n            case 0:\n              if (count === 2) {\n                console.log(\"stuff was chosen\");\n              }\n              /*  console.log(\"blur\")\n                setShowPanel(false)\n               console.log(JSON.stringify(simpa))\n               if (simpa===\"\"){\n                   console.log(facilities.length)\n                   setSimpa(\"abc\")\n                   setSimpa(\"\")\n                   setFacilities([])\n                   inputEl.current.setValue=\"\"\n               }\n               console.log(facilities.length)\n               console.log(inputEl.current) */\n\n\n            case 1:\n            case \"end\":\n              return _context24.stop();\n          }\n        }\n      }, _callee24);\n    }));\n\n    return function handleBlur(_x17) {\n      return _ref25.apply(this, arguments);\n    };\n  }();\n\n  var handleSearch = /*#__PURE__*/function () {\n    var _ref26 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee25(value) {\n      var field, _query;\n\n      return _regeneratorRuntime.wrap(function _callee25$(_context25) {\n        while (1) {\n          switch (_context25.prev = _context25.next) {\n            case 0:\n              setVal(value);\n\n              if (!(value === \"\")) {\n                _context25.next = 5;\n                break;\n              }\n\n              setShowPanel(false);\n              getSearchfacility(false);\n              return _context25.abrupt(\"return\");\n\n            case 5:\n              field = 'name'; //field variable\n\n              if (!(value.length >= 3)) {\n                _context25.next = 10;\n                break;\n              }\n\n              productServ.find({\n                query: (_query = {}, _defineProperty(_query, field, {\n                  $regex: value,\n                  $options: 'i'\n                }), _defineProperty(_query, \"facility\", user.currentEmployee.facilityDetail._id), _defineProperty(_query, \"storeId\", state.StoreModule.selectedStore._id), _defineProperty(_query, \"$limit\", 10), _defineProperty(_query, \"$sort\", {\n                  createdAt: -1\n                }), _query)\n              }).then(function (res) {\n                console.log(\"product  fetched successfully\");\n                console.log(res.data);\n                setFacilities(res.data);\n                setSearchMessage(\" product  fetched successfully\");\n                setShowPanel(true);\n              }).catch(function (err) {\n                toast({\n                  message: 'Error creating ProductEntry ' + err,\n                  type: 'is-danger',\n                  dismissible: true,\n                  pauseOnHover: true\n                });\n              });\n              _context25.next = 16;\n              break;\n\n            case 10:\n              console.log(\"less than 3 \");\n              console.log(val);\n              setShowPanel(false);\n              _context25.next = 15;\n              return setFacilities([]);\n\n            case 15:\n              console.log(facilities);\n\n            case 16:\n            case \"end\":\n              return _context25.stop();\n          }\n        }\n      }, _callee25);\n    }));\n\n    return function handleSearch(_x18) {\n      return _ref26.apply(this, arguments);\n    };\n  }();\n\n  var handleAddproduct = function handleAddproduct() {\n    setProductModal(true);\n  };\n\n  var handlecloseModal = function handlecloseModal() {\n    setProductModal(false);\n    handleSearch(val);\n  };\n\n  useEffect(function () {\n    if (clear) {\n      console.log(\"success has changed\", clear);\n      setSimpa(\"\");\n    }\n\n    return function () {};\n  }, [clear]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"field\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"control has-icons-left  \",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"dropdown \".concat(showPanel ? \"is-active\" : \"\"),\n          style: {\n            width: \"100%\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"dropdown-trigger\",\n            style: {\n              width: \"100%\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(DebounceInput, {\n              className: \"input is-small  is-expanded\",\n              type: \"text\",\n              placeholder: \"Search Product\",\n              value: simpa,\n              minLength: 3,\n              debounceTimeout: 400,\n              onBlur: function onBlur(e) {\n                return handleBlur(e);\n              },\n              onChange: function onChange(e) {\n                return handleSearch(e.target.value);\n              },\n              inputRef: inputEl\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1211,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"icon is-small is-left\",\n              children: /*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fas fa-search\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1221,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1220,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1210,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"dropdown-menu expanded\",\n            style: {\n              width: \"100%\"\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"dropdown-content\",\n              children: [facilities.length > 0 ? \"\" : /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"dropdown-item\"\n                /* onClick={handleAddproduct} */\n                ,\n                children: [\" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: [\" \", val, \" is not in your inventory\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1227,\n                  columnNumber: 117\n                }, this), \" \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1227,\n                columnNumber: 52\n              }, this), facilities.map(function (facility, i) {\n                return /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"dropdown-item\",\n                  onClick: function onClick() {\n                    return handleRow(facility);\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    children: /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: facility.name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1233,\n                      columnNumber: 46\n                    }, _this2)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1233,\n                    columnNumber: 41\n                  }, _this2), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                        children: facility.quantity\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1234,\n                        columnNumber: 52\n                      }, _this2)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1234,\n                      columnNumber: 46\n                    }, _this2), /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: [facility.baseunit, \"(s) remaining\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1235,\n                      columnNumber: 41\n                    }, _this2), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"padleft\",\n                      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                        children: \"Price:\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1236,\n                        columnNumber: 67\n                      }, _this2), \" N\", facility.sellingprice]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1236,\n                      columnNumber: 41\n                    }, _this2)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1234,\n                    columnNumber: 41\n                  }, _this2)]\n                }, facility._id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1231,\n                  columnNumber: 37\n                }, _this2);\n              })]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1226,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1225,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1209,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1208,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1207,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 1206,\n    columnNumber: 9\n  }, this);\n}\n\n_s2(InventorySearch, \"t0O7bA3TZu/shxaYOPunHCyRtyY=\");\n\n_c2 = InventorySearch;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"PaymentCreate\");\n$RefreshReg$(_c2, \"InventorySearch\");","map":{"version":3,"sources":["/home/mfybaby/Documents/HealthStack2/HS-frontend/src/components/Finance/PaymentCreate.js"],"names":["React","useState","useContext","useEffect","useRef","client","DebounceInput","useForm","UserContext","ObjectContext","toast","ProductCreate","Encounter","random","require","searchfacility","PaymentCreate","success","setSuccess","message","setMessage","facility","setFacility","SubwalletTxServ","service","SubwalletServ","OrderServ","InvoiceServ","user","currentUser","setCurrentUser","type","setType","documentNo","setDocumentNo","totalamount","setTotalamount","description","setDescription","productId","setProductId","source","setSource","date","setDate","name","setName","inventoryId","setInventoryId","baseunit","setBaseunit","quantity","setQuantity","sellingprice","setSellingPrice","costprice","setCostprice","invquantity","setInvQuantity","calcamount","setCalcAmount","productItem","setProductItem","billingId","setBilllingId","changeAmount","setChangeAmount","paymentmode","setPaymentMode","paymentOptions","setPaymentOptions","billMode","setBillMode","productModal","setProductModal","obj","setObj","amountPaid","setAmountPaid","balance","setBalance","buttonState","setButtonState","partPay","setPartPay","state","setState","inputEl","calcamount1","hidestatus","medication","financeModule","selectedFinance","showDocumentation","value","handlecloseModal","handleChangeMode","handleRow","ProductEntry","newProductEntryModule","selectedMedication","show","prevstate","medicationModule","productitems","productEntry","setProductEntry","productItemI","amount","getSearchfacility","contracts","billingDetails","contract","filter","el","source_org","detail","hmo","price","company","handleUpdateTotal","prevtotal","Number","handleChangeType","e","target","handleAmount","handleClickProd","dismissible","pauseOnHover","prevProd","concat","billInfo","orderInfo","orderId","_id","orderObj","serviceInfo","createdby","paymentInfo","participantInfo","billingFacility","destination","billingFacilityName","destination_name","locationId","StoreModule","selectedStore","clientId","createdBy","id","billing_status","patch","order_status","then","resp","catch","err","console","log","handleQtty","resetform","handleMedicationDone","onSubmit","preventDefault","transactioncategory","currentEmployee","facilityDetail","storeId","handleChangeAmount","rev","newclient","handleAccept","organization","employeeData","category","toName","facilityName","fromName","firstname","lastname","LocationModule","selectedLocation","confirm","window","create","oldname","newname","proposedpayment","paidup","length","getFacilities","getTotal","forEach","find","query","$limit","$sort","createdAt","findProductEntry","data","today","Date","toLocaleString","invoiceNo","on","handleChangePart","bill","prev","item","payObj","mode","handlePartAmount","partAmount","handleUpdate","undefined","handlePayment","paymentDetails","push","allItems","amountpaid","checked","clientName","facilityId","status","bills","finance","map","i","order_category","display","amountDue","InventorySearch","clear","productServ","facilities","setFacilities","searchError","setSearchError","showPanel","setShowPanel","searchMessage","setSearchMessage","simpa","setSimpa","chosen","setChosen","count","setCount","val","setVal","handleBlur","handleSearch","field","$regex","$options","res","handleAddproduct","width"],"mappings":";;;;;;;;;;;;AAAA;AACA,OAAOA,KAAP,IAAeC,QAAf,EAAwBC,UAAxB,EAAoCC,SAApC,EAA8CC,MAA9C,QAA2D,OAA3D;AACA,OAAOC,MAAP,MAAmB,gBAAnB;AACA,SAAQC,aAAR,QAA4B,sBAA5B;AACA,SAASC,OAAT,QAAwB,iBAAxB,C,CACA;;AACA,SAAQC,WAAR,EAAoBC,aAApB,QAAwC,eAAxC;AACA,SAAQC,KAAR,QAAoB,aAApB;AACA,SAAQC,aAAR,QAA4B,YAA5B;AACA,OAAOC,SAAP,MAAsB,2BAAtB;;AACA,IAAIC,MAAM,GAAGC,OAAO,CAAC,yBAAD,CAApB,C,CACA;;;AACA,IAAMC,cAAc,GAAC,EAArB;AAEA,eAAe,SAASC,aAAT,GAAwB;AAAA;;AAAA;;AACnC;AACC;AAFkC,kBAGLf,QAAQ,CAAC,KAAD,CAHH;AAAA;AAAA,MAG3BgB,OAH2B;AAAA,MAGlBC,UAHkB;;AAAA,mBAILjB,QAAQ,CAAC,EAAD,CAJH;AAAA;AAAA,MAI3BkB,OAJ2B;AAAA,MAInBC,UAJmB,kBAKlC;;;AALkC,mBAMHnB,QAAQ,EANL;AAAA;AAAA,MAM3BoB,QAN2B;AAAA,MAMlBC,WANkB;;AAOlC,MAAMC,eAAe,GAAClB,MAAM,CAACmB,OAAP,CAAe,uBAAf,CAAtB;AACA,MAAMC,aAAa,GAACpB,MAAM,CAACmB,OAAP,CAAe,WAAf,CAApB;AACA,MAAME,SAAS,GAACrB,MAAM,CAACmB,OAAP,CAAe,OAAf,CAAhB;AACA,MAAMG,WAAW,GAACtB,MAAM,CAACmB,OAAP,CAAe,SAAf,CAAlB,CAVkC,CAWlC;;AAXkC,oBAYnBtB,UAAU,CAACM,WAAD,CAZS;AAAA,MAY3BoB,IAZ2B,eAY3BA,IAZ2B,EAYK;AACvC;;;AAbkC,mBAcG3B,QAAQ,EAdX;AAAA;AAAA,MAc3B4B,WAd2B;AAAA,MAcfC,cAde;;AAAA,mBAeX7B,QAAQ,CAAC,MAAD,CAfG;AAAA;AAAA,MAe3B8B,IAf2B;AAAA,MAetBC,OAfsB;;AAAA,oBAgBC/B,QAAQ,CAAC,EAAD,CAhBT;AAAA;AAAA,MAgB3BgC,UAhB2B;AAAA,MAgBhBC,aAhBgB;;AAAA,oBAiBGjC,QAAQ,CAAC,CAAD,CAjBX;AAAA;AAAA,MAiB3BkC,WAjB2B;AAAA,MAiBfC,cAjBe;;AAAA,oBAkBGnC,QAAQ,CAAC,EAAD,CAlBX;AAAA;AAAA,MAkB3BoC,WAlB2B;AAAA,MAkBfC,cAlBe;;AAAA,oBAmBDrC,QAAQ,CAAC,EAAD,CAnBP;AAAA;AAAA,MAmB3BsC,SAnB2B;AAAA,MAmBjBC,YAnBiB;;AAAA,oBAoBPvC,QAAQ,CAAC,EAAD,CApBD;AAAA;AAAA,MAoB3BwC,MApB2B;AAAA,MAoBpBC,SApBoB;;AAAA,oBAqBXzC,QAAQ,CAAC,EAAD,CArBG;AAAA;AAAA,MAqB3B0C,IArB2B;AAAA,MAqBtBC,OArBsB;;AAAA,oBAsBX3C,QAAQ,CAAC,EAAD,CAtBG;AAAA;AAAA,MAsB3B4C,IAtB2B;AAAA,MAsBtBC,OAtBsB;;AAAA,oBAuBG7C,QAAQ,CAAC,EAAD,CAvBX;AAAA;AAAA,MAuB3B8C,WAvB2B;AAAA,MAuBfC,cAvBe;;AAAA,oBAwBH/C,QAAQ,CAAC,EAAD,CAxBL;AAAA;AAAA,MAwB3BgD,QAxB2B;AAAA,MAwBlBC,WAxBkB;;AAAA,oBAyBHjD,QAAQ,CAAC,EAAD,CAzBL;AAAA;AAAA,MAyB3BkD,QAzB2B;AAAA,MAyBlBC,WAzBkB;;AAAA,oBA0BKnD,QAAQ,CAAC,EAAD,CA1Bb;AAAA;AAAA,MA0B3BoD,YA1B2B;AAAA,MA0BdC,eA1Bc;;AAAA,oBA2BDrD,QAAQ,CAAC,CAAD,CA3BP;AAAA;AAAA,MA2B3BsD,SA3B2B;AAAA,MA2BjBC,YA3BiB;;AAAA,oBA4BGvD,QAAQ,CAAC,EAAD,CA5BX;AAAA;AAAA,MA4B3BwD,WA5B2B;AAAA,MA4BfC,cA5Be;;AAAA,oBA6BCzD,QAAQ,CAAC,CAAD,CA7BT;AAAA;AAAA,MA6B3B0D,UA7B2B;AAAA,MA6BhBC,aA7BgB;;AAAA,oBA8BG3D,QAAQ,CAAC,EAAD,CA9BX;AAAA;AAAA,MA8B3B4D,WA9B2B;AAAA,MA8BfC,cA9Be;;AAAA,oBA+BD7D,QAAQ,CAAC,EAAD,CA/BP;AAAA;AAAA,MA+B1B8D,SA/B0B;AAAA,MA+BhBC,aA/BgB;;AAAA,oBAgCO/D,QAAQ,CAAC,IAAD,CAhCf;AAAA;AAAA,MAgC1BgE,YAhC0B;AAAA,MAgCZC,eAhCY;;AAAA,oBAiCKjE,QAAQ,CAAC,MAAD,CAjCb;AAAA;AAAA,MAiC1BkE,WAjC0B;AAAA,MAiCbC,cAjCa;;AAAA,oBAkCSnE,QAAQ,CAAC,EAAD,CAlCjB;AAAA;AAAA,MAkC1BoE,cAlC0B;AAAA,MAkCVC,iBAlCU;;AAAA,oBAmCHrE,QAAQ,CAAC,EAAD,CAnCL;AAAA;AAAA,MAmC1BsE,QAnC0B;AAAA,MAmChBC,WAnCgB;;AAAA,oBAoCKvE,QAAQ,CAAC,KAAD,CApCb;AAAA;AAAA,MAoC1BwE,YApC0B;AAAA,MAoCZC,eApCY;;AAAA,oBAqCbzE,QAAQ,CAAC,EAAD,CArCK;AAAA;AAAA,MAqC1B0E,GArC0B;AAAA,MAqCrBC,MArCqB;;AAAA,oBAsCC3E,QAAQ,CAAC,CAAD,CAtCT;AAAA;AAAA,MAsC1B4E,UAtC0B;AAAA,MAsCdC,aAtCc;;AAAA,oBAuCL7E,QAAQ,CAAC,CAAD,CAvCH;AAAA;AAAA,MAuC1B8E,OAvC0B;AAAA,MAuCjBC,UAvCiB;;AAAA,oBAwCG/E,QAAQ,CAAC,KAAD,CAxCX;AAAA;AAAA,MAwC1BgF,WAxC0B;AAAA,MAwCbC,cAxCa;;AAAA,oBAyCNjF,QAAQ,CAAC,EAAD,CAzCF;AAAA;AAAA,MAyC1BkF,OAzC0B;AAAA,MAyClBC,UAzCkB;;AAAA,qBA2CXlF,UAAU,CAACO,aAAD,CA3CC;AAAA,MA2C3B4E,KA3C2B,gBA2C3BA,KA3C2B;AAAA,MA2CrBC,QA3CqB,gBA2CrBA,QA3CqB;;AA4ClC,MAAMC,OAAO,GAAGnF,MAAM,CAAC,CAAD,CAAtB;AACA,MAAIoF,WAAJ;AACA,MAAIC,UAAJ;AAIH,MAAIC,UAAU,GAAEL,KAAK,CAACM,aAAN,CAAoBC,eAApC,CAlDqC,CAmDrC;;AAEA,MAAMC,iBAAiB;AAAA,wEAAG,iBAAOC,KAAP;AAAA;AAAA;AAAA;AAAA;AACxBpB,cAAAA,eAAe,CAAC,IAAD,CAAf;;AADwB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAjBmB,iBAAiB;AAAA;AAAA;AAAA,KAAvB;;AAGA,MAAME,gBAAgB,GAAE,SAAlBA,gBAAkB,GAAI;AAC1BrB,IAAAA,eAAe,CAAC,KAAD,CAAf,CAD0B,CAE3B;AACE,GAHH;;AAKA,MAAMsB,gBAAgB;AAAA,yEAAE,kBAAMF,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAEb1B,cAAc,CAAC0B,KAAD,CAFD;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAF;;AAAA,oBAAhBE,gBAAgB;AAAA;AAAA;AAAA,KAAtB;;AAoBA,MAAMC,SAAS;AAAA,yEAAE,kBAAMC,YAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AACf;AAEA;AAEA;AAESC,cAAAA,qBAPM,GAOgB;AAC3BC,gBAAAA,kBAAkB,EAACF,YADQ;AAE3BG,gBAAAA,IAAI,EAAE;AAFqB,eAPhB;AAAA;AAAA,qBAWXf,QAAQ,CAAC,UAACgB,SAAD;AAAA,uDAAkBA,SAAlB;AAA6BC,kBAAAA,gBAAgB,EAACJ;AAA9C;AAAA,eAAD,CAXG;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAF;;AAAA,oBAATF,SAAS;AAAA;AAAA;AAAA,KAAf;;AAjFqC,oBAkGAhG,QAAQ,CAAC;AACvCuG,IAAAA,YAAY,EAAC,EAD0B;AAEvC7D,IAAAA,IAAI,EAAJA,IAFuC;AAGvCV,IAAAA,UAAU,EAAVA,UAHuC;AAIvCF,IAAAA,IAAI,EAAJA,IAJuC;AAKvCI,IAAAA,WAAW,EAAXA,WALuC;AAMvCM,IAAAA,MAAM,EAANA;AANuC,GAAD,CAlGR;AAAA;AAAA,MAkG9BgE,YAlG8B;AAAA,MAkGjBC,eAlGiB;;AA4GrC,MAAMC,YAAY,GAAC;AACZpE,IAAAA,SAAS,EAATA,SADY;AAEZM,IAAAA,IAAI,EAAJA,IAFY;AAGZM,IAAAA,QAAQ,EAARA,QAHY;AAIZE,IAAAA,YAAY,EAAZA,YAJY;AAKZuD,IAAAA,MAAM,EAACjD,UALK;AAKO;AACnBV,IAAAA,QAAQ,EAARA,QANY;AAOZM,IAAAA,SAAS,EAATA,SAPY;AAQZQ,IAAAA,SAAS,EAATA;AARY,GAAnB,CA5GqC,CAuHlC;AACA;;AACH,MAAM8C,iBAAiB;AAAA,yEAAC,kBAAOlC,GAAP;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACbC,MAAM,CAACD,GAAD,CADO;;AAAA;AAAA,kBAEbA,GAFa;AAAA;AAAA;AAAA;;AAGd;AACAnC,cAAAA,YAAY,CAAC,EAAD,CAAZ;AACAM,cAAAA,OAAO,CAAC,EAAD,CAAP;AACAI,cAAAA,WAAW,CAAC,EAAD,CAAX;AACAF,cAAAA,cAAc,CAAC,EAAD,CAAd;AACAM,cAAAA,eAAe,CAAC,EAAD,CAAf;AACAI,cAAAA,cAAc,CAAC,EAAD,CAAd;AACApB,cAAAA,cAAc,CAAC,EAAD,CAAd;AACAkB,cAAAA,YAAY,CAAC,EAAD,CAAZ,CAXc,CAYf;;AAZe;;AAAA;AAgBjBhB,cAAAA,YAAY,CAACmC,GAAG,CAACpC,SAAL,CAAZ;AACAO,cAAAA,OAAO,CAAC6B,GAAG,CAAC9B,IAAL,CAAP;AACAK,cAAAA,WAAW,CAACyB,GAAG,CAAC1B,QAAL,CAAX;AACAD,cAAAA,cAAc,CAAC2B,GAAG,CAAC5B,WAAL,CAAd;AACAO,cAAAA,eAAe,CAACqB,GAAG,CAACtB,YAAL,CAAf,CApBiB,CAoBiB;;AAClCK,cAAAA,cAAc,CAACiB,GAAG,CAACxB,QAAL,CAAd;AACAK,cAAAA,YAAY,CAACmB,GAAG,CAACpB,SAAL,CAAZ;AACAS,cAAAA,aAAa,CAACW,GAAG,CAACZ,SAAL,CAAb;AAEM+C,cAAAA,SAzBW,GAyBDnC,GAAG,CAACoC,cAAJ,CAAmBD,SAzBlB,EA0BjB;;AACD,kBAAIvC,QAAQ,CAACxC,IAAT,KAAgB,WAApB,EAAgC;AAAE;AAC7BiF,gBAAAA,QAD2B,GAClBF,SAAS,CAACG,MAAV,CAAiB,UAAAC,EAAE;AAAA,yBAAEA,EAAE,CAACC,UAAH,KAAgB5C,QAAQ,CAAC6C,MAAT,CAAgBC,GAAlC;AAAA,iBAAnB,CADkB,EAEjC;;AACE/D,gBAAAA,eAAe,CAAC0D,QAAQ,CAAC,CAAD,CAAR,CAAYM,KAAb,CAAf,CAH+B,CAIjC;AAEE;;AACD,kBAAI/C,QAAQ,CAACxC,IAAT,KAAgB,eAApB,EAAoC;AAAE;AAC9BiF,gBAAAA,SAD4B,GACnBF,SAAS,CAACG,MAAV,CAAiB,UAAAC,EAAE;AAAA,yBAAEA,EAAE,CAACC,UAAH,KAAgB5C,QAAQ,CAAC6C,MAAT,CAAgBG,OAAlC;AAAA,iBAAnB,CADmB,EAEnC;;AACGjE,gBAAAA,eAAe,CAAC0D,SAAQ,CAAC,CAAD,CAAR,CAAYM,KAAb,CAAf,CAHgC,CAInC;AAEG;AAEJ;AACR;AACA;AACA;;;AA7C0B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAD;;AAAA,oBAAjBT,iBAAiB;AAAA;AAAA;AAAA,KAAvB;;AAgDG1G,EAAAA,SAAS,CAAC,YAAM;AACd;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACM,GAbQ,EAaN,CAACwE,GAAD,CAbM,CAAT;AAeAxE,EAAAA,SAAS,CAAC,YAAM;AACZ2B,IAAAA,cAAc,CAACF,IAAD,CAAd,CADY,CAEZ;;AACA,WAAO,YAAM,CAEZ,CAFD;AAGH,GANQ,EAMN,CAACA,IAAD,CANM,CAAT;;AAQA,MAAM4F,iBAAiB;AAAA,yEAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACfpF,cAAc,CAAC,UAAAqF,SAAS;AAAA,uBAAEC,MAAM,CAACD,SAAD,CAAN,GAAoBC,MAAM,CAAC/D,UAAD,CAA5B;AAAA,eAAV,CADC;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAD;;AAAA,oBAAjB6D,iBAAiB;AAAA;AAAA;AAAA,KAAvB;;AAIA,MAAMG,gBAAgB;AAAA,yEAAC,kBAAOC,CAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAEb5F,OAAO,CAAC4F,CAAC,CAACC,MAAF,CAAS/B,KAAV,CAFM;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAD;;AAAA,oBAAhB6B,gBAAgB;AAAA;AAAA;AAAA,KAAtB;;AAKA,MAAMG,YAAY;AAAA,yEAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACVxF,cAAc,CAAC,EAAD,CADJ;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAF;;AAAA,oBAAZwF,YAAY;AAAA;AAAA;AAAA,KAAlB;;AAKA,MAAMC,eAAe;AAAA,yEAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAId5E,QAAQ,KAAG,CAAX,IAAcA,QAAQ,KAAG,EAAzB,IAA8BZ,SAAS,KAAG,EAJ5B;AAAA;AAAA;AAAA;;AAKf7B,cAAAA,KAAK,CAAC;AACFS,gBAAAA,OAAO,EAAE,sDADP;AAEFY,gBAAAA,IAAI,EAAE,WAFJ;AAGFiG,gBAAAA,WAAW,EAAE,IAHX;AAIFC,gBAAAA,YAAY,EAAE;AAJZ,eAAD,CAAL;AALe;;AAAA;AAAA;AAAA,qBAcZ/G,UAAU,CAAC,KAAD,CAdE;;AAAA;AAAA;AAAA,qBAeZ4C,cAAc,CAChB,UAAAoE,QAAQ;AAAA,uBAAEA,QAAQ,CAACC,MAAT,CAAgBxB,YAAhB,CAAF;AAAA,eADQ,CAfF;;AAAA;AAkBnBa,cAAAA,iBAAiB,GAlBE,CAmBf;;AACMY,cAAAA,QApBS,GAoBA;AACXC,gBAAAA,SAAS,EAAC;AACNC,kBAAAA,OAAO,EAAC5C,UAAU,CAAC6C,GADb;AAENC,kBAAAA,QAAQ,EAAC9C;AAFH,iBADC;AAKT+C,gBAAAA,WAAW,EAAC;AACVnB,kBAAAA,KAAK,EAAEX,YAAY,CAACtD,YADV;AAEVF,kBAAAA,QAAQ,EAAEwD,YAAY,CAACxD,QAFb;AAGVZ,kBAAAA,SAAS,EAAEoE,YAAY,CAACpE,SAHd;AAIVM,kBAAAA,IAAI,EAAE8D,YAAY,CAAC9D,IAJT;AAKVI,kBAAAA,QAAQ,EAAE0D,YAAY,CAAC1D,QALb;AAMV2D,kBAAAA,MAAM,EAACD,YAAY,CAACC,MANV;AAOV7C,kBAAAA,SAAS,EAAC4C,YAAY,CAAC5C,SAPb;AAQV2E,kBAAAA,SAAS,EAAC9G,IAAI,CAAC2G;AARL,iBALH;AAeTI,gBAAAA,WAAW,EAAC,EAfH;AAgBTC,gBAAAA,eAAe,EAAC;AACdC,kBAAAA,eAAe,EAACnD,UAAU,CAACoD,WADb;AAEdC,kBAAAA,mBAAmB,EAACrD,UAAU,CAACsD,gBAFjB;AAGdC,kBAAAA,UAAU,EAAC5D,KAAK,CAAC6D,WAAN,CAAkBC,aAAlB,CAAgCZ,GAH7B;AAGkC;AAChDa,kBAAAA,QAAQ,EAAC1D,UAAU,CAAC0D,QAJN;AAKd/I,kBAAAA,MAAM,EAACqF,UAAU,CAACrF,MALJ;AAMd8D,kBAAAA,WAAW,EAACI;AANE,iBAhBP;AAwBT8E,gBAAAA,SAAS,EAACzH,IAAI,CAAC0H,EAxBN;AAyBTC,gBAAAA,cAAc,EAAC;AAzBN,eApBA,EAgDnB;;AAEA7H,cAAAA,SAAS,CAAC8H,KAAV,CAAgB9D,UAAU,CAAC6C,GAA3B,EAA+B;AAC3BkB,gBAAAA,YAAY,EAAC,QADc;AAE3BrB,gBAAAA,QAAQ,EAARA;AAF2B,eAA/B,EAGGsB,IAHH,CAGQ,UAACC,IAAD,EAAQ;AACb;AACA;AACE1D,gBAAAA,SAAS,CAAC0D,IAAD,CAAT,CAHW,CAIZ;AAEH,eATD,EAUCC,KAVD,CAUO,UAACC,GAAD,EAAO;AACVC,gBAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACH,eAZD,EAlDmB,CAgEnB;AACA;AACA;;AACC/G,cAAAA,OAAO,CAAC,EAAD,CAAP;AACAI,cAAAA,WAAW,CAAC,EAAD,CAAX;AACAE,cAAAA,WAAW,CAAC,EAAD,CAAX;AACAJ,cAAAA,cAAc,CAAC,EAAD,CAAd;AACAM,cAAAA,eAAe,CAAC,EAAD,CAAf;AACAI,cAAAA,cAAc,CAAC,EAAD,CAAd;AACIoE,cAAAA,YAAY,GAzEE,CA0EnB;;AA1EmB;AAAA,qBA2Eb5G,UAAU,CAAC,IAAD,CA3EG;;AAAA;AA4EnB;AACR;AACA;AACQgD,cAAAA,eAAe,CAAC,IAAD,CAAf;;AA/EmB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAD;;AAAA,oBAAf6D,eAAe;AAAA;AAAA;AAAA,KAArB;;AAmFA,MAAMiC,UAAU;AAAA,yEAAC,kBAAMpC,CAAN;AAAA;AAAA;AAAA;AAAA;AAAA,oBACTnE,WAAW,GAACmE,CAAC,CAACC,MAAF,CAAS/B,KADZ;AAAA;AAAA;AAAA;;AAETpF,cAAAA,KAAK,CAAC;AACFS,gBAAAA,OAAO,EAAE,yDADP;AAEFY,gBAAAA,IAAI,EAAE,WAFJ;AAGFiG,gBAAAA,WAAW,EAAE,IAHX;AAIFC,gBAAAA,YAAY,EAAE;AAJZ,eAAD,CAAL;AAFS;;AAAA;AAUb7E,cAAAA,WAAW,CAACwE,CAAC,CAACC,MAAF,CAAS/B,KAAV,CAAX;AACAN,cAAAA,WAAW,GAACrC,QAAQ,GAACE,YAArB;AAXa;AAAA,qBAYPO,aAAa,CAAC4B,WAAD,CAZN;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAD;;AAAA,oBAAVwE,UAAU;AAAA;AAAA;AAAA,KAAhB;;AAgBA7J,EAAAA,SAAS,CAAE,YAAM;AACZuG,IAAAA,eAAe,CAAC;AAEb/D,MAAAA,IAAI,EAAJA,IAFa;AAGbV,MAAAA,UAAU,EAAVA,UAHa;AAIbF,MAAAA,IAAI,EAAJA,IAJa;AAKbI,MAAAA,WAAW,EAAXA,WALa;AAMbM,MAAAA,MAAM,EAANA;AANa,KAAD,CAAf;AASFmB,IAAAA,aAAa,CAACT,QAAQ,GAACE,YAAV,CAAb;AACC,WAAO,YAAM,CAEZ,CAFD;AAGH,GAdQ,EAcP,CAACV,IAAD,CAdO,CAAT;;AAgBA,MAAMsH,SAAS,GAAC,SAAVA,SAAU,GAAI;AACnBjI,IAAAA,OAAO,CAAC,OAAD,CAAP;AACDE,IAAAA,aAAa,CAAC,EAAD,CAAb;AACAE,IAAAA,cAAc,CAAC,EAAD,CAAd;AACAI,IAAAA,YAAY,CAAC,EAAD,CAAZ;AACAE,IAAAA,SAAS,CAAC,EAAD,CAAT;AACAE,IAAAA,OAAO,CAAC,EAAD,CAAP;AACAE,IAAAA,OAAO,CAAC,EAAD,CAAP;AACAI,IAAAA,WAAW,CAAC,EAAD,CAAX;AACAM,IAAAA,YAAY,CAAC,EAAD,CAAZ;AACAM,IAAAA,cAAc,CAAC,EAAD,CAAd;AACC,GAXD;;AAcA,MAAMoG,oBAAoB;AAAA,0EAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAW;AACpC;AAEA;AAED;AAEU/D,cAAAA,qBAPgB,GAOM;AAC3BC,gBAAAA,kBAAkB,EAAC,EADQ;AAE3BC,gBAAAA,IAAI,EAAE;AAFqB,eAPN;AAAA;AAAA,qBAYrBf,QAAQ,CAAC,UAACgB,SAAD;AAAA,uDAAkBA,SAAlB;AAA6BC,kBAAAA,gBAAgB,EAACJ;AAA9C;AAAA,eAAD,CAZa;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAF;;AAAA,oBAApB+D,oBAAoB;AAAA;AAAA;AAAA,KAA1B;;AAkBA,MAAMC,QAAQ;AAAA,0EAAG,mBAAMvC,CAAN;AAAA;AAAA;AAAA;AAAA;AACbA,cAAAA,CAAC,CAACwC,cAAF;AACAhJ,cAAAA,UAAU,CAAC,EAAD,CAAV,CAFa,CAGb;;AACAF,cAAAA,UAAU,CAAC,KAAD,CAAV;AAJa;AAAA,qBAKPwF,eAAe,CAAC;AAElB/D,gBAAAA,IAAI,EAAJA,IAFkB;AAGlBV,gBAAAA,UAAU,EAAVA,UAHkB;AAIlBF,gBAAAA,IAAI,EAAJA,IAJkB;AAKlBI,gBAAAA,WAAW,EAAXA,WALkB;AAMlBM,gBAAAA,MAAM,EAANA;AANkB,eAAD,CALR;;AAAA;AAabgE,cAAAA,YAAY,CAACD,YAAb,GAA0B3C,WAA1B;AACA4C,cAAAA,YAAY,CAACiC,SAAb,GAAuB9G,IAAI,CAAC2G,GAA5B;AACA9B,cAAAA,YAAY,CAAC4D,mBAAb,GAAiC,OAAjC,CAfa,CAiBZ;;AAjBY,mBAkBPzI,IAAI,CAAC0I,eAlBE;AAAA;AAAA;AAAA;;AAmBZ7D,cAAAA,YAAY,CAACpF,QAAb,GAAsBO,IAAI,CAAC0I,eAAL,CAAqBC,cAArB,CAAoChC,GAA1D,CAnBY,CAmBmD;;AAnBnD;AAAA;;AAAA;AAqBT7H,cAAAA,KAAK,CAAC;AACFS,gBAAAA,OAAO,EAAE,oDADP;AAEFY,gBAAAA,IAAI,EAAE,WAFJ;AAGFiG,gBAAAA,WAAW,EAAE,IAHX;AAIFC,gBAAAA,YAAY,EAAE;AAJZ,eAAD,CAAL;AArBS;;AAAA;AAAA,mBA8BP5C,KAAK,CAAC6D,WAAN,CAAkBC,aAAlB,CAAgCZ,GA9BzB;AAAA;AAAA;AAAA;;AA+BT9B,cAAAA,YAAY,CAAC+D,OAAb,GAAqBnF,KAAK,CAAC6D,WAAN,CAAkBC,aAAlB,CAAgCZ,GAArD;AA/BS;AAAA;;AAAA;AAiCT7H,cAAAA,KAAK,CAAC;AACFS,gBAAAA,OAAO,EAAE,sDADP;AAEFY,gBAAAA,IAAI,EAAE,WAFJ;AAGFiG,gBAAAA,WAAW,EAAE,IAHX;AAIFC,gBAAAA,YAAY,EAAE;AAJZ,eAAD,CAAL;AAjCS;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAARkC,QAAQ;AAAA;AAAA;AAAA,KAAd;;AA2CD,MAAMM,kBAAkB,GAAC,SAAnBA,kBAAmB,GAAI;AACzBvG,IAAAA,eAAe,CAAC,UAACwG,GAAD;AAAA,aAAQ,CAACA,GAAT;AAAA,KAAD,CAAf;AAEH,GAHD;;AAKA,MAAMC,SAAS;AAAA,0EAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACL7G,cAAc,CAAC,EAAD,CADT;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAD;;AAAA,oBAAT6G,SAAS;AAAA;AAAA;AAAA,KAAf;;AAGA,MAAMC,YAAY;AAAA,0EAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACT1F,cAAc,CAAC,IAAD,CADL;;AAAA;AAAA,oBAEXf,WAAW,KAAG,EAAd,IAAkBU,UAAU,KAAG,CAA/B,IAAmCA,UAAU,KAAG,EAFrC;AAAA;AAAA;AAAA;;AAGXnE,cAAAA,KAAK,CAAC;AACFS,gBAAAA,OAAO,EAAE,4CADP;AAEFY,gBAAAA,IAAI,EAAE,WAFJ;AAGFiG,gBAAAA,WAAW,EAAE,IAHX;AAIFC,gBAAAA,YAAY,EAAE;AAJZ,eAAD,CAAL;AAHW;AAAA,qBASH/C,cAAc,CAAC,KAAD,CATX;;AAAA;AAAA;;AAAA;AAYXP,cAAAA,GAZW,GAYP;AACL;AACC;AACA;AACAtE,gBAAAA,MAAM,EAACqF,UAAU,CAACkD,eAAX,CAA2BvI,MAA3B,CAAkCkI,GAJrC;AAKJsC,gBAAAA,YAAY,EAACjJ,IAAI,CAACkJ,YAAL,CAAkB,CAAlB,EAAqBP,cAArB,CAAoChC,GAL7C;AAMJwC,gBAAAA,QAAQ,EAAC,QANL;AAMe;AACnBnE,gBAAAA,MAAM,EAAC/B,UAPH;AAQJxC,gBAAAA,WAAW,EAAEA,WART;AAUJ2I,gBAAAA,MAAM,EAACpJ,IAAI,CAACkJ,YAAL,CAAkB,CAAlB,EAAqBP,cAArB,CAAoCU,YAVvC;AAWJC,gBAAAA,QAAQ,EAACxF,UAAU,CAACkD,eAAX,CAA2BvI,MAA3B,CAAkC8K,SAAlC,GAA8C,GAA9C,GAAmDzF,UAAU,CAACkD,eAAX,CAA2BvI,MAA3B,CAAkC+K,QAX1F;AAYJ1C,gBAAAA,SAAS,EAAE9G,IAAI,CAAC2G,GAZZ;AAcL;AACA;AACCpE,gBAAAA,WAAW,EAACA,WAhBR;AAkBJ9C,gBAAAA,QAAQ,EAAEO,IAAI,CAACkJ,YAAL,CAAkB,CAAlB,EAAqBP,cAArB,CAAoChC,GAlB1C;AAmBJU,gBAAAA,UAAU,EAAE5D,KAAK,CAACgG,cAAN,CAAqBC,gBAArB,CAAsC/C,GAnB9C;AAoBJxG,gBAAAA,IAAI,EAAE;AApBF,eAZO;AAmCXwJ,cAAAA,OAnCW,GAmCDC,MAAM,CAACD,OAAP,6CAAoD5G,GAAG,CAACiC,MAAxD,mBAAuEjC,GAAG,CAACuG,QAA3E,EAnCC;;AAAA,mBAoCXK,OApCW;AAAA;AAAA;AAAA;;AAAA;AAAA,qBAuCVhK,eAAe,CAACkK,MAAhB,CAAuB9G,GAAvB,EACL+E,IADK,CACA,UAACC,IAAD,EAAQ;AACX;AAEFjJ,gBAAAA,KAAK,CAAC;AACFS,kBAAAA,OAAO,EAAE,8BADP;AAEFY,kBAAAA,IAAI,EAAE,YAFJ;AAGFiG,kBAAAA,WAAW,EAAE,IAHX;AAIFC,kBAAAA,YAAY,EAAE;AAJZ,iBAAD,CAAL;AAMEnD,gBAAAA,aAAa,CAAC,CAAD,CAAb;AACAxC,gBAAAA,cAAc,CAAC,EAAD,CAAd;AACF,eAZK,EAaLsH,KAbK,CAaC,UAACC,GAAD,EAAO;AACbnJ,gBAAAA,KAAK,CAAC;AACFS,kBAAAA,OAAO,EAAE,6BAA6B0I,GADpC;AAEF9H,kBAAAA,IAAI,EAAE,WAFJ;AAGFiG,kBAAAA,WAAW,EAAE,IAHX;AAIFC,kBAAAA,YAAY,EAAE;AAJZ,iBAAD,CAAL;AAOA,eArBK,CAvCU;;AAAA;AAAA;AAAA,qBA8DV/C,cAAc,CAAC,KAAD,CA9DJ;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAD;;AAAA,oBAAZ0F,YAAY;AAAA;AAAA;AAAA,KAAlB;;AAiEAzK,EAAAA,SAAS,CAAC,YAAM;AACZ,QAAMuL,OAAO,GAAChG,UAAU,CAACkD,eAAX,CAA2BvI,MAA3B,CAAkC8K,SAAlC,GAA8C,GAA9C,GAAmDzF,UAAU,CAACkD,eAAX,CAA2BvI,MAA3B,CAAkC+K,QAAnG,CADY,CAEb;;AACC1I,IAAAA,SAAS,CAACgD,UAAU,CAACkD,eAAX,CAA2BvI,MAA3B,CAAkC8K,SAAlC,GAA8C,GAA9C,GAAmDzF,UAAU,CAACkD,eAAX,CAA2BvI,MAA3B,CAAkC+K,QAAtF,CAAT;AAEA,QAAMO,OAAO,GAAClJ,MAAd,CALY,CAMb;;AACC,QAAIiJ,OAAO,KAAGC,OAAd,EAAsB;AAClB;AAEJ7H,MAAAA,cAAc,CAAC,EAAD,CAAd;AACA1B,MAAAA,cAAc,CAAC,CAAD,CAAd;AAEC,KAbW,CAcZ;;;AACA,QAAIiD,KAAK,CAACM,aAAN,CAAoBN,KAAxB,EAA8B;AAC1BK,MAAAA,UAAU,CAACW,IAAX,GAAgB,MAAhB;AACAX,MAAAA,UAAU,CAACkG,eAAX,GAA2B;AACvB7G,QAAAA,OAAO,EAAC,CADe;AAEvB8G,QAAAA,MAAM,EAACnG,UAAU,CAACiD,WAAX,CAAuBkD,MAAvB,GAAgCnG,UAAU,CAACiD,WAAX,CAAuB5D,OAFvC;AAGvB6B,QAAAA,MAAM,EAAClB,UAAU,CAACiD,WAAX,CAAuB5D;AAHP,OAA3B,CAF0B,CAO1B;;AAEHjB,MAAAA,cAAc,CACX,UAAAoE,QAAQ;AAAA,eAAEA,QAAQ,CAACC,MAAT,CAAgBzC,UAAhB,CAAF;AAAA,OADG,CAAd;AAGA,KAZD,MAYK;AACD,UAAG7B,WAAW,CAACiI,MAAZ,GAAmB,CAAtB,EAAwB;AACpBhI,QAAAA,cAAc,CACV,UAAAoE,QAAQ;AAAA,iBAAEA,QAAQ,CAACjB,MAAT,CAAgB,UAAAC,EAAE;AAAA,mBAAEA,EAAE,CAACqB,GAAH,KAAS7C,UAAU,CAAC6C,GAAtB;AAAA,WAAlB,CAAF;AAAA,SADE,CAAd;AAGH;AACJ,KAjCW,CAmCb;AACC;AACA;;;AACAwD,IAAAA,aAAa;AAEb,WAAO,YAAM,CAEZ,CAFD;AAGH,GA3CQ,EA2CN,CAAC1G,KAAK,CAACM,aAAP,CA3CM,CAAT;;AA6CA,MAAMqG,QAAQ;AAAA,0EAAE;AAAA;AAAA;AAAA;AAAA;AACZ5J,cAAAA,cAAc,CAAC,CAAD,CAAd;AACAyB,cAAAA,WAAW,CAACoI,OAAZ,CAAoB,UAAA/E,EAAE,EAAE;AACpB,oBAAIA,EAAE,CAACb,IAAH,KAAU,MAAd,EAAqB;AACjB,sBAAIa,EAAE,CAACqC,cAAH,KAAoB,QAAxB,EAAiC;AAC7BnH,oBAAAA,cAAc,CAAC,UAAAqF,SAAS;AAAA,6BAAEC,MAAM,CAACD,SAAD,CAAN,GAAoBC,MAAM,CAACR,EAAE,CAACuB,WAAH,CAAe7B,MAAhB,CAA5B;AAAA,qBAAV,CAAd;AACH,mBAFD,MAEK;AACDxE,oBAAAA,cAAc,CAAC,UAAAqF,SAAS;AAAA,6BAAEC,MAAM,CAACD,SAAD,CAAN,GAAoBC,MAAM,CAACR,EAAE,CAACyB,WAAH,CAAe5D,OAAhB,CAA5B;AAAA,qBAAV,CAAd;AACH;AAEJ;;AACD,oBAAImC,EAAE,CAACb,IAAH,KAAU,MAAd,EAAqB;AACjBjE,kBAAAA,cAAc,CAAC,UAAAqF,SAAS;AAAA,2BAAEC,MAAM,CAACD,SAAD,CAAN,GAAoBC,MAAM,CAACR,EAAE,CAAC/B,OAAJ,CAA5B;AAAA,mBAAV,CAAd;AACH,iBAXmB,CAapB;;AACH,eAdD;;AAFY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAF;;AAAA,oBAAR6G,QAAQ;AAAA;AAAA;AAAA,KAAd;;AAmBA7L,EAAAA,SAAS,CAAC,YAAM;AACZ2J,IAAAA,OAAO,CAACC,GAAR,CAAYlG,WAAZ;AACDmI,IAAAA,QAAQ;AACP,WAAO,YAAM,CAEZ,CAFD;AAGH,GANQ,EAMN,CAACnI,WAAD,CANM,CAAT;;AAQA,MAAMkI,aAAa;AAAA,0EAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAGatK,aAAa,CAACyK,IAAd,CAC9B;AAACC,gBAAAA,KAAK,EAAE;AAEJ9L,kBAAAA,MAAM,EAACqF,UAAU,CAACkD,eAAX,CAA2BvI,MAA3B,CAAkCkI,GAFrC;AAGJsC,kBAAAA,YAAY,EAACjJ,IAAI,CAACkJ,YAAL,CAAkB,CAAlB,EAAqBP,cAArB,CAAoChC,GAH7C;AAIJ;AACA;AACA6D,kBAAAA,MAAM,EAAC,GANH;AAOJC,kBAAAA,KAAK,EAAE;AACHC,oBAAAA,SAAS,EAAE,CAAC;AADT;AAPH;AAAR,eAD8B,CAHb;;AAAA;AAGXC,cAAAA,gBAHW;AAeZzC,cAAAA,OAAO,CAACC,GAAR,CAAYwC,gBAAZ,EAfY,CAiBpB;;AAjBoB,oBAkBbA,gBAAgB,CAACC,IAAjB,CAAsBV,MAAtB,GAA6B,CAlBhB;AAAA;AAAA;AAAA;;AAAA;AAAA,qBAmBP9G,UAAU,CAACuH,gBAAgB,CAACC,IAAjB,CAAsB,CAAtB,EAAyB5F,MAA1B,CAnBH;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA,qBAqBP5B,UAAU,CAAC,CAAD,CArBH;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAF;;AAAA,oBAAb+G,aAAa;AAAA;AAAA;AAAA,KAAnB;;AA8BC5L,EAAAA,SAAS,CAAC,YAAM;AACd;AACE,QAAMsM,KAAK,GAAC,IAAIC,IAAJ,GAAWC,cAAX,EAAZ,CAFY,CAGZ;;AACA/J,IAAAA,OAAO,CAAC6J,KAAD,CAAP;AACA,QAAMG,SAAS,GAAC/L,MAAM,CAAC,CAAD,EAAG,cAAH,CAAtB;AACAqB,IAAAA,aAAa,CAAC0K,SAAD,CAAb;AAEGb,IAAAA,aAAa;AACbtK,IAAAA,aAAa,CAACoL,EAAd,CAAiB,SAAjB,EAA4B,UAAClI,GAAD;AAAA,aAAOoH,aAAa,EAApB;AAAA,KAA5B;AACAtK,IAAAA,aAAa,CAACoL,EAAd,CAAiB,SAAjB,EAA4B,UAAClI,GAAD;AAAA,aAAOoH,aAAa,EAApB;AAAA,KAA5B;AACAtK,IAAAA,aAAa,CAACoL,EAAd,CAAiB,SAAjB,EAA4B,UAAClI,GAAD;AAAA,aAAOoH,aAAa,EAApB;AAAA,KAA5B;AACAtK,IAAAA,aAAa,CAACoL,EAAd,CAAiB,SAAjB,EAA4B,UAAClI,GAAD;AAAA,aAAOoH,aAAa,EAApB;AAAA,KAA5B;AAEH,iFAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AACK5F,cAAAA,qBADL,GAC2B;AAC3BP,gBAAAA,eAAe,EAAC,EADW;AAE3BS,gBAAAA,IAAI,EAAE;AAFqB,eAD3B;AAAA;AAAA,qBAKCf,QAAQ,CAAC,UAACgB,SAAD;AAAA,uDAAkBA,SAAlB;AAA6BX,kBAAAA,aAAa,EAACQ;AAA3C;AAAA,eAAD,CALT;;AAAA;AAAA;AAAA,qBAMCf,UAAU,CAAC,EAAD,CANX;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAP;AAQH,GAtBQ,EAsBN,EAtBM,CAAT;AAwBH;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGI,MAAM0H,gBAAgB;AAAA,0EAAE,mBAAMC,IAAN,EAAYnF,CAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AACpBkC,cAAAA,OAAO,CAACC,GAAR,CAAYgD,IAAZ,EAAkBnF,CAAC,CAACC,MAAF,CAAS/B,KAA3B;;AACA,kBAAG8B,CAAC,CAACC,MAAF,CAAS/B,KAAT,KAAiB,MAApB,EAA2B;AACvBiH,gBAAAA,IAAI,CAAC1G,IAAL,GAAU,MAAV;AACJjB,gBAAAA,UAAU,CAAC,UAAC4H,IAAD;AAAA,yBAAQA,IAAI,CAAC7E,MAAL,CAAY4E,IAAZ,CAAR;AAAA,iBAAD,CAAV;AACC;;AALmB,oBAOjBnF,CAAC,CAACC,MAAF,CAAS/B,KAAT,KAAiB,MAPA;AAAA;AAAA;AAAA;;AAQhBiH,cAAAA,IAAI,CAAC1G,IAAL,GAAU,MAAV;AARgB;AAAA,qBAUCxC,WAAW,CAACqI,IAAZ,CAAiB,UAAAhF,EAAE;AAAA,uBAChCA,EAAE,CAACqB,GAAH,KAASwE,IAAI,CAACxE,GADkB;AAAA,eAAnB,CAVD;;AAAA;AAUZ0E,cAAAA,IAVY;AAaRC,cAAAA,MAbQ,GAaD;AACXtG,gBAAAA,MAAM,EAAGqG,IAAI,CAACtE,WAAL,CAAiB5D,OADf;AAEXoI,gBAAAA,IAAI,EAAC,MAFM;AAGXxK,gBAAAA,IAAI,EAAE,IAAI+J,IAAJ,GAAWC,cAAX;AAHK,eAbC,EAkBhB;AACD;;AACCM,cAAAA,IAAI,CAACrB,eAAL,GAAqB;AACjB7G,gBAAAA,OAAO,EAAC2C,MAAM,CAACuF,IAAI,CAACtE,WAAL,CAAiB5D,OAAlB,CAAN,GAAmC2C,MAAM,CAACwF,MAAM,CAACtG,MAAR,CADhC;AAEjBiF,gBAAAA,MAAM,EAACnE,MAAM,CAACuF,IAAI,CAACtE,WAAL,CAAiBkD,MAAlB,CAAN,GAAkCnE,MAAM,CAACwF,MAAM,CAACtG,MAAR,CAF9B;AAGjBA,gBAAAA,MAAM,EAACsG,MAAM,CAACtG;AAHG,eAArB,CApBgB,CAyBjB;AACD;;AACEoF,cAAAA,QAAQ;AACR5G,cAAAA,UAAU,CAAC,UAAC4H,IAAD;AAAA,uBAAQA,IAAI,CAAC7E,MAAL,CAAY4E,IAAZ,CAAR;AAAA,eAAD,CAAV;;AA5BgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAF;;AAAA,oBAAhBD,gBAAgB;AAAA;AAAA;AAAA,KAAtB;;AAkCA,MAAMM,gBAAgB;AAAA,0EAAE,mBAAML,IAAN,EAAWnF,CAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAEhByF,cAAAA,UAFgB,GAEHzF,CAAC,CAACC,MAAF,CAAS/B,KAFN,EAGrB;AACA;;AAJqB,oBAKjBuH,UAAU,KAAG,EAAb,IAAkBA,UAAU,KAAG,CALd;AAAA;AAAA;AAAA;;AAMpB3M,cAAAA,KAAK,CAAC;AACFS,gBAAAA,OAAO,EAAE,wCADP;AAEFY,gBAAAA,IAAI,EAAE,WAFJ;AAGFiG,gBAAAA,WAAW,EAAE,IAHX;AAIFC,gBAAAA,YAAY,EAAE;AAJZ,eAAD,CAAL;AANoB;;AAAA;AAAA;AAAA,qBAcJpE,WAAW,CAACqI,IAAZ,CAAiB,UAAAhF,EAAE;AAAA,uBACnCA,EAAE,CAACqB,GAAH,KAASwE,IAAI,CAACxE,GADqB;AAAA,eAAnB,CAdI;;AAAA;AAcjB0E,cAAAA,IAdiB;AAiBxBA,cAAAA,IAAI,CAAC9H,OAAL,GAAakI,UAAb;AACAjI,cAAAA,UAAU,CAAC,UAAC4H,IAAD;AAAA,uBAAQA,IAAI,CAAC7E,MAAL,CAAY4E,IAAZ,CAAR;AAAA,eAAD,CAAV,CAlBwB,CAmBpB;;AAnBoB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAF;;AAAA,oBAAhBK,gBAAgB;AAAA;AAAA;AAAA,KAAtB;;AAsBA,MAAME,YAAY;AAAA,0EAAE,mBAAMP,IAAN,EAAWnF,CAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACZmF,IAAI,CAAC5H,OAAL,KAAe,EAAf,IAAoB4H,IAAI,CAAC5H,OAAL,KAAe,CAAnC,IAAsC4H,IAAI,CAAC5H,OAAL,KAAeoI,SADzC;AAAA;AAAA;AAAA;;AAEZ7M,cAAAA,KAAK,CAAC;AACFS,gBAAAA,OAAO,EAAE,wCADP;AAEFY,gBAAAA,IAAI,EAAE,WAFJ;AAGFiG,gBAAAA,WAAW,EAAE,IAHX;AAIFC,gBAAAA,YAAY,EAAE;AAJZ,eAAD,CAAL;AAFY;;AAAA;AAAA;AAAA,qBAWCpE,WAAW,CAACqI,IAAZ,CAAiB,UAAAhF,EAAE;AAAA,uBAChCA,EAAE,CAACqB,GAAH,KAASwE,IAAI,CAACxE,GADkB;AAAA,eAAnB,CAXD;;AAAA;AAWZ0E,cAAAA,IAXY;AAcjB;;AACC;AACR;AACA;AAEYI,cAAAA,UAnBY,GAmBAJ,IAAI,CAAC9H,OAnBL;;AAqBhB,kBAAI4H,IAAI,CAAC1G,IAAL,KAAY,MAAhB,EAAuB;AACR6G,gBAAAA,MADQ,GACD;AACdtG,kBAAAA,MAAM,EAAGyG,UADK;AAEdF,kBAAAA,IAAI,EAAC,MAFS;AAGdxK,kBAAAA,IAAI,EAAE,IAAI+J,IAAJ,GAAWC,cAAX;AAHQ,iBADC,EAMpB;;AACCM,gBAAAA,IAAI,CAACrB,eAAL,GAAqB;AACjB7G,kBAAAA,OAAO,EAAC2C,MAAM,CAACuF,IAAI,CAACtE,WAAL,CAAiB5D,OAAlB,CAAN,GAAmC2C,MAAM,CAACwF,MAAM,CAACtG,MAAR,CADhC;AAEjBiF,kBAAAA,MAAM,EAACnE,MAAM,CAACuF,IAAI,CAACtE,WAAL,CAAiBkD,MAAlB,CAAN,GAAkCnE,MAAM,CAACwF,MAAM,CAACtG,MAAR,CAF9B;AAGjBA,kBAAAA,MAAM,EAACsG,MAAM,CAACtG;AAHG,iBAArB;AAKA;AACZ;AAES;AAED;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEQoF,cAAAA,QAAQ;AACR5G,cAAAA,UAAU,CAAC,UAAC4H,IAAD;AAAA,uBAAQA,IAAI,CAAC7E,MAAL,CAAY4E,IAAZ,CAAR;AAAA,eAAD,CAAV;AACArM,cAAAA,KAAK,CAAC;AACFS,gBAAAA,OAAO,EAAE,mCADP;AAEFY,gBAAAA,IAAI,EAAE,YAFJ;AAGFiG,gBAAAA,WAAW,EAAE,IAHX;AAIFC,gBAAAA,YAAY,EAAE;AAJZ,eAAD,CAAL;;AApDgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAF;;AAAA,oBAAZqF,YAAY;AAAA;AAAA;AAAA,KAAlB;;AA6DA,MAAME,aAAa;AAAA,0EAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAETrL,WAAW,GAAC4C,OAFH;AAAA;AAAA;AAAA;;AAGbrE,cAAAA,KAAK,CAAC;AACFS,gBAAAA,OAAO,EAAE,0GADP;AAEFY,gBAAAA,IAAI,EAAE,WAFJ;AAGFiG,gBAAAA,WAAW,EAAE,IAHX;AAIFC,gBAAAA,YAAY,EAAE;AAJZ,eAAD,CAAL;AAHa;;AAAA;AAerBpE,cAAAA,WAAW,CAACoI,OAAZ,CAAoB,UAAA/E,EAAE,EAAE;AAChB,oBAAI,CAACA,EAAE,CAAC0E,eAAH,CAAmBhF,MAAxB,EAA+B;AAC9BlG,kBAAAA,KAAK,CAAC;AACFS,oBAAAA,OAAO,EAAE,yDADP;AAEFY,oBAAAA,IAAI,EAAE,WAFJ;AAGFiG,oBAAAA,WAAW,EAAE,IAHX;AAIFC,oBAAAA,YAAY,EAAE;AAJZ,mBAAD,CAAL;AAMA;AACC;AACD,eAVT,EAfqB,CA2BZ;;AACTpE,cAAAA,WAAW,CAACoI,OAAZ,CAAoB,UAAA/E,EAAE,EAAE;AAChB,oBAAIA,EAAE,CAACb,IAAH,KAAU,MAAd,EAAqB;AACb,sBAAO6G,MAAM,GAAC;AACdtG,oBAAAA,MAAM,EAAGM,EAAE,CAAC0E,eAAH,CAAmBhF,MADd;AAEduG,oBAAAA,IAAI,EAAC,MAFS;AAGdxK,oBAAAA,IAAI,EAAE,IAAI+J,IAAJ,GAAWC,cAAX;AAHQ,mBAAd;AAKRzF,kBAAAA,EAAE,CAACyB,WAAH,CAAe8E,cAAf,CAA8BC,IAA9B,CAAmCR,MAAnC;AACC;;AAED,oBAAIhG,EAAE,CAACb,IAAH,KAAU,MAAd,EAAqB;AACjB,sBAAO6G,OAAM,GAAC;AACdtG,oBAAAA,MAAM,EAAGM,EAAE,CAAC0E,eAAH,CAAmBhF,MADd;AAEduG,oBAAAA,IAAI,EAAC,MAFS;AAGdxK,oBAAAA,IAAI,EAAE,IAAI+J,IAAJ,GAAWC,cAAX;AAHQ,mBAAd;AAKAzF,kBAAAA,EAAE,CAACyB,WAAH,CAAe8E,cAAf,CAA8BC,IAA9B,CAAmCR,OAAnC;AACC;AAEJ,eAnBT;AAqBQS,cAAAA,QAjDa,GAiDJ9J,WAjDI;AAmDd8J,cAAAA,QAAQ,CAAC1B,OAAT,CAAiB,UAAA/E,EAAE,EAAE;AAEpBA,gBAAAA,EAAE,CAACyB,WAAH,CAAe5D,OAAf,GAAyBmC,EAAE,CAAC0E,eAAH,CAAmB7G,OAA5C;AACAmC,gBAAAA,EAAE,CAACyB,WAAH,CAAekD,MAAf,GAAwB3E,EAAE,CAAC0E,eAAH,CAAmBC,MAA3C;AACA3E,gBAAAA,EAAE,CAACyB,WAAH,CAAeiF,UAAf,GAA4B1G,EAAE,CAAC0E,eAAH,CAAmBhF,MAA/C;;AAEA,oBAAIM,EAAE,CAACyB,WAAH,CAAe5D,OAAf,KAA2B,CAA/B,EAAiC;AAC7BmC,kBAAAA,EAAE,CAACqC,cAAH,GAAkB,YAAlB;AACH,iBAFD,MAEK;AACDrC,kBAAAA,EAAE,CAACqC,cAAH,GAAkB,cAAlB;AACH;;AACDrC,gBAAAA,EAAE,CAACb,IAAH,GAAQ,MAAR;AACAa,gBAAAA,EAAE,CAAC2G,OAAH,GAAW,KAAX;AACA,uBAAO3G,EAAE,CAAC0E,eAAV;AACA,uBAAO1E,EAAE,CAAC/B,OAAV;AACA,eAfD;AAkBMR,cAAAA,GArEQ,GAqEH;AACVyE,gBAAAA,QAAQ,EAAC1D,UAAU,CAACkD,eAAX,CAA2BvI,MAA3B,CAAkCkI,GADjC;AACqC;AAC/CuF,gBAAAA,UAAU,EAAErL,MAFF;AAGVpC,gBAAAA,MAAM,EAACqF,UAAU,CAACkD,eAAX,CAA2BvI,MAHxB;AAIV0N,gBAAAA,UAAU,EAACnM,IAAI,CAACkJ,YAAL,CAAkB,CAAlB,EAAqBP,cAArB,CAAoChC,GAJrC;AAKVqE,gBAAAA,SAAS,EAAC3K,UALA;AAMVE,gBAAAA,WAAW,EAACA,WANF;AAOVuG,gBAAAA,SAAS,EAAC9G,IAAI,CAAC2G,GAPL;AAQVyF,gBAAAA,MAAM,EAAC,YARG;AAQW;AACrBC,gBAAAA,KAAK,EAACN,QATI;AAUV5I,gBAAAA,OAAO,EAACA,OAVE;AAWVkG,gBAAAA,YAAY,EAACrJ,IAAI,CAACkJ,YAAL,CAAkB,CAAlB,EAAqBP,cAArB,CAAoCU;AAXvC,eArEG;AAmFdnB,cAAAA,OAAO,CAACC,GAAR,CAAYpF,GAAZ;AAGChD,cAAAA,WAAW,CAAC8J,MAAZ,CAAmB9G,GAAnB,EACC+E,IADD;AAAA,sFACO,mBAAMC,IAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AACH7F,0BAAAA,cAAc,CAAC,EAAD,CAAd;AACApD,0BAAAA,KAAK,CAAC;AACFS,4BAAAA,OAAO,EAAE,oBADP;AAEFY,4BAAAA,IAAI,EAAE,YAFJ;AAGFiG,4BAAAA,WAAW,EAAE,IAHX;AAIFC,4BAAAA,YAAY,EAAE;AAJZ,2BAAD,CAAL;AAMW9B,0BAAAA,qBARR,GAQ8B;AAC7BP,4BAAAA,eAAe,EAAC,EADa;AAE7BS,4BAAAA,IAAI,EAAE;AAFuB,2BAR9B;AAAA;AAAA,iCAYCf,QAAQ,CAAC,UAACgB,SAAD;AAAA,mEAAkBA,SAAlB;AAA6B4H,8BAAAA,OAAO,EAAC/H;AAArC;AAAA,2BAAD,CAZT;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADP;;AAAA;AAAA;AAAA;AAAA,mBAeCyD,KAfD,CAeO,UAACC,GAAD,EAAO;AACVnJ,gBAAAA,KAAK,CAAC;AACFS,kBAAAA,OAAO,EAAE,gCAAgC0I,GADvC;AAEF9H,kBAAAA,IAAI,EAAE,WAFJ;AAGFiG,kBAAAA,WAAW,EAAE,IAHX;AAIFC,kBAAAA,YAAY,EAAE;AAJZ,iBAAD,CAAL;AAMH,eAtBD,EAtFa,CAgHd;AAEA;AAEA;AAEA;AAEA;;AAxHc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAF;;AAAA,oBAAbuF,aAAa;AAAA;AAAA;AAAA,KAAnB,CAntBmC,CA80BvC;;;AACK,sBACI;AAAA,4BACC;AAAK,MAAA,SAAS,EAAC,0BAAf;AAAA,8BACG;AAAK,QAAA,SAAS,EAAC,aAAf;AAAA,gCACI;AAAG,UAAA,SAAS,EAAC,mBAAb;AAAA,0CACqB/K,MADrB;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,eAII;AAAQ,UAAA,SAAS,EAAC,2CAAlB;AAAA,oCACesC,OADf;AAAA;AAAA;AAAA;AAAA;AAAA,gBAJJ;AAAA;AAAA;AAAA;AAAA;AAAA,cADH,eASG;AAAK,QAAA,SAAS,EAAC,mBAAf;AAAA,+BACA;AAAK,UAAA,EAAE,EAAC,SAAR;AAAA,iCAEJ;AAAK,YAAA,SAAS,EAAC,4BAAf;AAAA,mCACI;AAAK,cAAA,SAAS,EAAC,YAAf;AAAA,sCAEA;AAAK,gBAAA,SAAS,EAAC,OAAf;AAAA,uCACO;AAAK,kBAAA,SAAS,EAAC,SAAf;AAAA,yCACI;AAAK,oBAAA,SAAS,EAAC,kBAAf;AAAA,2CACI;AAAQ,sBAAA,IAAI,EAAC,aAAb;AAA2B,sBAAA,KAAK,EAAEZ,WAAlC;AAA+C,sBAAA,QAAQ,EAAE,kBAACyD,CAAD;AAAA,+BAAK5B,gBAAgB,CAAC4B,CAAC,CAACC,MAAF,CAAS/B,KAAV,CAArB;AAAA,uBAAzD;AAAgG,sBAAA,SAAS,EAAC,WAA1G;AAAA,8CACI;AAAQ,wBAAA,KAAK,EAAC,EAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BADJ,eAEI;AAAQ,wBAAA,KAAK,EAAC,MAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BAFJ,eAGI;AAAQ,wBAAA,KAAK,EAAC,QAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BAHJ,eAII;AAAQ,wBAAA,KAAK,EAAC,eAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BAJJ,eAKI;AAAQ,wBAAA,KAAK,EAAC,MAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BALJ,eAMI;AAAQ,wBAAA,KAAK,EAAC,QAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BANJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADP;AAAA;AAAA;AAAA;AAAA,sBAFA,eAgBA;AAAK,gBAAA,SAAS,EAAC,OAAf;AAAA,uCACI;AAAG,kBAAA,SAAS,EAAC,wBAAb;AAAA,0CACI;AAAO,oBAAA,SAAS,EAAC,gBAAjB;AAAmC,oBAAA,IAAI,EAAC,OAAxC;AAAgD,oBAAA,KAAK,EAAEjB,UAAvD;AAAmE,oBAAA,IAAI,EAAC,MAAxE;AAA+E,oBAAA,QAAQ,EAAG,kBAAA+C,CAAC;AAAA,6BAAG9C,aAAa,CAAC8C,CAAC,CAACC,MAAF,CAAS/B,KAAV,CAAhB;AAAA,qBAA3F;AAA6H,oBAAA,WAAW,EAAC;AAAzI;AAAA;AAAA;AAAA;AAAA,0BADJ,eAEI;AAAM,oBAAA,SAAS,EAAC,uBAAhB;AAAA,2CACA;AAAG,sBAAA,SAAS,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA,0BAFJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,sBAhBA,eAwBA;AAAK,gBAAA,SAAS,EAAC,OAAf;AAAA,uCACI;AAAG,kBAAA,SAAS,EAAC;AAAY;AAAzB;AAAA,yCACI;AAAO,oBAAA,SAAS,EAAC,gBAAjB;AAAmC,oBAAA,IAAI,EAAC,aAAxC;AAAuD,oBAAA,KAAK,EAAEzD,WAA9D;AAA2E,oBAAA,IAAI,EAAC,MAAhF;AAAwF,oBAAA,QAAQ;AAAA,4FAAE,mBAAMuF,CAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uCAAgBtF,cAAc,CAACsF,CAAC,CAACC,MAAF,CAAS/B,KAAV,CAA9B;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAAF;;AAAA;AAAA;AAAA;AAAA,uBAAhG;AAAmJ,oBAAA,WAAW,EAAC;AAA/J;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,sBAxBA,eAgCA;AAAK,gBAAA,SAAS,EAAC,QAAf;AAAA,uCACG;AAAG,kBAAA,SAAS,EAAC,SAAb;AAAA,yCACK;AAAQ,oBAAA,SAAS,EAAC,mDAAlB;AAAsE,oBAAA,QAAQ,EAAEb,WAAhF;AAAA,2CACE;AAAM,sBAAA,SAAS,EAAC,UAAhB;AAA2B,sBAAA,OAAO,EAAE2F,YAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADL;AAAA;AAAA;AAAA;AAAA;AADH;AAAA;AAAA;AAAA;AAAA,sBAhCA;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AAFI;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA,cATH;AAAA;AAAA;AAAA;AAAA;AAAA,YADD,eA6DI;AAAK,MAAA,SAAS,EAAC,oBAAf;AAAA,8BACA;AAAK,QAAA,SAAS,EAAC,aAAf;AAAA,gCACI;AAAK,UAAA,SAAS,EAAC,mBAAf;AAAA,uCACmBnI,MADnB,UAC+BR,UAD/B;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,eAKG;AAAQ,UAAA,SAAS,EAAC,0CAAlB;AAAA,6CACyBE,WADzB;AAAA;AAAA;AAAA;AAAA;AAAA,gBALH;AAAA;AAAA;AAAA;AAAA;AAAA,cADA,eAUA;AAAK,QAAA,SAAS,EAAC,eAAf;AAAA,kBAkDH0B,WAAW,CAACiI,MAAZ,GAAmB,CAApB,iBAA0B;AAAA,iCAC3B;AAAK,YAAA,SAAS,EAAC,wBAAf;AAAA,oCAEE;AAAO,cAAA,SAAS,EAAC,4DAAjB;AAAA,sCACO;AAAA,uCACI;AAAA,0CACA;AAAA,2CAAI;AAAM,sBAAA,KAAK,EAAC,WAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAJ;AAAA;AAAA;AAAA;AAAA,0BADA,eAEA;AAAA,2CAAI;AAAM,sBAAA,KAAK,EAAC,UAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAJ;AAAA;AAAA;AAAA;AAAA,0BAFA,eAGA;AAAA,2CAAI;AAAM,sBAAA,KAAK,EAAC,aAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAJ;AAAA;AAAA;AAAA;AAAA,0BAHA,eAKA;AAAA,2CAAI;AAAM,sBAAA,KAAK,EAAC,YAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAJ;AAAA;AAAA;AAAA;AAAA,0BALA,eAMA;AAAA,2CAAI;AAAM,sBAAA,KAAK,EAAC,QAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAJ;AAAA;AAAA;AAAA;AAAA,0BANA;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,sBADP,eAaO;AAAA;AAAA;AAAA;AAAA,sBAbP,eAgBO;AAAA,0BACKjI,WAAW,CAACsK,GAAZ,CAAgB,UAACjI,YAAD,EAAekI,CAAf;AAAA,sCACZ;AAAA,4CACD;AAAA,gCAAKA,CAAC,GAAC;AAAP;AAAA;AAAA;AAAA;AAAA,6BADC,eAED;AAAA,gCAAKlI,YAAY,CAACmC,SAAb,CAAuBG,QAAvB,CAAgC6F;AAArC;AAAA;AAAA;AAAA;AAAA,6BAFC,eAGD;AAAA,gCAAKnI,YAAY,CAACuC,WAAb,CAAyB5F;AAA9B;AAAA;AAAA;AAAA;AAAA,6BAHC,eAID;AAAA,8CAAI;AAAO,wBAAA,SAAS,EAAC,WAAjB;AAAA,gDACA;AAAQ,0BAAA,IAAI,EAAC,OAAb;AAAqB,0BAAA,IAAI,EAAEqD,YAAY,CAACqC,GAAxC;AAA6C,0BAAA,KAAK,EAAC,MAAnD;AAA0D,0BAAA,OAAO,EAAErC,YAAY,CAACG,IAAb,KAAoB,MAAvF;AAAgG,0BAAA,QAAQ,EAAE,kBAACuB,CAAD,EAAK;AAACkF,4BAAAA,gBAAgB,CAAC5G,YAAD,EAAc0B,CAAd,CAAhB;AAAiC;AAAjJ;AAAA;AAAA;AAAA;AAAA,iCADA,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iCAFF;AAAA;AAAA;AAAA;AAAA;AAAA,+BAAJ,oBAGc;AAAA;AAAA;AAAA;AAAA,+BAHd,eAIK;AAAO,wBAAA,SAAS,EAAC,WAAjB;AAAA,gDACD;AAAO,0BAAA,IAAI,EAAC,OAAZ;AAAoB,0BAAA,IAAI,EAAE1B,YAAY,CAACqC,GAAvC;AAA6C,0BAAA,KAAK,EAAC,MAAnD;AAA0D,0BAAA,QAAQ,EAAE,kBAACX,CAAD;AAAA,mCAAKkF,gBAAgB,CAAC5G,YAAD,EAAc0B,CAAd,CAArB;AAAA;AAApE;AAAA;AAAA;AAAA;AAAA,iCADC,eAED;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iCAFC;AAAA;AAAA;AAAA;AAAA;AAAA,+BAJL,eAQK;AAAK,wBAAA,SAAS,EAAC,kBAAf;AAAkC,wBAAA,KAAK,EAAE;AAAC0G,0BAAAA,OAAO,YAAIpI,YAAY,CAACG,IAAjB;AAAR,yBAAzC;AAAA,gDACA;AAAK,0BAAA,SAAS,EAAC,SAAf;AAAA,iDACI;AAAQ,4BAAA,SAAS,EAAC,iBAAlB;AAAoC,4BAAA,IAAI,EAAC,MAAzC;AAAgD,4BAAA,IAAI,EAAEH,YAAY,CAACqC;AAAM;AAAzE;AAA8G,4BAAA,QAAQ,EAAE,kBAACX,CAAD;AAAA,qCAAKwF,gBAAgB,CAAClH,YAAD,EAAc0B,CAAd,CAArB;AAAA;AAAxH;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,iCADA,eAII;AAAK,0BAAA,SAAS,EAAC,SAAf;AAAA,iDACA;AAAQ,4BAAA,SAAS,EAAC,0BAAlB;AAA6C,4BAAA,OAAO,EAAE,iBAACA,CAAD;AAAA,qCAAK0F,YAAY,CAACpH,YAAD,EAAc0B,CAAd,CAAjB;AAAA,6BAAtD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA,iCAJJ;AAAA;AAAA;AAAA;AAAA;AAAA,+BARL;AAAA;AAAA;AAAA;AAAA;AAAA,6BAJC,eAsBD;AAAA,8CACG;AAAA,gDAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iCAAH,EAAiC1B,YAAY,CAACyC,WAAb,CAAyB5D,OAA1D,SAAsEmB,YAAY,CAAC0F,eAAb,CAA6B7G,OAAnG;AAAA;AAAA;AAAA;AAAA;AAAA,+BADH,eAEG;AAAA,gDAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iCAAH,EAA6BmB,YAAY,CAACyC,WAAb,CAAyBkD,MAAtD,QAAgE3F,YAAY,CAAC0F,eAAb,CAA6BC,MAA7F;AAAA;AAAA;AAAA;AAAA;AAAA,+BAFH,eAGG;AAAA,gDAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iCAAH,EAA4B3F,YAAY,CAACyC,WAAb,CAAyB4F,SAArD;AAAA;AAAA;AAAA;AAAA;AAAA,+BAHH;AAAA;AAAA;AAAA;AAAA;AAAA,6BAtBC;AAAA,qBAASH,CAAT;AAAA;AAAA;AAAA;AAAA,2BADY;AAAA,iBAAhB;AADL;AAAA;AAAA;AAAA;AAAA,sBAhBP;AAAA;AAAA;AAAA;AAAA;AAAA,oBAFF,eAwDS;AAAK,cAAA,SAAS,EAAC,uBAAf;AAAA,qCACG;AAAG,gBAAA,SAAS,EAAC,SAAb;AAAA,uCACI;AAAQ,kBAAA,SAAS,EAAC,4BAAlB;AAA+C,kBAAA,QAAQ,EAAE,CAACvK,WAAW,CAACiI,MAAb,GAAoB,CAA7E;AAAgF,kBAAA,OAAO,EAAE0B,aAAzF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADH;AAAA;AAAA;AAAA;AAAA,oBAxDT;AAAA;AAAA;AAAA;AAAA;AAAA;AAD2B;AAlDtB;AAAA;AAAA;AAAA;AAAA,cAVA;AAAA;AAAA;AAAA;AAAA;AAAA,YA7DJ,eAsMI;AAAK,MAAA,SAAS,kBAAW/I,YAAY,GAAC,WAAD,GAAa,EAApC,CAAd;AAAA,8BACuB;AAAK,QAAA,SAAS,EAAC;AAAf;AAAA;AAAA;AAAA;AAAA,cADvB,eAEuB;AAAK,QAAA,SAAS,EAAC,yBAAf;AAAA,gCACI;AAAQ,UAAA,SAAS,EAAC,4BAAlB;AAAA,kCACA;AAAG,YAAA,SAAS,EAAC,kBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADA,eAEA;AAAQ,YAAA,SAAS,EAAC,QAAlB;AAA2B,0BAAW,OAAtC;AAA+C,YAAA,OAAO,EAAEsB;AAAxD;AAAA;AAAA;AAAA;AAAA,kBAFA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,eAKI;AAAS,UAAA,SAAS,EAAC,4BAAnB;AAAA,iCAEC,QAAC,SAAD;AAAW,YAAA,UAAU,EAAC;AAAtB;AAAA;AAAA;AAAA;AAAA;AAFD;AAAA;AAAA;AAAA;AAAA,gBALJ;AAAA;AAAA;AAAA;AAAA;AAAA,cAFvB;AAAA;AAAA;AAAA;AAAA;AAAA,YAtMJ;AAAA,kBADJ;AA2NH;;GA1iCsB/E,a;;KAAAA,a;AA6iCvB,OAAQ,SAASwN,eAAT,SAAoD;AAAA;;AAAA;;AAAA,MAA1B3H,iBAA0B,UAA1BA,iBAA0B;AAAA,MAAR4H,KAAQ,UAARA,KAAQ;AAEzD,MAAMC,WAAW,GAACrO,MAAM,CAACmB,OAAP,CAAe,WAAf,CAAlB;;AAFyD,oBAGxBvB,QAAQ,CAAC,EAAD,CAHgB;AAAA;AAAA,MAGlD0O,UAHkD;AAAA,MAGvCC,aAHuC,mBAIxD;;;AAJwD,oBAKnB3O,QAAQ,CAAC,KAAD,CALW;AAAA;AAAA,MAKjD4O,WALiD;AAAA,MAKpCC,cALoC,mBAMxD;;;AANwD,oBAOxB7O,QAAQ,CAAC,KAAD,CAPgB;AAAA;AAAA,MAOlD8O,SAPkD;AAAA,MAOvCC,YAPuC,mBAQxD;;;AARwD,oBAShB/O,QAAQ,CAAC,EAAD,CATQ;AAAA;AAAA,MASnDgP,aATmD;AAAA,MASpCC,gBAToC,mBAU1D;;;AAV0D,oBAWnCjP,QAAQ,CAAC,EAAD,CAX2B;AAAA;AAAA,MAWnDkP,KAXmD;AAAA,MAW7CC,QAX6C,mBAY1D;;;AAZ0D,oBAajCnP,QAAQ,CAAC,KAAD,CAbyB;AAAA;AAAA,MAanDoP,MAbmD;AAAA,MAa5CC,SAb4C,mBAc1D;;;AAd0D,oBAenCrP,QAAQ,CAAC,CAAD,CAf2B;AAAA;AAAA,MAenDsP,KAfmD;AAAA,MAe7CC,QAf6C;;AAgB1D,MAAMjK,OAAO,GAACnF,MAAM,CAAC,IAAD,CAApB;;AAhB0D,oBAiBvCH,QAAQ,CAAC,EAAD,CAjB+B;AAAA;AAAA,MAiBnDwP,GAjBmD;AAAA,MAiB/CC,MAjB+C;;AAAA,qBAkB3CxP,UAAU,CAACM,WAAD,CAlBiC;AAAA,MAkBnDoB,IAlBmD,gBAkBnDA,IAlBmD;;AAAA,qBAmB5C1B,UAAU,CAACO,aAAD,CAnBkC;AAAA,MAmBnD4E,KAnBmD,gBAmBnDA,KAnBmD;;AAAA,oBAoBpBpF,QAAQ,CAAC,KAAD,CApBY;AAAA;AAAA,MAoBlDwE,YApBkD;AAAA,MAoBrCC,eApBqC;;AAsB1D,MAAMuB,SAAS;AAAA,0EAAE,mBAAMtB,GAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACN2K,SAAS,CAAC,IAAD,CADH;;AAAA;AAEZ;AACDzI,cAAAA,iBAAiB,CAAClC,GAAD,CAAjB;AAHa;AAAA,qBAKPyK,QAAQ,CAACzK,GAAG,CAAC9B,IAAL,CALD;;AAAA;AAOZ;AACAmM,cAAAA,YAAY,CAAC,KAAD,CAAZ;AARY;AAAA,qBASNQ,QAAQ,CAAC,CAAD,CATF;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAF;;AAAA,oBAATvJ,SAAS;AAAA;AAAA;AAAA,KAAf;;AAiBC,MAAM0J,UAAU;AAAA,0EAAC,mBAAM/H,CAAN;AAAA;AAAA;AAAA;AAAA;AACZ,kBAAI2H,KAAK,KAAG,CAAZ,EAAc;AACVzF,gBAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ;AACH;AAEH;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAhBqB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAD;;AAAA,oBAAV4F,UAAU;AAAA;AAAA;AAAA,KAAhB;;AAkBA,MAAMC,YAAY;AAAA,0EAAC,mBAAM9J,KAAN;AAAA;;AAAA;AAAA;AAAA;AAAA;AACf4J,cAAAA,MAAM,CAAC5J,KAAD,CAAN;;AADe,oBAEXA,KAAK,KAAG,EAFG;AAAA;AAAA;AAAA;;AAGXkJ,cAAAA,YAAY,CAAC,KAAD,CAAZ;AACAnI,cAAAA,iBAAiB,CAAC,KAAD,CAAjB;AAJW;;AAAA;AAOTgJ,cAAAA,KAPS,GAOH,MAPG,EAOI;;AAPJ,oBAUX/J,KAAK,CAACgG,MAAN,IAAc,CAVH;AAAA;AAAA;AAAA;;AAWX4C,cAAAA,WAAW,CAACxC,IAAZ,CAAiB;AAACC,gBAAAA,KAAK,wCACjB0D,KADiB,EACT;AACLC,kBAAAA,MAAM,EAAChK,KADF;AAELiK,kBAAAA,QAAQ,EAAC;AAFJ,iBADS,uCAMRnO,IAAI,CAAC0I,eAAL,CAAqBC,cAArB,CAAoChC,GAN5B,sCAOTlD,KAAK,CAAC6D,WAAN,CAAkBC,aAAlB,CAAgCZ,GAPvB,qCAQX,EARW,oCASX;AACH+D,kBAAAA,SAAS,EAAE,CAAC;AADT,iBATW;AAAN,eAAjB,EAYa5C,IAZb,CAYkB,UAACsG,GAAD,EAAO;AACvBlG,gBAAAA,OAAO,CAACC,GAAR,CAAY,+BAAZ;AACAD,gBAAAA,OAAO,CAACC,GAAR,CAAYiG,GAAG,CAACxD,IAAhB;AACEoC,gBAAAA,aAAa,CAACoB,GAAG,CAACxD,IAAL,CAAb;AACC0C,gBAAAA,gBAAgB,CAAC,gCAAD,CAAhB;AACAF,gBAAAA,YAAY,CAAC,IAAD,CAAZ;AACH,eAlBF,EAmBEpF,KAnBF,CAmBQ,UAACC,GAAD,EAAO;AACXnJ,gBAAAA,KAAK,CAAC;AACFS,kBAAAA,OAAO,EAAE,iCAAiC0I,GADxC;AAEF9H,kBAAAA,IAAI,EAAE,WAFJ;AAGFiG,kBAAAA,WAAW,EAAE,IAHX;AAIFC,kBAAAA,YAAY,EAAE;AAJZ,iBAAD,CAAL;AAMF,eA1BF;AAXW;AAAA;;AAAA;AAwCX6B,cAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ;AACAD,cAAAA,OAAO,CAACC,GAAR,CAAY0F,GAAZ;AACAT,cAAAA,YAAY,CAAC,KAAD,CAAZ;AA1CW;AAAA,qBA2CLJ,aAAa,CAAC,EAAD,CA3CR;;AAAA;AA4CX9E,cAAAA,OAAO,CAACC,GAAR,CAAY4E,UAAZ;;AA5CW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAD;;AAAA,oBAAZiB,YAAY;AAAA;AAAA;AAAA,KAAlB;;AAgDA,MAAMK,gBAAgB,GAAE,SAAlBA,gBAAkB,GAAI;AACxBvL,IAAAA,eAAe,CAAC,IAAD,CAAf;AACH,GAFD;;AAGA,MAAMqB,gBAAgB,GAAE,SAAlBA,gBAAkB,GAAI;AACxBrB,IAAAA,eAAe,CAAC,KAAD,CAAf;AACAkL,IAAAA,YAAY,CAACH,GAAD,CAAZ;AACH,GAHD;;AAIAtP,EAAAA,SAAS,CAAC,YAAM;AACb,QAAIsO,KAAJ,EAAU;AACN3E,MAAAA,OAAO,CAACC,GAAR,CAAY,qBAAZ,EAAkC0E,KAAlC;AACAW,MAAAA,QAAQ,CAAC,EAAD,CAAR;AACH;;AACA,WAAO,YAAM,CAEZ,CAFD;AAGH,GARQ,EAQN,CAACX,KAAD,CARM,CAAT;AASA,sBACI;AAAA,2BACI;AAAK,MAAA,SAAS,EAAC,OAAf;AAAA,6BACI;AAAK,QAAA,SAAS,EAAC,0BAAf;AAAA,+BACI;AAAK,UAAA,SAAS,qBAAcM,SAAS,GAAC,WAAD,GAAa,EAApC,CAAd;AAAwD,UAAA,KAAK,EAAE;AAACmB,YAAAA,KAAK,EAAC;AAAP,WAA/D;AAAA,kCACI;AAAK,YAAA,SAAS,EAAC,kBAAf;AAAkC,YAAA,KAAK,EAAE;AAACA,cAAAA,KAAK,EAAC;AAAP,aAAzC;AAAA,oCACI,QAAC,aAAD;AAAe,cAAA,SAAS,EAAC,6BAAzB;AACI,cAAA,IAAI,EAAC,MADT;AACgB,cAAA,WAAW,EAAC,gBAD5B;AAEI,cAAA,KAAK,EAAEf,KAFX;AAGI,cAAA,SAAS,EAAE,CAHf;AAII,cAAA,eAAe,EAAE,GAJrB;AAKI,cAAA,MAAM,EAAE,gBAACvH,CAAD;AAAA,uBAAK+H,UAAU,CAAC/H,CAAD,CAAf;AAAA,eALZ;AAMI,cAAA,QAAQ,EAAE,kBAACA,CAAD;AAAA,uBAAKgI,YAAY,CAAChI,CAAC,CAACC,MAAF,CAAS/B,KAAV,CAAjB;AAAA,eANd;AAOI,cAAA,QAAQ,EAAEP;AAPd;AAAA;AAAA;AAAA;AAAA,oBADJ,eAUI;AAAM,cAAA,SAAS,EAAC,uBAAhB;AAAA,qCACI;AAAG,gBAAA,SAAS,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,oBAVJ;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ,eAgBI;AAAK,YAAA,SAAS,EAAC,wBAAf;AAAwC,YAAA,KAAK,EAAE;AAAC2K,cAAAA,KAAK,EAAC;AAAP,aAA/C;AAAA,mCACI;AAAK,cAAA,SAAS,EAAC,kBAAf;AAAA,yBACAvB,UAAU,CAAC7C,MAAX,GAAkB,CAAlB,GAAoB,EAApB,gBAAuB;AAAK,gBAAA,SAAS,EAAC;AAAgB;AAA/B;AAAA,6CAAiE;AAAA,kCAAQ2D,GAAR;AAAA;AAAA;AAAA;AAAA;AAAA,wBAAjE;AAAA;AAAA;AAAA;AAAA;AAAA,sBADvB,EAGGd,UAAU,CAACR,GAAX,CAAe,UAAC9M,QAAD,EAAW+M,CAAX;AAAA,oCAEV;AAAK,kBAAA,SAAS,EAAC,eAAf;AAAkD,kBAAA,OAAO,EAAE;AAAA,2BAAInI,SAAS,CAAC5E,QAAD,CAAb;AAAA,mBAA3D;AAAA,0CAEI;AAAA,2CAAK;AAAA,gCAAOA,QAAQ,CAACwB;AAAhB;AAAA;AAAA;AAAA;AAAA;AAAL;AAAA;AAAA;AAAA;AAAA,4BAFJ,eAGI;AAAA,4CAAK;AAAA,6CAAM;AAAA,kCAASxB,QAAQ,CAAC8B;AAAlB;AAAA;AAAA;AAAA;AAAA;AAAN;AAAA;AAAA;AAAA;AAAA,8BAAL,eACA;AAAA,iCAAO9B,QAAQ,CAAC4B,QAAhB;AAAA;AAAA;AAAA;AAAA;AAAA,8BADA,eAEA;AAAM,sBAAA,SAAS,EAAC,SAAhB;AAAA,8CAA0B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gCAA1B,QAAoD5B,QAAQ,CAACgC,YAA7D;AAAA;AAAA;AAAA;AAAA;AAAA,8BAFA;AAAA;AAAA;AAAA;AAAA;AAAA,4BAHJ;AAAA,mBAAoChC,QAAQ,CAACkH,GAA7C;AAAA;AAAA;AAAA;AAAA,0BAFU;AAAA,eAAf,CAHH;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,kBAhBJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,UADJ;AA6CH;;IAtKiBiG,e;;MAAAA,e","sourcesContent":["/* eslint-disable */\nimport React, {useState,useContext, useEffect,useRef} from 'react'\nimport client from '../../feathers'\nimport {DebounceInput} from 'react-debounce-input';\nimport { useForm } from \"react-hook-form\";\n//import {useHistory} from 'react-router-dom'\nimport {UserContext,ObjectContext} from '../../context'\nimport {toast} from 'bulma-toast'\nimport {ProductCreate} from './Products'\nimport Encounter from '../EncounterMgt/Encounter';\nvar random = require('random-string-generator');\n// eslint-disable-next-line\nconst searchfacility={};\n\nexport default function PaymentCreate(){\n    // const { register, handleSubmit,setValue} = useForm(); //, watch, errors, reset \n     //const [error, setError] =useState(false)\n     const [success, setSuccess] =useState(false)\n     const [message,setMessage] = useState(\"\")\n     // eslint-disable-next-line\n     const [facility,setFacility] = useState()\n     const SubwalletTxServ=client.service('subwallettransactions')\n     const SubwalletServ=client.service('subwallet')\n     const OrderServ=client.service('order')\n     const InvoiceServ=client.service('invoice')\n     //const history = useHistory()\n     const {user} = useContext(UserContext) //,setUser\n     // eslint-disable-next-line\n     const [currentUser,setCurrentUser] = useState()\n     const [type,setType] = useState(\"Bill\")\n     const [documentNo,setDocumentNo] = useState(\"\")\n     const [totalamount,setTotalamount] = useState(0)\n     const [description,setDescription] = useState(\"\")\n     const [productId,setProductId] = useState(\"\")\n     const [source,setSource] = useState(\"\")\n     const [date,setDate] = useState(\"\")\n     const [name,setName] = useState(\"\")\n     const [inventoryId,setInventoryId] = useState(\"\")\n     const [baseunit,setBaseunit] = useState(\"\")\n     const [quantity,setQuantity] = useState(\"\")\n     const [sellingprice,setSellingPrice] = useState(\"\")\n     const [costprice,setCostprice] = useState(0)\n     const [invquantity,setInvQuantity] = useState(\"\")\n     const [calcamount,setCalcAmount] = useState(0)\n     const [productItem,setProductItem] = useState([])\n      const [billingId,setBilllingId]=useState(\"\")  \n      const [changeAmount, setChangeAmount] = useState(true)\n      const [paymentmode, setPaymentMode] = useState(\"Cash\")\n      const [paymentOptions, setPaymentOptions]=useState([])\n      const [billMode, setBillMode]=useState(\"\")\n      const [productModal, setProductModal]=useState(false)\n      const [obj, setObj]=useState(\"\")\n      const [amountPaid, setAmountPaid]=useState(0)\n      const [balance, setBalance]=useState(0)\n      const [buttonState, setButtonState]=useState(false)\n      const [partPay,setPartPay]=useState([])\n     \n     const {state,setState}=useContext(ObjectContext)\n     const inputEl = useRef(0);\n     let calcamount1\n     let hidestatus\n  \n\n    \n  let medication =state.financeModule.selectedFinance\n  //console.log(state.financeModule.state)\n\n  const showDocumentation = async (value)=>{\n    setProductModal(true)\n  }\n  const handlecloseModal =()=>{\n    setProductModal(false)\n   // handleSearch(val)\n    }\n\n  const handleChangeMode= async(value)=>{\n        //console.log(value)\n       await setPaymentMode(value)\n      /*   console.log(paymentOptions)\n       let billm= paymentOptions.filter(el=>el.name===value)\n       await setBillMode(billm)\n        console.log(billm) */\n        // at startup\n        // check payment mode options from patient financial info\n        // load that to select options\n        // default to HMO-->company-->family-->cash\n        //when chosen\n        //append payment mode to order\n        //check service contract for pricing info\n        // calculate pricing \n        // pricing\n\n\n    }\n\n  const handleRow= async(ProductEntry)=>{\n    //console.log(\"b4\",state)\n\n    //console.log(\"handlerow\",ProductEntry)\n\n    //await setMedication(ProductEntry)\n\n    const    newProductEntryModule={\n        selectedMedication:ProductEntry,\n        show :'detail'\n    }\n  await setState((prevstate)=>({...prevstate, medicationModule:newProductEntryModule}))\n   //console.log(state)\n  // ProductEntry.show=!ProductEntry.show\n\n        }  \n \n  const [productEntry,setProductEntry]=useState({\n         productitems:[],\n         date,\n         documentNo,\n         type,\n         totalamount,\n         source,\n \n     })\n  \n  const productItemI={\n         productId,\n         name,\n         quantity,\n         sellingprice,\n         amount:calcamount, //||qamount\n         baseunit,\n         costprice,\n         billingId\n \n     }\n     // consider batchformat{batchno,expirydate,qtty,baseunit}\n     //consider baseunoit conversions\n  const getSearchfacility=async (obj)=>{\n       await setObj(obj)\n        if (!obj){\n            //\"clear stuff\"\n            setProductId(\"\")\n            setName(\"\")\n            setBaseunit(\"\")\n            setInventoryId(\"\")\n            setSellingPrice(\"\")\n            setInvQuantity(\"\")\n            setDescription(\"\")\n            setCostprice(\"\")\n           // setCalcAmount(null)\n            return\n        }\n \n         setProductId(obj.productId)\n         setName(obj.name)\n         setBaseunit(obj.baseunit)\n         setInventoryId(obj.inventoryId)\n         setSellingPrice(obj.sellingprice) //modify this based on billing mode\n         setInvQuantity(obj.quantity)\n         setCostprice(obj.costprice)\n         setBilllingId(obj.billingId)\n\n         const contracts=obj.billingDetails.contracts\n         //const billingserv=client.service('billing')\n        if( billMode.type===\"HMO Cover\"){ //paymentmode\n         let contract=contracts.filter(el=>el.source_org===billMode.detail.hmo)\n       //  console.log(contract[0].price)\n         setSellingPrice(contract[0].price)\n       //  console.log(sellingprice)\n        \n        }\n        if( billMode.type===\"Company Cover\"){ //paymentmode\n            let contract=contracts.filter(el=>el.source_org===billMode.detail.company)\n         //   console.log(contract[0].price)\n            setSellingPrice(contract[0].price)\n         //   console.log(sellingprice)\n           \n           }\n          \n        /*  setValue(\"facility\", obj._id,  {\n             shouldValidate: true,\n             shouldDirty: true\n         }) */\n     }\n\n     useEffect(() => {\n       /*  console.log(obj)\n        console.log(billMode)\n        if( paymentmode!==\"Cash\" && obj){\n            const contracts=obj.billingDetails.contracts\n            let contract=contracts.filter(el=>el.source_org===billMode.detail.hmo)\n           console.log(contract[0].price)\n           setSellingPrice(contract[0].price)\n           console.log(sellingprice)\n       }\n         return () => {\n            \n         } */\n     }, [obj])\n\n     useEffect(() => {\n         setCurrentUser(user)\n         //console.log(currentUser)\n         return () => {\n         \n         }\n     }, [user])\n \n     const handleUpdateTotal=async ()=>{\n        await setTotalamount(prevtotal=>Number(prevtotal) + Number(calcamount))\n     }\n \n     const handleChangeType=async (e)=>{\n         //console.log(e.target.value)\n         await setType(e.target.value)\n     }\n \n     const handleAmount= async()=>{\n         await setDescription(\"\")\n        // alert(\"Iam chaning qamount\")\n     }\n\n     const handleClickProd=async()=>{\n       /*   console.log(\"amount: \",productItemI.amount)\n         console.log(\"qamount: \",qamount)\n         console.log(\"calcamount: \",calcamount) */\n        if ( quantity===0||quantity===\"\"|| productId===\"\"){\n            toast({\n                message: 'You need to choose a product and quantity to proceed',\n                type: 'is-danger',\n                dismissible: true,\n                pauseOnHover: true,\n              }) \n              return \n        }\n\n         await setSuccess(false)\n         await setProductItem(\n             prevProd=>prevProd.concat(productItemI)\n         )\n        handleUpdateTotal()\n            // generate billing info\n            const billInfo={\n                orderInfo:{\n                    orderId:medication._id,\n                    orderObj:medication,\n                  },\n                  serviceInfo:{            \n                    price: productItemI.sellingprice,\n                    quantity: productItemI.quantity,\n                    productId: productItemI.productId,\n                    name: productItemI.name,\n                    baseunit: productItemI.baseunit,\n                    amount:productItemI.amount,\n                    billingId:productItemI.billingId,\n                    createdby:user._id,\n                  },\n                  paymentInfo:{},\n                  participantInfo:{\n                    billingFacility:medication.destination,\n                    billingFacilityName:medication.destination_name,\n                    locationId:state.StoreModule.selectedStore._id, //selected location,\n                    clientId:medication.clientId,\n                    client:medication.client,\n                    paymentmode:billMode\n                  },\n                  createdBy:user.id,\n                  billing_status:\"Unpaid\"\n                }\n\n        //update order\n        \n        OrderServ.patch(medication._id,{\n            order_status:\"Billed\",\n            billInfo,\n        }).then((resp)=>{\n           // medication=resp\n           // console.log(resp)\n             handleRow(resp) \n            //update dispense\n\n        })\n        .catch((err)=>{\n            console.log(err)\n        })\n        \n        //update status(billed) + action()\n        //?attached chosen product to medication\n        //dispense helper?\n         setName(\"\")\n         setBaseunit(\"\")\n         setQuantity(\"\")\n         setInventoryId(\"\")\n         setSellingPrice(\"\")\n         setInvQuantity(\"\")\n             handleAmount()\n        // setCalcAmount(null)\n        await setSuccess(true)\n        /* console.log(success)\n        console.log(qamount)\n        console.log(productItem) */\n        setChangeAmount(true)\n     }\n   \n \n     const handleQtty=async(e)=>{\n         if (invquantity<e.target.value){\n             toast({\n                 message: 'You can not sell more quantity than exist in inventory ' ,\n                 type: 'is-danger',\n                 dismissible: true,\n                 pauseOnHover: true,\n               })\n             return\n         }\n         setQuantity(e.target.value)\n         calcamount1=quantity*sellingprice\n         await setCalcAmount(calcamount1)\n       //  console.log(calcamount)\n     }\n \n     useEffect( () => {\n          setProductEntry({\n             \n             date,\n             documentNo,\n             type,\n             totalamount,\n             source,\n         })\n\n        setCalcAmount(quantity*sellingprice) \n         return () => {\n             \n         }\n     },[date])\n \n     const resetform=()=>{\n      setType(\"Sales\")\n     setDocumentNo(\"\")\n     setTotalamount(\"\")\n     setProductId(\"\")\n     setSource(\"\")\n     setDate(\"\")\n     setName(\"\")\n     setBaseunit(\"\")\n     setCostprice(\"\")\n     setProductItem([])\n     }\n\n\n     const handleMedicationDone= async()=>{ //handle selected single order\n        //console.log(\"b4\",state)\n    \n        //console.log(\"handlerow\",ProductEntry)\n    \n       // await setSelectedMedication(\"\")\n    \n        const    newProductEntryModule={\n            selectedMedication:{},\n            show :'create'\n        }\n        \n      await setState((prevstate)=>({...prevstate, medicationModule:newProductEntryModule}))\n       //console.log(state)\n      // ProductEntry.show=!ProductEntry.show\n    \n    }\n \n     const onSubmit = async(e) =>{\n         e.preventDefault();\n         setMessage(\"\")\n         //setError(false)\n         setSuccess(false)\n         await setProductEntry({\n             \n             date,\n             documentNo,\n             type,\n             totalamount,\n             source,\n         })\n         productEntry.productitems=productItem\n         productEntry.createdby=user._id\n         productEntry.transactioncategory=\"debit\"\n        \n          // console.log(\"b4 facility\",productEntry);\n           if (user.currentEmployee){\n          productEntry.facility=user.currentEmployee.facilityDetail._id  // or from facility dropdown\n           }else{\n             toast({\n                 message: 'You can not remove inventory from any organization',\n                 type: 'is-danger',\n                 dismissible: true,\n                 pauseOnHover: true,\n               }) \n               return\n           }\n           \n           if (state.StoreModule.selectedStore._id){\n             productEntry.storeId=state.StoreModule.selectedStore._id\n           }else{\n             toast({\n                 message: 'You need to select a store before removing inventory',\n                 type: 'is-danger',\n                 dismissible: true,\n                 pauseOnHover: true,\n               }) \n               return\n           }\n       } \n\n    const handleChangeAmount=()=>{\n        setChangeAmount((rev)=>(!rev))\n        \n    }\n\n    const newclient=async ()=>{\n        await  setProductItem([])\n    }\n    const handleAccept=async()=>{\n        await setButtonState(true)\n        if (paymentmode===\"\"||amountPaid===0|| amountPaid===\"\"){\n            toast({\n                message: 'Kindly choose payment mode or enter amount' ,\n                type: 'is-danger',\n                dismissible: true,\n                pauseOnHover: true,\n              })\n              await setButtonState(false)\n              return\n        }\n        let obj={\n           // toWallet:{ type: Schema.Types.ObjectId, ref:'facility', }, //receiving money\n            //fromWallet:{ type: Schema.Types.ObjectId, ref:'facility', },//sending money\n            //subwallet:{ type: Schema.Types.ObjectId, ref:'subwallet', },\n            client:medication.participantInfo.client._id,\n            organization:user.employeeData[0].facilityDetail._id,\n            category:\"credit\", //debit/credit\n            amount:amountPaid,\n            description: description,\n           \n            toName:user.employeeData[0].facilityDetail.facilityName,\n            fromName:medication.participantInfo.client.firstname + \" \"+ medication.participantInfo.client.lastname,\n            createdby: user._id,\n            \n           // refBill:[{ type: Schema.Types.ObjectId, ref:'bills'  }], //billid to be paid : ref invoice to pay\n           // info:{ type: Schema.Types.Mixed},\n            paymentmode:paymentmode,\n            \n            facility: user.employeeData[0].facilityDetail._id,\n            locationId: state.LocationModule.selectedLocation._id,\n            type: \"Deposit\"\n\n        }\n        let confirm = window.confirm(`Are you sure you want to accept N ${obj.amount} from ${obj.fromName}`)\n        if (confirm){\n\n      \n       await SubwalletTxServ.create(obj)\n       .then((resp)=>{\n          // console.log(resp)\n\n        toast({\n            message: 'Deposit accepted succesfully',\n            type: 'is-success',\n            dismissible: true,\n            pauseOnHover: true,\n          })\n          setAmountPaid(0)\n          setDescription(\"\")\n       })\n       .catch((err)=>{\n        toast({\n            message: 'Error accepting deposit ' + err,\n            type: 'is-danger',\n            dismissible: true,\n            pauseOnHover: true,\n          })\n\n       })\n    }\n       await setButtonState(false)\n    }\n\n    useEffect(() => {\n        const oldname=medication.participantInfo.client.firstname + \" \"+ medication.participantInfo.client.lastname\n       // console.log(\"oldname\",oldname)\n        setSource(medication.participantInfo.client.firstname + \" \"+ medication.participantInfo.client.lastname)\n\n        const newname=source\n       // console.log(\"newname\",newname)\n        if (oldname!==newname){\n            //newdispense\n        \n        setProductItem([])\n        setTotalamount(0)\n\n        }\n        //is the row checked or unchecked\n        if (state.financeModule.state){\n            medication.show=\"none\"\n            medication.proposedpayment={\n                balance:0,\n                paidup:medication.paymentInfo.paidup + medication.paymentInfo.balance,\n                amount:medication.paymentInfo.balance\n            }\n            //no payment detail push\n          \n         setProductItem(\n            prevProd=>prevProd.concat(medication)\n        )\n        }else{\n            if(productItem.length>0){\n                setProductItem(\n                    prevProd=>prevProd.filter(el=>el._id!==medication._id)\n                )\n            }\n        }\n\n       // const paymentoptions= []\n        //const info = medication.participantInfo.client.paymentinfo\n        //let billme={}\n        getFacilities()\n       \n        return () => {\n           \n        }\n    }, [state.financeModule])\n\n    const getTotal= async()=>{\n        setTotalamount(0)\n        productItem.forEach(el=>{\n            if (el.show===\"none\"){\n                if (el.billing_status===\"Unpaid\"){\n                    setTotalamount(prevtotal=>Number(prevtotal) + Number(el.serviceInfo.amount) )   \n                }else{\n                    setTotalamount(prevtotal=>Number(prevtotal) + Number(el.paymentInfo.balance) )\n                }\n               \n            }\n            if (el.show===\"flex\"){\n                setTotalamount(prevtotal=>Number(prevtotal) + Number(el.partPay) )\n            }\n          \n            // \n        })\n    }\n\n    useEffect(() => {\n        console.log(productItem)\n       getTotal()\n        return () => {\n        \n        }\n    }, [productItem])\n\n    const getFacilities= async()=>{\n       \n        // console.log(\"here b4 server\")\n        const findProductEntry= await SubwalletServ.find(\n        {query: {\n           \n            client:medication.participantInfo.client._id,\n            organization:user.employeeData[0].facilityDetail._id,\n            //storeId:state.StoreModule.selectedStore._id,\n            //clientId:state.ClientModule.selectedClient._id,\n            $limit:100,\n            $sort: {\n                createdAt: -1\n            }\n            }})\n             console.log(findProductEntry)\n\n     // console.log(\"balance\", findProductEntry.data[0].amount)\n        if (findProductEntry.data.length>0){\n            await setBalance(findProductEntry.data[0].amount)\n        }else{\n            await setBalance(0) \n            \n        } \n\n      //  await setState((prevstate)=>({...prevstate, currentClients:findProductEntry.groupedOrder}))\n        }   \n\n\n\n     useEffect(() => {\n       // const medication =state.medicationModule.selectedMedication\n         const today=new Date().toLocaleString()\n         //console.log(today)\n         setDate(today)\n         const invoiceNo=random(6,'uppernumeric')\n         setDocumentNo(invoiceNo)\n\n            getFacilities()\n            SubwalletServ.on('created', (obj)=>getFacilities())\n            SubwalletServ.on('updated', (obj)=>getFacilities())\n            SubwalletServ.on('patched', (obj)=>getFacilities())\n            SubwalletServ.on('removed', (obj)=>getFacilities())\n\n         return async() => {\n            const    newProductEntryModule={\n                selectedFinance:{},\n                show :'create'\n                }\n           await setState((prevstate)=>({...prevstate, financeModule:newProductEntryModule}))\n           await setPartPay([])\n         }\n     }, [])\n\n  /*   useEffect(() => {\n        calcamount1=quantity*sellingprice\n         setCalcAmount(calcamount1)\n         console.log(calcamount)\n         setChangeAmount(true)\n        return () => {\n            \n        }\n    }, [quantity]) */\n\n    \n    const handleChangePart= async(bill, e)=>{\n        console.log(bill, e.target.value)\n        if(e.target.value===\"Part\"){\n            bill.show=\"flex\"\n        setPartPay((prev)=>prev.concat(bill))\n        }\n      \n        if(e.target.value===\"Full\"){\n            bill.show=\"none\"\n            \n            let item=  await productItem.find(el=>\n                el._id===bill._id\n            )\n            const   payObj={\n                amount:  item.paymentInfo.balance,\n                mode:\"Full\",\n                date: new Date().toLocaleString()\n            }\n            //item.partPay=\"\"\n           // item.paymentInfo.paymentDetails.push(payObj)\n            item.proposedpayment={\n                balance:Number(item.paymentInfo.balance) - Number(payObj.amount),\n                paidup:Number(item.paymentInfo.paidup) + Number(payObj.amount),\n                amount:payObj.amount\n            }\n           // item.paymentInfo.balance=item.paymentInfo.balance - item.paymentInfo.balance\n          //  item.paymentInfo.paidup=Number(item.paymentInfo.paidup) + Number(payObj.amount)\n            getTotal()\n            setPartPay((prev)=>prev.concat(bill))\n\n        }\n        \n    }\n\n    const handlePartAmount= async(bill,e)=>{\n        \n        let partAmount = e.target.value\n       // bill.partPay=partAmount\n       //const itemList=productItem\n       if (partAmount===\"\" ||partAmount===0  ){\n        toast({\n            message: 'Please enter an amount as part payment',\n            type: 'is-danger',\n            dismissible: true,\n            pauseOnHover: true,\n          })\n        return\n       }\n       let item=  await productItem.find(el=>\n        el._id===bill._id\n        )\n    item.partPay=partAmount\n    setPartPay((prev)=>prev.concat(bill))     \n        //setProductItem(productItem)\n    }\n\n    const handleUpdate= async(bill,e)=>{\n        if (bill.partPay===\"\" ||bill.partPay===0||bill.partPay===undefined  ){\n            toast({\n                message: 'Please enter an amount as part payment',\n                type: 'is-danger',\n                dismissible: true,\n                pauseOnHover: true,\n              })\n            return\n           }\n       // console.log(bill)\n        let item=  await productItem.find(el=>\n            el._id===bill._id\n        )\n       // console.log(item)\n        /* item.partPay=partAmount\n        console.log(item)\n        console.log(productItem) */\n        \n        let partAmount= item.partPay\n       \n        if (bill.show===\"flex\"){\n                const  payObj={\n                amount:  partAmount,\n                mode:\"Part\",\n                date: new Date().toLocaleString()\n            }\n           // item.paymentInfo.paymentDetails.push(payObj)\n            item.proposedpayment={\n                balance:Number(item.paymentInfo.balance) - Number(payObj.amount),\n                paidup:Number(item.paymentInfo.paidup) + Number(payObj.amount),\n                amount:payObj.amount\n            }\n            /* item.paymentInfo.balance=item.paymentInfo.balance-partAmount\n            item.paymentInfo.paidup=Number(item.paymentInfo.paidup)+ Number(partAmount) */\n\n        }\n\n        /* if (bill.show===\"none\"){\n            const   payObj={\n                amount:  item.paymentInfo.balance,\n                mode:\"Full\",\n                date: new Date().toLocaleString()\n            }\n            item.paymentInfo.paymentDetails.push(payObj)\n            item.paymentInfo.balance=item.paymentInfo.balance - item.paymentInfo.balance\n            }\n            \n */\n        \n        getTotal()\n        setPartPay((prev)=>prev.concat(bill))\n        toast({\n            message: 'Part payment updated successfully',\n            type: 'is-success',\n            dismissible: true,\n            pauseOnHover: true,\n          })\n\n    }\n\n    const handlePayment= async ()=>{\n           //1. check if there is sufficient amount\n           if ( totalamount>balance){\n            toast({\n                message: 'Total amount due greater than money received. Kindly top up account or reduce number of bills to be paid',\n                type: 'is-danger',\n                dismissible: true,\n                pauseOnHover: true,\n              })\n    \n              return\n           }\n          \n           \n           \n    productItem.forEach(el=>{\n            if (!el.proposedpayment.amount){\n             toast({\n                 message: 'one or more bills do not have a payment method selected',\n                 type: 'is-danger',\n                 dismissible: true,\n                 pauseOnHover: true,\n               })\n             return\n             }\n            })\n\n             //transform \n    productItem.forEach(el=>{\n            if (el.show===\"flex\"){\n                    const  payObj={\n                    amount:  el.proposedpayment.amount,\n                    mode:\"Part\",\n                    date: new Date().toLocaleString()\n                }\n            el.paymentInfo.paymentDetails.push(payObj)\n            }\n\n            if (el.show===\"none\"){\n                const  payObj={\n                amount:  el.proposedpayment.amount,\n                mode:\"Full\",\n                date: new Date().toLocaleString()\n                }\n                el.paymentInfo.paymentDetails.push(payObj)\n                }\n\n            })\n\n        let allItems=productItem\n\n           allItems.forEach(el=>{\n\n            el.paymentInfo.balance = el.proposedpayment.balance\n            el.paymentInfo.paidup = el.proposedpayment.paidup\n            el.paymentInfo.amountpaid = el.proposedpayment.amount\n\n            if (el.paymentInfo.balance === 0){\n                el.billing_status=\"Fully Paid\"\n            }else{\n                el.billing_status=\"Part Payment\"\n            }\n            el.show=\"none\"\n            el.checked=false\n            delete el.proposedpayment\n            delete el.partPay\n           })\n           \n\n           const obj ={\n            clientId:medication.participantInfo.client._id,//sending money\n            clientName: source ,\n            client:medication.participantInfo.client,\n            facilityId:user.employeeData[0].facilityDetail._id,\n            invoiceNo:documentNo,\n            totalamount:totalamount,\n            createdby:user._id,\n            status:\"Fully Paid\", //billid to be paid : ref invoice to pay\n            bills:allItems,\n            balance:balance,\n            facilityName:user.employeeData[0].facilityDetail.facilityName\n           }\n\n           console.log(obj)\n\n           \n            InvoiceServ.create(obj)\n            .then( async(resp)=>{\n                setProductItem([])\n                toast({\n                    message: 'payment successful',\n                    type: 'is-success',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  })\n                  const    newProductEntryModule={\n                    selectedFinance:{},\n                    show :'create'\n                }\n              await setState((prevstate)=>({...prevstate, finance:newProductEntryModule}))\n            })\n            .catch((err)=>{\n                toast({\n                    message: 'Error occurred with payment' + err,\n                    type: 'is-danger',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  }) \n            })\n\n        \n           \n           //2. call single end point for billspayment?\n\n           //2.1 create subwallet transaction- debit\n\n           //2.2 update subwallet\n\n           //2.3 mark orders as paid\n\n           //2.4 mark bills as paid\n\n        }\n// console.log(\"simpa\")\n     return (\n         <>\n          <div className=\"card card-overflow mb-2 \">\n             <div className=\"card-header\">\n                 <p className=\"card-header-title\">\n                    Make Deposit for {source}\n                 </p>\n                 <button className=\"button is-success is-small btnheight mt-2\" >\n                    Balance: N {balance}\n                 </button>\n             </div>\n             <div className=\"card-content pb-1\">\n             <div id=\"Deposit\">\n         \n         <div className=\"field is-horizontal pullup\">\n             <div className=\"field-body\">\n             \n             <div className=\"field\">    \n                    <div className=\"control\">\n                        <div className=\"select is-small \">\n                            <select name=\"paymentmode\" value={paymentmode} onChange={(e)=>handleChangeMode(e.target.value)} className=\"selectadd\" >\n                                <option value=\"\">Payment Mode </option>\n                                <option value=\"Cash\">Cash</option>\n                                <option value=\"Wallet\">Wallet </option>\n                                <option value=\"Bank Transfer\">Bank Transfer </option>\n                                <option value=\"Card\">Card</option>\n                                <option value=\"Cheque\">Cheque</option> \n                            </select>\n                        </div>\n                    </div>\n                    </div>\n             <div className=\"field\" >\n                 <p className=\"control has-icons-left\" >\n                     <input className=\"input is-small\"  name=\"order\" value={amountPaid} type=\"text\" onChange={ e=> setAmountPaid(e.target.value)} placeholder=\"Amount\"  />\n                     <span className=\"icon is-small is-left\">\n                     <i className=\"fas fa-hashtag\"></i>\n                     </span>\n                 </p>\n             </div> \n             <div className=\"field\" >\n                 <p className=\"control  \" /* style={{display:\"none\"}} has-icons-left*/>\n                     <input className=\"input is-small\"  name=\"description\"  value={description} type=\"text\"  onChange={async e=> await setDescription(e.target.value)}  placeholder=\"Payment Details\"  />\n                     {/* <span className=\"icon is-small is-left\">\n                     <i className=\"fas fa-dollar-sign\"></i> \n                     </span>*/}\n                 </p>\n             </div> \n             <div className=\"field \">\n                <p className=\"control\">\n                     <button className=\"button is-info is-small  is-pulled-left selectadd\" disabled={buttonState}>\n                       <span className=\"is-small\" onClick={handleAccept} >Accept</span>\n                     </button>\n                 </p>\n             </div>\n             </div>\n             </div>\n            \n      \n          \n          </div> \n         </div>\n          </div>\n             <div className=\"card card-overflow\">\n             <div className=\"card-header\">\n                 <div className=\"card-header-title\">\n                     Pay Bills for {source}   #{documentNo} \n                 </div>\n                \n                <button className=\"button is-danger is-small btnheight mt-2\" >\n                    Total Amount Due: N {totalamount}\n                 </button> \n             </div>\n             <div className=\"card-content \">\n    \n            {/*  <form onSubmit={onSubmit}>  */}\n           {/*   <div className=\"field is-horizontal\">\n             <div className=\"field-body\">\n         \n             <div className=\"field\">\n                     <p className=\"control has-icons-left has-icons-right\">\n                         <input className=\"input is-small\"  ref={register({ required: true })}  value={source} name=\"client\" type=\"text\" onChange={e=>setSource(e.target.value)} placeholder=\"Client\" />\n                         <span className=\"icon is-small is-left\">\n                             <i className=\"fas fa-hospital\"></i>\n                         </span>                    \n                     </p>\n                 </div>\n                 <div className=\"field\">\n                 <p className=\"control has-icons-left\">\n                     <input className=\"input is-small\"  ref={register}  name=\"documentNo\" value={documentNo} type=\"text\" onChange={e=>setDocumentNo(e.target.value)} placeholder=\" Invoice Number\"/>\n                     <span className=\"icon is-small is-left\">\n                     <i className=\"fas fa-phone-alt\"></i>\n                     </span>\n                 </p>\n             </div>\n                </div>\n             </div> */}\n             \n             {/* <div className=\"field is-horizontal pullup\">\n             <div className=\"field-body\" >\n             <div className=\"field\">\n             <label className=\"label is-small\">Total Amount Due:</label>\n             </div>\n             <div className=\"field\" style={{width:\"40%\"}}>\n                 <p className=\"control has-icons-left \"  style={{display:\"none\"}} >\n                     <input className=\"input is-small\"  disabled={changeAmount} value={totalamount} name=\"totalamount\"  onChange={e=>setTotalamount(e.target.value)} placeholder=\"Amount\"  />\n                     <span className=\"icon is-small is-left\">\n                     <i className=\"fas fa-dollar-sign\"></i>\n                     </span>\n                 </p>\n                \n \n             </div> \n            \n             </div>\n          </div> */}\n                \n               {/*   </form>   */} \n                \n            \n          {/* array of ProductEntry items */}\n          \n\n        {(productItem.length>0) && <>\n        <div className=\"vscrollable-acc pullup\">\n             \n          <table className=\"table is-striped  is-hoverable is-fullwidth is-scrollable \">\n                 <thead>\n                     <tr>\n                     <th><abbr title=\"Serial No\">S/No</abbr></th>\n                     <th><abbr title=\"Category\">Category</abbr></th>\n                     <th><abbr title=\"Description\">Description</abbr></th>\n                    \n                     <th><abbr title=\"Cost Price\">Type</abbr></th>\n                     <th><abbr title=\"Amount\">Amount</abbr></th>\n                     {/* <th><abbr title=\"Cost Price\">Amount</abbr></th> */}\n                     {/* <th><abbr title=\"Actions\">Actions</abbr></th> */}\n                     </tr>\n                 </thead>\n                 <tfoot>\n                     \n                 </tfoot>\n                 <tbody>\n                    { productItem.map((ProductEntry, i)=>(\n                          <tr key={i}>\n                         <th>{i+1}</th>\n                         <th>{ProductEntry.orderInfo.orderObj.order_category}</th>\n                         <td>{ProductEntry.serviceInfo.name}</td>\n                         <td><label className=\" is-small\">\n                             <input  type=\"radio\" name={ProductEntry._id} value=\"Full\" checked={ProductEntry.show===\"none\"}  onChange={(e)=>{handleChangePart(ProductEntry,e)}}/>\n                               <span > Full</span>\n                              </label> <br/>\n                              <label className=\" is-small\">\n                             <input type=\"radio\" name={ProductEntry._id}  value=\"Part\" onChange={(e)=>handleChangePart(ProductEntry,e)}/>\n                             <span> Part </span>\n                              </label>\n                              <div className=\"field has-addons\" style={{display:`${ProductEntry.show}`}}>\n                              <div className=\"control\">\n                                  <input  className=\"input selectadd\" type=\"text\" name={ProductEntry._id}  /* value={ProductEntry.partPay}  */  onChange={(e)=>handlePartAmount(ProductEntry,e)} />\n                                  </div> \n                                  <div className=\"control\">\n                                  <button className=\"button is-info selectadd\" onClick={(e)=>handleUpdate(ProductEntry,e)}>Update</button>\n                                  </div>\n                                  </div>\n                             {/*  {ProductEntry.partPay} */}\n                              </td>\n                         <td>\n                            <p><strong>Balance Due:</strong>{ProductEntry.paymentInfo.balance}  ({ProductEntry.proposedpayment.balance})</p>\n                            <p><strong>Paid Up:</strong>{ProductEntry.paymentInfo.paidup} ({ProductEntry.proposedpayment.paidup })</p>\n                            <p><strong>Amount:</strong>{ProductEntry.paymentInfo.amountDue}</p>\n                         </td>\n\n                          \n                        {/* <td>{ProductEntry.amount}</td> */}\n                        {/*  <td><span className=\"showAction\"  >x</span></td> */}\n                         </tr>\n                     ))}\n                 </tbody>\n                 </table>\n               \n                 <div className=\"field mt-2 is-grouped\">\n                    <p className=\"control\">\n                        <button className=\"button is-success is-small\" disabled={!productItem.length>0} onClick={handlePayment}>\n                            Pay\n                        </button>\n                    </p>\n                  {/* <p className=\"control\">\n                     <button className=\"button is-info is-small\" disabled={!productItem.length>0} onClick={onSubmit} >\n                         Generate Invoice\n                     </button>\n                 </p>  */}\n                 </div>\n                 </div>    \n        \n            </>\n        }   \n             \n             \n             </div>\n             </div>\n             <div className={`modal ${productModal?\"is-active\":\"\"}` }>\n                                    <div className=\"modal-background\"></div>\n                                    <div className=\"modal-card  modalbkgrnd\">\n                                        <header className=\"modal-card-head  btnheight\">\n                                        <p className=\"modal-card-title\">Documentation</p>\n                                        <button className=\"delete\" aria-label=\"close\"  onClick={handlecloseModal}></button>\n                                        </header>\n                                        <section className=\"modal-card-body modalcolor\">\n                                      \n                                         <Encounter standalone=\"true\" />\n                                        </section> \n                                        {/* <footer className=\"modal-card-foot\">\n                                        <button className=\"button is-success\">Save changes</button>\n                                        <button className=\"button\">Cancel</button>\n                                        </footer>  */}\n                                   </div>\n                                </div>      \n         </>\n     )\n    \n }\n \n\n export  function InventorySearch({getSearchfacility,clear}) {\n    \n    const productServ=client.service('inventory')\n    const [facilities,setFacilities]=useState([])\n     // eslint-disable-next-line\n     const [searchError, setSearchError] =useState(false)\n     // eslint-disable-next-line\n    const [showPanel, setShowPanel] =useState(false)\n     // eslint-disable-next-line\n   const [searchMessage, setSearchMessage] = useState(\"\") \n   // eslint-disable-next-line \n   const [simpa,setSimpa]=useState(\"\")\n   // eslint-disable-next-line \n   const [chosen,setChosen]=useState(false)\n   // eslint-disable-next-line \n   const [count,setCount]=useState(0)\n   const inputEl=useRef(null)\n   const [val,setVal]=useState(\"\")\n   const {user} = useContext(UserContext) \n   const {state}=useContext(ObjectContext)\n    const [productModal,setProductModal]=useState(false)\n\n   const handleRow= async(obj)=>{\n        await setChosen(true)\n        //alert(\"something is chaning\")\n       getSearchfacility(obj)\n       \n       await setSimpa(obj.name)\n       \n        // setSelectedFacility(obj)\n        setShowPanel(false)\n        await setCount(2)\n        /* const    newfacilityModule={\n            selectedFacility:facility,\n            show :'detail'\n        }\n   await setState((prevstate)=>({...prevstate, facilityModule:newfacilityModule})) */\n   //console.log(state)\n    }\n    const handleBlur=async(e)=>{\n         if (count===2){\n             console.log(\"stuff was chosen\")\n         }\n       \n       /*  console.log(\"blur\")\n         setShowPanel(false)\n        console.log(JSON.stringify(simpa))\n        if (simpa===\"\"){\n            console.log(facilities.length)\n            setSimpa(\"abc\")\n            setSimpa(\"\")\n            setFacilities([])\n            inputEl.current.setValue=\"\"\n        }\n        console.log(facilities.length)\n        console.log(inputEl.current) */\n    }\n    const handleSearch=async(value)=>{\n        setVal(value)\n        if (value===\"\"){\n            setShowPanel(false)\n            getSearchfacility(false)\n            return\n        }\n        const field='name' //field variable\n\n       \n        if (value.length>=3 ){\n            productServ.find({query: {     //service\n                 [field]: {\n                     $regex:value,\n                     $options:'i'\n                    \n                 },\n                 facility: user.currentEmployee.facilityDetail._id,\n                 storeId: state.StoreModule.selectedStore._id,\n                 $limit:10,\n                 $sort: {\n                     createdAt: -1\n                   }\n                     }}).then((res)=>{\n              console.log(\"product  fetched successfully\") \n              console.log(res.data) \n                setFacilities(res.data)\n                 setSearchMessage(\" product  fetched successfully\")\n                 setShowPanel(true)\n             })\n             .catch((err)=>{\n                toast({\n                    message: 'Error creating ProductEntry ' + err,\n                    type: 'is-danger',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  })\n             })\n         }\n        else{\n            console.log(\"less than 3 \")\n            console.log(val)\n            setShowPanel(false)\n            await setFacilities([])\n            console.log(facilities)\n        }\n    }\n\n    const handleAddproduct =()=>{\n        setProductModal(true) \n    }\n    const handlecloseModal =()=>{\n        setProductModal(false)\n        handleSearch(val)\n    }\n    useEffect(() => {\n       if (clear){\n           console.log(\"success has changed\",clear)\n           setSimpa(\"\")\n       }\n        return () => {\n            \n        }\n    }, [clear] )\n    return (\n        <div>\n            <div className=\"field\">\n                <div className=\"control has-icons-left  \">\n                    <div className={`dropdown ${showPanel?\"is-active\":\"\"}`} style={{width:\"100%\"}}>\n                        <div className=\"dropdown-trigger\" style={{width:\"100%\"}}>\n                            <DebounceInput className=\"input is-small  is-expanded\" \n                                type=\"text\" placeholder=\"Search Product\"\n                                value={simpa}\n                                minLength={3}\n                                debounceTimeout={400}\n                                onBlur={(e)=>handleBlur(e)}\n                                onChange={(e)=>handleSearch(e.target.value)}\n                                inputRef={inputEl}\n                                  />\n                            <span className=\"icon is-small is-left\">\n                                <i className=\"fas fa-search\"></i>\n                            </span>\n                        </div>\n                        {/* {searchError&&<div>{searchMessage}</div>} */}\n                        <div className=\"dropdown-menu expanded\" style={{width:\"100%\"}}>\n                            <div className=\"dropdown-content\">\n                          { facilities.length>0?\"\":<div className=\"dropdown-item\" /* onClick={handleAddproduct} */> <span> {val} is not in your inventory</span> </div>}\n\n                              {facilities.map((facility, i)=>(\n                                    \n                                    <div className=\"dropdown-item\" key={facility._id} onClick={()=>handleRow(facility)}>\n                                        \n                                        <div><span>{facility.name}</span></div>\n                                        <div><span><strong>{facility.quantity}</strong></span>\n                                        <span>{facility.baseunit}(s) remaining</span>\n                                        <span className=\"padleft\"><strong>Price:</strong> N{facility.sellingprice}</span></div>\n                                        \n                                    </div>\n                                    \n                                    ))}\n                                    \n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            \n        </div>\n    )\n}"]},"metadata":{},"sourceType":"module"}