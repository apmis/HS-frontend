{"ast":null,"code":"\"use strict\";\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  Object.defineProperty(o, k2, {\n    enumerable: true,\n    get: function get() {\n      return m[k];\n    }\n  });\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) {\n    if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  }\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.defaults = exports.defaultStorage = exports.hooks = exports.MemoryStorage = exports.AuthenticationClient = exports.getDefaultStorage = void 0;\n\nvar core_1 = require(\"./core\");\n\nObject.defineProperty(exports, \"AuthenticationClient\", {\n  enumerable: true,\n  get: function get() {\n    return core_1.AuthenticationClient;\n  }\n});\n\nvar hooks = __importStar(require(\"./hooks\"));\n\nexports.hooks = hooks;\n\nvar storage_1 = require(\"./storage\");\n\nObject.defineProperty(exports, \"MemoryStorage\", {\n  enumerable: true,\n  get: function get() {\n    return storage_1.MemoryStorage;\n  }\n});\n\nvar getDefaultStorage = function getDefaultStorage() {\n  try {\n    return new storage_1.StorageWrapper(window.localStorage);\n  } catch (error) {}\n\n  return new storage_1.MemoryStorage();\n};\n\nexports.getDefaultStorage = getDefaultStorage;\nexports.defaultStorage = exports.getDefaultStorage();\nexports.defaults = {\n  header: 'Authorization',\n  scheme: 'Bearer',\n  storageKey: 'feathers-jwt',\n  locationKey: 'access_token',\n  locationErrorKey: 'error',\n  jwtStrategy: 'jwt',\n  path: '/authentication',\n  Authentication: core_1.AuthenticationClient,\n  storage: exports.defaultStorage\n};\n\nvar init = function init() {\n  var _options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  var options = Object.assign({}, exports.defaults, _options);\n  var Authentication = options.Authentication;\n  return function (app) {\n    var authentication = new Authentication(app, options);\n    app.authentication = authentication;\n    app.authenticate = authentication.authenticate.bind(authentication);\n    app.reAuthenticate = authentication.reAuthenticate.bind(authentication);\n    app.logout = authentication.logout.bind(authentication);\n    app.hooks({\n      before: {\n        all: [hooks.authentication(), hooks.populateHeader()]\n      }\n    });\n  };\n};\n\nexports.default = init;\n\nif (typeof module !== 'undefined') {\n  module.exports = Object.assign(init, module.exports);\n}","map":{"version":3,"sources":["../src/index.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,IAAA,MAAA,GAAA,OAAA,CAAA,QAAA,CAAA;;AAyBS,MAAA,CAAA,cAAA,CAAA,OAAA,EAAA,sBAAA,EAAA;AAAA,EAAA,UAAA,EAAA,IAAA;AAAA,EAAA,GAAA,EAAA,eAAA;AAAA,WAzBA,MAAA,CAAA,oBAyBA;AAzBoB;AAyBpB,CAAA;;AAxBT,IAAA,KAAA,GAAA,YAAA,CAAA,OAAA,CAAA,SAAA,CAAA,CAAA;;AAwBoF,OAAA,CAAA,KAAA,GAAA,KAAA;;AAtBpF,IAAA,SAAA,GAAA,OAAA,CAAA,WAAA,CAAA;;AAsBqE,MAAA,CAAA,cAAA,CAAA,OAAA,EAAA,eAAA,EAAA;AAAA,EAAA,UAAA,EAAA,IAAA;AAAA,EAAA,GAAA,EAAA,eAAA;AAAA,WAtBnD,SAAA,CAAA,aAsBmD;AAtBtC;AAsBsC,CAAA;;AAR9D,IAAM,iBAAiB,GAAG,SAApB,iBAAoB,GAAK;AACpC,MAAI;AACF,WAAO,IAAI,SAAA,CAAA,cAAJ,CAAmB,MAAM,CAAC,YAA1B,CAAP;AACD,GAFD,CAEE,OAAO,KAAP,EAAc,CAAE;;AAElB,SAAO,IAAI,SAAA,CAAA,aAAJ,EAAP;AACD,CANM;;AAAM,OAAA,CAAA,iBAAA,GAAiB,iBAAjB;AAYA,OAAA,CAAA,cAAA,GAA0B,OAAA,CAAA,iBAAA,EAA1B;AAEA,OAAA,CAAA,QAAA,GAAwC;AACnD,EAAA,MAAM,EAAE,eAD2C;AAEnD,EAAA,MAAM,EAAE,QAF2C;AAGnD,EAAA,UAAU,EAAE,cAHuC;AAInD,EAAA,WAAW,EAAE,cAJsC;AAKnD,EAAA,gBAAgB,EAAE,OALiC;AAMnD,EAAA,WAAW,EAAE,KANsC;AAOnD,EAAA,IAAI,EAAE,iBAP6C;AAQnD,EAAA,cAAc,EAAE,MAAA,CAAA,oBARmC;AASnD,EAAA,OAAO,EAAE,OAAA,CAAA;AAT0C,CAAxC;;AAYb,IAAM,IAAI,GAAG,SAAP,IAAO,GAAwD;AAAA,MAAvD,QAAuD,uEAAN,EAAM;;AACnE,MAAM,OAAO,GAAgC,MAAM,CAAC,MAAP,CAAc,EAAd,EAAkB,OAAA,CAAA,QAAlB,EAA4B,QAA5B,CAA7C;AADmE,MAE3D,cAF2D,GAExC,OAFwC,CAE3D,cAF2D;AAInE,SAAO,UAAC,GAAD,EAAqB;AAC1B,QAAM,cAAc,GAAG,IAAI,cAAJ,CAAmB,GAAnB,EAAwB,OAAxB,CAAvB;AAEA,IAAA,GAAG,CAAC,cAAJ,GAAqB,cAArB;AACA,IAAA,GAAG,CAAC,YAAJ,GAAmB,cAAc,CAAC,YAAf,CAA4B,IAA5B,CAAiC,cAAjC,CAAnB;AACA,IAAA,GAAG,CAAC,cAAJ,GAAqB,cAAc,CAAC,cAAf,CAA8B,IAA9B,CAAmC,cAAnC,CAArB;AACA,IAAA,GAAG,CAAC,MAAJ,GAAa,cAAc,CAAC,MAAf,CAAsB,IAAtB,CAA2B,cAA3B,CAAb;AAEA,IAAA,GAAG,CAAC,KAAJ,CAAU;AACR,MAAA,MAAM,EAAE;AACN,QAAA,GAAG,EAAE,CACH,KAAK,CAAC,cAAN,EADG,EAEH,KAAK,CAAC,cAAN,EAFG;AADC;AADA,KAAV;AAQD,GAhBD;AAiBD,CArBD;;AAuBA,OAAA,CAAA,OAAA,GAAe,IAAf;;AAEA,IAAI,OAAO,MAAP,KAAkB,WAAtB,EAAmC;AACjC,EAAA,MAAM,CAAC,OAAP,GAAiB,MAAM,CAAC,MAAP,CAAc,IAAd,EAAoB,MAAM,CAAC,OAA3B,CAAjB;AACD","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.defaults = exports.defaultStorage = exports.hooks = exports.MemoryStorage = exports.AuthenticationClient = exports.getDefaultStorage = void 0;\nconst core_1 = require(\"./core\");\nObject.defineProperty(exports, \"AuthenticationClient\", { enumerable: true, get: function () { return core_1.AuthenticationClient; } });\nconst hooks = __importStar(require(\"./hooks\"));\nexports.hooks = hooks;\nconst storage_1 = require(\"./storage\");\nObject.defineProperty(exports, \"MemoryStorage\", { enumerable: true, get: function () { return storage_1.MemoryStorage; } });\nconst getDefaultStorage = () => {\n    try {\n        return new storage_1.StorageWrapper(window.localStorage);\n    }\n    catch (error) { }\n    return new storage_1.MemoryStorage();\n};\nexports.getDefaultStorage = getDefaultStorage;\nexports.defaultStorage = exports.getDefaultStorage();\nexports.defaults = {\n    header: 'Authorization',\n    scheme: 'Bearer',\n    storageKey: 'feathers-jwt',\n    locationKey: 'access_token',\n    locationErrorKey: 'error',\n    jwtStrategy: 'jwt',\n    path: '/authentication',\n    Authentication: core_1.AuthenticationClient,\n    storage: exports.defaultStorage\n};\nconst init = (_options = {}) => {\n    const options = Object.assign({}, exports.defaults, _options);\n    const { Authentication } = options;\n    return (app) => {\n        const authentication = new Authentication(app, options);\n        app.authentication = authentication;\n        app.authenticate = authentication.authenticate.bind(authentication);\n        app.reAuthenticate = authentication.reAuthenticate.bind(authentication);\n        app.logout = authentication.logout.bind(authentication);\n        app.hooks({\n            before: {\n                all: [\n                    hooks.authentication(),\n                    hooks.populateHeader()\n                ]\n            }\n        });\n    };\n};\nexports.default = init;\nif (typeof module !== 'undefined') {\n    module.exports = Object.assign(init, module.exports);\n}\n//# sourceMappingURL=index.js.map"]},"metadata":{},"sourceType":"script"}