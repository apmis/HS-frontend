{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport _defineProperty from \"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _objectSpread from \"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _asyncToGenerator from \"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _slicedToArray from \"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"/home/mfybaby/Documents/HealthStack2/HS-frontend/src/components/Laboratory/LabReport.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$();\n\n/* eslint-disable */\nimport React, { useState, useContext, useEffect, useRef } from 'react';\nimport client from '../../feathers';\nimport { DebounceInput } from 'react-debounce-input';\nimport { useForm } from \"react-hook-form\"; //import {useHistory} from 'react-router-dom'\n\nimport { UserContext, ObjectContext } from '../../context';\nimport { toast } from 'bulma-toast';\nimport { format, formatDistanceToNowStrict } from 'date-fns';\nimport ReportCreate from './ReportCreate';\nimport PatientProfile from '../ClientMgt/PatientProfile';\nimport LaboratoryReportForm from '../clientForm/forms/laboratoryReportForm';\n/* import {ProductCreate} from './Products' */\n// eslint-disable-next-line\n//const searchfacility={};\n\nimport { Accordion, AccordionItem, AccordionItemHeading, AccordionItemState, AccordionItemButton, AccordionItemPanel } from 'react-accessible-accordion'; // Demo styles, see 'Styles' section below for some notes on use.\n\nimport 'react-accessible-accordion/dist/fancy-example.css'; //import BillPrescriptionCreate from './BillPrescriptionCreate';\n\nexport default function LabReport() {\n  _s();\n\n  //const {state}=useContext(ObjectContext) //,setState\n  // eslint-disable-next-line\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      selectedProductEntry = _useState2[0],\n      setSelectedProductEntry = _useState2[1]; //const [showState,setShowState]=useState() //create|modify|detail\n\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      error = _useState4[0],\n      setError = _useState4[1]; // eslint-disable-next-line\n\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      success = _useState6[0],\n      setSuccess = _useState6[1]; // eslint-disable-next-line\n\n\n  var _useState7 = useState(\"\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      message = _useState8[0],\n      setMessage = _useState8[1];\n\n  var BillServ = client.service('bills'); //const history = useHistory()\n  // const {user,setUser} = useContext(UserContext)\n\n  var _useState9 = useState([]),\n      _useState10 = _slicedToArray(_useState9, 2),\n      facilities = _useState10[0],\n      setFacilities = _useState10[1]; // eslint-disable-next-line\n\n\n  var _useState11 = useState([]),\n      _useState12 = _slicedToArray(_useState11, 2),\n      selectedOrders = _useState12[0],\n      setSelectedOrders = _useState12[1]; //\n  // eslint-disable-next-line\n\n\n  var _useContext = useContext(ObjectContext),\n      state = _useContext.state,\n      setState = _useContext.setState; // eslint-disable-next-line\n\n\n  var _useContext2 = useContext(UserContext),\n      user = _useContext2.user,\n      setUser = _useContext2.setUser;\n\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: \"section remPadTop\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"columns \",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"column is-6 \",\n        children: /*#__PURE__*/_jsxDEV(LabOrderList, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"column is-6 \",\n        children: state.financeModule.show === 'detail' && /*#__PURE__*/_jsxDEV(LaboratoryReportForm, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 59\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 9\n  }, this);\n}\n\n_s(LabReport, \"Mk9XOkuYlZZ+sQgEtZDLm1YX/c0=\");\n\n_c = LabReport;\nexport function LabOrderList() {\n  _s2();\n\n  var _this = this;\n\n  // const { register, handleSubmit, watch, errors } = useForm();\n  // eslint-disable-next-line\n  var _useState13 = useState(false),\n      _useState14 = _slicedToArray(_useState13, 2),\n      error = _useState14[0],\n      setError = _useState14[1]; // eslint-disable-next-line\n\n\n  var _useState15 = useState(false),\n      _useState16 = _slicedToArray(_useState15, 2),\n      success = _useState16[0],\n      setSuccess = _useState16[1]; // eslint-disable-next-line\n\n\n  var _useState17 = useState(\"\"),\n      _useState18 = _slicedToArray(_useState17, 2),\n      message = _useState18[0],\n      setMessage = _useState18[1];\n\n  var BillServ = client.service('bills'); //const history = useHistory()\n  // const {user,setUser} = useContext(UserContext)\n\n  var _useState19 = useState([]),\n      _useState20 = _slicedToArray(_useState19, 2),\n      facilities = _useState20[0],\n      setFacilities = _useState20[1]; // eslint-disable-next-line\n\n\n  var _useState21 = useState(),\n      _useState22 = _slicedToArray(_useState21, 2),\n      selectedDispense = _useState22[0],\n      setSelectedDispense = _useState22[1]; //\n\n\n  var _useState23 = useState([]),\n      _useState24 = _slicedToArray(_useState23, 2),\n      selectedOrders = _useState24[0],\n      setSelectedOrders = _useState24[1]; // eslint-disable-next-line\n\n\n  var _useContext3 = useContext(ObjectContext),\n      state = _useContext3.state,\n      setState = _useContext3.setState; // eslint-disable-next-line\n\n\n  var _useContext4 = useContext(UserContext),\n      user = _useContext4.user,\n      setUser = _useContext4.setUser;\n\n  var _useState25 = useState(\"\"),\n      _useState26 = _slicedToArray(_useState25, 2),\n      selectedFinance = _useState26[0],\n      setSelectedFinance = _useState26[1];\n\n  var _useState27 = useState(\"\"),\n      _useState28 = _slicedToArray(_useState27, 2),\n      expanded = _useState28[0],\n      setExpanded = _useState28[1];\n\n  var _useState29 = useState(\"\"),\n      _useState30 = _slicedToArray(_useState29, 2),\n      oldClient = _useState30[0],\n      setOldClient = _useState30[1];\n\n  var handleSelectedClient = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(Client) {\n      var newClientModule;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              // await setSelectedClient(Client)\n              newClientModule = {\n                selectedClient: Client,\n                show: 'detail'\n              };\n              _context.next = 3;\n              return setState(function (prevstate) {\n                return _objectSpread(_objectSpread({}, prevstate), {}, {\n                  ClientModule: newClientModule\n                });\n              });\n\n            case 3:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function handleSelectedClient(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var handleChoseClient = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(client, e, order) {\n      var newClient, newProductEntryModule;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              setOldClient(client.clientname);\n              newClient = client.clientname;\n\n              if (oldClient !== newClient) {\n                //alert(\"New Client Onboard\")\n                //remove all checked clientsly\n                selectedOrders.forEach(function (el) {\n                  return el.checked = \"\";\n                });\n                setSelectedOrders([]);\n              } // console.log(e.target.checked)\n\n\n              order.checked = e.target.checked;\n              _context2.next = 6;\n              return handleSelectedClient(order.participantInfo.client);\n\n            case 6:\n              _context2.next = 8;\n              return setSelectedFinance(order);\n\n            case 8:\n              newProductEntryModule = {\n                selectedFinance: order,\n                show: 'detail',\n                state: e.target.checked\n              };\n              _context2.next = 11;\n              return setState(function (prevstate) {\n                return _objectSpread(_objectSpread({}, prevstate), {}, {\n                  financeModule: newProductEntryModule\n                });\n              });\n\n            case 11:\n              if (!e.target.checked) {\n                _context2.next = 16;\n                break;\n              }\n\n              _context2.next = 14;\n              return setSelectedOrders(function (prevstate) {\n                return prevstate.concat(order);\n              });\n\n            case 14:\n              _context2.next = 17;\n              break;\n\n            case 16:\n              setSelectedOrders(function (prevstate) {\n                return prevstate.filter(function (el) {\n                  return el._id !== order._id;\n                });\n              });\n\n            case 17:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function handleChoseClient(_x2, _x3, _x4) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var handleMedicationRow = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(order) {\n      var newProductEntryModule;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return handleSelectedClient(order.orderInfo.orderObj.client);\n\n            case 2:\n              _context3.next = 4;\n              return setSelectedFinance(order);\n\n            case 4:\n              // grab report\n              // if draft show create/modify\n              //if final: show final\n              console.log(order);\n              newProductEntryModule = {\n                selectedFinance: order,\n                show: 'detail',\n                report_status: order.report_status\n              };\n              _context3.next = 8;\n              return setState(function (prevstate) {\n                return _objectSpread(_objectSpread({}, prevstate), {}, {\n                  financeModule: newProductEntryModule\n                });\n              });\n\n            case 8:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function handleMedicationRow(_x5) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var handleSearch = function handleSearch(val) {\n    var _query;\n\n    var field = 'name'; //console.log(val)\n\n    BillServ.find({\n      query: (_query = {\n        'participantInfo.paymentmode.detail.principalName': {\n          $regex: val,\n          $options: 'i'\n        },\n\n        /*  $or:[\n             {\n        \n             } ,\n             {\n         'orderInfo.orderObj.clientname': {\n                     $regex:val,\n                     $options:'i'\n                 \n                 }\n             }\n             ], */\n        //order_category:\"Prescription\",\n        $or: [{\n          'participantInfo.paymentmode.type': \"Cash\"\n        }, {\n          'participantInfo.paymentmode.type': \"Family Cover\"\n        }]\n      }, _defineProperty(_query, \"$or\", [{\n        'orderInfo.orderObj.order_category': \"Lab Order\"\n      }, {\n        'orderInfo.orderObj.order_category': \"Laboratory\"\n      }]), _defineProperty(_query, 'participantInfo.billingFacility', user.currentEmployee.facilityDetail._id), _defineProperty(_query, \"billing_status\", \"Unpaid\"), _defineProperty(_query, \"$limit\", 20), _defineProperty(_query, \"$sort\", {\n        createdAt: -1\n      }), _query)\n    }).then(function (res) {\n      // console.log(res)\n      setFacilities(res.groupedOrder);\n      setMessage(\" ProductEntry  fetched successfully\");\n      setSuccess(true);\n    }).catch(function (err) {\n      // console.log(err)\n      setMessage(\"Error fetching ProductEntry, probable network issues \" + err);\n      setError(true);\n    });\n  };\n\n  var getFacilities = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n      var findProductEntry;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.next = 2;\n              return BillServ.find({\n                query: {\n                  $or: [{\n                    'orderInfo.orderObj.order_category': \"Lab Order\"\n                  }, {\n                    'orderInfo.orderObj.order_category': \"Laboratory\"\n                  }],\n                  'participantInfo.billingFacility': user.currentEmployee.facilityDetail._id,\n                  //'orderInfo.orderObj.order_category':\"Lab Order\",\n                  // billing_status:\"Unpaid\",  //need to set this finally\n                  //storeId:state.StoreModule.selectedStore._id,\n                  //clientId:state.ClientModule.selectedClient._id,\n                  $limit: 1000,\n                  $sort: {\n                    createdAt: -1\n                  }\n                }\n              });\n\n            case 2:\n              findProductEntry = _context4.sent;\n              console.log(\"lab bills\", findProductEntry.data);\n              _context4.next = 6;\n              return setFacilities(findProductEntry.data);\n\n            case 6:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n\n    return function getFacilities() {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  var handleRow = /*#__PURE__*/function () {\n    var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(Client, e) {\n      return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5);\n    }));\n\n    return function handleRow(_x6, _x7) {\n      return _ref5.apply(this, arguments);\n    };\n  }(); //1.consider using props for global data\n\n\n  useEffect(function () {\n    // console.log(\"started\")\n    getFacilities();\n    BillServ.on('created', function (obj) {\n      return getFacilities();\n    });\n    BillServ.on('updated', function (obj) {\n      return getFacilities();\n    });\n    BillServ.on('patched', function (obj) {\n      return getFacilities();\n    });\n    BillServ.on('removed', function (obj) {\n      return getFacilities();\n    });\n    return function () {};\n  }, []);\n  useEffect(function () {\n    return function () {};\n  }, [selectedOrders]);\n  useEffect(function () {\n    if (state.financeModule.show === \"create\") {\n      selectedOrders.forEach(function (el) {\n        return el.checked = \"\";\n      });\n      setSelectedOrders([]);\n    }\n\n    return function () {};\n  }, [state.financeModule.show]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"level\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"level-left\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"level-item\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"field\",\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"control has-icons-left  \",\n              children: [/*#__PURE__*/_jsxDEV(DebounceInput, {\n                className: \"input is-small \",\n                type: \"text\",\n                placeholder: \"Search Bills\",\n                minLength: 3,\n                debounceTimeout: 400,\n                onChange: function onChange(e) {\n                  return handleSearch(e.target.value);\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 295,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"icon is-small is-left\",\n                children: /*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fas fa-search\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 301,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 300,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 294,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 293,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 292,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 291,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"level-item\",\n        children: [\" \", /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"is-size-6 has-text-weight-medium\",\n          children: \"Laboratory test \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 307,\n          columnNumber: 50\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 307,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \" pullup \",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \" is-fullwidth vscrollable pr-1\",\n        children: /*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"table is-striped  is-hoverable is-fullwidth is-scrollable mr-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                children: /*#__PURE__*/_jsxDEV(\"abbr\", {\n                  title: \"Serial No\",\n                  children: \"S/No\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 320,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 320,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: /*#__PURE__*/_jsxDEV(\"abbr\", {\n                  title: \"Date\",\n                  children: \"Date\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 321,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 321,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: /*#__PURE__*/_jsxDEV(\"abbr\", {\n                  title: \"Client\",\n                  children: \"Client\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 322,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 322,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: /*#__PURE__*/_jsxDEV(\"abbr\", {\n                  title: \"Description\",\n                  children: \"Test\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 324,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 324,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: /*#__PURE__*/_jsxDEV(\"abbr\", {\n                  title: \"Amount\",\n                  children: \"Amount\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 325,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 325,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: /*#__PURE__*/_jsxDEV(\"abbr\", {\n                  title: \"Status\",\n                  children: \"Payment Status\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 327,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 327,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: /*#__PURE__*/_jsxDEV(\"abbr\", {\n                  title: \"Status\",\n                  children: \"Result Status\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 328,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 328,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 319,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 318,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: facilities.map(function (order, i) {\n              return /*#__PURE__*/_jsxDEV(\"tr\", {\n                onClick: function onClick() {\n                  return handleMedicationRow(order);\n                },\n                className: order._id === ((selectedFinance === null || selectedFinance === void 0 ? void 0 : selectedFinance._id) || null) ? \"is-selected\" : \"\",\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  children: i + 1\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 334,\n                  columnNumber: 33\n                }, _this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: format(new Date(order.createdAt), 'dd-MM-yy')\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 335,\n                    columnNumber: 37\n                  }, _this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 335,\n                  columnNumber: 33\n                }, _this), \"  \", /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: order.orderInfo.orderObj.clientname\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 336,\n                  columnNumber: 33\n                }, _this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: order.serviceInfo.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 337,\n                  columnNumber: 33\n                }, _this), \" \", /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: order.serviceInfo.amount\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 338,\n                  columnNumber: 33\n                }, _this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: order.billing_status\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 339,\n                  columnNumber: 33\n                }, _this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: order.report_status\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 340,\n                  columnNumber: 33\n                }, _this)]\n              }, order._id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 333,\n                columnNumber: 33\n              }, _this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 331,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 317,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 316,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 315,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true);\n}\n\n_s2(LabOrderList, \"KkMEvn9Bp8c06to8qXc/4BjEOOY=\");\n\n_c2 = LabOrderList;\nexport function LabNoteCreate() {\n  _s3();\n\n  var _useForm = useForm(),\n      register = _useForm.register,\n      handleSubmit = _useForm.handleSubmit,\n      setValue = _useForm.setValue; //, watch, errors, reset \n\n\n  var _useState31 = useState(false),\n      _useState32 = _slicedToArray(_useState31, 2),\n      error = _useState32[0],\n      setError = _useState32[1];\n\n  var _useState33 = useState(false),\n      _useState34 = _slicedToArray(_useState33, 2),\n      success = _useState34[0],\n      setSuccess = _useState34[1];\n\n  var _useState35 = useState(\"\"),\n      _useState36 = _slicedToArray(_useState35, 2),\n      message = _useState36[0],\n      setMessage = _useState36[1]; // eslint-disable-next-line\n\n\n  var _useState37 = useState(),\n      _useState38 = _slicedToArray(_useState37, 2),\n      facility = _useState38[0],\n      setFacility = _useState38[1]; //const ClientServ=client.service('labresults')\n  //const history = useHistory()\n\n\n  var _useContext5 = useContext(UserContext),\n      user = _useContext5.user; //,setUser\n  // eslint-disable-next-line\n\n\n  var _useState39 = useState(),\n      _useState40 = _slicedToArray(_useState39, 2),\n      currentUser = _useState40[0],\n      setCurrentUser = _useState40[1];\n\n  var _useContext6 = useContext(ObjectContext),\n      state = _useContext6.state,\n      setState = _useContext6.setState;\n\n  var _useState41 = useState(\"Draft\"),\n      _useState42 = _slicedToArray(_useState41, 2),\n      reportStatus = _useState42[0],\n      setReportStatus = _useState42[1];\n\n  var ClientServ = client.service('labresults');\n  var order = state.financeModule.selectedFinance;\n  var bill_report_status = state.financeModule.report_status;\n\n  var getSearchfacility = function getSearchfacility(obj) {\n    setValue(\"facility\", obj._id, {\n      shouldValidate: true,\n      shouldDirty: true\n    });\n  };\n\n  useEffect(function () {\n    setCurrentUser(user); //console.log(currentUser)\n\n    return function () {};\n  }, [user]);\n\n  var onSubmit = /*#__PURE__*/function () {\n    var _ref6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6(data, e) {\n      var document, newProductEntryModule;\n      return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n        while (1) {\n          switch (_context6.prev = _context6.next) {\n            case 0:\n              e.preventDefault();\n              setMessage(\"\");\n              setError(false);\n              setSuccess(false);\n              document = {}; // data.createdby=user._id\n              //  console.log(data);\n\n              if (user.currentEmployee) {\n                document.facility = user.currentEmployee.facilityDetail._id;\n                document.facilityname = user.currentEmployee.facilityDetail.facilityName; // or from facility dropdown\n              }\n\n              document.documentdetail = data;\n              document.documentname = \"\".concat(order.serviceInfo.name, \" Result\"); // document.documentClassId=state.DocumentClassModule.selectedDocumentClass._id\n\n              document.location = state.employeeLocation.locationName + \" \" + state.employeeLocation.locationType;\n              document.locationId = state.employeeLocation.locationId;\n              document.client = order.orderInfo.orderObj.clientId;\n              document.createdBy = user._id;\n              document.createdByname = user.firstname + \" \" + user.lastname;\n              document.status = reportStatus;\n              document.billId = order._id; //  console.log(document)\n              //  console.log(order)\n\n              if (!(document.location === undefined || !document.createdByname || !document.facilityname)) {\n                _context6.next = 18;\n                break;\n              }\n\n              toast({\n                message: ' Documentation data missing, requires location and facility details',\n                type: 'is-danger',\n                dismissible: true,\n                pauseOnHover: true\n              });\n              return _context6.abrupt(\"return\");\n\n            case 18:\n              if (bill_report_status === \"Pending\") {\n                ClientServ.create(document).then(function (res) {\n                  e.target.reset();\n                  setSuccess(true);\n                  toast({\n                    message: 'Lab Result created succesfully',\n                    type: 'is-success',\n                    dismissible: true,\n                    pauseOnHover: true\n                  });\n                  setSuccess(false);\n                }).catch(function (err) {\n                  toast({\n                    message: 'Error creating Lab Result ' + err,\n                    type: 'is-danger',\n                    dismissible: true,\n                    pauseOnHover: true\n                  });\n                });\n              }\n\n              if (bill_report_status === \"Draft\") {\n                ClientServ.patch(order.resultDetail._id, document).then(function (res) {\n                  e.target.reset();\n                  setSuccess(true);\n                  toast({\n                    message: 'Lab Result updated succesfully',\n                    type: 'is-success',\n                    dismissible: true,\n                    pauseOnHover: true\n                  });\n                  setSuccess(false);\n                }).catch(function (err) {\n                  toast({\n                    message: 'Error updating Lab Result ' + err,\n                    type: 'is-danger',\n                    dismissible: true,\n                    pauseOnHover: true\n                  });\n                });\n              }\n\n              newProductEntryModule = {\n                selectedFinance: order,\n                show: 'show' // report_status:order.report_status\n\n              };\n              _context6.next = 23;\n              return setState(function (prevstate) {\n                return _objectSpread(_objectSpread({}, prevstate), {}, {\n                  financeModule: newProductEntryModule\n                });\n              });\n\n            case 23:\n            case \"end\":\n              return _context6.stop();\n          }\n        }\n      }, _callee6);\n    }));\n\n    return function onSubmit(_x8, _x9) {\n      return _ref6.apply(this, arguments);\n    };\n  }();\n\n  var handleChangePart = /*#__PURE__*/function () {\n    var _ref7 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7(e) {\n      return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n        while (1) {\n          switch (_context7.prev = _context7.next) {\n            case 0:\n              console.log(e.target.value);\n              _context7.next = 3;\n              return setReportStatus(e.target.value);\n\n            case 3:\n            case \"end\":\n              return _context7.stop();\n          }\n        }\n      }, _callee7);\n    }));\n\n    return function handleChangePart(_x10) {\n      return _ref7.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    var _order$resultDetail;\n\n    if (!((_order$resultDetail = order.resultDetail) === null || _order$resultDetail === void 0 ? void 0 : _order$resultDetail.documentdetail)) {\n      setValue(\"Finding\", \"\", {\n        shouldValidate: true,\n        shouldDirty: true\n      });\n      setValue(\"Recommendation\", \"\", {\n        shouldValidate: true,\n        shouldDirty: true\n      }); // setReportStatus(order.report_status)\n\n      return;\n    }\n\n    if (order.report_status !== \"Pending\") {\n      console.log(order.resultDetail.documentdetail);\n      setValue(\"Finding\", order.resultDetail.documentdetail.Finding, {\n        shouldValidate: true,\n        shouldDirty: true\n      });\n      setValue(\"Recommendation\", order.resultDetail.documentdetail.Recommendation, {\n        shouldValidate: true,\n        shouldDirty: true\n      });\n      setReportStatus(order.report_status);\n    }\n\n    return function () {};\n  }, [order]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card \",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-header\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"card-header-title\",\n          children: \"Lab Result\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 525,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 524,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-content vscrollable remPad1\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"label is-size-7\",\n          children: [\"Client:  \", order.orderInfo.orderObj.clientname]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 531,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"label is-size-7\",\n          children: [\"Test:  \", order.serviceInfo.name]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 534,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleSubmit(onSubmit),\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"field is-horizontal\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"field-body\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"field\",\n                children: /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"control has-icons-left has-icons-right\",\n                  children: /*#__PURE__*/_jsxDEV(\"textarea\", {\n                    className: \"textarea is-small\",\n                    ref: register(),\n                    name: \"Finding\",\n                    type: \"text\",\n                    placeholder: \"Findings\",\n                    disabled: bill_report_status === \"Final\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 542,\n                    columnNumber: 29\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 541,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 540,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 539,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 538,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"field is-horizontal\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"field-body\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"field\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"control has-icons-left has-icons-right\",\n                  children: /*#__PURE__*/_jsxDEV(\"textarea\", {\n                    className: \"textarea is-small\",\n                    ref: register(),\n                    name: \"Recommendation\",\n                    type: \"text\",\n                    placeholder: \"Recommendation\",\n                    disabled: bill_report_status === \"Final\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 551,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 550,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 549,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 548,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 547,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"field\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \" is-small\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"radio\",\n                name: \"status\",\n                value: \"Draft\",\n                checked: reportStatus === \"Draft\" || reportStatus === \"Pending\",\n                onChange: function onChange(e) {\n                  handleChangePart(e);\n                },\n                disabled: bill_report_status === \"Final\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 558,\n                columnNumber: 30\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \" Draft\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 559,\n                columnNumber: 32\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 557,\n              columnNumber: 21\n            }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 560,\n              columnNumber: 40\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              className: \" is-small\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"radio\",\n                name: \"status\",\n                value: \"Final\",\n                checked: reportStatus === \"Final\",\n                onChange: function onChange(e) {\n                  return handleChangePart(e);\n                },\n                disabled: bill_report_status === \"Final\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 562,\n                columnNumber: 30\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \" Final \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 563,\n                columnNumber: 30\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 561,\n              columnNumber: 31\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 556,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"field  is-grouped mt-2\",\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"control\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"submit\",\n                className: \"button is-success is-small\",\n                disabled: bill_report_status === \"Final\",\n                children: bill_report_status === \"Pending\" ? \"Save\" : \"Update\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 568,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 567,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 566,\n            columnNumber: 14\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 537,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 529,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 523,\n      columnNumber: 13\n    }, this)\n  }, void 0, false);\n}\n\n_s3(LabNoteCreate, \"PZmeepqjyNZRYzl/yiqySGDw34o=\", false, function () {\n  return [useForm];\n});\n\n_c3 = LabNoteCreate;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"LabReport\");\n$RefreshReg$(_c2, \"LabOrderList\");\n$RefreshReg$(_c3, \"LabNoteCreate\");","map":{"version":3,"sources":["/home/mfybaby/Documents/HealthStack2/HS-frontend/src/components/Laboratory/LabReport.js"],"names":["React","useState","useContext","useEffect","useRef","client","DebounceInput","useForm","UserContext","ObjectContext","toast","format","formatDistanceToNowStrict","ReportCreate","PatientProfile","LaboratoryReportForm","Accordion","AccordionItem","AccordionItemHeading","AccordionItemState","AccordionItemButton","AccordionItemPanel","LabReport","selectedProductEntry","setSelectedProductEntry","error","setError","success","setSuccess","message","setMessage","BillServ","service","facilities","setFacilities","selectedOrders","setSelectedOrders","state","setState","user","setUser","financeModule","show","LabOrderList","selectedDispense","setSelectedDispense","selectedFinance","setSelectedFinance","expanded","setExpanded","oldClient","setOldClient","handleSelectedClient","Client","newClientModule","selectedClient","prevstate","ClientModule","handleChoseClient","e","order","clientname","newClient","forEach","el","checked","target","participantInfo","newProductEntryModule","concat","filter","_id","handleMedicationRow","orderInfo","orderObj","console","log","report_status","handleSearch","val","field","find","query","$regex","$options","$or","currentEmployee","facilityDetail","createdAt","then","res","groupedOrder","catch","err","getFacilities","$limit","$sort","findProductEntry","data","handleRow","on","obj","value","map","i","Date","serviceInfo","name","amount","billing_status","LabNoteCreate","register","handleSubmit","setValue","facility","setFacility","currentUser","setCurrentUser","reportStatus","setReportStatus","ClientServ","bill_report_status","getSearchfacility","shouldValidate","shouldDirty","onSubmit","preventDefault","document","facilityname","facilityName","documentdetail","documentname","location","employeeLocation","locationName","locationType","locationId","clientId","createdBy","createdByname","firstname","lastname","status","billId","undefined","type","dismissible","pauseOnHover","create","reset","patch","resultDetail","handleChangePart","Finding","Recommendation"],"mappings":"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","sourcesContent":["/* eslint-disable */\nimport React, {useState,useContext, useEffect,useRef} from 'react'\nimport client from '../../feathers'\nimport {DebounceInput} from 'react-debounce-input';\nimport { useForm } from \"react-hook-form\";\n//import {useHistory} from 'react-router-dom'\nimport {UserContext,ObjectContext} from '../../context'\nimport {toast} from 'bulma-toast'\nimport {format, formatDistanceToNowStrict } from 'date-fns'\nimport ReportCreate from './ReportCreate'\nimport PatientProfile from '../ClientMgt/PatientProfile'\nimport LaboratoryReportForm from '../clientForm/forms/laboratoryReportForm';\n/* import {ProductCreate} from './Products' */\n// eslint-disable-next-line\n//const searchfacility={};\nimport {\n    Accordion,\n    AccordionItem,\n    AccordionItemHeading,\n    AccordionItemState,\n    AccordionItemButton,\n    AccordionItemPanel,\n} from 'react-accessible-accordion';\n\n// Demo styles, see 'Styles' section below for some notes on use.\nimport 'react-accessible-accordion/dist/fancy-example.css';\n//import BillPrescriptionCreate from './BillPrescriptionCreate';\n\n\n\nexport default function LabReport() {\n    //const {state}=useContext(ObjectContext) //,setState\n    // eslint-disable-next-line\n    const [selectedProductEntry,setSelectedProductEntry]=useState()\n    //const [showState,setShowState]=useState() //create|modify|detail\n    const [error, setError] =useState(false)\n    // eslint-disable-next-line\n   const [success, setSuccess] =useState(false)\n    // eslint-disable-next-line\n  const [message, setMessage] = useState(\"\") \n   const BillServ=client.service('bills')\n   //const history = useHistory()\n  // const {user,setUser} = useContext(UserContext)\n   const [facilities,setFacilities]=useState([])\n    // eslint-disable-next-line\n  const [selectedOrders, setSelectedOrders]=useState([]) //\n   // eslint-disable-next-line\n   const {state,setState}=useContext(ObjectContext)\n   // eslint-disable-next-line\n   const {user,setUser}=useContext(UserContext)\n    \n    return(\n        <section className= \"section remPadTop\">\n           {/*  <div className=\"level\">\n            <div className=\"level-item\"> <span className=\"is-size-6 has-text-weight-medium\">ProductEntry  Module</span></div>\n            </div> */}\n            <div className=\"columns \">\n                <div className=\"column is-6 \">\n                    <LabOrderList />\n                    </div>\n              \n                <div className=\"column is-6 \">\n                \n                {(state.financeModule.show ==='detail')&& <LaboratoryReportForm /> }\n              {/*   {(state.financeModule.show ==='detail')&& <LabNoteCreate /> } */}\n                \n                </div>\n               {/*  <div className=\"column is-3 \"> <LabNoteCreate /> <ReportCreate />\n                \n                {(state.financeModule.show ==='detail')&&<PatientProfile />}\n                </div> */}\n\n            </div>                            \n            </section>\n       \n    )\n    \n}\n\nexport function LabOrderList(){\n   // const { register, handleSubmit, watch, errors } = useForm();\n    // eslint-disable-next-line\n    const [error, setError] =useState(false)\n     // eslint-disable-next-line\n    const [success, setSuccess] =useState(false)\n     // eslint-disable-next-line\n   const [message, setMessage] = useState(\"\") \n   const BillServ=client.service('bills')\n    //const history = useHistory()\n   // const {user,setUser} = useContext(UserContext)\n    const [facilities,setFacilities]=useState([])\n     // eslint-disable-next-line\n   const [selectedDispense, setSelectedDispense]=useState() //\n   const [selectedOrders, setSelectedOrders]=useState([]) \n    // eslint-disable-next-line\n    const {state,setState}=useContext(ObjectContext)\n    // eslint-disable-next-line\n    const {user,setUser}=useContext(UserContext)\n    const [selectedFinance, setSelectedFinance] =useState(\"\")\n    const [expanded, setExpanded] =useState(\"\")\n    const [oldClient, setOldClient] =useState(\"\")\n\n    const handleSelectedClient= async(Client)=>{\n        // await setSelectedClient(Client)\n         const    newClientModule={\n             selectedClient:Client,\n             show :'detail'\n         }\n        await setState((prevstate)=>({...prevstate, ClientModule:newClientModule}))\n     }\n\n    const handleChoseClient= async(client,e, order)=>{\n        setOldClient(client.clientname)\n        let newClient=client.clientname\n        if(oldClient!==newClient){\n            //alert(\"New Client Onboard\")\n            //remove all checked clientsly\n            selectedOrders.forEach(el=>el.checked=\"\")\n            setSelectedOrders([])\n        }\n\n       // console.log(e.target.checked)\n        order.checked=e.target.checked\n        await handleSelectedClient(order.participantInfo.client)\n        //handleMedicationRow(order)\n        await setSelectedFinance(order)\n        const    newProductEntryModule={\n            selectedFinance:order,\n            show :'detail',\n            state:e.target.checked\n        }\n      await setState((prevstate)=>({...prevstate, financeModule:newProductEntryModule}))\n      \n      //set of checked items\n      if (e.target.checked){\n        await setSelectedOrders((prevstate)=>(prevstate.concat(order)))\n      }else{\n        setSelectedOrders( prevstate=>prevstate.filter(el=>el._id!==order._id))\n      }\n    \n       // console.log(selectedOrders)\n    }\n    const handleMedicationRow= async(order)=>{\n        await handleSelectedClient(order.orderInfo.orderObj.client)\n        \n        await setSelectedFinance(order)\n        // grab report\n        // if draft show create/modify\n        //if final: show final\n       console.log(order)\n        const    newProductEntryModule={\n            selectedFinance:order,\n            show :'detail',\n            report_status:order.report_status\n           \n        }\n      await setState((prevstate)=>({...prevstate, financeModule:newProductEntryModule}))\n    \n    }\n\n   \n\n    const handleSearch=(val)=>{\n       const field='name'\n       //console.log(val)\n       BillServ.find({query: {\n        'participantInfo.paymentmode.detail.principalName': {\n            $regex:val,\n            $options:'i'\n        \n        },\n           /*  $or:[\n                {\n           \n                } ,\n                {\n            'orderInfo.orderObj.clientname': {\n                        $regex:val,\n                        $options:'i'\n                    \n                    }\n                }\n                ], */\n                \n                //order_category:\"Prescription\",\n             $or:[\n                    {\n                       'participantInfo.paymentmode.type':\"Cash\"\n                    },\n                    {\n                       'participantInfo.paymentmode.type':\"Family Cover\"\n                    }\n                ],\n               // 'orderInfo.orderObj.order_category':\"Lab Order\",\n               $or:[\n                {\n                   'orderInfo.orderObj.order_category':\"Lab Order\"\n                },\n                {\n                   'orderInfo.orderObj.order_category':\"Laboratory\"\n                }\n            ],                                                                                                                                       \n                'participantInfo.billingFacility': user.currentEmployee.facilityDetail._id,\n                billing_status:\"Unpaid\",  // need to set this finally\n               // storeId:state.StoreModule.selectedStore._id,\n               //facility:user.currentEmployee.facilityDetail._id || \"\",\n                $limit:20,\n                $sort: {\n                    createdAt: -1\n                  }\n                    }}).then((res)=>{\n               // console.log(res)\n               setFacilities(res.groupedOrder)\n                setMessage(\" ProductEntry  fetched successfully\")\n                setSuccess(true) \n            })\n            .catch((err)=>{\n               // console.log(err)\n                setMessage(\"Error fetching ProductEntry, probable network issues \"+ err )\n                setError(true)\n            })\n        }\n    const getFacilities= async()=>{\n       \n            // console.log(\"here b4 server\")\n    const findProductEntry= await BillServ.find(\n            {query: {\n                 $or:[\n                    {\n                       'orderInfo.orderObj.order_category':\"Lab Order\"\n                    },\n                    {\n                       'orderInfo.orderObj.order_category':\"Laboratory\"\n                    }\n                ], \n                'participantInfo.billingFacility': user.currentEmployee.facilityDetail._id,\n                //'orderInfo.orderObj.order_category':\"Lab Order\",\n               // billing_status:\"Unpaid\",  //need to set this finally\n                //storeId:state.StoreModule.selectedStore._id,\n                //clientId:state.ClientModule.selectedClient._id,\n                $limit:1000,\n                $sort: {\n                    createdAt: -1\n                }\n                }})\n\n         console.log(\"lab bills\", findProductEntry.data)\n            await setFacilities(findProductEntry.data)\n          //  await setState((prevstate)=>({...prevstate, currentClients:findProductEntry.groupedOrder}))\n            }   \n    const handleRow= async(Client,e)=>{\n           // alert(expanded)\n              \n            }\n    //1.consider using props for global data\n    useEffect(() => {\n        // console.log(\"started\")\n            getFacilities()\n            BillServ.on('created', (obj)=>getFacilities())\n            BillServ.on('updated', (obj)=>getFacilities())\n            BillServ.on('patched', (obj)=>getFacilities())\n            BillServ.on('removed', (obj)=>getFacilities())\n            return () => {\n            \n            }\n            },[])\n\n    useEffect(() => {\n      \n        return () => {\n            \n        }\n    }, [selectedOrders])\n\n    useEffect(() => {\n       if (state.financeModule.show===\"create\"){\n        selectedOrders.forEach(el=>el.checked=\"\")\n        setSelectedOrders([])\n\n       }\n        return () => {\n           \n        }\n    }, [state.financeModule.show])\n   \n \n\n    return(     \n            <>  \n                <div className=\"level\">\n                    <div className=\"level-left\">\n                        <div className=\"level-item\">\n                            <div className=\"field\">\n                                <p className=\"control has-icons-left  \">\n                                    <DebounceInput className=\"input is-small \" \n                                        type=\"text\" placeholder=\"Search Bills\"\n                                        minLength={3}\n                                        debounceTimeout={400}\n                                        onChange={(e)=>handleSearch(e.target.value)} />\n                                    <span className=\"icon is-small is-left\">\n                                        <i className=\"fas fa-search\"></i>\n                                    </span>\n                                </p>\n                            </div>\n                        </div>\n                    </div>\n                    <div className=\"level-item\"> <span className=\"is-size-6 has-text-weight-medium\">Laboratory test </span></div>\n                     {/* <div className=\"level-right\">\n                       <div className=\"level-item\"> \n                            <div className=\"level-item\"><div className=\"button is-success is-small\" onClick={handleCreateNew}>New</div></div>\n                        </div> \n                    </div>*/}\n\n                </div>\n                <div className=\" pullup \">\n                    <div className=\" is-fullwidth vscrollable pr-1\"> \n                    <table className=\"table is-striped  is-hoverable is-fullwidth is-scrollable mr-2\">\n                        <thead>\n                                <tr>\n                                    <th><abbr title=\"Serial No\">S/No</abbr></th>\n                                    <th><abbr title=\"Date\">Date</abbr></th>\n                                    <th><abbr title=\"Client\">Client</abbr></th>\n                                   {/*  <th><abbr title=\"Client\">Client</abbr></th> */}\n                                    <th><abbr title=\"Description\">Test</abbr></th>\n                                    <th><abbr title=\"Amount\">Amount</abbr></th>\n                                {/*  <th>Fulfilled</th> */}\n                                    <th><abbr title=\"Status\">Payment Status</abbr></th>\n                                    <th><abbr title=\"Status\">Result Status</abbr></th> \n                                </tr>\n                        </thead>\n                        <tbody>\n                            { facilities.map((order, i)=>(\n                                <tr key={order._id}  onClick={()=>handleMedicationRow(order)} className={order._id===(selectedFinance?._id||null)?\"is-selected\":\"\"}>                                         \n                                <th>{i+1}</th>\n                                <td><span>{format(new Date(order.createdAt),'dd-MM-yy')}</span></td>  {/* {formatDistanceToNowStrict(new Date(ProductEntry.createdAt),{addSuffix: true})} <br/> */} \n                                <th>{order.orderInfo.orderObj.clientname}</th>{/* client name */}\n                                <th>{order.serviceInfo.name}</th>{/* test name */} {/*  <td>{order.fulfilled===\"True\"?\"Yes\":\"No\"}</td> */}\n                                <td>{order.serviceInfo.amount}</td>\n                                <td>{order.billing_status}</td>\n                                <td>{order.report_status}</td>\n                                </tr>\n                            ))}\n                        </tbody>\n                    </table>\n                    \n                    </div>  \n                </div>\n            </>          \n    )\n}\n\nexport function LabNoteCreate(){\n    const { register, handleSubmit,setValue} = useForm(); //, watch, errors, reset \n    const [error, setError] =useState(false)\n    const [success, setSuccess] =useState(false)\n    const [message,setMessage] = useState(\"\")\n    // eslint-disable-next-line\n    const [facility,setFacility] = useState()\n    //const ClientServ=client.service('labresults')\n    //const history = useHistory()\n    const {user} = useContext(UserContext) //,setUser\n    // eslint-disable-next-line\n    const [currentUser,setCurrentUser] = useState()\n    const {state, setState}=useContext(ObjectContext)\n    const [reportStatus,setReportStatus] = useState(\"Draft\")\n    const ClientServ=client.service('labresults')\n    const order=state.financeModule.selectedFinance\n    const bill_report_status=state.financeModule.report_status\n\n    const getSearchfacility=(obj)=>{\n        setValue(\"facility\", obj._id,  {\n            shouldValidate: true,\n            shouldDirty: true\n        })\n    }\n    \n    useEffect(() => {\n        setCurrentUser(user)\n        //console.log(currentUser)\n        return () => {\n        \n        }\n    }, [user])\n\n \n\n    const onSubmit = async(data,e) =>{\n        e.preventDefault();\n        setMessage(\"\")\n        setError(false)\n        setSuccess(false)\n        let document={}\n         // data.createdby=user._id\n        //  console.log(data);\n          if (user.currentEmployee){\n          document.facility=user.currentEmployee.facilityDetail._id \n          document.facilityname=user.currentEmployee.facilityDetail.facilityName // or from facility dropdown\n          }\n         document.documentdetail=data\n          document.documentname= `${order.serviceInfo.name} Result`\n         // document.documentClassId=state.DocumentClassModule.selectedDocumentClass._id\n          document.location=state.employeeLocation.locationName +\" \"+ state.employeeLocation.locationType\n          document.locationId=state.employeeLocation.locationId\n          document.client=order.orderInfo.orderObj.clientId\n          document.createdBy=user._id\n          document.createdByname=user.firstname+ \" \"+user.lastname\n          document.status=reportStatus\n          document.billId=order._id\n        //  console.log(document)\n        //  console.log(order)\n\n          if (\n            document.location===undefined ||!document.createdByname || !document.facilityname ){\n            toast({\n                message: ' Documentation data missing, requires location and facility details' ,\n                type: 'is-danger',\n                dismissible: true,\n                pauseOnHover: true,\n              })\n              return\n          }\n\n        if (bill_report_status===\"Pending\"){\n            ClientServ.create(document)\n            .then((res)=>{\n                  \n                    e.target.reset();\n                  \n                    setSuccess(true)\n                    toast({\n                        message: 'Lab Result created succesfully',\n                        type: 'is-success',\n                        dismissible: true,\n                        pauseOnHover: true,\n                      })\n                      setSuccess(false)\n                })\n                .catch((err)=>{\n                    toast({\n                        message: 'Error creating Lab Result ' + err,\n                        type: 'is-danger',\n                        dismissible: true,\n                        pauseOnHover: true,\n                      })\n                })  \n        }\n\n        if (bill_report_status===\"Draft\"){\n         ClientServ.patch(order.resultDetail._id, document)\n        .then((res)=>{\n              \n                e.target.reset();\n              \n                setSuccess(true)\n                toast({\n                    message: 'Lab Result updated succesfully',\n                    type: 'is-success',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  })\n                  setSuccess(false)\n            })\n            .catch((err)=>{\n                toast({\n                    message: 'Error updating Lab Result ' + err,\n                    type: 'is-danger',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  })\n            }) \n        }\n        const    newProductEntryModule={\n            selectedFinance:order,\n            show :'show',\n           // report_status:order.report_status\n           \n        }\n      await setState((prevstate)=>({...prevstate, financeModule:newProductEntryModule}))\n      } \n\n    const handleChangePart=async (e)=>{\n        console.log(e.target.value)\n        await setReportStatus(e.target.value)\n\n    }\n\n    useEffect(() => {\n        if (!order.resultDetail?.documentdetail ){\n            setValue(\"Finding\", \"\",  {\n                shouldValidate: true,\n                shouldDirty: true\n            })\n            setValue(\"Recommendation\",\"\",  {\n                shouldValidate: true,\n                shouldDirty: true\n            })\n           // setReportStatus(order.report_status)\n           \n            return\n\n        }\n        if (order.report_status !==\"Pending\"){\n            console.log(order.resultDetail.documentdetail)\n\n        setValue(\"Finding\", order.resultDetail.documentdetail.Finding,  {\n            shouldValidate: true,\n            shouldDirty: true\n        })\n        setValue(\"Recommendation\", order.resultDetail.documentdetail.Recommendation,  {\n            shouldValidate: true,\n            shouldDirty: true\n        })\n        setReportStatus(order.report_status)\n    }\n        \n        return () => {\n            \n        }\n    }, [order])\n\n    return (\n        <>\n            <div className=\"card \">\n            <div className=\"card-header\">\n                <p className=\"card-header-title\">\n                    Lab Result\n                </p>\n            </div>\n            <div className=\"card-content vscrollable remPad1\">\n\n                <label className=\"label is-size-7\">\n                  Client:  {order.orderInfo.orderObj.clientname}\n                </label>\n                <label className=\"label is-size-7\">\n                 Test:  {order.serviceInfo.name}\n                </label>\n            <form onSubmit={handleSubmit(onSubmit)}>\n            <div className=\"field is-horizontal\">\n                <div className=\"field-body\">\n                    <div className=\"field\">\n                        <p className=\"control has-icons-left has-icons-right\">\n                            <textarea className=\"textarea is-small\" ref={register()}  name=\"Finding\" type=\"text\" placeholder=\"Findings\" disabled={bill_report_status===\"Final\"}/>                 \n                        </p>\n                    </div>\n                    </div>\n                    </div>\n            <div className=\"field is-horizontal\">\n                <div className=\"field-body\">\n                    <div className=\"field\">\n                        <div className=\"control has-icons-left has-icons-right\">\n                        <textarea className=\"textarea is-small\" ref={register()}  name=\"Recommendation\" type=\"text\" placeholder=\"Recommendation\" disabled={bill_report_status===\"Final\"}/>\n                        </div>\n                    </div>\n                    </div>\n                    </div>\n                    <div className=\"field\">\n                    <label className=\" is-small\">\n                             <input  type=\"radio\" name=\"status\" value=\"Draft\"   checked={reportStatus===\"Draft\"||reportStatus===\"Pending\"} onChange={(e)=>{handleChangePart(e)}} disabled={bill_report_status===\"Final\"}/>\n                               <span > Draft</span>\n                              </label> <br/>\n                              <label className=\" is-small\">\n                             <input type=\"radio\" name=\"status\"  value=\"Final\"   checked={reportStatus===\"Final\"} onChange={(e)=>handleChangePart(e)} disabled={bill_report_status===\"Final\"}/>\n                             <span> Final </span>\n                              </label>\n                              </div> \n             <div className=\"field  is-grouped mt-2\" >\n                <p className=\"control\">\n                    <button type=\"submit\" className=\"button is-success is-small\" disabled={bill_report_status===\"Final\"} >\n                    {bill_report_status===\"Pending\"? \"Save\":\"Update\"}\n                    </button>\n                </p>\n               {/*  <p className=\"control\">\n                    <button className=\"button is-warning is-small\" onClick={(e)=>e.target.reset()}>\n                        Cancel\n                    </button>\n                </p> */}\n               \n            </div>\n     \n            </form>\n            </div>\n            </div>\n                 \n        </>\n    )\n   \n}\n\n"]},"metadata":{},"sourceType":"module"}