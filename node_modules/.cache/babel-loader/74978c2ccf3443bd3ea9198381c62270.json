{"ast":null,"code":"import _defineProperty from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _toConsumableArray from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import _regeneratorRuntime from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _slicedToArray from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";/* eslint-disable */import React,{useState,useContext,useEffect,useRef,useMemo}from'react';import client from'../../feathers';import{DebounceInput}from'react-debounce-input';import{useForm}from\"react-hook-form\";//import {useHistory} from 'react-router-dom'\nimport{UserContext,ObjectContext}from'../../context';import FacilityPopup from'../helpers/FacilityPopup';import{toast}from'bulma-toast';import{format,formatDistanceToNowStrict}from'date-fns';/* import {ProductCreate} from './Products' */ // eslint-disable-next-line\nvar searchfacility={};export default function Prescription(){var _useContext=useContext(ObjectContext),state=_useContext.state;//,setState\n// eslint-disable-next-line\nvar _useState=useState(),_useState2=_slicedToArray(_useState,2),selectedProductEntry=_useState2[0],setSelectedProductEntry=_useState2[1];//const [showState,setShowState]=useState() //create|modify|detail\nreturn/*#__PURE__*/_jsx(\"section\",{className:\"section remPadTop\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"columns \",children:[/*#__PURE__*/_jsx(\"div\",{className:\"column is-6 \",children:/*#__PURE__*/_jsx(PrescriptionList,{})}),/*#__PURE__*/_jsx(\"div\",{className:\"column is-6 \",children:state.OrderModule.show==='create'&&/*#__PURE__*/_jsx(PrescriptionCreate,{})})]})});}export function PrescriptionCreate(){// const { register, handleSubmit,setValue} = useForm(); //, watch, errors, reset \nvar _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),success=_useState6[0],setSuccess=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),message=_useState8[0],setMessage=_useState8[1];// eslint-disable-next-line\nvar _useState9=useState(),_useState10=_slicedToArray(_useState9,2),facility=_useState10[0],setFacility=_useState10[1];var ProductEntryServ=client.service('productentry');//const history = useHistory()\nvar _useContext2=useContext(UserContext),user=_useContext2.user;//,setUser\n// eslint-disable-next-line\nvar _useState11=useState(),_useState12=_slicedToArray(_useState11,2),currentUser=_useState12[0],setCurrentUser=_useState12[1];var _useState13=useState(\"Purchase Invoice\"),_useState14=_slicedToArray(_useState13,2),type=_useState14[0],setType=_useState14[1];var _useState15=useState(\"\"),_useState16=_slicedToArray(_useState15,2),documentNo=_useState16[0],setDocumentNo=_useState16[1];var _useState17=useState(\"\"),_useState18=_slicedToArray(_useState17,2),totalamount=_useState18[0],setTotalamount=_useState18[1];var _useState19=useState(\"\"),_useState20=_slicedToArray(_useState19,2),productId=_useState20[0],setProductId=_useState20[1];var _useState21=useState(\"\"),_useState22=_slicedToArray(_useState21,2),source=_useState22[0],setSource=_useState22[1];var _useState23=useState(\"\"),_useState24=_slicedToArray(_useState23,2),date=_useState24[0],setDate=_useState24[1];var _useState25=useState(\"\"),_useState26=_slicedToArray(_useState25,2),name=_useState26[0],setName=_useState26[1];var _useState27=useState(''),_useState28=_slicedToArray(_useState27,2),destination=_useState28[0],setDestination=_useState28[1];var _useState29=useState(''),_useState30=_slicedToArray(_useState29,2),destinationId=_useState30[0],setDestinationId=_useState30[1];var _useState31=useState(false),_useState32=_slicedToArray(_useState31,2),destinationModal=_useState32[0],setDestinationModal=_useState32[1];var _useState33=useState(),_useState34=_slicedToArray(_useState33,2),medication=_useState34[0],setMedication=_useState34[1];var _useState35=useState(),_useState36=_slicedToArray(_useState35,2),instruction=_useState36[0],setInstruction=_useState36[1];var _useState37=useState([]),_useState38=_slicedToArray(_useState37,2),productItem=_useState38[0],setProductItem=_useState38[1];var _useContext3=useContext(ObjectContext),state=_useContext3.state;var ClientServ=client.service('clinicaldocument');var _useState39=useState({productitems:[],date:date,documentNo:documentNo,type:type,totalamount:totalamount,source:source}),_useState40=_slicedToArray(_useState39,2),productEntry=_useState40[0],setProductEntry=_useState40[1];var handlecloseModal=function handlecloseModal(){setDestinationModal(false);//handleSearch(val)\n};var productItemI={/*   productId,\n        name, */medication:medication,destination:destination,instruction:instruction,destinationId:destinationId/* costprice,\n        amount:quantity*costprice,\n        baseunit */};// consider batchformat{batchno,expirydate,qtty,baseunit}\n//consider baseunoit conversions\nvar getSearchfacility=function getSearchfacility(obj){setInstruction(obj.instruction);setMedication(obj.medication);if(!obj){//\"clear stuff\"\nsetInstruction(\"\");setMedication(\"\");}// setBaseunit(obj.baseunit)\n/*  setValue(\"facility\", obj._id,  {\n            shouldValidate: true,\n            shouldDirty: true\n        }) */};useEffect(function(){setCurrentUser(user);//console.log(currentUser)\nreturn function(){};},[user]);/*  useEffect(() => {\n        setProductItem(\n            prevProd=>prevProd.concat(productItemI)\n        )\n        console.log(productItem)\n        return () => {\n            \n        }\n    },[productItemI])\n */useEffect(function(){setDestination(state.DestinationModule.selectedDestination.facilityName);setDestinationId(state.DestinationModule.selectedDestination._id);return function(){};},[state.DestinationModule.selectedDestination]);var handleChangeType=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return setType(e.target.value);case 2:case\"end\":return _context.stop();}}},_callee);}));return function handleChangeType(_x){return _ref.apply(this,arguments);};}();var handleClickProd=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return setSuccess(false);case 2:if(productItemI.medication&&productItemI.medication.length>0){_context2.next=5;break;}toast({message:'medication can not be empty ',type:'is-danger',dismissible:true,pauseOnHover:true});return _context2.abrupt(\"return\");case 5:_context2.next=7;return setProductItem(function(prevProd){return prevProd.concat(productItemI);});case 7:setName(\"\");setMedication(\"\");setInstruction(\"\");setDestination(user.currentEmployee.facilityDetail.facilityName);setDestinationId(user.currentEmployee.facilityDetail._id);// setDestination(\"\")\n_context2.next=14;return setSuccess(true);case 14:console.log(success);console.log(productItem);case 16:case\"end\":return _context2.stop();}}},_callee2);}));return function handleClickProd(){return _ref2.apply(this,arguments);};}();//check user for facility or get list of facility  \n/*  useEffect(()=>{\n        //setFacility(user.activeProductEntry.FacilityId)//\n      if (!user.stacker){\n          console.log(currentUser)\n           /* setValue(\"facility\", user.currentEmployee.facilityDetail._id,  {\n            shouldValidate: true,\n            shouldDirty: true\n        })  \n\n      }\n    }) */var handleChangeDestination=function handleChangeDestination(){setDestinationModal(true);};var resetform=function resetform(){setType(\"Purchase Invoice\");setDocumentNo(\"\");setTotalamount(\"\");setProductId(\"\");setSource(\"\");setDate(\"\");setName(\"\");setMedication(\"\");setInstruction(\"\");setProductItem([]);};var onSubmit=function onSubmit(){//data,e\n// e.preventDefault();\nsetMessage(\"\");setError(false);setSuccess(false);//write document\nvar document={};// data.createdby=user._id\n// console.log(data);\nif(user.currentEmployee){document.facility=user.currentEmployee.facilityDetail._id;document.facilityname=user.currentEmployee.facilityDetail.facilityName;// or from facility dropdown\n}document.documentdetail=productItem;console.log(document.documentdetail);document.documentname=\"Prescription\";//state.DocumentClassModule.selectedDocumentClass.name\n// document.documentClassId=state.DocumentClassModule.selectedDocumentClass._id\ndocument.location=state.employeeLocation.locationName+\" \"+state.employeeLocation.locationType;document.locationId=state.employeeLocation.locationId;document.client=state.ClientModule.selectedClient._id;document.clientname=state.ClientModule.selectedClient.firstname+\" \"+state.ClientModule.selectedClient.middlename+\" \"+state.ClientModule.selectedClient.lastname;document.clientobj=state.ClientModule.selectedClient;document.createdBy=user._id;document.createdByname=user.firstname+\" \"+user.lastname;document.status=\"completed\";console.log(document);ClientServ.create(document).then(function(res){//console.log(JSON.stringify(res))\n// e.target.reset();\n/*  setMessage(\"Created Client successfully\") */setSuccess(true);toast({message:'Presciption created succesfully',type:'is-success',dismissible:true,pauseOnHover:true});setSuccess(false);setProductItem([]);}).catch(function(err){toast({message:'Error creating Prescription '+err,type:'is-danger',dismissible:true,pauseOnHover:true});});};useEffect(function(){setDestination(user.currentEmployee.facilityDetail.facilityName);setDestinationId(user.currentEmployee.facilityDetail._id);return function(){};},[]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card card-overflow\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsx(\"p\",{className:\"card-header-title\",children:\"Create Prescription\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-content \",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-small\",children:\"Add Medication:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field-body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"field is-expanded\"/* style={ !user.stacker?{display:\"none\"}:{}} */,children:[/*#__PURE__*/_jsx(MedicationHelperSearch,{getSearchfacility:getSearchfacility,clear:success}),/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left \",style:{display:\"none\"},children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\"/* ref={register ({ required: true }) }  */,value:medication,name:\"medication\",type:\"text\",onChange:function onChange(e){return setMedication(e.target.value);},placeholder:\"medication\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas  fa-map-marker-alt\"})})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsx(\"p\",{className:\"control\",children:/*#__PURE__*/_jsx(\"button\",{className:\"button is-info is-small  is-pulled-right\",children:/*#__PURE__*/_jsx(\"span\",{className:\"is-small\",onClick:handleClickProd,children:\" +\"})})})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field-body\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\"/* ref={register({ required: true })} */,name:\"instruction\",value:instruction,type:\"text\",onChange:function onChange(e){return setInstruction(e.target.value);},placeholder:\"Instructions/Note\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-envelope\"})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small \",disabled:true/* ref={register({ required: true })} */,name:\"destination\",value:destination===user.currentEmployee.facilityDetail.facilityName?\"In-house\":destination,type:\"text\",onChange:function onChange(e){return setDestination(e.target.value);},placeholder:\"Destination Pharmacy\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-envelope\"})})]}),/*#__PURE__*/_jsx(\"button\",{className:\"button is-small is-success btnheight\",onClick:handleChangeDestination,children:\"Change\"})]})]})}),productItem.length>0&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7\",children:\"Medications:\"}),/*#__PURE__*/_jsxs(\"table\",{className:\"table is-striped  is-hoverable is-fullwidth is-scrollable \",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Serial No\",children:\"S/No\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Medication\",children:\"Medication\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Destination\",children:\"Destination\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Actions\",children:\"Actions\"})})]})}),/*#__PURE__*/_jsx(\"tfoot\",{}),/*#__PURE__*/_jsx(\"tbody\",{children:productItem.map(function(ProductEntry,i){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:i+1}),/*#__PURE__*/_jsxs(\"td\",{children:[ProductEntry.medication,/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"span\",{className:\"help\",children:ProductEntry.instruction})]}),/*#__PURE__*/_jsx(\"td\",{children:ProductEntry.destination===user.currentEmployee.facilityDetail.facilityName?\"In-house\":ProductEntry.destination}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"showAction\",children:\"x\"})})]},i);})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"field mt-2\",children:/*#__PURE__*/_jsx(\"p\",{className:\"control\",children:/*#__PURE__*/_jsx(\"button\",{className:\"button is-success is-small\",disabled:!productItem.length>0,onClick:onSubmit,children:\"Create\"})})})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal \".concat(destinationModal?\"is-active\":\"\"),children:[/*#__PURE__*/_jsx(\"div\",{className:\"modal-background\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-card\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"modal-card-head\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"modal-card-title\",children:\"Choose Destination\"}),/*#__PURE__*/_jsx(\"button\",{className:\"delete\",\"aria-label\":\"close\",onClick:handlecloseModal})]}),/*#__PURE__*/_jsx(\"section\",{className:\"modal-card-body\",children:/*#__PURE__*/_jsx(FacilityPopup,{facilityType:\"Pharmacy\",closeModal:handlecloseModal})})]})]})]});}export function PrescriptionList(_ref3){var standalone=_ref3.standalone;// const { register, handleSubmit, watch, errors } = useForm();\n// eslint-disable-next-line\nvar _useState41=useState(false),_useState42=_slicedToArray(_useState41,2),error=_useState42[0],setError=_useState42[1];// eslint-disable-next-line\nvar _useState43=useState(false),_useState44=_slicedToArray(_useState43,2),success=_useState44[0],setSuccess=_useState44[1];// eslint-disable-next-line\nvar _useState45=useState(\"\"),_useState46=_slicedToArray(_useState45,2),message=_useState46[0],setMessage=_useState46[1];var OrderServ=client.service('order');//const history = useHistory()\n// const {user,setUser} = useContext(UserContext)\nvar _useState47=useState([]),_useState48=_slicedToArray(_useState47,2),facilities=_useState48[0],setFacilities=_useState48[1];// eslint-disable-next-line\nvar _useState49=useState(),_useState50=_slicedToArray(_useState49,2),selectedOrder=_useState50[0],setSelectedOrder=_useState50[1];//\n// eslint-disable-next-line\nvar _useContext4=useContext(ObjectContext),state=_useContext4.state,setState=_useContext4.setState;// eslint-disable-next-line\nvar _useContext5=useContext(UserContext),user=_useContext5.user,setUser=_useContext5.setUser;var handleCreateNew=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var newProductEntryModule;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:newProductEntryModule={selectedOrder:{},show:'create'};_context3.next=3;return setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{OrderModule:newProductEntryModule});});case 3:case\"end\":return _context3.stop();}}},_callee3);}));return function handleCreateNew(){return _ref4.apply(this,arguments);};}();var handleDelete=function handleDelete(doc){// console.log(doc)\nvar confirm=window.confirm(\"You are about to delete the prescription: \".concat(doc.order,\"?\"));if(confirm){OrderServ.remove(doc._id).then(function(res){toast({message:'Prescription deleted succesfully',type:'is-success',dismissible:true,pauseOnHover:true});setSuccess(false);}).catch(function(err){toast({message:'Error deleting Prescription'+err,type:'is-danger',dismissible:true,pauseOnHover:true});});}};var handleRow=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(ProductEntry){var newProductEntryModule;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(standalone){_context4.next=6;break;}_context4.next=3;return setSelectedOrder(ProductEntry);case 3:newProductEntryModule={selectedOrder:ProductEntry,show:'detail'};_context4.next=6;return setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{OrderModule:newProductEntryModule});});case 6:case\"end\":return _context4.stop();}}},_callee4);}));return function handleRow(_x2){return _ref5.apply(this,arguments);};}();var handleSearch=function handleSearch(val){var field='name';console.log(val);OrderServ.find({query:{$or:[{order:{$regex:val,$options:'i'}},{order_status:{$regex:val,$options:'i'}}],order_category:\"Prescription\",// storeId:state.StoreModule.selectedStore._id,\n//facility:user.currentEmployee.facilityDetail._id || \"\",\n$limit:10,$sort:{createdAt:-1}}}).then(function(res){console.log(res);setFacilities(res.data);setMessage(\" ProductEntry  fetched successfully\");setSuccess(true);}).catch(function(err){console.log(err);setMessage(\"Error fetching ProductEntry, probable network issues \"+err);setError(true);});};var getFacilities=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){var findProductEntry;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:console.log(\"here b4 server\");console.log(state.ClientModule.selectedClient._id);_context5.next=4;return OrderServ.find({query:{order_category:\"Prescription\",//destination: user.currentEmployee.facilityDetail._id,\n//storeId:state.StoreModule.selectedStore._id,\nclientId:state.ClientModule.selectedClient._id,$limit:20,$sort:{createdAt:-1}}});case 4:findProductEntry=_context5.sent;_context5.next=7;return setFacilities(findProductEntry.data);case 7:case\"end\":return _context5.stop();}}},_callee5);}));return function getFacilities(){return _ref6.apply(this,arguments);};}();useEffect(function(){console.log(\"started\");getFacilities();OrderServ.on('created',function(obj){return getFacilities();});OrderServ.on('updated',function(obj){return getFacilities();});OrderServ.on('patched',function(obj){return getFacilities();});OrderServ.on('removed',function(obj){return getFacilities();});return function(){};},[]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"level\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"level-left\",children:/*#__PURE__*/_jsx(\"div\",{className:\"level-item\",children:/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left  \",children:[/*#__PURE__*/_jsx(DebounceInput,{className:\"input is-small \",type:\"text\",placeholder:\"Search Medications\",minLength:3,debounceTimeout:400,onChange:function onChange(e){return handleSearch(e.target.value);}}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-search\"})})]})})})}),!standalone&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"level-item\",children:[\" \",/*#__PURE__*/_jsx(\"span\",{className:\"is-size-6 has-text-weight-medium\",children:\"List of Prescriptions \"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"level-right\",children:/*#__PURE__*/_jsx(\"div\",{className:\"level-item\",children:/*#__PURE__*/_jsx(\"div\",{className:\"level-item\",children:/*#__PURE__*/_jsx(\"div\",{className:\"button is-success is-small\",onClick:handleCreateNew,children:\"New\"})})})})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"table-container pullup \",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table is-striped is-narrow is-hoverable is-fullwidth is-scrollable \",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Serial No\",children:\"S/No\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Date\",children:\"Date\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Order\",children:\"Medication\"})}),/*#__PURE__*/_jsx(\"th\",{children:\"Fulfilled\"}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Status\",children:\"Status\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Requesting Physician\",children:\"Requesting Physician\"})}),!standalone&&/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Actions\",children:\"Actions\"})})]})}),/*#__PURE__*/_jsx(\"tfoot\",{}),/*#__PURE__*/_jsx(\"tbody\",{children:facilities.map(function(ProductEntry,i){return/*#__PURE__*/_jsxs(\"tr\",{/* onClick={()=>handleRow(ProductEntry)} */className:ProductEntry._id===((selectedOrder===null||selectedOrder===void 0?void 0:selectedOrder._id)||null)?\"is-selected\":\"\",children:[/*#__PURE__*/_jsx(\"th\",{children:i+1}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{children:format(new Date(ProductEntry.createdAt),'dd-MM-yy')})}),/*#__PURE__*/_jsx(\"th\",{children:ProductEntry.order}),/*#__PURE__*/_jsx(\"td\",{children:ProductEntry.fulfilled===\"True\"?\"Yes\":\"No\"}),/*#__PURE__*/_jsx(\"td\",{children:ProductEntry.order_status}),/*#__PURE__*/_jsx(\"td\",{children:ProductEntry.requestingdoctor_Name}),!standalone&&/*#__PURE__*/_jsxs(\"td\",{children:[\"  \",/*#__PURE__*/_jsx(\"button\",{className:\"button  sbut\",\"aria-label\":\"more options\",onClick:function onClick(){return handleDelete(ProductEntry);},children:/*#__PURE__*/_jsx(\"span\",{children:\"x\"})}),\" \",\" \"]})]},ProductEntry._id);})})]})})]});}export function DrugAdminList(_ref7){var standalone=_ref7.standalone;// const { register, handleSubmit, watch, errors } = useForm();\n// eslint-disable-next-line\nvar _useState51=useState(false),_useState52=_slicedToArray(_useState51,2),error=_useState52[0],setError=_useState52[1];// eslint-disable-next-line\nvar _useState53=useState(false),_useState54=_slicedToArray(_useState53,2),success=_useState54[0],setSuccess=_useState54[1];var _useState55=useState(false),_useState56=_slicedToArray(_useState55,2),hxModal=_useState56[0],setHxModal=_useState56[1];var _useState57=useState(false),_useState58=_slicedToArray(_useState57,2),currentMed=_useState58[0],setCurrentMed=_useState58[1];// eslint-disable-next-line\nvar _useState59=useState(\"\"),_useState60=_slicedToArray(_useState59,2),message=_useState60[0],setMessage=_useState60[1];var OrderServ=client.service('order');//const history = useHistory()\n// const {user,setUser} = useContext(UserContext)\nvar _useState61=useState([]),_useState62=_slicedToArray(_useState61,2),facilities=_useState62[0],setFacilities=_useState62[1];// eslint-disable-next-line\nvar _useState63=useState(),_useState64=_slicedToArray(_useState63,2),selectedOrder=_useState64[0],setSelectedOrder=_useState64[1];//\n// eslint-disable-next-line\nvar _useContext6=useContext(ObjectContext),state=_useContext6.state,setState=_useContext6.setState;// eslint-disable-next-line\nvar _useContext7=useContext(UserContext),user=_useContext7.user,setUser=_useContext7.setUser;var refs=useMemo(function(){return facilities.map(function(){return/*#__PURE__*/React.createRef();});},[facilities]);var ClientServ=client.service('clinicaldocument');var handleCreateNew=/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(){var newProductEntryModule;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:newProductEntryModule={selectedOrder:{},show:'create'};_context6.next=3;return setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{OrderModule:newProductEntryModule});});case 3:case\"end\":return _context6.stop();}}},_callee6);}));return function handleCreateNew(){return _ref8.apply(this,arguments);};}();var handleHistory=/*#__PURE__*/function(){var _ref9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(medication,i){return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:setHxModal(true);setCurrentMed(medication);case 2:case\"end\":return _context7.stop();}}},_callee7);}));return function handleHistory(_x3,_x4){return _ref9.apply(this,arguments);};}();var handlecloseModal1=/*#__PURE__*/function(){var _ref10=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(){return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:setHxModal(false);case 1:case\"end\":return _context8.stop();}}},_callee8);}));return function handlecloseModal1(){return _ref10.apply(this,arguments);};}();var handleAdminister=function handleAdminister(medication,i){var confirm=window.confirm(\"You are about to administer a dose of \".concat(medication.order,\" for \").concat(state.ClientModule.selectedClient.firstname+\" \"+state.ClientModule.selectedClient.middlename+\" \"+state.ClientModule.selectedClient.lastname,\" ?\"));if(confirm){//update the medication\nconsole.log(\"order\",medication);medication.treatment_status=\"Active\";var treatment_action={actorname:user.firstname+\" \"+user.lastname,actorId:user._id,order_id:medication._id,action:\"Administered\",comments:refs[i].current.value,createdat:new Date().toLocaleString(),description:\"Administered current dose of \"+medication.order+\" \"+user.firstname+\" \"+user.lastname+\" @ \"+new Date().toLocaleString()};medication.treatment_action=[treatment_action].concat(_toConsumableArray(medication.treatment_action));var treatment_doc={Description:\"Administered current dose of \"+medication.order+\" \"+user.firstname+\" \"+user.lastname+\" @ \"+new Date().toLocaleString(),Comments:refs[i].current.value};var productItem=treatment_doc;var document={};// data.createdby=user._id\n// console.log(data);\ndocument.order=medication;document.update=treatment_action;if(user.currentEmployee){document.facility=user.currentEmployee.facilityDetail._id;document.facilityname=user.currentEmployee.facilityDetail.facilityName;// or from facility dropdown\n}document.documentdetail=productItem;console.log(document.documentdetail);document.documentname=\"Drug Administration\";//state.DocumentClassModule.selectedDocumentClass.name\n// document.documentClassId=state.DocumentClassModule.selectedDocumentClass._id\ndocument.location=state.employeeLocation.locationName+\" \"+state.employeeLocation.locationType;document.locationId=state.employeeLocation.locationId;document.client=state.ClientModule.selectedClient._id;document.clientname=state.ClientModule.selectedClient.firstname+\" \"+state.ClientModule.selectedClient.middlename+\" \"+state.ClientModule.selectedClient.lastname;document.clientobj=state.ClientModule.selectedClient;document.createdBy=user._id;document.createdByname=user.firstname+\" \"+user.lastname;document.status=\"completed\";console.log(document);ClientServ.create(document).then(function(res){//console.log(JSON.stringify(res))\n// e.target.reset();\n/*  setMessage(\"Created Client successfully\") */setSuccess(true);toast({message:'Drug administered succesfully',type:'is-success',dismissible:true,pauseOnHover:true});setSuccess(false);refs[i].current.value=\"\";// setProductItem([])\n}).catch(function(err){toast({message:'Error In Drugs Adminstration '+err,type:'is-danger',dismissible:true,pauseOnHover:true});});}};var handleDelete=function handleDelete(doc){// console.log(doc)\nvar confirm=window.confirm(\"You are about to delete the prescription: \".concat(doc.order,\"?\"));if(confirm){OrderServ.remove(doc._id).then(function(res){toast({message:'Prescription deleted succesfully',type:'is-success',dismissible:true,pauseOnHover:true});setSuccess(false);}).catch(function(err){toast({message:'Error deleting Prescription'+err,type:'is-danger',dismissible:true,pauseOnHover:true});});}};var handleDiscontinue=function handleDiscontinue(medication,i){var confirm=window.confirm(\"You are about to discontinue this medication \".concat(medication.order,\" for \").concat(state.ClientModule.selectedClient.firstname+\" \"+state.ClientModule.selectedClient.middlename+\" \"+state.ClientModule.selectedClient.lastname,\" ?\"));if(confirm){console.log(\"order\",medication);medication.treatment_status=\"Cancelled\";var treatment_action={actorname:user.firstname+\" \"+user.lastname,actorId:user._id,order_id:medication._id,action:\"Discountinued\",comments:refs[i].current.value,createdat:new Date().toLocaleString(),description:\"Discontinued \"+medication.order+\" for \"+user.firstname+\" \"+user.lastname+\" @ \"+new Date().toLocaleString()};medication.treatment_action=[treatment_action].concat(_toConsumableArray(medication.treatment_action));var treatment_doc={Description:\"Discontinued  \"+medication.order+\" for \"+user.firstname+\" \"+user.lastname+\" @ \"+new Date().toLocaleString(),Comments:refs[i].current.value};var productItem=treatment_doc;var document={};// data.createdby=user._id\n// console.log(data);\ndocument.order=medication;document.update=treatment_action;if(user.currentEmployee){document.facility=user.currentEmployee.facilityDetail._id;document.facilityname=user.currentEmployee.facilityDetail.facilityName;// or from facility dropdown\n}document.documentdetail=productItem;console.log(document.documentdetail);document.documentname=\"Drug Administration\";//state.DocumentClassModule.selectedDocumentClass.name\n// document.documentClassId=state.DocumentClassModule.selectedDocumentClass._id\ndocument.location=state.employeeLocation.locationName+\" \"+state.employeeLocation.locationType;document.locationId=state.employeeLocation.locationId;document.client=state.ClientModule.selectedClient._id;document.clientname=state.ClientModule.selectedClient.firstname+\" \"+state.ClientModule.selectedClient.middlename+\" \"+state.ClientModule.selectedClient.lastname;document.clientobj=state.ClientModule.selectedClient;document.createdBy=user._id;document.createdByname=user.firstname+\" \"+user.lastname;document.status=\"completed\";console.log(document);ClientServ.create(document).then(function(res){//console.log(JSON.stringify(res))\n// e.target.reset();\n/*  setMessage(\"Created Client successfully\") */setSuccess(true);toast({message:'Drug administered succesfully',type:'is-success',dismissible:true,pauseOnHover:true});setSuccess(false);refs[i].current.value=\"\";// setProductItem([])\n}).catch(function(err){toast({message:'Error In Drugs Adminstration '+err,type:'is-danger',dismissible:true,pauseOnHover:true});});}};var handleDrop=function handleDrop(medication,i){var confirm=window.confirm(\"You are about to drop this medication \".concat(medication.order,\" for \").concat(state.ClientModule.selectedClient.firstname+\" \"+state.ClientModule.selectedClient.middlename+\" \"+state.ClientModule.selectedClient.lastname,\" ?\"));if(confirm){console.log(\"order\",medication);medication.treatment_status=\"Aborted\";medication.drop=true;var treatment_action={actorname:user.firstname+\" \"+user.lastname,actorId:user._id,order_id:medication._id,action:\"Aborted\",comments:refs[i].current.value,createdat:new Date().toLocaleString(),description:\"Dropped \"+medication.order+\" for \"+user.firstname+\" \"+user.lastname+\" @ \"+new Date().toLocaleString()};medication.treatment_action=[treatment_action].concat(_toConsumableArray(medication.treatment_action));var treatment_doc={Description:\"Dropped  \"+medication.order+\" for \"+user.firstname+\" \"+user.lastname+\" @ \"+new Date().toLocaleString(),Comments:refs[i].current.value};var productItem=treatment_doc;var document={};// data.createdby=user._id\n// console.log(data);\ndocument.order=medication;document.update=treatment_action;if(user.currentEmployee){document.facility=user.currentEmployee.facilityDetail._id;document.facilityname=user.currentEmployee.facilityDetail.facilityName;// or from facility dropdown\n}document.documentdetail=productItem;console.log(document.documentdetail);document.documentname=\"Drug Administration\";//state.DocumentClassModule.selectedDocumentClass.name\n// document.documentClassId=state.DocumentClassModule.selectedDocumentClass._id\ndocument.location=state.employeeLocation.locationName+\" \"+state.employeeLocation.locationType;document.locationId=state.employeeLocation.locationId;document.client=state.ClientModule.selectedClient._id;document.clientname=state.ClientModule.selectedClient.firstname+\" \"+state.ClientModule.selectedClient.middlename+\" \"+state.ClientModule.selectedClient.lastname;document.clientobj=state.ClientModule.selectedClient;document.createdBy=user._id;document.createdByname=user.firstname+\" \"+user.lastname;document.status=\"completed\";console.log(document);ClientServ.create(document).then(function(res){//console.log(JSON.stringify(res))\n// e.target.reset();\n/*  setMessage(\"Created Client successfully\") */setSuccess(true);toast({message:'Drug administered succesfully',type:'is-success',dismissible:true,pauseOnHover:true});setSuccess(false);refs[i].current.value=\"\";// setProductItem([])\n}).catch(function(err){toast({message:'Error In Drugs Adminstration '+err,type:'is-danger',dismissible:true,pauseOnHover:true});});}};var handleRow=/*#__PURE__*/function(){var _ref11=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(ProductEntry){var newProductEntryModule;return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:if(standalone){_context9.next=6;break;}_context9.next=3;return setSelectedOrder(ProductEntry);case 3:newProductEntryModule={selectedOrder:ProductEntry,show:'detail'};_context9.next=6;return setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{OrderModule:newProductEntryModule});});case 6:case\"end\":return _context9.stop();}}},_callee9);}));return function handleRow(_x5){return _ref11.apply(this,arguments);};}();var handleSearch=function handleSearch(val){var field='name';console.log(val);OrderServ.find({query:{$or:[{order:{$regex:val,$options:'i'}},{order_status:{$regex:val,$options:'i'}}],order_category:\"Prescription\",// storeId:state.StoreModule.selectedStore._id,\n//facility:user.currentEmployee.facilityDetail._id || \"\",\n$limit:10,$sort:{createdAt:-1}}}).then(function(res){console.log(res);setFacilities(res.data);setMessage(\" ProductEntry  fetched successfully\");setSuccess(true);}).catch(function(err){console.log(err);setMessage(\"Error fetching ProductEntry, probable network issues \"+err);setError(true);});};var getFacilities=/*#__PURE__*/function(){var _ref12=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee10(){var findProductEntry;return _regeneratorRuntime.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:console.log(\"here b4 server\");console.log(state.ClientModule.selectedClient._id);_context10.next=4;return OrderServ.find({query:{order_category:\"Prescription\",//destination: user.currentEmployee.facilityDetail._id,\n//storeId:state.StoreModule.selectedStore._id,\nclientId:state.ClientModule.selectedClient._id,drop:false,$limit:200,$sort:{treatment_status:1,createdAt:-1}}});case 4:findProductEntry=_context10.sent;_context10.next=7;return setFacilities(findProductEntry.data);case 7:case\"end\":return _context10.stop();}}},_callee10);}));return function getFacilities(){return _ref12.apply(this,arguments);};}();useEffect(function(){console.log(\"started\");getFacilities();OrderServ.on('created',function(obj){return getFacilities();});OrderServ.on('updated',function(obj){return getFacilities();});OrderServ.on('patched',function(obj){return getFacilities();});OrderServ.on('removed',function(obj){return getFacilities();});return function(){};},[]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"level\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"level-left\",children:/*#__PURE__*/_jsx(\"div\",{className:\"level-item\",children:/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left  \",children:[/*#__PURE__*/_jsx(DebounceInput,{className:\"input is-small \",type:\"text\",placeholder:\"Search Medications\",minLength:3,debounceTimeout:400,onChange:function onChange(e){return handleSearch(e.target.value);}}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-search\"})})]})})})}),!standalone&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"level-item\",children:[\" \",/*#__PURE__*/_jsx(\"span\",{className:\"is-size-6 has-text-weight-medium\",children:\"List of Prescriptions \"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"level-right\",children:/*#__PURE__*/_jsx(\"div\",{className:\"level-item\",children:/*#__PURE__*/_jsx(\"div\",{className:\"level-item\",children:/*#__PURE__*/_jsx(\"div\",{className:\"button is-success is-small\",onClick:handleCreateNew,children:\"New\"})})})})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"table-container pullup \",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table is-striped is-narrow is-hoverable is-fullwidth is-scrollable \",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Serial No\",children:\"S/No\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Date\",children:\"Date\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Order\",children:\"Medication\"})}),/*#__PURE__*/_jsx(\"th\",{children:\"Instructions\"}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Status\",children:\"Status\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Last Administered\",children:\"Last Administered\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Latest Comments\",children:\"Latest Comments\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Administered by\",children:\"Administered By\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Comments\",children:\"New Comments\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Actions\",children:\"Actions\"})})]})}),/*#__PURE__*/_jsx(\"tfoot\",{}),/*#__PURE__*/_jsx(\"tbody\",{children:facilities.map(function(ProductEntry,i){var _ProductEntry$treatme,_ProductEntry$treatme2,_ProductEntry$treatme3;return/*#__PURE__*/_jsxs(\"tr\",{/* onClick={()=>handleRow(ProductEntry)} */className:ProductEntry.treatment_status===\"Cancelled\"?\"cancel\":\"\",children:[/*#__PURE__*/_jsx(\"th\",{children:i+1}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{children:format(new Date(ProductEntry.createdAt),'dd-MM-yy')})}),/*#__PURE__*/_jsx(\"th\",{children:ProductEntry.order}),/*#__PURE__*/_jsx(\"th\",{children:ProductEntry.instruction}),/*#__PURE__*/_jsx(\"td\",{children:ProductEntry.treatment_status}),/*#__PURE__*/_jsx(\"td\",{children:((_ProductEntry$treatme=ProductEntry.treatment_action[0])===null||_ProductEntry$treatme===void 0?void 0:_ProductEntry$treatme.createdat)&&/*#__PURE__*/_jsx(\"span\",{children:format(new Date(ProductEntry.treatment_action[0].createdat),'dd-MM-yy hh:mmm:ss')})}),/*#__PURE__*/_jsxs(\"td\",{children:[(_ProductEntry$treatme2=ProductEntry.treatment_action[0])===null||_ProductEntry$treatme2===void 0?void 0:_ProductEntry$treatme2.comments,\" \"]}),/*#__PURE__*/_jsxs(\"td\",{children:[(_ProductEntry$treatme3=ProductEntry.treatment_action[0])===null||_ProductEntry$treatme3===void 0?void 0:_ProductEntry$treatme3.actorname,\" \"]}),/*#__PURE__*/_jsxs(\"td\",{children:[\" \",/*#__PURE__*/_jsx(\"input\",{classname:\"input\",type:\"text\",name:i,ref:refs[i]})]}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"button\",{className:\"button is-small btnheight is-primary\",disabled:ProductEntry.treatment_status===\"Cancelled\",\"aria-label\":\"more options\",onClick:function onClick(){return handleAdminister(ProductEntry,i);},children:/*#__PURE__*/_jsx(\"span\",{children:\"Administer\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"button is-small btnheight is-info\",\"aria-label\":\"more options\",onClick:function onClick(){return handleHistory(ProductEntry,i);},children:/*#__PURE__*/_jsx(\"span\",{children:\"History\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"button is-small btnheight is-warning\",disabled:ProductEntry.treatment_status===\"Cancelled\",\"aria-label\":\"more options\",onClick:function onClick(){return handleDiscontinue(ProductEntry,i);},children:/*#__PURE__*/_jsx(\"span\",{children:\"Discountinue\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"button is-small btnheight  is-danger\",disabled:ProductEntry.treatment_status===\"Cancelled\",\"aria-label\":\"more options\",onClick:function onClick(){return handleDrop(ProductEntry,i);},children:/*#__PURE__*/_jsx(\"span\",{children:\"Drop \"})})]})]},ProductEntry._id);})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal \".concat(hxModal?\"is-active\":\"\"),children:[/*#__PURE__*/_jsx(\"div\",{className:\"modal-background\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-card\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"modal-card-head\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"modal-card-title\",children:\"Drug Admin History \"}),/*#__PURE__*/_jsx(\"button\",{className:\"delete\",\"aria-label\":\"close\",onClick:handlecloseModal1})]}),/*#__PURE__*/_jsx(\"section\",{className:\"modal-card-body\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"table-container pullup \",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"is-medium\",children:/*#__PURE__*/_jsx(\"strong\",{children:currentMed.order})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Instruction: \"}),currentMed.instruction]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Ordered by:\"}),\" \",currentMed.requestingdoctor_Name]}),/*#__PURE__*/_jsx(\"br\",{}),currentMed.createdAt&&/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:formatDistanceToNowStrict(new Date(currentMed.createdAt),{addSuffix:true})}),\" \",/*#__PURE__*/_jsx(\"span\",{children:format(new Date(currentMed.createdAt),'dd-MM-yy')})]})]}),/*#__PURE__*/_jsxs(\"table\",{className:\"table is-striped is-narrow is-hoverable is-fullwidth is-scrollable \",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Serial No\",children:\"S/No\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Date\",children:\"Date/Time\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Action\",children:\"Action\"})}),/*#__PURE__*/_jsx(\"th\",{children:\"Comments\"}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Personnel\",children:\"Personel\"})})]})}),/*#__PURE__*/_jsx(\"tfoot\",{}),/*#__PURE__*/_jsx(\"tbody\",{children:currentMed.hasOwnProperty('treatment_action')&&currentMed.treatment_action.map(function(ProductEntry,i){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:i+1}),/*#__PURE__*/_jsx(\"td\",{children:ProductEntry.createdat&&/*#__PURE__*/_jsx(\"span\",{children:format(new Date(ProductEntry.createdat),'dd-MM-yy hh:mmm:ss')})}),/*#__PURE__*/_jsx(\"th\",{children:ProductEntry.action}),/*#__PURE__*/_jsx(\"th\",{children:ProductEntry.comments}),/*#__PURE__*/_jsxs(\"td\",{children:[ProductEntry.actorname,\" \"]})]},ProductEntry._id);})})]})]})})]})]})]});}export function ProductEntryDetail(){//const { register, handleSubmit, watch, setValue } = useForm(); //errors,\n// eslint-disable-next-line\nvar _useState65=useState(false),_useState66=_slicedToArray(_useState65,2),error=_useState66[0],setError=_useState66[1];//, \n//const [success, setSuccess] =useState(false)\n// eslint-disable-next-line\nvar _useState67=useState(\"\"),_useState68=_slicedToArray(_useState67,2),message=_useState68[0],setMessage=_useState68[1];//,\n//const ProductEntryServ=client.service('/ProductEntry')\n//const history = useHistory()\n//const {user,setUser} = useContext(UserContext)\nvar _useContext8=useContext(ObjectContext),state=_useContext8.state,setState=_useContext8.setState;var ProductEntry=state.ProductEntryModule.selectedProductEntry;var handleEdit=/*#__PURE__*/function(){var _ref13=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee11(){var newProductEntryModule;return _regeneratorRuntime.wrap(function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:newProductEntryModule={selectedProductEntry:ProductEntry,show:'modify'};_context11.next=3;return setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{ProductEntryModule:newProductEntryModule});});case 3:case\"end\":return _context11.stop();}}},_callee11);}));return function handleEdit(){return _ref13.apply(this,arguments);};}();return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"card \",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsx(\"p\",{className:\"card-header-title\",children:\"ProductEntry Details\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-content vscrollable\",children:[/*#__PURE__*/_jsx(\"table\",{children:/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"label\",{className:\"label is-small\",children:[\" \",/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-hospital\"})}),\"Type\"]})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"span\",{className:\"is-size-7 padleft\",name:\"name\",children:[\" \",ProductEntry.type,\" \"]})}),/*#__PURE__*/_jsx(\"td\",{}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"label\",{className:\"label is-small padleft\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-map-signs\"})}),\"Supplier:\"]})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"span\",{className:\"is-size-7 padleft\",name:\"ProductEntryType\",children:[ProductEntry.source,\" \"]})})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"label\",{className:\"label is-small\",children:[\" \",/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-hospital\"})}),\"Date:\"]})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"span\",{className:\"is-size-7 padleft\",name:\"name\",children:[\" \",ProductEntry.date,\" \"]})}),/*#__PURE__*/_jsx(\"td\",{}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"label\",{className:\"label is-small padleft\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-map-signs\"})}),\"Invoice No:\"]})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"span\",{className:\"is-size-7 padleft\",name:\"ProductEntryType\",children:[ProductEntry.documentNo,\" \"]})})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"label\",{className:\"label is-small\",children:[\" \",/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-hospital\"})}),\"Total Amount:\"]})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"span\",{className:\"is-size-7 padleft\",name:\"name\",children:[\" \",ProductEntry.totalamount,\" \"]})})]})]})}),/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 mt-2\",children:\"Product Items:\"}),/*#__PURE__*/_jsxs(\"table\",{className:\"table is-striped  is-hoverable is-fullwidth is-scrollable \",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Serial No\",children:\"S/No\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Type\",children:\"Name\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Type\",children:\"Quanitity\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Document No\",children:\"Unit\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Cost Price\",children:\"Cost Price\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Cost Price\",children:\"Amount\"})})]})}),/*#__PURE__*/_jsx(\"tfoot\",{}),/*#__PURE__*/_jsx(\"tbody\",{children:ProductEntry.productitems.map(function(ProductEntry,i){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:i+1}),/*#__PURE__*/_jsx(\"td\",{children:ProductEntry.name}),/*#__PURE__*/_jsx(\"th\",{children:ProductEntry.quantity}),/*#__PURE__*/_jsx(\"td\",{children:ProductEntry.baseunit}),/*#__PURE__*/_jsx(\"td\",{children:ProductEntry.costprice}),/*#__PURE__*/_jsx(\"td\",{children:ProductEntry.amount})]},i);})})]})]})]})});}export function ProductEntryModify(){var _useForm=useForm(),register=_useForm.register,handleSubmit=_useForm.handleSubmit,setValue=_useForm.setValue,reset=_useForm.reset,errors=_useForm.errors;//watch, errors,\n// eslint-disable-next-line \nvar _useState69=useState(false),_useState70=_slicedToArray(_useState69,2),error=_useState70[0],setError=_useState70[1];// eslint-disable-next-line \nvar _useState71=useState(false),_useState72=_slicedToArray(_useState71,2),success=_useState72[0],setSuccess=_useState72[1];// eslint-disable-next-line \nvar _useState73=useState(\"\"),_useState74=_slicedToArray(_useState73,2),message=_useState74[0],setMessage=_useState74[1];// eslint-disable-next-line \nvar ProductEntryServ=client.service('productentry');//const history = useHistory()\n// eslint-disable-next-line\nvar _useContext9=useContext(UserContext),user=_useContext9.user;var _useContext10=useContext(ObjectContext),state=_useContext10.state,setState=_useContext10.setState;var ProductEntry=state.ProductEntryModule.selectedProductEntry;useEffect(function(){setValue(\"name\",ProductEntry.name,{shouldValidate:true,shouldDirty:true});setValue(\"ProductEntryType\",ProductEntry.ProductEntryType,{shouldValidate:true,shouldDirty:true});/*  setValue(\"profession\", ProductEntry.profession,  {\n                shouldValidate: true,\n                shouldDirty: true\n            })\n            setValue(\"phone\", ProductEntry.phone,  {\n                shouldValidate: true,\n                shouldDirty: true\n            })\n            setValue(\"email\", ProductEntry.email,  {\n                shouldValidate: true,\n                shouldDirty: true\n            })\n            setValue(\"department\", ProductEntry.department,  {\n                shouldValidate: true,\n                shouldDirty: true\n            })\n            setValue(\"deptunit\", ProductEntry.deptunit,  {\n                shouldValidate: true,\n                shouldDirty: true\n            }) */ /*   setValue(\"ProductEntryCategory\", ProductEntry.ProductEntryCategory,  {\n                shouldValidate: true,\n                shouldDirty: true\n            }) */return function(){};});var handleCancel=/*#__PURE__*/function(){var _ref14=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee12(){var newProductEntryModule;return _regeneratorRuntime.wrap(function _callee12$(_context12){while(1){switch(_context12.prev=_context12.next){case 0:newProductEntryModule={selectedProductEntry:{},show:'create'};_context12.next=3;return setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{ProductEntryModule:newProductEntryModule});});case 3:case\"end\":return _context12.stop();}}},_callee12);}));return function handleCancel(){return _ref14.apply(this,arguments);};}();var changeState=function changeState(){var newProductEntryModule={selectedProductEntry:{},show:'create'};setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{ProductEntryModule:newProductEntryModule});});};var handleDelete=/*#__PURE__*/function(){var _ref15=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee13(){var conf,dleteId;return _regeneratorRuntime.wrap(function _callee13$(_context13){while(1){switch(_context13.prev=_context13.next){case 0:conf=window.confirm(\"Are you sure you want to delete this data?\");dleteId=ProductEntry._id;if(conf){ProductEntryServ.remove(dleteId).then(function(res){//console.log(JSON.stringify(res))\nreset();/*  setMessage(\"Deleted ProductEntry successfully\")\n                setSuccess(true)\n                changeState()\n               setTimeout(() => {\n                setSuccess(false)\n                }, 200); */toast({message:'ProductEntry deleted succesfully',type:'is-success',dismissible:true,pauseOnHover:true});changeState();}).catch(function(err){// setMessage(\"Error deleting ProductEntry, probable network issues \"+ err )\n// setError(true)\ntoast({message:\"Error deleting ProductEntry, probable network issues or \"+err,type:'is-danger',dismissible:true,pauseOnHover:true});});}case 3:case\"end\":return _context13.stop();}}},_callee13);}));return function handleDelete(){return _ref15.apply(this,arguments);};}();/* ()=> setValue(\"firstName\", \"Bill\", , {\n            shouldValidate: true,\n            shouldDirty: true\n          })) */var onSubmit=function onSubmit(data,e){e.preventDefault();setSuccess(false);console.log(data);data.facility=ProductEntry.facility;//console.log(data);\nProductEntryServ.patch(ProductEntry._id,data).then(function(res){//console.log(JSON.stringify(res))\n// e.target.reset();\n// setMessage(\"updated ProductEntry successfully\")\ntoast({message:'ProductEntry updated succesfully',type:'is-success',dismissible:true,pauseOnHover:true});changeState();}).catch(function(err){//setMessage(\"Error creating ProductEntry, probable network issues \"+ err )\n// setError(true)\ntoast({message:\"Error updating ProductEntry, probable network issues or \"+err,type:'is-danger',dismissible:true,pauseOnHover:true});});};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"card \",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsx(\"p\",{className:\"card-header-title\",children:\"ProductEntry Details-Modify\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-content vscrollable\",children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"label\",{className:\"label is-small\",children:[\" Name\",/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left has-icons-right\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input  is-small\",ref:register({required:true}),name:\"name\",type:\"text\",placeholder:\"Name\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-hospital\"})})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"label\",{className:\"label is-small\",children:[\"ProductEntry Type\",/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left has-icons-right\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small \",ref:register({required:true}),disabled:true,name:\"ProductEntryType\",type:\"text\",placeholder:\"ProductEntry Type\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-map-signs\"})})]})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field  is-grouped mt-2\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"control\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"button is-success is-small\",onClick:handleSubmit(onSubmit),children:\"Save\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"control\",children:/*#__PURE__*/_jsx(\"button\",{className:\"button is-warning is-small\",onClick:handleCancel,children:\"Cancel\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"control\",children:/*#__PURE__*/_jsx(\"button\",{className:\"button is-danger is-small\",onClick:function onClick(){return handleDelete();},type:\"delete\",children:\"Delete\"})})]})]})]})});}export function MedicationHelperSearch(_ref16){var getSearchfacility=_ref16.getSearchfacility,clear=_ref16.clear;var productServ=client.service('medicationhelper');var _useState75=useState([]),_useState76=_slicedToArray(_useState75,2),facilities=_useState76[0],setFacilities=_useState76[1];// eslint-disable-next-line\nvar _useState77=useState(false),_useState78=_slicedToArray(_useState77,2),searchError=_useState78[0],setSearchError=_useState78[1];// eslint-disable-next-line\nvar _useState79=useState(false),_useState80=_slicedToArray(_useState79,2),showPanel=_useState80[0],setShowPanel=_useState80[1];// eslint-disable-next-line\nvar _useState81=useState(\"\"),_useState82=_slicedToArray(_useState81,2),searchMessage=_useState82[0],setSearchMessage=_useState82[1];// eslint-disable-next-line \nvar _useState83=useState(\"\"),_useState84=_slicedToArray(_useState83,2),simpa=_useState84[0],setSimpa=_useState84[1];// eslint-disable-next-line \nvar _useState85=useState(false),_useState86=_slicedToArray(_useState85,2),chosen=_useState86[0],setChosen=_useState86[1];// eslint-disable-next-line \nvar _useState87=useState(0),_useState88=_slicedToArray(_useState87,2),count=_useState88[0],setCount=_useState88[1];var inputEl=useRef(null);var _useState89=useState(\"\"),_useState90=_slicedToArray(_useState89,2),val=_useState90[0],setVal=_useState90[1];var _useState91=useState(false),_useState92=_slicedToArray(_useState91,2),productModal=_useState92[0],setProductModal=_useState92[1];var value;var handleRow=/*#__PURE__*/function(){var _ref17=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee14(obj){return _regeneratorRuntime.wrap(function _callee14$(_context14){while(1){switch(_context14.prev=_context14.next){case 0:_context14.next=2;return setChosen(true);case 2://alert(\"something is chaning\")\ngetSearchfacility(obj);_context14.next=5;return setSimpa(obj.medication);case 5:// setSelectedFacility(obj)\nsetShowPanel(false);_context14.next=8;return setCount(2);case 8:case\"end\":return _context14.stop();}}},_callee14);}));return function handleRow(_x6){return _ref17.apply(this,arguments);};}();var handleBlur=/*#__PURE__*/function(){var _ref18=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee15(e){return _regeneratorRuntime.wrap(function _callee15$(_context15){while(1){switch(_context15.prev=_context15.next){case 0:if(count===2){console.log(\"stuff was chosen\");}/*  console.log(\"blur\")\n         setShowPanel(false)\n        console.log(JSON.stringify(simpa))\n        if (simpa===\"\"){\n            console.log(facilities.length)\n            setSimpa(\"abc\")\n            setSimpa(\"\")\n            setFacilities([])\n            inputEl.current.setValue=\"\"\n        }\n        console.log(facilities.length)\n        console.log(inputEl.current) */case 1:case\"end\":return _context15.stop();}}},_callee15);}));return function handleBlur(_x7){return _ref18.apply(this,arguments);};}();var handleSearch=/*#__PURE__*/function(){var _ref19=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee16(value){var field,_query;return _regeneratorRuntime.wrap(function _callee16$(_context16){while(1){switch(_context16.prev=_context16.next){case 0:setVal(value);if(!(value===\"\")){_context16.next=5;break;}setShowPanel(false);getSearchfacility(false);return _context16.abrupt(\"return\");case 5:field='medication';//field variable\nif(!(value.length>=3)){_context16.next=10;break;}productServ.find({query:(_query={},_defineProperty(_query,field,{$regex:value,$options:'i'}),_defineProperty(_query,\"$limit\",10),_defineProperty(_query,\"$sort\",{createdAt:-1}),_query)}).then(function(res){console.log(\"product  fetched successfully\");console.log(res);if(res.total>0){setFacilities(res.data);setSearchMessage(\" product  fetched successfully\");setShowPanel(true);}else{setShowPanel(false);getSearchfacility({medication:value,instruction:\"\"});}}).catch(function(err){toast({message:'Error fetching medication '+err,type:'is-danger',dismissible:true,pauseOnHover:true});});_context16.next=16;break;case 10:console.log(\"less than 3 \");console.log(val);setShowPanel(false);_context16.next=15;return setFacilities([]);case 15:console.log(facilities);case 16:case\"end\":return _context16.stop();}}},_callee16);}));return function handleSearch(_x8){return _ref19.apply(this,arguments);};}();var handleAddproduct=function handleAddproduct(){setProductModal(true);};var handlecloseModal=function handlecloseModal(){// setDestinationModal(false)\n//handleSearch(val)\n};useEffect(function(){setSimpa(value);return function(){};},[simpa]);useEffect(function(){if(clear){console.log(\"success has changed\",clear);setSimpa(\"\");}return function(){};},[clear]);return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsx(\"div\",{className:\"control has-icons-left  \",children:/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown \".concat(showPanel?\"is-active\":\"\"),style:{width:\"100%\"},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown-trigger\",style:{width:\"100%\"},children:[/*#__PURE__*/_jsx(DebounceInput,{className:\"input is-small \",type:\"text\",placeholder:\"Search Order\",value:simpa,minLength:3,debounceTimeout:400/*  onBlur={(e)=>handleBlur(e)} */,onChange:function onChange(e){return handleSearch(e.target.value);},inputRef:inputEl}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-search\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"dropdown-menu\",style:{width:\"100%\"},children:/*#__PURE__*/_jsx(\"div\",{className:\"dropdown-content\",children:facilities.map(function(facility,i){return/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown-item\",onClick:function onClick(){return handleRow(facility);},children:[/*#__PURE__*/_jsx(\"span\",{children:facility.medication}),\" // \",/*#__PURE__*/_jsx(\"span\",{children:facility.instruction})]},facility._id);})})})]})})})});}","map":{"version":3,"sources":["/home/mfybaby/Documents/HealthStack2/HS-frontend/src/components/EncounterMgt/Prescription.js"],"names":["React","useState","useContext","useEffect","useRef","useMemo","client","DebounceInput","useForm","UserContext","ObjectContext","FacilityPopup","toast","format","formatDistanceToNowStrict","searchfacility","Prescription","state","selectedProductEntry","setSelectedProductEntry","OrderModule","show","PrescriptionCreate","error","setError","success","setSuccess","message","setMessage","facility","setFacility","ProductEntryServ","service","user","currentUser","setCurrentUser","type","setType","documentNo","setDocumentNo","totalamount","setTotalamount","productId","setProductId","source","setSource","date","setDate","name","setName","destination","setDestination","destinationId","setDestinationId","destinationModal","setDestinationModal","medication","setMedication","instruction","setInstruction","productItem","setProductItem","ClientServ","productitems","productEntry","setProductEntry","handlecloseModal","productItemI","getSearchfacility","obj","DestinationModule","selectedDestination","facilityName","_id","handleChangeType","e","target","value","handleClickProd","length","dismissible","pauseOnHover","prevProd","concat","currentEmployee","facilityDetail","console","log","handleChangeDestination","resetform","onSubmit","document","facilityname","documentdetail","documentname","location","employeeLocation","locationName","locationType","locationId","ClientModule","selectedClient","clientname","firstname","middlename","lastname","clientobj","createdBy","createdByname","status","create","then","res","catch","err","display","map","ProductEntry","i","PrescriptionList","standalone","OrderServ","facilities","setFacilities","selectedOrder","setSelectedOrder","setState","setUser","handleCreateNew","newProductEntryModule","prevstate","handleDelete","doc","confirm","window","order","remove","handleRow","handleSearch","val","field","find","query","$or","$regex","$options","order_status","order_category","$limit","$sort","createdAt","data","getFacilities","clientId","findProductEntry","on","Date","fulfilled","requestingdoctor_Name","DrugAdminList","hxModal","setHxModal","currentMed","setCurrentMed","refs","createRef","handleHistory","handlecloseModal1","handleAdminister","treatment_status","treatment_action","actorname","actorId","order_id","action","comments","current","createdat","toLocaleString","description","treatment_doc","Description","Comments","update","handleDiscontinue","handleDrop","drop","addSuffix","hasOwnProperty","ProductEntryDetail","ProductEntryModule","handleEdit","quantity","baseunit","costprice","amount","ProductEntryModify","register","handleSubmit","setValue","reset","errors","shouldValidate","shouldDirty","ProductEntryType","handleCancel","changeState","conf","dleteId","preventDefault","patch","required","MedicationHelperSearch","clear","productServ","searchError","setSearchError","showPanel","setShowPanel","searchMessage","setSearchMessage","simpa","setSimpa","chosen","setChosen","count","setCount","inputEl","setVal","productModal","setProductModal","handleBlur","total","handleAddproduct","width"],"mappings":"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","sourcesContent":["/* eslint-disable */\nimport React, {useState,useContext, useEffect,useRef,useMemo} from 'react'\nimport client from '../../feathers'\nimport {DebounceInput} from 'react-debounce-input';\nimport { useForm } from \"react-hook-form\";\n//import {useHistory} from 'react-router-dom'\nimport {UserContext,ObjectContext} from '../../context'\nimport FacilityPopup from '../helpers/FacilityPopup'\nimport {toast} from 'bulma-toast'\nimport {format, formatDistanceToNowStrict } from 'date-fns'\n/* import {ProductCreate} from './Products' */\n// eslint-disable-next-line\nconst searchfacility={};\n\n\nexport default function Prescription() {\n    const {state}=useContext(ObjectContext) //,setState\n    // eslint-disable-next-line\n    const [selectedProductEntry,setSelectedProductEntry]=useState()\n    //const [showState,setShowState]=useState() //create|modify|detail\n    \n    return(\n        <section className= \"section remPadTop\">\n           {/*  <div className=\"level\">\n            <div className=\"level-item\"> <span className=\"is-size-6 has-text-weight-medium\">ProductEntry  Module</span></div>\n            </div> */}\n            <div className=\"columns \">\n            <div className=\"column is-6 \">\n                <PrescriptionList />\n                </div>\n            <div className=\"column is-6 \">\n                {(state.OrderModule.show ==='create')&&<PrescriptionCreate />}\n               {/*  {(state.OrderModule.show ==='detail')&&<ProductEntryDetail  />}\n                {(state.OrderModule.show ==='modify')&&<ProductEntryModify ProductEntry={selectedProductEntry} />} */}\n               \n            </div>\n\n            </div>                            \n            </section>\n       \n    )\n    \n}\n\nexport function PrescriptionCreate(){\n   // const { register, handleSubmit,setValue} = useForm(); //, watch, errors, reset \n    const [error, setError] =useState(false)\n    const [success, setSuccess] =useState(false)\n    const [message,setMessage] = useState(\"\")\n    // eslint-disable-next-line\n    const [facility,setFacility] = useState()\n    const ProductEntryServ=client.service('productentry')\n    //const history = useHistory()\n    const {user} = useContext(UserContext) //,setUser\n    // eslint-disable-next-line\n    const [currentUser,setCurrentUser] = useState()\n    const [type,setType] = useState(\"Purchase Invoice\")\n    const [documentNo,setDocumentNo] = useState(\"\")\n    const [totalamount,setTotalamount] = useState(\"\")\n    const [productId,setProductId] = useState(\"\")\n    const [source,setSource] = useState(\"\")\n    const [date,setDate] = useState(\"\")\n    const [name,setName] = useState(\"\")\n    const [destination,setDestination] = useState('')\n    const [destinationId,setDestinationId] = useState('')\n    const [destinationModal,setDestinationModal] = useState(false)\n    const [medication,setMedication] = useState()\n    const [instruction,setInstruction] = useState()\n    const [productItem,setProductItem] = useState([])\n    const {state}=useContext(ObjectContext)\n    const ClientServ=client.service('clinicaldocument')\n    \n    const [productEntry,setProductEntry]=useState({\n        productitems:[],\n        date,\n        documentNo,\n        type,\n        totalamount,\n        source,\n\n    })\n \n    const handlecloseModal =()=>{\n        setDestinationModal(false)\n        //handleSearch(val)\n    }\n    const productItemI={\n      /*   productId,\n        name, */\n        medication,\n        destination,\n        instruction,\n        destinationId\n        /* costprice,\n        amount:quantity*costprice,\n        baseunit */\n\n    }\n    // consider batchformat{batchno,expirydate,qtty,baseunit}\n    //consider baseunoit conversions\n    const getSearchfacility=(obj)=>{\n\n        setInstruction(obj.instruction)\n        setMedication(obj.medication)\n\n        if (!obj){\n            //\"clear stuff\"\n            setInstruction(\"\")\n            setMedication(\"\")\n           \n        }\n       // setBaseunit(obj.baseunit)\n        \n       /*  setValue(\"facility\", obj._id,  {\n            shouldValidate: true,\n            shouldDirty: true\n        }) */\n    }\n    \n    useEffect(() => {\n        setCurrentUser(user)\n        //console.log(currentUser)\n        return () => {\n        \n        }\n    }, [user])\n   /*  useEffect(() => {\n        setProductItem(\n            prevProd=>prevProd.concat(productItemI)\n        )\n        console.log(productItem)\n        return () => {\n            \n        }\n    },[productItemI])\n */\n    useEffect(() => {\n        \n        setDestination(state.DestinationModule.selectedDestination.facilityName)\n        setDestinationId(state.DestinationModule.selectedDestination._id)\n        return () => {\n           \n        }\n    }, [state.DestinationModule.selectedDestination])\n\n    const handleChangeType=async (e)=>{\n        await setType(e.target.value)\n    }\n    const handleClickProd=async()=>{\n        await setSuccess(false)\n        if (!(productItemI.medication && productItemI.medication.length>0 )){\n            toast({\n                message: 'medication can not be empty ' ,\n                type: 'is-danger',\n                dismissible: true,\n                pauseOnHover: true,\n              })\n              return\n        }\n        await setProductItem(\n            prevProd=>prevProd.concat(productItemI)\n        )\n        setName(\"\")\n        setMedication(\"\")\n        setInstruction(\"\")\n        setDestination( user.currentEmployee.facilityDetail.facilityName)\n        setDestinationId( user.currentEmployee.facilityDetail._id)\n       // setDestination(\"\")\n       await setSuccess(true)\n       console.log(success)\n       console.log(productItem)\n    }\n  //check user for facility or get list of facility  \n   /*  useEffect(()=>{\n        //setFacility(user.activeProductEntry.FacilityId)//\n      if (!user.stacker){\n          console.log(currentUser)\n           /* setValue(\"facility\", user.currentEmployee.facilityDetail._id,  {\n            shouldValidate: true,\n            shouldDirty: true\n        })  \n\n      }\n    }) */\n\n    const handleChangeDestination=()=>{\n        setDestinationModal(true)\n    }\n\n    const resetform=()=>{\n     setType(\"Purchase Invoice\")\n    setDocumentNo(\"\")\n    setTotalamount(\"\")\n    setProductId(\"\")\n    setSource(\"\")\n    setDate(\"\")\n    setName(\"\")\n    setMedication(\"\")\n    setInstruction(\"\")\n    setProductItem([])\n    }\n\n\n    const onSubmit = () =>{\n        //data,e\n       // e.preventDefault();\n        setMessage(\"\")\n        setError(false)\n        setSuccess(false)\n        //write document\n        let document={}\n         // data.createdby=user._id\n         // console.log(data);\n          if (user.currentEmployee){\n          document.facility=user.currentEmployee.facilityDetail._id \n          document.facilityname=user.currentEmployee.facilityDetail.facilityName // or from facility dropdown\n          }\n         document.documentdetail=productItem\n         console.log(document.documentdetail)\n          document.documentname=\"Prescription\" //state.DocumentClassModule.selectedDocumentClass.name\n         // document.documentClassId=state.DocumentClassModule.selectedDocumentClass._id\n         document.location=state.employeeLocation.locationName+\" \"+state.employeeLocation.locationType\n         document.locationId=state.employeeLocation.locationId\n          document.client=state.ClientModule.selectedClient._id\n          document.clientname=state.ClientModule.selectedClient.firstname+ \" \"+state.ClientModule.selectedClient.middlename+\" \"+state.ClientModule.selectedClient.lastname\n          document.clientobj=state.ClientModule.selectedClient\n          document.createdBy=user._id\n          document.createdByname=user.firstname+ \" \"+user.lastname\n          document.status=\"completed\"\n          console.log(document)\n        ClientServ.create(document)\n        .then((res)=>{\n                //console.log(JSON.stringify(res))\n               // e.target.reset();\n               /*  setMessage(\"Created Client successfully\") */\n                setSuccess(true)\n                toast({\n                    message: 'Presciption created succesfully',\n                    type: 'is-success',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  })\n                  setSuccess(false)\n                  setProductItem([])\n            })\n            .catch((err)=>{\n                toast({\n                    message: 'Error creating Prescription ' + err,\n                    type: 'is-danger',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  })\n            })\n\n      } \n\n    useEffect(() => {\n        setDestination( user.currentEmployee.facilityDetail.facilityName)\n        setDestinationId( user.currentEmployee.facilityDetail._id)\n        return () => {\n            \n        }\n    }, [])\n\n    return (\n        <>\n            <div className=\"card card-overflow\">\n            <div className=\"card-header\">\n                <p className=\"card-header-title\">\n                    Create Prescription\n                </p>\n            </div>\n            <div className=\"card-content \">\n   \n           {/*  <form onSubmit={onSubmit}> {/* handleSubmit(onSubmit)  </form>  */}\n           \n               \n           \n         {/* array of ProductEntry items */}\n        \n        <label className=\"label is-small\">Add Medication:</label>\n         <div className=\"field is-horizontal\">\n            <div className=\"field-body\">\n             <div className=\"field is-expanded\"  /* style={ !user.stacker?{display:\"none\"}:{}} */  > \n                    <MedicationHelperSearch  getSearchfacility={getSearchfacility} clear={success} />  \n                  <p className=\"control has-icons-left \" style={{display:\"none\"}}>\n                        <input className=\"input is-small\"  /* ref={register ({ required: true }) }  */   value={medication} name=\"medication\" type=\"text\" onChange={e=>setMedication(e.target.value)} placeholder=\"medication\" />\n                        <span className=\"icon is-small is-left\">\n                        <i className=\"fas  fa-map-marker-alt\"></i>\n                        </span>\n                    </p> \n                </div>\n               {/*  <div className=\"field\">\n                <p className=\"control has-icons-left\">\n                    <input className=\"input is-small\" ref={register({ required: true })} name=\"medication\" value={medication} type=\"text\" onChange={e=>setMedication(e.target.value)} placeholder=\"medication\"  />\n                    <span className=\"icon is-small is-left\">\n                    <i className=\"fas fa-envelope\"></i>\n                    </span>\n                </p>\n       \n            </div>  */}\n            \n          \n            <div className=\"field\">\n            <p className=\"control\">\n                    <button className=\"button is-info is-small  is-pulled-right\">\n                      <span className=\"is-small\" onClick={handleClickProd}> +</span>\n                    </button>\n                </p>\n            </div>\n            </div>\n         </div>\n         <div className=\"field is-horizontal\">\n            <div className=\"field-body\">\n         <div className=\"field\">\n                <p className=\"control has-icons-left\">\n                    <input className=\"input is-small\" /* ref={register({ required: true })} */ name=\"instruction\" value={instruction} type=\"text\" onChange={e=>setInstruction(e.target.value)} placeholder=\"Instructions/Note\"  />\n                    <span className=\"icon is-small is-left\">\n                    <i className=\"fas fa-envelope\"></i>\n                    </span>\n                </p>\n       \n            </div>  \n            <div className=\"field\">\n                <p className=\"control has-icons-left\">\n                    <input className=\"input is-small \" disabled /* ref={register({ required: true })} */ name=\"destination\" value={destination===user.currentEmployee.facilityDetail.facilityName?\"In-house\":destination} type=\"text\" onChange={e=>setDestination(e.target.value)} placeholder=\"Destination Pharmacy\"  />\n                    <span className=\"icon is-small is-left\">\n                    <i className=\"fas fa-envelope\"></i>\n                    </span>\n                </p>\n                <button className=\"button is-small is-success btnheight\" onClick={handleChangeDestination}>Change</button>\n       \n            </div>  \n            </div> \n            </div> \n\n       {(productItem.length>0) && <div>\n            <label className=\"label is-size-7\">Medications:</label>\n         <table className=\"table is-striped  is-hoverable is-fullwidth is-scrollable \">\n                <thead>\n                    <tr>\n                    <th><abbr title=\"Serial No\">S/No</abbr></th>\n                   {/*  <th><abbr title=\"Type\">Name</abbr></th> */}\n                    <th><abbr title=\"Medication\">Medication</abbr></th>\n                    <th><abbr title=\"Destination\">Destination</abbr></th>\n                     {/*<th><abbr title=\"Cost Price\">Cost Price</abbr></th>\n                    <th><abbr title=\"Cost Price\">Amount</abbr></th> */}\n                    <th><abbr title=\"Actions\">Actions</abbr></th>\n                    </tr>\n                </thead>\n                <tfoot>\n                    \n                </tfoot>\n                <tbody>\n                   { productItem.map((ProductEntry, i)=>(\n\n                        <tr key={i}>\n                        <th>{i+1}</th>\n                        {/* <td>{ProductEntry.name}</td> */}\n                        <td>{ProductEntry.medication}<br/>\n                        <span className=\"help\">{ProductEntry.instruction}</span></td>\n                       <td>{ProductEntry.destination===user.currentEmployee.facilityDetail.facilityName?\"In-house\":ProductEntry.destination}</td>\n                         {/* <td>{ProductEntry.costprice}</td>\n                        <td>{ProductEntry.amount}</td> */}\n                        <td><span className=\"showAction\"  >x</span></td>\n                        \n                        </tr>\n\n                    ))}\n                </tbody>\n                </table>\n                <div className=\"field mt-2\">\n                <p className=\"control\">\n                    <button className=\"button is-success is-small\" disabled={!productItem.length>0} onClick={onSubmit}>\n                        Create\n                    </button>\n                </p>\n                </div>\n                </div>\n           \n            }\n            \n            \n            </div>\n            </div>\n            <div className={`modal ${destinationModal?\"is-active\":\"\"}` }>\n                                    <div className=\"modal-background\"></div>\n                                    <div className=\"modal-card\">\n                                        <header className=\"modal-card-head\">\n                                        <p className=\"modal-card-title\">Choose Destination</p>\n                                        <button className=\"delete\" aria-label=\"close\"  onClick={handlecloseModal}></button>\n                                        </header>\n                                        <section className=\"modal-card-body\">\n                                            <FacilityPopup facilityType=\"Pharmacy\"  closeModal={handlecloseModal}/>\n                                        {/* <StoreList standalone=\"true\" /> */}\n                                       {/*  <ProductCreate /> */}\n                                        </section>\n                                        {/* <footer className=\"modal-card-foot\">\n                                        <button className=\"button is-success\">Save changes</button>\n                                        <button className=\"button\">Cancel</button>\n                                        </footer> */}\n                                    </div>\n                                </div>       \n        </>\n    )\n   \n}\n\nexport function PrescriptionList({standalone}){\n   // const { register, handleSubmit, watch, errors } = useForm();\n    // eslint-disable-next-line\n    const [error, setError] =useState(false)\n     // eslint-disable-next-line\n    const [success, setSuccess] =useState(false)\n     // eslint-disable-next-line\n   const [message, setMessage] = useState(\"\") \n    const OrderServ=client.service('order')\n    //const history = useHistory()\n   // const {user,setUser} = useContext(UserContext)\n    const [facilities,setFacilities]=useState([])\n     // eslint-disable-next-line\n   const [selectedOrder, setSelectedOrder]=useState() //\n    // eslint-disable-next-line\n    const {state,setState}=useContext(ObjectContext)\n    // eslint-disable-next-line\n    const {user,setUser}=useContext(UserContext)\n\n\n\n    const handleCreateNew = async()=>{\n        const    newProductEntryModule={\n            selectedOrder:{},\n            show :'create'\n            }\n       await setState((prevstate)=>({...prevstate, OrderModule:newProductEntryModule}))\n       //console.log(state)\n        \n\n    }\n\n    const handleDelete=(doc)=>{\n        // console.log(doc)\n         let confirm = window.confirm(`You are about to delete the prescription: ${doc.order}?`)\n         if (confirm){\n        OrderServ.remove(doc._id)\n         .then((res)=>{\n             toast({\n                 message: 'Prescription deleted succesfully',\n                 type: 'is-success',\n                 dismissible: true,\n                 pauseOnHover: true,\n               })\n               setSuccess(false)\n         })\n         .catch((err)=>{\n             toast({\n                 message: 'Error deleting Prescription' + err,\n                 type: 'is-danger',\n                 dismissible: true,\n                 pauseOnHover: true,\n               })\n         })\n      }\n     }\n    \n    const handleRow= async(ProductEntry)=>{\n        //console.log(\"b4\",state)\n\n        //console.log(\"handlerow\",ProductEntry)\n        if(!standalone){\n\n        await setSelectedOrder(ProductEntry)\n\n        const    newProductEntryModule={\n            selectedOrder:ProductEntry,\n            show :'detail'\n        }\n       await setState((prevstate)=>({...prevstate, OrderModule:newProductEntryModule}))\n       //console.log(state)\n     }\n    }\n\n   const handleSearch=(val)=>{\n       const field='name'\n       console.log(val)\n       OrderServ.find({query: {\n              $or:[ { order: {\n                    $regex:val,\n                    $options:'i'\n                   \n                }},\n                {order_status: {\n                    $regex:val,\n                    $options:'i'\n                   \n                }}],\n                order_category:\"Prescription\",\n               // storeId:state.StoreModule.selectedStore._id,\n               //facility:user.currentEmployee.facilityDetail._id || \"\",\n                $limit:10,\n                $sort: {\n                    createdAt: -1\n                  }\n                    }}).then((res)=>{\n                console.log(res)\n               setFacilities(res.data)\n                setMessage(\" ProductEntry  fetched successfully\")\n                setSuccess(true) \n            })\n            .catch((err)=>{\n                console.log(err)\n                setMessage(\"Error fetching ProductEntry, probable network issues \"+ err )\n                setError(true)\n            })\n        }\n   \n const getFacilities= async()=>{\n       \n            console.log(\"here b4 server\")\n            console.log(state.ClientModule.selectedClient._id)\n             const findProductEntry= await OrderServ.find(\n                {query: {\n                    order_category:\"Prescription\",\n                    //destination: user.currentEmployee.facilityDetail._id,\n                   \n                    //storeId:state.StoreModule.selectedStore._id,\n                    clientId:state.ClientModule.selectedClient._id,\n                    $limit:20,\n                    $sort: {\n                        createdAt: -1\n                    }\n                    }})\n         await setFacilities(findProductEntry.data)\n         }   \n\n            useEffect(() => {\n                console.log(\"started\")\n                getFacilities()\n              \n               \n               OrderServ.on('created', (obj)=>getFacilities())\n                OrderServ.on('updated', (obj)=>getFacilities())\n                OrderServ.on('patched', (obj)=>getFacilities())\n                OrderServ.on('removed', (obj)=>getFacilities())\n                return () => {\n                \n                }\n            },[])\n\n            \n    return(\n        \n            <>  \n                <div className=\"level\">\n                    <div className=\"level-left\">\n                        <div className=\"level-item\">\n                            <div className=\"field\">\n                                <p className=\"control has-icons-left  \">\n                                    <DebounceInput className=\"input is-small \" \n                                        type=\"text\" placeholder=\"Search Medications\"\n                                        minLength={3}\n                                        debounceTimeout={400}\n                                        onChange={(e)=>handleSearch(e.target.value)} />\n                                    <span className=\"icon is-small is-left\">\n                                        <i className=\"fas fa-search\"></i>\n                                    </span>\n                                </p>\n                            </div>\n                        </div>\n                    </div>\n                   {!standalone && (<><div className=\"level-item\"> <span className=\"is-size-6 has-text-weight-medium\">List of Prescriptions </span></div>\n                    <div className=\"level-right\">\n                        <div className=\"level-item\"> \n                            <div className=\"level-item\"><div className=\"button is-success is-small\" onClick={handleCreateNew}>New</div></div>\n                        </div>\n                    </div></>)}\n\n                </div>\n                <div className=\"table-container pullup \">\n                                <table className=\"table is-striped is-narrow is-hoverable is-fullwidth is-scrollable \">\n                                    <thead>\n                                        <tr>\n                                        <th><abbr title=\"Serial No\">S/No</abbr></th>\n                                        <th><abbr title=\"Date\">Date</abbr></th>\n                                        <th><abbr title=\"Order\">Medication</abbr></th>\n                                        <th>Fulfilled</th>\n                                        <th><abbr title=\"Status\">Status</abbr></th>\n                                        <th><abbr title=\"Requesting Physician\">Requesting Physician</abbr></th>\n                                        {/* <th><abbr title=\"Client Name\">Client Name</abbr></th> */}\n                                        {!standalone &&     <th><abbr title=\"Actions\">Actions</abbr></th>}\n                                        </tr>\n                                    </thead>\n                                    <tfoot>\n                                        \n                                    </tfoot>\n                                    <tbody>\n                                        {facilities.map((ProductEntry, i)=>(\n\n                                            <tr key={ProductEntry._id} /* onClick={()=>handleRow(ProductEntry)} */ className={ProductEntry._id===(selectedOrder?._id||null)?\"is-selected\":\"\"}>\n                                            <th>{i+1}</th>\n                                            <td>{/* {formatDistanceToNowStrict(new Date(ProductEntry.createdAt),{addSuffix: true})} <br/> */}<span>{format(new Date(ProductEntry.createdAt),'dd-MM-yy')}</span></td>\n                                            <th>{ProductEntry.order}</th>\n                                            <td>{ProductEntry.fulfilled===\"True\"?\"Yes\":\"No\"}</td>\n                                            <td>{ProductEntry.order_status}</td>\n                                            <td>{ProductEntry.requestingdoctor_Name}</td>\n                                            {/* <td>{ProductEntry.clientId}</td> */}\n                                          {!standalone &&  <td>  <button className=\"button  sbut\" aria-label=\"more options\" onClick={()=>handleDelete (ProductEntry)}>\n                                                            <span>x</span>\n                                                        </button> {/* <span className=\"showAction\"  >...</span> */} </td>}\n                                           \n                                            </tr>\n\n                                        ))}\n                                    </tbody>\n                                    </table>\n                                    \n                </div>              \n            </>\n              \n    )\n    }\n\nexport function DrugAdminList({standalone}){\n        // const { register, handleSubmit, watch, errors } = useForm();\n         // eslint-disable-next-line\n         const [error, setError] =useState(false)\n          // eslint-disable-next-line\n         const [success, setSuccess] =useState(false)\n         const [hxModal, setHxModal] =useState(false)\n         const [currentMed, setCurrentMed] =useState(false)\n          // eslint-disable-next-line\n        const [message, setMessage] = useState(\"\") \n         const OrderServ=client.service('order')\n         //const history = useHistory()\n        // const {user,setUser} = useContext(UserContext)\n         const [facilities,setFacilities]=useState([])\n          // eslint-disable-next-line\n        const [selectedOrder, setSelectedOrder]=useState() //\n         // eslint-disable-next-line\n         const {state,setState}=useContext(ObjectContext)\n         // eslint-disable-next-line\n         const {user,setUser}=useContext(UserContext)\n         const refs=useMemo(() => facilities.map(() => React.createRef()), [facilities])\n         const ClientServ=client.service('clinicaldocument')\n     \n     \n     \n        const handleCreateNew = async()=>{\n             const    newProductEntryModule={\n                 selectedOrder:{},\n                 show :'create'\n                 }\n            await setState((prevstate)=>({...prevstate, OrderModule:newProductEntryModule}))\n            //console.log(state)\n         }\n\n        const handleHistory = async(medication,i)=>{\n            setHxModal(true)\n            setCurrentMed(medication)\n\n        }\n      \n\n        const handlecloseModal1 = async()=>{\n            setHxModal(false)\n        }\n\n        const handleAdminister=(medication,i)=>{\n\n            let confirm = window.confirm(`You are about to administer a dose of ${medication.order} for ${ state.ClientModule.selectedClient.firstname+ \" \"+state.ClientModule.selectedClient.middlename+\" \"+state.ClientModule.selectedClient.lastname} ?`)\n            if (confirm){\n            //update the medication\n            console.log(\"order\",medication)\n            medication.treatment_status=\"Active\"\n           \n\n           const  treatment_action =\n                {actorname:user.firstname+ \" \"+user.lastname,\n                actorId:user._id,\n               order_id:medication._id,\n               action:\"Administered\", \n                comments: refs[i].current.value, \n                createdat:new Date().toLocaleString(), \n                description:\"Administered current dose of \" + medication.order + \" \" + user.firstname+ \" \"+user.lastname+ \" @ \"+ new Date().toLocaleString() ,  \n              } \n\n\n              medication.treatment_action=[treatment_action, ... medication.treatment_action]\n              const  treatment_doc =\n                        {\n                        Description:\"Administered current dose of \" + medication.order + \" \" + user.firstname+ \" \"+user.lastname+ \" @ \"+new  Date().toLocaleString() ,  \n                        Comments: refs[i].current.value, \n                    } \n              let productItem=treatment_doc\n              let document={}\n              // data.createdby=user._id\n              // console.log(data);\n              document.order=medication\n              document.update=treatment_action\n               if (user.currentEmployee){\n               document.facility=user.currentEmployee.facilityDetail._id \n               document.facilityname=user.currentEmployee.facilityDetail.facilityName // or from facility dropdown\n               }\n              document.documentdetail=productItem\n              console.log(document.documentdetail)\n               document.documentname=\"Drug Administration\" //state.DocumentClassModule.selectedDocumentClass.name\n              // document.documentClassId=state.DocumentClassModule.selectedDocumentClass._id\n              document.location=state.employeeLocation.locationName+\" \"+state.employeeLocation.locationType\n              document.locationId=state.employeeLocation.locationId\n               document.client=state.ClientModule.selectedClient._id\n               document.clientname=state.ClientModule.selectedClient.firstname+ \" \"+state.ClientModule.selectedClient.middlename+\" \"+state.ClientModule.selectedClient.lastname\n               document.clientobj=state.ClientModule.selectedClient\n               document.createdBy=user._id\n               document.createdByname=user.firstname+ \" \"+user.lastname\n               document.status=\"completed\"\n               console.log(document)\n             ClientServ.create(document)\n             .then((res)=>{\n                     //console.log(JSON.stringify(res))\n                    // e.target.reset();\n                    /*  setMessage(\"Created Client successfully\") */\n                     setSuccess(true)\n                     toast({\n                         message: 'Drug administered succesfully',\n                         type: 'is-success',\n                         dismissible: true,\n                         pauseOnHover: true,\n                       })\n                       setSuccess(false)\n                       refs[i].current.value=\"\"\n                      // setProductItem([])\n                 })\n                 .catch((err)=>{\n                     toast({\n                         message: 'Error In Drugs Adminstration ' + err,\n                         type: 'is-danger',\n                         dismissible: true,\n                         pauseOnHover: true,\n                       })\n                 })\n     \n           \n\n\n\n         }\n        }\n     \n        const handleDelete=(doc)=>{\n             // console.log(doc)\n              let confirm = window.confirm(`You are about to delete the prescription: ${doc.order}?`)\n              if (confirm){\n             OrderServ.remove(doc._id)\n              .then((res)=>{\n                  toast({\n                      message: 'Prescription deleted succesfully',\n                      type: 'is-success',\n                      dismissible: true,\n                      pauseOnHover: true,\n                    })\n                    setSuccess(false)\n              })\n              .catch((err)=>{\n                  toast({\n                      message: 'Error deleting Prescription' + err,\n                      type: 'is-danger',\n                      dismissible: true,\n                      pauseOnHover: true,\n                    })\n              })\n           }\n          }\n\n        const handleDiscontinue=(medication,i)=>{\n            let confirm = window.confirm(`You are about to discontinue this medication ${medication.order} for ${ state.ClientModule.selectedClient.firstname+ \" \"+state.ClientModule.selectedClient.middlename+\" \"+state.ClientModule.selectedClient.lastname} ?`)\n            if (confirm){\n                console.log(\"order\",medication)\n                medication.treatment_status=\"Cancelled\"\n               \n    \n               const  treatment_action =\n                    {actorname:user.firstname+ \" \"+user.lastname,\n                    actorId:user._id,\n                   order_id:medication._id,\n                   action:\"Discountinued\", \n                    comments: refs[i].current.value, \n                    createdat:new Date().toLocaleString(), \n                    description:\"Discontinued \" + medication.order + \" for \" + user.firstname+ \" \"+user.lastname+ \" @ \"+ new Date().toLocaleString() ,  \n                  } \n    \n    \n                  medication.treatment_action=[treatment_action, ... medication.treatment_action]\n                  const  treatment_doc =\n                            {\n                            Description:\"Discontinued  \" + medication.order + \" for \" + user.firstname+ \" \"+user.lastname+ \" @ \"+new  Date().toLocaleString() ,  \n                            Comments: refs[i].current.value, \n                        } \n                  let productItem=treatment_doc\n                  let document={}\n                  // data.createdby=user._id\n                  // console.log(data);\n                  document.order=medication\n                  document.update=treatment_action\n                   if (user.currentEmployee){\n                   document.facility=user.currentEmployee.facilityDetail._id \n                   document.facilityname=user.currentEmployee.facilityDetail.facilityName // or from facility dropdown\n                   }\n                  document.documentdetail=productItem\n                  console.log(document.documentdetail)\n                   document.documentname=\"Drug Administration\" //state.DocumentClassModule.selectedDocumentClass.name\n                  // document.documentClassId=state.DocumentClassModule.selectedDocumentClass._id\n                  document.location=state.employeeLocation.locationName+\" \"+state.employeeLocation.locationType\n                  document.locationId=state.employeeLocation.locationId\n                   document.client=state.ClientModule.selectedClient._id\n                   document.clientname=state.ClientModule.selectedClient.firstname+ \" \"+state.ClientModule.selectedClient.middlename+\" \"+state.ClientModule.selectedClient.lastname\n                   document.clientobj=state.ClientModule.selectedClient\n                   document.createdBy=user._id\n                   document.createdByname=user.firstname+ \" \"+user.lastname\n                   document.status=\"completed\"\n                   console.log(document)\n                 ClientServ.create(document)\n                 .then((res)=>{\n                         //console.log(JSON.stringify(res))\n                        // e.target.reset();\n                        /*  setMessage(\"Created Client successfully\") */\n                         setSuccess(true)\n                         toast({\n                             message: 'Drug administered succesfully',\n                             type: 'is-success',\n                             dismissible: true,\n                             pauseOnHover: true,\n                           })\n                           setSuccess(false)\n                           refs[i].current.value=\"\"\n                          // setProductItem([])\n                     })\n                     .catch((err)=>{\n                         toast({\n                             message: 'Error In Drugs Adminstration ' + err,\n                             type: 'is-danger',\n                             dismissible: true,\n                             pauseOnHover: true,\n                           })\n                     })\n                     }\n        }\n\n        const handleDrop=(medication,i)=>{\n            let confirm = window.confirm(`You are about to drop this medication ${medication.order} for ${ state.ClientModule.selectedClient.firstname+ \" \"+state.ClientModule.selectedClient.middlename+\" \"+state.ClientModule.selectedClient.lastname} ?`)\n            if (confirm){\n                console.log(\"order\",medication)\n                medication.treatment_status=\"Aborted\"\n                medication.drop=true\n               \n    \n               const  treatment_action =\n                    {actorname:user.firstname+ \" \"+user.lastname,\n                    actorId:user._id,\n                   order_id:medication._id,\n                   action:\"Aborted\", \n                    comments: refs[i].current.value, \n                    createdat:new Date().toLocaleString(), \n                    description:\"Dropped \" + medication.order + \" for \" + user.firstname+ \" \"+user.lastname+ \" @ \"+ new Date().toLocaleString() ,  \n                  } \n    \n    \n                  medication.treatment_action=[treatment_action, ... medication.treatment_action]\n                  const  treatment_doc =\n                            {\n                            Description:\"Dropped  \" + medication.order + \" for \" + user.firstname+ \" \"+user.lastname+ \" @ \"+new  Date().toLocaleString() ,  \n                            Comments: refs[i].current.value, \n                        } \n                  let productItem=treatment_doc\n                  let document={}\n                  // data.createdby=user._id\n                  // console.log(data);\n                  document.order=medication\n                  document.update=treatment_action\n                   if (user.currentEmployee){\n                   document.facility=user.currentEmployee.facilityDetail._id \n                   document.facilityname=user.currentEmployee.facilityDetail.facilityName // or from facility dropdown\n                   }\n                  document.documentdetail=productItem\n                  console.log(document.documentdetail)\n                   document.documentname=\"Drug Administration\" //state.DocumentClassModule.selectedDocumentClass.name\n                  // document.documentClassId=state.DocumentClassModule.selectedDocumentClass._id\n                  document.location=state.employeeLocation.locationName+\" \"+state.employeeLocation.locationType\n                  document.locationId=state.employeeLocation.locationId\n                   document.client=state.ClientModule.selectedClient._id\n                   document.clientname=state.ClientModule.selectedClient.firstname+ \" \"+state.ClientModule.selectedClient.middlename+\" \"+state.ClientModule.selectedClient.lastname\n                   document.clientobj=state.ClientModule.selectedClient\n                   document.createdBy=user._id\n                   document.createdByname=user.firstname+ \" \"+user.lastname\n                   document.status=\"completed\"\n                   console.log(document)\n                 ClientServ.create(document)\n                 .then((res)=>{\n                         //console.log(JSON.stringify(res))\n                        // e.target.reset();\n                        /*  setMessage(\"Created Client successfully\") */\n                         setSuccess(true)\n                         toast({\n                             message: 'Drug administered succesfully',\n                             type: 'is-success',\n                             dismissible: true,\n                             pauseOnHover: true,\n                           })\n                           setSuccess(false)\n                           refs[i].current.value=\"\"\n                          // setProductItem([])\n                     })\n                     .catch((err)=>{\n                         toast({\n                             message: 'Error In Drugs Adminstration ' + err,\n                             type: 'is-danger',\n                             dismissible: true,\n                             pauseOnHover: true,\n                           })\n                     })\n                     }\n        }\n         \n        const handleRow= async(ProductEntry)=>{\n             //console.log(\"b4\",state)\n     \n             //console.log(\"handlerow\",ProductEntry)\n             if(!standalone){\n     \n             await setSelectedOrder(ProductEntry)\n     \n             const    newProductEntryModule={\n                 selectedOrder:ProductEntry,\n                 show :'detail'\n             }\n            await setState((prevstate)=>({...prevstate, OrderModule:newProductEntryModule}))\n            //console.log(state)\n          }\n         }\n     \n        const handleSearch=(val)=>{\n            const field='name'\n            console.log(val)\n            OrderServ.find({query: {\n                   $or:[ { order: {\n                         $regex:val,\n                         $options:'i'\n                        \n                     }},\n                     {order_status: {\n                         $regex:val,\n                         $options:'i'\n                        \n                     }}],\n                     order_category:\"Prescription\",\n                    // storeId:state.StoreModule.selectedStore._id,\n                    //facility:user.currentEmployee.facilityDetail._id || \"\",\n                     $limit:10,\n                     $sort: {\n                         createdAt: -1\n                       }\n                         }}).then((res)=>{\n                     console.log(res)\n                    setFacilities(res.data)\n                     setMessage(\" ProductEntry  fetched successfully\")\n                     setSuccess(true) \n                 })\n                 .catch((err)=>{\n                     console.log(err)\n                     setMessage(\"Error fetching ProductEntry, probable network issues \"+ err )\n                     setError(true)\n                 })\n             }\n        \n        const getFacilities= async()=>{\n            \n                 console.log(\"here b4 server\")\n                 console.log(state.ClientModule.selectedClient._id)\n                  const findProductEntry= await OrderServ.find(\n                     {query: {\n                         order_category:\"Prescription\",\n                         //destination: user.currentEmployee.facilityDetail._id,\n                        \n                         //storeId:state.StoreModule.selectedStore._id,\n                         clientId:state.ClientModule.selectedClient._id,\n                         drop:false,\n                         $limit:200,\n                         $sort: {\n                            treatment_status:1,\n                             createdAt: -1,\n                             \n                         }\n                         }})\n              await setFacilities(findProductEntry.data)\n              }   \n     \n        useEffect(() => {\n                     console.log(\"started\")\n                     getFacilities()\n                   \n                    \n                    OrderServ.on('created', (obj)=>getFacilities())\n                     OrderServ.on('updated', (obj)=>getFacilities())\n                     OrderServ.on('patched', (obj)=>getFacilities())\n                     OrderServ.on('removed', (obj)=>getFacilities())\n                     return () => {\n                     \n                     }\n                 },[])\n     \n                 \n         return(\n             \n                 <>  \n                     <div className=\"level\">\n                         <div className=\"level-left\">\n                             <div className=\"level-item\">\n                                 <div className=\"field\">\n                                     <p className=\"control has-icons-left  \">\n                                         <DebounceInput className=\"input is-small \" \n                                             type=\"text\" placeholder=\"Search Medications\"\n                                             minLength={3}\n                                             debounceTimeout={400}\n                                             onChange={(e)=>handleSearch(e.target.value)} />\n                                         <span className=\"icon is-small is-left\">\n                                             <i className=\"fas fa-search\"></i>\n                                         </span>\n                                     </p>\n                                 </div>\n                             </div>\n                         </div>\n                        {!standalone && (<><div className=\"level-item\"> <span className=\"is-size-6 has-text-weight-medium\">List of Prescriptions </span></div>\n                         <div className=\"level-right\">\n                             <div className=\"level-item\"> \n                                 <div className=\"level-item\"><div className=\"button is-success is-small\" onClick={handleCreateNew}>New</div></div>\n                             </div>\n                         </div></>)}\n     \n                     </div>\n                     <div className=\"table-container pullup \">\n                                     <table className=\"table is-striped is-narrow is-hoverable is-fullwidth is-scrollable \">\n                                         <thead>\n                                             <tr>\n                                             <th><abbr title=\"Serial No\">S/No</abbr></th>\n                                             <th><abbr title=\"Date\">Date</abbr></th>\n                                             <th><abbr title=\"Order\">Medication</abbr></th>\n                                             <th>Instructions</th>\n                                             \n                                             <th><abbr title=\"Status\">Status</abbr></th>\n                                             <th><abbr title=\"Last Administered\">Last Administered</abbr></th>\n                                             <th><abbr title=\"Latest Comments\">Latest Comments</abbr></th>\n                                             <th><abbr title=\"Administered by\">Administered By</abbr></th> \n                                             <th><abbr title=\"Comments\">New Comments</abbr></th> \n                                             <th><abbr title=\"Actions\">Actions</abbr></th>\n                                             </tr>\n                                         </thead>\n                                         <tfoot>\n                                             \n                                         </tfoot>\n                                         <tbody>\n                                             {facilities.map((ProductEntry, i)=>(\n     \n                                                 <tr key={ProductEntry._id} /* onClick={()=>handleRow(ProductEntry)} */ className={ProductEntry.treatment_status===\"Cancelled\"?\"cancel\":\"\"}>\n                                                 <th>{i+1}</th>\n                                                 <td>{/* {formatDistanceToNowStrict(new Date(ProductEntry.createdAt),{addSuffix: true})} <br/> */}<span>{format(new Date(ProductEntry.createdAt),'dd-MM-yy')}</span></td>\n                                                 <th>{ProductEntry.order}</th>\n                                                 <th>{ProductEntry.instruction}</th>\n                                                 {/* <td>{ProductEntry.requestingdoctor_Name}</td> */}\n                                                 <td>{ProductEntry.treatment_status}</td>\n                                                 <td>{ProductEntry.treatment_action[0]?.createdat &&<span>{format(new Date(ProductEntry.treatment_action[0].createdat),'dd-MM-yy hh:mmm:ss')}</span>}</td>\n                                                 <td>{ProductEntry.treatment_action[0]?.comments} </td>\n                                                 <td>{ProductEntry.treatment_action[0]?.actorname} </td>\n                                                 {/* <td>{ProductEntry.clientId}</td> */}\n                                                 <td> <input classname=\"input\" type=\"text\" name={i} ref={refs[i]}/></td>\n                                               <td> \n                                               \n                                                 <button className=\"button is-small btnheight is-primary\" disabled={ProductEntry.treatment_status===\"Cancelled\"} aria-label=\"more options\" onClick={()=>handleAdminister (ProductEntry,i)}>\n                                                                 <span>Administer</span>\n                                                             </button> \n                                                    <button className=\"button is-small btnheight is-info\" aria-label=\"more options\" onClick={()=>handleHistory(ProductEntry,i)}>\n                                                                 <span>History</span>\n                                                             </button>  \n                                                    <button className=\"button is-small btnheight is-warning\" disabled={ProductEntry.treatment_status===\"Cancelled\"} aria-label=\"more options\" onClick={()=>handleDiscontinue(ProductEntry,i)}>\n                                                                 <span>Discountinue</span>\n                                                             </button>       \n                                                    <button className=\"button is-small btnheight  is-danger\"  disabled={ProductEntry.treatment_status===\"Cancelled\"} aria-label=\"more options\" onClick={()=>handleDrop(ProductEntry,i)}>\n                                                                 <span>Drop </span>\n                                                             </button>            \n                                                             </td>\n                                                \n                                                 </tr>\n     \n                                             ))}\n                                         </tbody>\n                                         </table>\n                     </div>   \n                     <div className={`modal ${hxModal?\"is-active\":\"\"}` }>\n                    <div className=\"modal-background\"></div>\n                        <div className=\"modal-card\">\n                            <header className=\"modal-card-head\">\n                            <p className=\"modal-card-title\">Drug Admin History </p>\n                           \n\n                            <button className=\"delete\" aria-label=\"close\"  onClick={handlecloseModal1}></button>\n                            </header>\n                            <section className=\"modal-card-body\">\n                            <div className=\"table-container pullup \">\n                                <div>\n                                <span className='is-medium'><strong>{currentMed.order}</strong></span><br/>\n                                <span><strong>Instruction: </strong>{currentMed.instruction}</span><br/>\n                            <span><strong>Ordered by:</strong> {currentMed.requestingdoctor_Name}</span><br/>\n                           {currentMed.createdAt && <span><strong>{formatDistanceToNowStrict(new Date(currentMed.createdAt),{addSuffix: true})}</strong> <span>{format(new Date(currentMed.createdAt),'dd-MM-yy')}</span></span> }\n                                </div>\n                                     <table className=\"table is-striped is-narrow is-hoverable is-fullwidth is-scrollable \">\n                                         <thead>\n                                             <tr>\n                                             <th><abbr title=\"Serial No\">S/No</abbr></th>\n                                             <th><abbr title=\"Date\">Date/Time</abbr></th>\n                                             <th><abbr title=\"Action\">Action</abbr></th>\n                                             <th>Comments</th>\n                                             <th><abbr title=\"Personnel\">Personel</abbr></th>\n                                            {/*  <th><abbr title=\"Status\">Status</abbr></th>\n                                             <th><abbr title=\"Last Administered\">Last Administered</abbr></th>\n                                             <th><abbr title=\"Administered by\">Administered By</abbr></th> \n                                             <th><abbr title=\"Comments\">Comments</abbr></th> \n                                             <th><abbr title=\"Actions\">Actions</abbr></th> */}\n                                             </tr>\n                                         </thead>\n                                         <tfoot>\n                                             \n                                         </tfoot>\n                                         <tbody>\n                                        {currentMed.hasOwnProperty('treatment_action') &&    currentMed.treatment_action.map((ProductEntry, i)=>(\n     \n                                                 <tr key={ProductEntry._id} /* onClick={()=>handleRow(ProductEntry)}  className={ProductEntry._id!== \"Active\"?\"is-selected\":\"\"}*/ >\n                                                 <th>{i+1}</th>\n                                                 <td>{ProductEntry.createdat &&<span>{format(new Date(ProductEntry.createdat),'dd-MM-yy hh:mmm:ss')}</span>}</td>\n                                                 <th>{ProductEntry.action}</th>\n                                                 <th>{ProductEntry.comments}</th>\n                                                 <td>{ProductEntry.actorname} </td>\n                                                \n                                                 </tr>\n     \n                                             ))}\n                                         </tbody>\n                                         </table>\n                                         </div>\n                            \n                            {/* <StoreList standalone=\"true\" /> */}\n                            {/* <BillServiceCreate closeModal={handlecloseModal1}/> */}\n                            </section>\n                            {/* <footer className=\"modal-card-foot\">\n                            <button className=\"button is-success\">Save changes</button>\n                            <button className=\"button\">Cancel</button>\n                            </footer> */}\n                        </div>\n                </div>                           \n                 </>\n                   \n         )\n         }\n\nexport function ProductEntryDetail(){\n    //const { register, handleSubmit, watch, setValue } = useForm(); //errors,\n     // eslint-disable-next-line\n    const [error, setError] =useState(false) //, \n    //const [success, setSuccess] =useState(false)\n     // eslint-disable-next-line\n    const [message, setMessage] = useState(\"\") //,\n    //const ProductEntryServ=client.service('/ProductEntry')\n    //const history = useHistory()\n    //const {user,setUser} = useContext(UserContext)\n    const {state,setState} = useContext(ObjectContext)\n\n   \n\n   const ProductEntry =state.ProductEntryModule.selectedProductEntry \n\n    const handleEdit= async()=>{\n        const    newProductEntryModule={\n            selectedProductEntry:ProductEntry,\n            show :'modify'\n        }\n       await setState((prevstate)=>({...prevstate, ProductEntryModule:newProductEntryModule}))\n       //console.log(state)\n       \n    }\n \n    return (\n        <>\n        <div className=\"card \">\n            <div className=\"card-header\">\n                <p className=\"card-header-title\">\n                    ProductEntry Details\n                </p>\n            </div>\n            <div className=\"card-content vscrollable\">\n           \n                <table> \n                <tbody>         \n                <tr>\n                    <td>\n                      <label className=\"label is-small\"> <span className=\"icon is-small is-left\">\n                            <i className=\"fas fa-hospital\"></i>\n                        </span>                    \n                        Type\n                        </label>\n                    </td>\n                    <td>\n                        <span className=\"is-size-7 padleft\"   name=\"name\"> {ProductEntry.type} </span>\n                    </td>\n                    <td>\n\n                    </td>\n                    <td>\n                        <label className=\"label is-small padleft\"><span className=\"icon is-small is-left\">\n                            <i className=\"fas fa-map-signs\"></i>\n                        </span>Supplier:\n                        </label>\n                    </td>\n                    <td>\n                        <span className=\"is-size-7 padleft\"   name=\"ProductEntryType\">{ProductEntry.source} </span> \n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <label className=\"label is-small\"> <span className=\"icon is-small is-left\">\n                        <i className=\"fas fa-hospital\"></i>\n                        </span>                    \n                        Date:\n                        </label>\n                    </td>\n                    <td>\n                        <span className=\"is-size-7 padleft\"   name=\"name\"> {ProductEntry.date} </span>\n                    </td>\n                    <td>\n                                \n                    </td>\n                    <td>\n                        <label className=\"label is-small padleft\"><span className=\"icon is-small is-left\">\n                            <i className=\"fas fa-map-signs\"></i>\n                        </span>Invoice No:\n                        </label>\n                    </td>\n                    \n                    <td>\n                         <span className=\"is-size-7 padleft\"   name=\"ProductEntryType\">{ProductEntry.documentNo} </span> \n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                \n                        <label className=\"label is-small\"> <span className=\"icon is-small is-left\">\n                        <i className=\"fas fa-hospital\"></i>\n                    </span>            \n                        Total Amount:\n                    </label>\n                    </td>\n                    <td>\n                        <span className=\"is-size-7 padleft\"   name=\"name\"> {ProductEntry.totalamount} </span>\n                    </td>\n                </tr>\n\n                </tbody> \n            </table> \n            <label className=\"label is-size-7 mt-2\">Product Items:</label>\n         <table className=\"table is-striped  is-hoverable is-fullwidth is-scrollable \">\n                <thead>\n                    <tr>\n                    <th><abbr title=\"Serial No\">S/No</abbr></th>\n                    <th><abbr title=\"Type\">Name</abbr></th>\n                    <th><abbr title=\"Type\">Quanitity</abbr></th>\n                    <th><abbr title=\"Document No\">Unit</abbr></th>\n                    <th><abbr title=\"Cost Price\">Cost Price</abbr></th>\n                    <th><abbr title=\"Cost Price\">Amount</abbr></th>\n                   \n                    </tr>\n                </thead>\n                <tfoot>\n                    \n                </tfoot>\n                <tbody>\n                   { ProductEntry.productitems.map((ProductEntry, i)=>(\n\n                        <tr key={i}>\n                        <th>{i+1}</th>\n                        <td>{ProductEntry.name}</td>\n                        <th>{ProductEntry.quantity}</th>\n                        <td>{ProductEntry.baseunit}</td>\n                        <td>{ProductEntry.costprice}</td>\n                        <td>{ProductEntry.amount}</td>\n                        \n                        \n                        </tr>\n\n                    ))}\n                </tbody>\n                </table>\n                  {/*   <tr>\n                    <td>\n            <label className=\"label is-small\"><span className=\"icon is-small is-left\">\n                    <i className=\"fas fa-map-marker-alt\"></i>\n                    </span>Profession: \n                \n                    \n                    </label>\n                    </td>\n                <td>\n                <span className=\"is-size-7 padleft \"  name=\"ProductEntryCity\">{ProductEntry.profession}</span> \n                </td>\n                </tr>\n                    <tr>\n            <td>\n            <label className=\"label is-small\"><span className=\"icon is-small is-left\">\n                    <i className=\"fas fa-phone-alt\"></i>\n                    </span>Phone:           \n                    \n                        </label>\n                        </td>\n                        <td>\n                        <span className=\"is-size-7 padleft \"  name=\"ProductEntryContactPhone\" >{ProductEntry.phone}</span>\n                        </td>\n                  </tr>\n                    <tr><td>\n            \n            <label className=\"label is-small\"><span className=\"icon is-small is-left\">\n                    <i className=\"fas fa-envelope\"></i>\n                    </span>Email:                     \n                    \n                         </label></td><td>\n                         <span className=\"is-size-7 padleft \"  name=\"ProductEntryEmail\" >{ProductEntry.email}</span>\n                         </td>\n             \n                </tr>\n                    <tr>\n            <td>\n            <label className=\"label is-small\"> <span className=\"icon is-small is-left\">\n                    <i className=\"fas fa-user-md\"></i></span>Department:\n                    \n                    </label></td>\n                    <td>\n                    <span className=\"is-size-7 padleft \"  name=\"ProductEntryOwner\">{ProductEntry.department}</span>\n                    </td>\n               \n                </tr>\n                    <tr>\n            <td>\n            <label className=\"label is-small\"> <span className=\"icon is-small is-left\">\n                    <i className=\"fas fa-hospital-symbol\"></i>\n                    </span>Departmental Unit:              \n                    \n                </label></td>\n                <td>\n                <span className=\"is-size-7 padleft \"  name=\"ProductEntryType\">{ProductEntry.deptunit}</span>\n                </td>\n              \n                </tr> */}\n                    \n          {/*   <div className=\"field\">\n             <label className=\"label is-small\"><span className=\"icon is-small is-left\">\n                    <i className=\"fas fa-clinic-medical\"></i>\n                    </span>Category:              \n                    <span className=\"is-size-7 padleft \"  name= \"ProductEntryCategory\">{ProductEntry.ProductEntryCategory}</span>\n                </label>\n                 </div> */}\n\n            \n           \n           {/*  <div className=\"field mt-2\">\n                <p className=\"control\">\n                    <button className=\"button is-success is-small\" onClick={handleEdit}>\n                        Edit\n                    </button>\n                </p>\n            </div>\n            { error && <div className=\"message\"> {message}</div>} */}\n           \n        </div>\n        </div>\n        </>\n    )\n   \n   \n}\n\nexport function ProductEntryModify(){\n    const { register, handleSubmit, setValue,reset, errors } = useForm(); //watch, errors,\n    // eslint-disable-next-line \n    const [error, setError] =useState(false)\n    // eslint-disable-next-line \n    const [success, setSuccess] =useState(false)\n    // eslint-disable-next-line \n    const [message,setMessage] = useState(\"\")\n    // eslint-disable-next-line \n    const ProductEntryServ=client.service('productentry')\n    //const history = useHistory()\n     // eslint-disable-next-line\n    const {user} = useContext(UserContext)\n    const {state,setState} = useContext(ObjectContext)\n\n    const ProductEntry =state.ProductEntryModule.selectedProductEntry \n\n        useEffect(() => {\n            setValue(\"name\", ProductEntry.name,  {\n                shouldValidate: true,\n                shouldDirty: true\n            })\n            setValue(\"ProductEntryType\", ProductEntry.ProductEntryType,  {\n                shouldValidate: true,\n                shouldDirty: true\n            })\n           /*  setValue(\"profession\", ProductEntry.profession,  {\n                shouldValidate: true,\n                shouldDirty: true\n            })\n            setValue(\"phone\", ProductEntry.phone,  {\n                shouldValidate: true,\n                shouldDirty: true\n            })\n            setValue(\"email\", ProductEntry.email,  {\n                shouldValidate: true,\n                shouldDirty: true\n            })\n            setValue(\"department\", ProductEntry.department,  {\n                shouldValidate: true,\n                shouldDirty: true\n            })\n            setValue(\"deptunit\", ProductEntry.deptunit,  {\n                shouldValidate: true,\n                shouldDirty: true\n            }) */\n          /*   setValue(\"ProductEntryCategory\", ProductEntry.ProductEntryCategory,  {\n                shouldValidate: true,\n                shouldDirty: true\n            }) */\n            \n            return () => {\n                \n            }\n        })\n\n   const handleCancel=async()=>{\n    const    newProductEntryModule={\n        selectedProductEntry:{},\n        show :'create'\n      }\n   await setState((prevstate)=>({...prevstate, ProductEntryModule:newProductEntryModule}))\n   //console.log(state)\n           }\n\n\n        const changeState =()=>{\n        const    newProductEntryModule={\n            selectedProductEntry:{},\n            show :'create'\n        }\n        setState((prevstate)=>({...prevstate, ProductEntryModule:newProductEntryModule}))\n\n        }\n    const handleDelete=async()=>{\n        let conf=window.confirm(\"Are you sure you want to delete this data?\")\n        \n        const dleteId=ProductEntry._id\n        if (conf){\n             \n        ProductEntryServ.remove(dleteId)\n        .then((res)=>{\n                //console.log(JSON.stringify(res))\n                reset();\n               /*  setMessage(\"Deleted ProductEntry successfully\")\n                setSuccess(true)\n                changeState()\n               setTimeout(() => {\n                setSuccess(false)\n                }, 200); */\n                toast({\n                    message: 'ProductEntry deleted succesfully',\n                    type: 'is-success',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  })\n                changeState()\n            })\n            .catch((err)=>{\n               // setMessage(\"Error deleting ProductEntry, probable network issues \"+ err )\n               // setError(true)\n                toast({\n                    message: \"Error deleting ProductEntry, probable network issues or \"+ err,\n                    type: 'is-danger',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  })\n            })\n        }\n    }\n        \n\n   /* ()=> setValue(\"firstName\", \"Bill\", , {\n            shouldValidate: true,\n            shouldDirty: true\n          })) */\n    const onSubmit = (data,e) =>{\n        e.preventDefault();\n        \n        setSuccess(false)\n        console.log(data)\n        data.facility=ProductEntry.facility\n          //console.log(data);\n          \n        ProductEntryServ.patch(ProductEntry._id,data)\n        .then((res)=>{\n                //console.log(JSON.stringify(res))\n               // e.target.reset();\n               // setMessage(\"updated ProductEntry successfully\")\n                 toast({\n                    message: 'ProductEntry updated succesfully',\n                    type: 'is-success',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  })\n                  \n                changeState()\n\n            })\n            .catch((err)=>{\n                //setMessage(\"Error creating ProductEntry, probable network issues \"+ err )\n               // setError(true)\n                toast({\n                    message: \"Error updating ProductEntry, probable network issues or \"+ err,\n                    type: 'is-danger',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  })\n            })\n\n      } \n     \n      \n    return (\n        \n        <>\n        <div className=\"card \">\n            <div className=\"card-header\">\n                <p className=\"card-header-title\">\n                    ProductEntry Details-Modify\n                </p>\n            </div>\n            <div className=\"card-content vscrollable\">\n           \n            <form onSubmit={handleSubmit(onSubmit)}>\n                <div className=\"field\">\n                    <label className=\"label is-small\"> Name\n                    <p className=\"control has-icons-left has-icons-right\">\n                        <input className=\"input  is-small\" ref={register({ required: true })}  name=\"name\" type=\"text\" placeholder=\"Name\" />\n                        <span className=\"icon is-small is-left\">\n                            <i className=\"fas fa-hospital\"></i>\n                        </span>                    \n                    </p>\n                    </label>\n                    </div>\n                <div className=\"field\">\n                <label className=\"label is-small\">ProductEntry Type\n                    <p className=\"control has-icons-left has-icons-right\">\n                    <input className=\"input is-small \" ref={register({ required: true })} disabled name=\"ProductEntryType\" type=\"text\" placeholder=\"ProductEntry Type\" />\n                    <span className=\"icon is-small is-left\">\n                        <i className=\"fas fa-map-signs\"></i>\n                    </span>\n                    \n                </p>\n                </label>\n                </div>\n            {/* <div className=\"field\">\n            <label className=\"label is-small\">Profession\n                <p className=\"control has-icons-left\">\n                    <input className=\"input is-small\" ref={register({ required: true })} name=\"profession\" type=\"text\" placeholder=\"Profession\"/>\n                    <span className=\"icon is-small is-left\">\n                    <i className=\"fas fa-map-marker-alt\"></i>\n                    </span>\n                </p>\n                </label>\n                </div>\n            <div className=\"field\">\n            <label className=\"label is-small\">Phone\n                <p className=\"control has-icons-left\">\n                    <input className=\"input is-small\" ref={register({ required: true })} name=\"phone\" type=\"text\" placeholder=\"Phone No\"/>\n                    <span className=\"icon is-small is-left\">\n                    <i className=\"fas fa-phone-alt\"></i>\n                    </span>\n                </p>\n                </label>\n                 </div>\n            <div className=\"field\">\n            <label className=\"label is-small\">Email\n                <p className=\"control has-icons-left\">\n                    <input className=\"input is-small\" ref={register({ required: true })} name=\"email\" type=\"email\" placeholder=\"ProductEntry Email\"/>\n                    <span className=\"icon is-small is-left\">\n                    <i className=\"fas fa-envelope\"></i>\n                    </span>\n                </p>\n                </label>\n                </div>\n            <div className=\"field\">\n            <label className=\"label is-small\">Department\n                <p className=\"control has-icons-left\">\n                    <input className=\"input is-small\" ref={register({ required: true })} name=\"department\" type=\"text\" placeholder=\"Department\"/>\n                    <span className=\"icon is-small is-left\">\n                    <i className=\"fas fa-user-md\"></i>\n                    </span>\n                </p>\n                </label>\n                {errors.department && <span>This field is required</span>}\n                </div>\n            <div className=\"field\">\n            <label className=\"label is-small\">Departmental Unit\n                <p className=\"control has-icons-left\">\n                    <input className=\"input is-small\" ref={register({ required: true })} name=\"deptunit\" type=\"text\" placeholder=\"Departmental Unit\"/>\n                    <span className=\"icon is-small is-left\">\n                    <i className=\"fas fa-hospital-symbol\"></i>\n                    </span>\n                </p>\n                </label>\n                </div> */}\n           {/*  <div className=\"field\">\n            <label className=\"label is-small\">Category\n                <p className=\"control has-icons-left\">\n                    <input className=\"input is-small\" ref={register({ required: true })} name=\"ProductEntryCategory\" type=\"text\" placeholder=\"ProductEntry Category\"/>\n                    <span className=\"icon is-small is-left\">\n                    <i className=\"fas fa-clinic-medical\"></i>\n                    </span>\n                </p>\n                </label>\n            </div> */}\n           \n           \n            </form>\n            \n            <div className=\"field  is-grouped mt-2\" >\n                <p className=\"control\">\n                    <button type=\"submit\" className=\"button is-success is-small\" onClick={handleSubmit(onSubmit)}>\n                        Save\n                    </button>\n                </p>\n                <p className=\"control\">\n                    <button className=\"button is-warning is-small\" onClick={handleCancel}>\n                        Cancel\n                    </button>\n                </p>\n                <p className=\"control\">\n                    <button className=\"button is-danger is-small\" onClick={()=>handleDelete()} type=\"delete\">\n                       Delete\n                    </button>\n                </p>\n            </div>\n        </div>\n        </div>\n        </>\n    )\n   \n   \n                \n}   \n\nexport  function MedicationHelperSearch({getSearchfacility,clear}) {\n    \n    const productServ=client.service('medicationhelper')\n    const [facilities,setFacilities]=useState([])\n     // eslint-disable-next-line\n     const [searchError, setSearchError] =useState(false)\n     // eslint-disable-next-line\n    const [showPanel, setShowPanel] =useState(false)\n     // eslint-disable-next-line\n   const [searchMessage, setSearchMessage] = useState(\"\") \n   // eslint-disable-next-line \n   const [simpa,setSimpa]=useState(\"\")\n   // eslint-disable-next-line \n   const [chosen,setChosen]=useState(false)\n   // eslint-disable-next-line \n   const [count,setCount]=useState(0)\n   const inputEl=useRef(null)\n   const [val,setVal]=useState(\"\")\n    const [productModal,setProductModal]=useState(false)\n   let value\n\n   const handleRow= async(obj)=>{\n        await setChosen(true)\n        //alert(\"something is chaning\")\n       getSearchfacility(obj)\n  \n       \n       await  setSimpa(obj.medication)\n      \n        // setSelectedFacility(obj)\n        setShowPanel(false)\n        await setCount(2)\n        /* const    newfacilityModule={\n            selectedFacility:facility,\n            show :'detail'\n        }\n   await setState((prevstate)=>({...prevstate, facilityModule:newfacilityModule})) */\n   //console.log(state)\n}\n    const handleBlur=async(e)=>{\n         if (count===2){\n             console.log(\"stuff was chosen\")\n         }\n       \n       /*  console.log(\"blur\")\n         setShowPanel(false)\n        console.log(JSON.stringify(simpa))\n        if (simpa===\"\"){\n            console.log(facilities.length)\n            setSimpa(\"abc\")\n            setSimpa(\"\")\n            setFacilities([])\n            inputEl.current.setValue=\"\"\n        }\n        console.log(facilities.length)\n        console.log(inputEl.current) */\n    }\n    const handleSearch=async(value)=>{\n        setVal(value)\n        if (value===\"\"){\n            setShowPanel(false)\n            getSearchfacility(false)\n            return\n        }\n        const field='medication' //field variable\n\n       \n        if (value.length>=3 ){\n            productServ.find({query: {     //service\n                 [field]: {\n                     $regex:value,\n                     $options:'i'\n                    \n                 },\n                 $limit:10,\n                 $sort: {\n                     createdAt: -1\n                   }\n                     }}).then((res)=>{\n              console.log(\"product  fetched successfully\") \n              console.log(res) \n                    if(res.total>0){\n                        setFacilities(res.data)\n                        setSearchMessage(\" product  fetched successfully\")\n                        setShowPanel(true)\n                    }else{\n                        setShowPanel(false)\n                        getSearchfacility({\n                            medication:value,\n                            instruction:\"\"\n                        })\n                    }\n               \n             })\n             .catch((err)=>{\n                toast({\n                    message: 'Error fetching medication ' + err,\n                    type: 'is-danger',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  })\n             })\n         }\n        else{\n            console.log(\"less than 3 \")\n            console.log(val)\n            setShowPanel(false)\n            await setFacilities([])\n            console.log(facilities)\n        }\n    }\n\n    const handleAddproduct =()=>{\n        setProductModal(true) \n    }\n    const handlecloseModal =()=>{\n       // setDestinationModal(false)\n        //handleSearch(val)\n    }\n    useEffect(() => {\n        setSimpa(value)\n        return () => {\n            \n        }\n    }, [simpa])\n    useEffect(() => {\n       if (clear){\n           console.log(\"success has changed\",clear)\n           setSimpa(\"\")\n       }\n        return () => {\n            \n        }\n    }, [clear] )\n    return (\n        <div>\n            <div className=\"field\">\n                <div className=\"control has-icons-left  \">\n                    <div className={`dropdown ${showPanel?\"is-active\":\"\"}`} style={{width:\"100%\"}}>\n                        <div className=\"dropdown-trigger\" style={{width:\"100%\"}}>\n                            <DebounceInput className=\"input is-small \" \n                                type=\"text\" placeholder=\"Search Order\"\n                                value={simpa}\n                                minLength={3}\n                                debounceTimeout={400}\n                               /*  onBlur={(e)=>handleBlur(e)} */\n                                onChange={(e)=>handleSearch(e.target.value)}\n                                inputRef={inputEl}\n                                  />\n                            <span className=\"icon is-small is-left\">\n                                <i className=\"fas fa-search\"></i>\n                            </span>\n                        </div>\n                        {/* {searchError&&<div>{searchMessage}</div>} */}\n                        <div className=\"dropdown-menu\" style={{width:\"100%\"}} >\n                            <div className=\"dropdown-content\">\n                         {/*  { facilities.length>0?\"\":<div className=\"dropdown-item\" onClick={handleAddproduct}> <span>Add {val} to product list</span> </div>} */}\n\n                              {facilities.map((facility, i)=>(\n                                    \n                                    <div className=\"dropdown-item\" key={facility._id} onClick={()=>handleRow(facility)}>\n                                        \n                                        <span>{facility.medication}</span> // <span>{facility.instruction}</span>\n                                    </div>\n                                    \n                                    ))}\n                                    \n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n           \n        </div>\n    )\n}"]},"metadata":{},"sourceType":"module"}