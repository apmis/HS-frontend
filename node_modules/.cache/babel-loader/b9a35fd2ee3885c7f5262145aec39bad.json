{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _regeneratorRuntime from \"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"/home/mfybaby/Documents/HealthStack2/HS-frontend/src/components/helpers/CategorySearch.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useContext, useEffect, useRef } from 'react'; //import {Route, Switch,  useRouteMatch, Link, NavLink, useHistory} from 'react-router-dom'\n\nimport client from '../../feathers';\nimport { DebounceInput } from 'react-debounce-input'; //import { useForm } from \"react-hook-form\";\n//import {useHistory} from 'react-router-dom'\n\nimport { UserContext, ObjectContext } from '../../context';\nimport { toast } from 'bulma-toast';\nimport { formatDistanceToNowStrict, format } from 'date-fns'; // eslint-disable-next-line\n//const searchfacility={};\n\nexport default function CategorySearch(_ref) {\n  _s();\n\n  var _this = this;\n\n  var id = _ref.id,\n      getSearchfacility = _ref.getSearchfacility,\n      clear = _ref.clear;\n  var ClientServ = client.service('billing');\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      facilities = _useState2[0],\n      setFacilities = _useState2[1]; // eslint-disable-next-line\n\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      searchError = _useState4[0],\n      setSearchError = _useState4[1]; // eslint-disable-next-line\n\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      showPanel = _useState6[0],\n      setShowPanel = _useState6[1]; // eslint-disable-next-line\n\n\n  var _useState7 = useState(\"\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      searchMessage = _useState8[0],\n      setSearchMessage = _useState8[1]; // eslint-disable-next-line \n\n\n  var _useState9 = useState(\"\"),\n      _useState10 = _slicedToArray(_useState9, 2),\n      simpa = _useState10[0],\n      setSimpa = _useState10[1]; // eslint-disable-next-line \n\n\n  var _useState11 = useState(false),\n      _useState12 = _slicedToArray(_useState11, 2),\n      chosen = _useState12[0],\n      setChosen = _useState12[1]; // eslint-disable-next-line \n\n\n  var _useState13 = useState(0),\n      _useState14 = _slicedToArray(_useState13, 2),\n      count = _useState14[0],\n      setCount = _useState14[1];\n\n  var inputEl = useRef(null);\n\n  var _useState15 = useState(\"\"),\n      _useState16 = _slicedToArray(_useState15, 2),\n      val = _useState16[0],\n      setVal = _useState16[1];\n\n  var _useContext = useContext(UserContext),\n      user = _useContext.user;\n\n  var _useContext2 = useContext(ObjectContext),\n      state = _useContext2.state;\n\n  var _useState17 = useState(false),\n      _useState18 = _slicedToArray(_useState17, 2),\n      productModal = _useState18[0],\n      setProductModal = _useState18[1];\n\n  var getInitial = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(id) {\n      var obj;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              console.log(id);\n\n              if (!!id) {\n                obj = {\n                  categoryname: id\n                };\n                console.log(obj);\n                handleRow(obj);\n              }\n\n            case 2:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function getInitial(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    getInitial(id);\n    return function () {};\n  }, []);\n\n  var handleRow = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(obj) {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return setChosen(true);\n\n            case 2:\n              _context2.next = 4;\n              return setSimpa(obj.categoryname);\n\n            case 4:\n              getSearchfacility(obj); // setSelectedFacility(obj)\n\n              setShowPanel(false);\n              _context2.next = 8;\n              return setCount(2);\n\n            case 8:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function handleRow(_x2) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var handleBlur = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(e) {\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function handleBlur(_x3) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  var handleSearch = /*#__PURE__*/function () {\n    var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(val) {\n      var field;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              setVal(val);\n\n              if (!(val === \"\")) {\n                _context4.next = 5;\n                break;\n              }\n\n              setShowPanel(false);\n              getSearchfacility(false);\n              return _context4.abrupt(\"return\");\n\n            case 5:\n              field = 'name'; //field variable\n\n              /* name: { type: String, required: true },\n              locationType: { type: String }, */\n\n              if (!(val.length >= 3)) {\n                _context4.next = 10;\n                break;\n              }\n\n              ClientServ.find({\n                query: {\n                  category: {\n                    $regex: val,\n                    $options: 'i'\n                  },\n\n                  /*  $or:[   { lastname: {\n                      $regex:val,\n                      $options:'i' \n                  }},\n                  { profession: {\n                      $regex:val,\n                      $options:'i' \n                  }},\n                  { department: {\n                      $regex:val,\n                      $options:'i' \n                  }},\n                  { clientTags: {\n                      $regex:val,\n                      $options:'i' \n                  }},\n                  { mrn: {\n                      $regex:val,\n                      $options:'i' \n                  }},\n                  { specificDetails: {\n                      $regex:val,\n                      $options:'i' \n                  }}, \n                  ],*/\n                  //facility: user.currentEmployee.facilityDetail._id,\n                  //storeId: state.StoreModule.selectedStore._id,\n                  $limit: 1000,\n                  $sort: {\n                    category: 1\n                  }\n                }\n              }).then(function (res) {\n                //console.log(\"Service category  fetched successfully\") \n                //console.log(res.data) \n                // console.log(res.groupedOrder)\n                setFacilities(res.groupedOrder);\n                setSearchMessage(\"Service category fetched successfully\");\n                setShowPanel(true);\n              }).catch(function (err) {\n                toast({\n                  message: 'Error searching Service category  ' + err,\n                  type: 'is-danger',\n                  dismissible: true,\n                  pauseOnHover: true\n                });\n              });\n              _context4.next = 16;\n              break;\n\n            case 10:\n              console.log(\"less than 3 \");\n              console.log(val);\n              setShowPanel(false);\n              _context4.next = 15;\n              return setFacilities([]);\n\n            case 15:\n              console.log(facilities);\n\n            case 16:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n\n    return function handleSearch(_x4) {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n\n  var handleAddproduct = function handleAddproduct() {\n    var obj = {\n      categoryname: val\n    };\n    console.log(obj);\n    handleRow(obj); // setProductModal(true) \n  };\n\n  var handlecloseModal = function handlecloseModal() {\n    setProductModal(false);\n    handleSearch(val);\n  };\n\n  useEffect(function () {\n    if (clear) {\n      console.log(\"success has changed\", clear);\n      setSimpa(\"\");\n    }\n\n    return function () {};\n  }, [clear]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"field\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"control has-icons-left  \",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"dropdown \".concat(showPanel ? \"is-active\" : \"\"),\n          style: {\n            width: \"100%\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"dropdown-trigger\",\n            style: {\n              width: \"100%\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(DebounceInput, {\n              className: \"input is-small  is-expanded mb-0\",\n              type: \"text\",\n              placeholder: \"Search for Service Category\",\n              value: simpa,\n              minLength: 3,\n              debounceTimeout: 400,\n              onBlur: function onBlur(e) {\n                return handleBlur(e);\n              },\n              onChange: function onChange(e) {\n                return handleSearch(e.target.value);\n              },\n              inputRef: inputEl\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 198,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"icon is-small is-left\",\n              children: /*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fas fa-search\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 208,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 207,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"dropdown-menu expanded\",\n            style: {\n              width: \"100%\"\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"dropdown-content\",\n              children: [facilities.length > 0 ? \"\" : /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"dropdown-item selectadd dropitem mb-4\",\n                onClick: handleAddproduct,\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: val\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 214,\n                  columnNumber: 42\n                }, this), \" is not a known service category! Add it?\", \" \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 213,\n                columnNumber: 52\n              }, this), facilities.map(function (facility, i) {\n                return /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"dropdown-item selectadd \",\n                  onClick: function onClick() {\n                    return handleRow(facility);\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    children: /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: facility.categoryname\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 220,\n                      columnNumber: 47\n                    }, _this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 220,\n                    columnNumber: 41\n                  }, _this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 231,\n                    columnNumber: 41\n                  }, _this)]\n                }, facility.categoryname, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 218,\n                  columnNumber: 37\n                }, _this);\n              })]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 212,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 211,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal \".concat(productModal ? \"is-active\" : \"\"),\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-background\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 37\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"header\", {\n          className: \"modal-card-head\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"modal-card-title\",\n            children: \"Choose Store\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 245,\n            columnNumber: 41\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"delete\",\n            \"aria-label\": \"close\",\n            onClick: handlecloseModal\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 246,\n            columnNumber: 41\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 244,\n          columnNumber: 41\n        }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n          className: \"modal-card-body\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 41\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 37\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 193,\n    columnNumber: 9\n  }, this);\n}\n\n_s(CategorySearch, \"eX1a5x9NqWjyth6ZwCYEiQvnecw=\");\n\n_c = CategorySearch;\n\nvar _c;\n\n$RefreshReg$(_c, \"CategorySearch\");","map":{"version":3,"sources":["/home/mfybaby/Documents/HealthStack2/HS-frontend/src/components/helpers/CategorySearch.js"],"names":["React","useState","useContext","useEffect","useRef","client","DebounceInput","UserContext","ObjectContext","toast","formatDistanceToNowStrict","format","CategorySearch","id","getSearchfacility","clear","ClientServ","service","facilities","setFacilities","searchError","setSearchError","showPanel","setShowPanel","searchMessage","setSearchMessage","simpa","setSimpa","chosen","setChosen","count","setCount","inputEl","val","setVal","user","state","productModal","setProductModal","getInitial","console","log","obj","categoryname","handleRow","handleBlur","e","handleSearch","field","length","find","query","category","$regex","$options","$limit","$sort","then","res","groupedOrder","catch","err","message","type","dismissible","pauseOnHover","handleAddproduct","handlecloseModal","width","target","value","map","facility","i"],"mappings":"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","sourcesContent":["import React, {useState,useContext, useEffect,useRef} from 'react'\n//import {Route, Switch,  useRouteMatch, Link, NavLink, useHistory} from 'react-router-dom'\nimport client from '../../feathers'\nimport {DebounceInput} from 'react-debounce-input';\n//import { useForm } from \"react-hook-form\";\n//import {useHistory} from 'react-router-dom'\nimport {UserContext,ObjectContext} from '../../context'\nimport {toast} from 'bulma-toast'\nimport { formatDistanceToNowStrict, format } from 'date-fns'\n// eslint-disable-next-line\n//const searchfacility={};\n\n\nexport  default function CategorySearch({id,getSearchfacility,clear}) {\n    \n    const ClientServ=client.service('billing')\n    const [facilities,setFacilities]=useState([])\n     // eslint-disable-next-line\n     const [searchError, setSearchError] =useState(false)\n     // eslint-disable-next-line\n    const [showPanel, setShowPanel] =useState(false)\n     // eslint-disable-next-line\n   const [searchMessage, setSearchMessage] = useState(\"\") \n   // eslint-disable-next-line \n   const [simpa,setSimpa]=useState(\"\")\n   // eslint-disable-next-line \n   const [chosen,setChosen]=useState(false)\n   // eslint-disable-next-line \n   const [count,setCount]=useState(0)\n   const inputEl=useRef(null)\n   const [val,setVal]=useState(\"\")\n   const {user} = useContext(UserContext) \n   const {state}=useContext(ObjectContext)\n    const [productModal,setProductModal]=useState(false)\n\n    const getInitial=async(id)=>{\n        console.log(id)\n        if(!!id){\n\n            let obj={\n                categoryname:id,\n    \n            }\n            console.log(obj)\n            handleRow(obj)\n       }\n    }\n\n        useEffect(() => {\n            getInitial(id)\n            return () => {\n                \n            }\n        }, [])\n\n   const handleRow= async(obj)=>{\n        await setChosen(true)\n        //alert(\"something is chaning\")\n      \n       \n       await setSimpa(obj.categoryname)\n       getSearchfacility(obj)\n        // setSelectedFacility(obj)\n        setShowPanel(false)\n        await setCount(2)\n        /* const    newfacilityModule={\n            selectedFacility:facility,\n            show :'detail'\n        }\n   await setState((prevstate)=>({...prevstate, facilityModule:newfacilityModule})) */\n   //console.log(state)\n    }\n\n    const handleBlur=async(e)=>{\n       /*   if (count===2){\n             console.log(\"stuff was chosen\")\n         } */\n       \n       /*  console.log(\"blur\")\n         setShowPanel(false)\n        console.log(JSON.stringify(simpa))\n        if (simpa===\"\"){\n            console.log(facilities.length)\n            setSimpa(\"abc\")\n            setSimpa(\"\")\n            setFacilities([])\n            inputEl.current.setValue=\"\"\n        }\n        console.log(facilities.length)\n        console.log(inputEl.current) */\n    }\n    const handleSearch=async(val)=>{\n        setVal(val)\n        if (val===\"\"){\n            setShowPanel(false)\n            getSearchfacility(false)\n            return\n        }\n        const field='name' //field variable\n        /* name: { type: String, required: true },\n        locationType: { type: String }, */\n       \n        if (val.length>=3 ){\n            ClientServ.find({query: {\n               \n                   category: {\n                        $regex:val,\n                        $options:'i' \n                    },\n                    /*  $or:[   { lastname: {\n                        $regex:val,\n                        $options:'i' \n                    }},\n                    { profession: {\n                        $regex:val,\n                        $options:'i' \n                    }},\n                    { department: {\n                        $regex:val,\n                        $options:'i' \n                    }},\n                   { clientTags: {\n                        $regex:val,\n                        $options:'i' \n                    }},\n                    { mrn: {\n                        $regex:val,\n                        $options:'i' \n                    }},\n                    { specificDetails: {\n                        $regex:val,\n                        $options:'i' \n                    }}, \n                ],*/\n              \n                 //facility: user.currentEmployee.facilityDetail._id,\n                 //storeId: state.StoreModule.selectedStore._id,\n                 $limit:1000,\n                 $sort: {\n                    category: 1\n                   }\n                     }}).then((res)=>{\n              //console.log(\"Service category  fetched successfully\") \n              //console.log(res.data) \n             // console.log(res.groupedOrder)\n                setFacilities(res.groupedOrder)\n                 setSearchMessage(\"Service category fetched successfully\")\n                 setShowPanel(true)\n             })\n             .catch((err)=>{\n                toast({\n                    message: 'Error searching Service category  ' + err,\n                    type: 'is-danger',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  })\n             })\n         }\n        else{\n            console.log(\"less than 3 \")\n            console.log(val)\n            setShowPanel(false)\n            await setFacilities([])\n            console.log(facilities)\n        }\n    }\n\n    const handleAddproduct =()=>{\n       \n        let obj={\n            categoryname:val,\n\n        }\n        console.log(obj)\n        handleRow(obj)\n       \n       // setProductModal(true) \n    }\n    const handlecloseModal =()=>{\n        setProductModal(false)\n        handleSearch(val)\n    }\n    useEffect(() => {\n       if (clear){\n           console.log(\"success has changed\",clear)\n           setSimpa(\"\")\n       }\n        return () => {\n            \n        }\n    }, [clear] )\n    return (\n        <div>\n            <div className=\"field\">\n                <div className=\"control has-icons-left  \">\n                    <div className={`dropdown ${showPanel?\"is-active\":\"\"}`} style={{width:\"100%\"}}>\n                        <div className=\"dropdown-trigger\" style={{width:\"100%\"}}>\n                            <DebounceInput className=\"input is-small  is-expanded mb-0\" \n                                type=\"text\" placeholder=\"Search for Service Category\"\n                                value={simpa}\n                                minLength={3}\n                                debounceTimeout={400}\n                                onBlur={(e)=>handleBlur(e)}\n                                onChange={(e)=>handleSearch(e.target.value)}\n                                inputRef={inputEl}\n                                  />\n                            <span className=\"icon is-small is-left\">\n                                <i className=\"fas fa-search\"></i>\n                            </span>\n                        </div>\n                        <div className=\"dropdown-menu expanded\" style={{width:\"100%\"}}>\n                            <div className=\"dropdown-content\">\n                          { facilities.length>0?\"\":<div className=\"dropdown-item selectadd dropitem mb-4\" onClick={handleAddproduct} > \n                          {/* <span>  */}<strong>{val}</strong> is not a known service category! Add it?{/* </span> */} </div>}\n\n                              {facilities.map((facility, i)=>(\n                                \n                                    <div className=\"dropdown-item selectadd \" key={facility.categoryname} onClick={()=>handleRow(facility)}>\n                                        \n                                        <div ><span>{facility.categoryname}</span>\n                                         {/*  <span className=\"padleft\">{facility.category}</span>\n                                      <span className=\"padleft\">{facility.profession}</span>\n                                        <span className=\"padleft\">{facility.department} Department</span> */}\n                                         {/* <span className=\"padleft\"> {facility.dob && formatDistanceToNowStrict(new Date(facility.dob))}</span>\n                                       \n                                        <span className=\"padleft\">{facility.profession}</span>\n                                        <span className=\"padleft\">{facility.phone}</span> */}\n                                        {/* <span className=\"padleft\">{facility.email}</span> */}\n                                        </div>\n                            \n                                        <br />\n                                    </div>\n                                    \n                                    ))}\n                                    \n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div className={`modal ${productModal?\"is-active\":\"\"}` }>\n                                    <div className=\"modal-background\"></div>\n                                    <div className=\"modal-card\">\n                                        <header className=\"modal-card-head\">\n                                        <p className=\"modal-card-title\">Choose Store</p>\n                                        <button className=\"delete\" aria-label=\"close\"  onClick={handlecloseModal}></button>\n                                        </header>\n                                        <section className=\"modal-card-body\">\n                                        {/* <StoreList standalone=\"true\" /> */}\n                                        {/* <ProductCreate /> */}\n                                        </section>\n                                        {/* <footer className=\"modal-card-foot\">\n                                        <button className=\"button is-success\">Save changes</button>\n                                        <button className=\"button\">Cancel</button>\n                                        </footer> */}\n                                    </div>\n                                </div>       \n        </div>\n    )\n}"]},"metadata":{},"sourceType":"module"}