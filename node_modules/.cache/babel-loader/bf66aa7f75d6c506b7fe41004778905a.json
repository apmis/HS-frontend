{"ast":null,"code":"import _defineProperty from \"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _objectSpread from \"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _regeneratorRuntime from \"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"/home/mfybaby/Documents/HealthStack2/HS-frontend/src/components/Finance/BillServiceCreate.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\n/* eslint-disable */\nimport React, { useState, useContext, useEffect, useRef } from 'react';\nimport client from '../../feathers';\nimport { DebounceInput } from 'react-debounce-input';\nimport { useForm } from \"react-hook-form\"; //import {useHistory} from 'react-router-dom'\n\nimport { UserContext, ObjectContext } from '../../context';\nimport { toast } from 'bulma-toast';\nimport { ProductCreate } from './Products';\nimport Encounter from '../EncounterMgt/Encounter';\nimport { ClientSearch } from '../helpers/ClientSearch';\nimport ServiceSearch from '../helpers/ServiceSearch';\n\nvar random = require('random-string-generator'); // eslint-disable-next-line\n\n\nvar searchfacility = {};\nexport default function BillServiceCreate() {\n  _s();\n\n  var _this = this,\n      _user$currentEmployee,\n      _user$currentEmployee2;\n\n  // const { register, handleSubmit,setValue} = useForm(); //, watch, errors, reset \n  //const [error, setError] =useState(false)\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      success = _useState2[0],\n      setSuccess = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      success1 = _useState4[0],\n      setSuccess1 = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      message = _useState6[0],\n      setMessage = _useState6[1]; // eslint-disable-next-line\n\n\n  var _useState7 = useState(),\n      _useState8 = _slicedToArray(_useState7, 2),\n      facility = _useState8[0],\n      setFacility = _useState8[1]; //const ProductEntryServ=client.service('productentry')\n\n\n  var OrderServ = client.service('order');\n  var BillCreateServ = client.service('createbilldirect'); //const history = useHistory()\n\n  var _useContext = useContext(UserContext),\n      user = _useContext.user; //,setUser\n  // eslint-disable-next-line\n\n\n  var _useState9 = useState(),\n      _useState10 = _slicedToArray(_useState9, 2),\n      currentUser = _useState10[0],\n      setCurrentUser = _useState10[1];\n\n  var _useState11 = useState(\"Bill\"),\n      _useState12 = _slicedToArray(_useState11, 2),\n      type = _useState12[0],\n      setType = _useState12[1];\n\n  var _useState13 = useState(\"\"),\n      _useState14 = _slicedToArray(_useState13, 2),\n      documentNo = _useState14[0],\n      setDocumentNo = _useState14[1];\n\n  var _useState15 = useState(0),\n      _useState16 = _slicedToArray(_useState15, 2),\n      totalamount = _useState16[0],\n      setTotalamount = _useState16[1];\n\n  var _useState17 = useState(null),\n      _useState18 = _slicedToArray(_useState17, 2),\n      qamount = _useState18[0],\n      setQAmount = _useState18[1];\n\n  var _useState19 = useState(\"\"),\n      _useState20 = _slicedToArray(_useState19, 2),\n      productId = _useState20[0],\n      setProductId = _useState20[1];\n\n  var _useState21 = useState(\"\"),\n      _useState22 = _slicedToArray(_useState21, 2),\n      source = _useState22[0],\n      setSource = _useState22[1];\n\n  var _useState23 = useState(\"\"),\n      _useState24 = _slicedToArray(_useState23, 2),\n      date = _useState24[0],\n      setDate = _useState24[1];\n\n  var _useState25 = useState(\"\"),\n      _useState26 = _slicedToArray(_useState25, 2),\n      name = _useState26[0],\n      setName = _useState26[1];\n\n  var _useState27 = useState(\"\"),\n      _useState28 = _slicedToArray(_useState27, 2),\n      inventoryId = _useState28[0],\n      setInventoryId = _useState28[1];\n\n  var _useState29 = useState(\"\"),\n      _useState30 = _slicedToArray(_useState29, 2),\n      baseunit = _useState30[0],\n      setBaseunit = _useState30[1];\n\n  var _useState31 = useState(1),\n      _useState32 = _slicedToArray(_useState31, 2),\n      quantity = _useState32[0],\n      setQuantity = _useState32[1];\n\n  var _useState33 = useState(\"\"),\n      _useState34 = _slicedToArray(_useState33, 2),\n      sellingprice = _useState34[0],\n      setSellingPrice = _useState34[1];\n\n  var _useState35 = useState(0),\n      _useState36 = _slicedToArray(_useState35, 2),\n      costprice = _useState36[0],\n      setCostprice = _useState36[1];\n\n  var _useState37 = useState(\"\"),\n      _useState38 = _slicedToArray(_useState37, 2),\n      invquantity = _useState38[0],\n      setInvQuantity = _useState38[1];\n\n  var _useState39 = useState(0),\n      _useState40 = _slicedToArray(_useState39, 2),\n      calcamount = _useState40[0],\n      setCalcAmount = _useState40[1];\n\n  var _useState41 = useState([]),\n      _useState42 = _slicedToArray(_useState41, 2),\n      productItem = _useState42[0],\n      setProductItem = _useState42[1];\n\n  var _useState43 = useState(\"\"),\n      _useState44 = _slicedToArray(_useState43, 2),\n      billingId = _useState44[0],\n      setBilllingId = _useState44[1];\n\n  var _useState45 = useState(true),\n      _useState46 = _slicedToArray(_useState45, 2),\n      changeAmount = _useState46[0],\n      setChangeAmount = _useState46[1];\n\n  var _useState47 = useState(\"\"),\n      _useState48 = _slicedToArray(_useState47, 2),\n      paymentmode = _useState48[0],\n      setPaymentMode = _useState48[1];\n\n  var _useState49 = useState(\"\"),\n      _useState50 = _slicedToArray(_useState49, 2),\n      category = _useState50[0],\n      setCategory = _useState50[1];\n\n  var _useState51 = useState([]),\n      _useState52 = _slicedToArray(_useState51, 2),\n      paymentOptions = _useState52[0],\n      setPaymentOptions = _useState52[1];\n\n  var _useState53 = useState(\"\"),\n      _useState54 = _slicedToArray(_useState53, 2),\n      billMode = _useState54[0],\n      setBillMode = _useState54[1];\n\n  var _useState55 = useState(\"\"),\n      _useState56 = _slicedToArray(_useState55, 2),\n      obj = _useState56[0],\n      setObj = _useState56[1];\n\n  var _useState57 = useState(false),\n      _useState58 = _slicedToArray(_useState57, 2),\n      productModal = _useState58[0],\n      setProductModal = _useState58[1];\n\n  var _useState59 = useState(\"\"),\n      _useState60 = _slicedToArray(_useState59, 2),\n      patient = _useState60[0],\n      setPatient = _useState60[1];\n\n  var _useState61 = useState(\"\"),\n      _useState62 = _slicedToArray(_useState61, 2),\n      contracts = _useState62[0],\n      setContracts = _useState62[1];\n\n  var _useContext2 = useContext(ObjectContext),\n      state = _useContext2.state,\n      setState = _useContext2.setState;\n\n  var inputEl = useRef(0);\n  var calcamount1;\n  var hidestatus;\n  var medication = state.medicationModule.selectedMedication;\n\n  var handlecloseModal = function handlecloseModal() {//   setProductModal(false)\n    // handleSearch(val)\n  };\n\n  var handleChangeMode = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(value) {\n      var billm;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              console.log(\"value\", value);\n              _context.next = 3;\n              return setPaymentMode(value);\n\n            case 3:\n              console.log(value);\n              billm = paymentOptions.filter(function (el) {\n                return el.name === value;\n              });\n              _context.next = 7;\n              return setBillMode(billm[0]);\n\n            case 7:\n              console.log(billm); // at startup\n              // check payment mode options from patient financial info\n              // load that to select options\n              // default to HMO-->company-->family-->cash\n              //when chosen\n              //append payment mode to order\n              //check service contract for pricing info\n              // calculate pricing \n              // pricing\n\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function handleChangeMode(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var handleRow = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(ProductEntry) {\n      var newProductEntryModule;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              //console.log(\"b4\",state)\n              //console.log(\"handlerow\",ProductEntry)\n              //await setMedication(ProductEntry)\n              newProductEntryModule = {\n                selectedMedication: ProductEntry,\n                show: 'detail'\n              };\n              _context2.next = 3;\n              return setState(function (prevstate) {\n                return _objectSpread(_objectSpread({}, prevstate), {}, {\n                  medicationModule: newProductEntryModule\n                });\n              });\n\n            case 3:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function handleRow(_x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var _useState63 = useState({\n    productitems: [],\n    date: date,\n    documentNo: documentNo,\n    type: type,\n    totalamount: totalamount,\n    source: source\n  }),\n      _useState64 = _slicedToArray(_useState63, 2),\n      productEntry = _useState64[0],\n      setProductEntry = _useState64[1];\n\n  var productItemI = {\n    productId: productId,\n    name: name,\n    quantity: quantity,\n    sellingprice: sellingprice,\n    amount: calcamount,\n    //||qamount\n    baseunit: baseunit,\n    costprice: costprice,\n    category: category === \"Inventory\" ? \"Prescription\" : category,\n    billingId: billingId,\n    billingContract: contracts,\n    billMode: billMode\n  };\n\n  var checkPrice = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(contracts, billMode) {\n      var contract, _contract, _contract2;\n\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              if (!(billMode.type === \"HMO Cover\")) {\n                _context3.next = 10;\n                break;\n              }\n\n              //paymentmode\n\n              /*  if (billMode.detail.plan===\"NHIS\"){\n                   //find contract for NHIS\n                   let contract=contracts.filter(el=>el.source_org_name===\"NHIS\")\n                   if (contract.length){\n                      // console.log(contract[0].price)\n                     await  setSellingPrice(contract[0].price)     \n                }else{\n                   toast({\n                       message: 'Please NHIS does not have cover/price for this service. Either set service price for NHIS, try another service or bill using cash',\n                       type: 'is-danger',\n                       dismissible: true,\n                       pauseOnHover: true,\n                     })\n                    await setSellingPrice(0)\n                }\n                }else{ */\n              contract = contracts.filter(function (el) {\n                return el.source_org === billMode.detail.organizationId;\n              });\n\n              if (!contract.length) {\n                _context3.next = 7;\n                break;\n              }\n\n              _context3.next = 5;\n              return setSellingPrice(contract[0].price);\n\n            case 5:\n              _context3.next = 10;\n              break;\n\n            case 7:\n              toast({\n                message: 'Please HMO does not have cover/price for this service. Either set service price for HMO , try another drug, bill using cash or adjust amount ',\n                type: 'is-danger',\n                dismissible: true,\n                pauseOnHover: true\n              });\n              _context3.next = 10;\n              return setSellingPrice(0);\n\n            case 10:\n              if (!(billMode.type === \"Company Cover\")) {\n                _context3.next = 20;\n                break;\n              }\n\n              //paymentmode\n              _contract = contracts.filter(function (el) {\n                return el.source_org === billMode.detail.organizationId;\n              });\n\n              if (!_contract.length) {\n                _context3.next = 17;\n                break;\n              }\n\n              _context3.next = 15;\n              return setSellingPrice(_contract[0].price);\n\n            case 15:\n              _context3.next = 20;\n              break;\n\n            case 17:\n              toast({\n                message: 'Please company does not have cover/price for this service. Either set service price for Company or try another drug or bill using cash',\n                type: 'is-danger',\n                dismissible: true,\n                pauseOnHover: true\n              });\n              _context3.next = 20;\n              return setSellingPrice(0);\n\n            case 20:\n              if (!(billMode.type === \"Cash\" || billMode.type === \"Family Cover\")) {\n                _context3.next = 30;\n                break;\n              }\n\n              //paymentmode\n              _contract2 = contracts.filter(function (el) {\n                return el.source_org === el.dest_org;\n              });\n\n              if (!_contract2.length) {\n                _context3.next = 27;\n                break;\n              }\n\n              _context3.next = 25;\n              return setSellingPrice(_contract2[0].price);\n\n            case 25:\n              _context3.next = 30;\n              break;\n\n            case 27:\n              toast({\n                message: 'Please there is no cover/price for this service. Either set service price or try another service. Setting price at zero ',\n                type: 'is-danger',\n                dismissible: true,\n                pauseOnHover: true\n              });\n              _context3.next = 30;\n              return setSellingPrice(0);\n\n            case 30:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function checkPrice(_x3, _x4) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var getSearchfacility = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(service) {\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              if (service) {\n                _context4.next = 14;\n                break;\n              }\n\n              //\"clear stuff\"\n              setProductId(\"\");\n              setName(\"\");\n              setBaseunit(\"\");\n              setInventoryId(\"\");\n              setSellingPrice(0);\n              setInvQuantity(\"\");\n              setQAmount(null);\n              setCostprice(\"\");\n              setContracts(\"\");\n              setCategory(\"\");\n              setInventoryId(\"\");\n              setBilllingId(\"\"); //setCalcAmount(null)\n\n              return _context4.abrupt(\"return\");\n\n            case 14:\n              setContracts(service.contracts);\n              setProductId(service.productId);\n              setName(service.name);\n              setCategory(service.category);\n              setBaseunit(service.baseunit);\n              setInventoryId(service.inventoryId);\n              setBilllingId(service._id);\n              _context4.next = 23;\n              return setObj(service);\n\n            case 23:\n              console.log(service.contracts);\n\n            case 24:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n\n    return function getSearchfacility(_x5) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  var getSearchfacility1 = /*#__PURE__*/function () {\n    var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(person) {\n      return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              if (person) {\n                _context5.next = 4;\n                break;\n              }\n\n              //\"clear stuff\"\n\n              /*   setProductId(\"\")\n                setName(\"\")\n                setBaseunit(\"\")\n                setInventoryId(\"\")\n                setSellingPrice(\"\")\n                setInvQuantity(\"\")\n                setQAmount(null)\n                setCostprice(\"\") */\n              setPatient(\"\");\n              setSource(\"\");\n              return _context5.abrupt(\"return\");\n\n            case 4:\n              _context5.next = 6;\n              return setPatient(person);\n\n            case 6:\n              setSource(person.firstname + \" \" + person.lastname);\n\n            case 7:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5);\n    }));\n\n    return function getSearchfacility1(_x6) {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    setCurrentUser(user); //console.log(currentUser)\n\n    return function () {};\n  }, [user]);\n\n  var handleUpdateTotal = /*#__PURE__*/function () {\n    var _ref6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6() {\n      return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n        while (1) {\n          switch (_context6.prev = _context6.next) {\n            case 0:\n              _context6.next = 2;\n              return setTotalamount(function (prevtotal) {\n                return Number(prevtotal) + Number(calcamount);\n              });\n\n            case 2:\n            case \"end\":\n              return _context6.stop();\n          }\n        }\n      }, _callee6);\n    }));\n\n    return function handleUpdateTotal() {\n      return _ref6.apply(this, arguments);\n    };\n  }();\n\n  var handleChangeType = /*#__PURE__*/function () {\n    var _ref7 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7(e) {\n      return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n        while (1) {\n          switch (_context7.prev = _context7.next) {\n            case 0:\n              _context7.next = 2;\n              return setType(e.target.value);\n\n            case 2:\n            case \"end\":\n              return _context7.stop();\n          }\n        }\n      }, _callee7);\n    }));\n\n    return function handleChangeType(_x7) {\n      return _ref7.apply(this, arguments);\n    };\n  }();\n\n  var handleAmount = /*#__PURE__*/function () {\n    var _ref8 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee8() {\n      return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n        while (1) {\n          switch (_context8.prev = _context8.next) {\n            case 0:\n            case \"end\":\n              return _context8.stop();\n          }\n        }\n      }, _callee8);\n    }));\n\n    return function handleAmount() {\n      return _ref8.apply(this, arguments);\n    };\n  }();\n\n  var handleClickProd = /*#__PURE__*/function () {\n    var _ref9 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee9() {\n      return _regeneratorRuntime.wrap(function _callee9$(_context9) {\n        while (1) {\n          switch (_context9.prev = _context9.next) {\n            case 0:\n              if (!(source === \"\" || quantity === \"\" || obj === \"\" || quantity === 0 || paymentmode === \"\")) {\n                _context9.next = 3;\n                break;\n              }\n\n              toast({\n                message: 'You need to choose a service, billing mode and quantity to proceed',\n                type: 'is-danger',\n                dismissible: true,\n                pauseOnHover: true\n              });\n              return _context9.abrupt(\"return\");\n\n            case 3:\n              _context9.next = 5;\n              return setSuccess(false);\n\n            case 5:\n              _context9.next = 7;\n              return setProductItem(function (prevProd) {\n                return prevProd.concat(productItemI);\n              });\n\n            case 7:\n              handleUpdateTotal(); // generate billing info\n              //update order\n\n              /*   OrderServ.patch(medication._id,{\n                    order_status:\"Billed\", //Billed\n                    billInfo,\n                }).then((resp)=>{\n                   // medication=resp\n                   // console.log(resp)\n                     handleRow(resp) \n                    //update dispense\n                 })\n                .catch((err)=>{\n                    console.log(err)\n                })\n                 */\n              //update status(billed) + action()\n              //?attached chosen product to medication\n              //dispense helper?\n\n              setName(\"\");\n              setBaseunit(\"\");\n              setQuantity(1);\n              setInventoryId(\"\");\n              setSellingPrice(0);\n              setInvQuantity(\"\"); // handleAmount()\n\n              setCalcAmount(0);\n              _context9.next = 17;\n              return setSuccess(true);\n\n            case 17:\n              getSearchfacility(false);\n              setObj(\"\");\n              console.log(sellingprice);\n              /* console.log(qamount)\n              console.log(productItem) */\n\n              setChangeAmount(true);\n              setContracts(\"\"); // alert(\"finished\")\n\n            case 22:\n            case \"end\":\n              return _context9.stop();\n          }\n        }\n      }, _callee9);\n    }));\n\n    return function handleClickProd() {\n      return _ref9.apply(this, arguments);\n    };\n  }();\n\n  var handleQtty = /*#__PURE__*/function () {\n    var _ref10 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee10(e) {\n      return _regeneratorRuntime.wrap(function _callee10$(_context10) {\n        while (1) {\n          switch (_context10.prev = _context10.next) {\n            case 0:\n              /*  if (invquantity<e.target.value){\n                   toast({\n                       message: 'You can not sell more quantity than exist in inventory ' ,\n                       type: 'is-danger',\n                       dismissible: true,\n                       pauseOnHover: true,\n                     })\n                   return\n               } */\n              setQuantity(e.target.value);\n\n              if (e.target.vlue === \"\") {\n                setQuantity(1);\n              }\n              /* calcamount1=quantity*sellingprice\n              await setCalcAmount(calcamount1)\n              console.log(calcamount) */\n\n\n            case 2:\n            case \"end\":\n              return _context10.stop();\n          }\n        }\n      }, _callee10);\n    }));\n\n    return function handleQtty(_x8) {\n      return _ref10.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    setProductEntry({\n      date: date,\n      documentNo: documentNo,\n      type: type,\n      totalamount: totalamount,\n      source: source\n    }); // setCalcAmount(quantity*sellingprice) \n\n    return function () {};\n  }, [date]);\n\n  var resetform = function resetform() {\n    setType(\"Sales\");\n    setDocumentNo(\"\");\n    setTotalamount(\"\");\n    setProductId(\"\");\n    setSource(\"\");\n    setDate(\"\");\n    setName(\"\");\n    setBaseunit();\n    setCostprice();\n    setProductItem([]);\n    setContracts(\"\");\n  };\n\n  var handleCreateBill = /*#__PURE__*/function () {\n    var _ref11 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee12() {\n      var serviceList, document, confirm;\n      return _regeneratorRuntime.wrap(function _callee12$(_context12) {\n        while (1) {\n          switch (_context12.prev = _context12.next) {\n            case 0:\n              //handle selected single order\n              //documentation\n              serviceList = [];\n              document = {};\n\n              if (user.currentEmployee) {\n                document.facility = user.currentEmployee.facilityDetail._id;\n                document.facilityname = user.currentEmployee.facilityDetail.facilityName; // or from facility dropdown\n              }\n\n              document.documentdetail = productItem;\n              console.log(document.documentdetail);\n              document.documentname = \"Billed Orders\"; //state.DocumentClassModule.selectedDocumentClass.name\n              // document.documentClassId=state.DocumentClassModule.selectedDocumentClass._id\n\n              document.location = state.employeeLocation.locationName + \" \" + state.employeeLocation.locationType;\n              document.locationId = state.employeeLocation.locationId;\n              document.client = patient._id;\n              document.clientname = patient.firstname + \" \" + patient.middlename + \" \" + patient.lastname;\n              document.clientobj = patient;\n              document.createdBy = user._id;\n              document.createdByname = user.firstname + \" \" + user.lastname;\n              document.status = \"completed\";\n              console.log(document); //order\n\n              document.documentdetail.forEach( /*#__PURE__*/function () {\n                var _ref12 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee11(element) {\n                  var orderinfo, billInfo, items;\n                  return _regeneratorRuntime.wrap(function _callee11$(_context11) {\n                    while (1) {\n                      switch (_context11.prev = _context11.next) {\n                        case 0:\n                          orderinfo = {\n                            //for reach document\n                            documentationId: \"\",\n                            //tbf\n                            order_category: element.category,\n                            //category\n                            order: element.name,\n                            //name\n                            instruction: \"\",\n                            destination_name: document.facilityname,\n                            //facilityname\n                            destination: document.facility,\n                            //facility id\n                            order_status: \"Billed\",\n                            payer: element.billMode.organizationName,\n                            paymentmode: element.billMode.paymentmode,\n                            requestingdoctor_Id: document.createdBy,\n                            requestingdoctor_Name: document.createdByname,\n                            requestingdoctor_locationid: document.locationId,\n                            requestingdoctor_locationName: document.location,\n                            requestingdoctor_facilityId: document.facility,\n                            requestingdoctor_facilityname: document.facilityname,\n                            clientId: document.client,\n                            clientname: document.clientname,\n                            client: document.clientobj,\n                            order_action: [],\n                            medication_action: [],\n                            treatment_action: []\n                          };\n                          billInfo = {\n                            orderInfo: {\n                              orderId: \"\",\n                              //tbf\n                              orderObj: orderinfo\n                            },\n                            serviceInfo: {\n                              price: element.sellingprice,\n                              quantity: element.quantity,\n                              productId: element.productId,\n                              name: element.name,\n                              baseunit: element.baseunit,\n                              amount: element.amount,\n                              billingId: element.billingId,\n                              billingContract: element.billingContract,\n                              createdby: user._id\n                            },\n                            paymentInfo: {\n                              amountDue: element.amount,\n                              paidup: 0,\n                              balance: element.amount,\n                              paymentDetails: []\n                            },\n                            participantInfo: {\n                              billingFacility: orderinfo.destination,\n                              billingFacilityName: orderinfo.destination_name,\n                              locationId: document.locationId,\n                              //selected location,\n                              clientId: orderinfo.clientId,\n                              client: orderinfo.client,\n                              paymentmode: element.billMode\n                            },\n                            createdBy: user._id,\n                            billing_status: \"Unpaid\"\n                          };\n                          items = {\n                            orderinfo: orderinfo,\n                            billInfo: billInfo\n                          };\n                          serviceList.push(items);\n\n                        case 4:\n                        case \"end\":\n                          return _context11.stop();\n                      }\n                    }\n                  }, _callee11);\n                }));\n\n                return function (_x9) {\n                  return _ref12.apply(this, arguments);\n                };\n              }());\n              console.log(\"==================\");\n              console.log(document, serviceList);\n              confirm = window.confirm(\"You are about to bill \".concat(document.clientname, \" for \").concat(serviceList.length, \" service(s)?\"));\n\n              if (!confirm) {\n                _context12.next = 22;\n                break;\n              }\n\n              _context12.next = 22;\n              return BillCreateServ.create({\n                document: document,\n                serviceList: serviceList\n              }).then(function (res) {\n                setSuccess(true);\n                toast({\n                  message: 'Billed Orders created succesfully',\n                  type: 'is-success',\n                  dismissible: true,\n                  pauseOnHover: true\n                });\n                setSuccess(false);\n                setProductItem([]);\n                setCalcAmount(0);\n                var today = new Date().toLocaleString(); //console.log(today)\n\n                setDate(today);\n                var invoiceNo = random(6, 'uppernumeric');\n                setDocumentNo(invoiceNo);\n              }).catch(function (err) {\n                toast({\n                  message: 'Error creating Billed Orders ' + err,\n                  type: 'is-danger',\n                  dismissible: true,\n                  pauseOnHover: true\n                });\n              });\n\n            case 22:\n            case \"end\":\n              return _context12.stop();\n          }\n        }\n      }, _callee12);\n    }));\n\n    return function handleCreateBill() {\n      return _ref11.apply(this, arguments);\n    };\n  }();\n\n  var onSubmit = /*#__PURE__*/function () {\n    var _ref13 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee13(e) {\n      return _regeneratorRuntime.wrap(function _callee13$(_context13) {\n        while (1) {\n          switch (_context13.prev = _context13.next) {\n            case 0:\n              e.preventDefault();\n              setMessage(\"\"); //setError(false)\n\n              setSuccess(false);\n              _context13.next = 5;\n              return setProductEntry({\n                date: date,\n                documentNo: documentNo,\n                type: type,\n                totalamount: totalamount,\n                source: source\n              });\n\n            case 5:\n              productEntry.productitems = productItem;\n              productEntry.createdby = user._id;\n              productEntry.transactioncategory = \"debit\"; // console.log(\"b4 facility\",productEntry);\n\n              if (!user.currentEmployee) {\n                _context13.next = 12;\n                break;\n              }\n\n              productEntry.facility = user.currentEmployee.facilityDetail._id; // or from facility dropdown\n\n              _context13.next = 14;\n              break;\n\n            case 12:\n              toast({\n                message: 'You can not remove inventory from any organization',\n                type: 'is-danger',\n                dismissible: true,\n                pauseOnHover: true\n              });\n              return _context13.abrupt(\"return\");\n\n            case 14:\n              if (!state.StoreModule.selectedStore._id) {\n                _context13.next = 18;\n                break;\n              }\n\n              productEntry.storeId = state.StoreModule.selectedStore._id;\n              _context13.next = 20;\n              break;\n\n            case 18:\n              toast({\n                message: 'You need to select a store before removing inventory',\n                type: 'is-danger',\n                dismissible: true,\n                pauseOnHover: true\n              });\n              return _context13.abrupt(\"return\");\n\n            case 20:\n            case \"end\":\n              return _context13.stop();\n          }\n        }\n      }, _callee13);\n    }));\n\n    return function onSubmit(_x10) {\n      return _ref13.apply(this, arguments);\n    };\n  }();\n\n  var handleChangeAmount = function handleChangeAmount() {\n    setChangeAmount(function (rev) {\n      return !rev;\n    });\n  };\n\n  var newclient = /*#__PURE__*/function () {\n    var _ref14 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee14() {\n      return _regeneratorRuntime.wrap(function _callee14$(_context14) {\n        while (1) {\n          switch (_context14.prev = _context14.next) {\n            case 0:\n              _context14.next = 2;\n              return setProductItem([]);\n\n            case 2:\n            case \"end\":\n              return _context14.stop();\n          }\n        }\n      }, _callee14);\n    }));\n\n    return function newclient() {\n      return _ref14.apply(this, arguments);\n    };\n  }();\n\n  var createObj = function createObj(pay, name, cover, type) {\n    var details = {};\n    details = _objectSpread({}, pay);\n    details.type = type;\n    return {\n      name: name,\n      value: cover,\n      detail: details,\n      type: type\n    };\n  };\n\n  useEffect(function () {\n    //update selling price\n    if (!!billMode && !!contracts) {\n      // console.log(contracts)\n      checkPrice(contracts, billMode);\n    }\n\n    return function () {};\n  }, [obj]);\n  useEffect(function () {\n    setProductItem([]);\n    setTotalamount(0);\n    var paymentoptions = []; // const info = client.paymentinfo\n\n    var billme;\n    var obj;\n\n    if (!!patient) {\n      // console.log(patient)\n      patient.paymentinfo.forEach(function (pay, i) {\n        if (pay.active) {\n          switch (pay.paymentmode) {\n            case 'Cash':\n              // code block\n              obj = createObj(pay, \"Cash\", \"Cash\", \"Cash\");\n              paymentoptions.push(obj);\n              setPaymentMode(\"Cash\");\n              billme = obj; // console.log(\"billme\",billme)\n\n              break;\n\n            case 'Family':\n              // code block\n              obj = createObj(pay, \"Family Cover\", \"familyCover\", \"Family Cover\");\n              paymentoptions.push(obj);\n              setPaymentMode(\"Family Cover\");\n              billme = obj; // console.log(\"billme\",billme)\n\n              break;\n\n            case 'Company':\n              // code block\n              var _name = \"Company: \" + pay.organizationName + \"(\" + pay.plan + \")\";\n\n              obj = createObj(pay, _name, \"CompanyCover\", \"Company Cover\");\n              paymentoptions.push(obj);\n              setPaymentMode(\"Company: \" + pay.organizationName + \"(\" + pay.plan + \")\");\n              billme = obj; // console.log(\"billme\",billme)\n\n              break;\n\n            case 'HMO':\n              // code block\n              console.log(pay);\n              var sname = \"HMO: \" + pay.organizationName + \"(\" + pay.plan + \")\";\n              obj = createObj(pay, sname, \"HMOCover\", \"HMO Cover\");\n              paymentoptions.push(obj);\n              setPaymentMode(\"HMO: \" + pay.organizationName + \"(\" + pay.plan + \")\");\n              billme = obj; //  console.log(\"billme\",billme)\n\n              break;\n\n            default: // code block\n\n          }\n        }\n      });\n      setPaymentOptions(paymentoptions);\n      setBillMode(billme);\n    } //console.log(paymentoptions)\n    // console.log(billMode)\n\n\n    return function () {};\n  }, [source]);\n  useEffect(function () {\n    console.log(\"startup\"); // const medication =state.medicationModule.selectedMedication\n\n    var today = new Date().toLocaleString(); //console.log(today)\n\n    setDate(today);\n    var invoiceNo = random(6, 'uppernumeric');\n    setDocumentNo(invoiceNo);\n    return function () {\n      console.log(\"closeup\");\n      var today = new Date().toLocaleString(); //console.log(today)\n\n      setDate(today);\n      var invoiceNo = random(6, 'uppernumeric');\n      setDocumentNo(invoiceNo);\n      setCalcAmount(0);\n    };\n  }, []);\n  useEffect(function () {\n    calcamount1 = quantity * sellingprice;\n    setCalcAmount(calcamount1); //console.log(calcamount1)\n\n    setChangeAmount(true);\n    return function () {};\n  }, [quantity, sellingprice]);\n  useEffect(function () {\n    // console.log(\"success\", success)\n    if (success) {\n      setSuccess(false);\n    }\n  }, [success]);\n  useEffect(function () {\n    // console.log(\"success\", success)\n    if (success1) {\n      setSuccess1(false);\n    }\n  }, [success1]);\n  useEffect(function () {\n    if (!!billMode && !!contracts) {\n      //console.log(contracts)\n      checkPrice(contracts, billMode);\n    }\n\n    return function () {};\n  }, [billMode]);\n  useEffect(function () {\n    // console.log(sellingprice)\n    return function () {};\n  }, [sellingprice]);\n  useEffect(function () {\n    getSearchfacility1(state.ClientModule.selectedClient);\n    /* appointee=state.ClientModule.selectedClient \n    console.log(appointee.firstname) */\n\n    return function () {};\n  }, [state.ClientModule.selectedClient]);\n\n  var handleRemoveBill = function handleRemoveBill(item, index) {\n    setProductItem(function (prev) {\n      return prev.filter(function (el, i) {\n        return i !== index;\n      });\n    });\n  }; // console.log(\"simpa\")\n\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card card-overflow\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-header\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"card-header-title\",\n          children: \"Bill Service\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 793,\n          columnNumber: 18\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 792,\n        columnNumber: 14\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-content \",\n        children: [/*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: onSubmit,\n          children: [\" \", /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"field is-horizontal\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"field-body\",\n              children: [state.ClientModule.selectedClient.firstname !== undefined ? /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"field\",\n                children: /*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"label is-size-7\",\n                  children: [\" \", state.ClientModule.selectedClient.firstname, \" \", state.ClientModule.selectedClient.lastname]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 818,\n                  columnNumber: 15\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 817,\n                columnNumber: 75\n              }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"field\",\n                children: /*#__PURE__*/_jsxDEV(ClientSearch, {\n                  getSearchfacility: getSearchfacility1,\n                  clear: success1\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 822,\n                  columnNumber: 18\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 821,\n                columnNumber: 14\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"field\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"control\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"select is-small \",\n                    children: /*#__PURE__*/_jsxDEV(\"select\", {\n                      name: \"paymentmode\",\n                      value: paymentmode,\n                      onChange: function onChange(e) {\n                        return handleChangeMode(e.target.value);\n                      },\n                      className: \"selectadd\",\n                      children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                        value: \"\",\n                        children: \"Billing Mode \"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 834,\n                        columnNumber: 26\n                      }, this), paymentOptions.map(function (option, i) {\n                        return /*#__PURE__*/_jsxDEV(\"option\", {\n                          value: option.details,\n                          children: [\" \", option.name]\n                        }, i, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 836,\n                          columnNumber: 32\n                        }, _this);\n                      })]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 833,\n                      columnNumber: 26\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 832,\n                    columnNumber: 22\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 831,\n                  columnNumber: 18\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 830,\n                columnNumber: 18\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 802,\n              columnNumber: 14\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 801,\n            columnNumber: 14\n          }, this), \" \", /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"field is-horizontal\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"field-body\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"field\",\n                children: /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"control has-icons-left has-icons-right\",\n                  children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                    className: \"input is-small\"\n                    /* ref={register({ required: true })} */\n                    ,\n                    value: date,\n                    name: \"date\",\n                    type: \"text\",\n                    onChange: function onChange(e) {\n                      return setDate(e.target.value);\n                    },\n                    placeholder: \"Date\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 863,\n                    columnNumber: 22\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"icon is-small is-left\",\n                    children: /*#__PURE__*/_jsxDEV(\"i\", {\n                      className: \"fas fa-map-signs\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 865,\n                      columnNumber: 26\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 864,\n                    columnNumber: 22\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 862,\n                  columnNumber: 18\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 861,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"field\",\n                children: /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"control has-icons-left\",\n                  children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                    className: \"input is-small\"\n                    /* ref={register} */\n                    ,\n                    name: \"documentNo\",\n                    value: documentNo,\n                    type: \"text\",\n                    onChange: function onChange(e) {\n                      return setDocumentNo(e.target.value);\n                    },\n                    placeholder: \" Invoice Number\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 871,\n                    columnNumber: 22\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"icon is-small is-left\",\n                    children: /*#__PURE__*/_jsxDEV(\"i\", {\n                      className: \"fas fa-phone-alt\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 873,\n                      columnNumber: 22\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 872,\n                    columnNumber: 22\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 870,\n                  columnNumber: 18\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 869,\n                columnNumber: 14\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"field\",\n                children: /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"control has-icons-left\",\n                  children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                    className: \"input is-small\"\n                    /* ref={register({ required: true })} */\n                    ,\n                    value: totalamount,\n                    name: \"totalamount\",\n                    type: \"text\",\n                    onChange: function onChange(e) {\n                      return setTotalamount(e.target.value);\n                    },\n                    placeholder: \" Total Amount\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 879,\n                    columnNumber: 22\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"icon is-small is-left\",\n                    children: /*#__PURE__*/_jsxDEV(\"i\", {\n                      className: \"fas fa-coins\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 881,\n                      columnNumber: 22\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 880,\n                    columnNumber: 22\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 878,\n                  columnNumber: 18\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 877,\n                columnNumber: 14\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 860,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 859,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 800,\n          columnNumber: 14\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"label is-small\",\n          children: \"Choose Service Item:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 892,\n          columnNumber: 14\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"field is-horizontal\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"field-body\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"field is-expanded\"\n              /* style={ !user.stacker?{display:\"none\"}:{}} */\n              ,\n              children: [/*#__PURE__*/_jsxDEV(ServiceSearch, {\n                getSearchfacility: getSearchfacility,\n                clear: success,\n                mode: billMode\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 896,\n                columnNumber: 22\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"control has-icons-left \",\n                style: {\n                  display: \"none\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  className: \"input is-small\"\n                  /* ref={register ({ required: true }) }  */\n\n                  /* add array no */\n                  ,\n                  value: productId,\n                  name: \"productId\",\n                  type: \"text\",\n                  onChange: function onChange(e) {\n                    return setProductId(e.target.value);\n                  },\n                  placeholder: \"Product Id\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 898,\n                  columnNumber: 26\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"icon is-small is-left\",\n                  children: /*#__PURE__*/_jsxDEV(\"i\", {\n                    className: \"fas  fa-map-marker-alt\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 900,\n                    columnNumber: 26\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 899,\n                  columnNumber: 26\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 897,\n                columnNumber: 22\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 895,\n              columnNumber: 14\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 894,\n            columnNumber: 14\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 893,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"field is-horizontal\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"field-body\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"field\",\n              style: {\n                width: \"40%\"\n              },\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"control has-icons-left\",\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  className: \"input is-small\"\n                  /* ref={register({ required: true })} */\n                  ,\n                  name: \"quantity\",\n                  value: quantity,\n                  type: \"text\",\n                  onChange: function onChange(e) {\n                    return handleQtty(e);\n                  },\n                  placeholder: \"Quantity\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 912,\n                  columnNumber: 22\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"icon is-small is-left\",\n                  children: /*#__PURE__*/_jsxDEV(\"i\", {\n                    className: \"fas fa-hashtag\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 914,\n                    columnNumber: 22\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 913,\n                  columnNumber: 22\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 911,\n                columnNumber: 18\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 910,\n              columnNumber: 18\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"field\",\n              children: /*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Amount:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 921,\n                columnNumber: 14\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 920,\n              columnNumber: 14\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"field\",\n              style: {\n                width: \"40%\"\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"control has-icons-left \"\n                /* style={{display:\"none\"}} */\n                ,\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  className: \"input is-small\",\n                  name: \"qamount\",\n                  disabled: changeAmount,\n                  value: calcamount,\n                  type: \"text\",\n                  onChange: /*#__PURE__*/function () {\n                    var _ref15 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee15(e) {\n                      return _regeneratorRuntime.wrap(function _callee15$(_context15) {\n                        while (1) {\n                          switch (_context15.prev = _context15.next) {\n                            case 0:\n                              _context15.next = 2;\n                              return setCalcAmount(e.target.value);\n\n                            case 2:\n                              return _context15.abrupt(\"return\", _context15.sent);\n\n                            case 3:\n                            case \"end\":\n                              return _context15.stop();\n                          }\n                        }\n                      }, _callee15);\n                    }));\n\n                    return function (_x11) {\n                      return _ref15.apply(this, arguments);\n                    };\n                  }(),\n                  placeholder: \"Amount\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 925,\n                  columnNumber: 22\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"icon is-small is-left\",\n                  children: /*#__PURE__*/_jsxDEV(\"i\", {\n                    className: \"fas fa-hashtag\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 927,\n                    columnNumber: 22\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 926,\n                  columnNumber: 22\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 924,\n                columnNumber: 18\n              }, this), (((_user$currentEmployee = user.currentEmployee) === null || _user$currentEmployee === void 0 ? void 0 : _user$currentEmployee.roles.includes('Adjust Price')) || ((_user$currentEmployee2 = user.currentEmployee) === null || _user$currentEmployee2 === void 0 ? void 0 : _user$currentEmployee2.roles.length) === 0 || user.stacker) && /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"button is-small is-success btnheight\",\n                onClick: handleChangeAmount,\n                children: \"Adjust\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 930,\n                columnNumber: 131\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 923,\n              columnNumber: 14\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"field\",\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"control\",\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"button is-info is-small  is-pulled-right\",\n                  children: /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"is-small\",\n                    onClick: handleClickProd,\n                    children: \" +\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 936,\n                    columnNumber: 24\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 935,\n                  columnNumber: 22\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 934,\n                columnNumber: 14\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 933,\n              columnNumber: 14\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 909,\n            columnNumber: 14\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 908,\n          columnNumber: 10\n        }, this), productItem.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Service Items:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 944,\n            columnNumber: 14\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"table-container\",\n            children: /*#__PURE__*/_jsxDEV(\"table\", {\n              className: \"table is-striped  is-hoverable is-fullwidth is-scrollable \",\n              children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                    children: /*#__PURE__*/_jsxDEV(\"abbr\", {\n                      title: \"Serial No\",\n                      children: \"S/No\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 949,\n                      columnNumber: 26\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 949,\n                    columnNumber: 22\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: /*#__PURE__*/_jsxDEV(\"abbr\", {\n                      title: \"Category\",\n                      children: \"Category\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 950,\n                      columnNumber: 26\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 950,\n                    columnNumber: 22\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: /*#__PURE__*/_jsxDEV(\"abbr\", {\n                      title: \"Name\",\n                      children: \"Name\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 951,\n                      columnNumber: 26\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 951,\n                    columnNumber: 22\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: /*#__PURE__*/_jsxDEV(\"abbr\", {\n                      title: \"Quantity\",\n                      children: \"Quanitity\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 952,\n                      columnNumber: 26\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 952,\n                    columnNumber: 22\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: /*#__PURE__*/_jsxDEV(\"abbr\", {\n                      title: \"Unit\",\n                      children: \"Unit\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 953,\n                      columnNumber: 26\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 953,\n                    columnNumber: 22\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: /*#__PURE__*/_jsxDEV(\"abbr\", {\n                      title: \"Selling Price\",\n                      children: \"Selling Price\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 954,\n                      columnNumber: 26\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 954,\n                    columnNumber: 22\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: /*#__PURE__*/_jsxDEV(\"abbr\", {\n                      title: \"Amount\",\n                      children: \"Amount\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 955,\n                      columnNumber: 26\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 955,\n                    columnNumber: 22\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: /*#__PURE__*/_jsxDEV(\"abbr\", {\n                      title: \"Billing Mode\",\n                      children: \"Mode\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 956,\n                      columnNumber: 26\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 956,\n                    columnNumber: 22\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: /*#__PURE__*/_jsxDEV(\"abbr\", {\n                      title: \"Actions\",\n                      children: \"Actions\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 957,\n                      columnNumber: 26\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 957,\n                    columnNumber: 22\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 948,\n                  columnNumber: 22\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 947,\n                columnNumber: 18\n              }, this), /*#__PURE__*/_jsxDEV(\"tfoot\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 960,\n                columnNumber: 18\n              }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                children: productItem.map(function (ProductEntry, i) {\n                  return /*#__PURE__*/_jsxDEV(\"tr\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                      children: i + 1\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 966,\n                      columnNumber: 26\n                    }, _this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      children: ProductEntry.category\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 967,\n                      columnNumber: 26\n                    }, _this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      children: ProductEntry.name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 968,\n                      columnNumber: 26\n                    }, _this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      children: ProductEntry.quantity\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 969,\n                      columnNumber: 26\n                    }, _this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      children: ProductEntry.baseunit\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 970,\n                      columnNumber: 26\n                    }, _this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      children: ProductEntry.sellingprice\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 971,\n                      columnNumber: 26\n                    }, _this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      children: ProductEntry.amount\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 972,\n                      columnNumber: 26\n                    }, _this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      children: ProductEntry.billMode.type\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 973,\n                      columnNumber: 26\n                    }, _this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      onClick: function onClick() {\n                        return handleRemoveBill(ProductEntry, i);\n                      },\n                      children: /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"showAction\",\n                        children: \"x\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 974,\n                        columnNumber: 77\n                      }, _this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 974,\n                      columnNumber: 26\n                    }, _this)]\n                  }, i, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 965,\n                    columnNumber: 27\n                  }, _this);\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 963,\n                columnNumber: 18\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 946,\n              columnNumber: 11\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 945,\n            columnNumber: 14\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"field mt-2 is-grouped\",\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"control\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"button is-success is-small\",\n                disabled: !productItem.length > 0,\n                onClick: handleCreateBill,\n                children: \"Done\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 982,\n                columnNumber: 22\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 981,\n              columnNumber: 18\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 980,\n            columnNumber: 18\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 943,\n          columnNumber: 36\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 798,\n        columnNumber: 14\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 791,\n      columnNumber: 14\n    }, this)\n  }, void 0, false);\n}\n\n_s(BillServiceCreate, \"W8vph/Za599EdB6lP34OdFTtSnQ=\");\n\n_c = BillServiceCreate;\nexport function ServiceSearch2(_ref16) {\n  _s2();\n\n  var _this2 = this;\n\n  var getSearchfacility = _ref16.getSearchfacility,\n      clear = _ref16.clear;\n  var productServ = client.service('billing');\n\n  var _useState65 = useState([]),\n      _useState66 = _slicedToArray(_useState65, 2),\n      facilities = _useState66[0],\n      setFacilities = _useState66[1]; // eslint-disable-next-line\n\n\n  var _useState67 = useState(false),\n      _useState68 = _slicedToArray(_useState67, 2),\n      searchError = _useState68[0],\n      setSearchError = _useState68[1]; // eslint-disable-next-line\n\n\n  var _useState69 = useState(false),\n      _useState70 = _slicedToArray(_useState69, 2),\n      showPanel = _useState70[0],\n      setShowPanel = _useState70[1]; // eslint-disable-next-line\n\n\n  var _useState71 = useState(\"\"),\n      _useState72 = _slicedToArray(_useState71, 2),\n      searchMessage = _useState72[0],\n      setSearchMessage = _useState72[1]; // eslint-disable-next-line \n\n\n  var _useState73 = useState(\"\"),\n      _useState74 = _slicedToArray(_useState73, 2),\n      simpa = _useState74[0],\n      setSimpa = _useState74[1]; // eslint-disable-next-line \n\n\n  var _useState75 = useState(false),\n      _useState76 = _slicedToArray(_useState75, 2),\n      chosen = _useState76[0],\n      setChosen = _useState76[1]; // eslint-disable-next-line \n\n\n  var _useState77 = useState(0),\n      _useState78 = _slicedToArray(_useState77, 2),\n      count = _useState78[0],\n      setCount = _useState78[1];\n\n  var inputEl = useRef(null);\n\n  var _useState79 = useState(\"\"),\n      _useState80 = _slicedToArray(_useState79, 2),\n      val = _useState80[0],\n      setVal = _useState80[1];\n\n  var _useContext3 = useContext(UserContext),\n      user = _useContext3.user;\n\n  var _useContext4 = useContext(ObjectContext),\n      state = _useContext4.state;\n\n  var _useState81 = useState(false),\n      _useState82 = _slicedToArray(_useState81, 2),\n      productModal = _useState82[0],\n      setProductModal = _useState82[1];\n\n  var handleRow = /*#__PURE__*/function () {\n    var _ref17 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee16(obj) {\n      return _regeneratorRuntime.wrap(function _callee16$(_context16) {\n        while (1) {\n          switch (_context16.prev = _context16.next) {\n            case 0:\n              _context16.next = 2;\n              return setChosen(true);\n\n            case 2:\n              _context16.next = 4;\n              return setSimpa(obj.name);\n\n            case 4:\n              getSearchfacility(obj); // setSelectedFacility(obj)\n\n              setShowPanel(false); // await setCount(2)\n\n              /* const    newfacilityModule={\n                  selectedFacility:facility,\n                  show :'detail'\n              }\n              await setState((prevstate)=>({...prevstate, facilityModule:newfacilityModule})) */\n              //console.log(state)\n\n            case 6:\n            case \"end\":\n              return _context16.stop();\n          }\n        }\n      }, _callee16);\n    }));\n\n    return function handleRow(_x12) {\n      return _ref17.apply(this, arguments);\n    };\n  }();\n\n  var handleBlur = /*#__PURE__*/function () {\n    var _ref18 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee17(e) {\n      return _regeneratorRuntime.wrap(function _callee17$(_context17) {\n        while (1) {\n          switch (_context17.prev = _context17.next) {\n            case 0:\n            case \"end\":\n              return _context17.stop();\n          }\n        }\n      }, _callee17);\n    }));\n\n    return function handleBlur(_x13) {\n      return _ref18.apply(this, arguments);\n    };\n  }();\n\n  var handleSearch = /*#__PURE__*/function () {\n    var _ref19 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee18(value) {\n      var field, _query;\n\n      return _regeneratorRuntime.wrap(function _callee18$(_context18) {\n        while (1) {\n          switch (_context18.prev = _context18.next) {\n            case 0:\n              setVal(value);\n\n              if (!(value === \"\")) {\n                _context18.next = 5;\n                break;\n              }\n\n              setShowPanel(false);\n              getSearchfacility(false);\n              return _context18.abrupt(\"return\");\n\n            case 5:\n              field = 'name'; //field variable\n\n              if (!(value.length >= 3)) {\n                _context18.next = 10;\n                break;\n              }\n\n              productServ.find({\n                query: (_query = {}, _defineProperty(_query, field, {\n                  $regex: value,\n                  $options: 'i'\n                }), _defineProperty(_query, \"facility\", user.currentEmployee.facilityDetail._id), _defineProperty(_query, \"$limit\", 10), _defineProperty(_query, \"$sort\", {\n                  createdAt: -1\n                }), _query)\n              }).then(function (res) {\n                //console.log(\"product  fetched successfully\") \n                //console.log(res.data) \n                setFacilities(res.data);\n                setSearchMessage(\" product  fetched successfully\");\n                setShowPanel(true);\n              }).catch(function (err) {\n                toast({\n                  message: 'Error creating ProductEntry ' + err,\n                  type: 'is-danger',\n                  dismissible: true,\n                  pauseOnHover: true\n                });\n              });\n              _context18.next = 13;\n              break;\n\n            case 10:\n              //console.log(\"less than 3 \")\n              // console.log(val)\n              setShowPanel(false);\n              _context18.next = 13;\n              return setFacilities([]);\n\n            case 13:\n            case \"end\":\n              return _context18.stop();\n          }\n        }\n      }, _callee18);\n    }));\n\n    return function handleSearch(_x14) {\n      return _ref19.apply(this, arguments);\n    };\n  }();\n\n  var handleAddproduct = function handleAddproduct() {\n    setProductModal(true);\n  };\n\n  var handlecloseModal = function handlecloseModal() {\n    setProductModal(false);\n    handleSearch(val);\n  };\n\n  useEffect(function () {\n    if (clear) {\n      // console.log(\"success has changed\",clear)\n      setSimpa(\"\");\n    }\n\n    return function () {};\n  }, [clear]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"field\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"control has-icons-left  \",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"dropdown \".concat(showPanel ? \"is-active\" : \"\"),\n          style: {\n            width: \"100%\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"dropdown-trigger\",\n            style: {\n              width: \"100%\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(DebounceInput, {\n              className: \"input is-small  is-expanded\",\n              type: \"text\",\n              placeholder: \"Search Services\",\n              value: simpa,\n              minLength: 3,\n              debounceTimeout: 400,\n              onBlur: function onBlur(e) {\n                return handleBlur(e);\n              },\n              onChange: function onChange(e) {\n                return handleSearch(e.target.value);\n              },\n              inputRef: inputEl\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1130,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"icon is-small is-left\",\n              children: /*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fas fa-search\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1140,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1139,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1129,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"dropdown-menu expanded\",\n            style: {\n              width: \"100%\"\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"dropdown-content\",\n              children: [facilities.length > 0 ? \"\" : /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"dropdown-item selectadd\"\n                /* onClick={handleAddproduct} */\n                ,\n                children: [\" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: [\" \", val, \" is not in your inventory\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1146,\n                  columnNumber: 127\n                }, this), \" \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1146,\n                columnNumber: 52\n              }, this), facilities.map(function (facility, i) {\n                return /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"dropdown-item\",\n                  onClick: function onClick() {\n                    return handleRow(facility);\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    children: /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: facility.name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1152,\n                      columnNumber: 46\n                    }, _this2)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1152,\n                    columnNumber: 41\n                  }, _this2), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                        children: facility.quantity\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1153,\n                        columnNumber: 52\n                      }, _this2)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1153,\n                      columnNumber: 46\n                    }, _this2), /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: [facility.baseunit, \"(s) remaining\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1154,\n                      columnNumber: 41\n                    }, _this2), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"padleft\",\n                      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                        children: \"Price:\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1155,\n                        columnNumber: 67\n                      }, _this2), \" N\", facility.sellingprice]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1155,\n                      columnNumber: 41\n                    }, _this2)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1153,\n                    columnNumber: 41\n                  }, _this2)]\n                }, facility._id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1150,\n                  columnNumber: 37\n                }, _this2);\n              })]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1145,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1144,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1128,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1127,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1126,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 1125,\n    columnNumber: 9\n  }, this);\n}\n\n_s2(ServiceSearch2, \"t0O7bA3TZu/shxaYOPunHCyRtyY=\");\n\n_c2 = ServiceSearch2;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"BillServiceCreate\");\n$RefreshReg$(_c2, \"ServiceSearch2\");","map":{"version":3,"sources":["/home/mfybaby/Documents/HealthStack2/HS-frontend/src/components/Finance/BillServiceCreate.js"],"names":["React","useState","useContext","useEffect","useRef","client","DebounceInput","useForm","UserContext","ObjectContext","toast","ProductCreate","Encounter","ClientSearch","ServiceSearch","random","require","searchfacility","BillServiceCreate","success","setSuccess","success1","setSuccess1","message","setMessage","facility","setFacility","OrderServ","service","BillCreateServ","user","currentUser","setCurrentUser","type","setType","documentNo","setDocumentNo","totalamount","setTotalamount","qamount","setQAmount","productId","setProductId","source","setSource","date","setDate","name","setName","inventoryId","setInventoryId","baseunit","setBaseunit","quantity","setQuantity","sellingprice","setSellingPrice","costprice","setCostprice","invquantity","setInvQuantity","calcamount","setCalcAmount","productItem","setProductItem","billingId","setBilllingId","changeAmount","setChangeAmount","paymentmode","setPaymentMode","category","setCategory","paymentOptions","setPaymentOptions","billMode","setBillMode","obj","setObj","productModal","setProductModal","patient","setPatient","contracts","setContracts","state","setState","inputEl","calcamount1","hidestatus","medication","medicationModule","selectedMedication","handlecloseModal","handleChangeMode","value","console","log","billm","filter","el","handleRow","ProductEntry","newProductEntryModule","show","prevstate","productitems","productEntry","setProductEntry","productItemI","amount","billingContract","checkPrice","contract","source_org","detail","organizationId","length","price","dismissible","pauseOnHover","dest_org","getSearchfacility","_id","getSearchfacility1","person","firstname","lastname","handleUpdateTotal","prevtotal","Number","handleChangeType","e","target","handleAmount","handleClickProd","prevProd","concat","handleQtty","vlue","resetform","handleCreateBill","serviceList","document","currentEmployee","facilityDetail","facilityname","facilityName","documentdetail","documentname","location","employeeLocation","locationName","locationType","locationId","clientname","middlename","clientobj","createdBy","createdByname","status","forEach","element","orderinfo","documentationId","order_category","order","instruction","destination_name","destination","order_status","payer","organizationName","requestingdoctor_Id","requestingdoctor_Name","requestingdoctor_locationid","requestingdoctor_locationName","requestingdoctor_facilityId","requestingdoctor_facilityname","clientId","order_action","medication_action","treatment_action","billInfo","orderInfo","orderId","orderObj","serviceInfo","createdby","paymentInfo","amountDue","paidup","balance","paymentDetails","participantInfo","billingFacility","billingFacilityName","billing_status","items","push","confirm","window","create","then","res","today","Date","toLocaleString","invoiceNo","catch","err","onSubmit","preventDefault","transactioncategory","StoreModule","selectedStore","storeId","handleChangeAmount","rev","newclient","createObj","pay","cover","details","paymentoptions","billme","paymentinfo","i","active","plan","sname","ClientModule","selectedClient","handleRemoveBill","item","index","prev","undefined","map","option","display","width","roles","includes","stacker","ServiceSearch2","clear","productServ","facilities","setFacilities","searchError","setSearchError","showPanel","setShowPanel","searchMessage","setSearchMessage","simpa","setSimpa","chosen","setChosen","count","setCount","val","setVal","handleBlur","handleSearch","field","find","query","$regex","$options","createdAt","data","handleAddproduct"],"mappings":"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","sourcesContent":["/* eslint-disable */\nimport React, {useState,useContext, useEffect,useRef} from 'react'\nimport client from '../../feathers'\nimport {DebounceInput} from 'react-debounce-input';\nimport { useForm } from \"react-hook-form\";\n//import {useHistory} from 'react-router-dom'\nimport {UserContext,ObjectContext} from '../../context'\nimport {toast} from 'bulma-toast'\nimport {ProductCreate} from './Products'\nimport Encounter from '../EncounterMgt/Encounter';\nimport { ClientSearch } from '../helpers/ClientSearch';\nimport  ServiceSearch  from '../helpers/ServiceSearch';\nvar random = require('random-string-generator');\n// eslint-disable-next-line\nconst searchfacility={};\n\nexport default function BillServiceCreate(){\n    // const { register, handleSubmit,setValue} = useForm(); //, watch, errors, reset \n     //const [error, setError] =useState(false)\n     const [success, setSuccess] =useState(false)\n     const [success1, setSuccess1] =useState(false)\n     const [message,setMessage] = useState(\"\")\n     // eslint-disable-next-line\n     const [facility,setFacility] = useState()\n     //const ProductEntryServ=client.service('productentry')\n     const OrderServ=client.service('order')\n     const BillCreateServ=client.service('createbilldirect')\n     //const history = useHistory()\n     const {user} = useContext(UserContext) //,setUser\n     // eslint-disable-next-line\n     const [currentUser,setCurrentUser] = useState()\n     const [type,setType] = useState(\"Bill\")\n     const [documentNo,setDocumentNo] = useState(\"\")\n     const [totalamount,setTotalamount] = useState(0)\n     const [qamount,setQAmount] = useState(null)\n     const [productId,setProductId] = useState(\"\")\n     const [source,setSource] = useState(\"\")\n     const [date,setDate] = useState(\"\")\n     const [name,setName] = useState(\"\")\n     const [inventoryId,setInventoryId] = useState(\"\")\n     const [baseunit,setBaseunit] = useState(\"\")\n     const [quantity,setQuantity] = useState(1)\n     const [sellingprice,setSellingPrice] = useState(\"\")\n     const [costprice,setCostprice] = useState(0)\n     const [invquantity,setInvQuantity] = useState(\"\")\n     const [calcamount,setCalcAmount] = useState(0)\n     const [productItem,setProductItem] = useState([])\n      const [billingId,setBilllingId]=useState(\"\")  \n      const [changeAmount, setChangeAmount] = useState(true)\n      const [paymentmode, setPaymentMode] = useState(\"\")\n      const [category, setCategory] = useState(\"\")\n      const [paymentOptions, setPaymentOptions]=useState([])\n      const [billMode, setBillMode]=useState(\"\")\n      const [obj, setObj]=useState(\"\")\n      const [productModal, setProductModal]=useState(false)\n      const [patient, setPatient]=useState(\"\")\n      const [contracts, setContracts]=useState(\"\")\n     \n     const {state,setState}=useContext(ObjectContext)\n     const inputEl = useRef(0);\n     let calcamount1\n     let hidestatus\n  \n\n    \n  let medication =state.medicationModule.selectedMedication\n\n\n  const handlecloseModal =()=>{\n //   setProductModal(false)\n   // handleSearch(val)\n    }\n\n\n    const \n    \n    \n    \n    handleChangeMode= async(value)=>{\n    console.log(\"value\",value)\n       await setPaymentMode(value)\n        console.log(value)\n       let billm= paymentOptions.filter(el=>el.name===value)\n       await setBillMode(billm[0])\n        console.log(billm)\n        // at startup\n        // check payment mode options from patient financial info\n        // load that to select options\n        // default to HMO-->company-->family-->cash\n        //when chosen\n        //append payment mode to order\n        //check service contract for pricing info\n        // calculate pricing \n        // pricing\n\n\n    }\n\n    const handleRow= async(ProductEntry)=>{\n    //console.log(\"b4\",state)\n\n    //console.log(\"handlerow\",ProductEntry)\n\n    //await setMedication(ProductEntry)\n\n    const    newProductEntryModule={\n        selectedMedication:ProductEntry,\n        show :'detail'\n    }\n  await setState((prevstate)=>({...prevstate, medicationModule:newProductEntryModule}))\n   //console.log(state)\n  // ProductEntry.show=!ProductEntry.show\n\n        } \n \n     const [productEntry,setProductEntry]=useState({\n         productitems:[],\n         date,\n         documentNo,\n         type,\n         totalamount,\n         source,\n \n     })\n  \n     const productItemI={\n         productId,\n         name,\n         quantity,\n         sellingprice,\n         amount:calcamount, //||qamount\n         baseunit,\n         costprice,\n         category: category===\"Inventory\"?\"Prescription\":category,\n         billingId,\n         billingContract:contracts,\n         billMode\n \n     }\n   \n     const checkPrice= async(contracts,billMode)=>{\n           if( billMode.type===\"HMO Cover\"){ //paymentmode\n           /*  if (billMode.detail.plan===\"NHIS\"){\n                //find contract for NHIS\n                let contract=contracts.filter(el=>el.source_org_name===\"NHIS\")\n                if (contract.length){\n                   // console.log(contract[0].price)\n                  await  setSellingPrice(contract[0].price)     \n             }else{\n                toast({\n                    message: 'Please NHIS does not have cover/price for this service. Either set service price for NHIS, try another service or bill using cash',\n                    type: 'is-danger',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  })\n                 await setSellingPrice(0)\n             }\n\n            }else{ */\n\n            let contract=contracts.filter(el=>el.source_org===billMode.detail.organizationId)\n            if (contract.length){\n              //  console.log(contract[0].price)\n               await setSellingPrice(contract[0].price)\n               \n             }else{\n            toast({\n                message: 'Please HMO does not have cover/price for this service. Either set service price for HMO , try another drug, bill using cash or adjust amount ',\n                type: 'is-danger',\n                dismissible: true,\n                pauseOnHover: true,\n              })\n              await setSellingPrice(0)\n         }\n        \n        }\n       /*  } */\n        if( billMode.type===\"Company Cover\"){ //paymentmode\n            let contract=contracts.filter(el=>el.source_org===billMode.detail.organizationId)\n            if (contract.length){\n           // console.log(contract[0].price)\n          await   setSellingPrice(contract[0].price)\n            \n           \n           }else{\n\n            toast({\n                message: 'Please company does not have cover/price for this service. Either set service price for Company or try another drug or bill using cash',\n                type: 'is-danger',\n                dismissible: true,\n                pauseOnHover: true,\n              })\n            await  setSellingPrice(0)   \n         }\n\n     }\n     if( billMode.type===\"Cash\" || billMode.type===\"Family Cover\"){ //paymentmode\n        let contract=contracts.filter(el=>el.source_org===el.dest_org)\n        if (contract.length){\n       // console.log(contract[0].price)\n        await setSellingPrice(contract[0].price)\n       \n       \n            }else{\n\n        toast({\n            message: 'Please there is no cover/price for this service. Either set service price or try another service. Setting price at zero ',\n            type: 'is-danger',\n            dismissible: true,\n            pauseOnHover: true,\n          })\n          await setSellingPrice(0)   \n     }\n\n     }\n\n    }\n\n     const getSearchfacility=async (service)=>{\n      //  console.log(JSON.stringify(service))\n        if (!service){\n            //\"clear stuff\"\n            setProductId(\"\")\n            setName(\"\")\n            setBaseunit(\"\")\n            setInventoryId(\"\")\n            setSellingPrice(0)\n            setInvQuantity(\"\")\n            setQAmount(null)\n            setCostprice(\"\")\n            setContracts(\"\")\n            setCategory(\"\")\n            setInventoryId(\"\")\n            setBilllingId(\"\")\n        \n           //setCalcAmount(null)\n            return\n        }\n         setContracts(service.contracts)\n         setProductId(service.productId)\n         setName(service.name)\n         setCategory(service.category)\n         setBaseunit(service.baseunit)\n         setInventoryId(service.inventoryId)\n         setBilllingId(service._id)\n         await setObj(service)\n        console.log(service.contracts)\n        \n     }\n\n\n    const getSearchfacility1=async (person)=>{\n       \n       \n        if (!person){\n             //\"clear stuff\"\n           /*   setProductId(\"\")\n             setName(\"\")\n             setBaseunit(\"\")\n             setInventoryId(\"\")\n             setSellingPrice(\"\")\n             setInvQuantity(\"\")\n             setQAmount(null)\n             setCostprice(\"\") */\n             setPatient(\"\")\n             setSource(\"\")\n             return\n         }\n         await setPatient(person)\n          setSource(person.firstname+\" \"+ person.lastname)\n     }\n\n     useEffect(() => {\n         setCurrentUser(user)\n         //console.log(currentUser)\n         return () => {\n         \n         }\n     }, [user])\n \n     const handleUpdateTotal=async ()=>{\n        await setTotalamount(prevtotal=>Number(prevtotal) + Number(calcamount))\n     }\n \n     const handleChangeType=async (e)=>{\n        // console.log(e.target.value)\n         await setType(e.target.value)\n     }\n \n     const handleAmount= async()=>{\n        // await setQAmount(null)\n        // alert(\"Iam chaning qamount\")\n     }\n\n     const handleClickProd=async()=>{\n       /*   console.log(\"amount: \",productItemI.amount)\n         console.log(\"qamount: \",qamount)\n         console.log(\"calcamount: \",calcamount) */\n        if ( source===\"\"||quantity===\"\"|| obj===\"\"|| quantity===0||paymentmode===\"\" ){\n            toast({\n                message: 'You need to choose a service, billing mode and quantity to proceed',\n                type: 'is-danger',\n                dismissible: true,\n                pauseOnHover: true,\n              })\n              return \n        }\n\n         await setSuccess(false)\n         await setProductItem(\n             prevProd=>prevProd.concat(productItemI)\n         )\n        handleUpdateTotal()\n            // generate billing info\n           \n        //update order\n        \n      /*   OrderServ.patch(medication._id,{\n            order_status:\"Billed\", //Billed\n            billInfo,\n        }).then((resp)=>{\n           // medication=resp\n           // console.log(resp)\n             handleRow(resp) \n            //update dispense\n\n        })\n        .catch((err)=>{\n            console.log(err)\n        })\n         */\n        //update status(billed) + action()\n        //?attached chosen product to medication\n        //dispense helper?\n\n         setName(\"\")\n         setBaseunit(\"\")\n         setQuantity(1)\n         setInventoryId(\"\")\n         setSellingPrice(0)\n         setInvQuantity(\"\")\n            // handleAmount()\n        setCalcAmount(0)\n        await setSuccess(true)\n        getSearchfacility(false)\n        setObj(\"\")\n        console.log(sellingprice)\n        /* console.log(qamount)\n        console.log(productItem) */\n        setChangeAmount(true)\n        setContracts(\"\")\n       // alert(\"finished\")\n     }\n  \n \n     const handleQtty=async(e)=>{\n        /*  if (invquantity<e.target.value){\n             toast({\n                 message: 'You can not sell more quantity than exist in inventory ' ,\n                 type: 'is-danger',\n                 dismissible: true,\n                 pauseOnHover: true,\n               })\n             return\n         } */\n         setQuantity(e.target.value)\n         if (e.target.vlue===\"\"){\n            setQuantity(1)\n         }\n         /* calcamount1=quantity*sellingprice\n         await setCalcAmount(calcamount1)\n         console.log(calcamount) */\n     }\n \n     useEffect( () => {\n          setProductEntry({\n             \n             date,\n             documentNo,\n             type,\n             totalamount,\n             source,\n         })\n       // setCalcAmount(quantity*sellingprice) \n         return () => {\n             \n         }\n     },[date])\n \n     const resetform=()=>{\n      setType(\"Sales\")\n     setDocumentNo(\"\")\n     setTotalamount(\"\")\n     setProductId(\"\")\n     setSource(\"\")\n     setDate(\"\")\n     setName(\"\")\n     setBaseunit()\n     setCostprice()\n     setProductItem([])\n     setContracts(\"\")\n     }\n\n\n     const handleCreateBill= async()=>{ //handle selected single order\n           \n\n           //documentation\n           let serviceList=[]\n           let document={}\n           \n             if (user.currentEmployee){\n             document.facility=user.currentEmployee.facilityDetail._id \n             document.facilityname=user.currentEmployee.facilityDetail.facilityName // or from facility dropdown\n             }\n            document.documentdetail=productItem\n            console.log(document.documentdetail)\n             document.documentname=\"Billed Orders\" //state.DocumentClassModule.selectedDocumentClass.name\n            // document.documentClassId=state.DocumentClassModule.selectedDocumentClass._id\n             document.location=state.employeeLocation.locationName+\" \"+state.employeeLocation.locationType\n             document.locationId=state.employeeLocation.locationId\n             document.client=patient._id\n             document.clientname=patient.firstname+ \" \"+patient.middlename+\" \"+patient.lastname\n             document.clientobj=patient\n             document.createdBy=user._id\n             document.createdByname=user.firstname+ \" \"+user.lastname\n             document.status=\"completed\"\n             console.log(document)\n        \n             //order\n             document.documentdetail.forEach(async (element)=> {\n          \n                let orderinfo={ //for reach document\n                documentationId:\"\", //tbf\n                order_category:element.category, //category\n                order: element.name,  //name\n                instruction:\"\",\n                destination_name: document.facilityname, //facilityname\n                destination: document.facility, //facility id\n                order_status:\"Billed\",\n                payer:element.billMode.organizationName,\n                paymentmode:element.billMode.paymentmode,\n                \n                requestingdoctor_Id: document.createdBy, \n                requestingdoctor_Name: document.createdByname,\n                requestingdoctor_locationid:document.locationId,\n                requestingdoctor_locationName:document.location,\n                requestingdoctor_facilityId:document.facility,\n                requestingdoctor_facilityname:document.facilityname,\n             \n                clientId: document.client,\n                clientname:document.clientname,\n                client:document.clientobj,\n              \n                order_action:[],\n                medication_action:[],\n                treatment_action:[]\n             }\n\n             let billInfo={\n                orderInfo:{\n                    orderId:\"\", //tbf\n                    orderObj:orderinfo,\n                  },\n                  serviceInfo:{            \n                    price: element.sellingprice,\n                    quantity: element.quantity,\n                    productId: element.productId,\n                    name: element.name,\n                    baseunit: element.baseunit,\n                    amount:element.amount,\n                    billingId:element.billingId,\n                    billingContract:element.billingContract,\n                    createdby:user._id,\n                  },\n                  paymentInfo:{\n                    amountDue:element.amount,\n                    paidup:0,\n                    balance:element.amount,\n                    paymentDetails:[]\n              \n                  },\n                  participantInfo:{\n                    billingFacility:orderinfo.destination,\n                    billingFacilityName:orderinfo.destination_name,\n                    locationId:document.locationId, //selected location,\n                    clientId:orderinfo.clientId,\n                    client:orderinfo.client,\n                    paymentmode:element.billMode\n                  },\n                  createdBy:user._id,\n                  billing_status:\"Unpaid\"\n                }\n                let items={\n                    orderinfo,\n                    billInfo\n                }\n\n                serviceList.push(items)\n\n            })\n\n            console.log(\"==================\")\n            console.log(document,serviceList)\n            \n        \n        let confirm =window.confirm(`You are about to bill ${document.clientname} for ${serviceList.length} service(s)?`)\n    if (confirm){\n            await BillCreateServ.create({\n                document,\n                serviceList\n            }).then((res)=>{\n                        setSuccess(true)\n                        toast({\n                            message: 'Billed Orders created succesfully',\n                            type: 'is-success',\n                            dismissible: true,\n                            pauseOnHover: true,\n                            })\n                            setSuccess(false)\n                            setProductItem([])\n                            setCalcAmount(0);\n                            const today=new Date().toLocaleString()\n                            //console.log(today)\n                            setDate(today)\n                            const invoiceNo=random(6,'uppernumeric')\n                            setDocumentNo(invoiceNo)\n\n                    })\n                    .catch((err)=>{\n                        toast({\n                            message: 'Error creating Billed Orders ' + err,\n                            type: 'is-danger',\n                            dismissible: true,\n                            pauseOnHover: true,\n                            })\n                    }) \n   \n            }\n\n\n\n\n\n\n       /*  const    newProductEntryModule={\n            selectedMedication:{},\n            show :'create'\n        }\n      await setState((prevstate)=>({...prevstate, medicationModule:newProductEntryModule})) */\n       //console.log(state)\n      // ProductEntry.show=!ProductEntry.show\n    \n    }\n \n     const onSubmit = async(e) =>{\n         e.preventDefault();\n         setMessage(\"\")\n         //setError(false)\n         setSuccess(false)\n         await setProductEntry({\n             \n             date,\n             documentNo,\n             type,\n             totalamount,\n             source,\n         })\n         productEntry.productitems=productItem\n         productEntry.createdby=user._id\n         productEntry.transactioncategory=\"debit\"\n        \n          // console.log(\"b4 facility\",productEntry);\n           if (user.currentEmployee){\n          productEntry.facility=user.currentEmployee.facilityDetail._id  // or from facility dropdown\n           }else{\n             toast({\n                 message: 'You can not remove inventory from any organization',\n                 type: 'is-danger',\n                 dismissible: true,\n                 pauseOnHover: true,\n               }) \n               return\n           }\n           \n           if (state.StoreModule.selectedStore._id){\n             productEntry.storeId=state.StoreModule.selectedStore._id\n           }else{\n             toast({\n                 message: 'You need to select a store before removing inventory',\n                 type: 'is-danger',\n                 dismissible: true,\n                 pauseOnHover: true,\n               }) \n               return\n \n           }\n           \n \n       } \n \n  \n    const handleChangeAmount=()=>{\n        setChangeAmount((rev)=>(!rev))\n        \n    }\n\n    const newclient=async ()=>{\n        await  setProductItem([])\n    }\n\n    const createObj= (pay,name,cover,type)=>{\n      let details={}\n        details= {...pay}\n        details.type=type\n\n    return {\n            name,\n            value:cover,\n            detail:details,\n            type,\n        }\n\n    }\n\n    useEffect(() => {\n        \n        //update selling price\n        if (!!billMode && !!contracts){\n           // console.log(contracts)\n            checkPrice(contracts,billMode)\n        }\n       \n        return () => {\n           \n        }\n    }, [obj])\n\n   useEffect(() => {\n       \n        setProductItem([])\n        setTotalamount(0)\n        const paymentoptions= []\n       // const info = client.paymentinfo\n        let billme\n       let obj\n       if (!!patient){\n          // console.log(patient)\n\n        patient.paymentinfo.forEach((pay,i)=>{ \n           if (pay.active){\n       \n            switch(pay.paymentmode) {\n                case 'Cash':\n                  // code block\n                  obj=createObj(pay,\"Cash\",\"Cash\",\"Cash\" )\n                \n                  paymentoptions.push(obj)\n                  setPaymentMode(\"Cash\")\n                  billme=obj\n                 // console.log(\"billme\",billme)\n                  break;\n                case 'Family':\n                  // code block\n                  obj=createObj(pay,\"Family Cover\",\"familyCover\", \"Family Cover\")\n                  paymentoptions.push(obj)\n                  setPaymentMode(\"Family Cover\")\n                  billme=obj\n                 // console.log(\"billme\",billme)\n                  break;\n                case 'Company':\n                  // code block\n                  let name=\"Company: \" + pay.organizationName + \"(\" + pay.plan+\")\"\n\n                  obj=createObj(pay,name,\"CompanyCover\", \"Company Cover\" )\n                      paymentoptions.push(obj)\n                      setPaymentMode(\"Company: \" + pay.organizationName + \"(\" + pay.plan+\")\")\n                     billme=obj\n                    // console.log(\"billme\",billme)\n                  break;\n                case 'HMO':\n                  // code block\n                  console.log(pay)\n                 let  sname=\"HMO: \" + pay.organizationName + \"(\" + pay.plan+\")\"\n\n                  obj=createObj(pay,sname,\"HMOCover\", \"HMO Cover\" )\n                      paymentoptions.push(obj)\n                      setPaymentMode(\"HMO: \" + pay.organizationName + \"(\" + pay.plan+\")\")\n                     billme=obj\n                   //  console.log(\"billme\",billme)\n                  break;\n                default:\n                  // code block\n              }\n            }\n            })\n                    \n          \n        setPaymentOptions(paymentoptions)\n        setBillMode(billme)\n       }\n       //console.log(paymentoptions)\n       // console.log(billMode)\n        return () => {\n           \n        }\n    }, [source]) \n\n\n     useEffect(() => {\n         console.log(\"startup\")\n       // const medication =state.medicationModule.selectedMedication\n         const today=new Date().toLocaleString()\n         //console.log(today)\n         setDate(today)\n         const invoiceNo=random(6,'uppernumeric')\n         setDocumentNo(invoiceNo)\n         return () => {\n            console.log(\"closeup\")\n            const today=new Date().toLocaleString()\n            //console.log(today)\n            setDate(today)\n            const invoiceNo=random(6,'uppernumeric')\n            setDocumentNo(invoiceNo)\n            setCalcAmount(0)\n             \n         }\n     }, [])\n\n     useEffect(() => {\n        calcamount1=quantity*sellingprice\n         setCalcAmount(calcamount1)\n         //console.log(calcamount1)\n         setChangeAmount(true)\n         return () => {\n            \n        }\n    }, [quantity,sellingprice])\n\n    useEffect(() => {\n        // console.log(\"success\", success)\n         if (success){\n             setSuccess(false)\n         }\n       \n      }, [success])\n \n      useEffect(() => {\n         // console.log(\"success\", success)\n          if (success1){\n              setSuccess1(false)\n          }\n        \n       }, [success1])\n    \n    useEffect(() => {\n        if (!!billMode && !!contracts){\n            //console.log(contracts)\n            checkPrice(contracts,billMode)\n        }\n        \n        return () => {\n            \n        }\n    }, [billMode])\n\n    useEffect(() => {\n       // console.log(sellingprice)\n        return () => {\n            \n        }\n    }, [sellingprice])\n\n    useEffect(() => {\n        getSearchfacility1(state.ClientModule.selectedClient )\n        \n        /* appointee=state.ClientModule.selectedClient \n        console.log(appointee.firstname) */\n        return () => {\n           \n        }\n    }, [state.ClientModule.selectedClient ])\n\n    const handleRemoveBill=(item,index)=>{\n        setProductItem(prev=>prev.filter((el,i)=>i!==index))\n    }\n\n// console.log(\"simpa\")\n     return (\n         <>\n             <div className=\"card card-overflow\">\n             <div className=\"card-header\">\n                 <p className=\"card-header-title\">\n                     Bill Service\n                 </p>\n                {/*  <button className=\"button is-success is-small btnheight mt-2\" onClick={showDocumentation}>Documentation</button> */}\n             </div>\n             <div className=\"card-content \">\n    \n             <form onSubmit={onSubmit}> {/* handleSubmit(onSubmit) */}\n             <div className=\"field is-horizontal\">\n             <div className=\"field-body\">\n            {/*  <div className=\"field\">    \n                 <div className=\"control\">\n                     <div className=\"select is-small\">\n                         <select name=\"type\" value={type} onChange={handleChangeType} className=\"selectadd\">\n                            <option value=\"\">Choose Type </option>\n                             <option value=\"Dispense\">Dispense</option>\n                             <option value=\"Bill\">Bill </option> */}\n                             {/* <option value=\"Dispense\">Dispense</option>\n                             <option value=\"Audit\">Audit</option> */}\n                 {/*         </select>\n                     </div>\n                 </div>\n             </div>\n */}\n              {state.ClientModule.selectedClient.firstname !==undefined ? <div className=\"field\"> \n              <label className=\"label is-size-7\" > {state.ClientModule.selectedClient.firstname} {state.ClientModule.selectedClient .lastname}</label>\n               </div> \n               :\n             <div className=\"field\">\n                 <ClientSearch  getSearchfacility={getSearchfacility1} clear={success1} /> \n                     {/* <p className=\"control has-icons-left has-icons-right\">\n                         <input className=\"input is-small\"  ref={register({ required: true })}  value={source} name=\"client\" type=\"text\" onChange={e=>setSource(e.target.value)} placeholder=\"Client\" />\n                         <span className=\"icon is-small is-left\">\n                             <i className=\"fas fa-hospital\"></i>\n                         </span>                    \n                     </p> */}\n                 </div>}\n                 <div className=\"field\">    \n                 <div className=\"control\">\n                     <div className=\"select is-small \">\n                         <select name=\"paymentmode\" value={paymentmode} onChange={(e)=>handleChangeMode(e.target.value)} className=\"selectadd\" >\n                         <option value=\"\">Billing Mode </option>\n                           {paymentOptions.map((option,i)=>(\n                               <option key={i} value={option.details}> {option.name}</option>\n                           ))}\n                           \n                            \n                            {/*  <option value=\"Cash\">Cash</option>\n                             <option value=\"Family\">Family </option>\n                            <option value=\"Company Cover\">Company Cover</option>\n                             <option value=\"HMO\">HMO</option> */}\n                         </select>\n                     </div>\n                 </div>\n             </div>\n            \n             </div>\n             </div> {/* horizontal end */}\n            {/*  <div className=\"field\">\n                 <p className=\"control has-icons-left\"> // Audit/initialization/Purchase Invoice \n                     <input className=\"input is-small\"  ref={register({ required: true })} name=\"type\" type=\"text\" placeholder=\"Type of Product Entry\"/>\n                     <span className=\"icon is-small is-left\">\n                     <i className=\" fas fa-user-md \"></i>\n                     </span>\n                 </p>\n             </div> */}\n                <div className=\"field is-horizontal\">\n                <div className=\"field-body\">\n                <div className=\"field\">\n                 <p className=\"control has-icons-left has-icons-right\">\n                     <input className=\"input is-small\"  /* ref={register({ required: true })} */ value={date}  name=\"date\" type=\"text\" onChange={e=>setDate(e.target.value)} placeholder=\"Date\" />\n                     <span className=\"icon is-small is-left\">\n                         <i className=\"fas fa-map-signs\"></i>\n                     </span>\n                 </p>\n             </div>\n             <div className=\"field\">\n                 <p className=\"control has-icons-left\">\n                     <input className=\"input is-small\" /* ref={register} */ name=\"documentNo\" value={documentNo} type=\"text\" onChange={e=>setDocumentNo(e.target.value)} placeholder=\" Invoice Number\"/>\n                     <span className=\"icon is-small is-left\">\n                     <i className=\"fas fa-phone-alt\"></i>\n                     </span>\n                 </p>\n             </div>\n             <div className=\"field\">\n                 <p className=\"control has-icons-left\">\n                     <input className=\"input is-small\" /* ref={register({ required: true })} */ value={totalamount} name=\"totalamount\" type=\"text\" onChange={e=>setTotalamount(e.target.value)} placeholder=\" Total Amount\"/>\n                     <span className=\"icon is-small is-left\">\n                     <i className=\"fas fa-coins\"></i>\n                     </span>\n                 </p>\n             </div>\n \n                 </div> \n                 </div> \n                \n                 </form>   \n                \n        \n             <label className=\"label is-small\">Choose Service Item:</label>\n          <div className=\"field is-horizontal\">\n             <div className=\"field-body\">\n             <div className=\"field is-expanded\"  /* style={ !user.stacker?{display:\"none\"}:{}} */ >\n                     <ServiceSearch  getSearchfacility={getSearchfacility} clear={success} mode={billMode}/> \n                     <p className=\"control has-icons-left \" style={{display:\"none\"}}>\n                         <input className=\"input is-small\" /* ref={register ({ required: true }) }  *//* add array no */  value={productId} name=\"productId\" type=\"text\" onChange={e=>setProductId(e.target.value)} placeholder=\"Product Id\" />\n                         <span className=\"icon is-small is-left\">\n                         <i className=\"fas  fa-map-marker-alt\"></i>\n                         </span>\n                     </p>\n                     \n                {/* {sellingprice}  {sellingprice &&   \"N\"}{sellingprice} {sellingprice &&   \"per\"}  {baseunit} {invquantity} {sellingprice &&   \"remaining\"}  */}\n                 </div>\n             </div>\n         </div>\n         <div className=\"field is-horizontal\">\n             <div className=\"field-body\" >\n                 <div className=\"field\" style={{width:\"40%\"}}>\n                 <p className=\"control has-icons-left\" >\n                     <input className=\"input is-small\"  /* ref={register({ required: true })} */ name=\"quantity\" value={quantity} type=\"text\" onChange={ e=> handleQtty(e)} placeholder=\"Quantity\"  />\n                     <span className=\"icon is-small is-left\">\n                     <i className=\"fas fa-hashtag\"></i>\n                     </span>\n                    \n                 </p>\n        {/*  <label >{baseunit}</label> */}\n             </div> \n             <div className=\"field\">\n             <label>Amount:</label>{/* <p>{quantity*sellingprice}</p> */}\n             </div>\n             <div className=\"field\" style={{width:\"40%\"}}>\n                 <p className=\"control has-icons-left \" /* style={{display:\"none\"}} */>\n                     <input className=\"input is-small\"  name=\"qamount\" disabled={changeAmount} value={calcamount} type=\"text\"  onChange={async e=> await setCalcAmount(e.target.value)}  placeholder=\"Amount\"  />\n                     <span className=\"icon is-small is-left\">\n                     <i className=\"fas fa-hashtag\"></i>\n                     </span>\n                 </p>\n                 {(user.currentEmployee?.roles.includes('Adjust Price')||user.currentEmployee?.roles.length===0||user.stacker )&& <button className=\"button is-small is-success btnheight\" onClick={handleChangeAmount}>Adjust</button>}\n \n             </div> \n             <div className=\"field\">\n             <p className=\"control\">\n                     <button className=\"button is-info is-small  is-pulled-right\">\n                       <span className=\"is-small\" onClick={handleClickProd}> +</span>\n                     </button>\n                 </p>\n             </div>\n             </div>\n          </div>\n    \n        {(productItem.length>0) && <div>\n             <label>Service Items:</label>\n             <div class=\"table-container\">\n          <table className=\"table is-striped  is-hoverable is-fullwidth is-scrollable \">\n                 <thead>\n                     <tr>\n                     <th><abbr title=\"Serial No\">S/No</abbr></th>\n                     <th><abbr title=\"Category\">Category</abbr></th>\n                     <th><abbr title=\"Name\">Name</abbr></th>\n                     <th><abbr title=\"Quantity\">Quanitity</abbr></th>\n                     <th><abbr title=\"Unit\">Unit</abbr></th>\n                     <th><abbr title=\"Selling Price\">Selling Price</abbr></th>\n                     <th><abbr title=\"Amount\">Amount</abbr></th>\n                     <th><abbr title=\"Billing Mode\">Mode</abbr></th>\n                     <th><abbr title=\"Actions\">Actions</abbr></th>\n                     </tr>\n                 </thead>\n                 <tfoot>\n                     \n                 </tfoot>\n                 <tbody>\n                    { productItem.map((ProductEntry, i)=>(\n                          <tr key={i}>\n                         <th>{i+1}</th>\n                         <td>{ProductEntry.category}</td>\n                         <td>{ProductEntry.name}</td>\n                         <th>{ProductEntry.quantity}</th>\n                         <td>{ProductEntry.baseunit}</td>\n                         <td>{ProductEntry.sellingprice}</td>\n                         <td>{ProductEntry.amount}</td>\n                         <td>{ProductEntry.billMode.type}</td>\n                         <td onClick={()=>handleRemoveBill(ProductEntry,i)}><span className=\"showAction\"  >x</span></td>\n                         </tr>\n                     ))}\n                 </tbody>\n                 </table>\n                 </div>\n                 <div className=\"field mt-2 is-grouped\">\n                 <p className=\"control\">\n                     <button className=\"button is-success is-small\" disabled={!productItem.length>0} onClick={handleCreateBill}>\n                        Done\n                     </button>\n                 </p>\n                {/*  <p className=\"control\">\n                     <button className=\"button is-warning is-small\" disabled={!productItem.length>0} onClick={onSubmit} >\n                         Clear\n                     </button>\n                 </p> */}\n                 </div>\n                 </div>\n            \n             }\n             \n             \n             </div>\n             </div>\n           \n         </>\n     )\n    \n }\n\n export  function ServiceSearch2({getSearchfacility,clear}) {\n    \n    const productServ=client.service('billing')\n    const [facilities,setFacilities]=useState([])\n     // eslint-disable-next-line\n     const [searchError, setSearchError] =useState(false)\n     // eslint-disable-next-line\n    const [showPanel, setShowPanel] =useState(false)\n     // eslint-disable-next-line\n   const [searchMessage, setSearchMessage] = useState(\"\") \n   // eslint-disable-next-line \n   const [simpa,setSimpa]=useState(\"\")\n   // eslint-disable-next-line \n   const [chosen,setChosen]=useState(false)\n   // eslint-disable-next-line \n   const [count,setCount]=useState(0)\n   const inputEl=useRef(null)\n   const [val,setVal]=useState(\"\")\n   const {user} = useContext(UserContext) \n   const {state}=useContext(ObjectContext)\n    const [productModal,setProductModal]=useState(false)\n\n   const handleRow= async(obj)=>{\n        await setChosen(true)\n        //alert(\"something is chaning\")\n       await setSimpa(obj.name)\n       getSearchfacility(obj)\n        // setSelectedFacility(obj)\n        setShowPanel(false)\n       // await setCount(2)\n        /* const    newfacilityModule={\n            selectedFacility:facility,\n            show :'detail'\n        }\n   await setState((prevstate)=>({...prevstate, facilityModule:newfacilityModule})) */\n   //console.log(state)\n    }\n    const handleBlur=async(e)=>{\n         /* if (count===2){\n             console.log(\"stuff was chosen\")\n         } */\n       \n       /*  console.log(\"blur\")\n         setShowPanel(false)\n        console.log(JSON.stringify(simpa))\n        if (simpa===\"\"){\n            console.log(facilities.length)\n            setSimpa(\"abc\")\n            setSimpa(\"\")\n            setFacilities([])\n            inputEl.current.setValue=\"\"\n        }\n        console.log(facilities.length)\n        console.log(inputEl.current) */\n    }\n    const handleSearch=async(value)=>{\n        setVal(value)\n        if (value===\"\"){\n            setShowPanel(false)\n            getSearchfacility(false)\n            return\n        }\n        const field='name' //field variable\n\n       \n        if (value.length>=3 ){\n            productServ.find({query: {     //service\n                 [field]: {\n                     $regex:value,\n                     $options:'i'\n                    \n                 },\n                 facility: user.currentEmployee.facilityDetail._id,\n                 //storeId: state.StoreModule.selectedStore._id,\n                 $limit:10,\n                 $sort: {\n                     createdAt: -1\n                   }\n                     }}).then((res)=>{\n              //console.log(\"product  fetched successfully\") \n              //console.log(res.data) \n                setFacilities(res.data)\n                 setSearchMessage(\" product  fetched successfully\")\n                 setShowPanel(true)\n             })\n             .catch((err)=>{\n                toast({\n                    message: 'Error creating ProductEntry ' + err,\n                    type: 'is-danger',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  })\n             })\n         }\n        else{\n            //console.log(\"less than 3 \")\n           // console.log(val)\n            setShowPanel(false)\n            await setFacilities([])\n           // console.log(facilities)\n        }\n    }\n\n    const handleAddproduct =()=>{\n        setProductModal(true) \n    }\n    const handlecloseModal =()=>{\n        setProductModal(false)\n        handleSearch(val)\n    }\n    useEffect(() => {\n       if (clear){\n          // console.log(\"success has changed\",clear)\n           setSimpa(\"\")\n       }\n        return () => {\n            \n        }\n    }, [clear] )\n    return (\n        <div>\n            <div className=\"field\">\n                <div className=\"control has-icons-left  \">\n                    <div className={`dropdown ${showPanel?\"is-active\":\"\"}`} style={{width:\"100%\"}}>\n                        <div className=\"dropdown-trigger\" style={{width:\"100%\"}}>\n                            <DebounceInput className=\"input is-small  is-expanded\" \n                                type=\"text\" placeholder=\"Search Services\"\n                                value={simpa}\n                                minLength={3}\n                                debounceTimeout={400}\n                                onBlur={(e)=>handleBlur(e)}\n                                onChange={(e)=>handleSearch(e.target.value)}\n                                inputRef={inputEl}\n                                  />\n                            <span className=\"icon is-small is-left\">\n                                <i className=\"fas fa-search\"></i>\n                            </span>\n                        </div>\n                        {/* {searchError&&<div>{searchMessage}</div>} */}\n                        <div className=\"dropdown-menu expanded\" style={{width:\"100%\"}}>\n                            <div className=\"dropdown-content\">\n                          { facilities.length>0?\"\":<div className=\"dropdown-item selectadd\" /* onClick={handleAddproduct} */> <span> {val} is not in your inventory</span> </div>}\n\n                              {facilities.map((facility, i)=>(\n                                    \n                                    <div className=\"dropdown-item\" key={facility._id} onClick={()=>handleRow(facility)}>\n                                        \n                                        <div><span>{facility.name}</span></div>\n                                        <div><span><strong>{facility.quantity}</strong></span>\n                                        <span>{facility.baseunit}(s) remaining</span>\n                                        <span className=\"padleft\"><strong>Price:</strong> N{facility.sellingprice}</span></div>\n                                        \n                                    </div>\n                                    \n                                    ))}\n                                    \n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            \n        </div>\n    )\n}"]},"metadata":{},"sourceType":"module"}