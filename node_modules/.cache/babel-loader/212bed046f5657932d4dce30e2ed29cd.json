{"ast":null,"code":"import _defineProperty from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _objectSpread from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";/* eslint-disable */import React,{useState,useContext,useEffect,useRef}from'react';import client from'../../feathers';import{DebounceInput}from'react-debounce-input';import{useForm}from\"react-hook-form\";//import {useHistory} from 'react-router-dom'\nimport{UserContext,ObjectContext}from'../../context';import{toast}from'bulma-toast';import{ProductCreate}from'./Products';import Encounter from'../EncounterMgt/Encounter';var random=require('random-string-generator');// eslint-disable-next-line\nvar searchfacility={};export default function BillPrescriptionCreate(){// const { register, handleSubmit,setValue} = useForm(); //, watch, errors, reset \n//const [error, setError] =useState(false)\nvar _useState=useState(false),_useState2=_slicedToArray(_useState,2),success=_useState2[0],setSuccess=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),message=_useState4[0],setMessage=_useState4[1];// eslint-disable-next-line\nvar _useState5=useState(),_useState6=_slicedToArray(_useState5,2),facility=_useState6[0],setFacility=_useState6[1];var ProductEntryServ=client.service('productentry');var OrderServ=client.service('order');var BillCreateServ=client.service('createbilldirect');//const history = useHistory()\nvar _useContext=useContext(UserContext),user=_useContext.user;//,setUser\n// eslint-disable-next-line\nvar _useState7=useState(),_useState8=_slicedToArray(_useState7,2),currentUser=_useState8[0],setCurrentUser=_useState8[1];var _useState9=useState(\"Bill\"),_useState10=_slicedToArray(_useState9,2),type=_useState10[0],setType=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),documentNo=_useState12[0],setDocumentNo=_useState12[1];var _useState13=useState(0),_useState14=_slicedToArray(_useState13,2),totalamount=_useState14[0],setTotalamount=_useState14[1];var _useState15=useState(null),_useState16=_slicedToArray(_useState15,2),qamount=_useState16[0],setQAmount=_useState16[1];var _useState17=useState(\"\"),_useState18=_slicedToArray(_useState17,2),productId=_useState18[0],setProductId=_useState18[1];var _useState19=useState(\"\"),_useState20=_slicedToArray(_useState19,2),source=_useState20[0],setSource=_useState20[1];var _useState21=useState(\"\"),_useState22=_slicedToArray(_useState21,2),date=_useState22[0],setDate=_useState22[1];var _useState23=useState(\"\"),_useState24=_slicedToArray(_useState23,2),name=_useState24[0],setName=_useState24[1];var _useState25=useState(\"\"),_useState26=_slicedToArray(_useState25,2),inventoryId=_useState26[0],setInventoryId=_useState26[1];var _useState27=useState(\"\"),_useState28=_slicedToArray(_useState27,2),baseunit=_useState28[0],setBaseunit=_useState28[1];var _useState29=useState(\"\"),_useState30=_slicedToArray(_useState29,2),quantity=_useState30[0],setQuantity=_useState30[1];var _useState31=useState(\"\"),_useState32=_slicedToArray(_useState31,2),sellingprice=_useState32[0],setSellingPrice=_useState32[1];var _useState33=useState(0),_useState34=_slicedToArray(_useState33,2),costprice=_useState34[0],setCostprice=_useState34[1];var _useState35=useState(\"\"),_useState36=_slicedToArray(_useState35,2),invquantity=_useState36[0],setInvQuantity=_useState36[1];var _useState37=useState(0),_useState38=_slicedToArray(_useState37,2),calcamount=_useState38[0],setCalcAmount=_useState38[1];var _useState39=useState([]),_useState40=_slicedToArray(_useState39,2),productItem=_useState40[0],setProductItem=_useState40[1];var _useState41=useState(\"\"),_useState42=_slicedToArray(_useState41,2),billingId=_useState42[0],setBilllingId=_useState42[1];var _useState43=useState(true),_useState44=_slicedToArray(_useState43,2),changeAmount=_useState44[0],setChangeAmount=_useState44[1];var _useState45=useState(\"\"),_useState46=_slicedToArray(_useState45,2),paymentmode=_useState46[0],setPaymentMode=_useState46[1];var _useState47=useState([]),_useState48=_slicedToArray(_useState47,2),paymentOptions=_useState48[0],setPaymentOptions=_useState48[1];var _useState49=useState(\"\"),_useState50=_slicedToArray(_useState49,2),billMode=_useState50[0],setBillMode=_useState50[1];var _useState51=useState(false),_useState52=_slicedToArray(_useState51,2),productModal=_useState52[0],setProductModal=_useState52[1];var _useState53=useState(\"\"),_useState54=_slicedToArray(_useState53,2),obj=_useState54[0],setObj=_useState54[1];var _useState55=useState(\"\"),_useState56=_slicedToArray(_useState55,2),objService=_useState56[0],setObjService=_useState56[1];var _useState57=useState(\"\"),_useState58=_slicedToArray(_useState57,2),patient=_useState58[0],setPatient=_useState58[1];var _useState59=useState(\"\"),_useState60=_slicedToArray(_useState59,2),contracts=_useState60[0],setContracts=_useState60[1];var _useState61=useState(\"\"),_useState62=_slicedToArray(_useState61,2),category=_useState62[0],setCategory=_useState62[1];var _useContext2=useContext(ObjectContext),state=_useContext2.state,setState=_useContext2.setState;var inputEl=useRef(0);var calcamount1;var hidestatus;var medication=state.medicationModule.selectedMedication;//console.log(medication)\nvar showDocumentation=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(value){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setProductModal(true);case 1:case\"end\":return _context.stop();}}},_callee);}));return function showDocumentation(_x){return _ref.apply(this,arguments);};}();var handlecloseModal=function handlecloseModal(){setProductModal(false);// handleSearch(val)\n};var handleChangeMode=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(value){var billm;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return setPaymentMode(value);case 2:// console.log(paymentOptions)\nbillm=paymentOptions.filter(function(el){return el.name===value;});_context2.next=5;return setBillMode(billm[0]);case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function handleChangeMode(_x2){return _ref2.apply(this,arguments);};}();var handleRow=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(ProductEntry){var newProductEntryModule;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0://console.log(\"b4\",state)\n//console.log(\"handlerow\",ProductEntry)\n//await setMedication(ProductEntry)\nnewProductEntryModule={selectedMedication:ProductEntry,show:'detail'};_context3.next=3;return setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{medicationModule:newProductEntryModule});});case 3:case\"end\":return _context3.stop();}}},_callee3);}));return function handleRow(_x3){return _ref3.apply(this,arguments);};}();var _useState63=useState({productitems:[],date:date,documentNo:documentNo,type:type,totalamount:totalamount,source:source}),_useState64=_slicedToArray(_useState63,2),productEntry=_useState64[0],setProductEntry=_useState64[1];var productItemI={productId:productId,name:name,quantity:quantity,sellingprice:sellingprice,amount:calcamount,//||qamount\nbaseunit:baseunit,costprice:costprice,category:\"Prescription\",//category===\"Inventory\"?\"Prescription\":category,\nbillingId:billingId,billMode:billMode};var checkPrice=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(contracts,billMode){var contract,_contract,_contract2,_contract3;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(!(billMode.type===\"HMO Cover\")){_context4.next=22;break;}if(!(billMode.detail.plan===\"NHIS\")){_context4.next=13;break;}//find contract for NHIS\ncontract=contracts.filter(function(el){return el.source_org_name===\"NHIS\";});if(!contract.length){_context4.next=8;break;}_context4.next=6;return setSellingPrice(contract[0].price);case 6:_context4.next=11;break;case 8:toast({message:'Please NHIS does not have cover/price for this service. Either set service price for NHIS, try another service or bill using cash',type:'is-danger',dismissible:true,pauseOnHover:true});_context4.next=11;return setSellingPrice(0);case 11:_context4.next=22;break;case 13:_contract=contracts.filter(function(el){return el.source_org===billMode.detail.organizationId;});if(!_contract.length){_context4.next=19;break;}_context4.next=17;return setSellingPrice(_contract[0].price);case 17:_context4.next=22;break;case 19:toast({message:'Please HMO does not have cover/price for this service. Either set service price for HMO , try another drug, bill using cash or adjust amount ',type:'is-danger',dismissible:true,pauseOnHover:true});_context4.next=22;return setSellingPrice(0);case 22:if(!(billMode.type===\"Company Cover\")){_context4.next=32;break;}//paymentmode\n_contract2=contracts.filter(function(el){return el.source_org===billMode.detail.organizationId;});if(!_contract2.length){_context4.next=29;break;}_context4.next=27;return setSellingPrice(_contract2[0].price);case 27:_context4.next=32;break;case 29:toast({message:'Please company does not have cover/price for this service. Either set service price for Company or try another drug or bill using cash',type:'is-danger',dismissible:true,pauseOnHover:true});_context4.next=32;return setSellingPrice(0);case 32:if(!(billMode.type===\"Cash\"||billMode.type===\"Family Cover\")){_context4.next=42;break;}//paymentmode\n_contract3=contracts.filter(function(el){return el.source_org===el.dest_org;});if(!_contract3.length){_context4.next=39;break;}_context4.next=37;return setSellingPrice(_contract3[0].price);case 37:_context4.next=42;break;case 39:toast({message:'Please there is no cover/price for this service. Either set service price or try another service. Setting price at zero ',type:'is-danger',dismissible:true,pauseOnHover:true});_context4.next=42;return setSellingPrice(0);case 42:case\"end\":return _context4.stop();}}},_callee4);}));return function checkPrice(_x4,_x5){return _ref4.apply(this,arguments);};}();// consider batchformat{batchno,expirydate,qtty,baseunit}\n//consider baseunoit conversions\nvar getSearchfacility=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(obj1){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:if(obj1){_context5.next=14;break;}//\"clear stuff\"\nsetProductId(\"\");setName(\"\");setBaseunit(\"\");setInventoryId(\"\");setSellingPrice(\"\");setInvQuantity(\"\");setQAmount(null);setCostprice(\"\");setContracts(\"\");setCategory(\"\");setBilllingId(\"\");setObjService(\"\");// setCalcAmount(null)\nreturn _context5.abrupt(\"return\");case 14:setProductId(obj1.productId);setName(obj1.name);setBaseunit(obj1.baseunit);setInventoryId(obj1.inventoryId);setSellingPrice(obj1.sellingprice);//modify this based on billing mode\nsetInvQuantity(obj1.quantity);setCostprice(obj1.costprice);setBilllingId(obj1.billingId);setContracts(obj1.billingDetails.contracts);setCategory(\"Prescription\");//obj1.billingDetails.category\n_context5.next=26;return setObj(obj1);case 26:_context5.next=28;return setObjService(obj.billingDetails);case 28:case\"end\":return _context5.stop();}}},_callee5);}));return function getSearchfacility(_x6){return _ref5.apply(this,arguments);};}();useEffect(function(){/*  console.log(obj)\n        console.log(billMode)\n        if( paymentmode!==\"Cash\" && obj){\n            const contracts=obj.billingDetails.contracts\n            let contract=contracts.filter(el=>el.source_org===billMode.detail.hmo)\n           console.log(contract[0].price)\n           setSellingPrice(contract[0].price)\n           console.log(sellingprice)\n       }\n         return () => {\n            \n         } */},[obj]);useEffect(function(){setCurrentUser(user);//console.log(currentUser)\nreturn function(){};},[user]);var handleUpdateTotal=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(){return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return setTotalamount(function(prevtotal){return Number(prevtotal)+Number(calcamount);});case 2:case\"end\":return _context6.stop();}}},_callee6);}));return function handleUpdateTotal(){return _ref6.apply(this,arguments);};}();var handleChangeType=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(e){return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return setType(e.target.value);case 2:case\"end\":return _context7.stop();}}},_callee7);}));return function handleChangeType(_x7){return _ref7.apply(this,arguments);};}();var handleAmount=/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(){return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_context8.next=2;return setQAmount(null);case 2:case\"end\":return _context8.stop();}}},_callee8);}));return function handleAmount(){return _ref8.apply(this,arguments);};}();var handleClickProd=/*#__PURE__*/function(){var _ref9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(){var billInfo;return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:if(!(quantity===0||quantity===\"\"||productId===\"\"||paymentmode===\"\")){_context9.next=3;break;}toast({message:'You need to choose a product and quantity to proceed',type:'is-danger',dismissible:true,pauseOnHover:true});return _context9.abrupt(\"return\");case 3:_context9.next=5;return setSuccess(false);case 5:_context9.next=7;return setProductItem(function(prevProd){return prevProd.concat(productItemI);});case 7:handleUpdateTotal();// generate billing info\nbillInfo={orderInfo:{orderId:medication._id,orderObj:medication},serviceInfo:{price:productItemI.sellingprice,quantity:productItemI.quantity,productId:productItemI.productId,name:productItemI.name,baseunit:productItemI.baseunit,amount:productItemI.amount,billingId:productItemI.billingId,createdby:user._id},paymentInfo:{amountDue:productItemI.amount,paidup:0,balance:productItemI.amount,paymentDetails:[]},participantInfo:{billingFacility:medication.destination,billingFacilityName:medication.destination_name,locationId:state.StoreModule.selectedStore._id,//selected location,\nclientId:medication.clientId,client:medication.client,paymentmode:billMode},createdBy:user.id,billing_status:\"Unpaid\"};//update order\nOrderServ.patch(medication._id,{order_status:\"Billed\",//Billed\nbillInfo:billInfo}).then(function(resp){// medication=resp\n// console.log(resp)\nhandleRow(resp);//update dispense\n}).catch(function(err){console.log(err);});//update status(billed) + action()\n//?attached chosen product to medication\n//dispense helper?\nsetName(\"\");setBaseunit(\"\");setQuantity(\"\");setInventoryId(\"\");setSellingPrice(\"\");setInvQuantity(\"\");handleAmount();// setCalcAmount(null)\n_context9.next=19;return setSuccess(true);case 19:getSearchfacility(false);setObj(\"\");/* console.log(success)\n        console.log(qamount)\n        console.log(productItem) */setChangeAmount(true);case 22:case\"end\":return _context9.stop();}}},_callee9);}));return function handleClickProd(){return _ref9.apply(this,arguments);};}();//check user for facility or get list of facility  \n/*  useEffect(()=>{\n         //setFacility(user.activeProductEntry.FacilityId)//\n       if (!user.stacker){\n           console.log(currentUser)\n            /* setValue(\"facility\", user.currentEmployee.facilityDetail._id,  {\n             shouldValidate: true,\n             shouldDirty: true\n         })  \n \n       }\n     }) */var handleQtty=/*#__PURE__*/function(){var _ref10=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee10(e){return _regeneratorRuntime.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:if(!(invquantity<e.target.value)){_context10.next=3;break;}toast({message:'You can not sell more quantity than exist in inventory ',type:'is-danger',dismissible:true,pauseOnHover:true});return _context10.abrupt(\"return\");case 3:setQuantity(e.target.value);calcamount1=quantity*sellingprice;_context10.next=7;return setCalcAmount(calcamount1);case 7:case\"end\":return _context10.stop();}}},_callee10);}));return function handleQtty(_x8){return _ref10.apply(this,arguments);};}();useEffect(function(){setProductEntry({date:date,documentNo:documentNo,type:type,totalamount:totalamount,source:source});setCalcAmount(quantity*sellingprice);return function(){};},[date]);var resetform=function resetform(){setType(\"Sales\");setDocumentNo(\"\");setTotalamount(\"\");setProductId(\"\");setSource(\"\");setDate(\"\");setName(\"\");setBaseunit();setCostprice();setProductItem([]);};var handleMedicationDone=/*#__PURE__*/function(){var _ref11=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee11(){var newProductEntryModule;return _regeneratorRuntime.wrap(function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0://handle selected single order\n//console.log(\"b4\",state)\n//console.log(\"handlerow\",ProductEntry)\n// await setSelectedMedication(\"\")\nnewProductEntryModule={selectedMedication:{},show:'create'};_context11.next=3;return setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{medicationModule:newProductEntryModule});});case 3:case\"end\":return _context11.stop();}}},_callee11);}));return function handleMedicationDone(){return _ref11.apply(this,arguments);};}();var onSubmit=/*#__PURE__*/function(){var _ref12=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee12(e){return _regeneratorRuntime.wrap(function _callee12$(_context12){while(1){switch(_context12.prev=_context12.next){case 0:e.preventDefault();setMessage(\"\");//setError(false)\nsetSuccess(false);_context12.next=5;return setProductEntry({date:date,documentNo:documentNo,type:type,totalamount:totalamount,source:source});case 5:productEntry.productitems=productItem;productEntry.createdby=user._id;productEntry.transactioncategory=\"debit\";// console.log(\"b4 facility\",productEntry);\nif(!user.currentEmployee){_context12.next=12;break;}productEntry.facility=user.currentEmployee.facilityDetail._id;// or from facility dropdown\n_context12.next=14;break;case 12:toast({message:'You can not remove inventory from any organization',type:'is-danger',dismissible:true,pauseOnHover:true});return _context12.abrupt(\"return\");case 14:if(!state.StoreModule.selectedStore._id){_context12.next=18;break;}productEntry.storeId=state.StoreModule.selectedStore._id;_context12.next=20;break;case 18:toast({message:'You need to select a store before removing inventory',type:'is-danger',dismissible:true,pauseOnHover:true});return _context12.abrupt(\"return\");case 20:case\"end\":return _context12.stop();}}},_callee12);}));return function onSubmit(_x9){return _ref12.apply(this,arguments);};}();// console.log(\"i am rendering\")\n/*   useEffect(() => {\n         setMedication(state.medicationModule.selectedMedication)\n        // console.log(medication)\n         return () => {\n             \n         }\n     }, [state])\n  */var handleChangeAmount=function handleChangeAmount(){setChangeAmount(function(rev){return!rev;});};var newclient=/*#__PURE__*/function(){var _ref13=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee13(){return _regeneratorRuntime.wrap(function _callee13$(_context13){while(1){switch(_context13.prev=_context13.next){case 0:_context13.next=2;return setProductItem([]);case 2:case\"end\":return _context13.stop();}}},_callee13);}));return function newclient(){return _ref13.apply(this,arguments);};}();useEffect(function(){setPatient(medication.client);var oldname=medication.clientname;// console.log(\"oldname\",oldname)\nsetSource(medication.clientname);var newname=source;// console.log(\"newname\",newname)\nif(oldname!==newname){//newdispense\nsetProductItem([]);setTotalamount(0);}/*         const paymentoptions= []\n        const info = medication.client.paymentinfo\n        let billme={}\n       \n        if( medication.client.paymentinfo.cash===true){\n            const details={}\n            details.detail=  info.cashDetails\n            details.type=\"Cash\"\n            const obj={\n                name:\"Cash\",\n                value:\"Cash\",\n                detail:details,\n                type:\"Cash\"\n            }\n            paymentoptions.push(obj)\n            setPaymentMode(\"Cash\")\n            billme=obj\n        }\n        if( medication.client.paymentinfo.familyCover===true){\n            const details={}\n            details.detail=  info.familyDetails\n            details.type=\"Family Cover\"\n            const obj={\n                name:\"Family Cover\",\n                value:\"familyCover\",\n                detail:details,\n                type:\"Family Cover\"\n            }\n            paymentoptions.push(obj)\n            setPaymentMode(\"Family Cover\")\n            billme=obj\n            \n        }\n        if( medication.client.paymentinfo.companyCover===true){\n            const details={}\n            details.type=\"Company Cover\"\n            details.detail=  info.companyDetails.filter(el=>el.active===true)\n            details.detail.forEach(el=>{\n                const obj={\n                    name:\"Company: \" +el.companyName +\"(\"+el.companyPlan+\")\",\n                    value:\"companyCover\",\n                    detail:el,\n                    type:\"Company Cover\" \n                }\n                paymentoptions.push(obj)\n                setPaymentMode(\"Company: \" +el.companyName +\"(\"+el.companyPlan+\")\")\n               // console.log(\"Company: \" +el.companyName +\"(\"+el.companyPlan+\")\")\n               billme=obj\n            })\n        }\n\n        if( medication.client.paymentinfo.hmoCover===true){\n            \n            const details={}\n            details.type=\"HMO Cover\"\n            details.detail=  info.hmoDetails.filter(el=>el.active===true)\n            details.detail.forEach(el=>{\n                const obj={\n                    name:\"HMO: \" +el.hmoName +\"(\"+el.hmoPlan+\")\",\n                    value:\"hmoCover\",\n                    detail:el,\n                    type:\"HMO Cover\"\n                }\n                paymentoptions.push(obj)\n                setPaymentMode(\"HMO: \" +el.hmoName +\"(\"+el.hmoPlan+\")\")\n                //console.log(\"HMO: \" +el.hmoName +\"(\"+el.hmoPlan+\")\")\n                billme=obj\n            })\n         \n        }\n        setPaymentOptions(paymentoptions)\n        setBillMode(billme)\n       console.log(paymentoptions)\n        console.log(billMode) */return function(){};},[medication]);useEffect(function(){//setPatient(medication.client)\nsetProductItem([]);setTotalamount(0);var paymentoptions=[];// const info = client.paymentinfo\nvar billme;var obj;patient&&patient.paymentinfo.forEach(function(pay,i){if(pay.active){switch(pay.paymentmode){case'Cash':// code block\nobj=createObj(pay,\"Cash\",\"Cash\",\"Cash\");paymentoptions.push(obj);setPaymentMode(\"Cash\");billme=obj;// console.log(\"billme\",billme)\nbreak;case'Family':// code block\nobj=createObj(pay,\"Family Cover\",\"familyCover\",\"Family Cover\");paymentoptions.push(obj);setPaymentMode(\"Family Cover\");billme=obj;// console.log(\"billme\",billme)\nbreak;case'Company':// code block\nvar _name=\"Company: \"+pay.organizationName+\"(\"+pay.plan+\")\";obj=createObj(pay,_name,\"CompanyCover\",\"Company Cover\");paymentoptions.push(obj);setPaymentMode(\"Company: \"+pay.organizationName+\"(\"+pay.plan+\")\");billme=obj;// console.log(\"billme\",billme)\nbreak;case'HMO':// code block\nvar sname=\"HMO: \"+pay.organizationName+\"(\"+pay.plan+\")\";obj=createObj(pay,sname,\"HMOCover\",\"HMO Cover\");paymentoptions.push(obj);setPaymentMode(\"HMO: \"+pay.organizationName+\"(\"+pay.plan+\")\");billme=obj;//  console.log(\"billme\",billme)\nbreak;default:// code block\n}}});setPaymentOptions(paymentoptions);setBillMode(billme);//console.log(paymentoptions)\n// console.log(billMode)\nreturn function(){};},[source]);//source\nuseEffect(function(){// const medication =state.medicationModule.selectedMedication\nvar today=new Date().toLocaleString();//console.log(today)\nsetDate(today);var invoiceNo=random(6,'uppernumeric');setDocumentNo(invoiceNo);return function(){};},[]);useEffect(function(){// console.log(\"success\", success)\nif(success){setSuccess(false);}},[success]);var createObj=function createObj(pay,name,cover,type){var details={};details=_objectSpread({},pay);details.type=type;return{name:name,value:cover,detail:details,type:type};};useEffect(function(){//update selling price\nif(!!billMode&&!!contracts){// console.log(contracts)\ncheckPrice(contracts,billMode);}return function(){};},[obj]);useEffect(function(){calcamount1=quantity*sellingprice;setCalcAmount(calcamount1);// console.log(calcamount)\nsetChangeAmount(true);return function(){};},[quantity,sellingprice]);useEffect(function(){if(!!billMode&&!!contracts){checkPrice(contracts,billMode);}return function(){};},[billMode]);// console.log(\"simpa\")\nreturn/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card card-overflow\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-header\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"card-header-title\",children:\"Bill Product\"}),/*#__PURE__*/_jsx(\"button\",{className:\"button is-success is-small btnheight mt-2\",onClick:showDocumentation,children:\"Documentation\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-content \",children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:onSubmit,children:[\" \",/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field-body\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left has-icons-right\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\"/* ref={register({ required: true })} */,value:source,name:\"client\",type:\"text\",onChange:function onChange(e){return setSource(e.target.value);},placeholder:\"Client\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-hospital\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsx(\"div\",{className:\"control\",children:/*#__PURE__*/_jsx(\"div\",{className:\"select is-small \",children:/*#__PURE__*/_jsxs(\"select\",{name:\"paymentmode\",value:paymentmode,onChange:function onChange(e){return handleChangeMode(e.target.value);},className:\"selectadd\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Billing Mode \"}),paymentOptions.map(function(option,i){return/*#__PURE__*/_jsxs(\"option\",{value:option.details,children:[\" \",option.name]},i);})]})})})})]})}),\" \",/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field-body\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left has-icons-right\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\"/* ref={register({ required: true })} */,value:date,name:\"date\",type:\"text\",onChange:function onChange(e){return setDate(e.target.value);},placeholder:\"Date\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-map-signs\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\"/* ref={register} */,name:\"documentNo\",value:documentNo,type:\"text\",onChange:function onChange(e){return setDocumentNo(e.target.value);},placeholder:\" Invoice Number\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-phone-alt\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\"/* ref={register({ required: true })} */,value:totalamount,name:\"totalamount\",type:\"text\",onChange:function onChange(e){return setTotalamount(e.target.value);},placeholder:\" Total Amount\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-coins\"})})]})})]})})]}),/*#__PURE__*/_jsx(\"label\",{className:\"label is-small\",children:\"Medication:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsx(\"div\",{className:\"field-body\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field\",style:{width:\"40%\"},children:[/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\"/* ref={register({ required: true })} */,disabled:true,name:\"order\",value:medication.order,type:\"text\",onChange:function onChange(e){return handleQtty(e);},placeholder:\"Quantity\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-hashtag\"})}),/*#__PURE__*/_jsxs(\"span\",{className:\"helper is-size-7\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Instruction: \"}),medication.instruction]})]}),/*#__PURE__*/_jsxs(\"span\",{className:\"helper is-size-7\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Billing Status: \"}),medication.order_status]})]})})}),/*#__PURE__*/_jsx(\"label\",{className:\"label is-small\",children:\"Choose Product Item:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsx(\"div\",{className:\"field-body\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field is-expanded\"/* style={ !user.stacker?{display:\"none\"}:{}} */,children:[/*#__PURE__*/_jsx(InventorySearch,{getSearchfacility:getSearchfacility,clear:success}),/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left \",style:{display:\"none\"},children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\"/* ref={register ({ required: true }) }  */ /* add array no */,value:productId,name:\"productId\",type:\"text\",onChange:function onChange(e){return setProductId(e.target.value);},placeholder:\"Product Id\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas  fa-map-marker-alt\"})})]}),sellingprice&&\"N\",sellingprice,\" \",sellingprice&&\"per\",\"  \",baseunit,\" \",invquantity,\" \",sellingprice&&\"remaining\"]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field-body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"field\",style:{width:\"40%\"},children:[/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\"/* ref={register({ required: true })} */,name:\"quantity\",value:quantity,type:\"text\",onChange:function onChange(e){return handleQtty(e);},placeholder:\"Quantity\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-hashtag\"})})]}),/*#__PURE__*/_jsx(\"label\",{children:baseunit})]}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsx(\"label\",{children:\"Amount:\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",style:{width:\"40%\"},children:[/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left \"/* style={{display:\"none\"}} */,children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",name:\"qamount\",disabled:changeAmount,value:calcamount,type:\"text\",onChange:/*#__PURE__*/function(){var _ref14=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee14(e){return _regeneratorRuntime.wrap(function _callee14$(_context14){while(1){switch(_context14.prev=_context14.next){case 0:_context14.next=2;return setCalcAmount(e.target.value);case 2:return _context14.abrupt(\"return\",_context14.sent);case 3:case\"end\":return _context14.stop();}}},_callee14);}));return function(_x10){return _ref14.apply(this,arguments);};}(),placeholder:\"Amount\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-dollar-sign\"})})]}),/*#__PURE__*/_jsx(\"button\",{className:\"button is-small is-success btnheight\",onClick:handleChangeAmount,children:\"Adjust\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsx(\"p\",{className:\"control\",children:/*#__PURE__*/_jsx(\"button\",{className:\"button is-info is-small  is-pulled-right\",children:/*#__PURE__*/_jsx(\"span\",{className:\"is-small\",onClick:handleClickProd,children:\" +\"})})})})]})}),productItem.length>0&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Product Items:\"}),/*#__PURE__*/_jsxs(\"table\",{className:\"table is-striped  is-hoverable is-fullwidth is-scrollable \",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Serial No\",children:\"S/No\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Type\",children:\"Name\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Type\",children:\"Quanitity\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Document No\",children:\"Unit\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Cost Price\",children:\"Selling Price\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Cost Price\",children:\"Amount\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Actions\",children:\"Actions\"})})]})}),/*#__PURE__*/_jsx(\"tfoot\",{}),/*#__PURE__*/_jsx(\"tbody\",{children:productItem.map(function(ProductEntry,i){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:i+1}),/*#__PURE__*/_jsx(\"td\",{children:ProductEntry.name}),/*#__PURE__*/_jsx(\"th\",{children:ProductEntry.quantity}),/*#__PURE__*/_jsx(\"td\",{children:ProductEntry.baseunit}),/*#__PURE__*/_jsx(\"td\",{children:ProductEntry.sellingprice}),/*#__PURE__*/_jsx(\"td\",{children:ProductEntry.amount}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"showAction\",children:\"x\"})})]},i);})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"field mt-2 is-grouped\",children:/*#__PURE__*/_jsx(\"p\",{className:\"control\",children:/*#__PURE__*/_jsx(\"button\",{className:\"button is-success is-small\",disabled:!productItem.length>0,onClick:handleMedicationDone,children:\"Done\"})})})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal \".concat(productModal?\"is-active\":\"\"),children:[/*#__PURE__*/_jsx(\"div\",{className:\"modal-background\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-card  modalbkgrnd\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"modal-card-head  btnheight\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"modal-card-title\",children:\"Documentation\"}),/*#__PURE__*/_jsx(\"button\",{className:\"delete\",\"aria-label\":\"close\",onClick:handlecloseModal})]}),/*#__PURE__*/_jsx(\"section\",{className:\"modal-card-body modalcolor\",children:/*#__PURE__*/_jsx(Encounter,{standalone:\"true\"})})]})]})]});}export function InventorySearch(_ref15){var getSearchfacility=_ref15.getSearchfacility,clear=_ref15.clear;var productServ=client.service('inventory');var _useState65=useState([]),_useState66=_slicedToArray(_useState65,2),facilities=_useState66[0],setFacilities=_useState66[1];// eslint-disable-next-line\nvar _useState67=useState(false),_useState68=_slicedToArray(_useState67,2),searchError=_useState68[0],setSearchError=_useState68[1];// eslint-disable-next-line\nvar _useState69=useState(false),_useState70=_slicedToArray(_useState69,2),showPanel=_useState70[0],setShowPanel=_useState70[1];// eslint-disable-next-line\nvar _useState71=useState(\"\"),_useState72=_slicedToArray(_useState71,2),searchMessage=_useState72[0],setSearchMessage=_useState72[1];// eslint-disable-next-line \nvar _useState73=useState(\"\"),_useState74=_slicedToArray(_useState73,2),simpa=_useState74[0],setSimpa=_useState74[1];// eslint-disable-next-line \nvar _useState75=useState(false),_useState76=_slicedToArray(_useState75,2),chosen=_useState76[0],setChosen=_useState76[1];// eslint-disable-next-line \nvar _useState77=useState(0),_useState78=_slicedToArray(_useState77,2),count=_useState78[0],setCount=_useState78[1];var inputEl=useRef(null);var _useState79=useState(\"\"),_useState80=_slicedToArray(_useState79,2),val=_useState80[0],setVal=_useState80[1];var _useContext3=useContext(UserContext),user=_useContext3.user;var _useContext4=useContext(ObjectContext),state=_useContext4.state;var _useState81=useState(false),_useState82=_slicedToArray(_useState81,2),productModal=_useState82[0],setProductModal=_useState82[1];var handleRow=/*#__PURE__*/function(){var _ref16=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee15(obj){return _regeneratorRuntime.wrap(function _callee15$(_context15){while(1){switch(_context15.prev=_context15.next){case 0:_context15.next=2;return setChosen(true);case 2://alert(\"something is chaning\")\ngetSearchfacility(obj);_context15.next=5;return setSimpa(obj.name);case 5:// setSelectedFacility(obj)\nsetShowPanel(false);_context15.next=8;return setCount(2);case 8:case\"end\":return _context15.stop();}}},_callee15);}));return function handleRow(_x11){return _ref16.apply(this,arguments);};}();var handleBlur=/*#__PURE__*/function(){var _ref17=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee16(e){return _regeneratorRuntime.wrap(function _callee16$(_context16){while(1){switch(_context16.prev=_context16.next){case 0:case\"end\":return _context16.stop();}}},_callee16);}));return function handleBlur(_x12){return _ref17.apply(this,arguments);};}();var handleSearch=/*#__PURE__*/function(){var _ref18=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee17(value){var field,_query;return _regeneratorRuntime.wrap(function _callee17$(_context17){while(1){switch(_context17.prev=_context17.next){case 0:setVal(value);if(!(value===\"\")){_context17.next=5;break;}setShowPanel(false);getSearchfacility(false);return _context17.abrupt(\"return\");case 5:field='name';//field variable\nif(!(value.length>=3)){_context17.next=10;break;}productServ.find({query:(_query={},_defineProperty(_query,field,{$regex:value,$options:'i'}),_defineProperty(_query,\"facility\",user.currentEmployee.facilityDetail._id),_defineProperty(_query,\"storeId\",state.StoreModule.selectedStore._id),_defineProperty(_query,\"$limit\",10),_defineProperty(_query,\"$sort\",{createdAt:-1}),_query)}).then(function(res){//  console.log(\"product  fetched successfully\") \n//  console.log(res.data) \nsetFacilities(res.data);setSearchMessage(\" product  fetched successfully\");setShowPanel(true);}).catch(function(err){toast({message:'Error creating ProductEntry '+err,type:'is-danger',dismissible:true,pauseOnHover:true});});_context17.next=13;break;case 10:// console.log(\"less than 3 \")\n// console.log(val)\nsetShowPanel(false);_context17.next=13;return setFacilities([]);case 13:case\"end\":return _context17.stop();}}},_callee17);}));return function handleSearch(_x13){return _ref18.apply(this,arguments);};}();var handleAddproduct=function handleAddproduct(){setProductModal(true);};var handlecloseModal=function handlecloseModal(){setProductModal(false);handleSearch(val);};useEffect(function(){if(clear){//  console.log(\"success has changed\",clear)\nsetSimpa(\"\");}return function(){};},[clear]);return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsx(\"div\",{className:\"control has-icons-left  \",children:/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown \".concat(showPanel?\"is-active\":\"\"),style:{width:\"100%\"},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown-trigger\",style:{width:\"100%\"},children:[/*#__PURE__*/_jsx(DebounceInput,{className:\"input is-small  is-expanded\",type:\"text\",placeholder:\"Search Product\",value:simpa,minLength:3,debounceTimeout:400,onBlur:function onBlur(e){return handleBlur(e);},onChange:function onChange(e){return handleSearch(e.target.value);},inputRef:inputEl}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-search\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"dropdown-menu expanded\",style:{width:\"100%\"},children:/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown-content\",children:[facilities.length>0?\"\":/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown-item\"/* onClick={handleAddproduct} */,children:[\" \",/*#__PURE__*/_jsxs(\"span\",{children:[\" \",val,\" is not in your inventory\"]}),\" \"]}),facilities.map(function(facility,i){return/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown-item\",onClick:function onClick(){return handleRow(facility);},children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"span\",{children:facility.name})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{children:/*#__PURE__*/_jsx(\"strong\",{children:facility.quantity})}),/*#__PURE__*/_jsxs(\"span\",{children:[facility.baseunit,\"(s) remaining\"]}),/*#__PURE__*/_jsxs(\"span\",{className:\"padleft\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Price:\"}),\" N\",facility.sellingprice]})]})]},facility._id);})]})})]})})})});}","map":{"version":3,"sources":["/home/mfybaby/Documents/HealthStack2/HS-frontend/src/components/Pharmacy/BillPrescriptionCreate.js"],"names":["React","useState","useContext","useEffect","useRef","client","DebounceInput","useForm","UserContext","ObjectContext","toast","ProductCreate","Encounter","random","require","searchfacility","BillPrescriptionCreate","success","setSuccess","message","setMessage","facility","setFacility","ProductEntryServ","service","OrderServ","BillCreateServ","user","currentUser","setCurrentUser","type","setType","documentNo","setDocumentNo","totalamount","setTotalamount","qamount","setQAmount","productId","setProductId","source","setSource","date","setDate","name","setName","inventoryId","setInventoryId","baseunit","setBaseunit","quantity","setQuantity","sellingprice","setSellingPrice","costprice","setCostprice","invquantity","setInvQuantity","calcamount","setCalcAmount","productItem","setProductItem","billingId","setBilllingId","changeAmount","setChangeAmount","paymentmode","setPaymentMode","paymentOptions","setPaymentOptions","billMode","setBillMode","productModal","setProductModal","obj","setObj","objService","setObjService","patient","setPatient","contracts","setContracts","category","setCategory","state","setState","inputEl","calcamount1","hidestatus","medication","medicationModule","selectedMedication","showDocumentation","value","handlecloseModal","handleChangeMode","billm","filter","el","handleRow","ProductEntry","newProductEntryModule","show","prevstate","productitems","productEntry","setProductEntry","productItemI","amount","checkPrice","detail","plan","contract","source_org_name","length","price","dismissible","pauseOnHover","source_org","organizationId","dest_org","getSearchfacility","obj1","billingDetails","handleUpdateTotal","prevtotal","Number","handleChangeType","e","target","handleAmount","handleClickProd","prevProd","concat","billInfo","orderInfo","orderId","_id","orderObj","serviceInfo","createdby","paymentInfo","amountDue","paidup","balance","paymentDetails","participantInfo","billingFacility","destination","billingFacilityName","destination_name","locationId","StoreModule","selectedStore","clientId","createdBy","id","billing_status","patch","order_status","then","resp","catch","err","console","log","handleQtty","resetform","handleMedicationDone","onSubmit","preventDefault","transactioncategory","currentEmployee","facilityDetail","storeId","handleChangeAmount","rev","newclient","oldname","clientname","newname","paymentoptions","billme","paymentinfo","forEach","pay","i","active","createObj","push","organizationName","sname","today","Date","toLocaleString","invoiceNo","cover","details","map","option","width","order","instruction","display","InventorySearch","clear","productServ","facilities","setFacilities","searchError","setSearchError","showPanel","setShowPanel","searchMessage","setSearchMessage","simpa","setSimpa","chosen","setChosen","count","setCount","val","setVal","handleBlur","handleSearch","field","find","query","$regex","$options","createdAt","res","data","handleAddproduct"],"mappings":"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","sourcesContent":["/* eslint-disable */\nimport React, {useState,useContext, useEffect,useRef} from 'react'\nimport client from '../../feathers'\nimport {DebounceInput} from 'react-debounce-input';\nimport { useForm } from \"react-hook-form\";\n//import {useHistory} from 'react-router-dom'\nimport {UserContext,ObjectContext} from '../../context'\nimport {toast} from 'bulma-toast'\nimport {ProductCreate} from './Products'\nimport Encounter from '../EncounterMgt/Encounter';\nvar random = require('random-string-generator');\n// eslint-disable-next-line\nconst searchfacility={};\n\nexport default function BillPrescriptionCreate(){\n    // const { register, handleSubmit,setValue} = useForm(); //, watch, errors, reset \n     //const [error, setError] =useState(false)\n     const [success, setSuccess] =useState(false)\n     const [message,setMessage] = useState(\"\")\n     // eslint-disable-next-line\n     const [facility,setFacility] = useState()\n     const ProductEntryServ=client.service('productentry')\n     const OrderServ=client.service('order')\n     const BillCreateServ=client.service('createbilldirect')\n     //const history = useHistory()\n     const {user} = useContext(UserContext) //,setUser\n     // eslint-disable-next-line\n     const [currentUser,setCurrentUser] = useState()\n     const [type,setType] = useState(\"Bill\")\n     const [documentNo,setDocumentNo] = useState(\"\")\n     const [totalamount,setTotalamount] = useState(0)\n     const [qamount,setQAmount] = useState(null)\n     const [productId,setProductId] = useState(\"\")\n     const [source,setSource] = useState(\"\")\n     const [date,setDate] = useState(\"\")\n     const [name,setName] = useState(\"\")\n     const [inventoryId,setInventoryId] = useState(\"\")\n     const [baseunit,setBaseunit] = useState(\"\")\n     const [quantity,setQuantity] = useState(\"\")\n     const [sellingprice,setSellingPrice] = useState(\"\")\n     const [costprice,setCostprice] = useState(0)\n     const [invquantity,setInvQuantity] = useState(\"\")\n     const [calcamount,setCalcAmount] = useState(0)\n     const [productItem,setProductItem] = useState([])\n      const [billingId,setBilllingId]=useState(\"\")  \n      const [changeAmount, setChangeAmount] = useState(true)\n      const [paymentmode, setPaymentMode] = useState(\"\")\n      const [paymentOptions, setPaymentOptions]=useState([])\n      const [billMode, setBillMode]=useState(\"\")\n      const [productModal, setProductModal]=useState(false)\n      const [obj, setObj]=useState(\"\")\n      const [objService, setObjService]=useState(\"\")\n      const [patient, setPatient]=useState(\"\")\n      const [contracts, setContracts]=useState(\"\")\n      const [category, setCategory]=useState(\"\")\n\n     const {state,setState}=useContext(ObjectContext)\n     const inputEl = useRef(0);\n     let calcamount1\n     let hidestatus\n  \n\n    \n  let medication =state.medicationModule.selectedMedication\n   //console.log(medication)\n\n  const showDocumentation = async (value)=>{\n    setProductModal(true)\n  }\n  const handlecloseModal =()=>{\n    setProductModal(false)\n   // handleSearch(val)\n    }\n\n\n    const handleChangeMode= async(value)=>{\n       // console.log(value)\n       await setPaymentMode(value)\n       // console.log(paymentOptions)\n       let billm= paymentOptions.filter(el=>el.name===value)\n       await setBillMode(billm[0])\n        //console.log(billm)\n        // at startup\n        // check payment mode options from patient financial info\n        // load that to select options\n        // default to HMO-->company-->family-->cash\n        //when chosen\n        //append payment mode to order\n        //check service contract for pricing info\n        // calculate pricing \n        // pricing\n\n\n    }\n\n    const handleRow= async(ProductEntry)=>{\n    //console.log(\"b4\",state)\n\n    //console.log(\"handlerow\",ProductEntry)\n\n    //await setMedication(ProductEntry)\n\n            const    newProductEntryModule={\n                selectedMedication:ProductEntry,\n                show :'detail'\n            }\n            await setState((prevstate)=>({...prevstate, medicationModule:newProductEntryModule}))\n   //console.log(state)\n  // ProductEntry.show=!ProductEntry.show\n\n        } \n \n     const [productEntry,setProductEntry]=useState({\n         productitems:[],\n         date,\n         documentNo,\n         type,\n         totalamount,\n         source,\n \n     })\n  \n     const productItemI={\n         productId,\n         name,\n         quantity,\n         sellingprice,\n         amount:calcamount, //||qamount\n         baseunit,\n         costprice,\n         category:\"Prescription\",  //category===\"Inventory\"?\"Prescription\":category,\n         billingId,\n         billMode\n \n     }\n\n     const checkPrice= async(contracts,billMode)=>{\n         \n\n        if( billMode.type===\"HMO Cover\"){ //paymentmode\n         if (billMode.detail.plan===\"NHIS\"){\n             //find contract for NHIS\n             let contract=contracts.filter(el=>el.source_org_name===\"NHIS\")\n             if (contract.length){\n                // console.log(contract[0].price)\n               await  setSellingPrice(contract[0].price)     \n          }else{\n             toast({\n                 message: 'Please NHIS does not have cover/price for this service. Either set service price for NHIS, try another service or bill using cash',\n                 type: 'is-danger',\n                 dismissible: true,\n                 pauseOnHover: true,\n               })\n              await setSellingPrice(0)\n          }\n\n         }else{\n\n         let contract=contracts.filter(el=>el.source_org===billMode.detail.organizationId)\n         if (contract.length){\n           // console.log(contract[0].price)\n            await setSellingPrice(contract[0].price)\n            \n          }else{\n         toast({\n             message: 'Please HMO does not have cover/price for this service. Either set service price for HMO , try another drug, bill using cash or adjust amount ',\n             type: 'is-danger',\n             dismissible: true,\n             pauseOnHover: true,\n           })\n           await setSellingPrice(0)\n      }\n     \n     }\n     }\n     if( billMode.type===\"Company Cover\"){ //paymentmode\n         let contract=contracts.filter(el=>el.source_org===billMode.detail.organizationId)\n         if (contract.length){\n        // console.log(contract[0].price)\n       await   setSellingPrice(contract[0].price)\n         \n        \n        }else{\n\n         toast({\n             message: 'Please company does not have cover/price for this service. Either set service price for Company or try another drug or bill using cash',\n             type: 'is-danger',\n             dismissible: true,\n             pauseOnHover: true,\n           })\n         await  setSellingPrice(0)   \n      }\n\n  }\n  if( billMode.type===\"Cash\" || billMode.type===\"Family Cover\"){ //paymentmode\n     let contract=contracts.filter(el=>el.source_org===el.dest_org)\n     if (contract.length){\n    // console.log(contract[0].price)\n     await setSellingPrice(contract[0].price)\n    \n    \n         }else{\n\n     toast({\n         message: 'Please there is no cover/price for this service. Either set service price or try another service. Setting price at zero ',\n         type: 'is-danger',\n         dismissible: true,\n         pauseOnHover: true,\n       })\n       await setSellingPrice(0)   \n  }\n\n  }\n\n    }\n     // consider batchformat{batchno,expirydate,qtty,baseunit}\n     //consider baseunoit conversions\n     const getSearchfacility=async (obj1)=>{\n        // console.log(obj)\n       \n        if (!obj1){\n            //\"clear stuff\"\n            setProductId(\"\")\n            setName(\"\")\n            setBaseunit(\"\")\n            setInventoryId(\"\")\n            setSellingPrice(\"\")\n            setInvQuantity(\"\")\n            setQAmount(null)\n            setCostprice(\"\")\n            setContracts(\"\")\n            setCategory(\"\")\n            setBilllingId(\"\")\n            setObjService(\"\")\n           // setCalcAmount(null)\n            return\n        }\n \n         setProductId(obj1.productId)\n         setName(obj1.name)\n         setBaseunit(obj1.baseunit)\n         setInventoryId(obj1.inventoryId)\n         setSellingPrice(obj1.sellingprice) //modify this based on billing mode\n         setInvQuantity(obj1.quantity)\n         setCostprice(obj1.costprice)\n         setBilllingId(obj1.billingId)\n         setContracts(obj1.billingDetails.contracts)\n         setCategory(\"Prescription\") //obj1.billingDetails.category\n         await setObj(obj1)\n        await setObjService(obj.billingDetails)\n        // const contracts=obj.billingDetails.contracts\n         //const billingserv=client.service('billing')\n         //just did this\n        /* if( billMode.type===\"HMO Cover\"){ //paymentmode\n         let contract=contracts.filter(el=>el.source_org===billMode.detail.hmo)\n         if (contract.length){\n            console.log(contract[0].price)\n            setSellingPrice(contract[0].price)\n            console.log(sellingprice)\n         }else{\n            toast({\n                message: 'Please HMO does not have cover/price for this drug. Either set drug price for HMO or try another drug or bill using cash',\n                type: 'is-danger',\n                dismissible: true,\n                pauseOnHover: true,\n              })\n              setSellingPrice(0)\n         }\n        \n        \n        }\n        if( billMode.type===\"Company Cover\"){ //paymentmode\n            let contract=contracts.filter(el=>el.source_org===billMode.detail.company)\n            if (contract.length){\n            console.log(contract[0].price)\n            setSellingPrice(contract[0].price)\n            console.log(sellingprice)\n           \n           }else{\n\n            toast({\n                message: 'Please company does not have cover/price for this drug. Either set drug price for Company or try another drug or bill using cash',\n                type: 'is-danger',\n                dismissible: true,\n                pauseOnHover: true,\n              })\n              setSellingPrice(0)   \n         }\n          \n        /*  setValue(\"facility\", obj._id,  {\n             shouldValidate: true,\n             shouldDirty: true\n         }) */\n         /*} */\n    }\n     useEffect(() => {\n       /*  console.log(obj)\n        console.log(billMode)\n        if( paymentmode!==\"Cash\" && obj){\n            const contracts=obj.billingDetails.contracts\n            let contract=contracts.filter(el=>el.source_org===billMode.detail.hmo)\n           console.log(contract[0].price)\n           setSellingPrice(contract[0].price)\n           console.log(sellingprice)\n       }\n         return () => {\n            \n         } */\n     }, [obj])\n\n     useEffect(() => {\n         setCurrentUser(user)\n         //console.log(currentUser)\n         return () => {\n         \n         }\n     }, [user])\n \n     const handleUpdateTotal=async ()=>{\n        await setTotalamount(prevtotal=>Number(prevtotal) + Number(calcamount))\n     }\n \n     const handleChangeType=async (e)=>{\n         //console.log(e.target.value)\n         await setType(e.target.value)\n     }\n \n     const handleAmount= async()=>{\n         await setQAmount(null)\n        // alert(\"Iam chaning qamount\")\n     }\n\n     const handleClickProd=async()=>{\n       /*   console.log(\"amount: \",productItemI.amount)\n         console.log(\"qamount: \",qamount)\n         console.log(\"calcamount: \",calcamount) */\n        if ( quantity===0||quantity===\"\"|| productId===\"\"||paymentmode===\"\" ){\n            toast({\n                message: 'You need to choose a product and quantity to proceed',\n                type: 'is-danger',\n                dismissible: true,\n                pauseOnHover: true,\n              }) \n              return \n        }\n\n         await setSuccess(false)\n         await setProductItem(\n             prevProd=>prevProd.concat(productItemI)\n         )\n        handleUpdateTotal()\n            // generate billing info\n            const billInfo={\n                orderInfo:{\n                    orderId:medication._id,\n                    orderObj:medication,\n                  },\n                  serviceInfo:{            \n                    price: productItemI.sellingprice,\n                    quantity: productItemI.quantity,\n                    productId: productItemI.productId,\n                    name: productItemI.name,\n                    baseunit: productItemI.baseunit,\n                    amount:productItemI.amount,\n                    billingId:productItemI.billingId,\n                    createdby:user._id,\n                  },\n                  paymentInfo:{\n                    amountDue:productItemI.amount,\n                    paidup:0,\n                    balance:productItemI.amount,\n                    paymentDetails:[]\n              \n                  },\n                  participantInfo:{\n                    billingFacility:medication.destination,\n                    billingFacilityName:medication.destination_name,\n                    locationId:state.StoreModule.selectedStore._id, //selected location,\n                    clientId:medication.clientId,\n                    client:medication.client,\n                    paymentmode:billMode\n                  },\n                  createdBy:user.id,\n                  billing_status:\"Unpaid\"\n                }\n\n        //update order\n        \n        OrderServ.patch(medication._id,{\n            order_status:\"Billed\", //Billed\n            billInfo,\n        }).then((resp)=>{\n           // medication=resp\n           // console.log(resp)\n             handleRow(resp) \n            //update dispense\n\n        })\n        .catch((err)=>{\n            console.log(err)\n        })\n        \n        //update status(billed) + action()\n        //?attached chosen product to medication\n        //dispense helper?\n         setName(\"\")\n         setBaseunit(\"\")\n         setQuantity(\"\")\n         setInventoryId(\"\")\n         setSellingPrice(\"\")\n         setInvQuantity(\"\")\n             handleAmount()\n        // setCalcAmount(null)\n        await setSuccess(true)\n        getSearchfacility(false)\n        setObj(\"\")\n        /* console.log(success)\n        console.log(qamount)\n        console.log(productItem) */\n        setChangeAmount(true)\n       \n     }\n   //check user for facility or get list of facility  \n    /*  useEffect(()=>{\n         //setFacility(user.activeProductEntry.FacilityId)//\n       if (!user.stacker){\n           console.log(currentUser)\n            /* setValue(\"facility\", user.currentEmployee.facilityDetail._id,  {\n             shouldValidate: true,\n             shouldDirty: true\n         })  \n \n       }\n     }) */\n \n     const handleQtty=async(e)=>{\n         if (invquantity<e.target.value){\n             toast({\n                 message: 'You can not sell more quantity than exist in inventory ' ,\n                 type: 'is-danger',\n                 dismissible: true,\n                 pauseOnHover: true,\n               })\n             return\n         }\n         setQuantity(e.target.value)\n         calcamount1=quantity*sellingprice\n         await setCalcAmount(calcamount1)\n         //console.log(calcamount)\n     }\n \n     useEffect( () => {\n          setProductEntry({\n             \n             date,\n             documentNo,\n             type,\n             totalamount,\n             source,\n         })\n        setCalcAmount(quantity*sellingprice) \n         return () => {\n             \n         }\n     },[date])\n \n     const resetform=()=>{\n      setType(\"Sales\")\n     setDocumentNo(\"\")\n     setTotalamount(\"\")\n     setProductId(\"\")\n     setSource(\"\")\n     setDate(\"\")\n     setName(\"\")\n     setBaseunit()\n     setCostprice()\n     setProductItem([])\n     }\n\n\n     const handleMedicationDone= async()=>{ //handle selected single order\n        //console.log(\"b4\",state)\n    \n        //console.log(\"handlerow\",ProductEntry)\n    \n       // await setSelectedMedication(\"\")\n    \n        const    newProductEntryModule={\n            selectedMedication:{},\n            show :'create'\n        }\n      await setState((prevstate)=>({...prevstate, medicationModule:newProductEntryModule}))\n       //console.log(state)\n      // ProductEntry.show=!ProductEntry.show\n    \n    }\n \n     const onSubmit = async(e) =>{\n         e.preventDefault();\n         setMessage(\"\")\n         //setError(false)\n         setSuccess(false)\n         await setProductEntry({\n             \n             date,\n             documentNo,\n             type,\n             totalamount,\n             source,\n         })\n         productEntry.productitems=productItem\n         productEntry.createdby=user._id\n         productEntry.transactioncategory=\"debit\"\n        \n          // console.log(\"b4 facility\",productEntry);\n           if (user.currentEmployee){\n          productEntry.facility=user.currentEmployee.facilityDetail._id  // or from facility dropdown\n           }else{\n             toast({\n                 message: 'You can not remove inventory from any organization',\n                 type: 'is-danger',\n                 dismissible: true,\n                 pauseOnHover: true,\n               }) \n               return\n           }\n           \n           if (state.StoreModule.selectedStore._id){\n             productEntry.storeId=state.StoreModule.selectedStore._id\n           }else{\n             toast({\n                 message: 'You need to select a store before removing inventory',\n                 type: 'is-danger',\n                 dismissible: true,\n                 pauseOnHover: true,\n               }) \n               return\n \n           }\n           //console.log(\"b4 create\",productEntry);\n        // ProductEntryServ.create(productEntry)\n         //.then((res)=>{\n                 //console.log(JSON.stringify(res))\n           //      resetform()\n                /*  setMessage(\"Created ProductEntry successfully\") */\n             //    setSuccess(true)\n               //  toast({\n                  /*    message: 'ProductExit created succesfully',\n                     type: 'is-success',\n                     dismissible: true,\n                     pauseOnHover: true,\n                   })\n                   setSuccess(false)\n                   setProductItem([])\n                   const today=new Date().toLocaleString()\n       \n                   setDate(today)\n                   const invoiceNo=random(6,'uppernumeric')\n                 setDocumentNo(invoiceNo)\n                 setType(\"Sales\")\n             })\n             .catch((err)=>{\n                 toast({\n                     message: 'Error creating ProductExit ' + err,\n                     type: 'is-danger',\n                     dismissible: true,\n                     pauseOnHover: true,\n                   })\n             }) */\n \n       } \n \n    // console.log(\"i am rendering\")\n   /*   useEffect(() => {\n         setMedication(state.medicationModule.selectedMedication)\n        // console.log(medication)\n         return () => {\n             \n         }\n     }, [state])\n  */\n    const handleChangeAmount=()=>{\n        setChangeAmount((rev)=>(!rev))\n        \n    }\n\n    const newclient=async ()=>{\n        await  setProductItem([])\n    }\n\n    useEffect(() => {\n        setPatient(medication.client)\n        const oldname=medication.clientname\n       // console.log(\"oldname\",oldname)\n        setSource(medication.clientname)\n\n        const newname=source\n       // console.log(\"newname\",newname)\n        if (oldname!==newname){\n            //newdispense\n        \n        setProductItem([])\n        setTotalamount(0)\n\n        }\n       \n\n/*         const paymentoptions= []\n        const info = medication.client.paymentinfo\n        let billme={}\n       \n        if( medication.client.paymentinfo.cash===true){\n            const details={}\n            details.detail=  info.cashDetails\n            details.type=\"Cash\"\n            const obj={\n                name:\"Cash\",\n                value:\"Cash\",\n                detail:details,\n                type:\"Cash\"\n            }\n            paymentoptions.push(obj)\n            setPaymentMode(\"Cash\")\n            billme=obj\n        }\n        if( medication.client.paymentinfo.familyCover===true){\n            const details={}\n            details.detail=  info.familyDetails\n            details.type=\"Family Cover\"\n            const obj={\n                name:\"Family Cover\",\n                value:\"familyCover\",\n                detail:details,\n                type:\"Family Cover\"\n            }\n            paymentoptions.push(obj)\n            setPaymentMode(\"Family Cover\")\n            billme=obj\n            \n        }\n        if( medication.client.paymentinfo.companyCover===true){\n            const details={}\n            details.type=\"Company Cover\"\n            details.detail=  info.companyDetails.filter(el=>el.active===true)\n            details.detail.forEach(el=>{\n                const obj={\n                    name:\"Company: \" +el.companyName +\"(\"+el.companyPlan+\")\",\n                    value:\"companyCover\",\n                    detail:el,\n                    type:\"Company Cover\" \n                }\n                paymentoptions.push(obj)\n                setPaymentMode(\"Company: \" +el.companyName +\"(\"+el.companyPlan+\")\")\n               // console.log(\"Company: \" +el.companyName +\"(\"+el.companyPlan+\")\")\n               billme=obj\n            })\n        }\n\n        if( medication.client.paymentinfo.hmoCover===true){\n            \n            const details={}\n            details.type=\"HMO Cover\"\n            details.detail=  info.hmoDetails.filter(el=>el.active===true)\n            details.detail.forEach(el=>{\n                const obj={\n                    name:\"HMO: \" +el.hmoName +\"(\"+el.hmoPlan+\")\",\n                    value:\"hmoCover\",\n                    detail:el,\n                    type:\"HMO Cover\"\n                }\n                paymentoptions.push(obj)\n                setPaymentMode(\"HMO: \" +el.hmoName +\"(\"+el.hmoPlan+\")\")\n                //console.log(\"HMO: \" +el.hmoName +\"(\"+el.hmoPlan+\")\")\n                billme=obj\n            })\n         \n        }\n        setPaymentOptions(paymentoptions)\n        setBillMode(billme)\n       console.log(paymentoptions)\n        console.log(billMode) */\n        return () => {\n           \n        }\n    }, [medication])\n\n    useEffect(() => {\n        //setPatient(medication.client)\n        setProductItem([])\n        setTotalamount(0)\n        const paymentoptions= []\n       // const info = client.paymentinfo\n        let billme\n       let obj\n       patient &&  patient.paymentinfo.forEach((pay,i)=>{ \n           if (pay.active){\n       \n            switch(pay.paymentmode) {\n                case 'Cash':\n                  // code block\n                  obj=createObj(pay,\"Cash\",\"Cash\",\"Cash\" )\n                \n                  paymentoptions.push(obj)\n                  setPaymentMode(\"Cash\")\n                  billme=obj\n                 // console.log(\"billme\",billme)\n                  break;\n                case 'Family':\n                  // code block\n                  obj=createObj(pay,\"Family Cover\",\"familyCover\", \"Family Cover\")\n                  paymentoptions.push(obj)\n                  setPaymentMode(\"Family Cover\")\n                  billme=obj\n                 // console.log(\"billme\",billme)\n                  break;\n                case 'Company':\n                  // code block\n                  let name=\"Company: \" + pay.organizationName + \"(\" + pay.plan+\")\"\n\n                  obj=createObj(pay,name,\"CompanyCover\", \"Company Cover\" )\n                      paymentoptions.push(obj)\n                      setPaymentMode(\"Company: \" + pay.organizationName + \"(\" + pay.plan+\")\")\n                     billme=obj\n                    // console.log(\"billme\",billme)\n                  break;\n                case 'HMO':\n                  // code block\n                 let  sname=\"HMO: \" + pay.organizationName + \"(\" + pay.plan+\")\"\n\n                  obj=createObj(pay,sname,\"HMOCover\", \"HMO Cover\" )\n                      paymentoptions.push(obj)\n                      setPaymentMode(\"HMO: \" + pay.organizationName + \"(\" + pay.plan+\")\")\n                     billme=obj\n                   //  console.log(\"billme\",billme)\n                  break;\n                default:\n                  // code block\n              }\n            }\n            })\n                    \n          \n        setPaymentOptions(paymentoptions)\n        setBillMode(billme)\n       //console.log(paymentoptions)\n       // console.log(billMode)\n        return () => {\n           \n        }\n    }, [source]) //source\n\n\n     useEffect(() => {\n       // const medication =state.medicationModule.selectedMedication\n         const today=new Date().toLocaleString()\n         //console.log(today)\n         setDate(today)\n         const invoiceNo=random(6,'uppernumeric')\n         setDocumentNo(invoiceNo)\n         return () => {\n             \n         }\n     }, [])\n\n     useEffect(() => {\n        // console.log(\"success\", success)\n         if (success){\n             setSuccess(false)\n         }\n       \n      }, [success])\n\n      const createObj= (pay,name,cover,type)=>{\n        let details={}\n          details= {...pay}\n          details.type=type\n  \n      return {\n              name,\n              value:cover,\n              detail:details,\n              type,\n          }\n  \n      }\n\n      useEffect(() => {\n        \n        //update selling price\n        if (!!billMode && !!contracts){\n           // console.log(contracts)\n            checkPrice(contracts,billMode)\n        }\n       \n        return () => {\n           \n        }\n    }, [obj])\n\n     useEffect(() => {\n        calcamount1=quantity*sellingprice\n         setCalcAmount(calcamount1)\n        // console.log(calcamount)\n         setChangeAmount(true)\n        return () => {\n            \n        }\n    }, [quantity,sellingprice])\n\n    useEffect(() => {\n       \n        if (!!billMode && !!contracts){\n            \n            checkPrice(contracts,billMode)\n        }\n        \n        return () => {\n            \n        }\n    }, [billMode])\n\n// console.log(\"simpa\")\n     return (\n         <>\n             <div className=\"card card-overflow\">\n             <div className=\"card-header\">\n                 <p className=\"card-header-title\">\n                     Bill Product\n                 </p>\n                 <button className=\"button is-success is-small btnheight mt-2\" onClick={showDocumentation}>Documentation</button>\n             </div>\n             <div className=\"card-content \">\n    \n             <form onSubmit={onSubmit}> {/* handleSubmit(onSubmit) */}\n             <div className=\"field is-horizontal\">\n             <div className=\"field-body\">\n            {/*  <div className=\"field\">    \n                 <div className=\"control\">\n                     <div className=\"select is-small\">\n                         <select name=\"type\" value={type} onChange={handleChangeType} className=\"selectadd\">\n                            <option value=\"\">Choose Type </option>\n                             <option value=\"Dispense\">Dispense</option>\n                             <option value=\"Bill\">Bill </option> */}\n                             {/* <option value=\"Dispense\">Dispense</option>\n                             <option value=\"Audit\">Audit</option> */}\n                 {/*         </select>\n                     </div>\n                 </div>\n             </div>\n */}\n             <div className=\"field\">\n                     <p className=\"control has-icons-left has-icons-right\">\n                         <input className=\"input is-small\" /* ref={register({ required: true })} */ value={source} name=\"client\" type=\"text\" onChange={e=>setSource(e.target.value)} placeholder=\"Client\" />\n                         <span className=\"icon is-small is-left\">\n                             <i className=\"fas fa-hospital\"></i>\n                         </span>                    \n                     </p>\n                 </div>\n                 <div className=\"field\">    \n                 <div className=\"control\">\n                     <div className=\"select is-small \">\n                         <select name=\"paymentmode\" value={paymentmode} onChange={(e)=>handleChangeMode(e.target.value)} className=\"selectadd\" >\n                         <option value=\"\">Billing Mode </option>\n                           {paymentOptions.map((option,i)=>(\n                               <option key={i} value={option.details}> {option.name}</option>\n                           ))}\n                           \n                            \n                            {/*  <option value=\"Cash\">Cash</option>\n                             <option value=\"Family\">Family </option>\n                            <option value=\"Company Cover\">Company Cover</option>\n                             <option value=\"HMO\">HMO</option> */}\n                         </select>\n                     </div>\n                 </div>\n             </div>\n            \n             </div>\n             </div> {/* horizontal end */}\n            {/*  <div className=\"field\">\n                 <p className=\"control has-icons-left\"> // Audit/initialization/Purchase Invoice \n                     <input className=\"input is-small\"  ref={register({ required: true })} name=\"type\" type=\"text\" placeholder=\"Type of Product Entry\"/>\n                     <span className=\"icon is-small is-left\">\n                     <i className=\" fas fa-user-md \"></i>\n                     </span>\n                 </p>\n             </div> */}\n                <div className=\"field is-horizontal\">\n                <div className=\"field-body\">\n                <div className=\"field\">\n                 <p className=\"control has-icons-left has-icons-right\">\n                     <input className=\"input is-small\"  /* ref={register({ required: true })} */ value={date}  name=\"date\" type=\"text\" onChange={e=>setDate(e.target.value)} placeholder=\"Date\" />\n                     <span className=\"icon is-small is-left\">\n                         <i className=\"fas fa-map-signs\"></i>\n                     </span>\n                 </p>\n             </div>\n             <div className=\"field\">\n                 <p className=\"control has-icons-left\">\n                     <input className=\"input is-small\" /* ref={register} */ name=\"documentNo\" value={documentNo} type=\"text\" onChange={e=>setDocumentNo(e.target.value)} placeholder=\" Invoice Number\"/>\n                     <span className=\"icon is-small is-left\">\n                     <i className=\"fas fa-phone-alt\"></i>\n                     </span>\n                 </p>\n             </div>\n             <div className=\"field\">\n                 <p className=\"control has-icons-left\">\n                     <input className=\"input is-small\" /* ref={register({ required: true })} */ value={totalamount} name=\"totalamount\" type=\"text\" onChange={e=>setTotalamount(e.target.value)} placeholder=\" Total Amount\"/>\n                     <span className=\"icon is-small is-left\">\n                     <i className=\"fas fa-coins\"></i>\n                     </span>\n                 </p>\n             </div>\n \n                 </div> \n                 </div> \n                \n                 </form>   \n                \n            \n          {/* array of ProductEntry items */}\n         \n         <label className=\"label is-small\">Medication:</label>\n         <div className=\"field is-horizontal\">\n             <div className=\"field-body\">\n             <div className=\"field\" style={{width:\"40%\"}}>\n                 <p className=\"control has-icons-left\" >\n                     <input className=\"input is-small\"  /* ref={register({ required: true })} */ disabled  name=\"order\" value={medication.order} type=\"text\" onChange={ e=> handleQtty(e)} placeholder=\"Quantity\"  />\n                     <span className=\"icon is-small is-left\">\n                     <i className=\"fas fa-hashtag\"></i>\n                     </span>\n                     <span className=\"helper is-size-7\"><strong>Instruction: </strong>{medication.instruction}</span>\n                    \n                 </p>\n                 <span className=\"helper is-size-7\"><strong>Billing Status: </strong>{medication.order_status}</span>\n             </div> \n            \n             </div>\n             </div>\n             <label className=\"label is-small\">Choose Product Item:</label>\n          <div className=\"field is-horizontal\">\n             <div className=\"field-body\">\n             <div className=\"field is-expanded\"  /* style={ !user.stacker?{display:\"none\"}:{}} */ >\n                     <InventorySearch  getSearchfacility={getSearchfacility} clear={success} /> \n                     <p className=\"control has-icons-left \" style={{display:\"none\"}}>\n                         <input className=\"input is-small\" /* ref={register ({ required: true }) }  *//* add array no */  value={productId} name=\"productId\" type=\"text\" onChange={e=>setProductId(e.target.value)} placeholder=\"Product Id\" />\n                         <span className=\"icon is-small is-left\">\n                         <i className=\"fas  fa-map-marker-alt\"></i>\n                         </span>\n                     </p>\n                  {sellingprice &&   \"N\"}{sellingprice} {sellingprice &&   \"per\"}  {baseunit} {invquantity} {sellingprice &&   \"remaining\"} \n                 </div>\n             </div>\n         </div>\n         <div className=\"field is-horizontal\">\n             <div className=\"field-body\" >\n                 <div className=\"field\" style={{width:\"40%\"}}>\n                 <p className=\"control has-icons-left\" >\n                     <input className=\"input is-small\"  /* ref={register({ required: true })} */ name=\"quantity\" value={quantity} type=\"text\" onChange={ e=> handleQtty(e)} placeholder=\"Quantity\"  />\n                     <span className=\"icon is-small is-left\">\n                     <i className=\"fas fa-hashtag\"></i>\n                     </span>\n                    \n                 </p>\n         <label >{baseunit}</label>\n             </div> \n             <div className=\"field\">\n             <label>Amount:</label>{/* <p>{quantity*sellingprice}</p> */}\n             </div>\n             <div className=\"field\" style={{width:\"40%\"}}>\n                 <p className=\"control has-icons-left \" /* style={{display:\"none\"}} */>\n                     <input className=\"input is-small\"  name=\"qamount\" disabled={changeAmount} value={calcamount} type=\"text\"  onChange={async e=> await setCalcAmount(e.target.value)}  placeholder=\"Amount\"  />\n                     <span className=\"icon is-small is-left\">\n                     <i className=\"fas fa-dollar-sign\"></i>\n                     </span>\n                 </p>\n                 <button className=\"button is-small is-success btnheight\" onClick={handleChangeAmount}>Adjust</button>\n \n             </div> \n             <div className=\"field\">\n             <p className=\"control\">\n                     <button className=\"button is-info is-small  is-pulled-right\">\n                       <span className=\"is-small\" onClick={handleClickProd}> +</span>\n                     </button>\n                 </p>\n             </div>\n             </div>\n          </div>\n             \n        {(productItem.length>0) && <div>\n             <label>Product Items:</label>\n          <table className=\"table is-striped  is-hoverable is-fullwidth is-scrollable \">\n                 <thead>\n                     <tr>\n                     <th><abbr title=\"Serial No\">S/No</abbr></th>\n                     <th><abbr title=\"Type\">Name</abbr></th>\n                     <th><abbr title=\"Type\">Quanitity</abbr></th>\n                     <th><abbr title=\"Document No\">Unit</abbr></th>\n                     <th><abbr title=\"Cost Price\">Selling Price</abbr></th>\n                     <th><abbr title=\"Cost Price\">Amount</abbr></th>\n                     <th><abbr title=\"Actions\">Actions</abbr></th>\n                     </tr>\n                 </thead>\n                 <tfoot>\n                     \n                 </tfoot>\n                 <tbody>\n                    { productItem.map((ProductEntry, i)=>(\n                          <tr key={i}>\n                         <th>{i+1}</th>\n                         <td>{ProductEntry.name}</td>\n                         <th>{ProductEntry.quantity}</th>\n                         <td>{ProductEntry.baseunit}</td>\n                         <td>{ProductEntry.sellingprice}</td>\n                         <td>{ProductEntry.amount}</td>\n                         <td><span className=\"showAction\"  >x</span></td>\n                         </tr>\n                     ))}\n                 </tbody>\n                 </table>\n                 <div className=\"field mt-2 is-grouped\">\n                 <p className=\"control\">\n                     <button className=\"button is-success is-small\" disabled={!productItem.length>0} onClick={handleMedicationDone}>\n                        Done\n                     </button>\n                 </p>\n                {/*  <p className=\"control\">\n                     <button className=\"button is-warning is-small\" disabled={!productItem.length>0} onClick={onSubmit} >\n                         Clear\n                     </button>\n                 </p> */}\n                 </div>\n                 </div>\n            \n             }\n             \n             \n             </div>\n             </div>\n             <div className={`modal ${productModal?\"is-active\":\"\"}` }>\n                                    <div className=\"modal-background\"></div>\n                                    <div className=\"modal-card  modalbkgrnd\">\n                                        <header className=\"modal-card-head  btnheight\">\n                                        <p className=\"modal-card-title\">Documentation</p>\n                                        <button className=\"delete\" aria-label=\"close\"  onClick={handlecloseModal}></button>\n                                        </header>\n                                        <section className=\"modal-card-body modalcolor\">\n                                      \n                                         <Encounter standalone=\"true\" />\n                                        </section> \n                                        {/* <footer className=\"modal-card-foot\">\n                                        <button className=\"button is-success\">Save changes</button>\n                                        <button className=\"button\">Cancel</button>\n                                        </footer>  */}\n                                   </div>\n                                </div>      \n         </>\n     )\n    \n }\n\n export  function InventorySearch({getSearchfacility,clear}) {\n    \n    const productServ=client.service('inventory')\n    const [facilities,setFacilities]=useState([])\n     // eslint-disable-next-line\n     const [searchError, setSearchError] =useState(false)\n     // eslint-disable-next-line\n    const [showPanel, setShowPanel] =useState(false)\n     // eslint-disable-next-line\n   const [searchMessage, setSearchMessage] = useState(\"\") \n   // eslint-disable-next-line \n   const [simpa,setSimpa]=useState(\"\")\n   // eslint-disable-next-line \n   const [chosen,setChosen]=useState(false)\n   // eslint-disable-next-line \n   const [count,setCount]=useState(0)\n   const inputEl=useRef(null)\n   const [val,setVal]=useState(\"\")\n   const {user} = useContext(UserContext) \n   const {state}=useContext(ObjectContext)\n    const [productModal,setProductModal]=useState(false)\n\n   const handleRow= async(obj)=>{\n        await setChosen(true)\n        //alert(\"something is chaning\")\n       getSearchfacility(obj)\n       \n       await setSimpa(obj.name)\n       \n        // setSelectedFacility(obj)\n        setShowPanel(false)\n        await setCount(2)\n        /* const    newfacilityModule={\n            selectedFacility:facility,\n            show :'detail'\n        }\n   await setState((prevstate)=>({...prevstate, facilityModule:newfacilityModule})) */\n   //console.log(state)\n    }\n    const handleBlur=async(e)=>{\n        /*  if (count===2){\n             console.log(\"stuff was chosen\")\n         }\n        */\n       /*  console.log(\"blur\")\n         setShowPanel(false)\n        console.log(JSON.stringify(simpa))\n        if (simpa===\"\"){\n            console.log(facilities.length)\n            setSimpa(\"abc\")\n            setSimpa(\"\")\n            setFacilities([])\n            inputEl.current.setValue=\"\"\n        }\n        console.log(facilities.length)\n        console.log(inputEl.current) */\n    }\n    const handleSearch=async(value)=>{\n        setVal(value)\n        if (value===\"\"){\n            setShowPanel(false)\n            getSearchfacility(false)\n            return\n        }\n        const field='name' //field variable\n\n       \n        if (value.length>=3 ){\n            productServ.find({query: {     //service\n                 [field]: {\n                     $regex:value,\n                     $options:'i'\n                    \n                 },\n                 facility: user.currentEmployee.facilityDetail._id,\n                 storeId: state.StoreModule.selectedStore._id,\n                 $limit:10,\n                 $sort: {\n                     createdAt: -1\n                   }\n                     }}).then((res)=>{\n            //  console.log(\"product  fetched successfully\") \n            //  console.log(res.data) \n                setFacilities(res.data)\n                 setSearchMessage(\" product  fetched successfully\")\n                 setShowPanel(true)\n             })\n             .catch((err)=>{\n                toast({\n                    message: 'Error creating ProductEntry ' + err,\n                    type: 'is-danger',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  })\n             })\n         }\n        else{\n           // console.log(\"less than 3 \")\n           // console.log(val)\n            setShowPanel(false)\n            await setFacilities([])\n           // console.log(facilities)\n        }\n    }\n\n    const handleAddproduct =()=>{\n        setProductModal(true) \n    }\n    const handlecloseModal =()=>{\n        setProductModal(false)\n        handleSearch(val)\n    }\n    useEffect(() => {\n       if (clear){\n         //  console.log(\"success has changed\",clear)\n           setSimpa(\"\")\n       }\n        return () => {\n            \n        }\n    }, [clear] )\n    return (\n        <div>\n            <div className=\"field\">\n                <div className=\"control has-icons-left  \">\n                    <div className={`dropdown ${showPanel?\"is-active\":\"\"}`} style={{width:\"100%\"}}>\n                        <div className=\"dropdown-trigger\" style={{width:\"100%\"}}>\n                            <DebounceInput className=\"input is-small  is-expanded\" \n                                type=\"text\" placeholder=\"Search Product\"\n                                value={simpa}\n                                minLength={3}\n                                debounceTimeout={400}\n                                onBlur={(e)=>handleBlur(e)}\n                                onChange={(e)=>handleSearch(e.target.value)}\n                                inputRef={inputEl}\n                                  />\n                            <span className=\"icon is-small is-left\">\n                                <i className=\"fas fa-search\"></i>\n                            </span>\n                        </div>\n                        {/* {searchError&&<div>{searchMessage}</div>} */}\n                        <div className=\"dropdown-menu expanded\" style={{width:\"100%\"}}>\n                            <div className=\"dropdown-content\">\n                          { facilities.length>0?\"\":<div className=\"dropdown-item\" /* onClick={handleAddproduct} */> <span> {val} is not in your inventory</span> </div>}\n\n                              {facilities.map((facility, i)=>(\n                                    \n                                    <div className=\"dropdown-item\" key={facility._id} onClick={()=>handleRow(facility)}>\n                                        \n                                        <div><span>{facility.name}</span></div>\n                                        <div><span><strong>{facility.quantity}</strong></span>\n                                        <span>{facility.baseunit}(s) remaining</span>\n                                        <span className=\"padleft\"><strong>Price:</strong> N{facility.sellingprice}</span></div>\n                                        \n                                    </div>\n                                    \n                                    ))}\n                                    \n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            \n        </div>\n    )\n}"]},"metadata":{},"sourceType":"module"}