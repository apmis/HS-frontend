{"ast":null,"code":"import _defineProperty from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import _regeneratorRuntime from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _slicedToArray from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";/* eslint-disable */import React,{useState,useContext,useEffect,useRef}from'react';import{Route,Switch,useRouteMatch,Link,NavLink,useHistory}from'react-router-dom';import client from'../../feathers';import{DebounceInput}from'react-debounce-input';import{useForm}from\"react-hook-form\";//import {useHistory} from 'react-router-dom'\nimport{UserContext,ObjectContext}from'../../context';import{toast}from'bulma-toast';import Encounter from'../EncounterMgt/Encounter';import{formatDistanceToNowStrict,format,subDays,addDays}from'date-fns';import DatePicker from\"react-datepicker\";import LocationSearch from\"../helpers/LocationSearch\";import EmployeeSearch from\"../helpers/EmployeeSearch\";import BillServiceCreate from'../Finance/BillServiceCreate';/* import {TheatreAppointmentDetail, TheatreAppointmentModify} from './TheatreAppointments' */import\"react-datepicker/dist/react-datepicker.css\";// eslint-disable-next-line\nvar searchfacility={};export default function TheatreCheckedin(){var _useContext=useContext(ObjectContext),state=_useContext.state;//,setState\n// eslint-disable-next-line\nvar _useState=useState(),_useState2=_slicedToArray(_useState,2),selectedClient=_useState2[0],setSelectedClient=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),selectedAppointment=_useState4[0],setSelectedAppointment=_useState4[1];//const [showState,setShowState]=useState() //create|modify|detail\nreturn/*#__PURE__*/_jsx(\"section\",{className:\"section remPadTop\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"columns \",children:[/*#__PURE__*/_jsx(\"div\",{className:\"column is-6 \",children:/*#__PURE__*/_jsx(TheatreStatusList,{})}),/*#__PURE__*/_jsx(\"div\",{className:\"column is-6 \",children:/*#__PURE__*/_jsx(TheatreCheckedOutList,{})})]})});}export function TheatreStatusList(){// const { register, handleSubmit, watch, errors } = useForm();\n// eslint-disable-next-line\nvar _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];// eslint-disable-next-line\nvar _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),success=_useState8[0],setSuccess=_useState8[1];// eslint-disable-next-line\nvar _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),message=_useState10[0],setMessage=_useState10[1];var ClientServ=client.service('appointments');//const history = useHistory()\n// const {user,setUser} = useContext(UserContext)\nvar _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),facilities=_useState12[0],setFacilities=_useState12[1];// eslint-disable-next-line\nvar _useState13=useState(),_useState14=_slicedToArray(_useState13,2),selectedClient=_useState14[0],setSelectedClient=_useState14[1];//\n// eslint-disable-next-line\nvar _useContext2=useContext(ObjectContext),state=_useContext2.state,setState=_useContext2.setState;// eslint-disable-next-line\nvar _useContext3=useContext(UserContext),user=_useContext3.user,setUser=_useContext3.setUser;var _useState15=useState(new Date()),_useState16=_slicedToArray(_useState15,2),startDate=_useState16[0],setStartDate=_useState16[1];var _useState17=useState(),_useState18=_slicedToArray(_useState17,2),selectedAppointment=_useState18[0],setSelectedAppointment=_useState18[1];var _useState19=useState(false),_useState20=_slicedToArray(_useState19,2),editModal=_useState20[0],setEditModal=_useState20[1];/*   const [currDate, setCurrDate] = useState() */var handleCreateNew=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var newClientModule,newClient;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:newClientModule={selectedAppointment:{},show:'create'};_context.next=3;return setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{AppointmentModule:newClientModule});});case 3://console.log(state)\nnewClient={selectedClient:{},show:'create'};_context.next=6;return setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{ClientModule:newClient});});case 6:case\"end\":return _context.stop();}}},_callee);}));return function handleCreateNew(){return _ref.apply(this,arguments);};}();var handleRow=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(Client){var newClientModule;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return setSelectedAppointment(Client);case 2:newClientModule={selectedAppointment:Client,show:'detail'};_context2.next=5;return setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{AppointmentModule:newClientModule});});case 5:showEdit();case 6:case\"end\":return _context2.stop();}}},_callee2);}));return function handleRow(_x){return _ref2.apply(this,arguments);};}();//console.log(state.employeeLocation)\nvar handleSearch=function handleSearch(val){var field='firstname';//  console.log(val)\nvar query={$or:[{firstname:{$regex:val,$options:'i'}},{lastname:{$regex:val,$options:'i'}},{middlename:{$regex:val,$options:'i'}},{phone:{$regex:val,$options:'i'}},{appointment_type:{$regex:val,$options:'i'}},{appointment_status:{$regex:val,$options:'i'}},{appointment_reason:{$regex:val,$options:'i'}},{location_type:{$regex:val,$options:'i'}},{location_name:{$regex:val,$options:'i'}},{practitioner_department:{$regex:val,$options:'i'}},{practitioner_profession:{$regex:val,$options:'i'}},{practitioner_name:{$regex:val,$options:'i'}}],facility:user.currentEmployee.facilityDetail._id,// || \"\",\n$limit:20,appointment_status:{$in:[\"Checked in\",\"Procedure\",\"Completed\"]},$sort:{createdAt:-1}};if(state.employeeLocation.locationType!==\"Front Desk\"){query.locationId=state.employeeLocation.locationId;}ClientServ.find({query:query}).then(function(res){console.log(res);setFacilities(res.data);setMessage(\" Client  fetched successfully\");setSuccess(true);}).catch(function(err){console.log(err);setMessage(\"Error fetching Client, probable network issues \"+err);setError(true);});};var getFacilities=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var stuff,findClient,_findClient;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(!user.currentEmployee){_context3.next=10;break;}stuff={facility:user.currentEmployee.facilityDetail._id,appointment_status:{$in:[\"Checked In\",\"Procedure in Progress\",\"Completed Procedure\"]},// locationId:state.employeeLocation.locationId,\n$limit:100,$sort:{createdAt:-1}};if(state.employeeLocation.locationType!==\"Front Desk\"){stuff.locationId=state.employeeLocation.locationId;}_context3.next=5;return ClientServ.find({query:stuff});case 5:findClient=_context3.sent;_context3.next=8;return setFacilities(findClient.data);case 8:_context3.next=16;break;case 10:if(!user.stacker){_context3.next=16;break;}_context3.next=13;return ClientServ.find({query:{$limit:100,$sort:{createdAt:-1}}});case 13:_findClient=_context3.sent;_context3.next=16;return setFacilities(_findClient.data);case 16:case\"end\":return _context3.stop();}}},_callee3);}));return function getFacilities(){return _ref3.apply(this,arguments);};}();useEffect(function(){if(user){handleCalendarClose();}else{/* const localUser= localStorage.getItem(\"user\")\n                    const user1=JSON.parse(localUser)\n                    console.log(localUser)\n                    console.log(user1)\n                    fetchUser(user1)\n                    console.log(user)\n                    getFacilities(user) */}ClientServ.on('created',function(obj){return handleCalendarClose();});ClientServ.on('updated',function(obj){return handleCalendarClose();});ClientServ.on('patched',function(obj){return handleCalendarClose();});ClientServ.on('removed',function(obj){return handleCalendarClose();});var newClient={selectedClient:{},show:'create'};setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{ClientModule:newClient});});return function(){};},[]);var handleCalendarClose=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var query;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:// alert(\"i am bing called \" + startDate)\nif(!!state.currDate){console.log(state.currDate);setStartDate(state.currDate);}query={start_time:{$gt:subDays(startDate,1),$lt:addDays(startDate,1)},facility:user.currentEmployee.facilityDetail._id,appointment_status:{$in:[\"Checked In\",\"Procedure in Progress\",\"Completed Procedure\"]},$limit:100,$sort:{createdAt:-1}};if(state.employeeLocation.locationType!==\"Front Desk\"){query.locationId=state.employeeLocation.locationId;}/* const findClient= */_context4.next=5;return ClientServ.find({query:query}).then(function(findClient){//  console.log(findClient.data)\n// console.log(\"xed\",startDate)\n/* await */setFacilities(findClient.data);}).catch(function(err){console.log(err);});case 5:case\"end\":return _context4.stop();}}},_callee4);}));return function handleCalendarClose(){return _ref4.apply(this,arguments);};}();var handleDate=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(date){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0://change date \nsetStartDate(date);_context5.next=3;return setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{currDate:date});});case 3:case\"end\":return _context5.stop();}}},_callee5);}));return function handleDate(_x2){return _ref5.apply(this,arguments);};}();useEffect(function(){if(!!startDate){handleCalendarClose();}else{getFacilities();}return function(){};},[startDate]);//todo: pagination and vertical scroll bar\nvar handlecloseModal1=function handlecloseModal1(){setEditModal(false);};var showEdit=function showEdit(){setEditModal(true);//history.push('/app/finance/billservice')\n};return/*#__PURE__*/_jsx(_Fragment,{children:user?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"level\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"level-left\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"level-item\",children:/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left  \",children:[/*#__PURE__*/_jsx(DebounceInput,{className:\"input is-small \",type:\"text\",placeholder:\"Search Appointments\",minLength:3,debounceTimeout:400,onChange:function onChange(e){return handleSearch(e.target.value);}}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-search\"})})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"level-item\",children:/*#__PURE__*/_jsx(DatePicker,{selected:startDate,onChange:function onChange(date){return handleDate(date);},dateFormat:\"dd/MM/yyyy\",placeholderText:\"Filter By Date\"/* isClearable */})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"level-item\",children:[\" \",/*#__PURE__*/_jsx(\"span\",{className:\"is-size-6 has-text-weight-medium\",children:\"Checked-In Clients \"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"table-container pullup \",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table is-striped is-narrow is-hoverable is-fullwidth is-scrollable \",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Serial No\",children:\"S/No\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Time\",children:\"Date/Time\"})}),/*#__PURE__*/_jsx(\"th\",{children:\"First Name\"}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Last Name\",children:\"Last Name\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Location\",children:\"Location\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Type\",children:\"Type\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Status\",children:\"Status\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Reason\",children:\"Procedure\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Information\",children:\"Information\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Practitioner\",children:\"Practitioner\"})})]})}),/*#__PURE__*/_jsx(\"tfoot\",{}),/*#__PURE__*/_jsx(\"tbody\",{children:facilities.map(function(Client,i){return/*#__PURE__*/_jsxs(\"tr\",{onClick:function onClick(){return handleRow(Client);},className:Client._id===((selectedAppointment===null||selectedAppointment===void 0?void 0:selectedAppointment._id)||null)?\"is-selected\":\"\",children:[/*#__PURE__*/_jsx(\"th\",{children:i+1}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"strong\",{children:format(new Date(Client.start_time),\"dd-MM-yy HH:mm:ss\")})}),/*#__PURE__*/_jsx(\"th\",{children:Client.firstname}),/*#__PURE__*/_jsx(\"td\",{children:Client.lastname}),/*#__PURE__*/_jsxs(\"td\",{children:[Client.location_name,\" \",Client.location_type]}),/*#__PURE__*/_jsx(\"td\",{children:Client.appointment_type}),/*#__PURE__*/_jsx(\"td\",{children:Client.appointment_status}),/*#__PURE__*/_jsx(\"td\",{children:Client.appointment_reason}),/*#__PURE__*/_jsx(\"td\",{children:Client.information}),/*#__PURE__*/_jsx(\"td\",{children:Client.practitioner_name})]},Client._id);})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal \".concat(editModal?\"is-active\":\"\"),children:[/*#__PURE__*/_jsx(\"div\",{className:\"modal-background\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-card\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"modal-card-head\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"modal-card-title\",children:\"Edit Appointment\"}),/*#__PURE__*/_jsx(\"button\",{className:\"delete\",\"aria-label\":\"close\",onClick:handlecloseModal1})]}),/*#__PURE__*/_jsxs(\"section\",{className:\"modal-card-body\",children:[state.AppointmentModule.show==='detail'&&/*#__PURE__*/_jsx(TheatreAppointmentDetail,{}),state.AppointmentModule.show==='modify'&&/*#__PURE__*/_jsx(TheatreAppointmentModify,{handlecloseModal:handlecloseModal1})]})]})]})]}):/*#__PURE__*/_jsx(\"div\",{children:\"loading\"})});}export function TheatreCheckedOutList2(){// const { register, handleSubmit, watch, errors } = useForm();\n// eslint-disable-next-line\nvar _useState21=useState(false),_useState22=_slicedToArray(_useState21,2),error=_useState22[0],setError=_useState22[1];// eslint-disable-next-line\nvar _useState23=useState(false),_useState24=_slicedToArray(_useState23,2),success=_useState24[0],setSuccess=_useState24[1];// eslint-disable-next-line\nvar _useState25=useState(\"\"),_useState26=_slicedToArray(_useState25,2),message=_useState26[0],setMessage=_useState26[1];var ClientServ=client.service('appointments');//const history = useHistory()\n// const {user,setUser} = useContext(UserContext)\nvar _useState27=useState([]),_useState28=_slicedToArray(_useState27,2),facilities=_useState28[0],setFacilities=_useState28[1];// eslint-disable-next-line\nvar _useState29=useState(),_useState30=_slicedToArray(_useState29,2),selectedClient=_useState30[0],setSelectedClient=_useState30[1];//\n// eslint-disable-next-line\nvar _useContext4=useContext(ObjectContext),state=_useContext4.state,setState=_useContext4.setState;// eslint-disable-next-line\nvar _useContext5=useContext(UserContext),user=_useContext5.user,setUser=_useContext5.setUser;var _useState31=useState(new Date()),_useState32=_slicedToArray(_useState31,2),startDate=_useState32[0],setStartDate=_useState32[1];var _useState33=useState(),_useState34=_slicedToArray(_useState33,2),selectedAppointment=_useState34[0],setSelectedAppointment=_useState34[1];var handleCreateNew=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(){var newClientModule,newClient;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:newClientModule={selectedAppointment:{},show:'create'};_context6.next=3;return setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{AppointmentModule:newClientModule});});case 3://console.log(state)\nnewClient={selectedClient:{},show:'create'};_context6.next=6;return setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{ClientModule:newClient});});case 6:case\"end\":return _context6.stop();}}},_callee6);}));return function handleCreateNew(){return _ref6.apply(this,arguments);};}();var handleRow=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(Client){var newClientModule;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return setSelectedAppointment(Client);case 2:newClientModule={selectedAppointment:Client,show:'detail'};_context7.next=5;return setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{AppointmentModule:newClientModule});});case 5:case\"end\":return _context7.stop();}}},_callee7);}));return function handleRow(_x3){return _ref7.apply(this,arguments);};}();//console.log(state.employeeLocation)\nvar handleSearch=function handleSearch(val){var field='firstname';//  console.log(val)\nvar query={$or:[{firstname:{$regex:val,$options:'i'}},{lastname:{$regex:val,$options:'i'}},{middlename:{$regex:val,$options:'i'}},{phone:{$regex:val,$options:'i'}},{appointment_type:{$regex:val,$options:'i'}},{appointment_status:{$regex:val,$options:'i'}},{appointment_reason:{$regex:val,$options:'i'}},{location_type:{$regex:val,$options:'i'}},{location_name:{$regex:val,$options:'i'}},{practitioner_department:{$regex:val,$options:'i'}},{practitioner_profession:{$regex:val,$options:'i'}},{practitioner_name:{$regex:val,$options:'i'}}],facility:user.currentEmployee.facilityDetail._id,// || \"\",\n$limit:20,appointment_status:\"Checked Out\",$sort:{createdAt:-1}};if(state.employeeLocation.locationType!==\"Front Desk\"){query.locationId=state.employeeLocation.locationId;}ClientServ.find({query:query}).then(function(res){console.log(res);setFacilities(res.data);setMessage(\" Client  fetched successfully\");setSuccess(true);}).catch(function(err){console.log(err);setMessage(\"Error fetching Client, probable network issues \"+err);setError(true);});};var getFacilities=/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(){var stuff,findClient,_findClient2;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:if(!user.currentEmployee){_context8.next=10;break;}stuff={facility:user.currentEmployee.facilityDetail._id,appointment_status:'Checked Out',// locationId:state.employeeLocation.locationId,\n$limit:1000,$sort:{createdAt:-1}};if(state.employeeLocation.locationType!==\"Front Desk\"){stuff.locationId=state.employeeLocation.locationId;}_context8.next=5;return ClientServ.find({query:stuff});case 5:findClient=_context8.sent;_context8.next=8;return setFacilities(findClient.data);case 8:_context8.next=16;break;case 10:if(!user.stacker){_context8.next=16;break;}_context8.next=13;return ClientServ.find({query:{$limit:100,$sort:{createdAt:-1}}});case 13:_findClient2=_context8.sent;_context8.next=16;return setFacilities(_findClient2.data);case 16:case\"end\":return _context8.stop();}}},_callee8);}));return function getFacilities(){return _ref8.apply(this,arguments);};}();useEffect(function(){if(user){handleCalendarClose();}else{/* const localUser= localStorage.getItem(\"user\")\n                         const user1=JSON.parse(localUser)\n                         console.log(localUser)\n                         console.log(user1)\n                         fetchUser(user1)\n                         console.log(user)\n                         getFacilities(user) */}ClientServ.on('created',function(obj){return handleCalendarClose();});ClientServ.on('updated',function(obj){return handleCalendarClose();});ClientServ.on('patched',function(obj){return handleCalendarClose();});ClientServ.on('removed',function(obj){return handleCalendarClose();});var newClient={selectedClient:{},show:'create'};setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{ClientModule:newClient});});return function(){};},[]);var handleCalendarClose=/*#__PURE__*/function(){var _ref9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(){var query,findClient;return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:query={start_time:{$gt:subDays(startDate,1),$lt:addDays(startDate,1)},facility:user.currentEmployee.facilityDetail._id,appointment_status:'Checked Out',$limit:1000,$sort:{createdAt:-1}};if(state.employeeLocation.locationType!==\"Front Desk\"){query.locationId=state.employeeLocation.locationId;}_context9.next=4;return ClientServ.find({query:query});case 4:findClient=_context9.sent;_context9.next=7;return setFacilities(findClient.data);case 7:case\"end\":return _context9.stop();}}},_callee9);}));return function handleCalendarClose(){return _ref9.apply(this,arguments);};}();var handleDate=/*#__PURE__*/function(){var _ref10=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee10(date){return _regeneratorRuntime.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:setStartDate(date);case 1:case\"end\":return _context10.stop();}}},_callee10);}));return function handleDate(_x4){return _ref10.apply(this,arguments);};}();useEffect(function(){if(!!startDate){handleCalendarClose();}else{getFacilities();}return function(){};},[startDate]);//todo: pagination and vertical scroll bar\nreturn/*#__PURE__*/_jsx(_Fragment,{children:user?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"level\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"level-left\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"level-item\",children:/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left  \",children:[/*#__PURE__*/_jsx(DebounceInput,{className:\"input is-small \",type:\"text\",placeholder:\"Search Appointments\",minLength:3,debounceTimeout:400,onChange:function onChange(e){return handleSearch(e.target.value);}}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-search\"})})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"level-item\",children:/*#__PURE__*/_jsx(DatePicker,{selected:startDate,onChange:function onChange(date){return handleDate(date);},dateFormat:\"dd/MM/yyyy\",placeholderText:\"Filter By Date\",isClearable:true})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"level-item\",children:[\" \",/*#__PURE__*/_jsx(\"span\",{className:\"is-size-6 has-text-weight-medium\",children:\"Checked Out Clients \"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"table-container pullup \",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table is-striped is-narrow is-hoverable is-fullwidth is-scrollable \",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Serial No\",children:\"S/No\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Time\",children:\"Date/Time\"})}),/*#__PURE__*/_jsx(\"th\",{children:\"First Name\"}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Last Name\",children:\"Last Name\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Location\",children:\"Location\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Type\",children:\"Type\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Status\",children:\"Status\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Reason\",children:\"Procedure\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Information\",children:\"Information\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Practitioner\",children:\"Practitioner\"})})]})}),/*#__PURE__*/_jsx(\"tfoot\",{}),/*#__PURE__*/_jsx(\"tbody\",{children:facilities.map(function(Client,i){return/*#__PURE__*/_jsxs(\"tr\",{onClick:function onClick(){return handleRow(Client);},className:Client._id===((selectedAppointment===null||selectedAppointment===void 0?void 0:selectedAppointment._id)||null)?\"is-selected\":\"\",children:[/*#__PURE__*/_jsx(\"th\",{children:i+1}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"strong\",{children:format(new Date(Client.start_time),\"dd-MM-yy HH:mm:ss\")})}),/*#__PURE__*/_jsx(\"th\",{children:Client.firstname}),/*#__PURE__*/_jsx(\"td\",{children:Client.lastname}),/*#__PURE__*/_jsxs(\"td\",{children:[Client.location_name,\" \",Client.location_type]}),/*#__PURE__*/_jsx(\"td\",{children:Client.appointment_type}),/*#__PURE__*/_jsx(\"td\",{children:Client.appointment_status}),/*#__PURE__*/_jsx(\"td\",{children:Client.appointment_reason}),/*#__PURE__*/_jsx(\"td\",{children:Client.information}),/*#__PURE__*/_jsx(\"td\",{children:Client.practitioner_name})]},Client._id);})})]})})]}):/*#__PURE__*/_jsx(\"div\",{children:\"loading\"})});}export function TheatreCheckedOutList(){// const { register, handleSubmit, watch, errors } = useForm();\n// eslint-disable-next-line\nvar _useState35=useState(false),_useState36=_slicedToArray(_useState35,2),error=_useState36[0],setError=_useState36[1];// eslint-disable-next-line\nvar _useState37=useState(false),_useState38=_slicedToArray(_useState37,2),success=_useState38[0],setSuccess=_useState38[1];// eslint-disable-next-line\nvar _useState39=useState(\"\"),_useState40=_slicedToArray(_useState39,2),message=_useState40[0],setMessage=_useState40[1];var ClientServ=client.service('appointments');//const history = useHistory()\n// const {user,setUser} = useContext(UserContext)\nvar _useState41=useState([]),_useState42=_slicedToArray(_useState41,2),facilities=_useState42[0],setFacilities=_useState42[1];// eslint-disable-next-line\nvar _useState43=useState(),_useState44=_slicedToArray(_useState43,2),selectedClient=_useState44[0],setSelectedClient=_useState44[1];//\n// eslint-disable-next-line\nvar _useContext6=useContext(ObjectContext),state=_useContext6.state,setState=_useContext6.setState;// eslint-disable-next-line\nvar _useContext7=useContext(UserContext),user=_useContext7.user,setUser=_useContext7.setUser;var _useState45=useState(new Date()),_useState46=_slicedToArray(_useState45,2),startDate=_useState46[0],setStartDate=_useState46[1];var _useState47=useState(),_useState48=_slicedToArray(_useState47,2),selectedAppointment=_useState48[0],setSelectedAppointment=_useState48[1];var _useState49=useState(false),_useState50=_slicedToArray(_useState49,2),editModal=_useState50[0],setEditModal=_useState50[1];/*   const [currDate, setCurrDate] = useState() */var handleCreateNew=/*#__PURE__*/function(){var _ref11=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee11(){var newClientModule,newClient;return _regeneratorRuntime.wrap(function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:newClientModule={selectedAppointment:{},show:'create'};_context11.next=3;return setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{AppointmentModule:newClientModule});});case 3://console.log(state)\nnewClient={selectedClient:{},show:'create'};_context11.next=6;return setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{ClientModule:newClient});});case 6:case\"end\":return _context11.stop();}}},_callee11);}));return function handleCreateNew(){return _ref11.apply(this,arguments);};}();var handleRow=/*#__PURE__*/function(){var _ref12=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee12(Client){var newClientModule;return _regeneratorRuntime.wrap(function _callee12$(_context12){while(1){switch(_context12.prev=_context12.next){case 0:_context12.next=2;return setSelectedAppointment(Client);case 2:newClientModule={selectedAppointment:Client,show:'detail'};_context12.next=5;return setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{AppointmentModule:newClientModule});});case 5:showEdit();case 6:case\"end\":return _context12.stop();}}},_callee12);}));return function handleRow(_x5){return _ref12.apply(this,arguments);};}();//console.log(state.employeeLocation)\nvar handleSearch=function handleSearch(val){var field='firstname';//  console.log(val)\nvar query={$or:[{firstname:{$regex:val,$options:'i'}},{lastname:{$regex:val,$options:'i'}},{middlename:{$regex:val,$options:'i'}},{phone:{$regex:val,$options:'i'}},{appointment_type:{$regex:val,$options:'i'}},{appointment_status:{$regex:val,$options:'i'}},{appointment_reason:{$regex:val,$options:'i'}},{location_type:{$regex:val,$options:'i'}},{location_name:{$regex:val,$options:'i'}},{practitioner_department:{$regex:val,$options:'i'}},{practitioner_profession:{$regex:val,$options:'i'}},{practitioner_name:{$regex:val,$options:'i'}}],facility:user.currentEmployee.facilityDetail._id,// || \"\",\n$limit:20,appointment_status:{$in:[\"Checked in\",\"Procedure\",\"Completed\"]},$sort:{createdAt:-1}};if(state.employeeLocation.locationType!==\"Front Desk\"){query.locationId=state.employeeLocation.locationId;}ClientServ.find({query:query}).then(function(res){console.log(res);setFacilities(res.data);setMessage(\" Client  fetched successfully\");setSuccess(true);}).catch(function(err){console.log(err);setMessage(\"Error fetching Client, probable network issues \"+err);setError(true);});};var getFacilities=/*#__PURE__*/function(){var _ref13=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee13(){var stuff,findClient,_findClient3;return _regeneratorRuntime.wrap(function _callee13$(_context13){while(1){switch(_context13.prev=_context13.next){case 0:if(!user.currentEmployee){_context13.next=10;break;}stuff={facility:user.currentEmployee.facilityDetail._id,appointment_status:{$in:[\"Checked Out\"]},// locationId:state.employeeLocation.locationId,\n$limit:100,$sort:{createdAt:-1}};if(state.employeeLocation.locationType!==\"Front Desk\"){stuff.locationId=state.employeeLocation.locationId;}_context13.next=5;return ClientServ.find({query:stuff});case 5:findClient=_context13.sent;_context13.next=8;return setFacilities(findClient.data);case 8:_context13.next=16;break;case 10:if(!user.stacker){_context13.next=16;break;}_context13.next=13;return ClientServ.find({query:{$limit:100,$sort:{createdAt:-1}}});case 13:_findClient3=_context13.sent;_context13.next=16;return setFacilities(_findClient3.data);case 16:case\"end\":return _context13.stop();}}},_callee13);}));return function getFacilities(){return _ref13.apply(this,arguments);};}();useEffect(function(){if(user){handleCalendarClose();}else{/* const localUser= localStorage.getItem(\"user\")\n                     const user1=JSON.parse(localUser)\n                     console.log(localUser)\n                     console.log(user1)\n                     fetchUser(user1)\n                     console.log(user)\n                     getFacilities(user) */}ClientServ.on('created',function(obj){return handleCalendarClose();});ClientServ.on('updated',function(obj){return handleCalendarClose();});ClientServ.on('patched',function(obj){return handleCalendarClose();});ClientServ.on('removed',function(obj){return handleCalendarClose();});var newClient={selectedClient:{},show:'create'};setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{ClientModule:newClient});});return function(){};},[]);var handleCalendarClose=/*#__PURE__*/function(){var _ref14=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee14(){var query;return _regeneratorRuntime.wrap(function _callee14$(_context14){while(1){switch(_context14.prev=_context14.next){case 0:// alert(\"i am bing called \" + startDate)\nif(!!state.currDate2){console.log(state.currDate2);setStartDate(state.currDate2);}query={start_time:{$gt:subDays(startDate,1),$lt:addDays(startDate,1)},facility:user.currentEmployee.facilityDetail._id,appointment_status:{$in:[\"Checked Out\"]},$limit:100,$sort:{createdAt:-1}};if(state.employeeLocation.locationType!==\"Front Desk\"){query.locationId=state.employeeLocation.locationId;}/* const findClient= */_context14.next=5;return ClientServ.find({query:query}).then(function(findClient){//  console.log(findClient.data)\n// console.log(\"xed\",startDate)\n/* await */setFacilities(findClient.data);}).catch(function(err){console.log(err);});case 5:case\"end\":return _context14.stop();}}},_callee14);}));return function handleCalendarClose(){return _ref14.apply(this,arguments);};}();var handleDate=/*#__PURE__*/function(){var _ref15=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee15(date){return _regeneratorRuntime.wrap(function _callee15$(_context15){while(1){switch(_context15.prev=_context15.next){case 0://change date \nsetStartDate(date);_context15.next=3;return setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{currDate2:date});});case 3:case\"end\":return _context15.stop();}}},_callee15);}));return function handleDate(_x6){return _ref15.apply(this,arguments);};}();useEffect(function(){if(!!startDate){handleCalendarClose();}else{getFacilities();}return function(){};},[startDate]);//todo: pagination and vertical scroll bar\nvar handlecloseModal1=function handlecloseModal1(){setEditModal(false);};var showEdit=function showEdit(){setEditModal(true);//history.push('/app/finance/billservice')\n};return/*#__PURE__*/_jsx(_Fragment,{children:user?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"level\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"level-left\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"level-item\",children:/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left  \",children:[/*#__PURE__*/_jsx(DebounceInput,{className:\"input is-small \",type:\"text\",placeholder:\"Search Appointments\",minLength:3,debounceTimeout:400,onChange:function onChange(e){return handleSearch(e.target.value);}}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-search\"})})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"level-item\",children:/*#__PURE__*/_jsx(DatePicker,{selected:startDate,onChange:function onChange(date){return handleDate(date);},dateFormat:\"dd/MM/yyyy\",placeholderText:\"Filter By Date\"/* isClearable */})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"level-item\",children:[\" \",/*#__PURE__*/_jsx(\"span\",{className:\"is-size-6 has-text-weight-medium\",children:\"Checked-In Clients \"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"table-container pullup \",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table is-striped is-narrow is-hoverable is-fullwidth is-scrollable \",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Serial No\",children:\"S/No\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Time\",children:\"Date/Time\"})}),/*#__PURE__*/_jsx(\"th\",{children:\"First Name\"}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Last Name\",children:\"Last Name\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Location\",children:\"Location\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Type\",children:\"Type\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Status\",children:\"Status\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Reason\",children:\"Procedure\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Information\",children:\"Information\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Practitioner\",children:\"Practitioner\"})})]})}),/*#__PURE__*/_jsx(\"tfoot\",{}),/*#__PURE__*/_jsx(\"tbody\",{children:facilities.map(function(Client,i){return/*#__PURE__*/_jsxs(\"tr\",{onClick:function onClick(){return handleRow(Client);},className:Client._id===((selectedAppointment===null||selectedAppointment===void 0?void 0:selectedAppointment._id)||null)?\"is-selected\":\"\",children:[/*#__PURE__*/_jsx(\"th\",{children:i+1}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"strong\",{children:format(new Date(Client.start_time),\"dd-MM-yy HH:mm:ss\")})}),/*#__PURE__*/_jsx(\"th\",{children:Client.firstname}),/*#__PURE__*/_jsx(\"td\",{children:Client.lastname}),/*#__PURE__*/_jsxs(\"td\",{children:[Client.location_name,\" \",Client.location_type]}),/*#__PURE__*/_jsx(\"td\",{children:Client.appointment_type}),/*#__PURE__*/_jsx(\"td\",{children:Client.appointment_status}),/*#__PURE__*/_jsx(\"td\",{children:Client.appointment_reason}),/*#__PURE__*/_jsx(\"td\",{children:Client.information}),/*#__PURE__*/_jsx(\"td\",{children:Client.practitioner_name})]},Client._id);})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal \".concat(editModal?\"is-active\":\"\"),children:[/*#__PURE__*/_jsx(\"div\",{className:\"modal-background\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-card\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"modal-card-head\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"modal-card-title\",children:\"Edit Appointment\"}),/*#__PURE__*/_jsx(\"button\",{className:\"delete\",\"aria-label\":\"close\",onClick:handlecloseModal1})]}),/*#__PURE__*/_jsxs(\"section\",{className:\"modal-card-body\",children:[state.AppointmentModule.show==='detail'&&/*#__PURE__*/_jsx(TheatreAppointmentDetail,{}),state.AppointmentModule.show==='modify'&&/*#__PURE__*/_jsx(TheatreAppointmentModify,{handlecloseModal:handlecloseModal1})]})]})]})]}):/*#__PURE__*/_jsx(\"div\",{children:\"loading\"})});}export function TheatreAppointmentDetail(){//const { register, handleSubmit, watch, setValue } = useForm(); //errors,\n// eslint-disable-next-line\nvar history=useHistory();var _useRouteMatch=useRouteMatch(),path=_useRouteMatch.path,url=_useRouteMatch.url;var _useState51=useState(false),_useState52=_slicedToArray(_useState51,2),error=_useState52[0],setError=_useState52[1];//, \n//const [success, setSuccess] =useState(false)\n// eslint-disable-next-line\nvar _useState53=useState(\"\"),_useState54=_slicedToArray(_useState53,2),message=_useState54[0],setMessage=_useState54[1];//,\n//const ClientServ=client.service('/Client')\n//const history = useHistory()\n//const {user,setUser} = useContext(UserContext)\nvar _useContext8=useContext(ObjectContext),state=_useContext8.state,setState=_useContext8.setState;var _useState55=useState(),_useState56=_slicedToArray(_useState55,2),selectedClient=_useState56[0],setSelectedClient=_useState56[1];var _useState57=useState(),_useState58=_slicedToArray(_useState57,2),selectedAppointment=_useState58[0],setSelectedAppointment=_useState58[1];var Client=state.AppointmentModule.selectedAppointment;//const client=Client\nvar handleEdit=/*#__PURE__*/function(){var _ref16=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee16(){var newClientModule;return _regeneratorRuntime.wrap(function _callee16$(_context16){while(1){switch(_context16.prev=_context16.next){case 0:newClientModule={selectedAppointment:Client,show:'modify'};_context16.next=3;return setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{AppointmentModule:newClientModule});});case 3:case\"end\":return _context16.stop();}}},_callee16);}));return function handleEdit(){return _ref16.apply(this,arguments);};}();var handleAttend=/*#__PURE__*/function(){var _ref17=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee17(){var patient,newClientModule;return _regeneratorRuntime.wrap(function _callee17$(_context17){while(1){switch(_context17.prev=_context17.next){case 0:_context17.next=2;return client.service('client').get(Client.clientId);case 2:patient=_context17.sent;_context17.next=5;return setSelectedClient(patient);case 5:newClientModule={selectedClient:patient,show:'detail'};_context17.next=8;return setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{ClientModule:newClientModule});});case 8://modify appointment\nhistory.push('/app/theatre/encounter');case 9:case\"end\":return _context17.stop();}}},_callee17);}));return function handleAttend(){return _ref17.apply(this,arguments);};}();return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"card \",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsx(\"p\",{className:\"card-header-title\",children:\"Client Details\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-content vscrollable\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field-body\",children:[Client.firstname&&/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left has-icons-right\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0 \",name:\"firstname\",type:\"text\",children:\"First Name \"}),/*#__PURE__*/_jsx(\"label\",{className:\"is-size-7 my-0 \",children:Client.firstname}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-hospital\"})})]})}),Client.middlename&&/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left has-icons-right\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",name:\"middlename\",type:\"text\",children:\" Middle Name \"}),/*#__PURE__*/_jsx(\"label\",{className:\"is-size-7 my-0\",children:Client.middlename}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-map-signs\"})})]})}),Client.lastname&&/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",name:\"lastname\",type:\"text\",children:\"Last Name\"}),/*#__PURE__*/_jsx(\"label\",{className:\"is-size-7 my-0\",children:Client.lastname}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\" nop-user-md \"})})]})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field-body\",children:[Client.dob&&/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",name:\"dob\",type:\"text\",children:\"Date of Birth \"}),/*#__PURE__*/_jsx(\"label\",{className:\"is-size-7 my-0\",children:new Date(Client.dob).toLocaleDateString('en-GB')}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-envelope\"})})]})}),Client.gender&&/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",name:\"gender\",type:\"text\",children:\"Gender \"}),/*#__PURE__*/_jsx(\"label\",{className:\"is-size-7 my-0\",children:Client.gender}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-envelope\"})})]})}),Client.maritalstatus&&/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",name:\"maritalstatus\",type:\"text\",children:\"Marital Status \"}),/*#__PURE__*/_jsx(\"label\",{className:\"is-size-7 my-0\",children:Client.maritalstatus}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-envelope\"})})]})}),Client.mrn&&/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",name:\"mrn\",type:\"text\",children:\"Medical Records Number  \"}),/*#__PURE__*/_jsx(\"label\",{className:\"is-size-7 my-0\",children:Client.mrn}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-envelope\"})})]})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field-body\",children:[Client.religion&&/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",name:\"religion\",type:\"text\",children:\"Religion  \"}),/*#__PURE__*/_jsx(\"label\",{className:\"is-size-7 my-0\",children:Client.religion}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-envelope\"})})]})}),Client.profession&&/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",name:\"profession\",type:\"text\",children:\"Profession  \"}),/*#__PURE__*/_jsx(\"label\",{className:\"is-size-7 my-0\",children:Client.profession}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-envelope\"})})]})}),Client.phone&&/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",name:\"phone\",type:\"text\",children:\" Phone No\"}),/*#__PURE__*/_jsx(\"label\",{className:\"is-size-7 my-0\",children:Client.phone}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-phone-alt\"})})]})}),Client.email&&/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",name:\"email\",type:\"email\",children:\"Email  \"}),/*#__PURE__*/_jsx(\"label\",{className:\"is-size-7 my-0\",children:Client.email}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-envelope\"})})]})})]})}),Client.address&&/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",name:\"address\",type:\"text\",children:\"Residential Address  \"}),/*#__PURE__*/_jsx(\"label\",{className:\"is-size-7 my-0\",children:Client.address}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-envelope\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field-body\",children:[Client.city&&/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",name:\"city\",type:\"text\",children:\"Town/City  \"}),/*#__PURE__*/_jsx(\"label\",{className:\"is-size-7 my-0\",children:Client.city}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-envelope\"})})]})}),Client.lga&&/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",name:\"lga\",type:\"text\",children:\"Local Govt Area  \"}),/*#__PURE__*/_jsx(\"label\",{className:\"is-size-7 my-0\",children:Client.lga}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-envelope\"})})]})}),Client.state&&/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",name:\"state\",type:\"text\",children:\"State  \"}),/*#__PURE__*/_jsx(\"label\",{className:\"is-size-7 my-0\",children:Client.state}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-envelope\"})})]})}),Client.country&&/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",name:\"country\",type:\"text\",children:\"Country  \"}),/*#__PURE__*/_jsx(\"label\",{className:\"is-size-7 my-0\",children:Client.country}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-envelope\"})})]})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field-body\",children:[Client.bloodgroup&&/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",name:\"bloodgroup\",type:\"text\",children:\"Blood Group \"}),/*#__PURE__*/_jsx(\"label\",{className:\"is-size-7 my-0\",children:Client.bloodgroup}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-envelope\"})})]})}),Client.genotype&&/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",name:\"genotype\",type:\"text\",children:\"Genotype  \"}),/*#__PURE__*/_jsx(\"label\",{className:\"is-size-7 my-0\",children:Client.genotype}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-envelope\"})})]})}),Client.disabilities&&/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",name:\"disabilities\",type:\"text\",children:\"Disabilities  \"}),/*#__PURE__*/_jsx(\"label\",{className:\"is-size-7 my-0\",children:Client.disabilities}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-envelope\"})})]})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field-body\",children:[Client.allergies&&/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",name:\"allergies\",type:\"text\",children:\"Allergies  \"}),/*#__PURE__*/_jsx(\"label\",{className:\"is-size-7 my-0\",children:Client.allergies}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-envelope\"})})]})}),Client.comorbidities&&/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",name:\"comorbidities\",type:\"text\",children:\"Co-mobidities  \"}),/*#__PURE__*/_jsx(\"label\",{className:\"is-size-7 my-0\",children:Client.comorbidities}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-envelope\"})})]})})]})}),Client.clientTags&&/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",name:\"clientTags\",type:\"text\",children:\"Tags \"}),/*#__PURE__*/_jsx(\"label\",{className:\"is-size-7 my-0\",children:Client.clientTags}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-envelope\"})})]})}),Client.specificDetails&&/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",name:\"specificDetails\",type:\"text\",children:\"Specific Details about Client \"}),/*#__PURE__*/_jsx(\"label\",{className:\"is-size-7 my-0\",children:Client.specificDetails}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-envelope\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field-body\",children:[Client.nok_name&&/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",name:\"nok_name\",type:\"text\",children:\"Next of Kin Full Name\"}),/*#__PURE__*/_jsx(\"label\",{className:\"is-size-7 my-0\",children:Client.nok_name}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-clinic-medical\"})})]})}),Client.nok_phoneno&&/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",name:\"nok_phoneno\",type:\"text\",children:\"Next of Kin Phone Number\"}),/*#__PURE__*/_jsx(\"label\",{className:\"is-size-7 my-0\",children:Client.nok_phoneno}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-clinic-medical\"})})]})}),Client.nok_email&&/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",name:\"nok_email\",type:\"email\",children:\"Next of Kin Email \"}),/*#__PURE__*/_jsx(\"label\",{className:\"is-size-7 my-0\",children:Client.nok_email}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-envelope\"})})]})}),Client.nok_relationship&&/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",name:\"nok_relationship\",type:\"text\",children:\"Next of Kin Relationship\\\"  \"}),/*#__PURE__*/_jsx(\"label\",{className:\"is-size-7 my-0\",children:Client.nok_relationship}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-envelope\"})})]})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"field is-grouped  mt-2\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"control\",children:/*#__PURE__*/_jsx(\"button\",{className:\"button is-success is-small\",onClick:handleEdit,children:\"Edit Appointment Details\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"control\",children:/*#__PURE__*/_jsx(\"button\",{className:\"button is-link is-small\",onClick:function onClick(){return handleAttend();},children:\"Attend to Client\"})})]})]})]})});}export function TheatreAppointmentModify(_ref18){var _jsxs2;var handlecloseModal=_ref18.handlecloseModal;var _useForm=useForm(),register=_useForm.register,handleSubmit=_useForm.handleSubmit,setValue=_useForm.setValue,reset=_useForm.reset,errors=_useForm.errors;//watch, errors,\n// eslint-disable-next-line \nvar _useState59=useState(false),_useState60=_slicedToArray(_useState59,2),error=_useState60[0],setError=_useState60[1];// eslint-disable-next-line \nvar _useState61=useState(false),_useState62=_slicedToArray(_useState61,2),success=_useState62[0],setSuccess=_useState62[1];// eslint-disable-next-line \nvar _useState63=useState(\"\"),_useState64=_slicedToArray(_useState63,2),message=_useState64[0],setMessage=_useState64[1];// eslint-disable-next-line \nvar ClientServ=client.service('appointments');//const history = useHistory()\n// eslint-disable-next-line\nvar _useContext9=useContext(UserContext),user=_useContext9.user;var _useContext10=useContext(ObjectContext),state=_useContext10.state,setState=_useContext10.setState;var _useState65=useState(),_useState66=_slicedToArray(_useState65,2),selectedClient=_useState66[0],setSelectedClient=_useState66[1];var _useState67=useState(),_useState68=_slicedToArray(_useState67,2),selectedAppointment=_useState68[0],setSelectedAppointment=_useState68[1];var _useState69=useState(\"\"),_useState70=_slicedToArray(_useState69,2),appointment_status=_useState70[0],setAppointment_status=_useState70[1];var _useState71=useState(\"\"),_useState72=_slicedToArray(_useState71,2),appointment_type=_useState72[0],setAppointment_type=_useState72[1];var appClass=[\"On-site\",\"Teleconsultation\"];var _useState73=useState(),_useState74=_slicedToArray(_useState73,2),locationId=_useState74[0],setLocationId=_useState74[1];var _useState75=useState(),_useState76=_slicedToArray(_useState75,2),practionerId=_useState76[0],setPractionerId=_useState76[1];var _useState77=useState(false),_useState78=_slicedToArray(_useState77,2),success1=_useState78[0],setSuccess1=_useState78[1];var _useState79=useState(false),_useState80=_slicedToArray(_useState79,2),success2=_useState80[0],setSuccess2=_useState80[1];var _useState81=useState(),_useState82=_slicedToArray(_useState81,2),chosen1=_useState82[0],setChosen1=_useState82[1];var _useState83=useState(),_useState84=_slicedToArray(_useState83,2),chosen2=_useState84[0],setChosen2=_useState84[1];var Client=state.AppointmentModule.selectedAppointment;//console.log(Client)\nvar getSearchfacility1=function getSearchfacility1(obj){setLocationId(obj._id);setChosen1(obj);if(!obj){//\"clear stuff\"\nsetLocationId();setChosen1();}};var getSearchfacility2=function getSearchfacility2(obj){setPractionerId(obj._id);setChosen2(obj);if(!obj){//\"clear stuff\"\nsetPractionerId();setChosen2();}};useEffect(function(){setValue(\"firstname\",Client.firstname,{shouldValidate:true,shouldDirty:true});setValue(\"middlename\",Client.middlename,{shouldValidate:true,shouldDirty:true});setValue(\"lastname\",Client.lastname,{shouldValidate:true,shouldDirty:true});setValue(\"phone\",Client.phone,{shouldValidate:true,shouldDirty:true});setValue(\"email\",Client.email,{shouldValidate:true,shouldDirty:true});setValue(\"dob\",Client.dob,{shouldValidate:true,shouldDirty:true});setValue(\"gender\",Client.gender,{shouldValidate:true,shouldDirty:true});setValue(\"ClientId\",Client.clientId,{shouldValidate:true,shouldDirty:true});setValue(\"appointment_reason\",Client.appointment_reason,{shouldValidate:true,shouldDirty:true});setValue(\"appointment_status\",Client.appointment_status,{shouldValidate:true,shouldDirty:true});setValue(\"appointment_type\",Client.appointment_type,{shouldValidate:true,shouldDirty:true});setValue(\"start_time\",format(new Date(Client.start_time),\"yyyy-MM-dd'T'HH:mm:ss\"),{shouldValidate:true,shouldDirty:true});setValue(\"appointmentClass\",Client.appointmentClass,{shouldValidate:true,shouldDirty:true});return function(){};});var handleChangeType=/*#__PURE__*/function(){var _ref19=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee18(e){return _regeneratorRuntime.wrap(function _callee18$(_context18){while(1){switch(_context18.prev=_context18.next){case 0:// await setAppointment_type(e.target.value)\nsetValue(\"appointment_type\",e.target.value,{shouldValidate:true,shouldDirty:true});case 1:case\"end\":return _context18.stop();}}},_callee18);}));return function handleChangeType(_x7){return _ref19.apply(this,arguments);};}();var handleChangeStatus=/*#__PURE__*/function(){var _ref20=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee19(e){return _regeneratorRuntime.wrap(function _callee19$(_context19){while(1){switch(_context19.prev=_context19.next){case 0:// await setAppointment_status(e.target.value)\nsetValue(\"appointment_status\",e.target.value,{shouldValidate:true,shouldDirty:true});case 1:case\"end\":return _context19.stop();}}},_callee19);}));return function handleChangeStatus(_x8){return _ref20.apply(this,arguments);};}();var handleCancel=/*#__PURE__*/function(){var _ref21=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee20(){var newClientModule;return _regeneratorRuntime.wrap(function _callee20$(_context20){while(1){switch(_context20.prev=_context20.next){case 0:newClientModule={selectedAppointment:{},show:'create'};_context20.next=3;return setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{AppointmentModule:newClientModule});});case 3:case\"end\":return _context20.stop();}}},_callee20);}));return function handleCancel(){return _ref21.apply(this,arguments);};}();var changeState=function changeState(){var newClientModule={selectedAppointment:{},show:'create'};setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{AppointmentModule:newClientModule});});handlecloseModal();};var handleDelete=/*#__PURE__*/function(){var _ref22=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee21(){var conf,dleteId;return _regeneratorRuntime.wrap(function _callee21$(_context21){while(1){switch(_context21.prev=_context21.next){case 0:conf=window.confirm(\"Are you sure you want to delete this data?\");dleteId=Client._id;if(conf){ClientServ.remove(dleteId).then(function(res){//console.log(JSON.stringify(res))\nreset();/*  setMessage(\"Deleted Client successfully\")\n                    setSuccess(true)\n                    changeState()\n                   setTimeout(() => {\n                    setSuccess(false)\n                    }, 200); */toast({message:'Client deleted succesfully',type:'is-success',dismissible:true,pauseOnHover:true});changeState();}).catch(function(err){// setMessage(\"Error deleting Client, probable network issues \"+ err )\n// setError(true)\ntoast({message:\"Error deleting Client, probable network issues or \"+err,type:'is-danger',dismissible:true,pauseOnHover:true});});}case 3:case\"end\":return _context21.stop();}}},_callee21);}));return function handleDelete(){return _ref22.apply(this,arguments);};}();var onSubmit=function onSubmit(data,e){e.preventDefault();setSuccess(false);// console.log(data)\n//  data.facility=Client.facility\n//console.log(data);\ndata.practitioner_name=chosen2.firstname+\" \"+chosen2.lastname;data.practitioner_profession=chosen2.profession;data.practitioner_department=chosen2.department;data.practitionerId=chosen2._id;data.locationId=chosen1._id;data.location_name=chosen1.name;data.location_type=chosen1.locationType;//data.actions\nif(Client.appointment_status!==data.appointment_status){Client.actions.push({status:data.appointment_status,actor:user.currentEmployee._id});}data.actions=Client.actions;ClientServ.patch(Client._id,data).then(function(res){//console.log(JSON.stringify(res))\n// e.target.reset();\n// setMessage(\"updated Client successfully\")\ntoast({message:'Client updated succesfully',type:'is-success',dismissible:true,pauseOnHover:true});changeState();}).catch(function(err){//setMessage(\"Error creating Client, probable network issues \"+ err )\n// setError(true)\ntoast({message:\"Error updating Client, probable network issues or \"+err,type:'is-danger',dismissible:true,pauseOnHover:true});});};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"card \",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsx(\"p\",{className:\"card-header-title\",children:\"Client Details-Modify\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-content vscrollable remPad1\",children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"label\",{className:\"label is-size-7\",children:[\" \",Client.firstname,\" \",Client.lastname]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsx(\"div\",{className:\"field-body\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field is-expanded\"/* style={ !user.stacker?{display:\"none\"}:{}} */,children:[/*#__PURE__*/_jsx(LocationSearch,{id:Client.locationId,getSearchfacility:getSearchfacility1,clear:success1}),/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left \",style:{display:\"none\"},children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\"/* ref={register ({ required: true }) } */ /* add array no */,value:locationId,name:\"locationId\",type:\"text\",onChange:function onChange(e){return setLocationId(e.target.value);},placeholder:\"Product Id\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas  fa-map-marker-alt\"})})]})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsx(\"div\",{className:\"field-body\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field is-expanded\"/* style={ !user.stacker?{display:\"none\"}:{}} */,children:[/*#__PURE__*/_jsx(EmployeeSearch,{id:Client.practitionerId,getSearchfacility:getSearchfacility2,clear:success2}),/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left \",style:{display:\"none\"},children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\"/* ref={register ({ required: true }) } */ /* add array no */,value:practionerId,name:\"practionerId\",type:\"text\",onChange:function onChange(e){return setPractionerId(e.target.value);},placeholder:\"Product Id\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas  fa-map-marker-alt\"})})]})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsx(\"div\",{className:\"field ml-3 \",children:appClass.map(function(c,i){return/*#__PURE__*/_jsxs(\"label\",{className:\" is-small\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",value:c,name:\"appointmentClass\",ref:register}),c+\" \"]},c);})})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsx(\"input\",{name:\"start_time\",ref:register({required:true}),type:\"datetime-local\",defaultValue:format(new Date(Client.start_time),\"yyyy-MM-dd'T'HH:mm:ss\")})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsx(\"div\",{className:\"control\",children:/*#__PURE__*/_jsx(\"div\",{className:\"select is-small\",children:/*#__PURE__*/_jsxs(\"select\",(_jsxs2={name:\"type\"/* value={appointment_type} */},_defineProperty(_jsxs2,\"name\",\"appointment_type\"),_defineProperty(_jsxs2,\"ref\",register({required:true})),_defineProperty(_jsxs2,\"onChange\",handleChangeType),_defineProperty(_jsxs2,\"children\",[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Choose Appointment Type  \"}),/*#__PURE__*/_jsx(\"option\",{value:\"New\",children:\"New Procedure\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Repeat\",children:\"Repeat Procedure\"})]),_jsxs2))})})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsx(\"div\",{className:\"control\",children:/*#__PURE__*/_jsx(\"div\",{className:\"select is-small\",children:/*#__PURE__*/_jsxs(\"select\",{name:\"appointment_status\",ref:register({required:true})/* value={appointment_status} */,onChange:handleChangeStatus,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Appointment Status  \"}),/*#__PURE__*/_jsx(\"option\",{value:\"Scheduled\",children:\"Scheduled\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Confirmed\",children:\"Confirmed\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Billed\",children:\"Billed\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Paid\",children:\"Paid\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Checked In\",children:\"Checked In\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Procedure in Progress\",children:\"Procedure in Progress\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Completed Procedure\",children:\"Completed Procedure\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Checked Out\",children:\"Checked Out\"}),/*#__PURE__*/_jsx(\"option\",{value:\"No Show\",children:\"No Show\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Cancelled\",children:\"Cancelled\"})]})})})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left has-icons-right\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register(),name:\"appointment_reason\",type:\"text\",placeholder:\"Reason For Appointment\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-hospital\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field \",style:{display:\"none\"},children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left has-icons-right\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register(),name:\"billingservice\",type:\"text\",placeholder:\"Billing service\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-hospital\"})})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field  is-grouped mt-2\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"control\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"button is-success is-small\",onClick:handleSubmit(onSubmit),children:\"Save\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"control\",children:/*#__PURE__*/_jsx(\"button\",{className:\"button is-warning is-small\",onClick:handleCancel,children:\"Cancel\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"control\",children:/*#__PURE__*/_jsx(\"button\",{className:\"button is-danger is-small\",onClick:function onClick(){return handleDelete();},type:\"delete\",children:\"Delete\"})})]})]})]})});}export function ClientSearch(_ref23){var getSearchfacility=_ref23.getSearchfacility,clear=_ref23.clear;var ClientServ=client.service('client');var _useState85=useState([]),_useState86=_slicedToArray(_useState85,2),facilities=_useState86[0],setFacilities=_useState86[1];// eslint-disable-next-line\nvar _useState87=useState(false),_useState88=_slicedToArray(_useState87,2),searchError=_useState88[0],setSearchError=_useState88[1];// eslint-disable-next-line\nvar _useState89=useState(false),_useState90=_slicedToArray(_useState89,2),showPanel=_useState90[0],setShowPanel=_useState90[1];// eslint-disable-next-line\nvar _useState91=useState(\"\"),_useState92=_slicedToArray(_useState91,2),searchMessage=_useState92[0],setSearchMessage=_useState92[1];// eslint-disable-next-line \nvar _useState93=useState(\"\"),_useState94=_slicedToArray(_useState93,2),simpa=_useState94[0],setSimpa=_useState94[1];// eslint-disable-next-line \nvar _useState95=useState(false),_useState96=_slicedToArray(_useState95,2),chosen=_useState96[0],setChosen=_useState96[1];// eslint-disable-next-line \nvar _useState97=useState(0),_useState98=_slicedToArray(_useState97,2),count=_useState98[0],setCount=_useState98[1];var inputEl=useRef(null);var _useState99=useState(\"\"),_useState100=_slicedToArray(_useState99,2),val=_useState100[0],setVal=_useState100[1];var _useContext11=useContext(UserContext),user=_useContext11.user;var _useContext12=useContext(ObjectContext),state=_useContext12.state;var _useState101=useState(false),_useState102=_slicedToArray(_useState101,2),productModal=_useState102[0],setProductModal=_useState102[1];var handleRow=/*#__PURE__*/function(){var _ref24=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee22(obj){return _regeneratorRuntime.wrap(function _callee22$(_context22){while(1){switch(_context22.prev=_context22.next){case 0:_context22.next=2;return setChosen(true);case 2://alert(\"something is chaning\")\ngetSearchfacility(obj);_context22.next=5;return setSimpa(obj.firstname+\" \"+obj.middlename+\" \"+obj.lastname+\" \"+obj.gender+\" \"+obj.phone);case 5:// setSelectedFacility(obj)\nsetShowPanel(false);_context22.next=8;return setCount(2);case 8:case\"end\":return _context22.stop();}}},_callee22);}));return function handleRow(_x9){return _ref24.apply(this,arguments);};}();var handleBlur=/*#__PURE__*/function(){var _ref25=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee23(e){return _regeneratorRuntime.wrap(function _callee23$(_context23){while(1){switch(_context23.prev=_context23.next){case 0:if(count===2){console.log(\"stuff was chosen\");}/*  console.log(\"blur\")\n         setShowPanel(false)\n        console.log(JSON.stringify(simpa))\n        if (simpa===\"\"){\n            console.log(facilities.length)\n            setSimpa(\"abc\")\n            setSimpa(\"\")\n            setFacilities([])\n            inputEl.current.setValue=\"\"\n        }\n        console.log(facilities.length)\n        console.log(inputEl.current) */case 1:case\"end\":return _context23.stop();}}},_callee23);}));return function handleBlur(_x10){return _ref25.apply(this,arguments);};}();var handleSearch=/*#__PURE__*/function(){var _ref26=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee24(val){var field;return _regeneratorRuntime.wrap(function _callee24$(_context24){while(1){switch(_context24.prev=_context24.next){case 0:setVal(val);if(!(val===\"\")){_context24.next=5;break;}setShowPanel(false);getSearchfacility(false);return _context24.abrupt(\"return\");case 5:field='name';//field variable\nif(!(val.length>=3)){_context24.next=10;break;}ClientServ.find({query:{$or:[{firstname:{$regex:val,$options:'i'}},{lastname:{$regex:val,$options:'i'}},{middlename:{$regex:val,$options:'i'}},{phone:{$regex:val,$options:'i'}},{clientTags:{$regex:val,$options:'i'}},{mrn:{$regex:val,$options:'i'}},{specificDetails:{$regex:val,$options:'i'}}],facility:user.currentEmployee.facilityDetail._id,//storeId: state.StoreModule.selectedStore._id,\n$limit:10,$sort:{createdAt:-1}}}).then(function(res){console.log(\"product  fetched successfully\");console.log(res.data);setFacilities(res.data);setSearchMessage(\" product  fetched successfully\");setShowPanel(true);}).catch(function(err){toast({message:'Error creating ProductEntry '+err,type:'is-danger',dismissible:true,pauseOnHover:true});});_context24.next=16;break;case 10:console.log(\"less than 3 \");console.log(val);setShowPanel(false);_context24.next=15;return setFacilities([]);case 15:console.log(facilities);case 16:case\"end\":return _context24.stop();}}},_callee24);}));return function handleSearch(_x11){return _ref26.apply(this,arguments);};}();var handleAddproduct=function handleAddproduct(){setProductModal(true);};var handlecloseModal=function handlecloseModal(){setProductModal(false);handleSearch(val);};useEffect(function(){if(clear){console.log(\"success has changed\",clear);setSimpa(\"\");}return function(){};},[clear]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsx(\"div\",{className:\"control has-icons-left  \",children:/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown \".concat(showPanel?\"is-active\":\"\"),style:{width:\"100%\"},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown-trigger\",style:{width:\"100%\"},children:[/*#__PURE__*/_jsx(DebounceInput,{className:\"input is-small  is-expanded mb-0\",type:\"text\",placeholder:\"Search for Client\",value:simpa,minLength:3,debounceTimeout:400,onBlur:function onBlur(e){return handleBlur(e);},onChange:function onChange(e){return handleSearch(e.target.value);},inputRef:inputEl}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-search\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"dropdown-menu expanded\",style:{width:\"100%\"},children:/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown-content\",children:[facilities.length>0?\"\":/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown-item\"/* onClick={handleAddproduct} */,children:[\" \",/*#__PURE__*/_jsxs(\"span\",{children:[\" \",val,\" is not yet your client\"]}),\" \"]}),facilities.map(function(facility,i){return/*#__PURE__*/_jsx(\"div\",{className:\"dropdown-item\",onClick:function onClick(){return handleRow(facility);},children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{children:facility.firstname}),/*#__PURE__*/_jsx(\"span\",{className:\"padleft\",children:facility.middlename}),/*#__PURE__*/_jsx(\"span\",{className:\"padleft\",children:facility.lastname}),/*#__PURE__*/_jsxs(\"span\",{className:\"padleft\",children:[\" \",formatDistanceToNowStrict(new Date(facility.dob))]}),/*#__PURE__*/_jsx(\"span\",{className:\"padleft\",children:facility.gender}),/*#__PURE__*/_jsx(\"span\",{className:\"padleft\",children:facility.profession}),/*#__PURE__*/_jsx(\"span\",{className:\"padleft\",children:facility.phone}),/*#__PURE__*/_jsx(\"span\",{className:\"padleft\",children:facility.email})]})},facility._id);})]})})]})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal \".concat(productModal?\"is-active\":\"\"),children:[/*#__PURE__*/_jsx(\"div\",{className:\"modal-background\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-card\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"modal-card-head\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"modal-card-title\",children:\"Choose Store\"}),/*#__PURE__*/_jsx(\"button\",{className:\"delete\",\"aria-label\":\"close\",onClick:handlecloseModal})]}),/*#__PURE__*/_jsx(\"section\",{className:\"modal-card-body\"})]})]})]});}","map":{"version":3,"sources":["/home/mfybaby/Documents/HealthStack2/HS-frontend/src/components/Theatre/TheatreCheckedin.js"],"names":["React","useState","useContext","useEffect","useRef","Route","Switch","useRouteMatch","Link","NavLink","useHistory","client","DebounceInput","useForm","UserContext","ObjectContext","toast","Encounter","formatDistanceToNowStrict","format","subDays","addDays","DatePicker","LocationSearch","EmployeeSearch","BillServiceCreate","searchfacility","TheatreCheckedin","state","selectedClient","setSelectedClient","selectedAppointment","setSelectedAppointment","TheatreStatusList","error","setError","success","setSuccess","message","setMessage","ClientServ","service","facilities","setFacilities","setState","user","setUser","Date","startDate","setStartDate","editModal","setEditModal","handleCreateNew","newClientModule","show","prevstate","AppointmentModule","newClient","ClientModule","handleRow","Client","showEdit","handleSearch","val","field","query","$or","firstname","$regex","$options","lastname","middlename","phone","appointment_type","appointment_status","appointment_reason","location_type","location_name","practitioner_department","practitioner_profession","practitioner_name","facility","currentEmployee","facilityDetail","_id","$limit","$in","$sort","createdAt","employeeLocation","locationType","locationId","find","then","res","console","log","data","catch","err","getFacilities","stuff","findClient","stacker","handleCalendarClose","on","obj","currDate","start_time","$gt","$lt","handleDate","date","handlecloseModal1","e","target","value","map","i","information","TheatreCheckedOutList2","TheatreCheckedOutList","currDate2","TheatreAppointmentDetail","history","path","url","handleEdit","handleAttend","get","clientId","patient","push","dob","toLocaleDateString","gender","maritalstatus","mrn","religion","profession","email","address","city","lga","country","bloodgroup","genotype","disabilities","allergies","comorbidities","clientTags","specificDetails","nok_name","nok_phoneno","nok_email","nok_relationship","TheatreAppointmentModify","handlecloseModal","register","handleSubmit","setValue","reset","errors","setAppointment_status","setAppointment_type","appClass","setLocationId","practionerId","setPractionerId","success1","setSuccess1","success2","setSuccess2","chosen1","setChosen1","chosen2","setChosen2","getSearchfacility1","getSearchfacility2","shouldValidate","shouldDirty","appointmentClass","handleChangeType","handleChangeStatus","handleCancel","changeState","handleDelete","conf","window","confirm","dleteId","remove","type","dismissible","pauseOnHover","onSubmit","preventDefault","department","practitionerId","name","actions","status","actor","patch","display","c","required","ClientSearch","getSearchfacility","clear","searchError","setSearchError","showPanel","setShowPanel","searchMessage","setSearchMessage","simpa","setSimpa","chosen","setChosen","count","setCount","inputEl","setVal","productModal","setProductModal","handleBlur","length","handleAddproduct","width"],"mappings":"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","sourcesContent":["/* eslint-disable */\nimport React, {useState,useContext, useEffect,useRef} from 'react'\nimport {Route, Switch,  useRouteMatch, Link, NavLink, useHistory} from 'react-router-dom'\nimport client from '../../feathers'\nimport {DebounceInput} from 'react-debounce-input';\nimport { useForm } from \"react-hook-form\";\n//import {useHistory} from 'react-router-dom'\nimport {UserContext,ObjectContext} from '../../context'\nimport {toast} from 'bulma-toast'\nimport Encounter from '../EncounterMgt/Encounter'\nimport { formatDistanceToNowStrict, format, subDays,addDays } from 'date-fns'\nimport DatePicker from \"react-datepicker\";\nimport LocationSearch from \"../helpers/LocationSearch\"\nimport EmployeeSearch from \"../helpers/EmployeeSearch\"\nimport BillServiceCreate from '../Finance/BillServiceCreate'\n/* import {TheatreAppointmentDetail, TheatreAppointmentModify} from './TheatreAppointments' */\nimport \"react-datepicker/dist/react-datepicker.css\";\n// eslint-disable-next-line\nconst searchfacility={};\n\n\nexport default function TheatreCheckedin() {\n    const {state}=useContext(ObjectContext) //,setState\n    // eslint-disable-next-line\n    const [selectedClient,setSelectedClient]=useState()\n    const [selectedAppointment,setSelectedAppointment]=useState()\n    //const [showState,setShowState]=useState() //create|modify|detail\n    \n    return(\n        <section className= \"section remPadTop\">\n            <div className=\"columns \">\n           \n            <div className=\"column is-6 \">\n                <TheatreStatusList />\n                </div>\n            <div className=\"column is-6 \">\n            <TheatreCheckedOutList />\n               {/*  {(state.AppointmentModule.show ==='create')&&<TheatreAppointmentCreate />}\n                {(state.AppointmentModule.show ==='detail')&&<TheatreAppointmentDetail  />}\n                {(state.AppointmentModule.show ==='modify')&&<TheatreAppointmentModify Client={selectedClient} />} */}\n               \n            </div>\n\n            </div>                            \n            </section>\n       \n    )\n    \n}\n\nexport function TheatreStatusList(){\n   // const { register, handleSubmit, watch, errors } = useForm();\n    // eslint-disable-next-line\n    const [error, setError] =useState(false)\n     // eslint-disable-next-line\n    const [success, setSuccess] =useState(false)\n     // eslint-disable-next-line\n   const [message, setMessage] = useState(\"\") \n    const ClientServ=client.service('appointments')\n    //const history = useHistory()\n   // const {user,setUser} = useContext(UserContext)\n    const [facilities,setFacilities]=useState([])\n     // eslint-disable-next-line\n   const [selectedClient, setSelectedClient]=useState() //\n    // eslint-disable-next-line\n    const {state,setState}=useContext(ObjectContext)\n    // eslint-disable-next-line\n    const {user,setUser}=useContext(UserContext)\n    const [startDate, setStartDate] = useState(new Date())\n    const [selectedAppointment,setSelectedAppointment]=useState()\n    const [editModal, setEditModal] =useState(false)\n  /*   const [currDate, setCurrDate] = useState() */\n\n\n\n    const handleCreateNew = async()=>{\n        const newClientModule={\n            selectedAppointment:{},\n            show :'create'\n            }\n        await setState((prevstate)=>({...prevstate, AppointmentModule:newClientModule}))\n       //console.log(state)\n       const newClient={\n        selectedClient:{},\n        show :'create'\n        }\n        await setState((prevstate)=>({...prevstate, ClientModule:newClient}))\n        } \n\n    \n    const handleRow= async(Client)=>{\n        await setSelectedAppointment(Client)\n        const    newClientModule={\n            selectedAppointment:Client,\n            show :'detail'\n        }\n       await setState((prevstate)=>({...prevstate, AppointmentModule:newClientModule}))\n       showEdit()\n    }\n    //console.log(state.employeeLocation)\n\n   const handleSearch=(val)=>{\n       const field='firstname'\n     //  console.log(val)\n\n     let query={\n        $or:[\n            { firstname: {\n                $regex:val,\n                $options:'i' \n            }},\n            { lastname: {\n                $regex:val,\n                $options:'i' \n            }},\n            { middlename: {\n                $regex:val,\n                $options:'i' \n            }}, \n            { phone: {\n                $regex:val,\n                $options:'i' \n            }},\n            { appointment_type: {\n                $regex:val,\n                $options:'i' \n            }},\n            { appointment_status: {\n                $regex:val,\n                $options:'i' \n            }},\n            {appointment_reason: {\n                $regex:val,\n                $options:'i' \n            }},\n            {location_type: {\n                $regex:val,\n                $options:'i' \n            }},\n            {location_name: {\n                $regex:val,\n                $options:'i' \n            }},\n            {practitioner_department: {\n                $regex:val,\n                $options:'i' \n            }},\n            {practitioner_profession: {\n                $regex:val,\n                $options:'i' \n            }},\n            {practitioner_name: {\n                $regex:val,\n                $options:'i' \n            }},\n          \n        ],\n      facility:user.currentEmployee.facilityDetail._id, // || \"\",\n        $limit:20,\n        appointment_status:{\n            $in:[\"Checked in\", \"Procedure\", \"Completed\"]\n        },\n\n        $sort: {\n            createdAt: -1\n          }\n            }\n          if (state.employeeLocation.locationType!==\"Front Desk\"){\n              query.locationId=state.employeeLocation.locationId}  \n     \n       ClientServ.find({query: query\n          }).then((res)=>{\n                  console.log(res)\n               setFacilities(res.data)\n                setMessage(\" Client  fetched successfully\")\n                setSuccess(true) \n            })\n            .catch((err)=>{\n                console.log(err)\n                setMessage(\"Error fetching Client, probable network issues \"+ err )\n                setError(true)\n            })\n        }\n   \n    const getFacilities= async()=>{\n            if (user.currentEmployee){   \n                let stuff={\n                    facility:user.currentEmployee.facilityDetail._id,\n                    appointment_status:{\n                        $in:[\"Checked In\", \"Procedure in Progress\", \"Completed Procedure\"]\n                    },\n                   // locationId:state.employeeLocation.locationId,\n                    $limit:100,\n                    $sort: {\n                        createdAt: -1\n                    }\n                }\n                if (state.employeeLocation.locationType!==\"Front Desk\"){\n                    stuff.locationId=state.employeeLocation.locationId}  \n\n            const findClient= await ClientServ.find(\n                {query: stuff})\n\n         await setFacilities(findClient.data)\n                }\n                else {\n                    if (user.stacker){\n                        const findClient= await ClientServ.find(\n                            {query: {\n                                $limit:100,\n                                $sort: {\n                                    createdAt: -1\n                                }\n                                }})\n            \n                    await setFacilities(findClient.data)\n\n                    }\n                }\n            }\n            \n\n    useEffect(() => {\n               \n                if (user){\n                    handleCalendarClose()\n                }else{\n                    /* const localUser= localStorage.getItem(\"user\")\n                    const user1=JSON.parse(localUser)\n                    console.log(localUser)\n                    console.log(user1)\n                    fetchUser(user1)\n                    console.log(user)\n                    getFacilities(user) */\n                }\n                ClientServ.on('created', (obj)=>handleCalendarClose())\n                ClientServ.on('updated', (obj)=>handleCalendarClose())\n                ClientServ.on('patched', (obj)=>handleCalendarClose())\n                ClientServ.on('removed', (obj)=>handleCalendarClose())\n                const newClient={\n                    selectedClient:{},\n                    show :'create'\n                    }\n                 setState((prevstate)=>({...prevstate, ClientModule:newClient}))\n                return () => {\n                \n                }\n            },[])\n\nconst handleCalendarClose = async ()=>{\n   // alert(\"i am bing called \" + startDate)\n   \n    if (!!state.currDate){\n        console.log(state.currDate)\n        setStartDate(state.currDate)\n      \n    }\n    let query= {\n        start_time:{\n            $gt:subDays(startDate,1),\n            $lt:addDays(startDate,1)\n        },\n        facility:user.currentEmployee.facilityDetail._id,\n        appointment_status:{\n            $in:[\"Checked In\", \"Procedure in Progress\", \"Completed Procedure\"]\n        }, \n       \n        $limit:100,\n        $sort: {\n            createdAt: -1\n        }\n        }\n        if (state.employeeLocation.locationType!==\"Front Desk\"){\n            query.locationId=state.employeeLocation.locationId}  \n            /* const findClient= */\n    await ClientServ.find(\n        {query:query})\n        .then((findClient)=>{\n       //  console.log(findClient.data)\n        // console.log(\"xed\",startDate)\n        /* await */ \n        setFacilities(findClient.data)})\n        .catch((err)=>{\n             console.log(err)\n           \n         })\n      \n        }\n\nconst handleDate=async (date)=>{ //change date \n\n    setStartDate(date)\n   \n    await setState((prevstate)=>({...prevstate, currDate:date}))\n    \n}\n\n    useEffect(() => {\n        if (!!startDate){\n        \n            handleCalendarClose()\n          \n        }else{\n            getFacilities()\n        }\n        \n        return () => {\n            \n        }\n    }, [startDate])\n    //todo: pagination and vertical scroll bar\n    const  handlecloseModal1 = () =>{\n        setEditModal(false)\n        }\n  const showEdit = () =>{\n        setEditModal(true)\n       //history.push('/app/finance/billservice')\n        }\n    return(\n        <>\n           {user?( <>  \n                <div className=\"level\">\n                    <div className=\"level-left\">\n                        <div className=\"level-item\">\n                            <div className=\"field\">\n                                <p className=\"control has-icons-left  \">\n                                    <DebounceInput className=\"input is-small \" \n                                        type=\"text\" placeholder=\"Search Appointments\"\n                                        minLength={3}\n                                        debounceTimeout={400}\n                                        onChange={(e)=>handleSearch(e.target.value)} />\n                                    <span className=\"icon is-small is-left\">\n                                        <i className=\"fas fa-search\"></i>\n                                    </span>\n                                </p>\n                            </div>\n                        </div>\n                   \n                    <div className=\"level-item\">\n                        <DatePicker \n                            selected={startDate} \n                            onChange={date => handleDate(date)} \n                            dateFormat=\"dd/MM/yyyy\"\n                            placeholderText=\"Filter By Date\"\n                            /* isClearable */\n                            />\n                        {/* <input name=\"filter_time\"  ref={register ({ required: true })}  type=\"datetime-local\" /> */}\n                    </div>\n                    </div>\n                    <div className=\"level-item\"> <span className=\"is-size-6 has-text-weight-medium\">Checked-In Clients </span></div>\n                    {/* <div className=\"level-right\">\n                        <div className=\"level-item\"> \n                            <div className=\"level-item\"><div className=\"button is-success is-small\" onClick={handleCreateNew}>New</div></div>\n                        </div>\n                    </div> */}\n\n                </div>\n                <div className=\"table-container pullup \">\n                                <table className=\"table is-striped is-narrow is-hoverable is-fullwidth is-scrollable \">\n                                    <thead>\n                                        <tr>\n                                        <th><abbr title=\"Serial No\">S/No</abbr></th>\n                                        <th><abbr title=\"Time\">Date/Time</abbr></th>\n                                        <th>First Name</th>\n                                       <th><abbr title=\"Last Name\">Last Name</abbr></th>\n                                      {/*  <th><abbr title=\"Class\">Classification</abbr></th> */}\n                                        <th><abbr title=\"Location\">Location</abbr></th> \n                                        {/* <th><abbr title=\"Phone\">Phone</abbr></th>\n                                         */}\n                                        <th><abbr title=\"Type\">Type</abbr></th>\n                                        <th><abbr title=\"Status\">Status</abbr></th>\n                                        <th><abbr title=\"Reason\">Procedure</abbr></th>\n                                        <th><abbr title=\"Information\">Information</abbr></th>\n                                        <th><abbr title=\"Practitioner\">Practitioner</abbr></th>\n                                        {/* <th><abbr title=\"Actions\">Actions</abbr></th> */}\n                                        </tr>\n                                    </thead>\n                                    <tfoot>                                      \n                                    </tfoot>\n                                    <tbody>\n                                        {facilities.map((Client, i)=>(\n\n                                            <tr key={Client._id} onClick={()=>handleRow(Client)}  className={Client._id===(selectedAppointment?._id||null)?\"is-selected\":\"\"}>\n                                            <th>{i+1}</th>\n                                            <td><strong>{format(new Date(Client.start_time),\"dd-MM-yy HH:mm:ss\")}</strong></td>\n                                            <th>{Client.firstname}</th>\n                                            {/* <td>{Client.middlename}</td> */}\n                                           < td>{Client.lastname}</td>\n                                          {/*  < td>{formatDistanceToNowStrict(new Date(Client.dob))}</td> */}\n                                           {/*  <td>{Client.gender}</td> */}\n                                            {/*  <td>{Client.phone}</td> */}\n                                          {/*   <td>{Client.appointmentClass}</td> */}\n                                            <td>{Client.location_name} {Client.location_type}</td> \n                                            <td>{Client.appointment_type}</td>\n                                            <td>{Client.appointment_status}</td>\n                                            <td>{Client.appointment_reason}</td>\n                                            <td>{Client.information}</td>\n                                            <td>{Client.practitioner_name}</td>\n                                            {/* <td><span   className=\"showAction\"  >...</span></td> */}\n                                           \n                                            </tr>\n\n                                        ))}\n                                    </tbody>\n                                    </table>\n                                    \n                </div>\n                  <div className={`modal ${editModal?\"is-active\":\"\"}` }>\n                <div className=\"modal-background\"></div>\n                <div className=\"modal-card\">\n                    <header className=\"modal-card-head\">\n                    <p className=\"modal-card-title\">Edit Appointment</p>\n                    <button className=\"delete\" aria-label=\"close\"  onClick={handlecloseModal1}></button>\n                    </header>\n                    <section className=\"modal-card-body\">\n                   \n                    {(state.AppointmentModule.show ==='detail')&&<TheatreAppointmentDetail  />}\n                    {(state.AppointmentModule.show ==='modify')&&<TheatreAppointmentModify  handlecloseModal={handlecloseModal1} />}      \n                    </section>\n                    \n                </div>\n            </div>                     \n            </>):<div>loading</div>}\n        </>\n              \n    )\n    }\n\nexport function TheatreCheckedOutList2(){\n        // const { register, handleSubmit, watch, errors } = useForm();\n         // eslint-disable-next-line\n         const [error, setError] =useState(false)\n          // eslint-disable-next-line\n         const [success, setSuccess] =useState(false)\n          // eslint-disable-next-line\n        const [message, setMessage] = useState(\"\") \n         const ClientServ=client.service('appointments')\n         //const history = useHistory()\n        // const {user,setUser} = useContext(UserContext)\n         const [facilities,setFacilities]=useState([])\n          // eslint-disable-next-line\n        const [selectedClient, setSelectedClient]=useState() //\n         // eslint-disable-next-line\n         const {state,setState}=useContext(ObjectContext)\n         // eslint-disable-next-line\n         const {user,setUser}=useContext(UserContext)\n         const [startDate, setStartDate] = useState(new Date())\n         const [selectedAppointment,setSelectedAppointment]=useState()\n     \n         const handleCreateNew = async()=>{\n             const newClientModule={\n                 selectedAppointment:{},\n                 show :'create'\n                 }\n             await setState((prevstate)=>({...prevstate, AppointmentModule:newClientModule}))\n            //console.log(state)\n            const newClient={\n             selectedClient:{},\n             show :'create'\n             }\n             await setState((prevstate)=>({...prevstate, ClientModule:newClient}))\n             } \n     \n         \n         const handleRow= async(Client)=>{\n             await setSelectedAppointment(Client)\n             const    newClientModule={\n                 selectedAppointment:Client,\n                 show :'detail'\n             }\n            await setState((prevstate)=>({...prevstate, AppointmentModule:newClientModule}))\n         }\n         //console.log(state.employeeLocation)\n     \n        const handleSearch=(val)=>{\n            const field='firstname'\n          //  console.log(val)\n     \n          let query={\n             $or:[\n                 { firstname: {\n                     $regex:val,\n                     $options:'i' \n                 }},\n                 { lastname: {\n                     $regex:val,\n                     $options:'i' \n                 }},\n                 { middlename: {\n                     $regex:val,\n                     $options:'i' \n                 }}, \n                 { phone: {\n                     $regex:val,\n                     $options:'i' \n                 }},\n                 { appointment_type: {\n                     $regex:val,\n                     $options:'i' \n                 }},\n                 { appointment_status: {\n                     $regex:val,\n                     $options:'i' \n                 }},\n                 {appointment_reason: {\n                     $regex:val,\n                     $options:'i' \n                 }},\n                 {location_type: {\n                     $regex:val,\n                     $options:'i' \n                 }},\n                 {location_name: {\n                     $regex:val,\n                     $options:'i' \n                 }},\n                 {practitioner_department: {\n                     $regex:val,\n                     $options:'i' \n                 }},\n                 {practitioner_profession: {\n                     $regex:val,\n                     $options:'i' \n                 }},\n                 {practitioner_name: {\n                     $regex:val,\n                     $options:'i' \n                 }},\n               \n             ],\n           facility:user.currentEmployee.facilityDetail._id, // || \"\",\n             $limit:20,\n             appointment_status:\"Checked Out\",\n             \n             $sort: {\n                 createdAt: -1\n               }\n                 }\n               if (state.employeeLocation.locationType!==\"Front Desk\"){\n                   query.locationId=state.employeeLocation.locationId}  \n          \n            ClientServ.find({query: query\n               }).then((res)=>{\n                       console.log(res)\n                    setFacilities(res.data)\n                     setMessage(\" Client  fetched successfully\")\n                     setSuccess(true) \n                 })\n                 .catch((err)=>{\n                     console.log(err)\n                     setMessage(\"Error fetching Client, probable network issues \"+ err )\n                     setError(true)\n                 })\n             }\n        \n         const getFacilities= async()=>{\n                 if (user.currentEmployee){   \n                     let stuff={\n                         facility:user.currentEmployee.facilityDetail._id,\n                         appointment_status:'Checked Out',\n                        // locationId:state.employeeLocation.locationId,\n                         $limit:1000,\n                         $sort: {\n                             createdAt: -1\n                         }\n                     }\n                     if (state.employeeLocation.locationType!==\"Front Desk\"){\n                         stuff.locationId=state.employeeLocation.locationId}  \n     \n                 const findClient= await ClientServ.find(\n                     {query: stuff})\n            \n     \n              await setFacilities(findClient.data)\n                     }\n                     else {\n                         if (user.stacker){\n                             const findClient= await ClientServ.find(\n                                 {query: {\n                                     $limit:100,\n                                     $sort: {\n                                         createdAt: -1\n                                     }\n                                     }})\n                 \n                         await setFacilities(findClient.data)\n     \n                         }\n                     }\n                 }\n                 \n     \n         useEffect(() => {\n                    \n                     if (user){\n                         handleCalendarClose()\n                     }else{\n                         /* const localUser= localStorage.getItem(\"user\")\n                         const user1=JSON.parse(localUser)\n                         console.log(localUser)\n                         console.log(user1)\n                         fetchUser(user1)\n                         console.log(user)\n                         getFacilities(user) */\n                     }\n                     ClientServ.on('created', (obj)=>handleCalendarClose())\n                     ClientServ.on('updated', (obj)=>handleCalendarClose())\n                     ClientServ.on('patched', (obj)=>handleCalendarClose())\n                     ClientServ.on('removed', (obj)=>handleCalendarClose())\n                     const newClient={\n                         selectedClient:{},\n                         show :'create'\n                         }\n                      setState((prevstate)=>({...prevstate, ClientModule:newClient}))\n                     return () => {\n                     \n                     }\n                 },[])\n\n     const handleCalendarClose = async ()=>{\n         let query= {\n            start_time:{\n                $gt:subDays(startDate,1),\n                $lt:addDays(startDate,1)\n            },\n             facility:user.currentEmployee.facilityDetail._id,\n             appointment_status:'Checked Out',\n             $limit:1000,\n             $sort: {\n                 createdAt: -1\n             }\n             }\n             if (state.employeeLocation.locationType!==\"Front Desk\"){\n                 query.locationId=state.employeeLocation.locationId}  \n     \n         const findClient= await ClientServ.find(\n             {query:query})\n     \n             await setFacilities(findClient.data)\n     }\n     \n     const handleDate=async (date)=>{\n         setStartDate(date)\n         \n     }\n     \n         useEffect(() => {\n             if (!!startDate){\n             \n                 handleCalendarClose()\n             }else{\n                 getFacilities()\n             }\n             \n             return () => {\n                 \n             }\n         }, [startDate])\n         //todo: pagination and vertical scroll bar\n     \n         return(\n             <>\n                {user?( <>  \n                     <div className=\"level\">\n                         <div className=\"level-left\">\n                             <div className=\"level-item\">\n                                 <div className=\"field\">\n                                     <p className=\"control has-icons-left  \">\n                                         <DebounceInput className=\"input is-small \" \n                                             type=\"text\" placeholder=\"Search Appointments\"\n                                             minLength={3}\n                                             debounceTimeout={400}\n                                             onChange={(e)=>handleSearch(e.target.value)} />\n                                         <span className=\"icon is-small is-left\">\n                                             <i className=\"fas fa-search\"></i>\n                                         </span>\n                                     </p>\n                                 </div>\n                             </div>\n                        \n                         <div className=\"level-item\">\n                             <DatePicker \n                                 selected={startDate} \n                                 onChange={date => handleDate(date)} \n                                 dateFormat=\"dd/MM/yyyy\"\n                                 placeholderText=\"Filter By Date\"\n                                 isClearable\n                                 />\n                             {/* <input name=\"filter_time\"  ref={register ({ required: true })}  type=\"datetime-local\" /> */}\n                         </div>\n                         </div>\n                         <div className=\"level-item\"> <span className=\"is-size-6 has-text-weight-medium\">Checked Out Clients </span></div>\n                         {/* <div className=\"level-right\">\n                             <div className=\"level-item\"> \n                                 <div className=\"level-item\"><div className=\"button is-success is-small\" onClick={handleCreateNew}>New</div></div>\n                             </div>\n                         </div> */}\n     \n                     </div>\n                     <div className=\"table-container pullup \">\n                                <table className=\"table is-striped is-narrow is-hoverable is-fullwidth is-scrollable \">\n                                    <thead>\n                                        <tr>\n                                        <th><abbr title=\"Serial No\">S/No</abbr></th>\n                                        <th><abbr title=\"Time\">Date/Time</abbr></th>\n                                        <th>First Name</th>\n                                       <th><abbr title=\"Last Name\">Last Name</abbr></th>\n                                      {/*  <th><abbr title=\"Class\">Classification</abbr></th> */}\n                                        <th><abbr title=\"Location\">Location</abbr></th> \n                                        {/* <th><abbr title=\"Phone\">Phone</abbr></th>\n                                         */}\n                                        <th><abbr title=\"Type\">Type</abbr></th>\n                                        <th><abbr title=\"Status\">Status</abbr></th>\n                                        <th><abbr title=\"Reason\">Procedure</abbr></th>\n                                        <th><abbr title=\"Information\">Information</abbr></th>\n                                        <th><abbr title=\"Practitioner\">Practitioner</abbr></th>\n                                        {/* <th><abbr title=\"Actions\">Actions</abbr></th> */}\n                                        </tr>\n                                    </thead>\n                                    <tfoot>                                      \n                                    </tfoot>\n                                    <tbody>\n                                        {facilities.map((Client, i)=>(\n\n                                            <tr key={Client._id} onClick={()=>handleRow(Client)}  className={Client._id===(selectedAppointment?._id||null)?\"is-selected\":\"\"}>\n                                            <th>{i+1}</th>\n                                            <td><strong>{format(new Date(Client.start_time),\"dd-MM-yy HH:mm:ss\")}</strong></td>\n                                            <th>{Client.firstname}</th>\n                                            {/* <td>{Client.middlename}</td> */}\n                                           < td>{Client.lastname}</td>\n                                          {/*  < td>{formatDistanceToNowStrict(new Date(Client.dob))}</td> */}\n                                           {/*  <td>{Client.gender}</td> */}\n                                            {/*  <td>{Client.phone}</td> */}\n                                          {/*   <td>{Client.appointmentClass}</td> */}\n                                            <td>{Client.location_name} {Client.location_type}</td> \n                                            <td>{Client.appointment_type}</td>\n                                            <td>{Client.appointment_status}</td>\n                                            <td>{Client.appointment_reason}</td>\n                                            <td>{Client.information}</td>\n                                            <td>{Client.practitioner_name}</td>\n                                            {/* <td><span   className=\"showAction\"  >...</span></td> */}\n                                           \n                                            </tr>\n\n                                        ))}\n                                    </tbody>\n                                    </table>\n                                    \n                </div>              \n                 </>):<div>loading</div>}\n             </>\n                   \n         )\n    }\n\n \nexport function TheatreCheckedOutList(){\n    // const { register, handleSubmit, watch, errors } = useForm();\n     // eslint-disable-next-line\n     const [error, setError] =useState(false)\n      // eslint-disable-next-line\n     const [success, setSuccess] =useState(false)\n      // eslint-disable-next-line\n    const [message, setMessage] = useState(\"\") \n     const ClientServ=client.service('appointments')\n     //const history = useHistory()\n    // const {user,setUser} = useContext(UserContext)\n     const [facilities,setFacilities]=useState([])\n      // eslint-disable-next-line\n    const [selectedClient, setSelectedClient]=useState() //\n     // eslint-disable-next-line\n     const {state,setState}=useContext(ObjectContext)\n     // eslint-disable-next-line\n     const {user,setUser}=useContext(UserContext)\n     const [startDate, setStartDate] = useState(new Date())\n     const [selectedAppointment,setSelectedAppointment]=useState()\n     const [editModal, setEditModal] =useState(false)\n   /*   const [currDate, setCurrDate] = useState() */\n \n \n \n     const handleCreateNew = async()=>{\n         const newClientModule={\n             selectedAppointment:{},\n             show :'create'\n             }\n         await setState((prevstate)=>({...prevstate, AppointmentModule:newClientModule}))\n        //console.log(state)\n        const newClient={\n         selectedClient:{},\n         show :'create'\n         }\n         await setState((prevstate)=>({...prevstate, ClientModule:newClient}))\n         } \n \n     \n     const handleRow= async(Client)=>{\n         await setSelectedAppointment(Client)\n         const    newClientModule={\n             selectedAppointment:Client,\n             show :'detail'\n         }\n        await setState((prevstate)=>({...prevstate, AppointmentModule:newClientModule}))\n        showEdit()\n     }\n     //console.log(state.employeeLocation)\n \n    const handleSearch=(val)=>{\n        const field='firstname'\n      //  console.log(val)\n \n      let query={\n         $or:[\n             { firstname: {\n                 $regex:val,\n                 $options:'i' \n             }},\n             { lastname: {\n                 $regex:val,\n                 $options:'i' \n             }},\n             { middlename: {\n                 $regex:val,\n                 $options:'i' \n             }}, \n             { phone: {\n                 $regex:val,\n                 $options:'i' \n             }},\n             { appointment_type: {\n                 $regex:val,\n                 $options:'i' \n             }},\n             { appointment_status: {\n                 $regex:val,\n                 $options:'i' \n             }},\n             {appointment_reason: {\n                 $regex:val,\n                 $options:'i' \n             }},\n             {location_type: {\n                 $regex:val,\n                 $options:'i' \n             }},\n             {location_name: {\n                 $regex:val,\n                 $options:'i' \n             }},\n             {practitioner_department: {\n                 $regex:val,\n                 $options:'i' \n             }},\n             {practitioner_profession: {\n                 $regex:val,\n                 $options:'i' \n             }},\n             {practitioner_name: {\n                 $regex:val,\n                 $options:'i' \n             }},\n           \n         ],\n       facility:user.currentEmployee.facilityDetail._id, // || \"\",\n         $limit:20,\n         appointment_status:{\n             $in:[\"Checked in\", \"Procedure\", \"Completed\"]\n         },\n \n         $sort: {\n             createdAt: -1\n           }\n             }\n           if (state.employeeLocation.locationType!==\"Front Desk\"){\n               query.locationId=state.employeeLocation.locationId}  \n      \n        ClientServ.find({query: query\n           }).then((res)=>{\n                   console.log(res)\n                setFacilities(res.data)\n                 setMessage(\" Client  fetched successfully\")\n                 setSuccess(true) \n             })\n             .catch((err)=>{\n                 console.log(err)\n                 setMessage(\"Error fetching Client, probable network issues \"+ err )\n                 setError(true)\n             })\n         }\n    \n     const getFacilities= async()=>{\n             if (user.currentEmployee){   \n                 let stuff={\n                     facility:user.currentEmployee.facilityDetail._id,\n                     appointment_status:{\n                         $in:[\"Checked Out\"]\n                     },\n                    // locationId:state.employeeLocation.locationId,\n                     $limit:100,\n                     $sort: {\n                         createdAt: -1\n                     }\n                 }\n                 if (state.employeeLocation.locationType!==\"Front Desk\"){\n                     stuff.locationId=state.employeeLocation.locationId}  \n \n             const findClient= await ClientServ.find(\n                 {query: stuff})\n \n          await setFacilities(findClient.data)\n                 }\n                 else {\n                     if (user.stacker){\n                         const findClient= await ClientServ.find(\n                             {query: {\n                                 $limit:100,\n                                 $sort: {\n                                     createdAt: -1\n                                 }\n                                 }})\n             \n                     await setFacilities(findClient.data)\n \n                     }\n                 }\n             }\n             \n \n     useEffect(() => {\n                \n                 if (user){\n                     handleCalendarClose()\n                 }else{\n                     /* const localUser= localStorage.getItem(\"user\")\n                     const user1=JSON.parse(localUser)\n                     console.log(localUser)\n                     console.log(user1)\n                     fetchUser(user1)\n                     console.log(user)\n                     getFacilities(user) */\n                 }\n                 ClientServ.on('created', (obj)=>handleCalendarClose())\n                 ClientServ.on('updated', (obj)=>handleCalendarClose())\n                 ClientServ.on('patched', (obj)=>handleCalendarClose())\n                 ClientServ.on('removed', (obj)=>handleCalendarClose())\n                 const newClient={\n                     selectedClient:{},\n                     show :'create'\n                     }\n                  setState((prevstate)=>({...prevstate, ClientModule:newClient}))\n                 return () => {\n                 \n                 }\n             },[])\n \n const handleCalendarClose = async ()=>{\n    // alert(\"i am bing called \" + startDate)\n    \n     if (!!state.currDate2){\n         console.log(state.currDate2)\n         setStartDate(state.currDate2)\n       \n     }\n     let query= {\n         start_time:{\n             $gt:subDays(startDate,1),\n             $lt:addDays(startDate,1)\n         },\n         facility:user.currentEmployee.facilityDetail._id,\n         appointment_status:{\n             $in:[\"Checked Out\"]\n         }, \n        \n         $limit:100,\n         $sort: {\n             createdAt: -1\n         }\n         }\n         if (state.employeeLocation.locationType!==\"Front Desk\"){\n             query.locationId=state.employeeLocation.locationId}  \n             /* const findClient= */\n     await ClientServ.find(\n         {query:query})\n         .then((findClient)=>{\n        //  console.log(findClient.data)\n         // console.log(\"xed\",startDate)\n         /* await */ \n         setFacilities(findClient.data)})\n         .catch((err)=>{\n              console.log(err)\n            \n          })\n       \n         }\n \n const handleDate=async (date)=>{ //change date \n \n     setStartDate(date)\n    \n     await setState((prevstate)=>({...prevstate, currDate2:date}))\n     \n }\n \n     useEffect(() => {\n         if (!!startDate){\n         \n             handleCalendarClose()\n           \n         }else{\n             getFacilities()\n         }\n         \n         return () => {\n             \n         }\n     }, [startDate])\n     //todo: pagination and vertical scroll bar\n     const  handlecloseModal1 = () =>{\n         setEditModal(false)\n         }\n   const showEdit = () =>{\n         setEditModal(true)\n        //history.push('/app/finance/billservice')\n         }\n     return(\n         <>\n            {user?( <>  \n                 <div className=\"level\">\n                     <div className=\"level-left\">\n                         <div className=\"level-item\">\n                             <div className=\"field\">\n                                 <p className=\"control has-icons-left  \">\n                                     <DebounceInput className=\"input is-small \" \n                                         type=\"text\" placeholder=\"Search Appointments\"\n                                         minLength={3}\n                                         debounceTimeout={400}\n                                         onChange={(e)=>handleSearch(e.target.value)} />\n                                     <span className=\"icon is-small is-left\">\n                                         <i className=\"fas fa-search\"></i>\n                                     </span>\n                                 </p>\n                             </div>\n                         </div>\n                    \n                     <div className=\"level-item\">\n                         <DatePicker \n                             selected={startDate} \n                             onChange={date => handleDate(date)} \n                             dateFormat=\"dd/MM/yyyy\"\n                             placeholderText=\"Filter By Date\"\n                             /* isClearable */\n                             />\n                         {/* <input name=\"filter_time\"  ref={register ({ required: true })}  type=\"datetime-local\" /> */}\n                     </div>\n                     </div>\n                     <div className=\"level-item\"> <span className=\"is-size-6 has-text-weight-medium\">Checked-In Clients </span></div>\n                     {/* <div className=\"level-right\">\n                         <div className=\"level-item\"> \n                             <div className=\"level-item\"><div className=\"button is-success is-small\" onClick={handleCreateNew}>New</div></div>\n                         </div>\n                     </div> */}\n \n                 </div>\n                 <div className=\"table-container pullup \">\n                                 <table className=\"table is-striped is-narrow is-hoverable is-fullwidth is-scrollable \">\n                                     <thead>\n                                         <tr>\n                                         <th><abbr title=\"Serial No\">S/No</abbr></th>\n                                         <th><abbr title=\"Time\">Date/Time</abbr></th>\n                                         <th>First Name</th>\n                                        <th><abbr title=\"Last Name\">Last Name</abbr></th>\n                                       {/*  <th><abbr title=\"Class\">Classification</abbr></th> */}\n                                         <th><abbr title=\"Location\">Location</abbr></th> \n                                         {/* <th><abbr title=\"Phone\">Phone</abbr></th>\n                                          */}\n                                         <th><abbr title=\"Type\">Type</abbr></th>\n                                         <th><abbr title=\"Status\">Status</abbr></th>\n                                         <th><abbr title=\"Reason\">Procedure</abbr></th>\n                                         <th><abbr title=\"Information\">Information</abbr></th>\n                                         <th><abbr title=\"Practitioner\">Practitioner</abbr></th>\n                                         {/* <th><abbr title=\"Actions\">Actions</abbr></th> */}\n                                         </tr>\n                                     </thead>\n                                     <tfoot>                                      \n                                     </tfoot>\n                                     <tbody>\n                                         {facilities.map((Client, i)=>(\n \n                                             <tr key={Client._id} onClick={()=>handleRow(Client)}  className={Client._id===(selectedAppointment?._id||null)?\"is-selected\":\"\"}>\n                                             <th>{i+1}</th>\n                                             <td><strong>{format(new Date(Client.start_time),\"dd-MM-yy HH:mm:ss\")}</strong></td>\n                                             <th>{Client.firstname}</th>\n                                             {/* <td>{Client.middlename}</td> */}\n                                            < td>{Client.lastname}</td>\n                                           {/*  < td>{formatDistanceToNowStrict(new Date(Client.dob))}</td> */}\n                                            {/*  <td>{Client.gender}</td> */}\n                                             {/*  <td>{Client.phone}</td> */}\n                                           {/*   <td>{Client.appointmentClass}</td> */}\n                                             <td>{Client.location_name} {Client.location_type}</td> \n                                             <td>{Client.appointment_type}</td>\n                                             <td>{Client.appointment_status}</td>\n                                             <td>{Client.appointment_reason}</td>\n                                             <td>{Client.information}</td>\n                                             <td>{Client.practitioner_name}</td>\n                                             {/* <td><span   className=\"showAction\"  >...</span></td> */}\n                                            \n                                             </tr>\n \n                                         ))}\n                                     </tbody>\n                                     </table>\n                                     \n                 </div>\n                   <div className={`modal ${editModal?\"is-active\":\"\"}` }>\n                 <div className=\"modal-background\"></div>\n                 <div className=\"modal-card\">\n                     <header className=\"modal-card-head\">\n                     <p className=\"modal-card-title\">Edit Appointment</p>\n                     <button className=\"delete\" aria-label=\"close\"  onClick={handlecloseModal1}></button>\n                     </header>\n                     <section className=\"modal-card-body\">\n                    \n                     {(state.AppointmentModule.show ==='detail')&&<TheatreAppointmentDetail  />}\n                     {(state.AppointmentModule.show ==='modify')&&<TheatreAppointmentModify  handlecloseModal={handlecloseModal1} />}      \n                     </section>\n                     \n                 </div>\n             </div>                     \n             </>):<div>loading</div>}\n         </>\n               \n     )\n     }\n     export function TheatreAppointmentDetail(){\n        //const { register, handleSubmit, watch, setValue } = useForm(); //errors,\n         // eslint-disable-next-line\n        const history =useHistory()\n        let { path, url } = useRouteMatch();\n        const [error, setError] =useState(false) //, \n        //const [success, setSuccess] =useState(false)\n         // eslint-disable-next-line\n        const [message, setMessage] = useState(\"\") //,\n        //const ClientServ=client.service('/Client')\n        //const history = useHistory()\n        //const {user,setUser} = useContext(UserContext)\n        const {state,setState} = useContext(ObjectContext)\n        const [selectedClient,setSelectedClient]=useState()\n        const [selectedAppointment,setSelectedAppointment]=useState()\n    \n       \n    \n       const Client =state.AppointmentModule.selectedAppointment \n        //const client=Client\n        const handleEdit= async()=>{\n            const    newClientModule={\n                selectedAppointment:Client,\n                show :'modify'\n            }\n           await setState((prevstate)=>({...prevstate, AppointmentModule:newClientModule}))\n           //console.log(state)\n           \n        }\n        const handleAttend=async()=>{\n            \n            const patient = await client.service('client').get(Client.clientId)\n            await setSelectedClient(patient)\n            const    newClientModule={\n                selectedClient:patient, \n                show :'detail'\n            }\n           await setState((prevstate)=>({...prevstate, ClientModule:newClientModule}))\n           //modify appointment\n            history.push('/app/theatre/encounter')\n        }\n     \n        return (\n            <>\n            <div className=\"card \">\n                <div className=\"card-header\">\n                    <p className=\"card-header-title\">\n                        Client Details\n                    </p>\n                </div>\n                <div className=\"card-content vscrollable\">\n               \n                <div className=\"field is-horizontal\">\n                    <div className=\"field-body\">\n                    {Client.firstname &&  <div className=\"field\">\n                            <p className=\"control has-icons-left has-icons-right\">\n                                <label className=\"label is-size-7 my-0 \"   name=\"firstname\" type=\"text\">First Name </label><label className=\"is-size-7 my-0 \">{Client.firstname }</label>\n                                <span className=\"icon is-small is-left\">\n                                    <i className=\"nop-hospital\"></i>\n                                </span>                    \n                            </p>\n                        </div>}\n    \n    \n                        {Client.middlename &&  <div className=\"field\">\n                            <p className=\"control has-icons-left has-icons-right\">\n                            <label className=\"label is-size-7 my-0\"   name=\"middlename\" type=\"text\"> Middle Name </label><label className=\"is-size-7 my-0\">{Client.middlename }</label>\n                            <span className=\"icon is-small is-left\">\n                                <i className=\"nop-map-signs\"></i>\n                            </span>\n                            \n                            </p>\n                        </div>}\n                 {Client.lastname &&\n                    <div className=\"field\">\n                        <p className=\"control has-icons-left\">\n                            <label className=\"label is-size-7 my-0\"  name=\"lastname\" type=\"text\">Last Name</label><label className=\"is-size-7 my-0\">{Client.lastname }</label>\n                            <span className=\"icon is-small is-left\">\n                            <i className=\" nop-user-md \"></i>\n                            </span>\n                        </p>\n                    </div>}\n                    </div>  \n                    </div>\n                    <div className=\"field is-horizontal\">\n                    <div className=\"field-body\">\n                    {Client.dob &&<div className=\"field\">\n                        <p className=\"control has-icons-left\">\n                        \n                            <label className=\"label is-size-7 my-0\"  name=\"dob\" type=\"text\">Date of Birth </label><label className=\"is-size-7 my-0\">{ new Date(Client.dob).toLocaleDateString('en-GB')}</label>\n                            <span className=\"icon is-small is-left\">\n                            <i className=\"nop-envelope\"></i>\n                            </span>\n                        </p>\n                    </div> }\n                    {Client.gender &&<div className=\"field\">\n                        <p className=\"control has-icons-left\">\n                        \n                            <label className=\"label is-size-7 my-0\"  name=\"gender\" type=\"text\">Gender </label><label className=\"is-size-7 my-0\">{Client.gender }</label>\n                            <span className=\"icon is-small is-left\">\n                            <i className=\"nop-envelope\"></i>\n                            </span>\n                        </p>\n                    </div> }\n                    {Client.maritalstatus && <div className=\"field\">\n                        <p className=\"control has-icons-left\">\n                        \n                            <label className=\"label is-size-7 my-0\"  name=\"maritalstatus\" type=\"text\">Marital Status </label><label className=\"is-size-7 my-0\">{Client.maritalstatus }</label>\n                            <span className=\"icon is-small is-left\">\n                            <i className=\"nop-envelope\"></i>\n                            </span>\n                        </p>\n                    </div> }\n                    {Client.mrn && <div className=\"field\">\n                        <p className=\"control has-icons-left\">\n                        \n                            <label className=\"label is-size-7 my-0\"  name=\"mrn\" type=\"text\">Medical Records Number  </label><label className=\"is-size-7 my-0\">{Client.mrn }</label>\n                            <span className=\"icon is-small is-left\">\n                            <i className=\"nop-envelope\"></i>\n                            </span>\n                        </p>\n                    </div> }\n                    </div>\n                    </div>\n                    <div className=\"field is-horizontal\">\n                        <div className=\"field-body\">\n                        {Client.religion && <div className=\"field\">\n                            <p className=\"control has-icons-left\">\n                            \n                                <label className=\"label is-size-7 my-0\"  name=\"religion\" type=\"text\">Religion  </label><label className=\"is-size-7 my-0\">{Client.religion }</label>\n                                <span className=\"icon is-small is-left\">\n                                <i className=\"nop-envelope\"></i>\n                                </span>\n                            </p>\n                        </div> }\n                        {Client.profession &&  <div className=\"field\">\n                            <p className=\"control has-icons-left\">\n                            \n                                <label className=\"label is-size-7 my-0\"  name=\"profession\" type=\"text\">Profession  </label><label className=\"is-size-7 my-0\">{Client.profession }</label>\n                                <span className=\"icon is-small is-left\">\n                                <i className=\"nop-envelope\"></i>\n                                </span>\n                            </p>\n                        </div> }\n                        {Client.phone &&<div className=\"field\">\n                            <p className=\"control has-icons-left\">\n                                <label className=\"label is-size-7 my-0\"  name=\"phone\" type=\"text\"> Phone No</label><label className=\"is-size-7 my-0\">{Client.phone }</label>\n                                <span className=\"icon is-small is-left\">\n                                <i className=\"nop-phone-alt\"></i>\n                                </span>\n                            </p>\n                        </div>}\n    \n                        {Client.email && <div className=\"field\">\n                            <p className=\"control has-icons-left\">\n                            \n                                <label className=\"label is-size-7 my-0\"  name=\"email\" type=\"email\">Email  </label><label className=\"is-size-7 my-0\">{Client.email }</label>\n                                <span className=\"icon is-small is-left\">\n                                <i className=\"nop-envelope\"></i>\n                                </span>\n                            </p>\n                        </div> }\n                        </div>\n                    </div>\n    \n                    {Client.address &&<div className=\"field\">\n                    <p className=\"control has-icons-left\">\n    \n                        <label className=\"label is-size-7 my-0\"  name=\"address\" type=\"text\">Residential Address  </label><label className=\"is-size-7 my-0\">{Client.address }</label>\n                        <span className=\"icon is-small is-left\">\n                        <i className=\"nop-envelope\"></i>\n                        </span>\n                    </p>\n                    </div>} \n                    <div className=\"field is-horizontal\">\n                        <div className=\"field-body\">\n                            {Client.city && <div className=\"field\">\n                                <p className=\"control has-icons-left\">\n                                \n                                    <label className=\"label is-size-7 my-0\"  name=\"city\" type=\"text\">Town/City  </label><label className=\"is-size-7 my-0\">{Client.city }</label>\n                                    <span className=\"icon is-small is-left\">\n                                    <i className=\"nop-envelope\"></i>\n                                    </span>\n                                </p>\n                            </div> }\n                            {Client.lga && <div className=\"field\">\n                                <p className=\"control has-icons-left\">\n                                \n                                    <label className=\"label is-size-7 my-0\"  name=\"lga\" type=\"text\">Local Govt Area  </label><label className=\"is-size-7 my-0\">{Client.lga }</label>\n                                    <span className=\"icon is-small is-left\">\n                                    <i className=\"nop-envelope\"></i>\n                                    </span>\n                                </p>\n                            </div> }\n                            {Client.state && <div className=\"field\">\n                                <p className=\"control has-icons-left\">\n                                    <label className=\"label is-size-7 my-0\"  name=\"state\" type=\"text\">State  </label><label className=\"is-size-7 my-0\">{Client.state }</label>\n                                    <span className=\"icon is-small is-left\">\n                                    <i className=\"nop-envelope\"></i>\n                                    </span>\n                                </p>\n                            </div> }\n                            {Client.country &&<div className=\"field\">\n                            <p className=\"control has-icons-left\">\n                            \n                                <label className=\"label is-size-7 my-0\"  name=\"country\" type=\"text\">Country  </label><label className=\"is-size-7 my-0\">{Client.country }</label>\n                                <span className=\"icon is-small is-left\">\n                                <i className=\"nop-envelope\"></i>\n                                </span>\n                            </p>\n                        </div>}\n                        </div>\n                    </div> \n                    <div className=\"field is-horizontal\">\n                    <div className=\"field-body\">\n                         {Client.bloodgroup &&  <div className=\"field\">\n                            <p className=\"control has-icons-left\">\n                            \n                                <label className=\"label is-size-7 my-0\"  name=\"bloodgroup\" type=\"text\">Blood Group </label><label className=\"is-size-7 my-0\">{Client.bloodgroup }</label>\n                                <span className=\"icon is-small is-left\">\n                                <i className=\"nop-envelope\"></i>\n                                </span>\n                            </p>\n                        </div>}\n                       \n                        {Client.genotype && <div className=\"field\">\n                            <p className=\"control has-icons-left\">\n                            \n                                <label className=\"label is-size-7 my-0\"  name=\"genotype\" type=\"text\">Genotype  </label><label className=\"is-size-7 my-0\">{Client.genotype }</label>\n                                <span className=\"icon is-small is-left\">\n                                <i className=\"nop-envelope\"></i>\n                                </span>\n                            </p>\n                        </div> }\n                        {Client.disabilities && <div className=\"field\">\n                            <p className=\"control has-icons-left\">\n                            \n                                <label className=\"label is-size-7 my-0\"  name=\"disabilities\" type=\"text\">Disabilities  </label><label className=\"is-size-7 my-0\">{Client.disabilities }</label>\n                                <span className=\"icon is-small is-left\">\n                                <i className=\"nop-envelope\"></i>\n                                </span>\n                            </p>\n                        </div> }\n                    </div> \n                    </div>  \n    \n                    <div className=\"field is-horizontal\">\n                    <div className=\"field-body\">\n    \n                    {Client.allergies && <div className=\"field\">\n                        <p className=\"control has-icons-left\">\n                        \n                            <label className=\"label is-size-7 my-0\"  name=\"allergies\" type=\"text\">Allergies  </label><label className=\"is-size-7 my-0\">{Client.allergies }</label>\n                            <span className=\"icon is-small is-left\">\n                            <i className=\"nop-envelope\"></i>\n                            </span>\n                        </p>\n                    </div> }\n                    {Client.comorbidities && <div className=\"field\">\n                        <p className=\"control has-icons-left\">\n                        \n                            <label className=\"label is-size-7 my-0\"  name=\"comorbidities\" type=\"text\">Co-mobidities  </label><label className=\"is-size-7 my-0\">{Client.comorbidities }</label>\n                            <span className=\"icon is-small is-left\">\n                            <i className=\"nop-envelope\"></i>\n                            </span>\n                        </p>\n                    </div> }\n                    </div>\n                    </div>\n                   {Client.clientTags && <div className=\"field\">\n                    <p className=\"control has-icons-left\">\n    \n                        <label className=\"label is-size-7 my-0\"  name=\"clientTags\" type=\"text\">Tags </label><label className=\"is-size-7 my-0\">{Client.clientTags }</label>\n                        <span className=\"icon is-small is-left\">\n                        <i className=\"nop-envelope\"></i>\n                        </span>\n                    </p>\n                    </div> }\n                    {Client.specificDetails && <div className=\"field\">\n                    <p className=\"control has-icons-left\">\n                        <label className=\"label is-size-7 my-0\"  name=\"specificDetails\" type=\"text\">Specific Details about Client </label><label className=\"is-size-7 my-0\">{Client.specificDetails }</label>\n                        <span className=\"icon is-small is-left\">\n                        <i className=\"nop-envelope\"></i>\n                        </span>\n                    </p>\n                    </div> }\n                    <div className=\"field is-horizontal\">\n                    <div className=\"field-body\">\n                    {Client.nok_name && <div className=\"field\">\n                        <p className=\"control has-icons-left\">\n                            <label className=\"label is-size-7 my-0\"  name=\"nok_name\" type=\"text\">Next of Kin Full Name</label><label className=\"is-size-7 my-0\">{Client.nok_name }</label>\n                            <span className=\"icon is-small is-left\">\n                            <i className=\"nop-clinic-medical\"></i>\n                            </span>\n                        </p>\n                    </div>}\n                    {Client.nok_phoneno && <div className=\"field\">\n                        <p className=\"control has-icons-left\">\n                            <label className=\"label is-size-7 my-0\"  name=\"nok_phoneno\" type=\"text\">Next of Kin Phone Number</label><label className=\"is-size-7 my-0\">{Client.nok_phoneno }</label>\n                            <span className=\"icon is-small is-left\">\n                            <i className=\"nop-clinic-medical\"></i>\n                            </span>\n                        </p>\n                    </div> }\n                    {Client.nok_email && <div className=\"field\">\n                        <p className=\"control has-icons-left\">\n                        \n                            <label className=\"label is-size-7 my-0\"  name=\"nok_email\" type=\"email\">Next of Kin Email </label><label className=\"is-size-7 my-0\">{Client.nok_email }</label>\n                            <span className=\"icon is-small is-left\">\n                            <i className=\"nop-envelope\"></i>\n                            </span>\n                        </p>\n                    </div>}\n                    {Client.nok_relationship && <div className=\"field\">\n                        <p className=\"control has-icons-left\">\n                        \n                            <label className=\"label is-size-7 my-0\"  name=\"nok_relationship\" type=\"text\">Next of Kin Relationship\"  </label><label className=\"is-size-7 my-0\">{Client.nok_relationship }</label>\n                            <span className=\"icon is-small is-left\">\n                            <i className=\"nop-envelope\"></i>\n                            </span>\n                        </p>\n                    </div>}\n                    </div>\n                    </div> \n                <div className=\"field is-grouped  mt-2\">\n                    <p className=\"control\">\n                        <button className=\"button is-success is-small\" onClick={handleEdit}>\n                            Edit Appointment Details\n                        </button>\n                    </p>\n                 \n                    <p className=\"control\">\n                        <button className=\"button is-link is-small\" onClick={()=>handleAttend()} >\n                            Attend to Client\n                        </button>\n                    </p>\n    \n                </div>\n                \n               \n            </div>\n            </div>\n            </>\n        )\n       \n       \n    }\n    \n    export function TheatreAppointmentModify(  {handlecloseModal}){\n        const { register, handleSubmit, setValue,reset, errors } = useForm(); //watch, errors,\n        // eslint-disable-next-line \n        const [error, setError] =useState(false)\n        // eslint-disable-next-line \n        const [success, setSuccess] =useState(false)\n        // eslint-disable-next-line \n        const [message,setMessage] = useState(\"\")\n        // eslint-disable-next-line \n        const ClientServ=client.service('appointments')\n        //const history = useHistory()\n         // eslint-disable-next-line\n        const {user} = useContext(UserContext)\n        const {state,setState} = useContext(ObjectContext)\n        const [selectedClient,setSelectedClient]=useState()\n        const [selectedAppointment,setSelectedAppointment]=useState()\n        const [appointment_status,setAppointment_status]=useState(\"\")\n        const [appointment_type, setAppointment_type]=useState(\"\")\n        const appClass=[ \"On-site\",\"Teleconsultation\"]\n        const [locationId,setLocationId] = useState()\n        const [practionerId,setPractionerId] = useState()\n        const [success1, setSuccess1] =useState(false)\n        const [success2, setSuccess2] =useState(false)\n        const [chosen1, setChosen1]=useState()\n        const [chosen2, setChosen2]=useState()\n    \n        const Client =state.AppointmentModule.selectedAppointment\n        //console.log(Client)\n    \n        const getSearchfacility1=(obj)=>{\n    \n            setLocationId(obj._id)\n            setChosen1(obj)\n            \n             if (!obj){\n                 //\"clear stuff\"\n                 setLocationId()\n                 setChosen1()\n                \n             }\n         }\n    \n        const getSearchfacility2=(obj)=>{\n         \n            \n            setPractionerId(obj._id)\n            setChosen2(obj)\n            \n             if (!obj){\n                 //\"clear stuff\"\n                 setPractionerId()\n                 setChosen2()\n                \n             }\n         }\n    \n        useEffect(() => {\n            setValue(\"firstname\", Client.firstname,  {\n                shouldValidate: true,\n                shouldDirty: true\n            })\n            setValue(\"middlename\", Client.middlename,  {\n                shouldValidate: true,\n                shouldDirty: true\n            })\n                setValue(\"lastname\", Client.lastname,  {\n                shouldValidate: true,\n                shouldDirty: true\n            })\n            setValue(\"phone\", Client.phone,  {\n                shouldValidate: true,\n                shouldDirty: true\n            })\n            setValue(\"email\", Client.email,  {\n                shouldValidate: true,\n                shouldDirty: true\n            })\n            setValue(\"dob\", Client.dob,  {\n                shouldValidate: true,\n                shouldDirty: true\n            })\n            setValue(\"gender\", Client.gender,  {\n                shouldValidate: true,\n                shouldDirty: true\n            }) \n                setValue(\"ClientId\", Client.clientId,  {\n                shouldValidate: true,\n                shouldDirty: true\n            }) \n            setValue(\"appointment_reason\", Client.appointment_reason,  {\n                shouldValidate: true,\n                shouldDirty: true\n            })\n            setValue(\"appointment_status\", Client.appointment_status,  {\n                shouldValidate: true,\n                shouldDirty: true\n            })\n                setValue(\"appointment_type\", Client.appointment_type,  {\n                shouldValidate: true,\n                shouldDirty: true\n            })\n            setValue(\"start_time\", format(new Date(Client.start_time),\"yyyy-MM-dd'T'HH:mm:ss\"),  {\n                shouldValidate: true,\n                shouldDirty: true\n            })\n            setValue(\"appointmentClass\", Client.appointmentClass,  {\n                shouldValidate: true,\n                shouldDirty: true\n            })\n            \n           \n            return () => {\n                \n            }\n        })\n        const handleChangeType=async (e)=>{\n           // await setAppointment_type(e.target.value)\n            setValue(\"appointment_type\", e.target.value,  {\n                shouldValidate: true,\n                shouldDirty: true\n            })\n            \n        }\n    \n        const handleChangeStatus=async (e)=>{\n           // await setAppointment_status(e.target.value)\n            setValue(\"appointment_status\", e.target.value,  {\n                shouldValidate: true,\n                shouldDirty: true\n            })\n        }\n    \n       const handleCancel=async()=>{\n        const    newClientModule={\n            selectedAppointment:{},\n            show :'create'\n          }\n             await setState((prevstate)=>({...prevstate, AppointmentModule:newClientModule}))\n                //console.log(state)\n               }\n    \n    \n        const changeState =()=>{\n            const    newClientModule={\n                selectedAppointment:{},\n                show :'create'\n            }\n            setState((prevstate)=>({...prevstate, AppointmentModule:newClientModule}))\n            handlecloseModal()\n            }\n        const handleDelete=async()=>{\n            let conf=window.confirm(\"Are you sure you want to delete this data?\")\n            \n            const dleteId=Client._id\n            if (conf){\n                 \n            ClientServ.remove(dleteId)\n            .then((res)=>{\n                    //console.log(JSON.stringify(res))\n                    reset();\n                   /*  setMessage(\"Deleted Client successfully\")\n                    setSuccess(true)\n                    changeState()\n                   setTimeout(() => {\n                    setSuccess(false)\n                    }, 200); */\n                    toast({\n                        message: 'Client deleted succesfully',\n                        type: 'is-success',\n                        dismissible: true,\n                        pauseOnHover: true,\n                      })\n                    changeState()\n                })\n                .catch((err)=>{\n                   // setMessage(\"Error deleting Client, probable network issues \"+ err )\n                   // setError(true)\n                    toast({\n                        message: \"Error deleting Client, probable network issues or \"+ err,\n                        type: 'is-danger',\n                        dismissible: true,\n                        pauseOnHover: true,\n                      })\n                })\n            }\n        }\n            \n    \n        const onSubmit = (data,e) =>{\n            e.preventDefault();\n            \n            setSuccess(false)\n           // console.log(data)\n          //  data.facility=Client.facility\n              //console.log(data);\n               data.practitioner_name=chosen2.firstname+\" \"+chosen2.lastname\n                data.practitioner_profession=chosen2.profession\n                data.practitioner_department=chosen2.department\n                data.practitionerId=chosen2._id\n              data.locationId=chosen1._id\n              data.location_name=chosen1.name\n              data.location_type=chosen1.locationType\n              \n               //data.actions\n               if (Client.appointment_status!== data.appointment_status){\n                    Client.actions.push({\n                        status:data.appointment_status,\n                        actor:user.currentEmployee._id,\n                    })\n               }\n               data.actions=Client.actions\n            ClientServ.patch(Client._id,data)\n            .then((res)=>{\n                    //console.log(JSON.stringify(res))\n                   // e.target.reset();\n                   // setMessage(\"updated Client successfully\")\n                     toast({\n                        message: 'Client updated succesfully',\n                        type: 'is-success',\n                        dismissible: true,\n                        pauseOnHover: true,\n                      })\n                      \n                    changeState()\n                   \n    \n                })\n                .catch((err)=>{\n                    //setMessage(\"Error creating Client, probable network issues \"+ err )\n                   // setError(true)\n                    toast({\n                        message: \"Error updating Client, probable network issues or \"+ err,\n                        type: 'is-danger',\n                        dismissible: true,\n                        pauseOnHover: true,\n                      })\n                })\n    \n          } \n         \n          \n        return (\n            \n            <>\n            <div className=\"card \">\n                <div className=\"card-header\">\n                    <p className=\"card-header-title\">\n                        Client Details-Modify\n                    </p>\n                </div>\n                <div className=\"card-content vscrollable remPad1\">\n               \n                <form onSubmit={handleSubmit(onSubmit)}>\n           {/* ===================================================== */}\n          {/*  <label className=\"label is-small\">Client:</label> */}\n             \n                <div className=\"field\">\n                  <label className=\"label is-size-7\" > {Client.firstname} {Client.lastname}</label>\n                </div>\n                <div className=\"field is-horizontal\">\n                <div className=\"field-body\">\n                    <div className=\"field is-expanded\"  /* style={ !user.stacker?{display:\"none\"}:{}} */ >\n                        <LocationSearch id={Client.locationId} getSearchfacility={getSearchfacility1} clear={success1} /> \n                        <p className=\"control has-icons-left \" style={{display:\"none\"}}>\n                            <input className=\"input is-small\"  /* ref={register ({ required: true }) } */  /* add array no */  value={locationId} name=\"locationId\" type=\"text\" onChange={e=>setLocationId(e.target.value)} placeholder=\"Product Id\" />\n                            <span className=\"icon is-small is-left\">\n                            <i className=\"fas  fa-map-marker-alt\"></i>\n                            </span>\n                        </p>\n                    </div>\n                </div>\n            </div>\n            <div className=\"field is-horizontal\">\n                <div className=\"field-body\">\n                    <div className=\"field is-expanded\"  /* style={ !user.stacker?{display:\"none\"}:{}} */ >\n                        <EmployeeSearch id={Client.practitionerId}  getSearchfacility={getSearchfacility2} clear={success2} /> \n                        <p className=\"control has-icons-left \" style={{display:\"none\"}}>\n                            <input className=\"input is-small\"  /* ref={register ({ required: true }) } */  /* add array no */  value={practionerId} name=\"practionerId\" type=\"text\" onChange={e=>setPractionerId(e.target.value)} placeholder=\"Product Id\" />\n                            <span className=\"icon is-small is-left\">\n                            <i className=\"fas  fa-map-marker-alt\"></i>\n                            </span>\n                        </p>\n                    </div>\n                 \n                </div>\n            </div>\n                <div className=\"field is-horizontal\">\n                           \n                           <div className=\"field ml-3 \">\n                           {/* <label className= \"mr-2 \"> <b>Modules:</b></label> */}\n                               {\n                                   appClass.map((c,i) => \n                                       <label  className=\" is-small\" key={c}>\n                                           <input type=\"radio\" value={c} name=\"appointmentClass\" ref={register} />{c + \" \"}\n                                       </label>\n                                   )\n                               }\n                           </div>  \n                           </div>\n            <div className=\"field\">\n                <input name=\"start_time\" ref={register ({ required: true })} type=\"datetime-local\" defaultValue={format(new Date(Client.start_time),\"yyyy-MM-dd'T'HH:mm:ss\")} />\n            </div>\n               \n            <div className=\"field\">    \n                    <div className=\"control\">\n                        <div className=\"select is-small\">\n                            <select name=\"type\" /* value={appointment_type} */  name = \"appointment_type\" ref={register ({ required: true })}  onChange={handleChangeType}>\n                               <option value=\"\">Choose Appointment Type  </option>\n                                <option value=\"New\">New Procedure</option>\n                                <option value=\"Repeat\">Repeat Procedure</option>\n                              \n                               \n                            </select>\n                        </div>\n                    </div>\n                </div>\n            <div className=\"field\">    \n                    <div className=\"control\">\n                        <div className=\"select is-small\">\n                            <select name=\"appointment_status\" ref={register ({ required: true })} /* value={appointment_status} */ onChange={handleChangeStatus}>\n                                <option value=\"\">Appointment Status  </option>\n                                <option value=\"Scheduled\">Scheduled</option>\n                                <option value=\"Confirmed\">Confirmed</option>\n                                <option value=\"Billed\">Billed</option>\n                                <option value=\"Paid\">Paid</option>\n                                <option value=\"Checked In\">Checked In</option>\n                                <option value=\"Procedure in Progress\">Procedure in Progress</option>\n                                <option value=\"Completed Procedure\">Completed Procedure</option>\n                                <option value=\"Checked Out\">Checked Out</option>\n                                <option value=\"No Show\">No Show</option>\n                                <option value=\"Cancelled\">Cancelled</option>\n                               \n                            </select>\n                        </div>\n                    </div>\n            </div>\n            <div className=\"field\">\n                <p className=\"control has-icons-left has-icons-right\">\n                    <input className=\"input is-small\" ref={register()}  name=\"appointment_reason\" type=\"text\" placeholder=\"Reason For Appointment\" />\n                    <span className=\"icon is-small is-left\">\n                        <i className=\"fas fa-hospital\"></i>\n                    </span>                    \n                </p>\n            </div>\n            <div className=\"field \" style={{display:\"none\"}} >\n                <p className=\"control has-icons-left has-icons-right\">\n                    <input className=\"input is-small\" ref={register()}  name=\"billingservice\" type=\"text\" placeholder=\"Billing service\" />\n                    <span className=\"icon is-small is-left\">\n                        <i className=\"fas fa-hospital\"></i>\n                    </span>                    \n                </p>\n            </div>\n            {/* ======================================= */}\n    \n               \n                </form>\n                \n                <div className=\"field  is-grouped mt-2\" >\n                    <p className=\"control\">\n                        <button type=\"submit\" className=\"button is-success is-small\" onClick={handleSubmit(onSubmit)}>\n                            Save\n                        </button>\n                    </p>\n                    <p className=\"control\">\n                        <button className=\"button is-warning is-small\" onClick={handleCancel}>\n                            Cancel\n                        </button>\n                    </p>\n                   <p className=\"control\">\n                        <button className=\"button is-danger is-small\" onClick={()=>handleDelete()} type=\"delete\">\n                           Delete\n                        </button>\n                    </p> \n                </div>\n            </div>\n            </div>\n            </>\n        )\n       \n       \n                    \n    }   \nexport  function ClientSearch({getSearchfacility,clear}) {\n    \n    const ClientServ=client.service('client')\n    const [facilities,setFacilities]=useState([])\n     // eslint-disable-next-line\n     const [searchError, setSearchError] =useState(false)\n     // eslint-disable-next-line\n    const [showPanel, setShowPanel] =useState(false)\n     // eslint-disable-next-line\n   const [searchMessage, setSearchMessage] = useState(\"\") \n   // eslint-disable-next-line \n   const [simpa,setSimpa]=useState(\"\")\n   // eslint-disable-next-line \n   const [chosen,setChosen]=useState(false)\n   // eslint-disable-next-line \n   const [count,setCount]=useState(0)\n   const inputEl=useRef(null)\n   const [val,setVal]=useState(\"\")\n   const {user} = useContext(UserContext) \n   const {state}=useContext(ObjectContext)\n    const [productModal,setProductModal]=useState(false)\n\n   const handleRow= async(obj)=>{\n        await setChosen(true)\n        //alert(\"something is chaning\")\n       getSearchfacility(obj)\n       \n       await setSimpa(obj.firstname + \" \"+ obj.middlename+ \" \"+obj.lastname + \" \"+obj.gender+\" \"+obj.phone )\n       \n        // setSelectedFacility(obj)\n        setShowPanel(false)\n        await setCount(2)\n        /* const    newfacilityModule={\n            selectedFacility:facility,\n            show :'detail'\n        }\n   await setState((prevstate)=>({...prevstate, facilityModule:newfacilityModule})) */\n   //console.log(state)\n    }\n    const handleBlur=async(e)=>{\n         if (count===2){\n             console.log(\"stuff was chosen\")\n         }\n       \n       /*  console.log(\"blur\")\n         setShowPanel(false)\n        console.log(JSON.stringify(simpa))\n        if (simpa===\"\"){\n            console.log(facilities.length)\n            setSimpa(\"abc\")\n            setSimpa(\"\")\n            setFacilities([])\n            inputEl.current.setValue=\"\"\n        }\n        console.log(facilities.length)\n        console.log(inputEl.current) */\n    }\n    const handleSearch=async(val)=>{\n        setVal(val)\n        if (val===\"\"){\n            setShowPanel(false)\n            getSearchfacility(false)\n            return\n        }\n        const field='name' //field variable\n\n       \n        if (val.length>=3 ){\n            ClientServ.find({query: {\n                $or:[\n                    { firstname: {\n                        $regex:val,\n                        $options:'i' \n                    }},\n                    { lastname: {\n                        $regex:val,\n                        $options:'i' \n                    }},\n                    { middlename: {\n                        $regex:val,\n                        $options:'i' \n                    }},\n                    { phone: {\n                        $regex:val,\n                        $options:'i' \n                    }},\n                    { clientTags: {\n                        $regex:val,\n                        $options:'i' \n                    }},\n                    { mrn: {\n                        $regex:val,\n                        $options:'i' \n                    }},\n                    { specificDetails: {\n                        $regex:val,\n                        $options:'i' \n                    }},\n                ],\n              \n                 facility: user.currentEmployee.facilityDetail._id,\n                 //storeId: state.StoreModule.selectedStore._id,\n                 $limit:10,\n                 $sort: {\n                     createdAt: -1\n                   }\n                     }}).then((res)=>{\n              console.log(\"product  fetched successfully\") \n              console.log(res.data) \n                setFacilities(res.data)\n                 setSearchMessage(\" product  fetched successfully\")\n                 setShowPanel(true)\n             })\n             .catch((err)=>{\n                toast({\n                    message: 'Error creating ProductEntry ' + err,\n                    type: 'is-danger',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  })\n             })\n         }\n        else{\n            console.log(\"less than 3 \")\n            console.log(val)\n            setShowPanel(false)\n            await setFacilities([])\n            console.log(facilities)\n        }\n    }\n\n    const handleAddproduct =()=>{\n        setProductModal(true) \n    }\n    const handlecloseModal =()=>{\n        setProductModal(false)\n        handleSearch(val)\n    }\n    useEffect(() => {\n       if (clear){\n           console.log(\"success has changed\",clear)\n           setSimpa(\"\")\n       }\n        return () => {\n            \n        }\n    }, [clear] )\n    return (\n        <div>\n            <div className=\"field\">\n                <div className=\"control has-icons-left  \">\n                    <div className={`dropdown ${showPanel?\"is-active\":\"\"}`} style={{width:\"100%\"}}>\n                        <div className=\"dropdown-trigger\" style={{width:\"100%\"}}>\n                            <DebounceInput className=\"input is-small  is-expanded mb-0\" \n                                type=\"text\" placeholder=\"Search for Client\"\n                                value={simpa}\n                                minLength={3}\n                                debounceTimeout={400}\n                                onBlur={(e)=>handleBlur(e)}\n                                onChange={(e)=>handleSearch(e.target.value)}\n                                inputRef={inputEl}\n                                  />\n                            <span className=\"icon is-small is-left\">\n                                <i className=\"fas fa-search\"></i>\n                            </span>\n                        </div>\n                        <div className=\"dropdown-menu expanded\" style={{width:\"100%\"}}>\n                            <div className=\"dropdown-content\">\n                          { facilities.length>0?\"\":<div className=\"dropdown-item\" /* onClick={handleAddproduct} */> <span> {val} is not yet your client</span> </div>}\n\n                              {facilities.map((facility, i)=>(\n                                    \n                                    <div className=\"dropdown-item\" key={facility._id} onClick={()=>handleRow(facility)}>\n                                        \n                                        <div><span>{facility.firstname}</span>\n                                        <span className=\"padleft\">{facility.middlename}</span>\n                                        <span className=\"padleft\">{facility.lastname}</span>\n                                        <span className=\"padleft\"> {formatDistanceToNowStrict(new Date(facility.dob))}</span>\n                                        <span className=\"padleft\">{facility.gender}</span>\n                                        <span className=\"padleft\">{facility.profession}</span>\n                                        <span className=\"padleft\">{facility.phone}</span>\n                                        <span className=\"padleft\">{facility.email}</span>\n                                        </div>\n                                       \n                                    </div>\n                                    \n                                    ))}\n                                    \n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div className={`modal ${productModal?\"is-active\":\"\"}` }>\n                                    <div className=\"modal-background\"></div>\n                                    <div className=\"modal-card\">\n                                        <header className=\"modal-card-head\">\n                                        <p className=\"modal-card-title\">Choose Store</p>\n                                        <button className=\"delete\" aria-label=\"close\"  onClick={handlecloseModal}></button>\n                                        </header>\n                                        <section className=\"modal-card-body\">\n                                        {/* <StoreList standalone=\"true\" /> */}\n                                        {/* <ProductCreate /> */}\n                                        </section>\n                                        {/* <footer className=\"modal-card-foot\">\n                                        <button className=\"button is-success\">Save changes</button>\n                                        <button className=\"button\">Cancel</button>\n                                        </footer> */}\n                                    </div>\n                                </div>       \n        </div>\n    )\n}"]},"metadata":{},"sourceType":"module"}