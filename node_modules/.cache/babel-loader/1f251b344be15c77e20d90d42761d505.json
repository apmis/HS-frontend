{"ast":null,"code":"import _defineProperty from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import _objectSpread from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _toConsumableArray from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _asyncToGenerator from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _slicedToArray from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";/* eslint-disable */import React,{useState,useContext,useEffect,useRef}from'react';import client from'../../feathers';import{DebounceInput}from'react-debounce-input';import{useForm}from\"react-hook-form\";//import {useHistory} from 'react-router-dom'\nimport{UserContext,ObjectContext}from'../../context';import{toast}from'bulma-toast';import{FacilitySearch}from'../helpers/FacilitySearch';import CategorySearch from\"../helpers/CategorySearch\";import ServiceSearch2 from'../helpers/ServiceSearch';import{OrgList}from'./OrgClientList';import{Accordion,AccordionItem,AccordionItemHeading,AccordionItemState,AccordionItemButton,AccordionItemPanel}from'react-accessible-accordion';// Demo styles, see 'Styles' section below for some notes on use.\nimport'react-accessible-accordion/dist/fancy-example.css';import{StoreModify}from'../inventory/Store';// eslint-disable-next-line\nvar searchfacility={};export default function ManagedServices(){var _useContext=useContext(ObjectContext),state=_useContext.state;//,setState\n// eslint-disable-next-line\nvar _useState=useState(),_useState2=_slicedToArray(_useState,2),selectedServices=_useState2[0],setSelectedServices=_useState2[1];//const [showState,setShowState]=useState() //create|modify|detail\nreturn/*#__PURE__*/_jsx(\"section\",{className:\"section remPadTop\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"columns \",children:[/*#__PURE__*/_jsx(\"div\",{className:\"column is-6 \",children:/*#__PURE__*/_jsx(ManagedServicesList,{})}),/*#__PURE__*/_jsx(\"div\",{className:\"column is-6 \",children:state.ServicesModule.show==='create'&&/*#__PURE__*/_jsx(ManagedServicesCreate,{})})]})});}export function ManagedServicesCreate(){var _useForm=useForm(),register=_useForm.register,handleSubmit=_useForm.handleSubmit,setValue=_useForm.setValue;//, watch, errors, reset \nvar _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),categoryname=_useState4[0],setCategoryName=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),success=_useState6[0],setSuccess=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),success2=_useState8[0],setSuccess2=_useState8[1];var _useState9=useState(\"Cash\"),_useState10=_slicedToArray(_useState9,2),cash=_useState10[0],setCash=_useState10[1];// eslint-disable-next-line\nvar _useState11=useState(),_useState12=_slicedToArray(_useState11,2),facility=_useState12[0],setFacility=_useState12[1];var _useState13=useState([]),_useState14=_slicedToArray(_useState13,2),providerBand=_useState14[0],setProviderBand=_useState14[1];var _useState15=useState([]),_useState16=_slicedToArray(_useState15,2),benefittingPlans1=_useState16[0],setBenefittingPlans1=_useState16[1];var ServicesServ=client.service('billing');var BandsServ=client.service('bands');//const history = useHistory()\nvar _useContext2=useContext(UserContext),user=_useContext2.user;//,setUser\n// eslint-disable-next-line\nvar _useState17=useState(\"\"),_useState18=_slicedToArray(_useState17,2),facilityId=_useState18[0],setFacilityId=_useState18[1];var _useState19=useState(\"\"),_useState20=_slicedToArray(_useState19,2),source=_useState20[0],setSource=_useState20[1];var _useState21=useState(false),_useState22=_slicedToArray(_useState21,2),panel=_useState22[0],setPanel=_useState22[1];var _useState23=useState(\"\"),_useState24=_slicedToArray(_useState23,2),name=_useState24[0],setName=_useState24[1];var _useState25=useState([]),_useState26=_slicedToArray(_useState25,2),benefittingplans=_useState26[0],setBenefittingPlans=_useState26[1];var _useState27=useState(),_useState28=_slicedToArray(_useState27,2),quantity=_useState28[0],setQuantity=_useState28[1];var _useState29=useState(\"\"),_useState30=_slicedToArray(_useState29,2),costprice=_useState30[0],setCostprice=_useState30[1];var _useState31=useState(\"\"),_useState32=_slicedToArray(_useState31,2),orgType=_useState32[0],setOrgType=_useState32[1];var _useState33=useState(\"\"),_useState34=_slicedToArray(_useState33,2),comments=_useState34[0],setComments=_useState34[1];var _useState35=useState([]),_useState36=_slicedToArray(_useState35,2),productItem=_useState36[0],setProductItem=_useState36[1];var _useState37=useState(\"\"),_useState38=_slicedToArray(_useState37,2),plan=_useState38[0],setPlan=_useState38[1];var _useState39=useState(\"\"),_useState40=_slicedToArray(_useState39,2),service=_useState40[0],setService=_useState40[1];var _useState41=useState(\"\"),_useState42=_slicedToArray(_useState41,2),currentUser=_useState42[0],setCurrentUser=_useState42[1];var _useState43=useState([]),_useState44=_slicedToArray(_useState43,2),panelList=_useState44[0],setPanelList=_useState44[1];var _useState45=useState(false),_useState46=_slicedToArray(_useState45,2),successService=_useState46[0],setSuccessService=_useState46[1];var _useContext3=useContext(ObjectContext),state=_useContext3.state;var _useState47=useState(),_useState48=_slicedToArray(_useState47,2),chosen2=_useState48[0],setChosen2=_useState48[1];var _useState49=useState([]),_useState50=_slicedToArray(_useState49,2),modifier=_useState50[0],setModifier=_useState50[1];var _useState51=useState({}),_useState52=_slicedToArray(_useState51,2),subplan=_useState52[0],setSubplan=_useState52[1];var _useState53=useState(\"\"),_useState54=_slicedToArray(_useState53,2),band=_useState54[0],setBand=_useState54[1];var _useState55=useState({status:false,name:\"\"}),_useState56=_slicedToArray(_useState55,2),serviceUnavailable=_useState56[0],setServiceUnavailable=_useState56[1];// const bandTypeOptions =[\"band 1\", \"Band 2\"]\n// const benefittingplans1 =[\"NHIS\", \"Gold\",\"Platinium\"]\nvar _useState57=useState(false),_useState58=_slicedToArray(_useState57,2),checked=_useState58[0],setChecked=_useState58[1];var handleChange=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e,i,c){var newPlan,planx;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:c.checked=!c.checked;newPlan={name:c.name,checked:false};// console.log(c.checked)\nif(!c.checked){_context.next=8;break;}//add to benefiting plan\nplanx={name:c.name,serviceClass:\"\",feeforService:true,capitation:false,reqAuthCode:false,reqCopay:false,copay:\"\"};//   console.log(planx)\n_context.next=6;return setBenefittingPlans(function(prev){return[].concat(_toConsumableArray(prev),[planx]);});case 6:_context.next=10;break;case 8:_context.next=10;return setBenefittingPlans(function(prevstate){return prevstate.filter(function(el){return el.name!==c.name;});});case 10:case\"end\":return _context.stop();}}},_callee);}));return function handleChange(_x,_x2,_x3){return _ref.apply(this,arguments);};}();var updateObjectInArray=function updateObjectInArray(array,child){array.map(function(item,index){if(item.name!==child.name){// This isn't the item we care about - keep it as-is\nreturn item;}// Otherwise, this is the one we want - return an updated value\n//console.log(child)\nreturn _objectSpread({},child);});return array;};var handleChangeMode=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){var existingBand;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:existingBand=productItem.filter(function(el){return el.band===e.target.value;});if(!(!existingBand.length>0)){_context2.next=6;break;}_context2.next=4;return setBand(e.target.value);case 4:_context2.next=8;break;case 6:toast({message:\" This band already exist! Please choose another band \",type:'is-danger',dismissible:true,pauseOnHover:true});return _context2.abrupt(\"return\");case 8:case\"end\":return _context2.stop();}}},_callee2);}));return function handleChangeMode(_x4){return _ref2.apply(this,arguments);};}();var handleServType=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(e,i,c){var currentPlan,updatedplan;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:currentPlan=benefittingplans.filter(function(el){return el.name==c.name;})[0];currentPlan.serviceClass=e.target.value;currentPlan.capitation=e.target.value===\"Capitation\"?true:false;currentPlan.feeforService=e.target.value===\"Fee for Service\"?true:false;updatedplan=updateObjectInArray(benefittingplans,currentPlan);_context3.next=7;return setBenefittingPlans(updatedplan);case 7:case\"end\":return _context3.stop();}}},_callee3);}));return function handleServType(_x5,_x6,_x7){return _ref3.apply(this,arguments);};}();var handleCopay=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(e,i,c){var currentPlan,updatedplan;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:currentPlan=benefittingplans.filter(function(el){return el.name==c.name;})[0];currentPlan.copay=e.target.value;currentPlan.reqCopay=currentPlan.copay===\"\"?false:true;updatedplan=updateObjectInArray(benefittingplans,currentPlan);_context4.next=6;return setBenefittingPlans(updatedplan);case 6:case\"end\":return _context4.stop();}}},_callee4);}));return function handleCopay(_x8,_x9,_x10){return _ref4.apply(this,arguments);};}();var handleAuthCode=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(e,i,c){var currentPlan,updatedplan;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:currentPlan=benefittingplans.filter(function(el){return el.name==c.name;})[0];currentPlan.reqAuthCode=e.target.checked;updatedplan=updateObjectInArray(benefittingplans,currentPlan);_context5.next=5;return setBenefittingPlans(updatedplan);case 5:case\"end\":return _context5.stop();}}},_callee5);}));return function handleAuthCode(_x11,_x12,_x13){return _ref5.apply(this,arguments);};}();useEffect(function(){return function(){};},[benefittingplans]);var _useState59=useState({productitems:[],panel:panel,source:source}),_useState60=_slicedToArray(_useState59,2),Services=_useState60[0],setServices=_useState60[1];// consider batchformat{batchno,expirydate,qtty,baseunit}\n//consider baseunoit conversions\nvar getSearchfacility=function getSearchfacility(obj){setFacilityId(obj._id);setName(obj.facilityName);setOrgType(obj.facilityType);if(!obj){// setName(\"\")\nsetOrgType(\"\");setFacilityId(\"\");setCostprice(\"\");}/*  setValue(\"facility\", obj._id,  {\n            shouldValidate: true,\n            shouldDirty: true\n        }) */};var getSearchfacility2=function getSearchfacility2(obj){setCategoryName(obj.categoryname);setChosen2(obj);if(!obj){//\"clear stuff\"\nsetCategoryName(\"\");setChosen2();}};var getSearchService=function getSearchService(obj){setService(obj);if(!obj){setService(\"\");}setSuccessService(false);};var notfound=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(obj){return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return setServiceUnavailable(obj);case 2:_context6.next=4;return setSuccessService(true);case 4:if(obj){_context6.next=7;break;}_context6.next=7;return setServiceUnavailable(\"\");case 7:case\"end\":return _context6.stop();}}},_callee6);}));return function notfound(_x14){return _ref6.apply(this,arguments);};}();useEffect(function(){setCurrentUser(user);//console.log(currentUser)\nreturn function(){};},[user]);var getBenfittingPlans=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(){var findServices;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:setBenefittingPlans1([]);if(!user.currentEmployee){_context8.next=7;break;}_context8.next=4;return ServicesServ.find({query:{facility:user.currentEmployee.facilityDetail._id,'contracts.source_org':user.currentEmployee.facilityDetail._id,'contracts.dest_org':user.currentEmployee.facilityDetail._id,category:\"Managed Care\",// storeId:state.StoreModule.selectedStore._id,\n// $limit:20,\n//   paginate:false,\n$sort:{category:1}}});case 4:findServices=_context8.sent;console.log(findServices);if(findServices.total>0){findServices.groupedOrder[0].services.forEach(/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(c){var newPlan;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:newPlan={name:c.name,checked:false};_context7.next=3;return setBenefittingPlans1(function(prev){return prev.concat(c);});case 3:case\"end\":return _context7.stop();}}},_callee7);}));return function(_x15){return _ref8.apply(this,arguments);};}());}case 7:case\"end\":return _context8.stop();}}},_callee8);}));return function getBenfittingPlans(){return _ref7.apply(this,arguments);};}();var getProviderBand=/*#__PURE__*/function(){var _ref9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(){var findServices;return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:if(!user.currentEmployee){_context9.next=6;break;}_context9.next=3;return BandsServ.find({query:{facility:user.currentEmployee.facilityDetail._id,bandType:user.currentEmployee.facilityDetail.facilityType===\"HMO\"?\"Provider\":\"Company\",// storeId:state.StoreModule.selectedStore._id,\n// $limit:20,\n//   paginate:false,\n$sort:{category:1}}});case 3:findServices=_context9.sent;_context9.next=6;return setProviderBand(findServices.data);case 6:case\"end\":return _context9.stop();}}},_callee9);}));return function getProviderBand(){return _ref9.apply(this,arguments);};}();useEffect(function(){// console.log(\"starting...\")\nsetBenefittingPlans1([]);setFacilityId(user.currentEmployee.facilityDetail._id);setName(user.currentEmployee.facilityDetail.facilityName);setOrgType(user.currentEmployee.facilityDetail.facilityType);getProviderBand();getBenfittingPlans();return function(){};},[]);var handleClickProd=/*#__PURE__*/function(){var _ref10=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee10(){var pricingInfo,productItemI,check;return _regeneratorRuntime.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:pricingInfo={band:band,costprice:costprice,benefittingplans:benefittingplans//=array of planx\n};productItemI={/* facilityId,\n            name,\n            quantity,\n            costprice, */name:service.name,categoryname:categoryname,comments:comments,pricingInfo:pricingInfo};//  if (productItem.length>0){\n//Check that fields are filled appropriately\nif(costprice){_context10.next=5;break;}toast({message:'You need to enter price ',type:'is-danger',dismissible:true,pauseOnHover:true});return _context10.abrupt(\"return\");case 5:if(!(!service.name&&!serviceUnavailable.name)){_context10.next=8;break;}toast({message:'You need to enter service name ',type:'is-danger',dismissible:true,pauseOnHover:true});return _context10.abrupt(\"return\");case 8:if(categoryname){_context10.next=11;break;}toast({message:'You need to enter category ',type:'is-danger',dismissible:true,pauseOnHover:true});return _context10.abrupt(\"return\");case 11:if(!(band===\"\")){_context10.next=14;break;}toast({message:'You need to choose provider band ',type:'is-danger',dismissible:true,pauseOnHover:true});return _context10.abrupt(\"return\");case 14:if(!(!benefittingplans.length>0)){_context10.next=17;break;}toast({message:'You need to add benefiting plan ',type:'is-danger',dismissible:true,pauseOnHover:true});return _context10.abrupt(\"return\");case 17:_context10.next=19;return handleCheck();case 19:check=_context10.sent;if(!check){_context10.next=22;break;}return _context10.abrupt(\"return\");case 22:productItemI={source_org:facilityId,source_org_name:name,dest_org:user.currentEmployee.facilityDetail._id,dest_org_name:user.currentEmployee.facilityDetail.facilityName,price:costprice,billing_type:orgType===\"HMO\"?\"HMO\":\"Company\",plans:benefittingplans,comments:comments,band:band};console.log(productItemI);_context10.next=26;return setCash(\"\");case 26:_context10.next=28;return setSuccess(false);case 28:setProductItem(function(prevProd){return prevProd.concat(productItemI);});setCostprice(\"\");setBand(\"\");setBenefittingPlans([]);setBenefittingPlans1([]);getBenfittingPlans();_context10.next=36;return setSuccess(true);case 36:case\"end\":return _context10.stop();}}},_callee10);}));return function handleClickProd(){return _ref10.apply(this,arguments);};}();var resetform=function resetform(){//setFacilityId(\"\")\nsetSource(\"\");setPanel(false);//setName(\"\")\nsetComments(\"\");setCostprice(\"\");setProductItem([]);setCategoryName(\"\");setService(\"\");setPanelList([]);setPlan(\"\");setBenefittingPlans([]);setCash(\"Cash\");setOrgType(\"\");setServiceUnavailable(\"\");setServices(\"\");};var handleClear=function handleClear(){resetform();/*  setMessage(\"Created Services successfully\") */setSuccess(true);setSuccess2(true);setSuccessService(true);toast({message:'Data entry cleared succesfully',type:'is-success',dismissible:true,pauseOnHover:true});setSuccess(false);setSuccess2(false);setSuccessService(false);setProductItem([]);setPanelList([]);};var onSubmit=/*#__PURE__*/function(){var _ref11=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee11(){var check,data;return _regeneratorRuntime.wrap(function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:_context11.next=2;return handleCheck();case 2:check=_context11.sent;if(!check){_context11.next=6;break;}console.log(check);return _context11.abrupt(\"return\");case 6:if(!(panel&&panelList.length===0)){_context11.next=9;break;}toast({message:\"Please choose services that make up panel or uncheck panel \",type:'is-danger',dismissible:true,pauseOnHover:true});return _context11.abrupt(\"return\");case 9:setSuccess(false);data={name:serviceUnavailable.status?serviceUnavailable.name:service.name,//source\ncategory:categoryname,facility:user.currentEmployee.facilityDetail._id,facilityname:user.currentEmployee.facilityDetail.facilityName,panel:panel,panelServices:panelList,contracts:productItem,createdBy:user._id};//  console.log(data)\nServicesServ.create(data).then(function(res){setSuccessService(true);//console.log(JSON.stringify(res))\nresetform();/*  setMessage(\"Created Services successfully\") */setSuccess(true);setSuccess2(true);toast({message:'Service created succesfully',type:'is-success',dismissible:true,pauseOnHover:true});setSuccess(false);setSuccess2(false);setSuccessService(false);setProductItem([]);setPanelList([]);setServiceUnavailable({status:false,name:\"\"});// setSuccessService(true)\n}).catch(function(err){toast({message:'Error creating Services '+err,type:'is-danger',dismissible:true,pauseOnHover:true});});case 12:case\"end\":return _context11.stop();}}},_callee11);}));return function onSubmit(){return _ref11.apply(this,arguments);};}();var handleBenefit=function handleBenefit(e){setBenefittingPlans(function(prevstate){return prevstate.concat(plan);});setPlan(\"\");};var handleRemove=function handleRemove(index,contract){//console.log(index)\nif(contract.billing_type===\"Cash\"){toast({message:'You cannot remove cash billing',type:'is-danger',dismissible:true,pauseOnHover:true});return;}//setProductItem(prevstate=> prevstate.splice(i,1))\nsetProductItem(function(prevstate){return prevstate.filter(function(ProductionItem,i){return i!==index;});});/*  const newProductitem = [...productItem]\n   newProductitem.splice(i,1)\n   setProductItem(newProductitem) */};var handleAddPanel=function handleAddPanel(){// setSuccessService(false) \nvar newService={serviceId:service._id,service_name:service.name,panel:service.panel};setPanelList(function(prevstate){return prevstate.concat(newService);});setSuccessService(true);newService={};setService(\"\");console.log(\"something added\");};var handleCheck=/*#__PURE__*/function(){var _ref12=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee12(){var resp;return _regeneratorRuntime.wrap(function _callee12$(_context12){while(1){switch(_context12.prev=_context12.next){case 0:if(categoryname){_context12.next=3;break;}toast({message:'Enter Category!',type:'is-danger',dismissible:true,pauseOnHover:true});return _context12.abrupt(\"return\",true);case 3:console.log(\"unavailb:\",serviceUnavailable.name);console.log(\"availb:\",service.name);_context12.next=7;return ServicesServ.find({query:{name:serviceUnavailable.name||service.name,//source\nfacility:user.currentEmployee.facilityDetail._id,category:categoryname}});case 7:resp=_context12.sent;console.log(resp);//.  \n/*then((resp)=>{\n        console.log(resp)*/if(!(resp.data.length>0)){_context12.next=14;break;}toast({message:'Service already exist. Kindly modify it ',//+ resp.data ,\ntype:'is-danger',dismissible:true,pauseOnHover:true});return _context12.abrupt(\"return\",true);case 14:return _context12.abrupt(\"return\",false);case 15:case\"end\":return _context12.stop();}}},_callee12);}));return function handleCheck(){return _ref12.apply(this,arguments);};}();return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"card card-overflow\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsx(\"p\",{className:\"card-header-title\",children:\"Create Services\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-content vscrollable remPad1 \",children:[/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field is-expanded\"/* style={ !user.stacker?{display:\"none\"}:{}} */,children:[/*#__PURE__*/_jsx(ServiceSearch,{getSearchService:getSearchService,clear:successService,notfound:notfound}),/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left \",style:{display:\"none\"},children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\"/* ref={register ({ required: true }) }  */ /* add array no   value={facilityId} name=\"facilityId\" type=\"text\" onChange={e=>setFacilityId(e.target.value)} placeholder=\"Product Id\"*/}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas  fa-map-marker-alt\"})})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"field is-expanded\"/* style={ !user.stacker?{display:\"none\"}:{}} */,children:[/*#__PURE__*/_jsx(CategorySearch,{getSearchfacility:getSearchfacility2,clear:success2}),/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left \",style:{display:\"none\"},children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\"/* ref={register ({ required: true }) } */ /* add array no */,value:categoryname,name:\"categoryname\",type:\"text\",onChange:function onChange(e){return setCategoryName(e.target.value);},placeholder:\"Category of Service\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas  fa-map-marker-alt\"})})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"field is-expanded\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left \",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",value:comments,name:\"comments\",type:\"text\",onChange:function onChange(e){return setComments(e.target.value);},placeholder:\"Comments\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas  fa-map-marker-alt\"})})]})}),/*#__PURE__*/_jsx(\"label\",{className:\"label is-small\",children:\"Add Pricing Info:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field-body\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsx(\"div\",{className:\"control\",children:/*#__PURE__*/_jsx(\"div\",{className:\"select is-small \",children:/*#__PURE__*/_jsxs(\"select\",{name:\"bandType\",value:band,onChange:function onChange(e){return handleChangeMode(e);},className:\"selectadd\",children:[/*#__PURE__*/_jsxs(\"option\",{value:\"\",children:[user.currentEmployee.facilityDetail.facilityType===\"HMO\"?\"Choose Provider Band\":\"Choose Company Band\",\"  \"]}),providerBand.map(function(option,i){return/*#__PURE__*/_jsxs(\"option\",{value:option.name,children:[\" \",option.name]},i);})]})})})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\"/* ref={register({ required: true })} */,name:\"costprice\",value:costprice,type:\"text\",onChange:function onChange(e){return setCostprice(e.target.value);},placeholder:\"Price\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon naira is-left\",children:/*#__PURE__*/_jsx(\"b\",{children:\"\\u20A6\"})})]})})]})}),/*#__PURE__*/_jsx(\"label\",{className:\"label is-small\",children:\"Benefitting Plans:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsx(\"div\",{className:\"field-body\",children:/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsx(\"div\",{className:\"field \",children:benefittingPlans1.map(function(c,i){return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"pb-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field-body\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"field mr-2 \",children:/*#__PURE__*/_jsxs(\"label\",{className:\"label is-small mr-2\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"checkbox is-small \",type:\"checkbox\",value:i,name:\"selectedPlans +\".concat(i)/*  checked={c.checked}  */,onChange:function onChange(e){return handleChange(e,i,c);}}),c.name+\" \"]},i)}),/*#__PURE__*/_jsx(\"div\",{className:\"field  mr-2 \".concat(c.checked?\"\":\"is-hidden\"),children:/*#__PURE__*/_jsx(\"input\",{className:\"input smallerinput is-small is-pulled-right \",name:\"copay +\".concat(i),value:benefittingplans.filter(function(el){return el.name==c.name;}).copay,type:\"text\",onChange:function onChange(e){return handleCopay(e,i,c);},placeholder:\"Co-pay Amount\"})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"field pl-3 \".concat(c.checked?\"\":\"is-hidden\"),children:[/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field-body mt-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"field mr-2\",children:/*#__PURE__*/_jsx(\"p\",{className:\"control has-icons-left has-icons-right\",children:/*#__PURE__*/_jsxs(\"label\",{className:\"radio label is-small\",children:[/*#__PURE__*/_jsx(\"input\",{className:\" is-small\",value:\"Capitation\",name:\"servtype +\".concat(i),type:\"radio\",onChange:function onChange(e){return handleServType(e,i,c);}}),/*#__PURE__*/_jsx(\"span\",{children:\"Capitation\"})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"field mr-2\",children:/*#__PURE__*/_jsx(\"p\",{className:\"control has-icons-left has-icons-right\",children:/*#__PURE__*/_jsxs(\"label\",{className:\"radio label is-small\",children:[/*#__PURE__*/_jsx(\"input\",{className:\" is-small\",name:\"servtype +\".concat(i),value:\"Fee for Service\",type:\"radio\",onChange:function onChange(e){return handleServType(e,i,c);}}),/*#__PURE__*/_jsx(\"span\",{children:\"Fee for Service\"})]})})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field mr-2\",children:/*#__PURE__*/_jsx(\"p\",{className:\"control has-icons-left has-icons-right\",children:/*#__PURE__*/_jsxs(\"label\",{className:\"label is-small\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"checkbox is-small\",name:\"authCode +\".concat(i),type:\"checkbox\",onChange:function onChange(e){return handleAuthCode(e,i,c);}}),/*#__PURE__*/_jsx(\"span\",{children:\"Requires Pre-Authorization Code\"})]})})})]})]})});})})})})}),/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"field pb-5 \",children:/*#__PURE__*/_jsx(\"p\",{className:\"control\",children:/*#__PURE__*/_jsx(\"button\",{className:\"button is-info is-small  is-pulled-left selectadd \",children:/*#__PURE__*/_jsx(\"span\",{className:\"is-small\",onClick:handleClickProd,children:\"Add\"})})})})}),productItem.length>0&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Service Parameters:\"}),/*#__PURE__*/_jsxs(\"table\",{className:\"table is-striped  is-hoverable is-fullwidth is-scrollable \",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Serial No\",children:\"S/No\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Source Organization\",children:\"Organization\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Band\",children:\"Band\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Price\",children:\"Amount\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Billing Type\",children:\"Billing Type\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Benefitting Plans\",children:\"Plans\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Actions\",children:\"Actions\"})})]})}),/*#__PURE__*/_jsx(\"tfoot\",{}),/*#__PURE__*/_jsx(\"tbody\",{children:productItem.map(function(Services,i){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:i+1}),/*#__PURE__*/_jsx(\"td\",{children:Services.source_org_name}),/*#__PURE__*/_jsx(\"td\",{children:Services.band}),/*#__PURE__*/_jsx(\"th\",{children:Services.price}),/*#__PURE__*/_jsx(\"td\",{children:Services.billing_type}),/*#__PURE__*/_jsxs(\"td\",{children:[\"  \",Services.plans.map(function(plan,i){return/*#__PURE__*/_jsxs(\"span\",{className:\"ml-1\",children:[/*#__PURE__*/_jsx(\"b\",{children:plan.name}),\":\",plan.serviceClass,\"/\",plan.reqAuthCode.toString(),\"/\",plan.copay,\";\",/*#__PURE__*/_jsx(\"br\",{})]},i);})]}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"showAction\",onClick:function onClick(){return handleRemove(i,Services);},children:\"x\"})})]},i);})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field is-grouped mt-2\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"control\",children:/*#__PURE__*/_jsx(\"button\",{className:\"button is-success is-small\",disabled:!productItem.length>0,onClick:onSubmit,children:\"Create\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"control\",children:/*#__PURE__*/_jsx(\"button\",{className:\"button is-warning is-small\",type:\"reset\",onClick:handleClear,children:\"Cancel\"})})]})]})]})]})});}export function ManagedServicesList(){// const { register, handleSubmit, watch, errors } = useForm();\n// eslint-disable-next-line\nvar _useState61=useState(false),_useState62=_slicedToArray(_useState61,2),error=_useState62[0],setError=_useState62[1];// eslint-disable-next-line\nvar _useState63=useState(false),_useState64=_slicedToArray(_useState63,2),success=_useState64[0],setSuccess=_useState64[1];// eslint-disable-next-line\nvar _useState65=useState(\"\"),_useState66=_slicedToArray(_useState65,2),message=_useState66[0],setMessage=_useState66[1];var ServicesServ=client.service('billing');//const history = useHistory()\n// const {user,setUser} = useContext(UserContext)\nvar _useState67=useState([]),_useState68=_slicedToArray(_useState67,2),facilities=_useState68[0],setFacilities=_useState68[1];// eslint-disable-next-line\nvar _useState69=useState(),_useState70=_slicedToArray(_useState69,2),selectedServices=_useState70[0],setSelectedServices=_useState70[1];//\n// eslint-disable-next-line\nvar _useContext4=useContext(ObjectContext),state=_useContext4.state,setState=_useContext4.setState;// eslint-disable-next-line\nvar _useContext5=useContext(UserContext),user=_useContext5.user,setUser=_useContext5.setUser;var handleCreateNew=/*#__PURE__*/function(){var _ref13=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee13(){var newServicesModule;return _regeneratorRuntime.wrap(function _callee13$(_context13){while(1){switch(_context13.prev=_context13.next){case 0:newServicesModule={selectedServices:{},show:'create'};_context13.next=3;return setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{ServicesModule:newServicesModule});});case 3:case\"end\":return _context13.stop();}}},_callee13);}));return function handleCreateNew(){return _ref13.apply(this,arguments);};}();var handleRow=/*#__PURE__*/function(){var _ref14=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee14(Service){var newServicesModule;return _regeneratorRuntime.wrap(function _callee14$(_context14){while(1){switch(_context14.prev=_context14.next){case 0:_context14.next=2;return setSelectedServices(Service);case 2:newServicesModule={selectedServices:Service,show:'detail'};_context14.next=5;return setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{ServicesModule:newServicesModule});});case 5:case\"end\":return _context14.stop();}}},_callee14);}));return function handleRow(_x16){return _ref14.apply(this,arguments);};}();var handleSearch=function handleSearch(val){var _query;var field='name';console.log(val);ServicesServ.find({query:(_query={},_defineProperty(_query,field,{$regex:val,$options:'i'}),_defineProperty(_query,\"facility\",user.currentEmployee.facilityDetail._id),_defineProperty(_query,\"$limit\",20),_defineProperty(_query,\"$sort\",{createdAt:-1}),_query)}).then(function(res){console.log(res);setFacilities(res.groupedOrder);}).catch(function(err){console.log(err);toast({message:'Error during search '+err,type:'is-danger',dismissible:true,pauseOnHover:true});});};var getFacilities=/*#__PURE__*/function(){var _ref15=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee15(){var findServices;return _regeneratorRuntime.wrap(function _callee15$(_context15){while(1){switch(_context15.prev=_context15.next){case 0:if(!user.currentEmployee){_context15.next=9;break;}_context15.next=3;return ServicesServ.find({query:{facility:user.currentEmployee.facilityDetail._id,'contracts.source_org':state.facilityModule.selectedFacility._id,// storeId:state.StoreModule.selectedStore._id,\n// $limit:20,\n//   paginate:false,\n$sort:{category:1}}});case 3:findServices=_context15.sent;console.log(findServices);_context15.next=7;return setFacilities(findServices.groupedOrder);case 7:_context15.next=12;break;case 9:if(!user.stacker){_context15.next=12;break;}toast({message:'You do not qualify to view this',type:'is-danger',dismissible:true,pauseOnHover:true});return _context15.abrupt(\"return\");case 12:case\"end\":return _context15.stop();}}},_callee15);}));return function getFacilities(){return _ref15.apply(this,arguments);};}();useEffect(function(){return function(){};},[]);useEffect(function(){getFacilities();ServicesServ.on('created',function(obj){return getFacilities();});ServicesServ.on('updated',function(obj){return getFacilities();});ServicesServ.on('patched',function(obj){return getFacilities();});ServicesServ.on('removed',function(obj){return getFacilities();});return function(){};},[]);useEffect(function(){getFacilities();return function(){};},[state.facilityModule.selectedFacility]);/*    useEffect(() => {\n                getFacilities()\n                console.log(\"store changed\")\n                return () => {\n                   \n                }\n            }, [state.StoreModule.selectedStore]) */ //todo: pagination and vertical scroll bar\nreturn/*#__PURE__*/_jsx(_Fragment,{children:state.StoreModule.selectedStore?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"level\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"level-left\",children:/*#__PURE__*/_jsx(\"div\",{className:\"level-item\",children:/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left  \",children:[/*#__PURE__*/_jsx(DebounceInput,{className:\"input is-small \",type:\"text\",placeholder:\"Search Services\",minLength:3,debounceTimeout:400,onChange:function onChange(e){return handleSearch(e.target.value);}}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-search\"})})]})})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"level-item\",children:[\" \",/*#__PURE__*/_jsx(\"span\",{className:\"is-size-6 has-text-weight-medium\",children:\"Services \"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"level-right\",children:/*#__PURE__*/_jsx(\"div\",{className:\"level-item\",children:/*#__PURE__*/_jsx(\"div\",{className:\"level-item\",children:/*#__PURE__*/_jsx(\"div\",{className:\"button is-success is-small\",onClick:handleCreateNew,children:\"New\"})})})})]}),/*#__PURE__*/_jsx(\"div\",{className:\" pullup \",children:/*#__PURE__*/_jsx(\"div\",{className:\" is-fullwidth vscrollable pr-1\",children:/*#__PURE__*/_jsx(Accordion,{allowZeroExpanded:true,children:facilities.map(function(Clinic,i){return/*#__PURE__*/_jsxs(AccordionItem,{children:[/*#__PURE__*/_jsx(AccordionItemHeading,{children:/*#__PURE__*/_jsx(AccordionItemButton,{children:/*#__PURE__*/_jsxs(\"strong\",{children:[\" \",i+1,\" \",Clinic.categoryname,\" \",\" \"]})})}),/*#__PURE__*/_jsx(AccordionItemPanel,{children:/*#__PURE__*/_jsxs(\"table\",{className:\"table is-striped is-narrow is-hoverable is-fullwidth is-scrollable \",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Serial No\",children:\"S/No\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Date\",children:\"Name\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Type\",children:\"Panel?\"})}),/*#__PURE__*/_jsx(\"th\",{children:\"Cash Price\"})]})}),/*#__PURE__*/_jsx(\"tfoot\",{}),/*#__PURE__*/_jsx(\"tbody\",{children:Clinic.services.map(function(Services,i){return/*#__PURE__*/_jsxs(\"tr\",{onClick:function onClick(){return handleRow(Services);},children:[/*#__PURE__*/_jsx(\"th\",{children:i+1}),/*#__PURE__*/_jsx(\"td\",{children:Services.name}),/*#__PURE__*/_jsx(\"th\",{children:Services.panel?\"Yes\":\"No\"}),/*#__PURE__*/_jsx(\"td\",{children:Services.contracts.map(function(el,i){return el.source_org===el.dest_org&&/*#__PURE__*/_jsx(\"p\",{children:el.price},i);})})]},Services._id);})})]})})]},Clinic.categoryname);})})})})]}):/*#__PURE__*/_jsx(\"div\",{children:\"loading... Choose a Store\"})});}export function ManagedServicesDetail(){//const { register, handleSubmit, watch, setValue } = useForm(); //errors,\n// eslint-disable-next-line\nvar _useState71=useState(false),_useState72=_slicedToArray(_useState71,2),error=_useState72[0],setError=_useState72[1];//, \n//const [success, setSuccess] =useState(false)\n// eslint-disable-next-line\nvar _useState73=useState(\"\"),_useState74=_slicedToArray(_useState73,2),message=_useState74[0],setMessage=_useState74[1];//,\n//const ServicesServ=client.service('/Services')\n//const history = useHistory()\n//const {user,setUser} = useContext(UserContext)\nvar _useContext6=useContext(ObjectContext),state=_useContext6.state,setState=_useContext6.setState;var Services=state.ServicesModule.selectedServices;/* console.log(Services) */var handleEdit=/*#__PURE__*/function(){var _ref16=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee16(){var newServicesModule;return _regeneratorRuntime.wrap(function _callee16$(_context16){while(1){switch(_context16.prev=_context16.next){case 0:newServicesModule={selectedServices:Services,show:'modify'};_context16.next=3;return setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{ServicesModule:newServicesModule});});case 3:case\"end\":return _context16.stop();}}},_callee16);}));return function handleEdit(){return _ref16.apply(this,arguments);};}();return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"card \",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsx(\"p\",{className:\"card-header-title\",children:\"Services Details\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-content vscrollable\",children:[/*#__PURE__*/_jsx(\"table\",{children:/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"label\",{className:\"label is-small\",children:[\" \",/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-hospital\"})}),\"Category\"]})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"span\",{className:\"is-size-7 padleft\",name:\"name\",children:[\" \",Services.category,\" \"]})}),/*#__PURE__*/_jsx(\"td\",{}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"label\",{className:\"label is-small padleft\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-map-signs\"})}),\"Name:\"]})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"span\",{className:\"is-size-7 padleft\",name:\"ServicesType\",children:[Services.name,\" \"]})})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"label\",{className:\"label is-small\",children:[\" \",/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-hospital\"})}),\"Panel:\"]})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"span\",{className:\"is-size-7 padleft\",name:\"name\",children:[\" \",Services.panel?\"Yes\":\"No\",\" \"]})}),/*#__PURE__*/_jsx(\"td\",{}),/*#__PURE__*/_jsxs(\"td\",{children:[\" \",Services.panel&&/*#__PURE__*/_jsxs(\"label\",{className:\"label is-small padleft\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-map-signs\"})}),\"Panel Services:\"]})]}),/*#__PURE__*/_jsx(\"td\",{children:Services.panel&&/*#__PURE__*/_jsxs(\"p\",{className:\"is-size-7 padleft\",name:\"ServicesType\",children:[Services.panelServices.length>0&&/*#__PURE__*/_jsx(\"p\",{children:Services.panelServices.map(function(plan,i){return/*#__PURE__*/_jsxs(\"span\",{className:\"ml-1\",children:[plan.name,\";\"]},i);})}),\"     \"]})})]})]})}),/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 mt-2\",children:\"Pricing Info:\"}),/*#__PURE__*/_jsxs(\"table\",{className:\"table is-striped  is-hoverable is-fullwidth is-scrollable \",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Serial No\",children:\"S/No\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Source Organization\",children:\"Organization\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Price\",children:\"Amount\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Billing Type\",children:\"Billing Type\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Benefitting Plans\",children:\"Plans\"})})]})}),/*#__PURE__*/_jsx(\"tfoot\",{}),/*#__PURE__*/_jsx(\"tbody\",{children:Services.contracts.map(function(Services,i){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:i+1}),/*#__PURE__*/_jsx(\"td\",{children:Services.source_org_name}),/*#__PURE__*/_jsx(\"th\",{children:Services.price}),/*#__PURE__*/_jsx(\"td\",{children:Services.billing_type}),/*#__PURE__*/_jsxs(\"td\",{children:[\" \",Services.plans&&Services.plans.map(function(plan,i){return/*#__PURE__*/_jsxs(\"span\",{className:\"ml-1\",children:[plan,\";\"]},i);})]})]},i);})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"field mt-2\",children:/*#__PURE__*/_jsx(\"p\",{className:\"control\",children:/*#__PURE__*/_jsx(\"button\",{className:\"button is-success is-small\",onClick:handleEdit,children:\"Edit\"})})})]})]})});}export function ManagedServicesModify(){// const { register, handleSubmit, setValue,reset, errors } = useForm(); //watch, errors,\n// eslint-disable-next-line \nvar _useState75=useState(false),_useState76=_slicedToArray(_useState75,2),error=_useState76[0],setError=_useState76[1];// eslint-disable-next-line \nvar _useState77=useState(false),_useState78=_slicedToArray(_useState77,2),success=_useState78[0],setSuccess=_useState78[1];var _useState79=useState(false),_useState80=_slicedToArray(_useState79,2),success2=_useState80[0],setSuccess2=_useState80[1];// eslint-disable-next-line \nvar _useState81=useState(\"\"),_useState82=_slicedToArray(_useState81,2),message=_useState82[0],setMessage=_useState82[1];// eslint-disable-next-line \nvar ServicesServ=client.service('billing');//const history = useHistory()\n// eslint-disable-next-line\nvar _useContext7=useContext(UserContext),user=_useContext7.user;var _useContext8=useContext(ObjectContext),state=_useContext8.state,setState=_useContext8.setState;var _useState83=useState(\"\"),_useState84=_slicedToArray(_useState83,2),facilityId=_useState84[0],setFacilityId=_useState84[1];var _useState85=useState(\"\"),_useState86=_slicedToArray(_useState85,2),source=_useState86[0],setSource=_useState86[1];var _useState87=useState(false),_useState88=_slicedToArray(_useState87,2),panel=_useState88[0],setPanel=_useState88[1];var _useState89=useState(\"\"),_useState90=_slicedToArray(_useState89,2),name=_useState90[0],setName=_useState90[1];var _useState91=useState([]),_useState92=_slicedToArray(_useState91,2),benefittingplans=_useState92[0],setBenefittingPlans=_useState92[1];var _useState93=useState(),_useState94=_slicedToArray(_useState93,2),quantity=_useState94[0],setQuantity=_useState94[1];var _useState95=useState(\"\"),_useState96=_slicedToArray(_useState95,2),costprice=_useState96[0],setCostprice=_useState96[1];var _useState97=useState(\"\"),_useState98=_slicedToArray(_useState97,2),orgType=_useState98[0],setOrgType=_useState98[1];var _useState99=useState([]),_useState100=_slicedToArray(_useState99,2),productItem=_useState100[0],setProductItem=_useState100[1];var _useState101=useState(\"\"),_useState102=_slicedToArray(_useState101,2),plan=_useState102[0],setPlan=_useState102[1];var _useState103=useState(\"\"),_useState104=_slicedToArray(_useState103,2),service=_useState104[0],setService=_useState104[1];var _useState105=useState(\"\"),_useState106=_slicedToArray(_useState105,2),currentUser=_useState106[0],setCurrentUser=_useState106[1];var _useState107=useState([]),_useState108=_slicedToArray(_useState107,2),panelList=_useState108[0],setPanelList=_useState108[1];var _useState109=useState(false),_useState110=_slicedToArray(_useState109,2),successService=_useState110[0],setSuccessService=_useState110[1];//  const {state}=useContext(ObjectContext)\nvar _useState111=useState(\"Cash\"),_useState112=_slicedToArray(_useState111,2),cash=_useState112[0],setCash=_useState112[1];var _useState113=useState(\"\"),_useState114=_slicedToArray(_useState113,2),categoryname=_useState114[0],setCategoryName=_useState114[1];var _useState115=useState(),_useState116=_slicedToArray(_useState115,2),facility=_useState116[0],setFacility=_useState116[1];var _useState117=useState(\"\"),_useState118=_slicedToArray(_useState117,2),modcon=_useState118[0],setModCon=_useState118[1];var _useState119=useState(false),_useState120=_slicedToArray(_useState119,2),yam=_useState120[0],setYam=_useState120[1];var _useState121=useState(\"\"),_useState122=_slicedToArray(_useState121,2),pos=_useState122[0],setPos=_useState122[1];var _useState123=useState(),_useState124=_slicedToArray(_useState123,2),chosen2=_useState124[0],setChosen2=_useState124[1];var Services=state.ServicesModule.selectedServices;var productItemI;/*  useEffect(() => {\n            /* setValue(\"name\", Services.name,  {\n                shouldValidate: true,\n                shouldDirty: true\n            })\n            setValue(\"category\", Services.category,  {\n                shouldValidate: true,\n                shouldDirty: true\n            })\n         setValue(\"panel\", Services.panel,  {\n                shouldValidate: true,\n                shouldDirty: true\n            }) */ /*  setValue(\"phone\", Services.phone,  {\n                shouldValidate: true,\n                shouldDirty: true\n            })\n            setValue(\"email\", Services.email,  {\n                shouldValidate: true,\n                shouldDirty: true\n            })\n              setValue(\"department\", Services.department,  {\n                shouldValidate: true,\n                shouldDirty: true\n            })\n            setValue(\"deptunit\", Services.deptunit,  {\n                shouldValidate: true,\n                shouldDirty: true\n            }) */ /*   setValue(\"ServicesCategory\", Services.ServicesCategory,  {\n                shouldValidate: true,\n                shouldDirty: true\n            }) */ /*  \n            return () => {\n                \n            }\n        })\n */useEffect(function(){setFacilityId(modcon.source_org);setName(modcon.source_org_name);setCostprice(modcon.price);setOrgType(modcon.billing_type);setBenefittingPlans(modcon.plans);setYam(true);return function(){};},[modcon]);useEffect(function(){//Services\nsetFacilityId(\"\");setSource(Services.name);setPanel(Services.panel);setName(\"\");setCostprice(\"\");setProductItem(Services.contracts);setCategoryName(Services.category);setService(\"\");setPanelList(Services.panelServices);setPlan(\"\");setBenefittingPlans([]);setCash(\"\");setOrgType(\"\");return function(){};},[]);var handleCheck=/*#__PURE__*/function(){var _ref17=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee17(){return _regeneratorRuntime.wrap(function _callee17$(_context17){while(1){switch(_context17.prev=_context17.next){case 0:if(categoryname){_context17.next=3;break;}toast({message:'Enter Category!',type:'is-danger',dismissible:true,pauseOnHover:true});return _context17.abrupt(\"return\",true);case 3:_context17.next=5;return ServicesServ.find({query:{name:source,facility:user.currentEmployee.facilityDetail._id,category:categoryname}}).then(function(resp){console.log(resp);if(resp.data.length>0){toast({message:'Service already exist. Kindly modify it ',//+ resp.data\ntype:'is-danger',dismissible:true,pauseOnHover:true});return true;}}).catch(function(err){toast({message:'Error checking services  '+err,type:'is-danger',dismissible:true,pauseOnHover:true});});case 5:case\"end\":return _context17.stop();}}},_callee17);}));return function handleCheck(){return _ref17.apply(this,arguments);};}();var handleClickProd=/*#__PURE__*/function(){var _ref18=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee18(){var newProductitem;return _regeneratorRuntime.wrap(function _callee18$(_context18){while(1){switch(_context18.prev=_context18.next){case 0:if(!(productItem.length>0)){_context18.next=6;break;}if(!(!costprice||!name)){_context18.next=4;break;}toast({message:'You need to enter organization name and price ',type:'is-danger',dismissible:true,pauseOnHover:true});return _context18.abrupt(\"return\");case 4:_context18.next=9;break;case 6:if(!(!costprice||!cash)){_context18.next=9;break;}toast({message:'You need to enter organization name and price ',type:'is-danger',dismissible:true,pauseOnHover:true});return _context18.abrupt(\"return\");case 9:if(yam){_context18.next=24;break;}if(!(cash===\"Cash\")){_context18.next=16;break;}productItemI={source_org:user.currentEmployee.facilityDetail._id,source_org_name:user.currentEmployee.facilityDetail.facilityName,dest_org:user.currentEmployee.facilityDetail._id,dest_org_name:user.currentEmployee.facilityDetail.facilityName,price:costprice,billing_type:\"Cash\",plans:benefittingplans};_context18.next=14;return setCash(\"\");case 14:_context18.next=19;break;case 16:productItemI={source_org:facilityId,source_org_name:name,dest_org:user.currentEmployee.facilityDetail._id,dest_org_name:user.currentEmployee.facilityDetail.facilityName,price:costprice,billing_type:orgType===\"HMO\"?\"HMO\":\"Company\",plans:benefittingplans};_context18.next=19;return setCash(\"\");case 19:_context18.next=21;return setSuccess(false);case 21:setProductItem(function(prevProd){return prevProd.concat(productItemI);});_context18.next=28;break;case 24:productItemI={source_org:facilityId,source_org_name:name,dest_org:user.currentEmployee.facilityDetail._id,dest_org_name:user.currentEmployee.facilityDetail.facilityName,price:costprice,billing_type:orgType,plans:benefittingplans};newProductitem=_toConsumableArray(productItem);newProductitem.splice(pos,1,productItemI);setProductItem(newProductitem);case 28:setModCon(\"\");setYam(false);setPos(\"\");setName(\"\");setOrgType(\"\");setFacilityId(\"\");setCostprice(\"\");_context18.next=37;return setSuccess(true);case 37:case\"end\":return _context18.stop();}}},_callee18);}));return function handleClickProd(){return _ref18.apply(this,arguments);};}();var resetform=function resetform(){setFacilityId(\"\");setSource(\"\");setPanel(false);setName(\"\");setCostprice(\"\");setProductItem([]);setCategoryName(\"\");setService(\"\");setPanelList([]);setPlan(\"\");setBenefittingPlans([]);setCash(\"Cash\");setOrgType(\"\");};var getSearchService=function getSearchService(obj){setService(obj);if(!obj){setService(\"\");}setSuccessService(false);};var getSearchfacility2=function getSearchfacility2(obj){setCategoryName(obj.categoryname);setChosen2(obj);if(!obj){//\"clear stuff\"\nsetCategoryName(\"\");setChosen2();}};var getSearchfacility=function getSearchfacility(obj){setFacilityId(obj._id);setName(obj.facilityName);setOrgType(obj.facilityType);if(!obj){setName(\"\");setOrgType(\"\");setFacilityId(\"\");setCostprice(\"\");}/*  setValue(\"facility\", obj._id,  {\n                shouldValidate: true,\n                shouldDirty: true\n            }) */};var handleBenefit=function handleBenefit(e){setBenefittingPlans(function(prevstate){return prevstate.concat(plan);});setPlan(\"\");};var handleRemove=function handleRemove(index,contract){//console.log(index)\nif(contract.billing_type===\"Cash\"){toast({message:'You cannot remove cash billing',type:'is-danger',dismissible:true,pauseOnHover:true});return;}//setProductItem(prevstate=> prevstate.splice(i,1))\nsetProductItem(function(prevstate){return prevstate.filter(function(ProductionItem,i){return i!==index;});});/*  const newProductitem = [...productItem]\n           newProductitem.splice(i,1)\n           setProductItem(newProductitem) */};var handleAddPanel=function handleAddPanel(){// setSuccessService(false) \nvar newService={serviceId:service._id,service_name:service.name,panel:service.panel};setPanelList(function(prevstate){return prevstate.concat(newService);});setSuccessService(true);newService={};setService(\"\");console.log(\"something added\");};var handleCancel=/*#__PURE__*/function(){var _ref19=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee19(){var newServicesModule;return _regeneratorRuntime.wrap(function _callee19$(_context19){while(1){switch(_context19.prev=_context19.next){case 0:newServicesModule={selectedServices:Services,show:'detail'};_context19.next=3;return setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{ServicesModule:newServicesModule});});case 3:case\"end\":return _context19.stop();}}},_callee19);}));return function handleCancel(){return _ref19.apply(this,arguments);};}();var changeState=function changeState(resp){var newServicesModule={selectedServices:resp,show:'detail'};setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{ServicesModule:newServicesModule});});};var handleDelete=/*#__PURE__*/function(){var _ref20=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee20(){var conf,dleteId;return _regeneratorRuntime.wrap(function _callee20$(_context20){while(1){switch(_context20.prev=_context20.next){case 0:conf=window.confirm(\"Are you sure you want to delete this data?\");dleteId=Services._id;if(conf){ServicesServ.remove(dleteId).then(function(res){//console.log(JSON.stringify(res))\nreset();/*  setMessage(\"Deleted Services successfully\")\n                setSuccess(true)\n                changeState()\n               setTimeout(() => {\n                setSuccess(false)\n                }, 200); */toast({message:'Services deleted succesfully',type:'is-success',dismissible:true,pauseOnHover:true});changeState();}).catch(function(err){// setMessage(\"Error deleting Services, probable network issues \"+ err )\n// setError(true)\ntoast({message:\"Error deleting Services, probable network issues or \"+err,type:'is-danger',dismissible:true,pauseOnHover:true});});}case 3:case\"end\":return _context20.stop();}}},_callee20);}));return function handleDelete(){return _ref20.apply(this,arguments);};}();/* ()=> setValue(\"firstName\", \"Bill\", , {\n            shouldValidate: true,\n            shouldDirty: true\n          })) */var onSubmit=function onSubmit(){// e.preventDefault();\nif(panel&&panelList.length===0){toast({message:\"Please choose services that make up panel or uncheck panel \",type:'is-danger',dismissible:true,pauseOnHover:true});return;}setSuccess(false);var data={name:source,category:categoryname,facility:user.currentEmployee.facilityDetail._id,facilityname:user.currentEmployee.facilityDetail.facilityName,panel:panel,panelServices:panelList,contracts:productItem,updatedBy:user._id};console.log(Services);console.log(data);//data.facility=Services.facility\n//console.log(data);\nServicesServ.patch(Services._id,data).then(function(res){console.log(JSON.stringify(res));// e.target.reset();\n// setMessage(\"updated Services successfully\")\ntoast({message:'Services updated succesfully',type:'is-success',dismissible:true,pauseOnHover:true});changeState(res);}).catch(function(err){//setMessage(\"Error creating Services, probable network issues \"+ err )\n// setError(true)\ntoast({message:\"Error updating Services, probable network issues or \"+err,type:'is-danger',dismissible:true,pauseOnHover:true});});};var handleModCon=/*#__PURE__*/function(){var _ref21=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee21(contract,i){return _regeneratorRuntime.wrap(function _callee21$(_context21){while(1){switch(_context21.prev=_context21.next){case 0:setModCon(contract);setYam(true);setPos(i);case 3:case\"end\":return _context21.stop();}}},_callee21);}));return function handleModCon(_x17,_x18){return _ref21.apply(this,arguments);};}();return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"card \",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsx(\"p\",{className:\"card-header-title\",children:\"Services Details-Modify\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-content vscrollable\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field-body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"field is-expanded\"/* style={ !user.stacker?{display:\"none\"}:{}} */,children:[/*#__PURE__*/_jsx(CategorySearch,{id:Services.category,getSearchfacility:getSearchfacility2,clear:success2}),/*#__PURE__*/_jsx(\"p\",{className:\"control has-icons-left \",style:{display:\"none\"},children:/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas  fa-map-marker-alt\"})})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left has-icons-right\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\"/* ref={register({ required: true })} */,value:source,name:\"source\",type:\"text\",onChange:function onChange(e){return setSource(e.target.value);},onBlur:handleCheck,placeholder:\"Name of Service\",autoComplete:\"false\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-hospital\"})})]})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field-body\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsx(\"p\",{className:\"control has-icons-left has-icons-right\",children:/*#__PURE__*/_jsxs(\"label\",{className:\"label is-small\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"checkbox is-small\"/* ref={register({ required: true })} */,checked:panel,name:\"panel\",type:\"checkbox\",onChange:function onChange(e){return setPanel(e.target.checked);}/* placeholder=\"Date\" */}),/*#__PURE__*/_jsx(\"span\",{children:\"Panel\"})]})})}),panel&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field is-expanded\"/* style={ !user.stacker?{display:\"none\"}:{}} */,children:[/*#__PURE__*/_jsx(ServiceSearch,{getSearchService:getSearchService,clear:successService}),/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left \",style:{display:\"none\"},children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\"/* ref={register ({ required: true }) }  */ /* add array no   value={facilityId} name=\"facilityId\" type=\"text\" onChange={e=>setFacilityId(e.target.value)} placeholder=\"Product Id\"*/}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas  fa-map-marker-alt\"})})]})]})}),/*#__PURE__*/_jsx(\"p\",{className:\"control\",children:/*#__PURE__*/_jsx(\"button\",{className:\"button is-info is-small  is-pulled-right selectadd\",children:/*#__PURE__*/_jsx(\"span\",{className:\"is-small\",onClick:handleAddPanel,children:\" +\"})})})]})]})}),panel&&panelList.length>0&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\" Panel Items:\"}),\" \",panelList.map(function(plan,i){return/*#__PURE__*/_jsxs(\"span\",{className:\"ml-1\",children:[plan.service_name,\";\"]},i);})]}),/*#__PURE__*/_jsx(\"label\",{className:\"label is-small\",children:\"Add Pricing Info:\"}),productItem.length>0?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field-body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"field is-expanded\"/* style={ !user.stacker?{display:\"none\"}:{}} */,children:[/*#__PURE__*/_jsx(FacilitySearch,{getSearchfacility:getSearchfacility,clear:success}),/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left \",style:{display:\"none\"},children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\"/* ref={register ({ required: true }) }  */ /* add array no */,value:facilityId,name:\"facilityId\",type:\"text\",onChange:function onChange(e){return setFacilityId(e.target.value);},placeholder:\"Product Id\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas  fa-map-marker-alt\"})})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\"/* ref={register({ required: true })} */,name:\"costprice\",value:costprice,type:\"text\",onChange:function onChange(e){return setCostprice(e.target.value);},placeholder:\"Price\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-dollar-sign\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsx(\"p\",{className:\"control\",children:/*#__PURE__*/_jsx(\"button\",{className:\"button is-info is-small  is-pulled-right selectadd\",children:/*#__PURE__*/_jsx(\"span\",{className:\"is-small\",onClick:handleClickProd,children:\"+\"})})})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field-body\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field has-addons\"/* style={{display:`${ProductEntry.show}`} }*/,children:[/*#__PURE__*/_jsx(\"div\",{className:\"control\",children:/*#__PURE__*/_jsx(\"input\",{className:\"input selectadd\",type:\"text\",name:\"plan\",value:plan,onChange:function onChange(e){return setPlan(e.target.value);},placeholder:\"Benefitting Plans\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"control\",children:/*#__PURE__*/_jsx(\"button\",{className:\"button is-info selectadd\",onClick:function onClick(e){return handleBenefit(e);},children:\"add\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field is-expanded pull-left\",children:benefittingplans&&benefittingplans.map(function(plan,i){return/*#__PURE__*/_jsxs(\"span\",{className:\"ml-1\",children:[plan,\";\"]},i);})})]})})]}):/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field-body\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\"/* ref={register({ required: true })} */,disabled:true,name:\"cash\",value:cash,type:\"text\",onChange:function onChange(e){return setCash(e.target.value);}/* placeholder=\"Cost Price\" */}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-dollar-sign\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\"/* ref={register({ required: true })} */,name:\"costprice\",value:costprice,type:\"text\",onChange:function onChange(e){return setCostprice(e.target.value);},placeholder:\"Price\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-dollar-sign\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsx(\"p\",{className:\"control\",children:/*#__PURE__*/_jsx(\"button\",{className:\"button is-info is-small  is-pulled-right selectadd\",children:/*#__PURE__*/_jsx(\"span\",{className:\"is-small\",onClick:handleClickProd,children:\"+\"})})})})]})})}),productItem.length>0&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Prices:\"}),/*#__PURE__*/_jsxs(\"table\",{className:\"table is-striped  is-hoverable is-fullwidth is-scrollable \",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Serial No\",children:\"S/No\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Source Organization\",children:\"Organization\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Price\",children:\"Amount\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Billing Type\",children:\"Billing Type\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Benefitting Plans\",children:\"Plans\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Actions\",children:\"Actions\"})})]})}),/*#__PURE__*/_jsx(\"tfoot\",{}),/*#__PURE__*/_jsx(\"tbody\",{children:productItem.map(function(Services,i){return/*#__PURE__*/_jsxs(\"tr\",{onClick:function onClick(){return handleModCon(Services,i);},children:[/*#__PURE__*/_jsx(\"th\",{children:i+1}),/*#__PURE__*/_jsx(\"td\",{children:Services.source_org_name}),/*#__PURE__*/_jsx(\"th\",{children:Services.price}),/*#__PURE__*/_jsx(\"td\",{children:Services.billing_type}),/*#__PURE__*/_jsxs(\"td\",{children:[\"  \",Services.plan&&Services.plans.map(function(plan,i){return/*#__PURE__*/_jsxs(\"span\",{className:\"ml-1\",children:[plan,\";\"]},i);})]}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"showAction\",onClick:function onClick(){return handleRemove(i,Services);},children:\"x\"})})]},i);})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field  is-grouped mt-2\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"control\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"button is-success is-small\",onClick:onSubmit,children:\"Save\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"control\",children:/*#__PURE__*/_jsx(\"button\",{className:\"button is-warning is-small\",onClick:handleCancel,children:\"Cancel\"})})]})]})]})});}export function ServiceSearch(_ref22){var getSearchService=_ref22.getSearchService,clear=_ref22.clear,notfound=_ref22.notfound;var productServ=client.service('billing');var _useState125=useState([]),_useState126=_slicedToArray(_useState125,2),facilities=_useState126[0],setFacilities=_useState126[1];// eslint-disable-next-line\nvar _useState127=useState(false),_useState128=_slicedToArray(_useState127,2),searchError=_useState128[0],setSearchError=_useState128[1];// eslint-disable-next-line\nvar _useState129=useState(false),_useState130=_slicedToArray(_useState129,2),showPanel=_useState130[0],setShowPanel=_useState130[1];// eslint-disable-next-line\nvar _useState131=useState(\"\"),_useState132=_slicedToArray(_useState131,2),searchMessage=_useState132[0],setSearchMessage=_useState132[1];// eslint-disable-next-line \nvar _useState133=useState(\"\"),_useState134=_slicedToArray(_useState133,2),simpa=_useState134[0],setSimpa=_useState134[1];// eslint-disable-next-line \nvar _useState135=useState(false),_useState136=_slicedToArray(_useState135,2),chosen=_useState136[0],setChosen=_useState136[1];// eslint-disable-next-line \nvar _useState137=useState(0),_useState138=_slicedToArray(_useState137,2),count=_useState138[0],setCount=_useState138[1];var inputEl=useRef(null);var _useState139=useState(\"\"),_useState140=_slicedToArray(_useState139,2),val=_useState140[0],setVal=_useState140[1];var _useState141=useState(false),_useState142=_slicedToArray(_useState141,2),productModal=_useState142[0],setProductModal=_useState142[1];var handleRow=/*#__PURE__*/function(){var _ref23=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee22(obj){return _regeneratorRuntime.wrap(function _callee22$(_context22){while(1){switch(_context22.prev=_context22.next){case 0:_context22.next=2;return setChosen(true);case 2:_context22.next=4;return setSimpa(obj.name);case 4:// alert(\"something is chaning\")\n//console.log(obj)\ngetSearchService(obj);// setSelectedFacility(obj)\nsetShowPanel(false);_context22.next=8;return setCount(2);case 8:case\"end\":return _context22.stop();}}},_callee22);}));return function handleRow(_x19){return _ref23.apply(this,arguments);};}();var handleBlur=/*#__PURE__*/function(){var _ref24=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee23(e){return _regeneratorRuntime.wrap(function _callee23$(_context23){while(1){switch(_context23.prev=_context23.next){case 0:if(count===2){console.log(\"stuff was not chosen\");}/*  console.log(\"blur\")\n         setShowPanel(false)\n        console.log(JSON.stringify(simpa))\n        if (simpa===\"\"){\n            console.log(facilities.length)\n            setSimpa(\"abc\")\n            setSimpa(\"\")\n            setFacilities([])\n            inputEl.current.setValue=\"\"\n        }\n        console.log(facilities.length)\n        console.log(inputEl.current) */case 1:case\"end\":return _context23.stop();}}},_callee23);}));return function handleBlur(_x20){return _ref24.apply(this,arguments);};}();var handleSearch=/*#__PURE__*/function(){var _ref25=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee24(value){var field,_query2;return _regeneratorRuntime.wrap(function _callee24$(_context24){while(1){switch(_context24.prev=_context24.next){case 0:setVal(value);if(!(value===\"\")){_context24.next=7;break;}setShowPanel(false);getSearchService(false);_context24.next=6;return setFacilities([]);case 6:return _context24.abrupt(\"return\");case 7:field='name';//field variable\nif(!(value.length>=3)){_context24.next=12;break;}productServ.find({query:(_query2={},_defineProperty(_query2,field,{$regex:value,$options:'i'}),_defineProperty(_query2,\"$limit\",10),_defineProperty(_query2,\"$sort\",{createdAt:-1}),_query2)}).then(function(res){// console.log(\"product  fetched successfully\") \n//console.log(res.data) \n//...new Set(array)\nvar uniqueArr=_toConsumableArray(new Set(res.data.map(function(data){return data.name;})));// console.log(uniqueArr)\nvar uniqueObj=[];uniqueArr.forEach(function(obj){uniqueObj.push(res.data.find(function(el){return el.name==obj;}));//  console.log(uniqueObj)\n});//console.log(uniqueObj)\nsetFacilities(uniqueObj);setSearchMessage(\" product  fetched successfully\");setShowPanel(true);}).catch(function(err){toast({message:'Error creating Services '+err,type:'is-danger',dismissible:true,pauseOnHover:true});});_context24.next=15;break;case 12:// console.log(\"less than 3 \")\n//console.log(val)\nsetShowPanel(false);_context24.next=15;return setFacilities([]);case 15:case\"end\":return _context24.stop();}}},_callee24);}));return function handleSearch(_x21){return _ref25.apply(this,arguments);};}();var handleAddproduct=function handleAddproduct(val){setProductModal(true);setShowPanel(false);notfound({status:true,name:val});};var handlecloseModal=function handlecloseModal(){setProductModal(false);handleSearch(val);};useEffect(function(){if(clear){console.log(\"success has changed\",clear);setSimpa(\"\");}return function(){};},[clear]);return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsx(\"div\",{className:\"control has-icons-left  \",children:/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown \".concat(showPanel?\"is-active\":\"\"),style:{width:\"100%\"},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown-trigger\",style:{width:\"100%\"},children:[/*#__PURE__*/_jsx(DebounceInput,{className:\"input is-small \",type:\"text\",placeholder:\"Search Services\",value:simpa,minLength:3,debounceTimeout:400,onBlur:function onBlur(e){return handleBlur(e);},onChange:function onChange(e){return handleSearch(e.target.value);},inputRef:inputEl}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-search\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"dropdown-menu\",style:{width:\"100%\"},children:/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown-content\",children:[facilities.length>0?\"\":/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown-item\",onClick:function onClick(){return handleAddproduct(val);},children:[\" \",/*#__PURE__*/_jsxs(\"span\",{children:[\"Add \",val,\" to service list\"]}),\"  \"]}),facilities.map(function(facility,i){return/*#__PURE__*/_jsx(\"div\",{className:\"dropdown-item\",onClick:function onClick(){return handleRow(facility);},children:/*#__PURE__*/_jsxs(\"span\",{children:[facility.name,\" (\",facility.category,\")\"]})},facility._id);})]})})]})})})});}","map":{"version":3,"sources":["/home/mfybaby/Documents/HealthStack2/HS-frontend/src/components/ManagedCare/ManagedServices.js"],"names":["React","useState","useContext","useEffect","useRef","client","DebounceInput","useForm","UserContext","ObjectContext","toast","FacilitySearch","CategorySearch","ServiceSearch2","OrgList","Accordion","AccordionItem","AccordionItemHeading","AccordionItemState","AccordionItemButton","AccordionItemPanel","StoreModify","searchfacility","ManagedServices","state","selectedServices","setSelectedServices","ServicesModule","show","ManagedServicesCreate","register","handleSubmit","setValue","categoryname","setCategoryName","success","setSuccess","success2","setSuccess2","cash","setCash","facility","setFacility","providerBand","setProviderBand","benefittingPlans1","setBenefittingPlans1","ServicesServ","service","BandsServ","user","facilityId","setFacilityId","source","setSource","panel","setPanel","name","setName","benefittingplans","setBenefittingPlans","quantity","setQuantity","costprice","setCostprice","orgType","setOrgType","comments","setComments","productItem","setProductItem","plan","setPlan","setService","currentUser","setCurrentUser","panelList","setPanelList","successService","setSuccessService","chosen2","setChosen2","modifier","setModifier","subplan","setSubplan","band","setBand","status","serviceUnavailable","setServiceUnavailable","checked","setChecked","handleChange","e","i","c","newPlan","planx","serviceClass","feeforService","capitation","reqAuthCode","reqCopay","copay","prev","prevstate","filter","el","updateObjectInArray","array","child","map","item","index","handleChangeMode","existingBand","target","value","length","message","type","dismissible","pauseOnHover","handleServType","currentPlan","updatedplan","handleCopay","handleAuthCode","productitems","Services","setServices","getSearchfacility","obj","_id","facilityName","facilityType","getSearchfacility2","getSearchService","notfound","getBenfittingPlans","currentEmployee","find","query","facilityDetail","category","$sort","findServices","console","log","total","groupedOrder","services","forEach","concat","getProviderBand","bandType","data","handleClickProd","pricingInfo","productItemI","handleCheck","check","source_org","source_org_name","dest_org","dest_org_name","price","billing_type","plans","prevProd","resetform","handleClear","onSubmit","facilityname","panelServices","contracts","createdBy","create","then","res","catch","err","handleBenefit","handleRemove","contract","ProductionItem","handleAddPanel","newService","serviceId","service_name","resp","display","option","toString","ManagedServicesList","error","setError","setMessage","facilities","setFacilities","setState","setUser","handleCreateNew","newServicesModule","handleRow","Service","handleSearch","val","field","$regex","$options","createdAt","getFacilities","facilityModule","selectedFacility","stacker","on","StoreModule","selectedStore","Clinic","ManagedServicesDetail","handleEdit","ManagedServicesModify","modcon","setModCon","yam","setYam","pos","setPos","newProductitem","splice","handleCancel","changeState","handleDelete","conf","window","confirm","dleteId","remove","reset","updatedBy","patch","JSON","stringify","handleModCon","ServiceSearch","clear","productServ","searchError","setSearchError","showPanel","setShowPanel","searchMessage","setSearchMessage","simpa","setSimpa","chosen","setChosen","count","setCount","inputEl","setVal","productModal","setProductModal","handleBlur","uniqueArr","Set","uniqueObj","push","handleAddproduct","handlecloseModal","width"],"mappings":"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","sourcesContent":["/* eslint-disable */\nimport React, {useState,useContext, useEffect,useRef} from 'react'\nimport client from '../../feathers'\nimport {DebounceInput} from 'react-debounce-input';\nimport { useForm } from \"react-hook-form\";\n//import {useHistory} from 'react-router-dom'\nimport {UserContext,ObjectContext} from '../../context'\nimport {toast} from 'bulma-toast'\nimport {FacilitySearch} from '../helpers/FacilitySearch'\nimport CategorySearch from \"../helpers/CategorySearch\"\nimport  ServiceSearch2  from '../helpers/ServiceSearch';\nimport {OrgList } from './OrgClientList';\nimport {\n    Accordion,\n    AccordionItem,\n    AccordionItemHeading,\n    AccordionItemState,\n    AccordionItemButton,\n    AccordionItemPanel,\n} from 'react-accessible-accordion';\n\n\n// Demo styles, see 'Styles' section below for some notes on use.\nimport 'react-accessible-accordion/dist/fancy-example.css';\nimport { StoreModify } from '../inventory/Store';\n// eslint-disable-next-line\nconst searchfacility={};\n\n\nexport default function ManagedServices() {\n    const {state}=useContext(ObjectContext) //,setState\n    // eslint-disable-next-line\n    const [selectedServices,setSelectedServices]=useState()\n    //const [showState,setShowState]=useState() //create|modify|detail\n    \n    return(\n        <section className= \"section remPadTop\">\n           {/*  <div className=\"level\">\n            <div className=\"level-item\"> <span className=\"is-size-6 has-text-weight-medium\">Services  Module</span></div>\n            </div> */}\n            <div className=\"columns \">\n            {/* <div className=\"column is-4 \">\n            <OrgList/>    \n                </div> */}\n\n            <div className=\"column is-6 \">\n                <ManagedServicesList />\n                </div>\n            <div className=\"column is-6 \">\n                {(state.ServicesModule.show ==='create')&&<ManagedServicesCreate />}\n              {/*   {(state.ServicesModule.show ==='detail')&&<ManagedServicesDetail  />}\n                {(state.ServicesModule.show ==='modify')&&<ManagedServicesModify Services={selectedServices} />}\n                */}\n            </div>\n\n            </div>                            \n            </section>\n       \n    )\n    \n}\n\nexport function ManagedServicesCreate(){\n    const { register, handleSubmit,setValue} = useForm(); //, watch, errors, reset \n    const [categoryname, setCategoryName] =useState(\"\")\n    const [success, setSuccess] =useState(false)\n    const [success2, setSuccess2] =useState(false)\n    const [cash,setCash] = useState(\"Cash\")\n    // eslint-disable-next-line\n    const [facility,setFacility] = useState()\n    const [providerBand,setProviderBand] = useState([])\n    const [benefittingPlans1,setBenefittingPlans1] = useState([])\n    const ServicesServ=client.service('billing')\n    const BandsServ=client.service('bands')\n    //const history = useHistory()\n    const {user} = useContext(UserContext) //,setUser\n    // eslint-disable-next-line\n    const [facilityId,setFacilityId] = useState(\"\")\n    const [source,setSource] = useState(\"\")\n    const [panel,setPanel] = useState(false)\n    const [name,setName] = useState(\"\")\n    const [benefittingplans,setBenefittingPlans] = useState([])\n    const [quantity,setQuantity] = useState()\n    const [costprice,setCostprice] = useState(\"\")\n    const [orgType,setOrgType] = useState(\"\")\n    const [comments,setComments] = useState(\"\")\n    const [productItem,setProductItem] = useState([])\n    const [plan,setPlan] = useState(\"\")\n    const [service,setService] = useState(\"\")\n    const [currentUser,setCurrentUser] = useState(\"\")\n    const [panelList,setPanelList] = useState([])\n    const [successService,setSuccessService] = useState(false)\n    const {state}=useContext(ObjectContext)\n    const [chosen2, setChosen2]=useState()\n    const [modifier, setModifier]=useState([])\n    const [subplan, setSubplan]=useState({})\n    const [band, setBand]=useState(\"\")\n    const [serviceUnavailable, setServiceUnavailable]=useState({\n                                                            status:false,\n                                                            name:\"\"\n                                                            })\n\n   // const bandTypeOptions =[\"band 1\", \"Band 2\"]\n   // const benefittingplans1 =[\"NHIS\", \"Gold\",\"Platinium\"]\n   const [checked, setChecked] = useState(false);\n \n   const handleChange = async(e,i,c) => {\n   \n     c.checked = !c.checked\n\n     const newPlan={\n        name:c.name,\n        checked:false\n    }\n    // console.log(c.checked)\n     if (c.checked){\n         //add to benefiting plan\n         let planx={\n            name:c.name,\n            serviceClass:\"\",\n            feeforService:true,\n            capitation:false,\n            reqAuthCode:false,\n            reqCopay:false,\n            copay:\"\"\n            }\n         //   console.log(planx)\n        await setBenefittingPlans((prev)=>([...prev, planx])) \n\n     }else{\n       await setBenefittingPlans( prevstate=>prevstate.filter(el=>el.name!==c.name))//remove from benefiting plan\n     }\n\n   };\n\n  const updateObjectInArray= (array, child) => {\n      array.map((item, index) => {\n      if (item.name !== child.name) {\n        // This isn't the item we care about - keep it as-is\n        return item\n      }\n      // Otherwise, this is the one we want - return an updated value\n      //console.log(child)\n      return {  \n        ...child\n      }\n    })\n    return array\n  }\n   \n   const handleChangeMode = async(e) => {\n    \n    let existingBand=productItem.filter(el=>el.band===e.target.value)\n    if (!existingBand.length>0){\n        await setBand(e.target.value)\n    }else{\n        toast({\n            message: \" This band already exist! Please choose another band \",\n            type: 'is-danger',\n            dismissible: true,\n            pauseOnHover: true,\n          })\n          return\n    } \n   };\n\n\n   const handleServType = async(e,i,c) => {\n    let currentPlan=benefittingplans.filter(el=>el.name==c.name)[0]\n    currentPlan.serviceClass = e.target.value\n    currentPlan.capitation = e.target.value===\"Capitation\"?true:false\n    currentPlan.feeforService = e.target.value===\"Fee for Service\"?true:false\n    const updatedplan= updateObjectInArray(benefittingplans,currentPlan)\n    await setBenefittingPlans(updatedplan)\n   }\n\n\n   const handleCopay = async(e,i,c) => {\n    let currentPlan=benefittingplans.filter(el=>el.name==c.name)[0]\n    currentPlan.copay = e.target.value\n    currentPlan.reqCopay=currentPlan.copay===\"\"?false:true\n    const updatedplan= updateObjectInArray(benefittingplans,currentPlan)\n    await setBenefittingPlans(updatedplan)\n   };\n\n   const handleAuthCode   = async(e,i,c) => {\n     let currentPlan=benefittingplans.filter(el=>el.name==c.name)[0]\n     currentPlan.reqAuthCode = e.target.checked\n     const updatedplan= updateObjectInArray(benefittingplans,currentPlan)\n     await setBenefittingPlans(updatedplan)\n   };\n\n   useEffect(() => {\n       \n       return () => {\n          \n       }\n   }, [benefittingplans])\n\n    const [Services,setServices]=useState({\n        productitems:[],\n        panel,\n        source,\n\n    })\n   \n  \n\n    // consider batchformat{batchno,expirydate,qtty,baseunit}\n    //consider baseunoit conversions\n    const getSearchfacility=(obj)=>{\n\n        setFacilityId(obj._id)\n        setName(obj.facilityName)\n        setOrgType(obj.facilityType)\n\n        if(!obj){\n       // setName(\"\")\n        setOrgType(\"\")\n        setFacilityId(\"\")\n        setCostprice(\"\")\n\n        }\n        \n       /*  setValue(\"facility\", obj._id,  {\n            shouldValidate: true,\n            shouldDirty: true\n        }) */\n    }\n    const getSearchfacility2=(obj)=>{\n\n        setCategoryName(obj.categoryname)\n        setChosen2(obj)\n        \n         if (!obj){\n             //\"clear stuff\"\n             setCategoryName(\"\")\n             setChosen2()\n            \n         }\n     }\n\n    const getSearchService=(obj)=>{\n            setService(obj)\n        if(!obj){\n            setService(\"\")\n        }\n            setSuccessService(false)\n    }\n\n    const notfound= async(obj)=>{\n\n        //alert(obj)\n       await  setServiceUnavailable(obj)\n        await setSuccessService(true)\n        if (!obj){\n        await  setServiceUnavailable(\"\")\n        }\n       // console.log(obj)\n        //here\n    }\n    \n    useEffect(() => {\n        setCurrentUser(user)\n        \n        //console.log(currentUser)\n        return () => {\n        \n        }\n    }, [user])\n\n   const getBenfittingPlans = async()=>{\n    setBenefittingPlans1([])\n    if (user.currentEmployee){\n            \n        const findServices= await ServicesServ.find(\n                {query: {\n                    facility: user.currentEmployee.facilityDetail._id,\n                    'contracts.source_org' : user.currentEmployee.facilityDetail._id ,\n                    'contracts.dest_org' : user.currentEmployee.facilityDetail._id ,\n                    category:\"Managed Care\",\n                   // storeId:state.StoreModule.selectedStore._id,\n                   // $limit:20,\n                //   paginate:false,\n                    $sort: {\n                        category: 1\n                    }\n                    }})\n                    console.log(findServices)\n                    if (findServices.total>0){\n             \n        findServices.groupedOrder[0].services.forEach(async (c)=>{\n            const newPlan={\n                name:c.name,\n                checked:false\n            }\n            await setBenefittingPlans1((prev)=>(prev.concat(c)))\n                })\n            }\n        }\n\n   }\n   const getProviderBand = async()=>{\n    if (user.currentEmployee){\n            \n        const findServices= await BandsServ.find(\n                {query: {\n                    facility: user.currentEmployee.facilityDetail._id,\n                    bandType:(user.currentEmployee.facilityDetail.facilityType===\"HMO\")?\"Provider\":\"Company\",\n                    \n                   // storeId:state.StoreModule.selectedStore._id,\n                   // $limit:20,\n                //   paginate:false,\n                    $sort: {\n                        category: 1\n                    }\n                    }})\n                   // console.log(findServices)\n         await setProviderBand(findServices.data)\n        // console.log(findServices)\n                }\n       \n}\n\n    useEffect(() => {\n       // console.log(\"starting...\")\n        setBenefittingPlans1([])\n        setFacilityId(user.currentEmployee.facilityDetail._id) \n        setName(user.currentEmployee.facilityDetail.facilityName) \n        setOrgType(user.currentEmployee.facilityDetail.facilityType)\n        getProviderBand()\n        getBenfittingPlans()\n        return () => {\n         \n        }\n    }, [])\n\n    const handleClickProd=async()=>{\n        let pricingInfo ={\n            band,\n            costprice,\n            benefittingplans //=array of planx\n        }\n        \n        let productItemI={\n           /* facilityId,\n            name,\n            quantity,\n            costprice, */\n            name: service.name,\n            categoryname,\n            comments,\n            pricingInfo      \n        }\n      //  if (productItem.length>0){\n        //Check that fields are filled appropriately\n                if(!costprice ){\n                    toast({\n                        message: 'You need to enter price ' ,\n                        type: 'is-danger',\n                        dismissible: true,\n                        pauseOnHover: true,\n                    }) \n                    return\n                }\n \n            if( !service.name && !serviceUnavailable.name){\n                toast({\n                    message: 'You need to enter service name ' ,\n                    type: 'is-danger',\n                    dismissible: true,\n                    pauseOnHover: true,\n                }) \n                return\n            }\n            if( !categoryname){\n                toast({\n                    message: 'You need to enter category ' ,\n                    type: 'is-danger',\n                    dismissible: true,\n                    pauseOnHover: true,\n                }) \n                return\n            }\n            if( band===\"\"){\n                toast({\n                    message: 'You need to choose provider band ' ,\n                    type: 'is-danger',\n                    dismissible: true,\n                    pauseOnHover: true,\n                }) \n                return\n            }\n            if( !benefittingplans.length>0){\n                \n                toast({\n                    message: 'You need to add benefiting plan ' ,\n                    type: 'is-danger',\n                    dismissible: true,\n                    pauseOnHover: true,\n                }) \n               \n                return\n            }\n            let check=  await handleCheck()\n            if (check){\n                \n                return\n            }\n            productItemI={\n               source_org:facilityId, \n               source_org_name:name, \n               dest_org:user.currentEmployee.facilityDetail._id,\n               dest_org_name:user.currentEmployee.facilityDetail.facilityName,\n               price:costprice,\n               billing_type:orgType===\"HMO\"?\"HMO\":\"Company\", \n               plans:benefittingplans,\n               comments:comments,\n            \n               band:band\n            } \n            console.log(productItemI)\n            await setCash(\"\")\n       \n       \n        await setSuccess(false)\n        setProductItem(\n            prevProd=>prevProd.concat(productItemI)\n        )\n       \n      \n        setCostprice(\"\")\n        setBand(\"\")\n        setBenefittingPlans([])\n        setBenefittingPlans1([])\n        getBenfittingPlans()\n\n       await setSuccess(true)\n     \n    }\n \n\n    const resetform=()=>{\n  \n    //setFacilityId(\"\")\n    setSource(\"\")\n    setPanel(false)\n    //setName(\"\")\n    setComments(\"\")\n    setCostprice(\"\")\n    setProductItem([])\n    setCategoryName(\"\")\n   setService(\"\")\n    setPanelList([])\n    setPlan(\"\")\n    setBenefittingPlans([])\n    setCash(\"Cash\")\n    setOrgType(\"\")\n     setServiceUnavailable(\"\")\n    setServices(\"\")\n\n    }\n    const handleClear=()=>{\n        resetform()\n        /*  setMessage(\"Created Services successfully\") */\n            setSuccess(true)\n            setSuccess2(true)\n            setSuccessService(true)\n            toast({\n                message: 'Data entry cleared succesfully',\n                type: 'is-success',\n                dismissible: true,\n                pauseOnHover: true,\n            })\n            setSuccess(false)\n            setSuccess2(false)\n            setSuccessService(false)\n            setProductItem([])\n            setPanelList([])\n    }\n\n    const onSubmit = async() =>{\n       // e.preventDefault();\n        let check= await handleCheck()\n        if (check){\n            console.log(check)\n            return\n        }\n       if(panel && (panelList.length===0)){\n        toast({\n            message: \"Please choose services that make up panel or uncheck panel \",\n            type: 'is-danger',\n            dismissible: true,\n            pauseOnHover: true,\n          })\n          return   \n       }\n\n        setSuccess(false)\n            \n        let data ={\n                        name: serviceUnavailable.status? serviceUnavailable.name:service.name, //source\n                        category:categoryname,\n                        facility:user.currentEmployee.facilityDetail._id,\n                        facilityname:user.currentEmployee.facilityDetail.facilityName,\n                        panel:panel,\n                        panelServices:panelList,\n                        contracts:productItem,\n                        createdBy:user._id\n                    }\n                  //  console.log(data)\n                    \n        ServicesServ.create(data)\n        .then((res)=>{\n            setSuccessService(true)\n                //console.log(JSON.stringify(res))\n                resetform()\n            /*  setMessage(\"Created Services successfully\") */\n                setSuccess(true)\n                setSuccess2(true)\n                \n                toast({\n                    message: 'Service created succesfully',\n                    type: 'is-success',\n                    dismissible: true,\n                    pauseOnHover: true,\n                })\n                setSuccess(false)\n                setSuccess2(false)\n                setSuccessService(false)\n                setProductItem([])\n                setPanelList([])\n                setServiceUnavailable({\n                    status:false,\n                    name:\"\"\n                })\n                // setSuccessService(true)\n            })\n            .catch((err)=>{\n                toast({\n                    message: 'Error creating Services ' + err,\n                    type: 'is-danger',\n                    dismissible: true,\n                    pauseOnHover: true,\n                })\n            })\n               \n        } \n                    \n    \n\nconst handleBenefit=(e)=>{\n   \n    setBenefittingPlans(prevstate=>prevstate.concat(plan))\n    setPlan(\"\")\n    }\n\nconst handleRemove=(index, contract)=>{\n    //console.log(index)\n    if (contract.billing_type===\"Cash\"){\n        toast({\n            message: 'You cannot remove cash billing' ,\n            type: 'is-danger',\n            dismissible: true,\n            pauseOnHover: true,\n          })\n        return\n    }\n\n   //setProductItem(prevstate=> prevstate.splice(i,1))\n   setProductItem(prevstate=> prevstate.filter((ProductionItem, i) => i !== index));\n   \n  /*  const newProductitem = [...productItem]\n   newProductitem.splice(i,1)\n   setProductItem(newProductitem) */\n}\nconst handleAddPanel =()=>{\n   // setSuccessService(false) \n   let newService={\n       serviceId:service._id,\n       service_name:service.name,\n       panel:service.panel\n   }\n    setPanelList(prevstate=>prevstate.concat(newService))\n    setSuccessService(true)\n    newService={}\n    setService(\"\")\n    console.log(\"something added\")\n    \n}\nconst handleCheck= async ()=>{\n    \n    if (!categoryname){\n        toast({\n            message: 'Enter Category!',\n            type: 'is-danger',\n            dismissible: true,\n            pauseOnHover: true,\n          }) \n        return true\n    }\n   console.log(\"unavailb:\",serviceUnavailable.name)\n   console.log(\"availb:\", service.name)\n   const resp= await ServicesServ.find({\n        query:{\n            name: serviceUnavailable.name||service.name, //source\n            facility: user.currentEmployee.facilityDetail._id,\n            category:categoryname\n        }\n    })\n    console.log(resp)\n    //.  \n    /*then((resp)=>{\n        console.log(resp)*/\n        if (resp.data.length>0){\n        toast({\n            message: 'Service already exist. Kindly modify it ',//+ resp.data ,\n            type: 'is-danger',\n            dismissible: true,\n            pauseOnHover: true,\n          }) \n          return true\n        }else{\n            return false\n        }\n   // })\n   /*  .catch((err)=>{\n        toast({\n            message: 'Error checking services  '+ err ,\n            type: 'is-danger',\n            dismissible: true,\n            pauseOnHover: true,\n          })  */\n  //  })\n}\n    \n\n    return (\n        <>\n            <div className=\"card card-overflow\">\n            <div className=\"card-header\">\n                <p className=\"card-header-title\">\n                    Create Services\n                </p>\n            </div>\n            <div className=\"card-content vscrollable remPad1 \">\n   \n            {/* <form onSubmit={onSubmit}>  */}{/* handleSubmit(onSubmit) */}\n            {/* <div className=\"field is-horizontal\">\n            <div className=\"field-body\"> */}\n            <div className=\"field\">\n                    <div className=\"field is-expanded\"  /* style={ !user.stacker?{display:\"none\"}:{}} */ >\n                        <ServiceSearch  getSearchService={getSearchService} clear={successService} notfound={notfound}  /> \n                        <p className=\"control has-icons-left \" style={{display:\"none\"}}>\n                            <input className=\"input is-small\" /* ref={register ({ required: true }) }  *//* add array no   value={facilityId} name=\"facilityId\" type=\"text\" onChange={e=>setFacilityId(e.target.value)} placeholder=\"Product Id\"*/ />\n                            <span className=\"icon is-small is-left\">\n                            <i className=\"fas  fa-map-marker-alt\"></i>\n                            </span>\n                        </p>\n                    </div>  \n                </div>\n           \n                     \n                {/* {sellingprice}  {sellingprice &&   \"N\"}{sellingprice} {sellingprice &&   \"per\"}  {baseunit} {invquantity} {sellingprice &&   \"remaining\"}  */}\n                {/*  </div> */}\n             \n          \n              \n           \n                <div className=\"field is-expanded\"  /* style={ !user.stacker?{display:\"none\"}:{}} */ >\n                    <CategorySearch  getSearchfacility={getSearchfacility2} clear={success2} /> \n                    <p className=\"control has-icons-left \" style={{display:\"none\"}}>\n                        <input className=\"input is-small\"  /* ref={register ({ required: true }) } */  /* add array no */  value={categoryname} name=\"categoryname\" type=\"text\" onChange={e=>setCategoryName(e.target.value)} placeholder=\"Category of Service\" />\n                        <span className=\"icon is-small is-left\">\n                        <i className=\"fas  fa-map-marker-alt\"></i>\n                        </span>\n                    </p>\n                </div>\n                <div className=\"field is-expanded\"   >\n                   \n                    <p className=\"control has-icons-left \">\n                        <input className=\"input is-small\"    value={comments} name=\"comments\" type=\"text\" onChange={e=>setComments(e.target.value)} placeholder=\"Comments\" />\n                        <span className=\"icon is-small is-left\">\n                        <i className=\"fas  fa-map-marker-alt\"></i>\n                        </span>\n                    </p>\n                </div>\n       \n        \n        <label className=\"label is-small\">Add Pricing Info:</label>\n        <div className=\"field is-horizontal\">\n            <div className=\"field-body\">\n                <div className=\"field\">    \n                        <div className=\"control\">\n                            <div className=\"select is-small \">\n                                <select name=\"bandType\" value={band} onChange={(e)=>handleChangeMode(e)} className=\"selectadd\" >\n                                <option value=\"\">{(user.currentEmployee.facilityDetail.facilityType===\"HMO\")?\"Choose Provider Band\":\"Choose Company Band\"}  </option>\n                                {providerBand.map((option,i)=>(\n                                    <option key={i} value={option.name}> {option.name}</option>\n                                ))}\n                                </select>\n                            </div>\n                        </div>\n                    </div>\n\n                <div className=\"field\">\n                    <p className=\"control has-icons-left\">\n                        <input className=\"input is-small\" /* ref={register({ required: true })} */ name=\"costprice\" value={costprice} type=\"text\" onChange={e=>setCostprice(e.target.value)} placeholder=\"Price\"  />\n                        <span className=\"icon naira is-left\">\n                        {/* <i className=\"fas fa-dollar-sign\"></i> */}\n                        <b>&#8358;</b>\n                        </span>\n                    </p>\n            </div>\n            </div>\n        </div>\n              \n      \n        \n        <label className=\"label is-small\">Benefitting Plans:</label>\n        <div className=\"field is-horizontal\">\n            <div className=\"field-body\">\n            <div className=\"field\">    \n                      {/*   <div className=\"control\">\n                            <div className=\"select is-small \">\n                                <select name=\"bandType\"   className=\"selectadd\" >\n                                <option value=\"\">Choose Benefitting Plans </option>\n                                {benefittingplans1.map((option,i)=>(\n                                    <option key={i} value={option}> {option}</option>\n                                ))}\n                                </select>\n                            </div>\n                            </div> */}\n                        \n                        <div className=\"field \">\n                            {\n                                benefittingPlans1.map((c,i) => \n                                    < >\n                                    <div className=\"pb-2\">\n                                        <div className= \"field is-horizontal\"> \n                                                    <div className=\"field-body\">\n                                                    <div className=\"field mr-2 \">\n                                                    <label  className=\"label is-small mr-2\" key={i}>\n                                                        <input className=\"checkbox is-small \" \n                                                            type=\"checkbox\" \n                                                            value={i} \n                                                            name={`selectedPlans +${i}`}\n                                                            /*  checked={c.checked}  */\n                                                            onChange={(e)=>handleChange(e,i,c)}\n                                                            />\n                                                            {c.name + \" \"}\n                                                    </label>\n                                                </div>\n\n                                         \n                                                    <div className={`field  mr-2 ${c.checked?\"\":\"is-hidden\"}`}>\n                                                    <input className=\"input smallerinput is-small is-pulled-right \"  name={`copay +${i}`} value={benefittingplans.filter(el=>el.name==c.name).copay} type=\"text\" onChange={(e)=>handleCopay(e,i,c)} placeholder=\"Co-pay Amount\"  />\n                                                </div>\n                                                \n                                                </div>\n                                                </div>                                                                                                                                                                                                                          \n                                        <div className={`field pl-3 ${c.checked?\"\":\"is-hidden\"}`}>\n                                            <div className=\"field is-horizontal\">\n                                                <div className=\"field-body mt-2\">\n                                                    <div className=\"field mr-2\">\n                                                                <p className=\"control has-icons-left has-icons-right\">\n                                                                    <label className=\"radio label is-small\" >\n                                                                    <input className=\" is-small\"  value=\"Capitation\"     name={`servtype +${i}`} type=\"radio\" onChange={(e)=>handleServType(e,i,c)}    />\n                                                                    <span>Capitation</span></label>\n                                                                </p>\n                                                            </div>\n                                                    <div className=\"field mr-2\">\n                                                <p className=\"control has-icons-left has-icons-right\">\n                                                    <label className=\"radio label is-small\" >\n                                                    <input className=\" is-small\" name={`servtype +${i}`} value=\"Fee for Service\"   type=\"radio\" onChange={(e)=>handleServType(e,i,c)}   />\n                                                \n                                                    <span>Fee for Service</span></label>\n                                                </p>\n                                            </div>\n                                                </div>\n                                            </div>                              \n                                            <div className=\"field mr-2\">\n                                                <p className=\"control has-icons-left has-icons-right\">\n                                                    <label className=\"label is-small\" >\n                                                    <input className=\"checkbox is-small\"      \n                                                        name={`authCode +${i}`} \n                                                        type=\"checkbox\" \n                                                        onChange={(e)=>handleAuthCode(e,i,c)}   \n                                                    />\n                                                    <span>Requires Pre-Authorization Code</span></label>\n                                                </p>\n                                            </div> \n                                        </div>\n                                        </div> \n                                    </>\n                                )\n                            }\n                        </div>\n                        \n                    </div>\n\n               {/*  <div className=\"field\">\n                    <div className=\"field has-addons\"  >\n                        <div className=\"control\">\n                                  <input  className=\"input selectadd\" type=\"text\" name=\"plan\"  value={plan} onChange={e=>setPlan(e.target.value)} placeholder=\"Benefitting Plans\" />\n                                  </div> \n                                  <div className=\"control\">\n                                  <button className=\"button is-info selectadd\" onClick={(e)=>handleBenefit(e)}>add</button>\n                        </div>\n                    </div>               \n                    </div>\n                <div className=\"field\">\n                 {benefittingplans.map((plan,i)=>(\n                        <span key={i} className=\"ml-1\">\n                            {plan};\n                        </span>\n                     ))}\n                </div> */}\n               \n\n                </div>\n              </div>\n              <div>\n        </div>\n           \n          <>\n              \n         <div className=\"field pb-5 \">\n                    <p className=\"control\">\n                        <button className=\"button is-info is-small  is-pulled-left selectadd \">\n                        <span className=\"is-small\" onClick={handleClickProd}>Add</span>\n                        </button>\n                    </p>\n                </div>\n         </>\n       {(productItem.length>0) && <div>\n            <label>Service Parameters:</label>\n         <table className=\"table is-striped  is-hoverable is-fullwidth is-scrollable \">\n                <thead>\n                    <tr>\n                    <th><abbr title=\"Serial No\">S/No</abbr></th>\n                    <th><abbr title=\"Source Organization\">Organization</abbr></th>\n                    <th><abbr title=\"Band\">Band</abbr></th>\n                    <th><abbr title=\"Price\">Amount</abbr></th>\n                    <th><abbr title=\"Billing Type\">Billing Type</abbr></th>\n                    <th><abbr title=\"Benefitting Plans\">Plans</abbr></th>\n                      {/*  <th><abbr title=\"Cost Price\">Amount</abbr></th>*/}\n                    <th><abbr title=\"Actions\">Actions</abbr></th> \n                    </tr>\n                </thead>\n                <tfoot>\n                    \n                </tfoot>\n                <tbody>\n                   { productItem.map((Services, i)=>(\n                        <tr key={i}>\n                        <th>{i+1}</th>\n                        <td>{Services.source_org_name}</td>\n                        <td>{Services.band}</td>\n                        <th>{Services.price}</th>\n                       <td>{Services.billing_type}</td>\n                        <td>  {Services.plans.map((plan,i)=>(\n                        <span key={i} className=\"ml-1\">\n                            <b>{plan.name}</b>:{plan.serviceClass}/{plan.reqAuthCode.toString()}/{plan.copay};<br></br>\n                        </span>\n                     ))}</td>\n                          {/*<td>{Services.amount}</td> */}\n                        <td><span className=\"showAction\" onClick={()=>handleRemove(i,Services)} >x</span></td>\n                        \n                        </tr>\n\n                    ))}\n                </tbody>\n                </table>\n                <div className=\"field is-grouped mt-2\">\n                <p className=\"control\">\n                    <button className=\"button is-success is-small\" disabled={!productItem.length>0} onClick={onSubmit}>\n                        Create\n                    </button>\n                </p>\n                <p className=\"control\">\n                    <button className=\"button is-warning is-small\" type=\"reset\" onClick={handleClear}>\n                        Cancel\n                    </button>\n                </p>\n                </div>\n                </div>\n           \n            }\n            \n            \n            </div>\n            </div>\n        </>\n    )\n   \n}\n\nexport function ManagedServicesList(){\n   // const { register, handleSubmit, watch, errors } = useForm();\n    // eslint-disable-next-line\n    const [error, setError] =useState(false)\n     // eslint-disable-next-line\n    const [success, setSuccess] =useState(false)\n     // eslint-disable-next-line\n   const [message, setMessage] = useState(\"\") \n    const ServicesServ=client.service('billing')\n    //const history = useHistory()\n   // const {user,setUser} = useContext(UserContext)\n    const [facilities,setFacilities]=useState([])\n     // eslint-disable-next-line\n   const [selectedServices, setSelectedServices]=useState() //\n    // eslint-disable-next-line\n    const {state,setState}=useContext(ObjectContext)\n    // eslint-disable-next-line\n    const {user,setUser}=useContext(UserContext)\n\n\n\n    const handleCreateNew = async()=>{\n        const    newServicesModule={\n            selectedServices:{},\n            show :'create'\n            }\n       await setState((prevstate)=>({...prevstate, ServicesModule:newServicesModule}))\n       //console.log(state)\n        \n\n    }\n    const handleRow= async(Service)=>{\n        //console.log(\"b4\",state)\n\n        //console.log(\"handlerow\",Services)\n\n        await setSelectedServices(Service)\n\n        const    newServicesModule={\n            selectedServices:Service,\n            show :'detail'\n        }\n       await setState((prevstate)=>({...prevstate, ServicesModule:newServicesModule}))\n       //console.log(state)\n\n    }\n\n   const handleSearch=(val)=>{\n       const field='name'\n       console.log(val)\n       ServicesServ.find({query: {\n                [field]: {\n                    $regex:val,\n                    $options:'i'\n                   \n                },\n               // storeId:state.StoreModule.selectedStore._id,\n               facility:user.currentEmployee.facilityDetail._id ,\n                $limit:20,\n                $sort: {\n                    createdAt: -1\n                  }\n                    }}).then((res)=>{\n                console.log(res)\n               setFacilities(res.groupedOrder)\n                \n            })\n            .catch((err)=>{\n                console.log(err)\n                toast({\n                    message: 'Error during search ' + err,\n                    type: 'is-danger',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  }) \n            })\n        }\n   \n   const getFacilities= async()=>{\n            if (user.currentEmployee){\n            \n        const findServices= await ServicesServ.find(\n                {query: {\n                    facility: user.currentEmployee.facilityDetail._id,\n                    'contracts.source_org' : state.facilityModule.selectedFacility._id ,\n                   // storeId:state.StoreModule.selectedStore._id,\n                   // $limit:20,\n                //   paginate:false,\n                    $sort: {\n                        category: 1\n                    }\n                    }})\n                    console.log(findServices)\n         await setFacilities(findServices.groupedOrder)\n        // console.log(findServices)\n                }\n                else {\n                    if (user.stacker){\n                        toast({\n                            message: 'You do not qualify to view this',\n                            type: 'is-danger',\n                            dismissible: true,\n                            pauseOnHover: true,\n                          }) \n                          return \n                        \n                    }\n                }\n        \n            }\n            \n    useEffect(() => {\n            return () => {\n                }\n            },[])\n\n    useEffect(() => {\n                 getFacilities()\n                \n\n                ServicesServ.on('created', (obj)=>getFacilities())\n                ServicesServ.on('updated', (obj)=>getFacilities())\n                ServicesServ.on('patched', (obj)=>getFacilities())\n                ServicesServ.on('removed', (obj)=>getFacilities())\n                return () => {\n                \n                }\n            },[])\n\n\n            useEffect(() => {\n                getFacilities()\n                return () => {\n                    \n                    \n                }\n            }, [state.facilityModule.selectedFacility])\n\n /*    useEffect(() => {\n                getFacilities()\n                console.log(\"store changed\")\n                return () => {\n                   \n                }\n            }, [state.StoreModule.selectedStore]) */\n    //todo: pagination and vertical scroll bar\n\n    return(\n        <>\n           {state.StoreModule.selectedStore?( <>  \n                <div className=\"level\">\n                    <div className=\"level-left\">\n                        <div className=\"level-item\">\n                            <div className=\"field\">\n                                <p className=\"control has-icons-left  \">\n                                    <DebounceInput className=\"input is-small \" \n                                        type=\"text\" placeholder=\"Search Services\"\n                                        minLength={3}\n                                        debounceTimeout={400}\n                                        onChange={(e)=>handleSearch(e.target.value)} />\n                                    <span className=\"icon is-small is-left\">\n                                        <i className=\"fas fa-search\"></i>\n                                    </span>\n                                </p>\n                            </div>\n                        </div>\n                    </div>\n                    <div className=\"level-item\"> <span className=\"is-size-6 has-text-weight-medium\">Services </span></div>\n                    <div className=\"level-right\">\n                        <div className=\"level-item\"> \n                            <div className=\"level-item\"><div className=\"button is-success is-small\" onClick={handleCreateNew}>New</div></div>\n                        </div>\n                    </div>\n\n                </div>\n                <div className=\" pullup \">\n                    <div className=\" is-fullwidth vscrollable pr-1\">   \n                    <Accordion allowZeroExpanded >\n                        {facilities.map((Clinic, i)=>(\n                            <AccordionItem  key={Clinic.categoryname}  >\n                                <AccordionItemHeading >\n                                    <AccordionItemButton  >\n                                    {/* <input type = \"checkbox\" name={Clinic.client_id}  />   */}\n                                    <strong> {i+1} {Clinic.categoryname} {/* with {Clinic.bills.length} Unpaid bills. */} {/* Grand Total amount: N */}</strong> \n                                    </AccordionItemButton>\n                                </AccordionItemHeading>\n                                <AccordionItemPanel>\n                                    \n                                    <table className=\"table is-striped is-narrow is-hoverable is-fullwidth is-scrollable \">\n                                     <thead>\n                                        <tr>\n                                        <th><abbr title=\"Serial No\">S/No</abbr></th>\n                                        <th><abbr title=\"Date\">Name</abbr></th>\n                                        <th><abbr title=\"Type\">Panel?</abbr></th>\n                                        <th>Cash Price</th>\n                                         {/*<th><abbr title=\"Document No\">Document No</abbr></th>\n                                        <th><abbr title=\"Total Amount\">Total Amount</abbr></th>\n                                        <th><abbr title=\"Enteredby\">Entered By</abbr></th>\n                                        <th><abbr title=\"Actions\">Actions</abbr></th> */}\n                                        </tr>\n                                    </thead>\n                                    <tfoot>\n                                        \n                                    </tfoot>\n                                    <tbody>\n                                        {Clinic.services.map((Services, i)=>(\n\n                                            <tr key={Services._id} onClick={()=>handleRow(Services)}>\n                                            <th>{i+1}</th>\n                                            <td>{Services.name}</td>\n                                            <th>{Services.panel?\"Yes\":\"No\"}</th>\n                                            <td>{Services.contracts.map((el,i)=>(\n                                                el.source_org===el.dest_org &&\n                                                <p key={i}>\n                                                    {el.price} \n                                                </p>\n                                            ))}</td>\n                                             {/*<td>{Services.documentNo}</td>\n                                            <td>{Services.totalamount}</td>\n                                            <td>{Services.enteredby}</td>\n                                            <td><span className=\"showAction\"  >...</span></td> */}\n                                           \n                                            </tr>\n\n                                        ))}\n                                    </tbody>\n                                    </table>\n                                    \n                                              \n                                </AccordionItemPanel>                    \n                            </AccordionItem >\n                        ))}\n                    </Accordion >\n                    </div>  \n                </div>\n                          \n            </>):<div>loading... Choose a Store</div>}\n            </>\n              \n    )\n}\n\nexport function ManagedServicesDetail(){\n    //const { register, handleSubmit, watch, setValue } = useForm(); //errors,\n     // eslint-disable-next-line\n    const [error, setError] =useState(false) //, \n    //const [success, setSuccess] =useState(false)\n     // eslint-disable-next-line\n    const [message, setMessage] = useState(\"\") //,\n    //const ServicesServ=client.service('/Services')\n    //const history = useHistory()\n    //const {user,setUser} = useContext(UserContext)\n    const {state,setState} = useContext(ObjectContext)\n\n   \n\n   const Services =state.ServicesModule.selectedServices \n   /* console.log(Services) */\n\n    const handleEdit= async()=>{\n        const    newServicesModule={\n            selectedServices:Services,\n            show :'modify'\n        }\n       await setState((prevstate)=>({...prevstate, ServicesModule:newServicesModule}))\n       //console.log(state)\n       \n    }\n \n    return (\n        <>\n        <div className=\"card \">\n            <div className=\"card-header\">\n                <p className=\"card-header-title\">\n                    Services Details\n                </p>\n            </div>\n            <div className=\"card-content vscrollable\">\n           \n                <table> \n                <tbody>         \n                <tr>\n                    <td>\n                      <label className=\"label is-small\"> <span className=\"icon is-small is-left\">\n                            <i className=\"fas fa-hospital\"></i>\n                        </span>                    \n                       Category \n                        </label>\n                    </td>\n                    <td>\n                        <span className=\"is-size-7 padleft\"   name=\"name\"> {Services.category} </span>\n                    </td>\n                    <td>\n\n                    </td>\n                    <td>\n                        <label className=\"label is-small padleft\"><span className=\"icon is-small is-left\">\n                            <i className=\"fas fa-map-signs\"></i>\n                        </span>Name:\n                        </label>\n                    </td>\n                    <td>\n                        <span className=\"is-size-7 padleft\"   name=\"ServicesType\">{Services.name} </span> \n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <label className=\"label is-small\"> <span className=\"icon is-small is-left\">\n                        <i className=\"fas fa-hospital\"></i>\n                        </span>                    \n                        Panel:\n                        </label>\n                    </td>\n                    <td>\n                        <span className=\"is-size-7 padleft\"   name=\"name\"> {Services.panel?\"Yes\":\"No\"} </span>\n                    </td>\n                    <td>\n                                \n                    </td>\n                    <td> {Services.panel &&\n                        <label className=\"label is-small padleft\"><span className=\"icon is-small is-left\">\n                            <i className=\"fas fa-map-signs\"></i>\n                        </span>Panel Services:\n                        </label>}\n                    </td>\n                    \n                    <td>\n                    {Services.panel &&  <p className=\"is-size-7 padleft\"   name=\"ServicesType\">{Services.panelServices.length>0 &&     <p>\n                         {Services.panelServices.map((plan,i)=>(\n                        <span key={i} className=\"ml-1\">\n                            {plan.name};\n                            </span>))}\n                        </p>\n            }     </p> }\n                    </td>\n                </tr>\n               {/*  <tr>\n                    <td>\n                \n                        <label className=\"label is-small\"> <span className=\"icon is-small is-left\">\n                        <i className=\"fas fa-hospital\"></i>\n                    </span>            \n                        Total Amount:\n                    </label>\n                    </td>\n                    <td>\n                        <span className=\"is-size-7 padleft\"   name=\"name\"> {Services.totalamount} </span>\n                    </td>\n                </tr> */}\n\n                </tbody> \n            </table> \n            <label className=\"label is-size-7 mt-2\">Pricing Info:</label>\n        \n                 <table className=\"table is-striped  is-hoverable is-fullwidth is-scrollable \">\n                <thead>\n                    <tr>\n                    <th><abbr title=\"Serial No\">S/No</abbr></th>\n                    <th><abbr title=\"Source Organization\">Organization</abbr></th>\n                    <th><abbr title=\"Price\">Amount</abbr></th>\n                    <th><abbr title=\"Billing Type\">Billing Type</abbr></th>\n                    <th><abbr title=\"Benefitting Plans\">Plans</abbr></th>\n                      {/*  <th><abbr title=\"Cost Price\">Amount</abbr></th>\n                    <th><abbr title=\"Actions\">Actions</abbr></th> */}\n                    </tr>\n                </thead>\n                <tfoot>\n                    \n                </tfoot>\n                <tbody>\n                   { Services.contracts.map((Services, i)=>(\n\n                        <tr key={i}>\n                        <th>{i+1}</th>\n                        <td>{Services.source_org_name}</td>\n                        <th>{Services.price}</th>\n                       <td>{Services.billing_type}</td>\n                        <td> { (Services.plans) && Services.plans.map((plan,i)=>(\n                        <span key={i} className=\"ml-1\">\n                            {plan};\n                        </span>\n                     ))}</td>\n                          {/*<td>{Services.amount}</td> */}\n                        {/* <td><span className=\"showAction\" onClick={()=>handleRemove(i)} >x</span></td> */}\n                        \n                        </tr>\n\n                    ))}\n                </tbody>\n                </table>\n              <div className=\"field mt-2\">\n                <p className=\"control\">\n                    <button className=\"button is-success is-small\" onClick={handleEdit}>\n                        Edit\n                    </button>\n                </p>\n            </div>\n          {/*    { error && <div className=\"message\"> {message}</div>} */}\n           \n        </div>\n        </div>\n        </>\n    )\n   \n   \n}\n\nexport function ManagedServicesModify(){\n   // const { register, handleSubmit, setValue,reset, errors } = useForm(); //watch, errors,\n    // eslint-disable-next-line \n    const [error, setError] =useState(false)\n    // eslint-disable-next-line \n    const [success, setSuccess] =useState(false)\n    const [success2, setSuccess2] =useState(false)\n    // eslint-disable-next-line \n    const [message,setMessage] = useState(\"\")\n    // eslint-disable-next-line \n    const ServicesServ=client.service('billing')\n    //const history = useHistory()\n     // eslint-disable-next-line\n    const {user} = useContext(UserContext)\n    const {state,setState} = useContext(ObjectContext)\n\n    const [facilityId,setFacilityId] = useState(\"\")\n    const [source,setSource] = useState(\"\")\n    const [panel,setPanel] = useState(false)\n    const [name,setName] = useState(\"\")\n    const [benefittingplans,setBenefittingPlans] = useState([])\n    const [quantity,setQuantity] = useState()\n    const [costprice,setCostprice] = useState(\"\")\n    const [orgType,setOrgType] = useState(\"\")\n    const [productItem,setProductItem] = useState([])\n    const [plan,setPlan] = useState(\"\")\n    const [service,setService] = useState(\"\")\n    const [currentUser,setCurrentUser] = useState(\"\")\n    const [panelList,setPanelList] = useState([])\n    const [successService,setSuccessService] = useState(false)\n  //  const {state}=useContext(ObjectContext)\n    const [cash,setCash] = useState(\"Cash\")\n    const [categoryname, setCategoryName] =useState(\"\")\n    const [facility,setFacility] = useState()\n    const [modcon,setModCon] = useState(\"\")\n    const [yam,setYam] = useState(false) \n    const [pos,setPos] = useState(\"\") \n    const [chosen2, setChosen2]=useState()\n\n    let Services =state.ServicesModule.selectedServices \n    let productItemI\n\n       /*  useEffect(() => {\n            /* setValue(\"name\", Services.name,  {\n                shouldValidate: true,\n                shouldDirty: true\n            })\n            setValue(\"category\", Services.category,  {\n                shouldValidate: true,\n                shouldDirty: true\n            })\n         setValue(\"panel\", Services.panel,  {\n                shouldValidate: true,\n                shouldDirty: true\n            }) */\n            /*  setValue(\"phone\", Services.phone,  {\n                shouldValidate: true,\n                shouldDirty: true\n            })\n            setValue(\"email\", Services.email,  {\n                shouldValidate: true,\n                shouldDirty: true\n            })\n              setValue(\"department\", Services.department,  {\n                shouldValidate: true,\n                shouldDirty: true\n            })\n            setValue(\"deptunit\", Services.deptunit,  {\n                shouldValidate: true,\n                shouldDirty: true\n            }) */\n          /*   setValue(\"ServicesCategory\", Services.ServicesCategory,  {\n                shouldValidate: true,\n                shouldDirty: true\n            }) */\n           /*  \n            return () => {\n                \n            }\n        })\n */\n\n  useEffect(() => {\n    setFacilityId(modcon.source_org)\n        setName(modcon.source_org_name)\n        setCostprice(modcon.price)\n        setOrgType(modcon.billing_type)\n        setBenefittingPlans(modcon.plans)\n        setYam(true)\n     return () => {\n        \n     }\n    }, [modcon]) \n\n        useEffect(() => {\n            //Services\n            setFacilityId(\"\")\n            setSource(Services.name)\n            setPanel(Services.panel)\n            setName(\"\")\n        \n            setCostprice(\"\")\n            setProductItem(Services.contracts)\n            setCategoryName(Services.category)\n            setService(\"\")\n            setPanelList(Services.panelServices)\n            setPlan(\"\")\n            setBenefittingPlans([])\n            setCash(\"\")\n            setOrgType(\"\")\n           \n            return () => {\n               \n            }\n        }, [])\n        const handleCheck= async ()=>{\n    \n            if (!categoryname){\n                toast({\n                    message: 'Enter Category!',\n                    type: 'is-danger',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  }) \n                return true\n            }\n            await ServicesServ.find({\n                query:{\n                    name:source,\n                    facility: user.currentEmployee.facilityDetail._id,\n                    category:categoryname\n                }\n            }).then((resp)=>{\n                console.log(resp)\n                if (resp.data.length>0){\n                toast({\n                    message: 'Service already exist. Kindly modify it ' , //+ resp.data\n                    type: 'is-danger',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  }) \n                  return true\n                }\n            })\n            .catch((err)=>{\n                toast({\n                    message: 'Error checking services  '+ err ,\n                    type: 'is-danger',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  }) \n            })\n        }\n          \n        const handleClickProd=async()=>{\n            if (productItem.length>0){\n            \n            if(!costprice || !name){\n                toast({\n                    message: 'You need to enter organization name and price ' ,\n                    type: 'is-danger',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  }) \n                return\n            }\n        }else{\n            if(!costprice || !cash){\n                toast({\n                    message: 'You need to enter organization name and price ' ,\n                    type: 'is-danger',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  })  \n                return\n            }\n    \n        }\n        if (!yam){\n            if(cash===\"Cash\"){\n                 productItemI={\n                    source_org:user.currentEmployee.facilityDetail._id,\n                    source_org_name:user.currentEmployee.facilityDetail.facilityName,\n                    dest_org:user.currentEmployee.facilityDetail._id,\n                    dest_org_name:user.currentEmployee.facilityDetail.facilityName,\n                    price:costprice,\n                    billing_type:\"Cash\",\n                    plans:benefittingplans\n                 } \n                 await setCash(\"\")\n            }else{\n                productItemI={\n                   source_org:facilityId, \n                   source_org_name:name, \n                   dest_org:user.currentEmployee.facilityDetail._id,\n                   dest_org_name:user.currentEmployee.facilityDetail.facilityName,\n                   price:costprice,\n                   billing_type:orgType===\"HMO\"?\"HMO\":\"Company\", \n                   plans:benefittingplans\n    \n                } \n                await setCash(\"\")\n           }\n           \n            await setSuccess(false)\n            setProductItem(\n                prevProd=>prevProd.concat(productItemI)\n            )\n        }else{\n            productItemI={\n                source_org:facilityId, \n                source_org_name:name, \n                dest_org:user.currentEmployee.facilityDetail._id,\n                dest_org_name:user.currentEmployee.facilityDetail.facilityName,\n                price:costprice,\n                billing_type:orgType, \n                plans:benefittingplans\n \n             } \n             const newProductitem = [...productItem]\n             newProductitem.splice(pos,1,productItemI)\n             setProductItem(newProductitem)\n        }\n        setModCon(\"\")\n        setYam(false) \n        setPos(\"\")\n            setName(\"\")\n            setOrgType(\"\")\n            setFacilityId(\"\")\n            setCostprice(\"\")\n           await setSuccess(true)\n         \n        }\n        const resetform=()=>{\n  \n            setFacilityId(\"\")\n            setSource(\"\")\n            setPanel(false)\n            setName(\"\")\n          \n            setCostprice(\"\")\n            setProductItem([])\n            setCategoryName(\"\")\n           setService(\"\")\n            setPanelList([])\n            setPlan(\"\")\n            setBenefittingPlans([])\n            setCash(\"Cash\")\n            setOrgType(\"\")\n            }\n\n        const getSearchService=(obj)=>{\n                setService(obj)\n            if(!obj){\n                setService(\"\")\n            }\n                setSuccessService(false)\n        }\n      \n         const getSearchfacility2=(obj)=>{\n\n            setCategoryName(obj.categoryname)\n            setChosen2(obj)\n            \n             if (!obj){\n                 //\"clear stuff\"\n                 setCategoryName(\"\")\n                 setChosen2()\n                \n             }\n         }\n        const getSearchfacility=(obj)=>{\n\n            setFacilityId(obj._id)\n            setName(obj.facilityName)\n            setOrgType(obj.facilityType)\n            if(!obj){\n            setName(\"\")\n            setOrgType(\"\")\n            setFacilityId(\"\")\n            setCostprice(\"\")\n    \n            }\n            \n           /*  setValue(\"facility\", obj._id,  {\n                shouldValidate: true,\n                shouldDirty: true\n            }) */\n        }\n        const handleBenefit=(e)=>{\n   \n            setBenefittingPlans(prevstate=>prevstate.concat(plan))\n            setPlan(\"\")\n            }\n        \n        const handleRemove=(index, contract)=>{\n            //console.log(index)\n            if (contract.billing_type===\"Cash\"){\n                toast({\n                    message: 'You cannot remove cash billing' ,\n                    type: 'is-danger',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  })\n                return\n            }\n        \n           //setProductItem(prevstate=> prevstate.splice(i,1))\n           setProductItem(prevstate=> prevstate.filter((ProductionItem, i) => i !== index));\n           \n          /*  const newProductitem = [...productItem]\n           newProductitem.splice(i,1)\n           setProductItem(newProductitem) */\n        }\n        const handleAddPanel =()=>{\n           // setSuccessService(false) \n           let newService={\n               serviceId:service._id,\n               service_name:service.name,\n               panel:service.panel\n           }\n            setPanelList(prevstate=>prevstate.concat(newService))\n            setSuccessService(true)\n            newService={}\n            setService(\"\")\n            console.log(\"something added\")\n            \n        }\n   const handleCancel=async()=>{\n    const    newServicesModule={\n        selectedServices:Services,\n        show :'detail'\n      }\n   await setState((prevstate)=>({...prevstate, ServicesModule:newServicesModule}))\n   //console.log(state)\n           }\n\n\n        const changeState =(resp)=>{\n        const    newServicesModule={\n            selectedServices:resp,\n            show :'detail'\n        }\n        setState((prevstate)=>({...prevstate, ServicesModule:newServicesModule}))\n\n        }\n    const handleDelete=async()=>{\n        let conf=window.confirm(\"Are you sure you want to delete this data?\")\n        \n        const dleteId=Services._id\n        if (conf){\n             \n        ServicesServ.remove(dleteId)\n        .then((res)=>{\n                //console.log(JSON.stringify(res))\n                reset();\n               /*  setMessage(\"Deleted Services successfully\")\n                setSuccess(true)\n                changeState()\n               setTimeout(() => {\n                setSuccess(false)\n                }, 200); */\n                toast({\n                    message: 'Services deleted succesfully',\n                    type: 'is-success',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  })\n                changeState()\n            })\n            .catch((err)=>{\n               // setMessage(\"Error deleting Services, probable network issues \"+ err )\n               // setError(true)\n                toast({\n                    message: \"Error deleting Services, probable network issues or \"+ err,\n                    type: 'is-danger',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  })\n            })\n        }\n    }\n        \n\n   /* ()=> setValue(\"firstName\", \"Bill\", , {\n            shouldValidate: true,\n            shouldDirty: true\n          })) */\n    const onSubmit = () =>{\n       // e.preventDefault();\n       if(panel && (panelList.length===0)){\n        toast({\n            message: \"Please choose services that make up panel or uncheck panel \",\n            type: 'is-danger',\n            dismissible: true,\n            pauseOnHover: true,\n          })\n          return   \n       }\n        \n        setSuccess(false)\n        let data ={\n            name:source,\n            category:categoryname,\n            facility:user.currentEmployee.facilityDetail._id,\n            facilityname:user.currentEmployee.facilityDetail.facilityName,\n            panel:panel,\n            panelServices:panelList,\n            contracts:productItem,\n            updatedBy:user._id\n        }\n        console.log(Services)\n        console.log(data)\n        //data.facility=Services.facility\n          //console.log(data);\n          \n       ServicesServ.patch(Services._id,data)\n        .then((res)=>{\n                console.log(JSON.stringify(res))\n               // e.target.reset();\n               // setMessage(\"updated Services successfully\")\n                  toast({\n                    message: 'Services updated succesfully',\n                    type: 'is-success',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  })\n                  \n                changeState(res)\n\n            })\n            .catch((err)=>{ \n                //setMessage(\"Error creating Services, probable network issues \"+ err )\n               // setError(true)\n                toast({\n                    message: \"Error updating Services, probable network issues or \"+ err,\n                    type: 'is-danger',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  })\n            })\n \n      } \n     const handleModCon=async (contract,i)=>{\n        \n         setModCon(contract)\n         setYam(true) \n         setPos(i)\n        \n     }\n      \n    return (\n        \n        <>\n        <div className=\"card \">\n            <div className=\"card-header\">\n                <p className=\"card-header-title\">\n                    Services Details-Modify\n                </p>\n            </div>\n            \n            <div className=\"card-content vscrollable\">\n   \n   {/* <form onSubmit={onSubmit}>  */}{/* handleSubmit(onSubmit) */}\n   <div className=\"field is-horizontal\">\n   <div className=\"field-body\">\n       <div className=\"field is-expanded\"  /* style={ !user.stacker?{display:\"none\"}:{}} */ >\n                    <CategorySearch id={Services.category}  getSearchfacility={getSearchfacility2} clear={success2} /> \n                    <p className=\"control has-icons-left \" style={{display:\"none\"}}>\n                        {/* <input className=\"input is-small\"   ref={register ({ required: true }) }  add array no   value={categoryname} name=\"categoryname\" type=\"text\" onChange={e=>setCategoryName(e.target.value)} placeholder=\"Category of Service\" /> */}\n                        <span className=\"icon is-small is-left\">\n                        <i className=\"fas  fa-map-marker-alt\"></i>\n                        </span>\n                    </p>\n                </div>\n   <div className=\"field\">\n           <p className=\"control has-icons-left has-icons-right\">\n               <input className=\"input is-small\" /* ref={register({ required: true })} */ value={source} name=\"source\" type=\"text\" onChange={e=>setSource(e.target.value)} onBlur={handleCheck} placeholder=\"Name of Service\" autoComplete=\"false\" />\n               <span className=\"icon is-small is-left\">\n                   <i className=\"fas fa-hospital\"></i>\n               </span>                    \n           </p>\n       </div>\n  \n   </div>\n   </div> \n\n     \n   <div className=\"field is-horizontal\">\n      <div className=\"field-body\">\n       <div className=\"field\">\n           <p className=\"control has-icons-left has-icons-right\">\n               <label className=\"label is-small\" >\n               <input className=\"checkbox is-small\"  /* ref={register({ required: true })} */ checked={panel}  name=\"panel\" type=\"checkbox\" onChange={e=>setPanel(e.target.checked)} /* placeholder=\"Date\" */ />\n           \n               <span>Panel</span></label>\n           </p>\n       </div>\n\n   {panel && <>\n       <div className=\"field\">\n           <div className=\"field is-expanded\"  /* style={ !user.stacker?{display:\"none\"}:{}} */ >\n               <ServiceSearch  getSearchService={getSearchService} clear={successService} /> \n               <p className=\"control has-icons-left \" style={{display:\"none\"}}>\n                   <input className=\"input is-small\" /* ref={register ({ required: true }) }  *//* add array no   value={facilityId} name=\"facilityId\" type=\"text\" onChange={e=>setFacilityId(e.target.value)} placeholder=\"Product Id\"*/ />\n                   <span className=\"icon is-small is-left\">\n                   <i className=\"fas  fa-map-marker-alt\"></i>\n                   </span>\n               </p>\n           </div>  \n       </div>\n       <p className=\"control\">\n                   <button className=\"button is-info is-small  is-pulled-right selectadd\">\n                   <span className=\"is-small\" onClick={handleAddPanel}> +</span>\n                   </button>\n               </p>\n   </> }\n\n       </div> \n       </div> \n\n  {(panel && panelList.length>0) &&     <div>\n  <strong> Panel Items:</strong> {panelList.map((plan,i)=>(\n               <span key={i} className=\"ml-1\">\n                   {plan.service_name};\n                   </span>))}\n    </div>\n   }       \n\n     {/*   </form>    */}\n      \n  \n{/* array of Services items */}\n\n<label className=\"label is-small\">Add Pricing Info:</label>\n{(productItem.length>0) ? <> \n       <div className=\"field is-horizontal\">\n       <div className=\"field-body\">\n           <div className=\"field is-expanded\"  /* style={ !user.stacker?{display:\"none\"}:{}} */ >\n               <FacilitySearch  getSearchfacility={getSearchfacility} clear={success} /> \n               <p className=\"control has-icons-left \" style={{display:\"none\"}}>\n                   <input className=\"input is-small\" /* ref={register ({ required: true }) }  *//* add array no */  value={facilityId} name=\"facilityId\" type=\"text\" onChange={e=>setFacilityId(e.target.value)} placeholder=\"Product Id\" />\n                   <span className=\"icon is-small is-left\">\n                   <i className=\"fas  fa-map-marker-alt\"></i>\n                   </span>\n               </p>\n           </div>\n       {/*  <div className=\"field\">\n           <p className=\"control has-icons-left\">\n               <input className=\"input is-small\"  ref={register({ required: true })}  name=\"quantity\" value={quantity} type=\"text\" onChange={e=>setQuantity(e.target.value)} placeholder=\"Quantity\"  />\n               <span className=\"icon is-small is-left\">\n               <i className=\"fas fa-envelope\"></i>\n               </span>\n           </p>\n\n       </div>  */}\n       <div className=\"field\">\n           <p className=\"control has-icons-left\">\n               <input className=\"input is-small\" /* ref={register({ required: true })} */ name=\"costprice\" value={costprice} type=\"text\" onChange={e=>setCostprice(e.target.value)} placeholder=\"Price\"  />\n               <span className=\"icon is-small is-left\">\n               <i className=\"fas fa-dollar-sign\"></i>\n               </span>\n           </p>\n       </div>\n       <div className=\"field\">\n       <p className=\"control\">\n               <button className=\"button is-info is-small  is-pulled-right selectadd\">\n               <span className=\"is-small\" onClick={handleClickProd}>+</span>\n               </button>\n           </p>\n               </div>\n               </div>\n           </div>\n    <div className=\"field is-horizontal\">\n       <div className=\"field-body\">\n        <div className=\"field\">\n           \n           <div className=\"field has-addons\" /* style={{display:`${ProductEntry.show}`} }*/ >\n                     <div className=\"control\">\n                         <input  className=\"input selectadd\" type=\"text\" name=\"plan\"  value={plan} onChange={e=>setPlan(e.target.value)} placeholder=\"Benefitting Plans\" />\n                         </div> \n                         <div className=\"control\">\n                         <button className=\"button is-info selectadd\" onClick={(e)=>handleBenefit(e)}>add</button>\n                         </div>\n                         </div>\n                       \n        </div>\n        <div className=\"field is-expanded pull-left\">\n        {benefittingplans && benefittingplans.map((plan,i)=>(\n               <span key={i} className=\"ml-1\">\n                   {plan};\n               </span>\n            ))}\n        </div>\n       </div>\n     </div>\n   </>:\n   <>\n     <div className=\"field is-horizontal\">\n       <div className=\"field-body\">\n           <div className=\"field\">\n               <p className=\"control has-icons-left\">\n                   <input className=\"input is-small\" /* ref={register({ required: true })} */ disabled name=\"cash\" value={cash} type=\"text\" onChange={e=>setCash(e.target.value)} /* placeholder=\"Cost Price\" */  />\n                   <span className=\"icon is-small is-left\">\n                   <i className=\"fas fa-dollar-sign\"></i>\n                   </span>\n               </p>\n               </div>\n           <div className=\"field\">\n               <p className=\"control has-icons-left\">\n                   <input className=\"input is-small\" /* ref={register({ required: true })} */ name=\"costprice\" value={costprice} type=\"text\" onChange={e=>setCostprice(e.target.value)} placeholder=\"Price\"  />\n                   <span className=\"icon is-small is-left\">\n                   <i className=\"fas fa-dollar-sign\"></i>\n                   </span>\n               </p>\n           </div>\n           <div className=\"field\">\n               <p className=\"control\">\n                   <button className=\"button is-info is-small  is-pulled-right selectadd\">\n                   <span className=\"is-small\" onClick={handleClickProd}>+</span>\n                   </button>\n               </p>\n           </div>\n       </div>\n     </div>\n    \n\n   </> }\n \n   \n{(productItem.length>0) && <div>\n   <label>Prices:</label>\n<table className=\"table is-striped  is-hoverable is-fullwidth is-scrollable \">\n       <thead>\n           <tr>\n           <th><abbr title=\"Serial No\">S/No</abbr></th>\n           <th><abbr title=\"Source Organization\">Organization</abbr></th>\n           <th><abbr title=\"Price\">Amount</abbr></th>\n           <th><abbr title=\"Billing Type\">Billing Type</abbr></th>\n           <th><abbr title=\"Benefitting Plans\">Plans</abbr></th>\n             {/*  <th><abbr title=\"Cost Price\">Amount</abbr></th>*/}\n           <th><abbr title=\"Actions\">Actions</abbr></th> \n           </tr>\n       </thead>\n       <tfoot>\n           \n       </tfoot>\n       <tbody>\n          { productItem.map((Services, i)=>(\n\n               <tr key={i} onClick={()=>handleModCon(Services,i)}>\n               <th>{i+1}</th>\n               <td>{Services.source_org_name}</td>\n               <th>{Services.price}</th>\n              <td>{Services.billing_type}</td>\n               <td>  {Services.plan && Services.plans.map((plan,i)=>(\n               <span key={i} className=\"ml-1\">\n                   {plan};\n               </span>\n            ))}</td>\n                 {/*<td>{Services.amount}</td> */}\n               <td><span className=\"showAction\" onClick={()=>handleRemove(i,Services)} >x</span>\n               </td>\n               \n               </tr>\n\n           ))}\n       </tbody>\n       </table>\n      {/*  <div className=\"field mt-2\">\n       <p className=\"control\">\n           <button className=\"button is-success is-small\" disabled={!productItem.length>0} onClick={onSubmit}>\n               Create\n           </button>\n       </p>\n       </div> */}\n       </div>\n  \n   } \n            <div className=\"field  is-grouped mt-2\" >\n                <p className=\"control\">\n                    <button type=\"submit\" className=\"button is-success is-small\" onClick={onSubmit}>\n                        Save\n                    </button>\n                </p>\n                <p className=\"control\">\n                    <button className=\"button is-warning is-small\" onClick={handleCancel}>\n                        Cancel\n                    </button>\n                </p>\n                {/* <p className=\"control\">\n                    <button className=\"button is-danger is-small\" onClick={()=>handleDelete()} type=\"delete\">\n                       Delete\n                    </button>\n                </p> */}\n            </div>\n        </div>\n        </div>\n        </>\n    )              \n}   \n\nexport  function ServiceSearch({getSearchService,clear,notfound}) {\n    \n    const productServ=client.service('billing')\n    const [facilities,setFacilities]=useState([])\n     // eslint-disable-next-line\n     const [searchError, setSearchError] =useState(false)\n     // eslint-disable-next-line\n    const [showPanel, setShowPanel] =useState(false)\n     // eslint-disable-next-line\n   const [searchMessage, setSearchMessage] = useState(\"\") \n   // eslint-disable-next-line \n   const [simpa,setSimpa]=useState(\"\")\n   // eslint-disable-next-line \n   const [chosen,setChosen]=useState(false)\n   // eslint-disable-next-line \n   const [count,setCount]=useState(0)\n   const inputEl=useRef(null)\n   const [val,setVal]=useState(\"\")\n    const [productModal,setProductModal]=useState(false)\n\n   const handleRow= async(obj)=>{\n        await setChosen(true)\n        await setSimpa(obj.name)\n       // alert(\"something is chaning\")\n        //console.log(obj)\n       getSearchService(obj)\n       \n      \n       \n        // setSelectedFacility(obj)\n        setShowPanel(false)\n        await setCount(2)\n        /* const    newfacilityModule={\n            selectedFacility:facility,\n            show :'detail'\n        }\n   await setState((prevstate)=>({...prevstate, facilityModule:newfacilityModule})) */\n   //console.log(state)\n}\n    const handleBlur=async(e)=>{\n         if (count===2){\n             console.log(\"stuff was not chosen\")\n         }\n       \n       /*  console.log(\"blur\")\n         setShowPanel(false)\n        console.log(JSON.stringify(simpa))\n        if (simpa===\"\"){\n            console.log(facilities.length)\n            setSimpa(\"abc\")\n            setSimpa(\"\")\n            setFacilities([])\n            inputEl.current.setValue=\"\"\n        }\n        console.log(facilities.length)\n        console.log(inputEl.current) */\n    }\n    const handleSearch=async(value)=>{\n        setVal(value)\n        if (value===\"\"){\n            setShowPanel(false)\n            getSearchService(false)\n            await setFacilities([])\n            return\n        }\n        const field='name' //field variable\n\n       \n        if (value.length>=3 ){\n            productServ.find({query: {     //service\n                 [field]: {\n                     $regex:value,\n                     $options:'i'\n                    \n                 },\n                 $limit:10,\n                 $sort: {\n                     createdAt: -1\n                   }\n                     }}).then((res)=>{\n             // console.log(\"product  fetched successfully\") \n              //console.log(res.data) \n              //...new Set(array)\n             \n              const uniqueArr = [...new Set(res.data.map(data => data.name ))]\n             // console.log(uniqueArr)\n              let uniqueObj=[]\n              uniqueArr.forEach((obj)=>{\n                uniqueObj.push((res.data.find((el)=>el.name==obj)))\n              //  console.log(uniqueObj)\n              })\n              //console.log(uniqueObj)\n                setFacilities(uniqueObj)\n                 setSearchMessage(\" product  fetched successfully\")\n                 setShowPanel(true)\n             })\n             .catch((err)=>{\n                toast({\n                    message: 'Error creating Services ' + err,\n                    type: 'is-danger',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  })\n             })\n         }\n        else{\n           // console.log(\"less than 3 \")\n            //console.log(val)\n            setShowPanel(false)\n            await setFacilities([])\n            //console.log(facilities)\n        }\n    }\n\n    const handleAddproduct =(val)=>{\n        setProductModal(true) \n        setShowPanel(false)\n        notfound({\n            status:true,\n            name:val\n            })\n    }\n    const handlecloseModal =()=>{\n        setProductModal(false)\n        handleSearch(val)\n    }\n    useEffect(() => {\n       if (clear){\n          \n           console.log(\"success has changed\",clear)\n           setSimpa(\"\")\n         \n\n       }\n        return () => {\n            \n        }\n    }, [clear] )\n\n  \n    return (\n        <div>\n            <div className=\"field\">\n                <div className=\"control has-icons-left  \">\n                    <div className={`dropdown ${showPanel?\"is-active\":\"\"}`}  style={{width:\"100%\"}}>\n                        <div className=\"dropdown-trigger\"  style={{width:\"100%\"}}>\n                            <DebounceInput className=\"input is-small \" \n                                type=\"text\" placeholder=\"Search Services\"\n                                value={simpa}\n                                minLength={3}\n                                debounceTimeout={400}\n                                onBlur={(e)=>handleBlur(e)}\n                                onChange={(e)=>handleSearch(e.target.value)}\n                                inputRef={inputEl}\n                                  />\n                            <span className=\"icon is-small is-left\">\n                                <i className=\"fas fa-search\"></i>\n                            </span>\n                        </div>\n                        {/* {searchError&&<div>{searchMessage}</div>} */}\n                        <div className=\"dropdown-menu\"   style={{width:\"100%\"}}>\n                            <div className=\"dropdown-content\">\n                          { facilities.length>0?\"\":<div className=\"dropdown-item\" onClick={()=>handleAddproduct(val)}> <span>Add {val} to service list</span>  </div>}\n\n                              {facilities.map((facility, i)=>(\n                                    \n                                    <div className=\"dropdown-item\" key={facility._id} onClick={()=>handleRow(facility)}>\n                                        \n                                        <span>{facility.name} ({facility.category})</span>\n                                        \n                                    </div>\n                                    \n                                    ))}\n                                    \n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}