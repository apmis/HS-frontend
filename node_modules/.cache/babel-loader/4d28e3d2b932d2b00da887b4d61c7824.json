{"ast":null,"code":"import _defineProperty from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import _regeneratorRuntime from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _toConsumableArray from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _asyncToGenerator from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _slicedToArray from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";/* eslint-disable */import React,{useState,useContext,useEffect,useRef}from'react';import client from'../../feathers';import{DebounceInput}from'react-debounce-input';import{useForm}from\"react-hook-form\";//import {useHistory} from 'react-router-dom'\nimport{UserContext,ObjectContext}from'../../context';import{toast}from'bulma-toast';import{format,formatDistanceToNowStrict}from'date-fns';import ReportCreate from'./ReportCreate';import PatientProfile from'../ClientMgt/PatientProfile';/* import {ProductCreate} from './Products' */ // eslint-disable-next-line\n//const searchfacility={};\nimport{Accordion,AccordionItem,AccordionItemHeading,AccordionItemState,AccordionItemButton,AccordionItemPanel}from'react-accessible-accordion';// Demo styles, see 'Styles' section below for some notes on use.\nimport'react-accessible-accordion/dist/fancy-example.css';//import BillPrescriptionCreate from './BillPrescriptionCreate';\nexport default function CaseDefinition(){//const {state}=useContext(ObjectContext) //,setState\n// eslint-disable-next-line\nvar _useState=useState(),_useState2=_slicedToArray(_useState,2),selectedProductEntry=_useState2[0],setSelectedProductEntry=_useState2[1];//const [showState,setShowState]=useState() //create|modify|detail\nvar _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];// eslint-disable-next-line\nvar _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),success=_useState6[0],setSuccess=_useState6[1];// eslint-disable-next-line\nvar _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),message=_useState8[0],setMessage=_useState8[1];var BillServ=client.service('casedefinition');//const history = useHistory()\n// const {user,setUser} = useContext(UserContext)\nvar _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),facilities=_useState10[0],setFacilities=_useState10[1];// eslint-disable-next-line\nvar _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),selectedOrders=_useState12[0],setSelectedOrders=_useState12[1];//\n// eslint-disable-next-line\nvar _useContext=useContext(ObjectContext),state=_useContext.state,setState=_useContext.setState;// eslint-disable-next-line\nvar _useContext2=useContext(UserContext),user=_useContext2.user,setUser=_useContext2.setUser;return/*#__PURE__*/_jsx(\"section\",{className:\"section remPadTop\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"columns \",children:[/*#__PURE__*/_jsx(\"div\",{className:\"column is-6 \",children:/*#__PURE__*/_jsx(CaseDefinitionList,{})}),/*#__PURE__*/_jsxs(\"div\",{className:\"column is-6 \",children:[state.EpidemiologyModule.show==='create'&&/*#__PURE__*/_jsx(CaseDefinitionCreate,{}),state.EpidemiologyModule.show==='detail'&&/*#__PURE__*/_jsx(CaseDefinitionDetail,{})]})]})});}export function CaseDefinitionCreate(){var _useForm=useForm(),register=_useForm.register,handleSubmit=_useForm.handleSubmit,setValue=_useForm.setValue;//, watch, errors, reset \nvar _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),error=_useState14[0],setError=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),success=_useState16[0],setSuccess=_useState16[1];var _useState17=useState(\"\"),_useState18=_slicedToArray(_useState17,2),message=_useState18[0],setMessage=_useState18[1];// eslint-disable-next-line\nvar _useState19=useState(),_useState20=_slicedToArray(_useState19,2),facility=_useState20[0],setFacility=_useState20[1];var BandServ=client.service('casedefinition');//const history = useHistory()\nvar _useContext3=useContext(UserContext),user=_useContext3.user;//,setUser\n// eslint-disable-next-line\nvar _useState21=useState(),_useState22=_slicedToArray(_useState21,2),currentUser=_useState22[0],setCurrentUser=_useState22[1];var bandTypeOptions=[\"Immediate Notification\",\"Weekly\",\"Monthly\"];var notifierOptions=[\"Facility Focal Person\",\"DSNO\",\"Asst DSNO\",\"State Epidemiologist\"];var _useState23=useState(\"\"),_useState24=_slicedToArray(_useState23,2),finding=_useState24[0],setFinding=_useState24[1];var _useState25=useState([]),_useState26=_slicedToArray(_useState25,2),findings=_useState26[0],setFindings=_useState26[1];var _useState27=useState(false),_useState28=_slicedToArray(_useState27,2),findingreq=_useState28[0],setFindingreq=_useState28[1];var _useState29=useState(\"\"),_useState30=_slicedToArray(_useState29,2),symptom=_useState30[0],setSymptom=_useState30[1];var _useState31=useState([]),_useState32=_slicedToArray(_useState31,2),symptoms=_useState32[0],setSymptoms=_useState32[1];var _useState33=useState(\"\"),_useState34=_slicedToArray(_useState33,2),duration=_useState34[0],setDuration=_useState34[1];var _useState35=useState(false),_useState36=_slicedToArray(_useState35,2),sympreq=_useState36[0],setSympreq=_useState36[1];var _useState37=useState(\"\"),_useState38=_slicedToArray(_useState37,2),lab=_useState38[0],setLab=_useState38[1];var _useState39=useState([]),_useState40=_slicedToArray(_useState39,2),labs=_useState40[0],setLabs=_useState40[1];var _useState41=useState(\"\"),_useState42=_slicedToArray(_useState41,2),labvalue=_useState42[0],setLabvalue=_useState42[1];/* const [sympreq,setSympreq] = useState(false) */var _useState43=useState([]),_useState44=_slicedToArray(_useState43,2),observations=_useState44[0],setObservations=_useState44[1];var _useState45=useState(\"\"),_useState46=_slicedToArray(_useState45,2),mgtProtocol=_useState46[0],setMgtProtocol=_useState46[1];var _useState47=useState(\"\"),_useState48=_slicedToArray(_useState47,2),notified=_useState48[0],setNotified=_useState48[1];var getSearchfacility=function getSearchfacility(obj){setValue(\"facility\",obj._id,{shouldValidate:true,shouldDirty:true});};useEffect(function(){setCurrentUser(user);//console.log(currentUser)\nreturn function(){};},[user]);//check user for facility or get list of facility  \nuseEffect(function(){//setFacility(user.activeBand.FacilityId)//\nif(!user.stacker){setValue(\"facility\",user.currentEmployee.facilityDetail._id,{shouldValidate:true,shouldDirty:true});}});var handleChecked=function handleChecked(e){// console.log(e.target.checked)\nsetSympreq(e.target.checked);};var handleChecked2=function handleChecked2(e){// console.log(e.target.checked)\nsetFindingreq(e.target.checked);};var onSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(data,e){var sympcollection,findingscollection,labscollection,notifiedlist;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();/*  data.Presenting_Complaints=symptoms\n        data.Clinical_Findings=findings */ //data.LaboratoryConfirmation=labconfirms\ndata.observations=[];data.disease={name:data.disease,icdcode:\"\",icdver:\"\",snomed:\"\",snomedver:\"\"};if(!(data.notificationtype===\"\")){_context.next=6;break;}alert(\"Kindly choose notification type\");return _context.abrupt(\"return\");case 6:if(symptoms.length>0){sympcollection=[];symptoms.forEach(function(el){var obs={category:\"symptoms\",name:el.symptom,duration:el.duration,/* note:\"\",\n                    snomed:\"\" ,\n                    response:\"\" , */required:el.sympreq/* value:\"\"  */};console.log(obs);sympcollection.push(obs);console.log(sympcollection);});data.observations=[].concat(_toConsumableArray(data.observations),sympcollection);}if(findings.length>0){findingscollection=[];findings.forEach(function(el){var obs={category:\"Signs\",name:el.finding,/*  duration:el.duration , */ /* note:\"\",\n                    snomed:\"\" ,\n                    response:\"\" , */required:el.findingreq/* value:\"\"  */};findingscollection.push(obs);});data.observations=[].concat(_toConsumableArray(data.observations),findingscollection);}if(labs.length>0){labscollection=[];labs.forEach(function(el){var obs={category:\"Laboratory\",name:el.lab,/*  duration:el.duration , */ /* note:\"\",\n                    snomed:\"\" ,\n                    response:\"\" , */ /*  required:el.findingreq, */value:el.labvalue};labscollection.push(obs);});data.observations=[].concat(_toConsumableArray(data.observations),labscollection);}notifiedlist=[];notifiedlist.push(data.notifiedPerson);console.log(notifiedlist);data.notification_destination=notifiedlist[0];data.treatmentprotocol=mgtProtocol;// await setObservations((prev)=>([...prev, symp]))\nsetMessage(\"\");setError(false);setSuccess(false);// data.createdby=user._id\nconsole.log(data);if(user.currentEmployee){data.facility=user.currentEmployee.facilityDetail._id;// or from facility dropdown\n}BandServ.create(data).then(function(res){//console.log(JSON.stringify(res))\ne.target.reset();/*  setMessage(\"Created Band successfully\") */setSuccess(true);/*   setAllergies([]) */setSymptoms([]);setFindings([]);setLabs([]);setMgtProtocol([]);toast({message:'Band created succesfully',type:'is-success',dismissible:true,pauseOnHover:true});setSuccess(false);}).catch(function(err){toast({message:'Error creating Band '+err,type:'is-danger',dismissible:true,pauseOnHover:true});});case 20:case\"end\":return _context.stop();}}},_callee);}));return function onSubmit(_x,_x2){return _ref.apply(this,arguments);};}();var handleAddSymptoms=function handleAddSymptoms(){var newsymptom={symptom:symptom,duration:duration,sympreq:sympreq};console.log(newsymptom);setSymptoms(function(prev){return[].concat(_toConsumableArray(prev),[newsymptom]);});// setAllergy({})\nsetSymptom(\"\");setDuration(\"\");setSympreq(false);};var handleAddFindings=function handleAddFindings(){var newFinding={finding:finding,findingreq:findingreq};console.log(newFinding);setFindings(function(prev){return[].concat(_toConsumableArray(prev),[newFinding]);});// setAllergy({})\nsetFinding(\"\");setFindingreq(false);};var handleAddLabs=function handleAddLabs(){var newLabs={lab:lab,labvalue:labvalue};console.log(newLabs);setLabs(function(prev){return[].concat(_toConsumableArray(prev),[newLabs]);});// setAllergy({})\nsetLab(\"\");setLabvalue(\"\");/*  setFindingreq(false) */};var onDelete=function onDelete(comp,i){//console.log(comp,i)\nsetSymptoms(function(prevstate){return prevstate.filter(function(el,index){return index!==i;});});};var onDeleteFinding=function onDeleteFinding(comp,i){//console.log(comp,i)\nsetFindings(function(prevstate){return prevstate.filter(function(el,index){return index!==i;});});};var onDeleteLab=function onDeleteLab(comp,i){//console.log(comp,i)\nsetLabs(function(prevstate){return prevstate.filter(function(el,index){return index!==i;});});};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"card \",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsx(\"p\",{className:\"card-header-title\",children:\"Create Case Definition\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-content vscrollable\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsx(\"div\",{className:\"control\",children:/*#__PURE__*/_jsx(\"div\",{className:\"select is-small \",children:/*#__PURE__*/_jsxs(\"select\",{name:\"notificationtype\",ref:register({required:true})/* onChange={(e)=>handleChangeMode(e.target.value)} */,className:\"selectadd\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Choose Notification Type \"}),bandTypeOptions.map(function(option,i){return/*#__PURE__*/_jsxs(\"option\",{value:option,children:[\" \",option]},i);})]})})})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left has-icons-right\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register({required:true}),name:\"disease\",type:\"text\",placeholder:\"Name of Disease\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-map-signs\"})})]})}),/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h3\",{className:\" mt-2\",children:/*#__PURE__*/_jsx(\"b\",{children:\"Symptoms\"})}),/*#__PURE__*/_jsx(\"input\",{className:\"input is-small is-hidden\",ref:register,name:\"Symptoms\",type:\"text\",placeholder:\"Specify\"}),/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field-body ml-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsx(\"p\",{className:\"control \",children:/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",value:symptom/* ref={register} */,onChange:function onChange(e){setSymptom(e.target.value);},name:\"symptom\",type:\"text\",placeholder:\"Symptom\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsx(\"p\",{className:\"control \",children:/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",value:duration/* ref={register} */,onChange:function onChange(e){setDuration(e.target.value);},name:\"durationn\",type:\"text\",placeholder:\"Duration\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"label\",{className:\" is-small\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",value:sympreq,name:\"sympreq\",onChange:function onChange(e){handleChecked(e);}/* ref={register} */}),\"Required\"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsx(\"div\",{className:\"control\",children:/*#__PURE__*/_jsx(\"div\",{className:\"button is-success is-small selectadd\",onClick:handleAddSymptoms,children:\"Add\"})})})]})}),/*#__PURE__*/_jsxs(\"table\",{className:\"table is-striped  is-hoverable is-fullwidth is-scrollable mr-2\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Serial No\",children:\"S/No\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Type\",children:\" Symptom\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Destination\",children:\"Duration\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Destination\",children:\"Required\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Action\",children:\" Action\"})})]})}),/*#__PURE__*/_jsx(\"tfoot\",{}),/*#__PURE__*/_jsx(\"tbody\",{children:symptoms.map(function(ProductEntry,i){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:i+1}),/*#__PURE__*/_jsx(\"td\",{children:ProductEntry.symptom}),/*#__PURE__*/_jsx(\"td\",{children:ProductEntry.duration}),/*#__PURE__*/_jsx(\"td\",{children:ProductEntry.sympreq.toString()}),/*#__PURE__*/_jsx(\"td\",{onClick:function onClick(){return onDelete(ProductEntry,i);},children:\"x\"})]},i);})})]})]}),/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h3\",{className:\" mt-2\",children:/*#__PURE__*/_jsx(\"b\",{children:\"Clinical Signs\"})}),/*#__PURE__*/_jsx(\"input\",{className:\"input is-small is-hidden\",ref:register,name:\"ClinicalFindings\",type:\"text\",placeholder:\"Specify\"}),/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field-body ml-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsx(\"p\",{className:\"control \",children:/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",value:finding/* ref={register} */,onChange:function onChange(e){setFinding(e.target.value);},name:\"finding\",type:\"text\",placeholder:\"Finding\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"label\",{className:\" is-small\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",value:findingreq,name:\"sympreq\",onChange:function onChange(e){handleChecked2(e);}/* ref={register} */}),\"Required\"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsx(\"div\",{className:\"control\",children:/*#__PURE__*/_jsx(\"div\",{className:\"button is-success is-small selectadd\",onClick:handleAddFindings,children:\"Add\"})})})]})}),/*#__PURE__*/_jsxs(\"table\",{className:\"table is-striped  is-hoverable is-fullwidth is-scrollable mr-2\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Serial No\",children:\"S/No\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Type\",children:\" Finding\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Destination\",children:\"Required\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Action\",children:\" Action\"})})]})}),/*#__PURE__*/_jsx(\"tfoot\",{}),/*#__PURE__*/_jsx(\"tbody\",{children:findings.map(function(ProductEntry,i){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:i+1}),/*#__PURE__*/_jsx(\"td\",{children:ProductEntry.finding}),/*#__PURE__*/_jsx(\"td\",{children:ProductEntry.findingreq.toString()}),/*#__PURE__*/_jsx(\"td\",{onClick:function onClick(){return onDeleteFinding(ProductEntry,i);},children:\"x\"})]},i);})})]})]}),/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h3\",{className:\" mt-2\",children:/*#__PURE__*/_jsx(\"b\",{children:\"Laboratory Confirmation\"})}),/*#__PURE__*/_jsx(\"input\",{className:\"input is-small is-hidden\",ref:register,name:\"LaboratoryConfirmation\",type:\"text\",placeholder:\"Specify\"}),/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field-body ml-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsx(\"p\",{className:\"control \",children:/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",value:lab/* ref={register} */,onChange:function onChange(e){setLab(e.target.value);},name:\"lab\",type:\"text\",placeholder:\"Lab\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsx(\"p\",{className:\"control \",children:/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",value:labvalue/* ref={register} */,onChange:function onChange(e){setLabvalue(e.target.value);},name:\"lab value\",type:\"text\",placeholder:\" Value\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsx(\"div\",{className:\"control\",children:/*#__PURE__*/_jsx(\"div\",{className:\"button is-success is-small selectadd\",onClick:handleAddLabs,children:\"Add\"})})})]})}),/*#__PURE__*/_jsxs(\"table\",{className:\"table is-striped  is-hoverable is-fullwidth is-scrollable mr-2\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Serial No\",children:\"S/No\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Type\",children:\" Test\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Destination\",children:\"Value\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Action\",children:\" Action\"})})]})}),/*#__PURE__*/_jsx(\"tfoot\",{}),/*#__PURE__*/_jsx(\"tbody\",{children:labs.map(function(ProductEntry,i){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:i+1}),/*#__PURE__*/_jsx(\"td\",{children:ProductEntry.lab}),/*#__PURE__*/_jsx(\"td\",{children:ProductEntry.labvalue}),/*#__PURE__*/_jsx(\"td\",{onClick:function onClick(){return onDeleteLab(ProductEntry,i);},children:\"x\"})]},i);})})]})]}),/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"field-body ml-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"is-small\",children:\"Management Protocol\"}),/*#__PURE__*/_jsx(\"p\",{className:\"control mt-1 mb-2\",children:/*#__PURE__*/_jsx(\"textarea\",{className:\"textarea is-small\",value:mgtProtocol/* ref={register} */,onChange:function onChange(e){setMgtProtocol(e.target.value);},name:\"mgtProtocol\",type:\"text\",placeholder:\"Mangement Protocol\"})})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"field  ml-3 mt-2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"control\",children:/*#__PURE__*/_jsx(\"div\",{className:\"select is-small \",children:/*#__PURE__*/_jsxs(\"select\",{name:\"notifiedPerson\",ref:register({required:true})/* onChange={(e)=>handleChangeMode(e.target.value)} */,className:\"selectadd\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Choose Person to Notify \"}),notifierOptions.map(function(option,i){return/*#__PURE__*/_jsxs(\"option\",{value:option,children:[\" \",option]},i);})]})})})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsx(\"p\",{className:\"control\",children:/*#__PURE__*/_jsx(\"button\",{className:\"button is-success is-small\",children:\"Create\"})})})]})})]})});}export function CaseDefinitionList(){// const { register, handleSubmit, watch, errors } = useForm();\n// eslint-disable-next-line\nvar _useState49=useState(false),_useState50=_slicedToArray(_useState49,2),error=_useState50[0],setError=_useState50[1];// eslint-disable-next-line\nvar _useState51=useState(false),_useState52=_slicedToArray(_useState51,2),success=_useState52[0],setSuccess=_useState52[1];// eslint-disable-next-line\nvar _useState53=useState(\"\"),_useState54=_slicedToArray(_useState53,2),message=_useState54[0],setMessage=_useState54[1];var BandServ=client.service('casedefinition');//const history = useHistory()\n// const {user,setUser} = useContext(UserContext)\nvar _useState55=useState([]),_useState56=_slicedToArray(_useState55,2),facilities=_useState56[0],setFacilities=_useState56[1];// eslint-disable-next-line\nvar _useState57=useState(),_useState58=_slicedToArray(_useState57,2),selectedBand=_useState58[0],setSelectedBand=_useState58[1];//\n// eslint-disable-next-line\nvar _useContext4=useContext(ObjectContext),state=_useContext4.state,setState=_useContext4.setState;// eslint-disable-next-line\nvar _useContext5=useContext(UserContext),user=_useContext5.user,setUser=_useContext5.setUser;var handleCreateNew=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var newBandModule;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:newBandModule={selectedEpid:{},show:'create'};_context2.next=3;return setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{EpidemiologyModule:newBandModule});});case 3:case\"end\":return _context2.stop();}}},_callee2);}));return function handleCreateNew(){return _ref2.apply(this,arguments);};}();var handleRow=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(Band){var newBandModule;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return setSelectedBand(Band);case 2:newBandModule={selectedEpid:Band,show:'detail'};_context3.next=5;return setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{EpidemiologyModule:newBandModule});});case 5:console.log(newBandModule);case 6:case\"end\":return _context3.stop();}}},_callee3);}));return function handleRow(_x3){return _ref3.apply(this,arguments);};}();var handleSearch=function handleSearch(val){var _query;var field='disease.name';console.log(val);BandServ.find({query:(_query={},_defineProperty(_query,field,{$regex:val,$options:'i'}),_defineProperty(_query,\"facility\",user.currentEmployee.facilityDetail._id||\"\"),_defineProperty(_query,\"$limit\",100),_defineProperty(_query,\"$sort\",{createdAt:-1}),_query)}).then(function(res){console.log(res);setFacilities(res.data);setMessage(\" Band  fetched successfully\");setSuccess(true);}).catch(function(err){console.log(err);setMessage(\"Error fetching Band, probable network issues \"+err);setError(true);});};var getFacilities=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var findBand,_findBand;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(!user.currentEmployee){_context4.next=8;break;}_context4.next=3;return BandServ.find({query:{facility:user.currentEmployee.facilityDetail._id,$limit:200,$sort:{createdAt:-1}}});case 3:findBand=_context4.sent;_context4.next=6;return setFacilities(findBand.data);case 6:_context4.next=14;break;case 8:if(!user.stacker){_context4.next=14;break;}_context4.next=11;return BandServ.find({query:{$limit:200,$sort:{facility:-1}}});case 11:_findBand=_context4.sent;_context4.next=14;return setFacilities(_findBand.data);case 14:case\"end\":return _context4.stop();}}},_callee4);}));return function getFacilities(){return _ref4.apply(this,arguments);};}();useEffect(function(){return function(){};},[]);useEffect(function(){if(user){getFacilities();}else{/* const localUser= localStorage.getItem(\"user\")\n                    const user1=JSON.parse(localUser)\n                    console.log(localUser)\n                    console.log(user1)\n                    fetchUser(user1)\n                    console.log(user)\n                    getFacilities(user) */}BandServ.on('created',function(obj){return getFacilities();});BandServ.on('updated',function(obj){return getFacilities();});BandServ.on('patched',function(obj){return getFacilities();});BandServ.on('removed',function(obj){return getFacilities();});return function(){};},[]);//todo: pagination and vertical scroll bar\nreturn/*#__PURE__*/_jsx(_Fragment,{children:user?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"level\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"level-left\",children:/*#__PURE__*/_jsx(\"div\",{className:\"level-item\",children:/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left  \",children:[/*#__PURE__*/_jsx(DebounceInput,{className:\"input is-small \",type:\"text\",placeholder:\"Search Bands\",minLength:3,debounceTimeout:400,onChange:function onChange(e){return handleSearch(e.target.value);}}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-search\"})})]})})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"level-item\",children:[\" \",/*#__PURE__*/_jsx(\"span\",{className:\"is-size-6 has-text-weight-medium\",children:\"List of Bands \"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"level-right\",children:/*#__PURE__*/_jsx(\"div\",{className:\"level-item\",children:/*#__PURE__*/_jsx(\"div\",{className:\"level-item\",children:/*#__PURE__*/_jsx(\"div\",{className:\"button is-success is-small\",onClick:handleCreateNew,children:\"New\"})})})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"table-container pullup \",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table is-striped is-narrow is-hoverable is-fullwidth is-scrollable \",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Serial No\",children:\"S/No\"})}),/*#__PURE__*/_jsx(\"th\",{children:\"Disease\"}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Notification Type\",children:\"Notification Type\"})}),user.stacker&&/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Facility\",children:\"Facility\"})})]})}),/*#__PURE__*/_jsx(\"tfoot\",{}),/*#__PURE__*/_jsx(\"tbody\",{children:facilities.map(function(Band,i){return/*#__PURE__*/_jsxs(\"tr\",{onClick:function onClick(){return handleRow(Band);},className:Band._id===((selectedBand===null||selectedBand===void 0?void 0:selectedBand._id)||null)?\"is-selected\":\"\",children:[/*#__PURE__*/_jsx(\"th\",{children:i+1}),/*#__PURE__*/_jsx(\"th\",{children:Band.disease.name}),/*#__PURE__*/_jsx(\"td\",{children:Band.notificationtype}),user.stacker&&/*#__PURE__*/_jsx(\"td\",{children:Band.facility})]},Band._id);})})]})})]}):/*#__PURE__*/_jsx(\"div\",{children:\"loading\"})});}export function CaseDefinitionDetail(){//const { register, handleSubmit, watch, setValue } = useForm(); //errors,\n// eslint-disable-next-line\nvar _useState59=useState(false),_useState60=_slicedToArray(_useState59,2),error=_useState60[0],setError=_useState60[1];//, \n//const [success, setSuccess] =useState(false)\n// eslint-disable-next-line\nvar _useState61=useState(\"\"),_useState62=_slicedToArray(_useState61,2),message=_useState62[0],setMessage=_useState62[1];//,\n//const BandServ=client.service('/Band')\n//const history = useHistory()\n//const {user,setUser} = useContext(UserContext)\nvar _useContext6=useContext(ObjectContext),state=_useContext6.state,setState=_useContext6.setState;var Band=state.EpidemiologyModule.selectedEpid;var handleEdit=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){var newBandModule;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:newBandModule={EpidemiologyModule:Band,show:'modify'};_context5.next=3;return setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{EpidemiologyModule:newBandModule});});case 3:case\"end\":return _context5.stop();}}},_callee5);}));return function handleEdit(){return _ref5.apply(this,arguments);};}();return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"card \",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsx(\"p\",{className:\"card-header-title\",children:\"Case Definition Details\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-content vscrollable\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"label\",{className:\"label is-small\",children:[\" \",/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-hospital\"})}),\"Disease :\",/*#__PURE__*/_jsxs(\"span\",{className:\"is-size-7 padleft\",name:\"name\",children:[\" \",Band.disease.name,\" \"]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\" mt-2\",children:/*#__PURE__*/_jsxs(\"label\",{className:\"label is-small\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-map-signs\"})}),\"Notification Type: \",/*#__PURE__*/_jsxs(\"span\",{className:\"is-size-7 padleft\",name:\"BandType\",children:[Band.notificationtype,\" \"]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\" mt-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\" mt-2\",children:/*#__PURE__*/_jsx(\"b\",{children:\" Symptoms \"})}),/*#__PURE__*/_jsxs(\"table\",{className:\"table is-striped  is-hoverable is-fullwidth is-scrollable mr-2\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Serial No\",children:\"S/No\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Type\",children:\" Symptom\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Destination\",children:\"Duration\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Destination\",children:\"Required\"})})]})}),/*#__PURE__*/_jsx(\"tfoot\",{}),/*#__PURE__*/_jsx(\"tbody\",{children:Band.observations.map(function(ProductEntry,i){return/*#__PURE__*/_jsx(_Fragment,{children:ProductEntry.category===\"symptoms\"&&/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:i+1}),/*#__PURE__*/_jsx(\"td\",{children:ProductEntry.name}),/*#__PURE__*/_jsx(\"td\",{children:ProductEntry.duration}),/*#__PURE__*/_jsx(\"td\",{children:ProductEntry.required.toString()})]},i)});})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\" mt-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\" mt-2\",children:/*#__PURE__*/_jsx(\"b\",{children:\"Clinical Signs \"})}),/*#__PURE__*/_jsxs(\"table\",{className:\"table is-striped  is-hoverable is-fullwidth is-scrollable mr-2\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Serial No\",children:\"S/No\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Type\",children:\" Symptom\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Destination\",children:\"Duration\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Destination\",children:\"Required\"})})]})}),/*#__PURE__*/_jsx(\"tfoot\",{}),/*#__PURE__*/_jsx(\"tbody\",{children:Band.observations.map(function(ProductEntry,i){return/*#__PURE__*/_jsx(_Fragment,{children:ProductEntry.category===\"Signs\"&&/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:i+1}),/*#__PURE__*/_jsx(\"td\",{children:ProductEntry.name}),/*#__PURE__*/_jsx(\"td\",{children:ProductEntry.required})]},i)});})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\" mt-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\" mt-2\",children:/*#__PURE__*/_jsx(\"b\",{children:\" Laboratory\"})}),/*#__PURE__*/_jsxs(\"table\",{className:\"table is-striped  is-hoverable is-fullwidth is-scrollable mr-2\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Serial No\",children:\"S/No\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Type\",children:\" Lab Test \"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Destination\",children:\"Value\"})})]})}),/*#__PURE__*/_jsx(\"tfoot\",{}),/*#__PURE__*/_jsx(\"tbody\",{children:Band.observations.map(function(ProductEntry,i){return/*#__PURE__*/_jsx(_Fragment,{children:ProductEntry.category===\"symptoms\"&&/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:i+1}),/*#__PURE__*/_jsx(\"td\",{children:ProductEntry.name}),/*#__PURE__*/_jsx(\"td\",{children:ProductEntry.duration}),/*#__PURE__*/_jsx(\"td\",{children:ProductEntry.required.toString()})]},i)});})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\" mt-2\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"label is-small\",children:[\" \",/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-hospital\"})}),\"Treatment Protocol:\"]}),/*#__PURE__*/_jsxs(\"span\",{className:\"is-size-7 padleft\",name:\"name\",children:[\" \",Band.treatmentprotocol,\" \"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\" mt-2\",children:/*#__PURE__*/_jsxs(\"label\",{className:\"label is-small\",children:[\" \",/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-hospital\"})}),\"Person to Notify :  \",/*#__PURE__*/_jsxs(\"span\",{className:\"is-size-7 padleft\",name:\"name\",children:[\" \",Band.notification_destination[0],\" \"]})]})})]})]})});}export function CaseDefinitionModify(){var _useForm2=useForm(),register=_useForm2.register,handleSubmit=_useForm2.handleSubmit,setValue=_useForm2.setValue,reset=_useForm2.reset,errors=_useForm2.errors;//watch, errors,\n// eslint-disable-next-line \nvar _useState63=useState(false),_useState64=_slicedToArray(_useState63,2),error=_useState64[0],setError=_useState64[1];// eslint-disable-next-line \nvar _useState65=useState(false),_useState66=_slicedToArray(_useState65,2),success=_useState66[0],setSuccess=_useState66[1];// eslint-disable-next-line \nvar _useState67=useState(\"\"),_useState68=_slicedToArray(_useState67,2),message=_useState68[0],setMessage=_useState68[1];// eslint-disable-next-line \nvar BandServ=client.service('casedefinition');//const history = useHistory()\n// eslint-disable-next-line\nvar _useContext7=useContext(UserContext),user=_useContext7.user;var _useContext8=useContext(ObjectContext),state=_useContext8.state,setState=_useContext8.setState;var Band=state.EpidemiologyModule.selectedBand;useEffect(function(){setValue(\"name\",Band.name,{shouldValidate:true,shouldDirty:true});setValue(\"bandType\",Band.bandType,{shouldValidate:true,shouldDirty:true});/*  setValue(\"profession\", Band.profession,  {\n                shouldValidate: true,\n                shouldDirty: true\n            })\n            setValue(\"phone\", Band.phone,  {\n                shouldValidate: true,\n                shouldDirty: true\n            })\n            setValue(\"email\", Band.email,  {\n                shouldValidate: true,\n                shouldDirty: true\n            })\n            setValue(\"department\", Band.department,  {\n                shouldValidate: true,\n                shouldDirty: true\n            })\n            setValue(\"deptunit\", Band.deptunit,  {\n                shouldValidate: true,\n                shouldDirty: true\n            }) */ /*   setValue(\"BandCategory\", Band.BandCategory,  {\n                shouldValidate: true,\n                shouldDirty: true\n            }) */return function(){};});var handleCancel=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(){var newBandModule;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:newBandModule={selectedBand:{},show:'create'};_context6.next=3;return setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{BandModule:newBandModule});});case 3:case\"end\":return _context6.stop();}}},_callee6);}));return function handleCancel(){return _ref6.apply(this,arguments);};}();var changeState=function changeState(){var newBandModule={selectedBand:{},show:'create'};setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{BandModule:newBandModule});});};var handleDelete=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(){var conf,dleteId;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:conf=window.confirm(\"Are you sure you want to delete this data?\");dleteId=Band._id;if(conf){BandServ.remove(dleteId).then(function(res){//console.log(JSON.stringify(res))\nreset();/*  setMessage(\"Deleted Band successfully\")\n                setSuccess(true)\n                changeState()\n               setTimeout(() => {\n                setSuccess(false)\n                }, 200); */toast({message:'Band deleted succesfully',type:'is-success',dismissible:true,pauseOnHover:true});changeState();}).catch(function(err){// setMessage(\"Error deleting Band, probable network issues \"+ err )\n// setError(true)\ntoast({message:\"Error deleting Band, probable network issues or \"+err,type:'is-danger',dismissible:true,pauseOnHover:true});});}case 3:case\"end\":return _context7.stop();}}},_callee7);}));return function handleDelete(){return _ref7.apply(this,arguments);};}();/* ()=> setValue(\"firstName\", \"Bill\", , {\n            shouldValidate: true,\n            shouldDirty: true\n          })) */var onSubmit=function onSubmit(data,e){e.preventDefault();setSuccess(false);console.log(data);data.facility=Band.facility;//console.log(data);\nBandServ.patch(Band._id,data).then(function(res){//console.log(JSON.stringify(res))\n// e.target.reset();\n// setMessage(\"updated Band successfully\")\ntoast({message:'Band updated succesfully',type:'is-success',dismissible:true,pauseOnHover:true});changeState();}).catch(function(err){//setMessage(\"Error creating Band, probable network issues \"+ err )\n// setError(true)\ntoast({message:\"Error updating Band, probable network issues or \"+err,type:'is-danger',dismissible:true,pauseOnHover:true});});};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"card \",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsx(\"p\",{className:\"card-header-title\",children:\"Band Details-Modify\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-content vscrollable\",children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"label\",{className:\"label is-small\",children:[\" Name\",/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left has-icons-right\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input  is-small\",ref:register({required:true}),name:\"name\",type:\"text\",placeholder:\"Name\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-hospital\"})})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"label\",{className:\"label is-small\",children:[\"Band Type\",/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left has-icons-right\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small \",ref:register({required:true}),disabled:true,name:\"bandType\",type:\"text\",placeholder:\"Band Type\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-map-signs\"})})]})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field  is-grouped mt-2\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"control\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"button is-success is-small\",onClick:handleSubmit(onSubmit),children:\"Save\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"control\",children:/*#__PURE__*/_jsx(\"button\",{className:\"button is-warning is-small\",onClick:handleCancel,children:\"Cancel\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"control\",children:/*#__PURE__*/_jsx(\"button\",{className:\"button is-danger is-small\",onClick:function onClick(){return handleDelete();},type:\"delete\",children:\"Delete\"})})]})]})]})});}export function InputSearch(_ref8){var getSearchfacility=_ref8.getSearchfacility,clear=_ref8.clear;var facilityServ=client.service('facility');var _useState69=useState([]),_useState70=_slicedToArray(_useState69,2),facilities=_useState70[0],setFacilities=_useState70[1];// eslint-disable-next-line\nvar _useState71=useState(false),_useState72=_slicedToArray(_useState71,2),searchError=_useState72[0],setSearchError=_useState72[1];// eslint-disable-next-line\nvar _useState73=useState(false),_useState74=_slicedToArray(_useState73,2),showPanel=_useState74[0],setShowPanel=_useState74[1];// eslint-disable-next-line\nvar _useState75=useState(\"\"),_useState76=_slicedToArray(_useState75,2),searchMessage=_useState76[0],setSearchMessage=_useState76[1];// eslint-disable-next-line \nvar _useState77=useState(\"\"),_useState78=_slicedToArray(_useState77,2),simpa=_useState78[0],setSimpa=_useState78[1];// eslint-disable-next-line \nvar _useState79=useState(false),_useState80=_slicedToArray(_useState79,2),chosen=_useState80[0],setChosen=_useState80[1];// eslint-disable-next-line \nvar _useState81=useState(0),_useState82=_slicedToArray(_useState81,2),count=_useState82[0],setCount=_useState82[1];var inputEl=useRef(null);var handleRow=/*#__PURE__*/function(){var _ref9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(obj){return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_context8.next=2;return setChosen(true);case 2://alert(\"something is chaning\")\ngetSearchfacility(obj);_context8.next=5;return setSimpa(obj.facilityName);case 5:// setSelectedFacility(obj)\nsetShowPanel(false);_context8.next=8;return setCount(2);case 8:case\"end\":return _context8.stop();}}},_callee8);}));return function handleRow(_x4){return _ref9.apply(this,arguments);};}();var handleBlur=/*#__PURE__*/function(){var _ref10=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(e){return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:if(count===2){console.log(\"stuff was chosen\");}/*  console.log(\"blur\")\n         setShowPanel(false)\n        console.log(JSON.stringify(simpa))\n        if (simpa===\"\"){\n            console.log(facilities.length)\n            setSimpa(\"abc\")\n            setSimpa(\"\")\n            setFacilities([])\n            inputEl.current.setValue=\"\"\n        }\n        console.log(facilities.length)\n        console.log(inputEl.current) */case 1:case\"end\":return _context9.stop();}}},_callee9);}));return function handleBlur(_x5){return _ref10.apply(this,arguments);};}();var handleSearch=/*#__PURE__*/function(){var _ref11=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee10(val){var field,_query2;return _regeneratorRuntime.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:field='facilityName';//field variable\nif(!(val.length>=3)){_context10.next=5;break;}facilityServ.find({query:(_query2={},_defineProperty(_query2,field,{$regex:val,$options:'i'}),_defineProperty(_query2,\"$limit\",10),_defineProperty(_query2,\"$sort\",{createdAt:-1}),_query2)}).then(function(res){console.log(\"facility  fetched successfully\");setFacilities(res.data);setSearchMessage(\" facility  fetched successfully\");setShowPanel(true);}).catch(function(err){console.log(err);setSearchMessage(\"Error searching facility, probable network issues \"+err);setSearchError(true);});_context10.next=11;break;case 5:console.log(\"less than 3 \");console.log(val);setShowPanel(false);_context10.next=10;return setFacilities([]);case 10:console.log(facilities);case 11:case\"end\":return _context10.stop();}}},_callee10);}));return function handleSearch(_x6){return _ref11.apply(this,arguments);};}();useEffect(function(){if(clear){setSimpa(\"\");}return function(){};},[clear]);return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsx(\"div\",{className:\"control has-icons-left  \",children:/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown \".concat(showPanel?\"is-active\":\"\"),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown-trigger\",children:[/*#__PURE__*/_jsx(DebounceInput,{className:\"input is-small \",type:\"text\",placeholder:\"Search Facilities\",value:simpa,minLength:1,debounceTimeout:400,onBlur:function onBlur(e){return handleBlur(e);},onChange:function onChange(e){return handleSearch(e.target.value);},inputRef:inputEl}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-search\"})})]}),searchError&&/*#__PURE__*/_jsx(\"div\",{children:searchMessage}),/*#__PURE__*/_jsx(\"div\",{className:\"dropdown-menu\",children:/*#__PURE__*/_jsx(\"div\",{className:\"dropdown-content\",children:facilities.map(function(facility,i){return/*#__PURE__*/_jsx(\"div\",{className:\"dropdown-item\",onClick:function onClick(){return handleRow(facility);},children:/*#__PURE__*/_jsx(\"span\",{children:facility.facilityName})},facility._id);})})})]})})})});}","map":{"version":3,"sources":["/home/mfybaby/Documents/HealthStack2/HS-frontend/src/components/Epidemiology/CaseDefinition.js"],"names":["React","useState","useContext","useEffect","useRef","client","DebounceInput","useForm","UserContext","ObjectContext","toast","format","formatDistanceToNowStrict","ReportCreate","PatientProfile","Accordion","AccordionItem","AccordionItemHeading","AccordionItemState","AccordionItemButton","AccordionItemPanel","CaseDefinition","selectedProductEntry","setSelectedProductEntry","error","setError","success","setSuccess","message","setMessage","BillServ","service","facilities","setFacilities","selectedOrders","setSelectedOrders","state","setState","user","setUser","EpidemiologyModule","show","CaseDefinitionCreate","register","handleSubmit","setValue","facility","setFacility","BandServ","currentUser","setCurrentUser","bandTypeOptions","notifierOptions","finding","setFinding","findings","setFindings","findingreq","setFindingreq","symptom","setSymptom","symptoms","setSymptoms","duration","setDuration","sympreq","setSympreq","lab","setLab","labs","setLabs","labvalue","setLabvalue","observations","setObservations","mgtProtocol","setMgtProtocol","notified","setNotified","getSearchfacility","obj","_id","shouldValidate","shouldDirty","stacker","currentEmployee","facilityDetail","handleChecked","e","target","checked","handleChecked2","onSubmit","data","preventDefault","disease","name","icdcode","icdver","snomed","snomedver","notificationtype","alert","length","sympcollection","forEach","el","obs","category","required","console","log","push","findingscollection","labscollection","value","notifiedlist","notifiedPerson","notification_destination","treatmentprotocol","create","then","res","reset","type","dismissible","pauseOnHover","catch","err","handleAddSymptoms","newsymptom","prev","handleAddFindings","newFinding","handleAddLabs","newLabs","onDelete","comp","i","prevstate","filter","index","onDeleteFinding","onDeleteLab","map","option","ProductEntry","toString","CaseDefinitionList","selectedBand","setSelectedBand","handleCreateNew","newBandModule","selectedEpid","handleRow","Band","handleSearch","val","field","find","query","$regex","$options","createdAt","getFacilities","$limit","$sort","findBand","on","CaseDefinitionDetail","handleEdit","CaseDefinitionModify","errors","bandType","handleCancel","BandModule","changeState","handleDelete","conf","window","confirm","dleteId","remove","patch","InputSearch","clear","facilityServ","searchError","setSearchError","showPanel","setShowPanel","searchMessage","setSearchMessage","simpa","setSimpa","chosen","setChosen","count","setCount","inputEl","facilityName","handleBlur"],"mappings":"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","sourcesContent":["/* eslint-disable */\nimport React, {useState,useContext, useEffect,useRef} from 'react'\nimport client from '../../feathers'\nimport {DebounceInput} from 'react-debounce-input';\nimport { useForm } from \"react-hook-form\";\n//import {useHistory} from 'react-router-dom'\nimport {UserContext,ObjectContext} from '../../context'\nimport {toast} from 'bulma-toast'\nimport {format, formatDistanceToNowStrict } from 'date-fns'\nimport ReportCreate from './ReportCreate'\nimport PatientProfile from '../ClientMgt/PatientProfile'\n/* import {ProductCreate} from './Products' */\n// eslint-disable-next-line\n//const searchfacility={};\nimport {\n    Accordion,\n    AccordionItem,\n    AccordionItemHeading,\n    AccordionItemState,\n    AccordionItemButton,\n    AccordionItemPanel,\n} from 'react-accessible-accordion';\n\n// Demo styles, see 'Styles' section below for some notes on use.\nimport 'react-accessible-accordion/dist/fancy-example.css';\n//import BillPrescriptionCreate from './BillPrescriptionCreate';\n\n\n\nexport default function CaseDefinition() {\n    //const {state}=useContext(ObjectContext) //,setState\n    // eslint-disable-next-line\n    const [selectedProductEntry,setSelectedProductEntry]=useState()\n    //const [showState,setShowState]=useState() //create|modify|detail\n    const [error, setError] =useState(false)\n    // eslint-disable-next-line\n   const [success, setSuccess] =useState(false)\n    // eslint-disable-next-line\n  const [message, setMessage] = useState(\"\") \n   const BillServ=client.service('casedefinition')\n   //const history = useHistory()\n  // const {user,setUser} = useContext(UserContext)\n   const [facilities,setFacilities]=useState([])\n    // eslint-disable-next-line\n  const [selectedOrders, setSelectedOrders]=useState([]) //\n   // eslint-disable-next-line\n   const {state,setState}=useContext(ObjectContext)\n   // eslint-disable-next-line\n   const {user,setUser}=useContext(UserContext)\n    \n    return(\n        <section className= \"section remPadTop\">\n           {/*  <div className=\"level\">\n            <div className=\"level-item\"> <span className=\"is-size-6 has-text-weight-medium\">ProductEntry  Module</span></div>\n            </div> */}\n            <div className=\"columns \">\n                <div className=\"column is-6 \">\n                    <CaseDefinitionList/>\n                    </div>\n              \n                <div className=\"column is-6 \">\n                {(state.EpidemiologyModule.show ==='create')&&  <CaseDefinitionCreate />}\n                {(state.EpidemiologyModule.show ==='detail')&&  <CaseDefinitionDetail />}\n                </div>\n               {/*  <div className=\"column is-3 \">  <ReportCreate />\n                \n                {(state.financeModule.show ==='detail')&&<PatientProfile />}\n                </div> */}\n\n            </div>                            \n            </section>\n       \n    )\n    \n}\n\nexport function CaseDefinitionCreate(){\n    const { register, handleSubmit,setValue} = useForm(); //, watch, errors, reset \n    const [error, setError] =useState(false)\n    const [success, setSuccess] =useState(false)\n    const [message,setMessage] = useState(\"\")\n    // eslint-disable-next-line\n    const [facility,setFacility] = useState()\n    const BandServ=client.service('casedefinition')\n    //const history = useHistory()\n    const {user} = useContext(UserContext) //,setUser\n    // eslint-disable-next-line\n    const [currentUser,setCurrentUser] = useState()\n    const bandTypeOptions =[\"Immediate Notification\",\"Weekly\", \"Monthly\" ]\n    const notifierOptions =[\"Facility Focal Person\",\"DSNO\", \"Asst DSNO\",\"State Epidemiologist\" ]\n    \n    const [finding,setFinding] = useState(\"\")\n    const [findings,setFindings] = useState([])\n    const [findingreq,setFindingreq] = useState(false)\n\n    const [symptom,setSymptom] = useState(\"\")\n    const [symptoms,setSymptoms] = useState([])\n    const [duration,setDuration] = useState(\"\")\n    const [sympreq,setSympreq] = useState(false)\n\n    const [lab,setLab] = useState(\"\")\n    const [labs,setLabs] = useState([])\n    const [labvalue,setLabvalue] = useState(\"\")\n    /* const [sympreq,setSympreq] = useState(false) */\n    const [observations,setObservations]=useState([])\n    const [mgtProtocol,setMgtProtocol] = useState(\"\")\n    const [notified,setNotified] = useState(\"\")\n\n    const getSearchfacility=(obj)=>{\n        \n        setValue(\"facility\", obj._id,  {\n            shouldValidate: true,\n            shouldDirty: true\n        })\n    }\n    \n    useEffect(() => {\n        setCurrentUser(user)\n        //console.log(currentUser)\n        return () => {\n        \n        }\n    }, [user])\n\n  //check user for facility or get list of facility  \n    useEffect(()=>{\n        //setFacility(user.activeBand.FacilityId)//\n      if (!user.stacker){\n         \n        setValue(\"facility\", user.currentEmployee.facilityDetail._id,  {\n            shouldValidate: true,\n            shouldDirty: true\n        }) \n      }\n    })\n    const handleChecked=e=>{\n       // console.log(e.target.checked)\n        setSympreq(e.target.checked)\n    }\n\n    const handleChecked2=e=>{\n       // console.log(e.target.checked)\n        setFindingreq(e.target.checked)\n    }\n\n    const onSubmit = async(data,e) =>{\n        e.preventDefault();\n       /*  data.Presenting_Complaints=symptoms\n        data.Clinical_Findings=findings */\n        //data.LaboratoryConfirmation=labconfirms\n        data.observations=[]\n        data.disease={\n            name:data.disease,\n            icdcode:\"\",\n            icdver:\"\",\n            snomed:\"\",\n            snomedver:\"\",\n        }\n\n        if (data.notificationtype===\"\"){\n            alert(\"Kindly choose notification type\")\n            return\n        }\n        if (symptoms.length>0){\n            let sympcollection = []\n            symptoms.forEach(el=>{\n                let obs={\n                    category:\"symptoms\" ,\n                    name:el.symptom ,\n                    duration:el.duration ,\n                    /* note:\"\",\n                    snomed:\"\" ,\n                    response:\"\" , */\n                    required:el.sympreq,\n                    /* value:\"\"  */\n                }\n                console.log(obs)\n                sympcollection.push(obs)\n                console.log(sympcollection)\n\n            })\n            data.observations=[...data.observations, ...sympcollection]\n        }\n        if (findings.length>0){\n            let findingscollection = []\n            findings.forEach(el=>{\n                let obs={\n                    category:\"Signs\" ,\n                    name:el.finding ,\n                   /*  duration:el.duration , */\n                    /* note:\"\",\n                    snomed:\"\" ,\n                    response:\"\" , */\n                    required:el.findingreq,\n                    /* value:\"\"  */\n                }\n                findingscollection.push(obs)\n\n            })\n            data.observations=[...data.observations, ...findingscollection]\n\n        }\n        if (labs.length>0){\n            let labscollection = []\n            labs.forEach(el=>{\n                let obs={\n                    category:\"Laboratory\" ,\n                    name:el.lab ,\n                   /*  duration:el.duration , */\n                    /* note:\"\",\n                    snomed:\"\" ,\n                    response:\"\" , */\n                   /*  required:el.findingreq, */\n                    value:el.labvalue \n                }\n               labscollection.push(obs)\n\n            })\n            data.observations=[...data.observations, ...labscollection]\n\n        }\n        let notifiedlist=[]\n        notifiedlist.push(data.notifiedPerson)\n        console.log(notifiedlist)\n        data.notification_destination= notifiedlist[0]\n        data.treatmentprotocol=mgtProtocol\n      // await setObservations((prev)=>([...prev, symp]))\n        setMessage(\"\")\n        setError(false)\n        setSuccess(false)\n         // data.createdby=user._id\n          console.log(data);\n          if (user.currentEmployee){\n         data.facility=user.currentEmployee.facilityDetail._id  // or from facility dropdown\n          }\n        BandServ.create(data)\n        .then((res)=>{\n                //console.log(JSON.stringify(res))\n                e.target.reset();\n               /*  setMessage(\"Created Band successfully\") */\n                setSuccess(true)\n              /*   setAllergies([]) */\n                setSymptoms([])\n                setFindings([])\n                setLabs([])\n                setMgtProtocol([])\n                toast({\n                    message: 'Band created succesfully',\n                    type: 'is-success',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  })\n                  setSuccess(false)\n            })\n            .catch((err)=>{\n                toast({\n                    message: 'Error creating Band ' + err,\n                    type: 'is-danger',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  })\n            })\n\n      } \n      const handleAddSymptoms = ()=>{\n        let newsymptom = {\n            symptom,\n            duration,\n            sympreq\n        } \n        console.log(newsymptom)\n        setSymptoms((prev)=>([...prev, newsymptom]))\n       // setAllergy({})\n        setSymptom(\"\")\n        setDuration(\"\")\n        setSympreq(false)\n    }\n    const handleAddFindings = ()=>{\n        let newFinding = {\n            finding,\n            findingreq\n        } \n        console.log(newFinding)\n        setFindings((prev)=>([...prev, newFinding]))\n       // setAllergy({})\n        setFinding(\"\")\n        setFindingreq(false)\n    }\n    const handleAddLabs = ()=>{\n        let newLabs = {\n            lab,\n            labvalue\n        } \n        console.log(newLabs)\n        setLabs((prev)=>([...prev, newLabs]))\n       // setAllergy({})\n        setLab(\"\")\n        setLabvalue(\"\")\n       /*  setFindingreq(false) */\n    }\n    const onDelete = (comp,i)=>{\n        //console.log(comp,i)\n       setSymptoms(prevstate=>prevstate.filter((el,index)=>index!==i))\n    }\n    const onDeleteFinding = (comp,i)=>{\n        //console.log(comp,i)\n       setFindings(prevstate=>prevstate.filter((el,index)=>index!==i))\n    }\n    const onDeleteLab = (comp,i)=>{\n        //console.log(comp,i)\n       setLabs(prevstate=>prevstate.filter((el,index)=>index!==i))\n    }\n    return (\n        <>\n            <div className=\"card \">\n            <div className=\"card-header\">\n                <p className=\"card-header-title\">\n                    Create Case Definition\n                </p>\n            </div>\n            <div className=\"card-content vscrollable\">\n   \n            <form onSubmit={handleSubmit(onSubmit)}>\n               {/*  <div className=\"field\">\n                    <p className=\"control has-icons-left has-icons-right\">\n                        <input className=\"input is-small\"  ref={register({ required: true })}  name=\"bandType\" type=\"text\" placeholder=\"Type of Band\" />\n                        <span className=\"icon is-small is-left\">\n                            <i className=\"fas fa-hospital\"></i>\n                        </span>                    \n                    </p>\n                </div> */}\n            <div className=\"field\">    \n                 <div className=\"control\">\n                     <div className=\"select is-small \">\n                         <select name=\"notificationtype\"  ref={register({ required: true })} /* onChange={(e)=>handleChangeMode(e.target.value)} */ className=\"selectadd\" >\n                         <option value=\"\">Choose Notification Type </option>\n                           {bandTypeOptions.map((option,i)=>(\n                               <option key={i} value={option}> {option}</option>\n                           ))}\n                         </select>\n                     </div>\n                 </div>\n            </div>\n            <div className=\"field\">\n                    <p className=\"control has-icons-left has-icons-right\">\n                    <input className=\"input is-small\" ref={register({ required: true })}  name=\"disease\" type=\"text\" placeholder=\"Name of Disease\" />\n                    <span className=\"icon is-small is-left\">\n                        <i className=\"fas fa-map-signs\"></i>\n                    </span>\n                    \n                </p>\n            </div>\n        {/* Symptoms */}\n            <>\n             <h3 className=\" mt-2\"><b>Symptoms</b></h3>\n                <input className=\"input is-small is-hidden\"   ref={register} name=\"Symptoms\" type=\"text\" placeholder=\"Specify\" />  \n                    <div className=\"field is-horizontal\">\n                        <div className=\"field-body ml-3\">  \n                           {/*  <div className=\"field\">\n                                <label className=\"is-small\"> Symptom</label>\n                            </div> */}\n                            <div className=\"field\">\n                                <p className=\"control \">\n                                    <input className=\"input is-small\"  value={symptom} /* ref={register} */ onChange={(e)=>{setSymptom(e.target.value)}} name=\"symptom\" type=\"text\" placeholder=\"Symptom\" />           \n                                </p>\n                            </div>\n                            <div className=\"field\">\n                                <p className=\"control \">\n                                    <input className=\"input is-small\"  value={duration}  /* ref={register} */ onChange={(e)=>{setDuration(e.target.value)}}  name=\"durationn\" type=\"text\" placeholder=\"Duration\" />           \n                                </p>\n                            </div>\n                            <div className=\"field\">\n                            <label  className=\" is-small\" >\n                                    <input type=\"checkbox\" value={sympreq} name=\"sympreq\"  onChange={(e)=>{handleChecked(e)}}/* ref={register} */ />Required\n                                </label>\n                                </div>\n                            <div className=\"field\">\n                            <div className=\"control\">\n                            <div  className=\"button is-success is-small selectadd\" onClick={handleAddSymptoms}>\n                               Add\n                            </div>\n                            </div>\n                        </div>\n                        \n                        </div>\n                    </div> \n                    \n                    <table className=\"table is-striped  is-hoverable is-fullwidth is-scrollable mr-2\">\n                        <thead>\n                            <tr>\n                            <th><abbr title=\"Serial No\">S/No</abbr></th>\n                        \n                            <th><abbr title=\"Type\"> Symptom</abbr></th>\n                            <th><abbr title=\"Destination\">Duration</abbr></th>\n                            <th><abbr title=\"Destination\">Required</abbr></th>\n                            <th><abbr title=\"Action\"> Action</abbr></th>\n                            </tr>\n                        </thead>\n                        <tfoot>\n                            \n                        </tfoot>\n                        <tbody>\n                        { symptoms.map((ProductEntry, i)=>(\n\n                                <tr key={i}>\n                                <th>{i+1}</th>\n                                <td>{ProductEntry.symptom}</td> \n                                <td>{ProductEntry.duration}</td>\n                                <td>{ProductEntry.sympreq.toString()}</td>                                                                     \n                                <td onClick={()=>onDelete(ProductEntry, i)}>x</td> \n                                </tr>\n\n                            ))}\n                        </tbody>\n                        </table>\n\n            </>\n            {/* findings */}\n            <>\n                        <h3 className=\" mt-2\"><b>Clinical Signs</b></h3>\n                            <input className=\"input is-small is-hidden\"   ref={register} name=\"ClinicalFindings\" type=\"text\" placeholder=\"Specify\" />  \n                                <div className=\"field is-horizontal\">\n                                    <div className=\"field-body ml-3\">  \n                                    {/*  <div className=\"field\">\n                                            <label className=\"is-small\"> Symptom</label>\n                                        </div> */}\n                                        <div className=\"field\">\n                                            <p className=\"control \">\n                                                <input className=\"input is-small\"  value={finding} /* ref={register} */ onChange={(e)=>{setFinding(e.target.value)}} name=\"finding\" type=\"text\" placeholder=\"Finding\" />           \n                                            </p>\n                                        </div>\n                                        \n                                        <div className=\"field\">\n                                        <label  className=\" is-small\" >\n                                                <input type=\"checkbox\" value={findingreq} name=\"sympreq\"  onChange={(e)=>{handleChecked2(e)}}/* ref={register} */ />Required\n                                            </label>\n                                            </div>\n                                        <div className=\"field\">\n                                        <div className=\"control\">\n                                        <div  className=\"button is-success is-small selectadd\" onClick={handleAddFindings}>\n                                        Add\n                                        </div>\n                                        </div>\n                                    </div>\n                                    \n                                    </div>\n                                </div> \n                                \n                                <table className=\"table is-striped  is-hoverable is-fullwidth is-scrollable mr-2\">\n                                    <thead>\n                                        <tr>\n                                        <th><abbr title=\"Serial No\">S/No</abbr></th>\n                                    \n                                        <th><abbr title=\"Type\"> Finding</abbr></th>\n                                    \n                                        <th><abbr title=\"Destination\">Required</abbr></th>\n                                        <th><abbr title=\"Action\"> Action</abbr></th>\n                                        </tr>\n                                    </thead>\n                                    <tfoot>\n                                        \n                                    </tfoot>\n                                    <tbody>\n                                    { findings.map((ProductEntry, i)=>(\n\n                                            <tr key={i}>\n                                            <th>{i+1}</th>\n                                            <td>{ProductEntry.finding}</td> \n                                            \n                                            <td>{ProductEntry.findingreq.toString()}</td>                                                                     \n                                            <td onClick={()=>onDeleteFinding(ProductEntry, i)}>x</td>\n                                            </tr>\n\n                                        ))}\n                                    </tbody>\n                                    </table>\n\n            </>\n            {/* lab confirm */}\n            <>\n                        <h3 className=\" mt-2\"><b>Laboratory Confirmation</b></h3>\n                            <input className=\"input is-small is-hidden\"   ref={register} name=\"LaboratoryConfirmation\" type=\"text\" placeholder=\"Specify\" />  \n                                <div className=\"field is-horizontal\">\n                                    <div className=\"field-body ml-3\">  \n                                    {/*  <div className=\"field\">\n                                            <label className=\"is-small\"> Symptom</label>\n                                        </div> */}\n                                        <div className=\"field\">\n                                            <p className=\"control \">\n                                                <input className=\"input is-small\"  value={lab} /* ref={register} */ onChange={(e)=>{setLab(e.target.value)}} name=\"lab\" type=\"text\" placeholder=\"Lab\" />           \n                                            </p>\n                                        </div>\n                                        <div className=\"field\">\n                                            <p className=\"control \">\n                                                <input className=\"input is-small\"  value={labvalue}  /* ref={register} */ onChange={(e)=>{setLabvalue(e.target.value)}}  name=\"lab value\" type=\"text\" placeholder=\" Value\" />           \n                                            </p>\n                                        </div>\n                                    {/*  <div className=\"field\">\n                                        <label  className=\" is-small\" >\n                                                <input type=\"checkbox\" value={sympreq} name=\"sympreq\"  onChange={(e)=>{handleChecked(e)}}/* ref={register} */ /* />Required */\n                                            /* </label>\n                                            </div> */} \n                                        <div className=\"field\">\n                                        <div className=\"control\">\n                                        <div  className=\"button is-success is-small selectadd\" onClick={handleAddLabs}>\n                                        Add\n                                        </div>\n                                        </div>\n                                    </div>\n                                    \n                                    </div>\n                                </div> \n                                \n                                <table className=\"table is-striped  is-hoverable is-fullwidth is-scrollable mr-2\">\n                                    <thead>\n                                        <tr>\n                                        <th><abbr title=\"Serial No\">S/No</abbr></th>\n                                    \n                                        <th><abbr title=\"Type\"> Test</abbr></th>\n                                        <th><abbr title=\"Destination\">Value</abbr></th>\n                                    {/*   <th><abbr title=\"Destination\">Required</abbr></th> */}\n                                        <th><abbr title=\"Action\"> Action</abbr></th>\n                                        </tr>\n                                    </thead>\n                                    <tfoot>\n                                        \n                                    </tfoot>\n                                    <tbody>\n                                    { labs.map((ProductEntry, i)=>(\n\n                                            <tr key={i}>\n                                            <th>{i+1}</th>\n                                            <td>{ProductEntry.lab}</td> \n                                            <td>{ProductEntry.labvalue}</td>\n                                            <td onClick={()=>onDeleteLab(ProductEntry, i)}>x</td>\n                                            {/* <td>{ProductEntry.sympreq.toString()}</td>   */}                                                                   \n\n                                            </tr>\n\n                                        ))}\n                                    </tbody>\n                                    </table>\n\n            </>\n             {/* Management Protocol */}\n            <>\n                            \n                                    <div className=\"field-body ml-3\">  \n                                    <div className=\"field\">\n                                            <label className=\"is-small\">Management Protocol</label>\n                                        {/* </div>  */}\n                                       {/*  <div className=\"field\"> */}\n                                            <p className=\"control mt-1 mb-2\">\n                                                <textarea className=\"textarea is-small\"  value={mgtProtocol} /* ref={register} */ onChange={(e)=>{setMgtProtocol(e.target.value)}} name=\"mgtProtocol\" type=\"text\" placeholder=\"Mangement Protocol\" />           \n                                            </p>\n                                        </div>\n                                        </div>\n                                    \n\n            </>\n\n            <div className=\"field  ml-3 mt-2\">    \n                 <div className=\"control\">\n                     <div className=\"select is-small \">\n                         <select name=\"notifiedPerson\"  ref={register({ required: true })} /* onChange={(e)=>handleChangeMode(e.target.value)} */ className=\"selectadd\" >\n                         <option value=\"\">Choose Person to Notify </option>\n                           {notifierOptions.map((option,i)=>(\n                               <option key={i} value={option}> {option}</option>\n                           ))}\n                         </select>\n                     </div>\n                 </div>\n            </div>\n            <div className=\"field\">\n                <p className=\"control\">\n                    <button className=\"button is-success is-small\">\n                        Create\n                    </button>\n                </p>\n            </div>\n            \n            </form>\n            </div>\n            </div>\n        </>\n    )\n   \n}\n\nexport function CaseDefinitionList(){\n   // const { register, handleSubmit, watch, errors } = useForm();\n    // eslint-disable-next-line\n    const [error, setError] =useState(false)\n     // eslint-disable-next-line\n    const [success, setSuccess] =useState(false)\n     // eslint-disable-next-line\n   const [message, setMessage] = useState(\"\") \n    const BandServ=client.service('casedefinition')\n    //const history = useHistory()\n   // const {user,setUser} = useContext(UserContext)\n    const [facilities,setFacilities]=useState([])\n     // eslint-disable-next-line\n   const [selectedBand, setSelectedBand]=useState() //\n    // eslint-disable-next-line\n    const {state,setState}=useContext(ObjectContext)\n    // eslint-disable-next-line\n    const {user,setUser}=useContext(UserContext)\n\n\n\n    const handleCreateNew = async()=>{\n        const    newBandModule={\n            selectedEpid:{},\n            show :'create'\n            }\n       await setState((prevstate)=>({...prevstate, EpidemiologyModule:newBandModule}))\n       //console.log(state)\n        \n\n    }\n    const handleRow= async(Band)=>{\n        //console.log(\"b4\",state)\n\n        //console.log(\"handlerow\",Band)\n\n        await setSelectedBand(Band)\n       \n        const    newBandModule={\n            selectedEpid:Band,\n            show :'detail'\n        }\n       await setState((prevstate)=>({...prevstate, EpidemiologyModule:newBandModule}))\n       console.log(newBandModule)\n\n    }\n\n   const handleSearch=(val)=>{\n       const field='disease.name'\n       console.log(val)\n       BandServ.find({query: {\n                [field]: {\n                    $regex:val,\n                    $options:'i'\n                   \n                },\n               facility:user.currentEmployee.facilityDetail._id || \"\",\n                $limit:100,\n                $sort: {\n                    createdAt: -1\n                  }\n                    }}).then((res)=>{\n                console.log(res)\n               setFacilities(res.data)\n                setMessage(\" Band  fetched successfully\")\n                setSuccess(true) \n            })\n            .catch((err)=>{\n                console.log(err)\n                setMessage(\"Error fetching Band, probable network issues \"+ err )\n                setError(true)\n            })\n        }\n   \n        const getFacilities= async()=>{\n            if (user.currentEmployee){\n            \n        const findBand= await BandServ.find(\n                {query: {\n                    facility:user.currentEmployee.facilityDetail._id,\n                    $limit:200,\n                    $sort: {\n                        createdAt: -1\n                    }\n                    }})\n\n         await setFacilities(findBand.data)\n                }\n                else {\n                    if (user.stacker){\n                        const findBand= await BandServ.find(\n                            {query: {\n                                \n                                $limit:200,\n                                $sort: {\n                                    facility: -1\n                                }\n                                }})\n            \n                    await setFacilities(findBand.data)\n\n                    }\n                }\n          /*   .then((res)=>{\n                console.log(res)\n                    setFacilities(res.data)\n                    setMessage(\" Band  fetched successfully\")\n                    setSuccess(true)\n                })\n                .catch((err)=>{\n                    setMessage(\"Error creating Band, probable network issues \"+ err )\n                    setError(true)\n                }) */\n            }\n            \n            useEffect(() => {\n             \n\n                return () => {\n                    \n\n                }\n            },[])\n\n            useEffect(() => {\n               \n                if (user){\n                    getFacilities()\n                }else{\n                    /* const localUser= localStorage.getItem(\"user\")\n                    const user1=JSON.parse(localUser)\n                    console.log(localUser)\n                    console.log(user1)\n                    fetchUser(user1)\n                    console.log(user)\n                    getFacilities(user) */\n                }\n                BandServ.on('created', (obj)=>getFacilities())\n                BandServ.on('updated', (obj)=>getFacilities())\n                BandServ.on('patched', (obj)=>getFacilities())\n                BandServ.on('removed', (obj)=>getFacilities())\n                return () => {\n                \n                }\n            },[])\n\n\n    //todo: pagination and vertical scroll bar\n\n    return(\n        <>\n           {user?( <>  \n                <div className=\"level\">\n                    <div className=\"level-left\">\n                        <div className=\"level-item\">\n                            <div className=\"field\">\n                                <p className=\"control has-icons-left  \">\n                                    <DebounceInput className=\"input is-small \" \n                                        type=\"text\" placeholder=\"Search Bands\"\n                                        minLength={3}\n                                        debounceTimeout={400}\n                                        onChange={(e)=>handleSearch(e.target.value)} />\n                                    <span className=\"icon is-small is-left\">\n                                        <i className=\"fas fa-search\"></i>\n                                    </span>\n                                </p>\n                            </div>\n                        </div>\n                    </div>\n                    <div className=\"level-item\"> <span className=\"is-size-6 has-text-weight-medium\">List of Bands </span></div>\n                    <div className=\"level-right\">\n                        <div className=\"level-item\"> \n                            <div className=\"level-item\"><div className=\"button is-success is-small\" onClick={handleCreateNew}>New</div></div>\n                        </div>\n                    </div>\n\n                </div>\n                <div className=\"table-container pullup \">\n                                <table className=\"table is-striped is-narrow is-hoverable is-fullwidth is-scrollable \">\n                                    <thead>\n                                        <tr>\n                                        <th><abbr title=\"Serial No\">S/No</abbr></th>\n                                        <th>Disease</th>\n                                        <th><abbr title=\"Notification Type\">Notification Type</abbr></th>\n                                      {/*  <th><abbr title=\"Description\">Description</abbr></th> */}\n                                      {/*  <th><abbr title=\"Notified\">Description</abbr></th> */}\n                                          {/*<th><abbr title=\"Phone\">Phone</abbr></th>\n                                        <th><abbr title=\"Email\">Email</abbr></th>\n                                        <th><abbr title=\"Department\">Department</abbr></th>\n                                        <th><abbr title=\"Departmental Unit\">Departmental Unit</abbr></th> */}\n                                       {user.stacker && <th><abbr title=\"Facility\">Facility</abbr></th>}\n                                        {/* <th><abbr title=\"Actions\">Actions</abbr></th> */}\n                                        </tr>\n                                    </thead>\n                                    <tfoot>\n                                        \n                                    </tfoot>\n                                    <tbody>\n                                        {facilities.map((Band, i)=>(\n\n                                            <tr key={Band._id} onClick={()=>handleRow(Band)} className={Band._id===(selectedBand?._id||null)?\"is-selected\":\"\"}>\n                                            <th>{i+1}</th>\n                                            <th>{Band.disease.name}</th>\n                                            <td>{Band.notificationtype}</td>\n                                           {/*  < td>{Band.description}</td> */}\n                                            {/*<td>{Band.phone}</td>\n                                            <td>{Band.email}</td>\n                                            <td>{Band.department}</td>\n                                            <td>{Band.deptunit}</td> */}\n                                           {user.stacker &&  <td>{Band.facility}</td>}\n                                           {/*  <td><span   className=\"showAction\"  >...</span></td> */}\n                                           \n                                            </tr>\n\n                                        ))}\n                                    </tbody>\n                                    </table>\n                                    \n                </div>              \n            </>):<div>loading</div>}\n            </>\n              \n    )\n    }\n\n\nexport function CaseDefinitionDetail(){\n    //const { register, handleSubmit, watch, setValue } = useForm(); //errors,\n     // eslint-disable-next-line\n    const [error, setError] =useState(false) //, \n    //const [success, setSuccess] =useState(false)\n     // eslint-disable-next-line\n    const [message, setMessage] = useState(\"\") //,\n    //const BandServ=client.service('/Band')\n    //const history = useHistory()\n    //const {user,setUser} = useContext(UserContext)\n    const {state,setState} = useContext(ObjectContext)\n\n   \n\n   const Band =state.EpidemiologyModule.selectedEpid \n\n    const handleEdit= async()=>{\n        const    newBandModule={\n            EpidemiologyModule:Band,\n            show :'modify'\n        }\n       await setState((prevstate)=>({...prevstate,  EpidemiologyModule:newBandModule}))\n       //console.log(state)\n       \n    }\n \n    return (\n        <>\n        <div className=\"card \">\n            <div className=\"card-header\">\n                <p className=\"card-header-title\">\n                    Case Definition Details\n                </p>\n            </div>\n            <div className=\"card-content vscrollable\">\n                    <div >\n                     <label className=\"label is-small\"> <span className=\"icon is-small is-left\">\n                            <i className=\"fas fa-hospital\"></i>\n                        </span>                    \n                        Disease : \n                        <span className=\"is-size-7 padleft\"   name=\"name\"> {Band.disease.name} </span>\n                        </label>\n                        \n                       \n                        \n                    </div>\n                    <div className=\" mt-2\"> \n                    <label className=\"label is-small\"><span className=\"icon is-small is-left\">\n                        <i className=\"fas fa-map-signs\"></i>\n                    </span>Notification Type: <span className=\"is-size-7 padleft\"   name=\"BandType\">{Band.notificationtype} </span> \n                    </label>\n                    \n                    \n                   \n                    </div>\n                    <div className=\" mt-2\">\n                    <label className=\" mt-2\">\n                       <b> Symptoms </b>\n                    </label>\n                    <table className=\"table is-striped  is-hoverable is-fullwidth is-scrollable mr-2\">\n                        <thead>\n                            <tr>\n                            <th><abbr title=\"Serial No\">S/No</abbr></th>\n                        \n                            <th><abbr title=\"Type\"> Symptom</abbr></th>\n                            <th><abbr title=\"Destination\">Duration</abbr></th>\n                            <th><abbr title=\"Destination\">Required</abbr></th>\n                            </tr>\n                        </thead>\n                        <tfoot>\n                            \n                        </tfoot>\n                        <tbody>\n                        { Band.observations.map((ProductEntry, i)=>(\n                           <>\n                            { (ProductEntry.category===\"symptoms\") &&   <tr key={i}>\n                                <th>{i+1}</th>\n                                <td>{ProductEntry.name}</td> \n                                <td>{ProductEntry.duration}</td>\n                                <td>{ProductEntry.required.toString()}</td>                                                                     \n\n                                </tr>\n                        }\n                        </>\n                            ))}\n                        </tbody>\n                        </table>\n                    </div>\n                    <div className=\" mt-2\">\n                    <label className=\" mt-2\">\n                        <b>Clinical Signs </b>\n                    </label>\n                    <table className=\"table is-striped  is-hoverable is-fullwidth is-scrollable mr-2\">\n                        <thead>\n                            <tr>\n                            <th><abbr title=\"Serial No\">S/No</abbr></th>\n                        \n                            <th><abbr title=\"Type\"> Symptom</abbr></th>\n                            <th><abbr title=\"Destination\">Duration</abbr></th>\n                            <th><abbr title=\"Destination\">Required</abbr></th>\n                            </tr>\n                        </thead>\n                        <tfoot>\n                            \n                        </tfoot>\n                        <tbody>\n                        { Band.observations.map((ProductEntry, i)=>(\n                           <>\n                            { (ProductEntry.category===\"Signs\") &&   <tr key={i}>\n                                <th>{i+1}</th>\n                                <td>{ProductEntry.name}</td> \n                                <td>{ProductEntry.required}</td>\n                                {/* <td>{ProductEntry.required.toString()}</td>  */}                                                                    \n\n                                </tr>\n                        }\n                        </>\n                            ))}\n                        </tbody>\n                        </table>\n                    </div>\n                    <div className=\" mt-2\">\n                    <label className=\" mt-2\">\n                       <b> Laboratory</b>\n                    </label>\n                    <table className=\"table is-striped  is-hoverable is-fullwidth is-scrollable mr-2\">\n                        <thead>\n                            <tr>\n                            <th><abbr title=\"Serial No\">S/No</abbr></th>\n                        \n                            <th><abbr title=\"Type\"> Lab Test </abbr></th>\n                            <th><abbr title=\"Destination\">Value</abbr></th>\n                           {/*  <th><abbr title=\"Destination\">Required</abbr></th> */}\n                            </tr>\n                        </thead>\n                        <tfoot>\n                            \n                        </tfoot>\n                        <tbody>\n                        { Band.observations.map((ProductEntry, i)=>(\n                           <>\n                            { (ProductEntry.category===\"symptoms\") &&   <tr key={i}>\n                                <th>{i+1}</th>\n                                <td>{ProductEntry.name}</td> \n                                <td>{ProductEntry.duration}</td>\n                                <td>{ProductEntry.required.toString()}</td>                                                                     \n\n                                </tr>\n                        }\n                        </>\n                            ))}\n                        </tbody>\n                        </table> \n\n                    </div>\n                    <div className=\" mt-2\">\n                     <label className=\"label is-small\"> <span className=\"icon is-small is-left\">\n                            <i className=\"fas fa-hospital\"></i>\n                        </span>                    \n                        Treatment Protocol: \n                        </label>\n                        \n                       \n                        <span className=\"is-size-7 padleft\"   name=\"name\"> {Band.treatmentprotocol} </span>\n                    </div>\n                    <div className=\" mt-2\">\n                     <label className=\"label is-small\"> <span className=\"icon is-small is-left\">\n                            <i className=\"fas fa-hospital\"></i>\n                        </span>                    \n                        Person to Notify :  <span className=\"is-size-7 padleft\"   name=\"name\"> {Band.notification_destination[0]} </span>\n                        </label>\n                        \n                       \n                        \n                    </div>\n          {/*  \n            <div className=\"field mt-2\">\n                <p className=\"control\">\n                    <button className=\"button is-success is-small is-disabled\" onClick={handleEdit}>\n                        Edit\n                    </button>\n                </p>\n            </div> */}\n          \n           \n        </div>\n        </div>\n        </>\n    )\n   \n   \n}\n\nexport function CaseDefinitionModify(){\n    const { register, handleSubmit, setValue,reset, errors } = useForm(); //watch, errors,\n    // eslint-disable-next-line \n    const [error, setError] =useState(false)\n    // eslint-disable-next-line \n    const [success, setSuccess] =useState(false)\n    // eslint-disable-next-line \n    const [message,setMessage] = useState(\"\")\n    // eslint-disable-next-line \n    const BandServ=client.service('casedefinition')\n    //const history = useHistory()\n     // eslint-disable-next-line\n    const {user} = useContext(UserContext)\n    const {state,setState} = useContext(ObjectContext)\n\n    const Band =state.EpidemiologyModule.selectedBand \n\n        useEffect(() => {\n            setValue(\"name\", Band.name,  {\n                shouldValidate: true,\n                shouldDirty: true\n            })\n            setValue(\"bandType\", Band.bandType,  {\n                shouldValidate: true,\n                shouldDirty: true\n            })\n           /*  setValue(\"profession\", Band.profession,  {\n                shouldValidate: true,\n                shouldDirty: true\n            })\n            setValue(\"phone\", Band.phone,  {\n                shouldValidate: true,\n                shouldDirty: true\n            })\n            setValue(\"email\", Band.email,  {\n                shouldValidate: true,\n                shouldDirty: true\n            })\n            setValue(\"department\", Band.department,  {\n                shouldValidate: true,\n                shouldDirty: true\n            })\n            setValue(\"deptunit\", Band.deptunit,  {\n                shouldValidate: true,\n                shouldDirty: true\n            }) */\n          /*   setValue(\"BandCategory\", Band.BandCategory,  {\n                shouldValidate: true,\n                shouldDirty: true\n            }) */\n            \n            return () => {\n                \n            }\n        })\n\n   const handleCancel=async()=>{\n    const    newBandModule={\n        selectedBand:{},\n        show :'create'\n      }\n   await setState((prevstate)=>({...prevstate, BandModule:newBandModule}))\n   //console.log(state)\n           }\n\n\n        const changeState =()=>{\n        const    newBandModule={\n            selectedBand:{},\n            show :'create'\n        }\n        setState((prevstate)=>({...prevstate, BandModule:newBandModule}))\n\n        }\n    const handleDelete=async()=>{\n        let conf=window.confirm(\"Are you sure you want to delete this data?\")\n        \n        const dleteId=Band._id\n        if (conf){\n             \n        BandServ.remove(dleteId)\n        .then((res)=>{\n                //console.log(JSON.stringify(res))\n                reset();\n               /*  setMessage(\"Deleted Band successfully\")\n                setSuccess(true)\n                changeState()\n               setTimeout(() => {\n                setSuccess(false)\n                }, 200); */\n                toast({\n                    message: 'Band deleted succesfully',\n                    type: 'is-success',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  })\n                changeState()\n            })\n            .catch((err)=>{\n               // setMessage(\"Error deleting Band, probable network issues \"+ err )\n               // setError(true)\n                toast({\n                    message: \"Error deleting Band, probable network issues or \"+ err,\n                    type: 'is-danger',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  })\n            })\n        }\n    }\n        \n\n   /* ()=> setValue(\"firstName\", \"Bill\", , {\n            shouldValidate: true,\n            shouldDirty: true\n          })) */\n    const onSubmit = (data,e) =>{\n        e.preventDefault();\n        \n        setSuccess(false)\n        console.log(data)\n        data.facility=Band.facility\n          //console.log(data);\n          \n        BandServ.patch(Band._id,data)\n        .then((res)=>{\n                //console.log(JSON.stringify(res))\n               // e.target.reset();\n               // setMessage(\"updated Band successfully\")\n                 toast({\n                    message: 'Band updated succesfully',\n                    type: 'is-success',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  })\n                  \n                changeState()\n\n            })\n            .catch((err)=>{\n                //setMessage(\"Error creating Band, probable network issues \"+ err )\n               // setError(true)\n                toast({\n                    message: \"Error updating Band, probable network issues or \"+ err,\n                    type: 'is-danger',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  })\n            })\n\n      } \n     \n      \n    return (\n        \n        <>\n        <div className=\"card \">\n            <div className=\"card-header\">\n                <p className=\"card-header-title\">\n                    Band Details-Modify\n                </p>\n            </div>\n            <div className=\"card-content vscrollable\">\n           \n            <form onSubmit={handleSubmit(onSubmit)}>\n                <div className=\"field\">\n                    <label className=\"label is-small\"> Name\n                    <p className=\"control has-icons-left has-icons-right\">\n                        <input className=\"input  is-small\" ref={register({ required: true })}  name=\"name\" type=\"text\" placeholder=\"Name\" />\n                        <span className=\"icon is-small is-left\">\n                            <i className=\"fas fa-hospital\"></i>\n                        </span>                    \n                    </p>\n                    </label>\n                    </div>\n                <div className=\"field\">\n                <label className=\"label is-small\">Band Type\n                    <p className=\"control has-icons-left has-icons-right\">\n                    <input className=\"input is-small \" ref={register({ required: true })} disabled name=\"bandType\" type=\"text\" placeholder=\"Band Type\" />\n                    <span className=\"icon is-small is-left\">\n                        <i className=\"fas fa-map-signs\"></i>\n                    </span>\n                    \n                </p>\n                </label>\n                </div>\n            {/* <div className=\"field\">\n            <label className=\"label is-small\">Profession\n                <p className=\"control has-icons-left\">\n                    <input className=\"input is-small\" ref={register({ required: true })} name=\"profession\" type=\"text\" placeholder=\"Profession\"/>\n                    <span className=\"icon is-small is-left\">\n                    <i className=\"fas fa-map-marker-alt\"></i>\n                    </span>\n                </p>\n                </label>\n                </div>\n            <div className=\"field\">\n            <label className=\"label is-small\">Phone\n                <p className=\"control has-icons-left\">\n                    <input className=\"input is-small\" ref={register({ required: true })} name=\"phone\" type=\"text\" placeholder=\"Phone No\"/>\n                    <span className=\"icon is-small is-left\">\n                    <i className=\"fas fa-phone-alt\"></i>\n                    </span>\n                </p>\n                </label>\n                 </div>\n            <div className=\"field\">\n            <label className=\"label is-small\">Email\n                <p className=\"control has-icons-left\">\n                    <input className=\"input is-small\" ref={register({ required: true })} name=\"email\" type=\"email\" placeholder=\"Band Email\"/>\n                    <span className=\"icon is-small is-left\">\n                    <i className=\"fas fa-envelope\"></i>\n                    </span>\n                </p>\n                </label>\n                </div>\n            <div className=\"field\">\n            <label className=\"label is-small\">Department\n                <p className=\"control has-icons-left\">\n                    <input className=\"input is-small\" ref={register({ required: true })} name=\"department\" type=\"text\" placeholder=\"Department\"/>\n                    <span className=\"icon is-small is-left\">\n                    <i className=\"fas fa-user-md\"></i>\n                    </span>\n                </p>\n                </label>\n                {errors.department && <span>This field is required</span>}\n                </div>\n            <div className=\"field\">\n            <label className=\"label is-small\">Departmental Unit\n                <p className=\"control has-icons-left\">\n                    <input className=\"input is-small\" ref={register({ required: true })} name=\"deptunit\" type=\"text\" placeholder=\"Departmental Unit\"/>\n                    <span className=\"icon is-small is-left\">\n                    <i className=\"fas fa-hospital-symbol\"></i>\n                    </span>\n                </p>\n                </label>\n                </div> */}\n           {/*  <div className=\"field\">\n            <label className=\"label is-small\">Category\n                <p className=\"control has-icons-left\">\n                    <input className=\"input is-small\" ref={register({ required: true })} name=\"BandCategory\" type=\"text\" placeholder=\"Band Category\"/>\n                    <span className=\"icon is-small is-left\">\n                    <i className=\"fas fa-clinic-medical\"></i>\n                    </span>\n                </p>\n                </label>\n            </div> */}\n           \n           \n            </form>\n            \n            <div className=\"field  is-grouped mt-2\" >\n                <p className=\"control\">\n                    <button type=\"submit\" className=\"button is-success is-small\" onClick={handleSubmit(onSubmit)}>\n                        Save\n                    </button>\n                </p>\n                <p className=\"control\">\n                    <button className=\"button is-warning is-small\" onClick={handleCancel}>\n                        Cancel\n                    </button>\n                </p>\n                <p className=\"control\">\n                    <button className=\"button is-danger is-small\" onClick={()=>handleDelete()} type=\"delete\">\n                       Delete\n                    </button>\n                </p>\n            </div>\n        </div>\n        </div>\n        </>\n    )\n   \n   \n                \n}   \n\nexport  function InputSearch({getSearchfacility,clear}) {\n    \n    const facilityServ=client.service('facility')\n    const [facilities,setFacilities]=useState([])\n     // eslint-disable-next-line\n     const [searchError, setSearchError] =useState(false)\n     // eslint-disable-next-line\n    const [showPanel, setShowPanel] =useState(false)\n     // eslint-disable-next-line\n   const [searchMessage, setSearchMessage] = useState(\"\") \n   // eslint-disable-next-line \n   const [simpa,setSimpa]=useState(\"\")\n   // eslint-disable-next-line \n   const [chosen,setChosen]=useState(false)\n   // eslint-disable-next-line \n   const [count,setCount]=useState(0)\n   const inputEl=useRef(null)\n\n\n   const handleRow= async(obj)=>{\n        await setChosen(true)\n        //alert(\"something is chaning\")\n       getSearchfacility(obj)\n       \n       await setSimpa(obj.facilityName)\n       \n        // setSelectedFacility(obj)\n        setShowPanel(false)\n        await setCount(2)\n        /* const    newfacilityModule={\n            selectedFacility:facility,\n            show :'detail'\n        }\n   await setState((prevstate)=>({...prevstate, facilityModule:newfacilityModule})) */\n   //console.log(state)\n}\n    const handleBlur=async(e)=>{\n         if (count===2){\n             console.log(\"stuff was chosen\")\n         }\n       \n       /*  console.log(\"blur\")\n         setShowPanel(false)\n        console.log(JSON.stringify(simpa))\n        if (simpa===\"\"){\n            console.log(facilities.length)\n            setSimpa(\"abc\")\n            setSimpa(\"\")\n            setFacilities([])\n            inputEl.current.setValue=\"\"\n        }\n        console.log(facilities.length)\n        console.log(inputEl.current) */\n    }\n    const handleSearch=async(val)=>{\n        \n        const field='facilityName' //field variable\n       \n        if (val.length>=3){\n            facilityServ.find({query: {     //service\n                 [field]: {\n                     $regex:val,\n                     $options:'i'\n                    \n                 },\n                 $limit:10,\n                 $sort: {\n                     createdAt: -1\n                   }\n                     }}).then((res)=>{\n              console.log(\"facility  fetched successfully\") \n                setFacilities(res.data)\n                 setSearchMessage(\" facility  fetched successfully\")\n                 setShowPanel(true)\n             })\n             .catch((err)=>{\n                 console.log(err)\n                 setSearchMessage(\"Error searching facility, probable network issues \"+ err )\n                 setSearchError(true)\n             })\n         }\n        else{\n            console.log(\"less than 3 \")\n            console.log(val)\n            setShowPanel(false)\n            await setFacilities([])\n            console.log(facilities)\n        }\n    }\n    useEffect(() => {\n       if (clear){\n           setSimpa(\"\")\n       }\n        return () => {\n            \n        }\n    }, [clear] )\n    return (\n        <div>\n            <div className=\"field\">\n                <div className=\"control has-icons-left  \">\n                    <div className={`dropdown ${showPanel?\"is-active\":\"\"}`}>\n                        <div className=\"dropdown-trigger\">\n                            <DebounceInput className=\"input is-small \" \n                                type=\"text\" placeholder=\"Search Facilities\"\n                                value={simpa}\n                                minLength={1}\n                                debounceTimeout={400}\n                                onBlur={(e)=>handleBlur(e)}\n                                onChange={(e)=>handleSearch(e.target.value)}\n                                inputRef={inputEl}\n                                  />\n                            <span className=\"icon is-small is-left\">\n                                <i className=\"fas fa-search\"></i>\n                            </span>\n                        </div>\n                        {searchError&&<div>{searchMessage}</div>}\n                        <div className=\"dropdown-menu\" >\n                            <div className=\"dropdown-content\">\n                            {facilities.map((facility, i)=>(\n                                    \n                                    <div className=\"dropdown-item\" key={facility._id} onClick={()=>handleRow(facility)}>\n                                        \n                                        <span>{facility.facilityName}</span>\n                                        \n                                    </div>\n                                    \n                                    ))}\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n          \n        </div>\n    )\n}"]},"metadata":{},"sourceType":"module"}