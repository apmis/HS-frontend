{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport _regeneratorRuntime from \"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _objectSpread from \"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _asyncToGenerator from \"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/mfybaby/Documents/HealthStack2/HS-frontend/src/components/Finance/BillService.js\",\n    _s = $RefreshSig$();\n\n/* eslint-disable */\nimport React, { useState, useContext, useEffect, useRef } from 'react';\nimport client from '../../feathers';\nimport { DebounceInput } from 'react-debounce-input';\nimport { useForm } from \"react-hook-form\"; //import {useHistory} from 'react-router-dom'\n\nimport { UserContext, ObjectContext } from '../../context';\nimport { toast } from 'bulma-toast';\nimport { format, formatDistanceToNowStrict } from 'date-fns';\nimport PaymentCreate from './PaymentCreate';\nimport PatientProfile from '../ClientMgt/PatientProfile';\n/* import {ProductCreate} from './Products' */\n// eslint-disable-next-line\n//const searchfacility={};\n\nimport { Accordion, AccordionItem, AccordionItemHeading, AccordionItemState, AccordionItemButton, AccordionItemPanel } from 'react-accessible-accordion'; // Demo styles, see 'Styles' section below for some notes on use.\n\nimport 'react-accessible-accordion/dist/fancy-example.css';\nimport { BillingList } from './Payment';\nimport BillServiceCreate from './BillServiceCreate';\nexport default function BillService() {\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: \"section remPadTop\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"columns \",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"column is-5 \",\n        children: /*#__PURE__*/_jsxDEV(BillsList, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 37,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"column is-7 \",\n        children: /*#__PURE__*/_jsxDEV(BillServiceCreate, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 18\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 31,\n    columnNumber: 9\n  }, this);\n}\n_c = BillService;\nexport function BillsList() {\n  _s();\n\n  var _this = this;\n\n  // const { register, handleSubmit, watch, errors } = useForm();\n  // eslint-disable-next-line\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      error = _useState2[0],\n      setError = _useState2[1]; // eslint-disable-next-line\n\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      success = _useState4[0],\n      setSuccess = _useState4[1]; // eslint-disable-next-line\n\n\n  var _useState5 = useState(\"\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      message = _useState6[0],\n      setMessage = _useState6[1];\n\n  var BillServ = client.service('bills'); //const history = useHistory()\n  // const {user,setUser} = useContext(UserContext)\n\n  var _useState7 = useState([]),\n      _useState8 = _slicedToArray(_useState7, 2),\n      facilities = _useState8[0],\n      setFacilities = _useState8[1]; // eslint-disable-next-line\n\n\n  var _useState9 = useState(),\n      _useState10 = _slicedToArray(_useState9, 2),\n      selectedDispense = _useState10[0],\n      setSelectedDispense = _useState10[1]; //\n\n\n  var _useState11 = useState([]),\n      _useState12 = _slicedToArray(_useState11, 2),\n      selectedOrders = _useState12[0],\n      setSelectedOrders = _useState12[1]; // eslint-disable-next-line\n\n\n  var _useContext = useContext(ObjectContext),\n      state = _useContext.state,\n      setState = _useContext.setState; // eslint-disable-next-line\n\n\n  var _useContext2 = useContext(UserContext),\n      user = _useContext2.user,\n      setUser = _useContext2.setUser;\n\n  var _useState13 = useState(\"\"),\n      _useState14 = _slicedToArray(_useState13, 2),\n      selectedFinance = _useState14[0],\n      setSelectedFinance = _useState14[1];\n\n  var _useState15 = useState(\"\"),\n      _useState16 = _slicedToArray(_useState15, 2),\n      expanded = _useState16[0],\n      setExpanded = _useState16[1];\n\n  var _useState17 = useState(\"\"),\n      _useState18 = _slicedToArray(_useState17, 2),\n      oldClient = _useState18[0],\n      setOldClient = _useState18[1];\n\n  var handleSelectedClient = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(Client) {\n      var newClientModule;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              // await setSelectedClient(Client)\n              newClientModule = {\n                selectedClient: Client,\n                show: 'detail'\n              };\n              _context.next = 3;\n              return setState(function (prevstate) {\n                return _objectSpread(_objectSpread({}, prevstate), {}, {\n                  ClientModule: newClientModule\n                });\n              });\n\n            case 3:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function handleSelectedClient(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var handleChoseClient = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(client, e, order) {\n      var newClient, newProductEntryModule;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              setOldClient(client.clientname);\n              newClient = client.clientname;\n\n              if (oldClient !== newClient) {\n                //alert(\"New Client Onboard\")\n                //remove all checked clientsly\n                selectedOrders.forEach(function (el) {\n                  return el.checked = \"\";\n                });\n                setSelectedOrders([]);\n              } // console.log(e.target.checked)\n\n\n              order.checked = e.target.checked;\n              _context2.next = 6;\n              return handleSelectedClient(order.participantInfo.client);\n\n            case 6:\n              _context2.next = 8;\n              return setSelectedFinance(order);\n\n            case 8:\n              newProductEntryModule = {\n                selectedFinance: order,\n                show: 'detail',\n                state: e.target.checked\n              };\n              _context2.next = 11;\n              return setState(function (prevstate) {\n                return _objectSpread(_objectSpread({}, prevstate), {}, {\n                  financeModule: newProductEntryModule\n                });\n              });\n\n            case 11:\n              if (!e.target.checked) {\n                _context2.next = 16;\n                break;\n              }\n\n              _context2.next = 14;\n              return setSelectedOrders(function (prevstate) {\n                return prevstate.concat(order);\n              });\n\n            case 14:\n              _context2.next = 17;\n              break;\n\n            case 16:\n              setSelectedOrders(function (prevstate) {\n                return prevstate.filter(function (el) {\n                  return el._id !== order._id;\n                });\n              });\n\n            case 17:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function handleChoseClient(_x2, _x3, _x4) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var handleMedicationRow = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(ProductEntry, e) {\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function handleMedicationRow(_x5, _x6) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var handleCreateNew = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n      var newProductEntryModule;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              newProductEntryModule = {\n                selectedDispense: {},\n                show: 'create'\n              };\n              _context4.next = 3;\n              return setState(function (prevstate) {\n                return _objectSpread(_objectSpread({}, prevstate), {}, {\n                  DispenseModule: newProductEntryModule\n                });\n              });\n\n            case 3:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n\n    return function handleCreateNew() {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  var handleSearch = function handleSearch(val) {\n    var field = 'name'; //console.log(val)\n\n    BillServ.find({\n      query: {\n        'participantInfo.paymentmode.detail.principalName': {\n          $regex: val,\n          $options: 'i'\n        },\n        $or: [{\n          'participantInfo.paymentmode.type': \"Cash\"\n        }, {\n          'participantInfo.paymentmode.type': \"Family Cover\"\n        }],\n        'participantInfo.billingFacility': user.currentEmployee.facilityDetail._id,\n        billing_status: \"Unpaid\",\n        // need to set this finally\n        //order_category:\"Prescription\",\n        // storeId:state.StoreModule.selectedStore._id,\n        //facility:user.currentEmployee.facilityDetail._id || \"\",\n        $limit: 30,\n        $sort: {\n          createdAt: -1\n        }\n      }\n    }).then(function (res) {\n      // console.log(res)\n      setFacilities(res.groupedOrder);\n      setMessage(\" ProductEntry  fetched successfully\");\n      setSuccess(true);\n    }).catch(function (err) {\n      // console.log(err)\n      setMessage(\"Error fetching ProductEntry, probable network issues \" + err);\n      setError(true);\n    });\n  };\n\n  var getFacilities = /*#__PURE__*/function () {\n    var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5() {\n      var findProductEntry;\n      return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              _context5.next = 2;\n              return BillServ.find({\n                query: {\n                  $or: [{\n                    'participantInfo.paymentmode.type': \"Cash\"\n                  }, {\n                    'participantInfo.paymentmode.type': \"Family Cover\"\n                  }],\n                  'participantInfo.billingFacility': user.currentEmployee.facilityDetail._id,\n                  billing_status: \"Unpaid\",\n                  // need to set this finally\n                  //storeId:state.StoreModule.selectedStore._id,\n                  //clientId:state.ClientModule.selectedClient._id,\n                  $limit: 100,\n                  $sort: {\n                    createdAt: -1\n                  }\n                }\n              });\n\n            case 2:\n              findProductEntry = _context5.sent;\n              console.log(\"updatedorder\", findProductEntry.groupedOrder);\n              _context5.next = 6;\n              return setFacilities(findProductEntry.groupedOrder);\n\n            case 6:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5);\n    }));\n\n    return function getFacilities() {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n\n  var handleRow = /*#__PURE__*/function () {\n    var _ref6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6(Client, e) {\n      return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n        while (1) {\n          switch (_context6.prev = _context6.next) {\n            case 0:\n            case \"end\":\n              return _context6.stop();\n          }\n        }\n      }, _callee6);\n    }));\n\n    return function handleRow(_x7, _x8) {\n      return _ref6.apply(this, arguments);\n    };\n  }(); //1.consider using props for global data\n\n\n  useEffect(function () {\n    // console.log(\"started\")\n    getFacilities();\n    BillServ.on('created', function (obj) {\n      return getFacilities();\n    });\n    BillServ.on('updated', function (obj) {\n      return getFacilities();\n    });\n    BillServ.on('patched', function (obj) {\n      return getFacilities();\n    });\n    BillServ.on('removed', function (obj) {\n      return getFacilities();\n    });\n    var newClient = {\n      selectedClient: \"\",\n      show: 'create'\n    };\n    setState(function (prevstate) {\n      return _objectSpread(_objectSpread({}, prevstate), {}, {\n        ClientModule: newClient\n      });\n    });\n    return function () {};\n  }, []);\n  useEffect(function () {\n    //changes with checked box\n    // console.log(selectedOrders)\n    return function () {};\n  }, [selectedOrders]);\n  useEffect(function () {\n    if (state.financeModule.show === \"create\") {\n      selectedOrders.forEach(function (el) {\n        return el.checked = \"\";\n      });\n      setSelectedOrders([]);\n    }\n\n    return function () {};\n  }, [state.financeModule.show]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"level\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"level-left\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"level-item\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"field\",\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"control has-icons-left  \",\n              children: [/*#__PURE__*/_jsxDEV(DebounceInput, {\n                className: \"input is-small \",\n                type: \"text\",\n                placeholder: \"Search Medications\",\n                minLength: 3,\n                debounceTimeout: 400,\n                onChange: function onChange(e) {\n                  return handleSearch(e.target.value);\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 274,\n                columnNumber: 38\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"icon is-small is-left\",\n                children: /*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fas fa-search\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 280,\n                  columnNumber: 42\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 279,\n                columnNumber: 38\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 273,\n              columnNumber: 34\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 272,\n            columnNumber: 30\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 26\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 22\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"level-item\",\n        children: [\" \", /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"is-size-6 has-text-weight-medium\",\n          children: \"Unpaid Bills \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 51\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 286,\n        columnNumber: 22\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"level-right\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"level-item\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"level-item\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"button is-success is-small\",\n              onClick: handleCreateNew,\n              children: \"New\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 289,\n              columnNumber: 58\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 289,\n            columnNumber: 30\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 288,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 287,\n        columnNumber: 22\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 269,\n      columnNumber: 18\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \" pullup \",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \" is-fullwidth vscrollable pr-1\",\n        children: /*#__PURE__*/_jsxDEV(Accordion, {\n          allowZeroExpanded: true,\n          children: facilities.map(function (Clinic, i) {\n            return /*#__PURE__*/_jsxDEV(AccordionItem, {\n              children: [/*#__PURE__*/_jsxDEV(AccordionItemHeading, {\n                children: /*#__PURE__*/_jsxDEV(AccordionItemButton, {\n                  children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: [\" \", i + 1, \" \", Clinic.clientname, \" \", \" \"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 302,\n                    columnNumber: 38\n                  }, _this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 300,\n                  columnNumber: 38\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 299,\n                columnNumber: 33\n              }, _this), /*#__PURE__*/_jsxDEV(AccordionItemPanel, {\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \" is-fullwidth vscrollable pr-1\",\n                  children: /*#__PURE__*/_jsxDEV(Accordion, {\n                    allowZeroExpanded: true,\n                    children: Clinic.bills.map(function (category, i) {\n                      return /*#__PURE__*/_jsxDEV(AccordionItem, {\n                        children: [/*#__PURE__*/_jsxDEV(AccordionItemHeading, {\n                          children: /*#__PURE__*/_jsxDEV(AccordionItemButton, {\n                            children: [category.catName, \" with \", category.order.length, \" Unpaid bills. \"]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 311,\n                            columnNumber: 54\n                          }, _this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 310,\n                          columnNumber: 54\n                        }, _this), /*#__PURE__*/_jsxDEV(AccordionItemPanel, {\n                          children: /*#__PURE__*/_jsxDEV(\"table\", {\n                            className: \"table is-striped  is-hoverable is-fullwidth is-scrollable mr-2\",\n                            children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                                  children: /*#__PURE__*/_jsxDEV(\"abbr\", {\n                                    title: \"Serial No\",\n                                    children: \"S/No\"\n                                  }, void 0, false, {\n                                    fileName: _jsxFileName,\n                                    lineNumber: 320,\n                                    columnNumber: 78\n                                  }, _this)\n                                }, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 320,\n                                  columnNumber: 74\n                                }, _this), /*#__PURE__*/_jsxDEV(\"th\", {\n                                  children: /*#__PURE__*/_jsxDEV(\"abbr\", {\n                                    title: \"Date\",\n                                    children: \"Date\"\n                                  }, void 0, false, {\n                                    fileName: _jsxFileName,\n                                    lineNumber: 321,\n                                    columnNumber: 78\n                                  }, _this)\n                                }, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 321,\n                                  columnNumber: 74\n                                }, _this), /*#__PURE__*/_jsxDEV(\"th\", {\n                                  children: /*#__PURE__*/_jsxDEV(\"abbr\", {\n                                    title: \"Description\",\n                                    children: \"Description\"\n                                  }, void 0, false, {\n                                    fileName: _jsxFileName,\n                                    lineNumber: 322,\n                                    columnNumber: 78\n                                  }, _this)\n                                }, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 322,\n                                  columnNumber: 74\n                                }, _this), /*#__PURE__*/_jsxDEV(\"th\", {\n                                  children: /*#__PURE__*/_jsxDEV(\"abbr\", {\n                                    title: \"Status\",\n                                    children: \"Status\"\n                                  }, void 0, false, {\n                                    fileName: _jsxFileName,\n                                    lineNumber: 324,\n                                    columnNumber: 78\n                                  }, _this)\n                                }, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 324,\n                                  columnNumber: 74\n                                }, _this), /*#__PURE__*/_jsxDEV(\"th\", {\n                                  children: /*#__PURE__*/_jsxDEV(\"abbr\", {\n                                    title: \"Amount\",\n                                    children: \"Amount\"\n                                  }, void 0, false, {\n                                    fileName: _jsxFileName,\n                                    lineNumber: 325,\n                                    columnNumber: 78\n                                  }, _this)\n                                }, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 325,\n                                  columnNumber: 74\n                                }, _this)]\n                              }, void 0, true, {\n                                fileName: _jsxFileName,\n                                lineNumber: 319,\n                                columnNumber: 70\n                              }, _this)\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 318,\n                              columnNumber: 66\n                            }, _this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                              children: category.order.map(function (order, i) {\n                                return /*#__PURE__*/_jsxDEV(\"tr\", {\n                                  /*  onClick={()=>handleMedicationRow(order)} */\n                                  className: order._id === ((selectedFinance === null || selectedFinance === void 0 ? void 0 : selectedFinance._id) || null) ? \"is-selected\" : \"\",\n                                  children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                                    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                                      type: \"checkbox\",\n                                      name: order._id,\n                                      onChange: function onChange(e) {\n                                        return handleChoseClient(Clinic, e, order);\n                                      },\n                                      checked: order.checked\n                                    }, void 0, false, {\n                                      fileName: _jsxFileName,\n                                      lineNumber: 332,\n                                      columnNumber: 62\n                                    }, _this), \"  \", i + 1]\n                                  }, void 0, true, {\n                                    fileName: _jsxFileName,\n                                    lineNumber: 332,\n                                    columnNumber: 58\n                                  }, _this), /*#__PURE__*/_jsxDEV(\"td\", {\n                                    children: /*#__PURE__*/_jsxDEV(\"span\", {\n                                      children: format(new Date(order.createdAt), 'dd-MM-yy')\n                                    }, void 0, false, {\n                                      fileName: _jsxFileName,\n                                      lineNumber: 333,\n                                      columnNumber: 62\n                                    }, _this)\n                                  }, void 0, false, {\n                                    fileName: _jsxFileName,\n                                    lineNumber: 333,\n                                    columnNumber: 58\n                                  }, _this), \" \", /*#__PURE__*/_jsxDEV(\"th\", {\n                                    children: order.serviceInfo.name\n                                  }, void 0, false, {\n                                    fileName: _jsxFileName,\n                                    lineNumber: 334,\n                                    columnNumber: 58\n                                  }, _this), /*#__PURE__*/_jsxDEV(\"td\", {\n                                    children: order.billing_status\n                                  }, void 0, false, {\n                                    fileName: _jsxFileName,\n                                    lineNumber: 336,\n                                    columnNumber: 58\n                                  }, _this), /*#__PURE__*/_jsxDEV(\"td\", {\n                                    children: order.serviceInfo.amount\n                                  }, void 0, false, {\n                                    fileName: _jsxFileName,\n                                    lineNumber: 337,\n                                    columnNumber: 58\n                                  }, _this)]\n                                }, order._id, true, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 331,\n                                  columnNumber: 58\n                                }, _this);\n                              })\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 328,\n                              columnNumber: 66\n                            }, _this)]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 317,\n                            columnNumber: 58\n                          }, _this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 316,\n                          columnNumber: 54\n                        }, _this)]\n                      }, i, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 309,\n                        columnNumber: 50\n                      }, _this);\n                    })\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 307,\n                    columnNumber: 42\n                  }, _this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 306,\n                  columnNumber: 38\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 305,\n                columnNumber: 34\n              }, _this)]\n            }, Clinic.client_id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 298,\n              columnNumber: 30\n            }, _this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 296,\n          columnNumber: 22\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 295,\n        columnNumber: 22\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 294,\n      columnNumber: 18\n    }, this)]\n  }, void 0, true);\n}\n\n_s(BillsList, \"KkMEvn9Bp8c06to8qXc/4BjEOOY=\");\n\n_c2 = BillsList;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"BillService\");\n$RefreshReg$(_c2, \"BillsList\");","map":{"version":3,"sources":["/home/mfybaby/Documents/HealthStack2/HS-frontend/src/components/Finance/BillService.js"],"names":["React","useState","useContext","useEffect","useRef","client","DebounceInput","useForm","UserContext","ObjectContext","toast","format","formatDistanceToNowStrict","PaymentCreate","PatientProfile","Accordion","AccordionItem","AccordionItemHeading","AccordionItemState","AccordionItemButton","AccordionItemPanel","BillingList","BillServiceCreate","BillService","BillsList","error","setError","success","setSuccess","message","setMessage","BillServ","service","facilities","setFacilities","selectedDispense","setSelectedDispense","selectedOrders","setSelectedOrders","state","setState","user","setUser","selectedFinance","setSelectedFinance","expanded","setExpanded","oldClient","setOldClient","handleSelectedClient","Client","newClientModule","selectedClient","show","prevstate","ClientModule","handleChoseClient","e","order","clientname","newClient","forEach","el","checked","target","participantInfo","newProductEntryModule","financeModule","concat","filter","_id","handleMedicationRow","ProductEntry","handleCreateNew","DispenseModule","handleSearch","val","field","find","query","$regex","$options","$or","currentEmployee","facilityDetail","billing_status","$limit","$sort","createdAt","then","res","groupedOrder","catch","err","getFacilities","findProductEntry","console","log","handleRow","on","obj","value","map","Clinic","i","bills","category","catName","length","Date","serviceInfo","name","amount","client_id"],"mappings":"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","sourcesContent":["/* eslint-disable */\nimport React, {useState,useContext, useEffect,useRef} from 'react'\nimport client from '../../feathers'\nimport {DebounceInput} from 'react-debounce-input';\nimport { useForm } from \"react-hook-form\";\n//import {useHistory} from 'react-router-dom'\nimport {UserContext,ObjectContext} from '../../context'\nimport {toast} from 'bulma-toast'\nimport {format, formatDistanceToNowStrict } from 'date-fns'\nimport PaymentCreate from './PaymentCreate'\nimport PatientProfile from '../ClientMgt/PatientProfile'\n/* import {ProductCreate} from './Products' */\n// eslint-disable-next-line\n//const searchfacility={};\nimport {\n    Accordion,\n    AccordionItem,\n    AccordionItemHeading,\n    AccordionItemState,\n    AccordionItemButton,\n    AccordionItemPanel,\n} from 'react-accessible-accordion';\n\n// Demo styles, see 'Styles' section below for some notes on use.\nimport 'react-accessible-accordion/dist/fancy-example.css';\nimport { BillingList } from './Payment'\nimport BillServiceCreate from './BillServiceCreate'\n\nexport default function BillService() {\n    return (\n        <section className= \"section remPadTop\">\n           {/*  <div className=\"level\">\n            <div className=\"level-item\"> <span className=\"is-size-6 has-text-weight-medium\">ProductEntry  Module</span></div>\n            </div> */}\n            <div className=\"columns \">\n                <div className=\"column is-5 \">\n                    <BillsList />\n                    </div>\n              \n                <div className=\"column is-7 \">\n                \n                 <BillServiceCreate />\n                </div>\n               {/*  <div className=\"column is-3 \">\n                \n                {(state.financeModule.show ==='detail')&&<PatientProfile />}\n                </div> */}\n\n            </div>                            \n            </section>\n    )\n}\n\n\nexport function BillsList(){\n    // const { register, handleSubmit, watch, errors } = useForm();\n     // eslint-disable-next-line\n     const [error, setError] =useState(false)\n      // eslint-disable-next-line\n     const [success, setSuccess] =useState(false)\n      // eslint-disable-next-line\n    const [message, setMessage] = useState(\"\") \n    const BillServ=client.service('bills')\n     //const history = useHistory()\n    // const {user,setUser} = useContext(UserContext)\n     const [facilities,setFacilities]=useState([])\n      // eslint-disable-next-line\n    const [selectedDispense, setSelectedDispense]=useState() //\n    const [selectedOrders, setSelectedOrders]=useState([]) \n     // eslint-disable-next-line\n     const {state,setState}=useContext(ObjectContext)\n     // eslint-disable-next-line\n     const {user,setUser}=useContext(UserContext)\n     const [selectedFinance, setSelectedFinance] =useState(\"\")\n     const [expanded, setExpanded] =useState(\"\")\n     const [oldClient, setOldClient] =useState(\"\")\n \n     const handleSelectedClient= async(Client)=>{\n         // await setSelectedClient(Client)\n          const    newClientModule={\n              selectedClient:Client,\n              show :'detail'\n          }\n         await setState((prevstate)=>({...prevstate, ClientModule:newClientModule}))\n      }\n \n     const handleChoseClient= async(client,e, order)=>{\n         setOldClient(client.clientname)\n         let newClient=client.clientname\n         if(oldClient!==newClient){\n             //alert(\"New Client Onboard\")\n             //remove all checked clientsly\n             selectedOrders.forEach(el=>el.checked=\"\")\n             setSelectedOrders([])\n         }\n \n        // console.log(e.target.checked)\n         order.checked=e.target.checked\n         await handleSelectedClient(order.participantInfo.client)\n         //handleMedicationRow(order)\n         await setSelectedFinance(order)\n         const    newProductEntryModule={\n             selectedFinance:order,\n             show :'detail',\n             state:e.target.checked\n         }\n       await setState((prevstate)=>({...prevstate, financeModule:newProductEntryModule}))\n       \n       //set of checked items\n       if (e.target.checked){\n         await setSelectedOrders((prevstate)=>(prevstate.concat(order)))\n       }else{\n         setSelectedOrders( prevstate=>prevstate.filter(el=>el._id!==order._id))\n       }\n     \n        // console.log(selectedOrders)\n     }\n     const handleMedicationRow= async(ProductEntry,e)=>{ //handle selected single order\n         //console.log(\"b4\",state)\n        // alert(\"Header touched\")\n     \n         //console.log(\"handlerow\",ProductEntry)\n        /* alert(ProductEntry.checked)*/\n        /*  ProductEntry.checked=!ProductEntry.checked */\n     \n        /*  await setSelectedFinance(ProductEntry)\n     \n         const    newProductEntryModule={\n             selectedFinance:ProductEntry,\n             show :'detail'\n \n         }\n       await setState((prevstate)=>({...prevstate, financeModule:newProductEntryModule})) */\n        //console.log(state)\n       // ProductEntry.show=!ProductEntry.show\n     \n     }\n \n     const handleCreateNew = async()=>{\n         const    newProductEntryModule={\n             selectedDispense:{},\n             show :'create'\n             }\n        await setState((prevstate)=>({...prevstate, DispenseModule:newProductEntryModule}))\n        //console.log(state)\n         \n \n     }\n   \n \n     const handleSearch=(val)=>{\n        const field='name'\n        //console.log(val)\n        BillServ.find({query: {\n            'participantInfo.paymentmode.detail.principalName': {\n                     $regex:val,\n                     $options:'i'\n                    \n                 },\n                \n                 $or:[\n                    {\n                       'participantInfo.paymentmode.type':\"Cash\"\n                    },\n                    {\n                       'participantInfo.paymentmode.type':\"Family Cover\"\n                    }\n\n                ],\n                \n                'participantInfo.billingFacility': user.currentEmployee.facilityDetail._id,\n                billing_status:\"Unpaid\",  // need to set this finally\n                 //order_category:\"Prescription\",\n                // storeId:state.StoreModule.selectedStore._id,\n                //facility:user.currentEmployee.facilityDetail._id || \"\",\n                 $limit:30,\n                 $sort: {\n                     createdAt: -1\n                   }\n                     }}).then((res)=>{\n                // console.log(res)\n                setFacilities(res.groupedOrder)\n                 setMessage(\" ProductEntry  fetched successfully\")\n                 setSuccess(true) \n             })\n             .catch((err)=>{\n                // console.log(err)\n                 setMessage(\"Error fetching ProductEntry, probable network issues \"+ err )\n                 setError(true)\n             })\n         }\n     const getFacilities= async()=>{\n        \n             // console.log(\"here b4 server\")\n     const findProductEntry= await BillServ.find(\n             {query: {\n                 $or:[\n                     {\n                        'participantInfo.paymentmode.type':\"Cash\"\n                     },\n                     {\n                        'participantInfo.paymentmode.type':\"Family Cover\"\n                     }\n\n                 ],\n                 \n                 'participantInfo.billingFacility': user.currentEmployee.facilityDetail._id,\n                 billing_status:\"Unpaid\",  // need to set this finally\n                 //storeId:state.StoreModule.selectedStore._id,\n                 //clientId:state.ClientModule.selectedClient._id,\n                 $limit:100,\n                 $sort: {\n                     createdAt: -1\n                 }\n                 }})\n \n             console.log(\"updatedorder\", findProductEntry.groupedOrder)\n             await setFacilities(findProductEntry.groupedOrder)\n           //  await setState((prevstate)=>({...prevstate, currentClients:findProductEntry.groupedOrder}))\n             }   \n     const handleRow= async(Client,e)=>{\n            // alert(expanded)\n               \n             }\n     //1.consider using props for global data\n     useEffect(() => {\n         // console.log(\"started\")\n             getFacilities()\n             BillServ.on('created', (obj)=>getFacilities())\n             BillServ.on('updated', (obj)=>getFacilities())\n             BillServ.on('patched', (obj)=>getFacilities())\n             BillServ.on('removed', (obj)=>getFacilities())\n\n             const newClient={\n                selectedClient:\"\",\n                show :'create'\n                }\n             setState((prevstate)=>({...prevstate, ClientModule:newClient}))\n\n             return () => {\n             \n             }\n             },[])\n \n     useEffect(() => {\n         //changes with checked box\n        // console.log(selectedOrders)\n         \n         return () => {\n             \n         }\n     }, [selectedOrders])\n \n     useEffect(() => {\n        if (state.financeModule.show===\"create\"){\n         selectedOrders.forEach(el=>el.checked=\"\")\n         setSelectedOrders([])\n \n        }\n         return () => {\n            \n         }\n     }, [state.financeModule.show])\n    \n  \n \n     return(     \n             <>  \n                 <div className=\"level\">\n                     <div className=\"level-left\">\n                         <div className=\"level-item\">\n                             <div className=\"field\">\n                                 <p className=\"control has-icons-left  \">\n                                     <DebounceInput className=\"input is-small \" \n                                         type=\"text\" placeholder=\"Search Medications\"\n                                         minLength={3}\n                                         debounceTimeout={400}\n                                         onChange={(e)=>handleSearch(e.target.value)} />\n                                     <span className=\"icon is-small is-left\">\n                                         <i className=\"fas fa-search\"></i>\n                                     </span>\n                                 </p>\n                             </div>\n                         </div>\n                     </div>\n                     <div className=\"level-item\"> <span className=\"is-size-6 has-text-weight-medium\">Unpaid Bills </span></div>\n                     <div className=\"level-right\">\n                        <div className=\"level-item\"> \n                             <div className=\"level-item\"><div className=\"button is-success is-small\" onClick={handleCreateNew}>New</div></div>\n                         </div> \n                     </div>\n \n                 </div>\n                 <div className=\" pullup \">\n                     <div className=\" is-fullwidth vscrollable pr-1\">   \n                     <Accordion allowZeroExpanded >\n                         {facilities.map((Clinic, i)=>(\n                             <AccordionItem  key={Clinic.client_id}  >\n                                <AccordionItemHeading >\n                                     <AccordionItemButton  >\n                                     {/* <input type = \"checkbox\" name={Clinic.client_id}  />   */}\n                                     <strong> {i+1} {Clinic.clientname} {/* with {Clinic.bills.length} Unpaid bills. */} {/* Grand Total amount: N */}</strong> \n                                     </AccordionItemButton>\n                                 </AccordionItemHeading>\n                                 <AccordionItemPanel>\n                                     <div className=\" is-fullwidth vscrollable pr-1\">   \n                                         <Accordion allowZeroExpanded>\n                                             {Clinic.bills.map((category, i)=>(\n                                                 <AccordionItem  key={i} >\n                                                     <AccordionItemHeading >\n                                                     <AccordionItemButton  >\n                                                     {/* <input type = \"checkbox\" name={Clinic.client_id} onChange={(e)=>handleMedicationRow(Clinic,e)} /> */}  \n                                                          {category.catName} with {category.order.length} Unpaid bills. {/* Total amount: N */}\n                                                     </AccordionItemButton>\n                                                     </AccordionItemHeading>\n                                                     <AccordionItemPanel>\n                                                         <table className=\"table is-striped  is-hoverable is-fullwidth is-scrollable mr-2\">\n                                                                 <thead>\n                                                                     <tr>\n                                                                         <th><abbr title=\"Serial No\">S/No</abbr></th>\n                                                                         <th><abbr title=\"Date\">Date</abbr></th>\n                                                                         <th><abbr title=\"Description\">Description</abbr></th>\n                                                                     {/*  <th>Fulfilled</th> */}\n                                                                         <th><abbr title=\"Status\">Status</abbr></th>\n                                                                         <th><abbr title=\"Amount\">Amount</abbr></th>\n                                                                     </tr>\n                                                                 </thead>\n                                                                 <tbody>\n                                                      { category.order.map((order, i)=>(\n \n                                                         <tr key={order._id}  /*  onClick={()=>handleMedicationRow(order)} */  className={order._id===(selectedFinance?._id||null)?\"is-selected\":\"\"}>                                         \n                                                         <th><input type = \"checkbox\" name={order._id} onChange={(e)=>handleChoseClient(Clinic,e, order)}  checked={order.checked}/>  {i+1}</th>\n                                                         <td><span>{format(new Date(order.createdAt),'dd-MM-yy')}</span></td> {/* {formatDistanceToNowStrict(new Date(ProductEntry.createdAt),{addSuffix: true})} <br/> */} \n                                                         <th>{order.serviceInfo.name}</th>\n                                                        {/*  <td>{order.fulfilled===\"True\"?\"Yes\":\"No\"}</td> */}\n                                                         <td>{order.billing_status}</td>\n                                                         <td>{order.serviceInfo.amount}</td>\n                                                         </tr>\n                                                 ))}\n                                             </tbody>\n                                             </table>\n \n                                                     </AccordionItemPanel>                                          \n                                                 </AccordionItem>\n                                             ))}\n                                         </Accordion>\n                                     </div>\n                                 </AccordionItemPanel>                    \n                             </AccordionItem >\n                         ))}\n                     </Accordion >\n                     </div>  \n                 </div>\n             </>          \n     )\n     }\n\n\n"]},"metadata":{},"sourceType":"module"}