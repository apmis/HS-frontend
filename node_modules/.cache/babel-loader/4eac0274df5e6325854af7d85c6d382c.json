{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _regeneratorRuntime from \"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"/home/mfybaby/Documents/HealthStack2/HS-frontend/src/components/helpers/ServiceSearch.js\",\n    _s = $RefreshSig$();\n\n/* eslint-disable */\nimport React, { useState, useContext, useEffect, useRef } from 'react';\nimport client from '../../feathers';\nimport { DebounceInput } from 'react-debounce-input';\nimport { useForm } from \"react-hook-form\"; //import {useHistory} from 'react-router-dom'\n\nimport { UserContext, ObjectContext } from '../../context';\nimport { toast } from 'bulma-toast';\nimport { ServicesCreate } from '../Finance/Services';\nimport { Accordion, AccordionItem, AccordionItemHeading, AccordionItemState, AccordionItemButton, AccordionItemPanel } from 'react-accessible-accordion'; // Demo styles, see 'Styles' section below for some notes on use.\n\nimport 'react-accessible-accordion/dist/fancy-example.css'; // eslint-disable-next-line\n\nvar searchfacility = {};\nexport default function ServiceSearch(_ref) {\n  _s();\n\n  var _this = this;\n\n  var getSearchfacility = _ref.getSearchfacility,\n      clear = _ref.clear,\n      mode = _ref.mode;\n\n  var _useContext = useContext(UserContext),\n      user = _useContext.user;\n\n  var productServ = client.service('billing');\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      facilities = _useState2[0],\n      setFacilities = _useState2[1]; // eslint-disable-next-line\n\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      searchError = _useState4[0],\n      setSearchError = _useState4[1]; // eslint-disable-next-line\n\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      showPanel = _useState6[0],\n      setShowPanel = _useState6[1]; // eslint-disable-next-line\n\n\n  var _useState7 = useState(\"\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      searchMessage = _useState8[0],\n      setSearchMessage = _useState8[1]; // eslint-disable-next-line \n\n\n  var _useState9 = useState(\"\"),\n      _useState10 = _slicedToArray(_useState9, 2),\n      simpa = _useState10[0],\n      setSimpa = _useState10[1]; // eslint-disable-next-line \n\n\n  var _useState11 = useState(false),\n      _useState12 = _slicedToArray(_useState11, 2),\n      chosen = _useState12[0],\n      setChosen = _useState12[1]; // eslint-disable-next-line \n\n\n  var _useState13 = useState(0),\n      _useState14 = _slicedToArray(_useState13, 2),\n      count = _useState14[0],\n      setCount = _useState14[1];\n\n  var inputEl = useRef(null);\n\n  var _useState15 = useState(\"\"),\n      _useState16 = _slicedToArray(_useState15, 2),\n      val = _useState16[0],\n      setVal = _useState16[1];\n\n  var _useState17 = useState(false),\n      _useState18 = _slicedToArray(_useState17, 2),\n      productModal = _useState18[0],\n      setProductModal = _useState18[1];\n\n  var handleRow = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(obj) {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return setChosen(true);\n\n            case 2:\n              _context.next = 4;\n              return setSimpa(obj.name);\n\n            case 4:\n              getSearchfacility(obj); // setSelectedFacility(obj)\n\n              setShowPanel(false);\n              /*   await setCount(2) */\n\n              /* const    newfacilityModule={\n                  selectedFacility:facility,\n                  show :'detail'\n              }\n              await setState((prevstate)=>({...prevstate, facilityModule:newfacilityModule})) */\n              //console.log(state)\n\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function handleRow(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var handleBlur = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e) {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function handleBlur(_x2) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var handleSearch = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(value) {\n      var field;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              console.log(mode);\n              setVal(value);\n\n              if (!(value === \"\")) {\n                _context3.next = 8;\n                break;\n              }\n\n              setShowPanel(false);\n              getSearchfacility(false);\n              _context3.next = 7;\n              return setFacilities([]);\n\n            case 7:\n              return _context3.abrupt(\"return\");\n\n            case 8:\n              field = 'name'; //field variable\n\n              if (!(value.length >= 3)) {\n                _context3.next = 15;\n                break;\n              }\n\n              if (mode.value === \"Cash\" || mode.value === \"Family Cover\") {\n                productServ.find({\n                  query: {\n                    //service\n                    name: {\n                      $regex: value,\n                      $options: 'i'\n                    },\n                    facility: user.currentEmployee.facilityDetail._id,\n                    $limit: 10,\n                    $sort: {\n                      createdAt: -1\n                    }\n                  }\n                }).then(function (res) {\n                  // console.log(\"product  fetched successfully\") \n                  //console.log(res.data) \n                  setFacilities(res.data);\n                  setSearchMessage(\" product  fetched successfully\");\n                  setShowPanel(true);\n                }).catch(function (err) {\n                  toast({\n                    message: 'Error creating Services ' + err,\n                    type: 'is-danger',\n                    dismissible: true,\n                    pauseOnHover: true\n                  });\n                });\n              }\n\n              if (mode.value === \"CompanyCover\") {\n                //if it is hmo or company cover\n                //band of hospital\n                //hmo facility Id\n                productServ.find({\n                  query: {\n                    //service\n                    name: {\n                      $regex: value,\n                      $options: 'i'\n                    },\n                    facility: user.currentEmployee.facilityDetail._id,\n                    $limit: 10,\n                    $sort: {\n                      createdAt: -1\n                    }\n                  }\n                }).then(function (res) {\n                  // console.log(\"product  fetched successfully\") \n                  //console.log(res.data) \n                  setFacilities(res.data);\n                  setSearchMessage(\" product  fetched successfully\");\n                  setShowPanel(true);\n                }).catch(function (err) {\n                  toast({\n                    message: 'Error creating Services ' + err,\n                    type: 'is-danger',\n                    dismissible: true,\n                    pauseOnHover: true\n                  });\n                });\n              }\n\n              if (mode.value === \"HMOCover\") {\n                //if it is hmo or company cover\n                //band of hospital\n                //hmo facility Id\n                //check if the hmo is a state hmo or not\n                console.log(mode);\n\n                if (true) {\n                  productServ.find({\n                    query: {\n                      //service\n                      name: {\n                        $regex: value,\n                        $options: 'i'\n                      },\n                      facility: mode.detail.organizationId,\n                      mode: \"HMOCover\",\n                      dest_org: user.currentEmployee.facilityDetail._id,\n                      $limit: 10,\n                      $sort: {\n                        createdAt: -1\n                      }\n                    }\n                  }).then(function (res) {\n                    // console.log(\"product  fetched successfully\") \n                    //console.log(res.data) \n                    setFacilities(res.data);\n                    setSearchMessage(\" product  fetched successfully\");\n                    setShowPanel(true);\n                  }).catch(function (err) {\n                    toast({\n                      message: 'Error creating Services ' + err,\n                      type: 'is-danger',\n                      dismissible: true,\n                      pauseOnHover: true\n                    });\n                  });\n                }\n              }\n\n              _context3.next = 18;\n              break;\n\n            case 15:\n              // console.log(\"less than 3 \")\n              //console.log(val)\n              setShowPanel(false);\n              _context3.next = 18;\n              return setFacilities([]);\n\n            case 18:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function handleSearch(_x3) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  var handleAddproduct = function handleAddproduct() {\n    setProductModal(true);\n  };\n\n  var handlecloseModal = function handlecloseModal() {\n    setProductModal(false);\n    handleSearch(val);\n  };\n\n  useEffect(function () {\n    if (clear) {\n      //console.log(\"success has changed\",clear)\n      setSimpa(\"\");\n    }\n\n    return function () {};\n  }, [clear]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"field\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"control has-icons-left  \",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"dropdown \".concat(showPanel ? \"is-active\" : \"\"),\n          style: {\n            width: \"100%\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"dropdown-trigger\",\n            style: {\n              width: \"100%\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(DebounceInput, {\n              className: \"input is-small \",\n              type: \"text\",\n              placeholder: \"Search Services\",\n              value: simpa,\n              minLength: 3,\n              debounceTimeout: 400,\n              onBlur: function onBlur(e) {\n                return handleBlur(e);\n              },\n              onChange: function onChange(e) {\n                return handleSearch(e.target.value);\n              },\n              inputRef: inputEl\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 223,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"icon is-small is-left\",\n              children: /*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fas fa-search\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 233,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 232,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"dropdown-menu\",\n            style: {\n              width: \"100%\"\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"dropdown-content\",\n              children: [facilities.length > 0 ? \"\" : /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"dropdown-item\",\n                onClick: handleAddproduct,\n                children: [\" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: [\"Add \", val, \" to service list\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 239,\n                  columnNumber: 111\n                }, this), \" \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 239,\n                columnNumber: 52\n              }, this), facilities.map(function (facility, i) {\n                return /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"dropdown-item selectadd\",\n                  onClick: function onClick() {\n                    return handleRow(facility);\n                  },\n                  children: /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: [facility.name, \" (\", facility.category, \")\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 245,\n                    columnNumber: 41\n                  }, _this)\n                }, facility._id, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 243,\n                  columnNumber: 37\n                }, _this);\n              })]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 238,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 237,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal \".concat(productModal ? \"is-active\" : \"\"),\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-background\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 37\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"header\", {\n          className: \"modal-card-head\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"modal-card-title\",\n            children: \"Create Service\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 260,\n            columnNumber: 41\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"delete\",\n            \"aria-label\": \"close\",\n            onClick: handlecloseModal\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 261,\n            columnNumber: 41\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 41\n        }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n          className: \"modal-card-body\",\n          children: /*#__PURE__*/_jsxDEV(ServicesCreate, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 265,\n            columnNumber: 41\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 41\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 37\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 218,\n    columnNumber: 9\n  }, this);\n}\n\n_s(ServiceSearch, \"A5Flzn3H8whzpmfVoVMVpqM73HE=\");\n\n_c = ServiceSearch;\n\nvar _c;\n\n$RefreshReg$(_c, \"ServiceSearch\");","map":{"version":3,"sources":["/home/mfybaby/Documents/HealthStack2/HS-frontend/src/components/helpers/ServiceSearch.js"],"names":["React","useState","useContext","useEffect","useRef","client","DebounceInput","useForm","UserContext","ObjectContext","toast","ServicesCreate","Accordion","AccordionItem","AccordionItemHeading","AccordionItemState","AccordionItemButton","AccordionItemPanel","searchfacility","ServiceSearch","getSearchfacility","clear","mode","user","productServ","service","facilities","setFacilities","searchError","setSearchError","showPanel","setShowPanel","searchMessage","setSearchMessage","simpa","setSimpa","chosen","setChosen","count","setCount","inputEl","val","setVal","productModal","setProductModal","handleRow","obj","name","handleBlur","e","handleSearch","value","console","log","field","length","find","query","$regex","$options","facility","currentEmployee","facilityDetail","_id","$limit","$sort","createdAt","then","res","data","catch","err","message","type","dismissible","pauseOnHover","detail","organizationId","dest_org","handleAddproduct","handlecloseModal","width","target","map","i","category"],"mappings":"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","sourcesContent":["/* eslint-disable */\nimport React, {useState,useContext, useEffect,useRef} from 'react'\nimport client from '../../feathers'\nimport {DebounceInput} from 'react-debounce-input';\nimport { useForm } from \"react-hook-form\";\n//import {useHistory} from 'react-router-dom'\nimport {UserContext,ObjectContext} from '../../context'\nimport {toast} from 'bulma-toast'\nimport {ServicesCreate} from '../Finance/Services'\nimport {\n    Accordion,\n    AccordionItem,\n    AccordionItemHeading,\n    AccordionItemState,\n    AccordionItemButton,\n    AccordionItemPanel,\n} from 'react-accessible-accordion';\n\n// Demo styles, see 'Styles' section below for some notes on use.\nimport 'react-accessible-accordion/dist/fancy-example.css';\n// eslint-disable-next-line\nconst searchfacility={};\n\nexport default function ServiceSearch({getSearchfacility,clear,mode}) {\n    const {user} = useContext(UserContext)\n    const productServ=client.service('billing')\n    const [facilities,setFacilities]=useState([])\n     // eslint-disable-next-line\n     const [searchError, setSearchError] =useState(false)\n     // eslint-disable-next-line\n    const [showPanel, setShowPanel] =useState(false)\n     // eslint-disable-next-line\n   const [searchMessage, setSearchMessage] = useState(\"\") \n   // eslint-disable-next-line \n   const [simpa,setSimpa]=useState(\"\")\n   // eslint-disable-next-line \n   const [chosen,setChosen]=useState(false)\n   // eslint-disable-next-line \n   const [count,setCount]=useState(0)\n   const inputEl=useRef(null)\n   const [val,setVal]=useState(\"\")\n    const [productModal,setProductModal]=useState(false)\n\n   const handleRow= async(obj)=>{\n        await setChosen(true)\n        //alert(\"something is chaning\")\n       await setSimpa(obj.name)\n       getSearchfacility(obj)\n       \n        // setSelectedFacility(obj)\n        setShowPanel(false)\n      /*   await setCount(2) */\n        /* const    newfacilityModule={\n            selectedFacility:facility,\n            show :'detail'\n        }\n   await setState((prevstate)=>({...prevstate, facilityModule:newfacilityModule})) */\n   //console.log(state)\n}\n    const handleBlur=async(e)=>{\n        /*  if (count===2){\n             console.log(\"stuff was chosen\")\n         }\n        */\n       /*  console.log(\"blur\")\n         setShowPanel(false)\n        console.log(JSON.stringify(simpa))\n        if (simpa===\"\"){\n            console.log(facilities.length)\n            setSimpa(\"abc\")\n            setSimpa(\"\")\n            setFacilities([])\n            inputEl.current.setValue=\"\"\n        }\n        console.log(facilities.length)\n        console.log(inputEl.current) */\n    }\n    const handleSearch=async(value)=>{\n        console.log(mode)\n        setVal(value)\n        if (value===\"\"){\n            setShowPanel(false)\n            getSearchfacility(false)\n            await setFacilities([])\n            return\n        }\n        const field='name' //field variable\n\n       \n        if (value.length>=3 ){\n            if (mode.value=== \"Cash\" ||mode.value=== \"Family Cover\"){\n\n          \n            productServ.find({query: {     //service\n                 name: {\n                     $regex:value,\n                     $options:'i'\n                    \n                 },\n                 facility: user.currentEmployee.facilityDetail._id,\n                 $limit:10,\n                 $sort: {\n                     createdAt: -1\n                   }\n                     }}).then((res)=>{\n             // console.log(\"product  fetched successfully\") \n              //console.log(res.data) \n                setFacilities(res.data)\n                 setSearchMessage(\" product  fetched successfully\")\n                 setShowPanel(true)\n             })\n             .catch((err)=>{\n                toast({\n                    message: 'Error creating Services ' + err,\n                    type: 'is-danger',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  })\n             })\n            }\n            if (mode.value=== \"CompanyCover\"){\n                //if it is hmo or company cover\n                //band of hospital\n                //hmo facility Id\n                productServ.find({query: {     //service\n                    name: {\n                        $regex:value,\n                        $options:'i'\n                       \n                    },\n                    facility: user.currentEmployee.facilityDetail._id,\n                    $limit:10,\n                    $sort: {\n                        createdAt: -1\n                      }\n                        }}).then((res)=>{\n                // console.log(\"product  fetched successfully\") \n                 //console.log(res.data) \n                   setFacilities(res.data)\n                    setSearchMessage(\" product  fetched successfully\")\n                    setShowPanel(true)\n                })\n                .catch((err)=>{\n                   toast({\n                       message: 'Error creating Services ' + err,\n                       type: 'is-danger',\n                       dismissible: true,\n                       pauseOnHover: true,\n                     })\n                })\n\n            }\n            if (mode.value=== \"HMOCover\"){\n                //if it is hmo or company cover\n                //band of hospital\n                //hmo facility Id\n                //check if the hmo is a state hmo or not\n                console.log(mode)\n                if(true){\n                    productServ.find({query: {     //service\n                        name: {\n                            $regex:value,\n                            $options:'i'\n                        \n                        },\n                        facility:mode.detail.organizationId ,\n                        mode:\"HMOCover\",\n                        dest_org:user.currentEmployee.facilityDetail._id,\n                        $limit:10,\n                        $sort: {\n                            createdAt: -1\n                        }\n                            }}).then((res)=>{\n                    // console.log(\"product  fetched successfully\") \n                    //console.log(res.data) \n                    setFacilities(res.data)\n                        setSearchMessage(\" product  fetched successfully\")\n                        setShowPanel(true)\n                    })\n                    .catch((err)=>{\n                    toast({\n                        message: 'Error creating Services ' + err,\n                        type: 'is-danger',\n                        dismissible: true,\n                        pauseOnHover: true,\n                        })\n                    })\n\n                }\n            }\n         }\n        else{\n           // console.log(\"less than 3 \")\n            //console.log(val)\n            setShowPanel(false)\n            await setFacilities([])\n            //console.log(facilities)\n        }\n    }\n\n    const handleAddproduct =()=>{\n        setProductModal(true) \n    }\n    const handlecloseModal =()=>{\n        setProductModal(false)\n        handleSearch(val)\n    }\n    useEffect(() => {\n       if (clear){\n           //console.log(\"success has changed\",clear)\n           setSimpa(\"\")\n       }\n        return () => {\n            \n        }\n    }, [clear] )\n    return (\n        <div>\n            <div className=\"field\">\n                <div className=\"control has-icons-left  \">\n                    <div className={`dropdown ${showPanel?\"is-active\":\"\"}`} style={{width:\"100%\"}}>\n                        <div className=\"dropdown-trigger\" style={{width:\"100%\"}}>\n                            <DebounceInput className=\"input is-small \" \n                                type=\"text\" placeholder=\"Search Services\"\n                                value={simpa}\n                                minLength={3}\n                                debounceTimeout={400}\n                                onBlur={(e)=>handleBlur(e)}\n                                onChange={(e)=>handleSearch(e.target.value)}\n                                inputRef={inputEl}\n                                  />\n                            <span className=\"icon is-small is-left\">\n                                <i className=\"fas fa-search\"></i>\n                            </span>\n                        </div>\n                        {/* {searchError&&<div>{searchMessage}</div>} */}\n                        <div className=\"dropdown-menu\" style={{width:\"100%\"}} >\n                            <div className=\"dropdown-content\">\n                          { facilities.length>0?\"\":<div className=\"dropdown-item\" onClick={handleAddproduct}> <span>Add {val} to service list</span> </div>}\n\n                              {facilities.map((facility, i)=>(\n                                    \n                                    <div className=\"dropdown-item selectadd\" key={facility._id} onClick={()=>handleRow(facility)}>\n                                        \n                                        <span>{facility.name} ({facility.category})</span>\n                                        \n                                    </div>\n                                    \n                                    ))}\n                                    \n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div className={`modal ${productModal?\"is-active\":\"\"}` }>\n                                    <div className=\"modal-background\"></div>\n                                    <div className=\"modal-card\">\n                                        <header className=\"modal-card-head\">\n                                        <p className=\"modal-card-title\">Create Service</p>\n                                        <button className=\"delete\" aria-label=\"close\"  onClick={handlecloseModal}></button>\n                                        </header>\n                                        <section className=\"modal-card-body\">\n                                        {/* <StoreList standalone=\"true\" /> */}\n                                        <ServicesCreate />\n                                        </section>\n                                        {/* <footer className=\"modal-card-foot\">\n                                        <button className=\"button is-success\">Save changes</button>\n                                        <button className=\"button\">Cancel</button>\n                                        </footer> */}\n                                    </div>\n                                </div>       \n        </div>\n    )\n}"]},"metadata":{},"sourceType":"module"}