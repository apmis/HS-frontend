{"ast":null,"code":"import{Fragment as _Fragment}from\"react/jsx-runtime\";import _defineProperty from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _slicedToArray from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";/* eslint-disable */import React,{useState,useContext,useEffect,useRef}from'react';import client from'../../feathers';import{DebounceInput}from'react-debounce-input';import{useForm}from\"react-hook-form\";//import {useHistory} from 'react-router-dom'\nimport{UserContext,ObjectContext}from'../../context';import{toast}from'bulma-toast';import{format,formatDistanceToNowStrict}from'date-fns';import ReportCreate from'./ReportCreate';import PatientProfile from'../ClientMgt/PatientProfile';import LaboratoryReportForm from'../clientForm/forms/laboratoryReportForm';/* import {ProductCreate} from './Products' */ // eslint-disable-next-line\n//const searchfacility={};\nimport{Accordion,AccordionItem,AccordionItemHeading,AccordionItemState,AccordionItemButton,AccordionItemPanel}from'react-accessible-accordion';// Demo styles, see 'Styles' section below for some notes on use.\nimport'react-accessible-accordion/dist/fancy-example.css';//import BillPrescriptionCreate from './BillPrescriptionCreate';\nexport default function LabReport(){//const {state}=useContext(ObjectContext) //,setState\n// eslint-disable-next-line\nvar _useState=useState(),_useState2=_slicedToArray(_useState,2),selectedProductEntry=_useState2[0],setSelectedProductEntry=_useState2[1];//const [showState,setShowState]=useState() //create|modify|detail\nvar _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];// eslint-disable-next-line\nvar _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),success=_useState6[0],setSuccess=_useState6[1];// eslint-disable-next-line\nvar _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),message=_useState8[0],setMessage=_useState8[1];var BillServ=client.service('bills');//const history = useHistory()\n// const {user,setUser} = useContext(UserContext)\nvar _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),facilities=_useState10[0],setFacilities=_useState10[1];// eslint-disable-next-line\nvar _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),selectedOrders=_useState12[0],setSelectedOrders=_useState12[1];//\n// eslint-disable-next-line\nvar _useContext=useContext(ObjectContext),state=_useContext.state,setState=_useContext.setState;// eslint-disable-next-line\nvar _useContext2=useContext(UserContext),user=_useContext2.user,setUser=_useContext2.setUser;return/*#__PURE__*/_jsx(\"section\",{className:\"section remPadTop\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"columns \",children:[/*#__PURE__*/_jsx(\"div\",{className:\"column is-6 \",children:/*#__PURE__*/_jsx(LabOrderList,{})}),/*#__PURE__*/_jsx(\"div\",{className:\"column is-6 \",children:state.financeModule.show==='detail'&&/*#__PURE__*/_jsx(LaboratoryReportForm,{})})]})});}export function LabOrderList(){// const { register, handleSubmit, watch, errors } = useForm();\n// eslint-disable-next-line\nvar _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),error=_useState14[0],setError=_useState14[1];// eslint-disable-next-line\nvar _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),success=_useState16[0],setSuccess=_useState16[1];// eslint-disable-next-line\nvar _useState17=useState(\"\"),_useState18=_slicedToArray(_useState17,2),message=_useState18[0],setMessage=_useState18[1];var BillServ=client.service('bills');//const history = useHistory()\n// const {user,setUser} = useContext(UserContext)\nvar _useState19=useState([]),_useState20=_slicedToArray(_useState19,2),facilities=_useState20[0],setFacilities=_useState20[1];// eslint-disable-next-line\nvar _useState21=useState(),_useState22=_slicedToArray(_useState21,2),selectedDispense=_useState22[0],setSelectedDispense=_useState22[1];//\nvar _useState23=useState([]),_useState24=_slicedToArray(_useState23,2),selectedOrders=_useState24[0],setSelectedOrders=_useState24[1];// eslint-disable-next-line\nvar _useContext3=useContext(ObjectContext),state=_useContext3.state,setState=_useContext3.setState;// eslint-disable-next-line\nvar _useContext4=useContext(UserContext),user=_useContext4.user,setUser=_useContext4.setUser;var _useState25=useState(\"\"),_useState26=_slicedToArray(_useState25,2),selectedFinance=_useState26[0],setSelectedFinance=_useState26[1];var _useState27=useState(\"\"),_useState28=_slicedToArray(_useState27,2),expanded=_useState28[0],setExpanded=_useState28[1];var _useState29=useState(\"\"),_useState30=_slicedToArray(_useState29,2),oldClient=_useState30[0],setOldClient=_useState30[1];var handleSelectedClient=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(Client){var newClientModule;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:// await setSelectedClient(Client)\nnewClientModule={selectedClient:Client,show:'detail'};_context.next=3;return setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{ClientModule:newClientModule});});case 3:case\"end\":return _context.stop();}}},_callee);}));return function handleSelectedClient(_x){return _ref.apply(this,arguments);};}();var handleChoseClient=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(client,e,order){var newClient,newProductEntryModule;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setOldClient(client.clientname);newClient=client.clientname;if(oldClient!==newClient){//alert(\"New Client Onboard\")\n//remove all checked clientsly\nselectedOrders.forEach(function(el){return el.checked=\"\";});setSelectedOrders([]);}// console.log(e.target.checked)\norder.checked=e.target.checked;_context2.next=6;return handleSelectedClient(order.participantInfo.client);case 6:_context2.next=8;return setSelectedFinance(order);case 8:newProductEntryModule={selectedFinance:order,show:'detail',state:e.target.checked};_context2.next=11;return setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{financeModule:newProductEntryModule});});case 11:if(!e.target.checked){_context2.next=16;break;}_context2.next=14;return setSelectedOrders(function(prevstate){return prevstate.concat(order);});case 14:_context2.next=17;break;case 16:setSelectedOrders(function(prevstate){return prevstate.filter(function(el){return el._id!==order._id;});});case 17:case\"end\":return _context2.stop();}}},_callee2);}));return function handleChoseClient(_x2,_x3,_x4){return _ref2.apply(this,arguments);};}();var handleMedicationRow=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(order){var newProductEntryModule;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return handleSelectedClient(order.orderInfo.orderObj.client);case 2:_context3.next=4;return setSelectedFinance(order);case 4:// grab report\n// if draft show create/modify\n//if final: show final\nconsole.log(order);newProductEntryModule={selectedFinance:order,show:'detail',report_status:order.report_status};_context3.next=8;return setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{financeModule:newProductEntryModule});});case 8:case\"end\":return _context3.stop();}}},_callee3);}));return function handleMedicationRow(_x5){return _ref3.apply(this,arguments);};}();var handleSearch=function handleSearch(val){var _query;var field='name';//console.log(val)\nBillServ.find({query:(_query={'participantInfo.paymentmode.detail.principalName':{$regex:val,$options:'i'},/*  $or:[\n                {\n           \n                } ,\n                {\n            'orderInfo.orderObj.clientname': {\n                        $regex:val,\n                        $options:'i'\n                    \n                    }\n                }\n                ], */ //order_category:\"Prescription\",\n$or:[{'participantInfo.paymentmode.type':\"Cash\"},{'participantInfo.paymentmode.type':\"Family Cover\"}]},_defineProperty(_query,\"$or\",[{'orderInfo.orderObj.order_category':\"Lab Order\"},{'orderInfo.orderObj.order_category':\"Laboratory\"}]),_defineProperty(_query,'participantInfo.billingFacility',user.currentEmployee.facilityDetail._id),_defineProperty(_query,\"billing_status\",\"Unpaid\"),_defineProperty(_query,\"$limit\",20),_defineProperty(_query,\"$sort\",{createdAt:-1}),_query)}).then(function(res){// console.log(res)\nsetFacilities(res.groupedOrder);setMessage(\" ProductEntry  fetched successfully\");setSuccess(true);}).catch(function(err){// console.log(err)\nsetMessage(\"Error fetching ProductEntry, probable network issues \"+err);setError(true);});};var getFacilities=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var findProductEntry;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return BillServ.find({query:{$or:[{'orderInfo.orderObj.order_category':\"Lab Order\"},{'orderInfo.orderObj.order_category':\"Laboratory\"}],'participantInfo.billingFacility':user.currentEmployee.facilityDetail._id,//'orderInfo.orderObj.order_category':\"Lab Order\",\n// billing_status:\"Unpaid\",  //need to set this finally\n//storeId:state.StoreModule.selectedStore._id,\n//clientId:state.ClientModule.selectedClient._id,\n$limit:1000,$sort:{createdAt:-1}}});case 2:findProductEntry=_context4.sent;console.log(\"lab bills\",findProductEntry.data);_context4.next=6;return setFacilities(findProductEntry.data);case 6:case\"end\":return _context4.stop();}}},_callee4);}));return function getFacilities(){return _ref4.apply(this,arguments);};}();var handleRow=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(Client,e){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:case\"end\":return _context5.stop();}}},_callee5);}));return function handleRow(_x6,_x7){return _ref5.apply(this,arguments);};}();//1.consider using props for global data\nuseEffect(function(){// console.log(\"started\")\ngetFacilities();BillServ.on('created',function(obj){return getFacilities();});BillServ.on('updated',function(obj){return getFacilities();});BillServ.on('patched',function(obj){return getFacilities();});BillServ.on('removed',function(obj){return getFacilities();});return function(){};},[]);useEffect(function(){return function(){};},[selectedOrders]);useEffect(function(){if(state.financeModule.show===\"create\"){selectedOrders.forEach(function(el){return el.checked=\"\";});setSelectedOrders([]);}return function(){};},[state.financeModule.show]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"level\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"level-left\",children:/*#__PURE__*/_jsx(\"div\",{className:\"level-item\",children:/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left  \",children:[/*#__PURE__*/_jsx(DebounceInput,{className:\"input is-small \",type:\"text\",placeholder:\"Search Bills\",minLength:3,debounceTimeout:400,onChange:function onChange(e){return handleSearch(e.target.value);}}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-search\"})})]})})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"level-item\",children:[\" \",/*#__PURE__*/_jsx(\"span\",{className:\"is-size-6 has-text-weight-medium\",children:\"Laboratory test \"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\" pullup \",children:/*#__PURE__*/_jsx(\"div\",{className:\" is-fullwidth vscrollable pr-1\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table is-striped  is-hoverable is-fullwidth is-scrollable mr-2\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Serial No\",children:\"S/No\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Date\",children:\"Date\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Client\",children:\"Client\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Description\",children:\"Test\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Amount\",children:\"Amount\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Status\",children:\"Payment Status\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Status\",children:\"Result Status\"})})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:facilities.map(function(order,i){return/*#__PURE__*/_jsxs(\"tr\",{onClick:function onClick(){return handleMedicationRow(order);},className:order._id===((selectedFinance===null||selectedFinance===void 0?void 0:selectedFinance._id)||null)?\"is-selected\":\"\",children:[/*#__PURE__*/_jsx(\"th\",{children:i+1}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{children:format(new Date(order.createdAt),'dd-MM-yy')})}),\"  \",/*#__PURE__*/_jsx(\"th\",{children:order.orderInfo.orderObj.clientname}),/*#__PURE__*/_jsx(\"th\",{children:order.serviceInfo.name}),\" \",/*#__PURE__*/_jsx(\"td\",{children:order.serviceInfo.amount}),/*#__PURE__*/_jsx(\"td\",{children:order.billing_status}),/*#__PURE__*/_jsx(\"td\",{children:order.report_status})]},order._id);})})]})})})]});}export function LabNoteCreate(){var _useForm=useForm(),register=_useForm.register,handleSubmit=_useForm.handleSubmit,setValue=_useForm.setValue;//, watch, errors, reset \nvar _useState31=useState(false),_useState32=_slicedToArray(_useState31,2),error=_useState32[0],setError=_useState32[1];var _useState33=useState(false),_useState34=_slicedToArray(_useState33,2),success=_useState34[0],setSuccess=_useState34[1];var _useState35=useState(\"\"),_useState36=_slicedToArray(_useState35,2),message=_useState36[0],setMessage=_useState36[1];// eslint-disable-next-line\nvar _useState37=useState(),_useState38=_slicedToArray(_useState37,2),facility=_useState38[0],setFacility=_useState38[1];//const ClientServ=client.service('labresults')\n//const history = useHistory()\nvar _useContext5=useContext(UserContext),user=_useContext5.user;//,setUser\n// eslint-disable-next-line\nvar _useState39=useState(),_useState40=_slicedToArray(_useState39,2),currentUser=_useState40[0],setCurrentUser=_useState40[1];var _useContext6=useContext(ObjectContext),state=_useContext6.state,setState=_useContext6.setState;var _useState41=useState(\"Draft\"),_useState42=_slicedToArray(_useState41,2),reportStatus=_useState42[0],setReportStatus=_useState42[1];var ClientServ=client.service('labresults');var order=state.financeModule.selectedFinance;var bill_report_status=state.financeModule.report_status;var getSearchfacility=function getSearchfacility(obj){setValue(\"facility\",obj._id,{shouldValidate:true,shouldDirty:true});};useEffect(function(){setCurrentUser(user);//console.log(currentUser)\nreturn function(){};},[user]);var onSubmit=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(data,e){var document,newProductEntryModule;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:e.preventDefault();setMessage(\"\");setError(false);setSuccess(false);document={};// data.createdby=user._id\n//  console.log(data);\nif(user.currentEmployee){document.facility=user.currentEmployee.facilityDetail._id;document.facilityname=user.currentEmployee.facilityDetail.facilityName;// or from facility dropdown\n}document.documentdetail=data;document.documentname=\"\".concat(order.serviceInfo.name,\" Result\");// document.documentClassId=state.DocumentClassModule.selectedDocumentClass._id\ndocument.location=state.employeeLocation.locationName+\" \"+state.employeeLocation.locationType;document.locationId=state.employeeLocation.locationId;document.client=order.orderInfo.orderObj.clientId;document.createdBy=user._id;document.createdByname=user.firstname+\" \"+user.lastname;document.status=reportStatus;document.billId=order._id;//  console.log(document)\n//  console.log(order)\nif(!(document.location===undefined||!document.createdByname||!document.facilityname)){_context6.next=18;break;}toast({message:' Documentation data missing, requires location and facility details',type:'is-danger',dismissible:true,pauseOnHover:true});return _context6.abrupt(\"return\");case 18:if(bill_report_status===\"Pending\"){ClientServ.create(document).then(function(res){e.target.reset();setSuccess(true);toast({message:'Lab Result created succesfully',type:'is-success',dismissible:true,pauseOnHover:true});setSuccess(false);}).catch(function(err){toast({message:'Error creating Lab Result '+err,type:'is-danger',dismissible:true,pauseOnHover:true});});}if(bill_report_status===\"Draft\"){ClientServ.patch(order.resultDetail._id,document).then(function(res){e.target.reset();setSuccess(true);toast({message:'Lab Result updated succesfully',type:'is-success',dismissible:true,pauseOnHover:true});setSuccess(false);}).catch(function(err){toast({message:'Error updating Lab Result '+err,type:'is-danger',dismissible:true,pauseOnHover:true});});}newProductEntryModule={selectedFinance:order,show:'show'// report_status:order.report_status\n};_context6.next=23;return setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{financeModule:newProductEntryModule});});case 23:case\"end\":return _context6.stop();}}},_callee6);}));return function onSubmit(_x8,_x9){return _ref6.apply(this,arguments);};}();var handleChangePart=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(e){return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:console.log(e.target.value);_context7.next=3;return setReportStatus(e.target.value);case 3:case\"end\":return _context7.stop();}}},_callee7);}));return function handleChangePart(_x10){return _ref7.apply(this,arguments);};}();useEffect(function(){var _order$resultDetail;if(!((_order$resultDetail=order.resultDetail)===null||_order$resultDetail===void 0?void 0:_order$resultDetail.documentdetail)){setValue(\"Finding\",\"\",{shouldValidate:true,shouldDirty:true});setValue(\"Recommendation\",\"\",{shouldValidate:true,shouldDirty:true});// setReportStatus(order.report_status)\nreturn;}if(order.report_status!==\"Pending\"){console.log(order.resultDetail.documentdetail);setValue(\"Finding\",order.resultDetail.documentdetail.Finding,{shouldValidate:true,shouldDirty:true});setValue(\"Recommendation\",order.resultDetail.documentdetail.Recommendation,{shouldValidate:true,shouldDirty:true});setReportStatus(order.report_status);}return function(){};},[order]);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"card \",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsx(\"p\",{className:\"card-header-title\",children:\"Lab Result\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-content vscrollable remPad1\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"label is-size-7\",children:[\"Client:  \",order.orderInfo.orderObj.clientname]}),/*#__PURE__*/_jsxs(\"label\",{className:\"label is-size-7\",children:[\"Test:  \",order.serviceInfo.name]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsx(\"div\",{className:\"field-body\",children:/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsx(\"p\",{className:\"control has-icons-left has-icons-right\",children:/*#__PURE__*/_jsx(\"textarea\",{className:\"textarea is-small\",ref:register(),name:\"Finding\",type:\"text\",placeholder:\"Findings\",disabled:bill_report_status===\"Final\"})})})})}),/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsx(\"div\",{className:\"field-body\",children:/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsx(\"div\",{className:\"control has-icons-left has-icons-right\",children:/*#__PURE__*/_jsx(\"textarea\",{className:\"textarea is-small\",ref:register(),name:\"Recommendation\",type:\"text\",placeholder:\"Recommendation\",disabled:bill_report_status===\"Final\"})})})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\" is-small\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"status\",value:\"Draft\",checked:reportStatus===\"Draft\"||reportStatus===\"Pending\",onChange:function onChange(e){handleChangePart(e);},disabled:bill_report_status===\"Final\"}),/*#__PURE__*/_jsx(\"span\",{children:\" Draft\"})]}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"label\",{className:\" is-small\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"status\",value:\"Final\",checked:reportStatus===\"Final\",onChange:function onChange(e){return handleChangePart(e);},disabled:bill_report_status===\"Final\"}),/*#__PURE__*/_jsx(\"span\",{children:\" Final \"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"field  is-grouped mt-2\",children:/*#__PURE__*/_jsx(\"p\",{className:\"control\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"button is-success is-small\",disabled:bill_report_status===\"Final\",children:bill_report_status===\"Pending\"?\"Save\":\"Update\"})})})]})]})]})});}","map":{"version":3,"sources":["/home/mfybaby/Documents/HealthStack2/HS-frontend/src/components/Laboratory/LabReport.js"],"names":["React","useState","useContext","useEffect","useRef","client","DebounceInput","useForm","UserContext","ObjectContext","toast","format","formatDistanceToNowStrict","ReportCreate","PatientProfile","LaboratoryReportForm","Accordion","AccordionItem","AccordionItemHeading","AccordionItemState","AccordionItemButton","AccordionItemPanel","LabReport","selectedProductEntry","setSelectedProductEntry","error","setError","success","setSuccess","message","setMessage","BillServ","service","facilities","setFacilities","selectedOrders","setSelectedOrders","state","setState","user","setUser","financeModule","show","LabOrderList","selectedDispense","setSelectedDispense","selectedFinance","setSelectedFinance","expanded","setExpanded","oldClient","setOldClient","handleSelectedClient","Client","newClientModule","selectedClient","prevstate","ClientModule","handleChoseClient","e","order","clientname","newClient","forEach","el","checked","target","participantInfo","newProductEntryModule","concat","filter","_id","handleMedicationRow","orderInfo","orderObj","console","log","report_status","handleSearch","val","field","find","query","$regex","$options","$or","currentEmployee","facilityDetail","createdAt","then","res","groupedOrder","catch","err","getFacilities","$limit","$sort","findProductEntry","data","handleRow","on","obj","value","map","i","Date","serviceInfo","name","amount","billing_status","LabNoteCreate","register","handleSubmit","setValue","facility","setFacility","currentUser","setCurrentUser","reportStatus","setReportStatus","ClientServ","bill_report_status","getSearchfacility","shouldValidate","shouldDirty","onSubmit","preventDefault","document","facilityname","facilityName","documentdetail","documentname","location","employeeLocation","locationName","locationType","locationId","clientId","createdBy","createdByname","firstname","lastname","status","billId","undefined","type","dismissible","pauseOnHover","create","reset","patch","resultDetail","handleChangePart","Finding","Recommendation"],"mappings":"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","sourcesContent":["/* eslint-disable */\nimport React, {useState,useContext, useEffect,useRef} from 'react'\nimport client from '../../feathers'\nimport {DebounceInput} from 'react-debounce-input';\nimport { useForm } from \"react-hook-form\";\n//import {useHistory} from 'react-router-dom'\nimport {UserContext,ObjectContext} from '../../context'\nimport {toast} from 'bulma-toast'\nimport {format, formatDistanceToNowStrict } from 'date-fns'\nimport ReportCreate from './ReportCreate'\nimport PatientProfile from '../ClientMgt/PatientProfile'\nimport LaboratoryReportForm from '../clientForm/forms/laboratoryReportForm';\n/* import {ProductCreate} from './Products' */\n// eslint-disable-next-line\n//const searchfacility={};\nimport {\n    Accordion,\n    AccordionItem,\n    AccordionItemHeading,\n    AccordionItemState,\n    AccordionItemButton,\n    AccordionItemPanel,\n} from 'react-accessible-accordion';\n\n// Demo styles, see 'Styles' section below for some notes on use.\nimport 'react-accessible-accordion/dist/fancy-example.css';\n//import BillPrescriptionCreate from './BillPrescriptionCreate';\n\n\n\nexport default function LabReport() {\n    //const {state}=useContext(ObjectContext) //,setState\n    // eslint-disable-next-line\n    const [selectedProductEntry,setSelectedProductEntry]=useState()\n    //const [showState,setShowState]=useState() //create|modify|detail\n    const [error, setError] =useState(false)\n    // eslint-disable-next-line\n   const [success, setSuccess] =useState(false)\n    // eslint-disable-next-line\n  const [message, setMessage] = useState(\"\") \n   const BillServ=client.service('bills')\n   //const history = useHistory()\n  // const {user,setUser} = useContext(UserContext)\n   const [facilities,setFacilities]=useState([])\n    // eslint-disable-next-line\n  const [selectedOrders, setSelectedOrders]=useState([]) //\n   // eslint-disable-next-line\n   const {state,setState}=useContext(ObjectContext)\n   // eslint-disable-next-line\n   const {user,setUser}=useContext(UserContext)\n    \n    return(\n        <section className= \"section remPadTop\">\n           {/*  <div className=\"level\">\n            <div className=\"level-item\"> <span className=\"is-size-6 has-text-weight-medium\">ProductEntry  Module</span></div>\n            </div> */}\n            <div className=\"columns \">\n                <div className=\"column is-6 \">\n                    <LabOrderList />\n                    </div>\n              \n                <div className=\"column is-6 \">\n                \n                {(state.financeModule.show ==='detail')&& <LaboratoryReportForm /> }\n              {/*   {(state.financeModule.show ==='detail')&& <LabNoteCreate /> } */}\n                \n                </div>\n               {/*  <div className=\"column is-3 \"> <LabNoteCreate /> <ReportCreate />\n                \n                {(state.financeModule.show ==='detail')&&<PatientProfile />}\n                </div> */}\n\n            </div>                            \n            </section>\n       \n    )\n    \n}\n\nexport function LabOrderList(){\n   // const { register, handleSubmit, watch, errors } = useForm();\n    // eslint-disable-next-line\n    const [error, setError] =useState(false)\n     // eslint-disable-next-line\n    const [success, setSuccess] =useState(false)\n     // eslint-disable-next-line\n   const [message, setMessage] = useState(\"\") \n   const BillServ=client.service('bills')\n    //const history = useHistory()\n   // const {user,setUser} = useContext(UserContext)\n    const [facilities,setFacilities]=useState([])\n     // eslint-disable-next-line\n   const [selectedDispense, setSelectedDispense]=useState() //\n   const [selectedOrders, setSelectedOrders]=useState([]) \n    // eslint-disable-next-line\n    const {state,setState}=useContext(ObjectContext)\n    // eslint-disable-next-line\n    const {user,setUser}=useContext(UserContext)\n    const [selectedFinance, setSelectedFinance] =useState(\"\")\n    const [expanded, setExpanded] =useState(\"\")\n    const [oldClient, setOldClient] =useState(\"\")\n\n    const handleSelectedClient= async(Client)=>{\n        // await setSelectedClient(Client)\n         const    newClientModule={\n             selectedClient:Client,\n             show :'detail'\n         }\n        await setState((prevstate)=>({...prevstate, ClientModule:newClientModule}))\n     }\n\n    const handleChoseClient= async(client,e, order)=>{\n        setOldClient(client.clientname)\n        let newClient=client.clientname\n        if(oldClient!==newClient){\n            //alert(\"New Client Onboard\")\n            //remove all checked clientsly\n            selectedOrders.forEach(el=>el.checked=\"\")\n            setSelectedOrders([])\n        }\n\n       // console.log(e.target.checked)\n        order.checked=e.target.checked\n        await handleSelectedClient(order.participantInfo.client)\n        //handleMedicationRow(order)\n        await setSelectedFinance(order)\n        const    newProductEntryModule={\n            selectedFinance:order,\n            show :'detail',\n            state:e.target.checked\n        }\n      await setState((prevstate)=>({...prevstate, financeModule:newProductEntryModule}))\n      \n      //set of checked items\n      if (e.target.checked){\n        await setSelectedOrders((prevstate)=>(prevstate.concat(order)))\n      }else{\n        setSelectedOrders( prevstate=>prevstate.filter(el=>el._id!==order._id))\n      }\n    \n       // console.log(selectedOrders)\n    }\n    const handleMedicationRow= async(order)=>{\n        await handleSelectedClient(order.orderInfo.orderObj.client)\n        \n        await setSelectedFinance(order)\n        // grab report\n        // if draft show create/modify\n        //if final: show final\n       console.log(order)\n        const    newProductEntryModule={\n            selectedFinance:order,\n            show :'detail',\n            report_status:order.report_status\n           \n        }\n      await setState((prevstate)=>({...prevstate, financeModule:newProductEntryModule}))\n    \n    }\n\n   \n\n    const handleSearch=(val)=>{\n       const field='name'\n       //console.log(val)\n       BillServ.find({query: {\n        'participantInfo.paymentmode.detail.principalName': {\n            $regex:val,\n            $options:'i'\n        \n        },\n           /*  $or:[\n                {\n           \n                } ,\n                {\n            'orderInfo.orderObj.clientname': {\n                        $regex:val,\n                        $options:'i'\n                    \n                    }\n                }\n                ], */\n                \n                //order_category:\"Prescription\",\n             $or:[\n                    {\n                       'participantInfo.paymentmode.type':\"Cash\"\n                    },\n                    {\n                       'participantInfo.paymentmode.type':\"Family Cover\"\n                    }\n                ],\n               // 'orderInfo.orderObj.order_category':\"Lab Order\",\n               $or:[\n                {\n                   'orderInfo.orderObj.order_category':\"Lab Order\"\n                },\n                {\n                   'orderInfo.orderObj.order_category':\"Laboratory\"\n                }\n            ],                                                                                                                                       \n                'participantInfo.billingFacility': user.currentEmployee.facilityDetail._id,\n                billing_status:\"Unpaid\",  // need to set this finally\n               // storeId:state.StoreModule.selectedStore._id,\n               //facility:user.currentEmployee.facilityDetail._id || \"\",\n                $limit:20,\n                $sort: {\n                    createdAt: -1\n                  }\n                    }}).then((res)=>{\n               // console.log(res)\n               setFacilities(res.groupedOrder)\n                setMessage(\" ProductEntry  fetched successfully\")\n                setSuccess(true) \n            })\n            .catch((err)=>{\n               // console.log(err)\n                setMessage(\"Error fetching ProductEntry, probable network issues \"+ err )\n                setError(true)\n            })\n        }\n    const getFacilities= async()=>{\n       \n            // console.log(\"here b4 server\")\n    const findProductEntry= await BillServ.find(\n            {query: {\n                 $or:[\n                    {\n                       'orderInfo.orderObj.order_category':\"Lab Order\"\n                    },\n                    {\n                       'orderInfo.orderObj.order_category':\"Laboratory\"\n                    }\n                ], \n                'participantInfo.billingFacility': user.currentEmployee.facilityDetail._id,\n                //'orderInfo.orderObj.order_category':\"Lab Order\",\n               // billing_status:\"Unpaid\",  //need to set this finally\n                //storeId:state.StoreModule.selectedStore._id,\n                //clientId:state.ClientModule.selectedClient._id,\n                $limit:1000,\n                $sort: {\n                    createdAt: -1\n                }\n                }})\n\n         console.log(\"lab bills\", findProductEntry.data)\n            await setFacilities(findProductEntry.data)\n          //  await setState((prevstate)=>({...prevstate, currentClients:findProductEntry.groupedOrder}))\n            }   \n    const handleRow= async(Client,e)=>{\n           // alert(expanded)\n              \n            }\n    //1.consider using props for global data\n    useEffect(() => {\n        // console.log(\"started\")\n            getFacilities()\n            BillServ.on('created', (obj)=>getFacilities())\n            BillServ.on('updated', (obj)=>getFacilities())\n            BillServ.on('patched', (obj)=>getFacilities())\n            BillServ.on('removed', (obj)=>getFacilities())\n            return () => {\n            \n            }\n            },[])\n\n    useEffect(() => {\n      \n        return () => {\n            \n        }\n    }, [selectedOrders])\n\n    useEffect(() => {\n       if (state.financeModule.show===\"create\"){\n        selectedOrders.forEach(el=>el.checked=\"\")\n        setSelectedOrders([])\n\n       }\n        return () => {\n           \n        }\n    }, [state.financeModule.show])\n   \n \n\n    return(     \n            <>  \n                <div className=\"level\">\n                    <div className=\"level-left\">\n                        <div className=\"level-item\">\n                            <div className=\"field\">\n                                <p className=\"control has-icons-left  \">\n                                    <DebounceInput className=\"input is-small \" \n                                        type=\"text\" placeholder=\"Search Bills\"\n                                        minLength={3}\n                                        debounceTimeout={400}\n                                        onChange={(e)=>handleSearch(e.target.value)} />\n                                    <span className=\"icon is-small is-left\">\n                                        <i className=\"fas fa-search\"></i>\n                                    </span>\n                                </p>\n                            </div>\n                        </div>\n                    </div>\n                    <div className=\"level-item\"> <span className=\"is-size-6 has-text-weight-medium\">Laboratory test </span></div>\n                     {/* <div className=\"level-right\">\n                       <div className=\"level-item\"> \n                            <div className=\"level-item\"><div className=\"button is-success is-small\" onClick={handleCreateNew}>New</div></div>\n                        </div> \n                    </div>*/}\n\n                </div>\n                <div className=\" pullup \">\n                    <div className=\" is-fullwidth vscrollable pr-1\"> \n                    <table className=\"table is-striped  is-hoverable is-fullwidth is-scrollable mr-2\">\n                        <thead>\n                                <tr>\n                                    <th><abbr title=\"Serial No\">S/No</abbr></th>\n                                    <th><abbr title=\"Date\">Date</abbr></th>\n                                    <th><abbr title=\"Client\">Client</abbr></th>\n                                   {/*  <th><abbr title=\"Client\">Client</abbr></th> */}\n                                    <th><abbr title=\"Description\">Test</abbr></th>\n                                    <th><abbr title=\"Amount\">Amount</abbr></th>\n                                {/*  <th>Fulfilled</th> */}\n                                    <th><abbr title=\"Status\">Payment Status</abbr></th>\n                                    <th><abbr title=\"Status\">Result Status</abbr></th> \n                                </tr>\n                        </thead>\n                        <tbody>\n                            { facilities.map((order, i)=>(\n                                <tr key={order._id}  onClick={()=>handleMedicationRow(order)} className={order._id===(selectedFinance?._id||null)?\"is-selected\":\"\"}>                                         \n                                <th>{i+1}</th>\n                                <td><span>{format(new Date(order.createdAt),'dd-MM-yy')}</span></td>  {/* {formatDistanceToNowStrict(new Date(ProductEntry.createdAt),{addSuffix: true})} <br/> */} \n                                <th>{order.orderInfo.orderObj.clientname}</th>{/* client name */}\n                                <th>{order.serviceInfo.name}</th>{/* test name */} {/*  <td>{order.fulfilled===\"True\"?\"Yes\":\"No\"}</td> */}\n                                <td>{order.serviceInfo.amount}</td>\n                                <td>{order.billing_status}</td>\n                                <td>{order.report_status}</td>\n                                </tr>\n                            ))}\n                        </tbody>\n                    </table>\n                    \n                    </div>  \n                </div>\n            </>          \n    )\n}\n\nexport function LabNoteCreate(){\n    const { register, handleSubmit,setValue} = useForm(); //, watch, errors, reset \n    const [error, setError] =useState(false)\n    const [success, setSuccess] =useState(false)\n    const [message,setMessage] = useState(\"\")\n    // eslint-disable-next-line\n    const [facility,setFacility] = useState()\n    //const ClientServ=client.service('labresults')\n    //const history = useHistory()\n    const {user} = useContext(UserContext) //,setUser\n    // eslint-disable-next-line\n    const [currentUser,setCurrentUser] = useState()\n    const {state, setState}=useContext(ObjectContext)\n    const [reportStatus,setReportStatus] = useState(\"Draft\")\n    const ClientServ=client.service('labresults')\n    const order=state.financeModule.selectedFinance\n    const bill_report_status=state.financeModule.report_status\n\n    const getSearchfacility=(obj)=>{\n        setValue(\"facility\", obj._id,  {\n            shouldValidate: true,\n            shouldDirty: true\n        })\n    }\n    \n    useEffect(() => {\n        setCurrentUser(user)\n        //console.log(currentUser)\n        return () => {\n        \n        }\n    }, [user])\n\n \n\n    const onSubmit = async(data,e) =>{\n        e.preventDefault();\n        setMessage(\"\")\n        setError(false)\n        setSuccess(false)\n        let document={}\n         // data.createdby=user._id\n        //  console.log(data);\n          if (user.currentEmployee){\n          document.facility=user.currentEmployee.facilityDetail._id \n          document.facilityname=user.currentEmployee.facilityDetail.facilityName // or from facility dropdown\n          }\n         document.documentdetail=data\n          document.documentname= `${order.serviceInfo.name} Result`\n         // document.documentClassId=state.DocumentClassModule.selectedDocumentClass._id\n          document.location=state.employeeLocation.locationName +\" \"+ state.employeeLocation.locationType\n          document.locationId=state.employeeLocation.locationId\n          document.client=order.orderInfo.orderObj.clientId\n          document.createdBy=user._id\n          document.createdByname=user.firstname+ \" \"+user.lastname\n          document.status=reportStatus\n          document.billId=order._id\n        //  console.log(document)\n        //  console.log(order)\n\n          if (\n            document.location===undefined ||!document.createdByname || !document.facilityname ){\n            toast({\n                message: ' Documentation data missing, requires location and facility details' ,\n                type: 'is-danger',\n                dismissible: true,\n                pauseOnHover: true,\n              })\n              return\n          }\n\n        if (bill_report_status===\"Pending\"){\n            ClientServ.create(document)\n            .then((res)=>{\n                  \n                    e.target.reset();\n                  \n                    setSuccess(true)\n                    toast({\n                        message: 'Lab Result created succesfully',\n                        type: 'is-success',\n                        dismissible: true,\n                        pauseOnHover: true,\n                      })\n                      setSuccess(false)\n                })\n                .catch((err)=>{\n                    toast({\n                        message: 'Error creating Lab Result ' + err,\n                        type: 'is-danger',\n                        dismissible: true,\n                        pauseOnHover: true,\n                      })\n                })  \n        }\n\n        if (bill_report_status===\"Draft\"){\n         ClientServ.patch(order.resultDetail._id, document)\n        .then((res)=>{\n              \n                e.target.reset();\n              \n                setSuccess(true)\n                toast({\n                    message: 'Lab Result updated succesfully',\n                    type: 'is-success',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  })\n                  setSuccess(false)\n            })\n            .catch((err)=>{\n                toast({\n                    message: 'Error updating Lab Result ' + err,\n                    type: 'is-danger',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  })\n            }) \n        }\n        const    newProductEntryModule={\n            selectedFinance:order,\n            show :'show',\n           // report_status:order.report_status\n           \n        }\n      await setState((prevstate)=>({...prevstate, financeModule:newProductEntryModule}))\n      } \n\n    const handleChangePart=async (e)=>{\n        console.log(e.target.value)\n        await setReportStatus(e.target.value)\n\n    }\n\n    useEffect(() => {\n        if (!order.resultDetail?.documentdetail ){\n            setValue(\"Finding\", \"\",  {\n                shouldValidate: true,\n                shouldDirty: true\n            })\n            setValue(\"Recommendation\",\"\",  {\n                shouldValidate: true,\n                shouldDirty: true\n            })\n           // setReportStatus(order.report_status)\n           \n            return\n\n        }\n        if (order.report_status !==\"Pending\"){\n            console.log(order.resultDetail.documentdetail)\n\n        setValue(\"Finding\", order.resultDetail.documentdetail.Finding,  {\n            shouldValidate: true,\n            shouldDirty: true\n        })\n        setValue(\"Recommendation\", order.resultDetail.documentdetail.Recommendation,  {\n            shouldValidate: true,\n            shouldDirty: true\n        })\n        setReportStatus(order.report_status)\n    }\n        \n        return () => {\n            \n        }\n    }, [order])\n\n    return (\n        <>\n            <div className=\"card \">\n            <div className=\"card-header\">\n                <p className=\"card-header-title\">\n                    Lab Result\n                </p>\n            </div>\n            <div className=\"card-content vscrollable remPad1\">\n\n                <label className=\"label is-size-7\">\n                  Client:  {order.orderInfo.orderObj.clientname}\n                </label>\n                <label className=\"label is-size-7\">\n                 Test:  {order.serviceInfo.name}\n                </label>\n            <form onSubmit={handleSubmit(onSubmit)}>\n            <div className=\"field is-horizontal\">\n                <div className=\"field-body\">\n                    <div className=\"field\">\n                        <p className=\"control has-icons-left has-icons-right\">\n                            <textarea className=\"textarea is-small\" ref={register()}  name=\"Finding\" type=\"text\" placeholder=\"Findings\" disabled={bill_report_status===\"Final\"}/>                 \n                        </p>\n                    </div>\n                    </div>\n                    </div>\n            <div className=\"field is-horizontal\">\n                <div className=\"field-body\">\n                    <div className=\"field\">\n                        <div className=\"control has-icons-left has-icons-right\">\n                        <textarea className=\"textarea is-small\" ref={register()}  name=\"Recommendation\" type=\"text\" placeholder=\"Recommendation\" disabled={bill_report_status===\"Final\"}/>\n                        </div>\n                    </div>\n                    </div>\n                    </div>\n                    <div className=\"field\">\n                    <label className=\" is-small\">\n                             <input  type=\"radio\" name=\"status\" value=\"Draft\"   checked={reportStatus===\"Draft\"||reportStatus===\"Pending\"} onChange={(e)=>{handleChangePart(e)}} disabled={bill_report_status===\"Final\"}/>\n                               <span > Draft</span>\n                              </label> <br/>\n                              <label className=\" is-small\">\n                             <input type=\"radio\" name=\"status\"  value=\"Final\"   checked={reportStatus===\"Final\"} onChange={(e)=>handleChangePart(e)} disabled={bill_report_status===\"Final\"}/>\n                             <span> Final </span>\n                              </label>\n                              </div> \n             <div className=\"field  is-grouped mt-2\" >\n                <p className=\"control\">\n                    <button type=\"submit\" className=\"button is-success is-small\" disabled={bill_report_status===\"Final\"} >\n                    {bill_report_status===\"Pending\"? \"Save\":\"Update\"}\n                    </button>\n                </p>\n               {/*  <p className=\"control\">\n                    <button className=\"button is-warning is-small\" onClick={(e)=>e.target.reset()}>\n                        Cancel\n                    </button>\n                </p> */}\n               \n            </div>\n     \n            </form>\n            </div>\n            </div>\n                 \n        </>\n    )\n   \n}\n\n"]},"metadata":{},"sourceType":"module"}