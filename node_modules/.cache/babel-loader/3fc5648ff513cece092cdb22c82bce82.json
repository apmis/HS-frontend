{"ast":null,"code":"import _toConsumableArray from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import _regeneratorRuntime from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _slicedToArray from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useContext,useEffect,useRef}from'react';import{useRouteMatch,useHistory}from'react-router-dom';//Route, Switch,Link, NavLink,\nimport client from'../../feathers';import{DebounceInput}from'react-debounce-input';import{useForm}from\"react-hook-form\";//import {useHistory} from 'react-router-dom'\nimport{UserContext,ObjectContext}from'../../context';import{toast}from'bulma-toast';import{formatDistanceToNowStrict,format}from'date-fns';import ClientFinInfo from'./ClientFinInfo';import BillServiceCreate from'../Finance/BillServiceCreate';import{AppointmentCreate}from'../Clinic/Appointments';import InfiniteScroll from\"react-infinite-scroll-component\";import ClientBilledPrescription from'../Finance/ClientBill';import ClientGroup from'./ClientGroup';import DatePicker from\"react-datepicker\";import\"react-datepicker/dist/react-datepicker.css\";import{OrgFacilitySearch,SponsorSearch}from'../helpers/FacilitySearch';var random=require('random-string-generator');// eslint-disable-next-line\nvar searchfacility={};export default function Policy(){var _useContext=useContext(ObjectContext),state=_useContext.state;//,setState\n// eslint-disable-next-line\nvar _useState=useState(),_useState2=_slicedToArray(_useState,2),selectedClient=_useState2[0],setSelectedClient=_useState2[1];//const [showState,setShowState]=useState() //create|modify|detail\nreturn/*#__PURE__*/_jsx(\"section\",{className:\"section remPadTop\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"columns \",children:[/*#__PURE__*/_jsx(\"div\",{className:\"column is-6 \",children:/*#__PURE__*/_jsx(PolicyList,{})}),/*#__PURE__*/_jsx(\"div\",{className:\"column is-6 \",children:state.ManagedCareModule.show==='create'&&/*#__PURE__*/_jsx(PolicyCreate,{})})]})});}export function PolicyList(){// const { register, handleSubmit, watch, errors } = useForm();\n// eslint-disable-next-line\nvar _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];// eslint-disable-next-line\nvar _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),success=_useState6[0],setSuccess=_useState6[1];// eslint-disable-next-line\nvar _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),message=_useState8[0],setMessage=_useState8[1];var ClientServ=client.service('policy');//const history = useHistory()\n// const {user,setUser} = useContext(UserContext)\nvar _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),facilities=_useState10[0],setFacilities=_useState10[1];// eslint-disable-next-line\nvar _useState11=useState(),_useState12=_slicedToArray(_useState11,2),selectedClient=_useState12[0],setSelectedClient=_useState12[1];//\n// eslint-disable-next-line\nvar _useContext2=useContext(ObjectContext),state=_useContext2.state,setState=_useContext2.setState;// eslint-disable-next-line\nvar _useContext3=useContext(UserContext),user=_useContext3.user,setUser=_useContext3.setUser;var _useState13=useState(0),_useState14=_slicedToArray(_useState13,2),page=_useState14[0],setPage=_useState14[1];var _useState15=useState(50),_useState16=_slicedToArray(_useState15,2),limit=_useState16[0],setLimit=_useState16[1];var _useState17=useState(0),_useState18=_slicedToArray(_useState17,2),total=_useState18[0],setTotal=_useState18[1];var handleCreateNew=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var newClientModule;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:newClientModule={selectedClient:{},show:'create'};_context.next=3;return setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{ClientModule:newClientModule});});case 3:case\"end\":return _context.stop();}}},_callee);}));return function handleCreateNew(){return _ref.apply(this,arguments);};}();var handleRow=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(Client){var newClientModule;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return setSelectedClient(Client);case 2:newClientModule={selectedClient:Client,show:'detail'};_context2.next=5;return setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{ClientModule:newClientModule});});case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function handleRow(_x){return _ref2.apply(this,arguments);};}();var handleSearch=function handleSearch(val){// eslint-disable-next-line\nvar field='firstname';console.log(val);ClientServ.find({query:{$or:[{firstname:{$regex:val,$options:'i'}},{lastname:{$regex:val,$options:'i'}},{middlename:{$regex:val,$options:'i'}},{phone:{$regex:val,$options:'i'}},{clientTags:{$regex:val,$options:'i'}},{mrn:{$regex:val,$options:'i'}},{email:{$regex:val,$options:'i'}},{specificDetails:{$regex:val,$options:'i'}},{gender:val}],\"relatedfacilities.facility\":user.currentEmployee.facilityDetail._id,// || \"\",\n$limit:limit,$sort:{createdAt:-1}}}).then(function(res){console.log(res);setFacilities(res.data);setMessage(\" Client  fetched successfully\");setSuccess(true);}).catch(function(err){console.log(err);setMessage(\"Error fetching Client, probable network issues \"+err);setError(true);});};var getFacilities=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var findClient,_findClient;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(!user.currentEmployee){_context3.next=12;break;}_context3.next=3;return ClientServ.find({query:{// \"relatedfacilities.facility\":user.currentEmployee.facilityDetail._id,\n// $limit:limit,\n// $skip:page * limit,\n$sort:{createdAt:-1}}});case 3:findClient=_context3.sent;_context3.next=6;return setFacilities(findClient.data);case 6:console.log(findClient.data);/* }else{\n             await setFacilities(prevstate=>prevstate.concat(findClient.data))\n         } */_context3.next=9;return setTotal(findClient.total);case 9://console.log(user.currentEmployee.facilityDetail._id, state)\n//console.log(facilities)\nsetPage(function(page){return page+1;});_context3.next=18;break;case 12:if(!user.stacker){_context3.next=18;break;}_context3.next=15;return ClientServ.find({query:{$limit:20,$sort:{createdAt:-1}}});case 15:_findClient=_context3.sent;_context3.next=18;return setFacilities(_findClient.data);case 18:case\"end\":return _context3.stop();}}},_callee3);}));return function getFacilities(){return _ref3.apply(this,arguments);};}();useEffect(function(){if(user){//getFacilities()\nrest();}else{/* const localUser= localStorage.getItem(\"user\")\n                     const user1=JSON.parse(localUser)\n                     console.log(localUser)\n                     console.log(user1)\n                     fetchUser(user1)\n                     console.log(user)\n                     getFacilities(user) */}ClientServ.on('created',function(obj){return rest();});ClientServ.on('updated',function(obj){return rest();});ClientServ.on('patched',function(obj){return rest();});ClientServ.on('removed',function(obj){return rest();});return function(){};// eslint-disable-next-line\n},[]);var rest=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return setPage(0);case 2:_context4.next=4;return setTotal(0);case 4:_context4.next=6;return setFacilities([]);case 6:_context4.next=8;return getFacilities();case 8:case\"end\":return _context4.stop();}}},_callee4);}));return function rest(){return _ref4.apply(this,arguments);};}();useEffect(function(){//console.log(facilities)\nreturn function(){};},[facilities]);//todo: pagination and vertical scroll bar\nreturn/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"level\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"level-left\",children:/*#__PURE__*/_jsx(\"div\",{className:\"level-item\",children:/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left  \",children:[/*#__PURE__*/_jsx(DebounceInput,{className:\"input is-small \",type:\"text\",placeholder:\"Search Clients\",minLength:3,debounceTimeout:400,onChange:function onChange(e){return handleSearch(e.target.value);}}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-search\"})})]})})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"level-item\",children:[\" \",/*#__PURE__*/_jsx(\"span\",{className:\"is-size-6 has-text-weight-medium\",children:\"List of Clients \"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"level-right\",children:/*#__PURE__*/_jsx(\"div\",{className:\"level-item\",children:/*#__PURE__*/_jsx(\"div\",{className:\"level-item\",children:/*#__PURE__*/_jsx(\"div\",{className:\"button is-success is-small\",onClick:handleCreateNew,children:\"New\"})})})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"table-container pullup  vscrola\",id:\"scrollableDiv\",children:/*#__PURE__*/_jsx(InfiniteScroll,{dataLength:facilities.length,next:getFacilities,hasMore:total>facilities.length,loader:/*#__PURE__*/_jsx(\"h4\",{children:\"Loading...\"}),scrollableTarget:\"scrollableDiv\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table is-striped is-narrow is-hoverable is-fullwidth  \",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Serial No\",children:\"S/No\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Date Created \",children:\"Date Created \"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Sponsorship Type\",children:\"Sponsorship Type \"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Plan\",children:\"Plan  \"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Premium\",children:\"Premium  \"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Paid\",children:\"Paid  \"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Active\",children:\"Active  \"})}),/*#__PURE__*/_jsx(\"th\",{children:\"Principal Last Name\"}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"First Name\",children:\"First Name\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Middle Name\",children:\"Middle Name\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Phone\",children:\"Phone\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Email\",children:\"Email\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Tags\",children:\"Tags\"})})]})}),/*#__PURE__*/_jsx(\"tfoot\",{}),/*#__PURE__*/_jsx(\"tbody\",{children:facilities.map(function(Client,i){return/*#__PURE__*/_jsxs(\"tr\",{onClick:function onClick(){return handleRow(Client);},className:Client._id===((selectedClient===null||selectedClient===void 0?void 0:selectedClient._id)||null)?\"is-selected\":\"\",children:[/*#__PURE__*/_jsx(\"td\",{children:i+1}),/*#__PURE__*/_jsx(\"td\",{children:Client.createdAt&&/*#__PURE__*/_jsxs(_Fragment,{children:[formatDistanceToNowStrict(new Date(Client.createdAt)),\" \",format(new Date(Client.createdAt),'dd-MM-yy HH:mm:ss')]})}),/*#__PURE__*/_jsx(\"td\",{children:Client.sponsorshipType}),/*#__PURE__*/_jsx(\"td\",{children:Client.plan.name}),/*#__PURE__*/_jsx(\"td\",{children:Client.premium}),/*#__PURE__*/_jsx(\"td\",{children:Client.isPaid}),/*#__PURE__*/_jsx(\"td\",{children:Client.active}),/*#__PURE__*/_jsx(\"th\",{children:Client.principal.lastname}),/*#__PURE__*/_jsx(\"td\",{children:Client.principal.firstname}),/*#__PURE__*/_jsx(\"td\",{children:Client.principal.middlename}),/*#__PURE__*/_jsx(\"td\",{children:Client.principal.phone}),/*#__PURE__*/_jsx(\"td\",{children:Client.principal.email}),/*#__PURE__*/_jsx(\"td\",{children:Client.principal.clientTags})]},Client._id);})})]})})})]});}export function PolicyCreate(){var _state$Beneficiary,_state$Beneficiary2,_state$Beneficiary3,_state$Beneficiary5,_state$Beneficiary6,_state$Beneficiary7,_state$Beneficiary8,_state$Beneficiary9,_state$Beneficiary10,_state$Beneficiary11,_state$Beneficiary12,_state$Beneficiary13,_state$Beneficiary14;var _useForm=useForm(),register=_useForm.register,handleSubmit=_useForm.handleSubmit,setValue=_useForm.setValue,getValues=_useForm.getValues,reset=_useForm.reset;var _useContext4=useContext(ObjectContext),state=_useContext4.state,setState=_useContext4.setState;var _useContext5=useContext(UserContext),user=_useContext5.user;var _useState19=useState(false),_useState20=_slicedToArray(_useState19,2),clientModal=_useState20[0],setClientModal=_useState20[1];var _useState21=useState(false),_useState22=_slicedToArray(_useState21,2),dependant=_useState22[0],setDependant=_useState22[1];var _useState23=useState(),_useState24=_slicedToArray(_useState23,2),selectedClient=_useState24[0],setSelectedClient=_useState24[1];//const [productItem,setProductItem] = useState([])\nvar productItem=useRef([]);var _useState25=useState(false),_useState26=_slicedToArray(_useState25,2),showCorp=_useState26[0],setShowCorp=_useState26[1];var _useState27=useState(\"\"),_useState28=_slicedToArray(_useState27,2),message=_useState28[0],setMessage=_useState28[1];var _useState29=useState([]),_useState30=_slicedToArray(_useState29,2),benefittingPlans1=_useState30[0],setBenefittingPlans1=_useState30[1];var _useState31=useState(\"\"),_useState32=_slicedToArray(_useState31,2),price=_useState32[0],setPrice=_useState32[1];var _useState33=useState(),_useState34=_slicedToArray(_useState33,2),chosenPlan=_useState34[0],setChosenPlan=_useState34[1];var _useState35=useState(false),_useState36=_slicedToArray(_useState35,2),success=_useState36[0],setSuccess=_useState36[1];var _useState37=useState(\"\"),_useState38=_slicedToArray(_useState37,2),chosen=_useState38[0],setChosen=_useState38[1];var _useState39=useState(\"\"),_useState40=_slicedToArray(_useState39,2),planHMO=_useState40[0],setPlanHMO=_useState40[1];var _useState41=useState(false),_useState42=_slicedToArray(_useState41,2),error=_useState42[0],setError=_useState42[1];//const [documentNo,setDocumentNo] = useState(\"\")\nvar documentNo=useRef();//const [date,setDate] = useState()\nvar date=useRef();//const [patient, setPatient] =useState(\"\")\nvar patient=useRef();//const [productEntry,setProductEntry]=useState()\nvar productEntry=useRef();//const [type,setType] = useState(\"Bill\")\nvar type=useRef(\"Bill\");var ServicesServ=client.service('billing');var policyServ=client.service('policy');var BillCreateServ=client.service('createbilldirect');var _useState43=useState([]),_useState44=_slicedToArray(_useState43,2),paymentOptions=_useState44[0],setPaymentOptions=_useState44[1];var _useState45=useState(\"\"),_useState46=_slicedToArray(_useState45,2),billMode=_useState46[0],setBillMode=_useState46[1];var _useState47=useState(\"\"),_useState48=_slicedToArray(_useState47,2),obj=_useState48[0],setObj=_useState48[1];var _useState49=useState(\"\"),_useState50=_slicedToArray(_useState49,2),paymentmode=_useState50[0],setPaymentMode=_useState50[1];var getSearchfacility=function getSearchfacility(obj){setChosen(obj);if(!obj){}};var getSearchfacility1=function getSearchfacility1(obj){setPlanHMO(obj);if(!obj){}};var handleChangeMode=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(mode){var billm;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:setMessage(mode);if(mode===\"Company\"){setShowCorp(true);}else{setShowCorp(false);}billm=paymentOptions.filter(function(el){return el.name===mode;});_context5.next=5;return setBillMode(billm[0]);case 5:console.log(billm);case 6:case\"end\":return _context5.stop();}}},_callee5);}));return function handleChangeMode(_x2){return _ref5.apply(this,arguments);};}();var handleChangePlan=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(value){var cplan,contract;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:console.log(value);if(!(value===\"\")){_context6.next=4;break;}setPrice(\"\");return _context6.abrupt(\"return\");case 4:console.log(benefittingPlans1);cplan=benefittingPlans1.filter(function(el){return el.name===value;});console.log(cplan);setChosenPlan(cplan[0]);contract=cplan[0].contracts.filter(function(el){return el.source_org===el.dest_org;});setPrice(contract[0]);case 10:case\"end\":return _context6.stop();}}},_callee6);}));return function handleChangePlan(_x3){return _ref6.apply(this,arguments);};}();var handleClickProd=function handleClickProd(){setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{currBeneficiary:\"principal\"});});setDependant(\"principal\");console.log(state.Beneficiary);setClientModal(true);};var handleClickProd2=function handleClickProd2(){setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{currBeneficiary:\"dependent\"});});setDependant(\"dependent\");setClientModal(true);};var handleRow=function handleRow(Client){//domething o\n};var handlecloseModal4=function handlecloseModal4(){setClientModal(false);console.log(state.Beneficiary);};var onSubmit=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(data,e){var confirm,policy;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:e.preventDefault();/*  if(!chosenPlan||!message){\n                toast({\n                    message: 'Please choose plan and/or sponsor! ' ,\n                    type: 'is-danger',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  })\n    \n                return\n            } */ //state.Beneficiary?.principal._id\nif(state.Beneficiary.principal._id){_context8.next=4;break;}toast({message:'Please add principal! ',type:'is-danger',dismissible:true,pauseOnHover:true});return _context8.abrupt(\"return\");case 4:if(user.currentEmployee){data.facility=user.currentEmployee.facilityDetail._id;// or from facility dropdown\n}confirm=window.confirm(\"You are about to register a new policy CVGBH/2022/098 ?\");if(!confirm){_context8.next=10;break;}policy={policyNo:\"CVGBH/2022/098\",organizationType:user.currentEmployee.facilityDetail.facilityType,organizationId:user.currentEmployee.facilityDetail._id,organizationName:user.currentEmployee.facilityDetail.facilityName,organization:user.currentEmployee.facilityDetail,principal:state.Beneficiary.principal,//\ndependantBeneficiaries:state.Beneficiary.dependent,provider:chosen,//mixed\n// sponsor:                                                                                                                         sponsor:state.Beneficiary.principal,  //mixed\nsponsorshipType:data.sponsortype,plan:chosenPlan,premium:price.price,premiumContract:price,active:false,isPaid:false// paymentmode:{ type: String,  default:\"Cash\"}, //company\n// ??clientId:{ type: String,  },\n// agent\"\":,\"\" // if sales is made on behalf of a state programme\n//  agentName:{ type: String,  },\n// bill:{},\n// billId:\"\",\n// validityPeriods:[ { type: String,  }],\n//  validityEnds:{ type: Schema.Types.Date,},\n//  validitystarts:{ type: Schema.Types.Date,},\n// lastCapitationPaidDate: { type: Schema.Types.Date, required: false },\n// premiumPaymentRef: { type: Schema.Types.Mixed, required: false },\n};_context8.next=10;return policyServ.create(policy).then(function(res){//console.log(JSON.stringify(res))\ne.target.reset();/*  setMessage(\"Created Client successfully\") */setSuccess(true);toast({message:'Client created succesfully',type:'is-success',dismissible:true,pauseOnHover:true});setSuccess(false);}).then(/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(res){var today,invoiceNo;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0://await setType(\"Sales\")\ntype.current=\"Sales\";today=new Date().toLocaleString();//await setDate(today)\ndate.current=today;invoiceNo=random(6,'uppernumeric');// await setDocumentNo(invoiceNo)\ndocumentNo.current=invoiceNo;//await setPatient(state.Beneficiary.principal)\npatient.current=state.Beneficiary.principal;// await createBillmode()\n_context7.next=8;return createProductItem();case 8:_context7.next=10;return createProductEntry();case 10:_context7.next=12;return handleCreateBill();case 12:case\"end\":return _context7.stop();}}},_callee7);}));return function(_x6){return _ref8.apply(this,arguments);};}()).catch(function(err){toast({message:'Error creating Client '+err,type:'is-danger',dismissible:true,pauseOnHover:true});});case 10:case\"end\":return _context8.stop();}}},_callee8);}));return function onSubmit(_x4,_x5){return _ref7.apply(this,arguments);};}();var getBenfittingPlans=/*#__PURE__*/function(){var _ref9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee10(){var findServices;return _regeneratorRuntime.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:setBenefittingPlans1([]);if(!user.currentEmployee){_context10.next=7;break;}_context10.next=4;return ServicesServ.find({query:{facility:user.currentEmployee.facilityDetail._id,'contracts.source_org':user.currentEmployee.facilityDetail._id,'contracts.dest_org':user.currentEmployee.facilityDetail._id,category:\"Managed Care\",$sort:{category:1}}});case 4:findServices=_context10.sent;console.log(findServices);if(findServices.total>0){findServices.groupedOrder[0].services.forEach(/*#__PURE__*/function(){var _ref10=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(c){var newPlan;return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:newPlan={name:c.name};_context9.next=3;return setBenefittingPlans1(function(prev){return prev.concat(c);});case 3:case\"end\":return _context9.stop();}}},_callee9);}));return function(_x7){return _ref10.apply(this,arguments);};}());}case 7:case\"end\":return _context10.stop();}}},_callee10);}));return function getBenfittingPlans(){return _ref9.apply(this,arguments);};}();var createPaymentOption=function createPaymentOption(){var paymentoptions=[];// const info = client.paymentinfo\nvar billme;var obj;//ideally this should be based on whether self or corporate\nvar patient=state.Beneficiary.principal;if(!!patient.paymentinfo){patient.paymentinfo.forEach(function(pay,i){if(pay.active){switch(pay.paymentmode){case'Cash':// code block\nobj=createObj(pay,\"Cash\",\"Cash\",\"Cash\");paymentoptions.push(obj);setPaymentMode(\"Cash\");billme=obj;console.log(\"billme\",billme);break;case'Family':// code block\nobj=createObj(pay,\"Family Cover\",\"familyCover\",\"Family Cover\");paymentoptions.push(obj);setPaymentMode(\"Family Cover\");billme=obj;// console.log(\"billme\",billme)\nbreak;case'Company':// code block\nvar name=\"Company: \"+pay.organizationName+\"(\"+pay.plan+\")\";obj=createObj(pay,name,\"CompanyCover\",\"Company Cover\");paymentoptions.push(obj);setPaymentMode(\"Company: \"+pay.organizationName+\"(\"+pay.plan+\")\");billme=obj;// console.log(\"billme\",billme)\nbreak;case'HMO':// code block\nconsole.log(pay);var sname=\"HMO: \"+pay.organizationName+\"(\"+pay.plan+\")\";obj=createObj(pay,sname,\"HMOCover\",\"HMO Cover\");paymentoptions.push(obj);setPaymentMode(\"HMO: \"+pay.organizationName+\"(\"+pay.plan+\")\");billme=obj;//  console.log(\"billme\",billme)\nbreak;default:// code block\n}}});}setPaymentOptions(paymentoptions);setBillMode(billme);};/* const pay={paymentinfo:\n    {\n      paymentmode:{ type: String,  default:\"Cash\"},\n      organizationId:{ type: Schema.Types.ObjectId },\n      organizationName:{ type: String,  },\n      principalId:{ type: String,  },\n      clientId:{ type: String,  },\n      principalName:{ type: String,  },\n      plan:{ type: String,  },\n      active:{ type: Boolean,default:true},\n      principal:{ type: String},\n      organizationType: { type: String,  },\n      agent:{ type: Schema.Types.ObjectId },\n      agentName:{ type: String,  }\n\n    }\n    }\n   */var createObj=function createObj(pay,name,cover,type){var details={};details=_objectSpread({},pay);details.type=type;return{name:name,value:cover,detail:details,type:type};};//create productitem\nvar createProductItem=/*#__PURE__*/function(){var _ref11=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee11(){return _regeneratorRuntime.wrap(function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:productItem.current=[{//productId:,\nname:chosenPlan.name,quantity:\"1\",sellingprice:price.price,amount:price.price,//||qamount\nbaseunit:\"\",costprice:\"\",category:chosenPlan.category,billingId:chosenPlan._id,billingContract:price,billMode:billMode// state.Beneficiary.principal.paymentinfo[0]\n}];console.log(chosenPlan.name);case 2:case\"end\":return _context11.stop();}}},_callee11);}));return function createProductItem(){return _ref11.apply(this,arguments);};}();var createProductEntry=function createProductEntry(){productEntry.current={productitems:productItem.current,date:date.current,documentNo:documentNo.current,type:type.current,totalamount:price.price,createdby:user._id,transactioncategory:\"debit\",source:patient.current.firstname+\" \"+patient.current.lastname,facility:user.currentEmployee.facilityDetail._id};};//create billfor policy\nvar handleCreateBill=/*#__PURE__*/function(){var _ref12=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee13(){var serviceList,document,confirm;return _regeneratorRuntime.wrap(function _callee13$(_context13){while(1){switch(_context13.prev=_context13.next){case 0://handle selected single order\n//documentation\nconsole.log(productEntry.current,productItem.current);serviceList=[];document={};if(user.currentEmployee){document.facility=user.currentEmployee.facilityDetail._id;document.facilityname=user.currentEmployee.facilityDetail.facilityName;// or from facility dropdown\n}document.documentdetail=productItem.current;console.log(document.documentdetail);document.documentname=\"Billed Orders\";//state.DocumentClassModule.selectedDocumentClass.name\n// document.documentClassId=state.DocumentClassModule.selectedDocumentClass._id\ndocument.location=state.employeeLocation.locationName+\" \"+state.employeeLocation.locationType;document.locationId=state.employeeLocation.locationId;document.client=patient.current._id;document.clientname=patient.current.firstname+\" \"+patient.current.middlename+\" \"+patient.current.lastname;document.clientobj=patient.current;document.createdBy=user._id;document.createdByname=user.firstname+\" \"+user.lastname;document.status=\"completed\";console.log(document);//order\ndocument.documentdetail.forEach(/*#__PURE__*/function(){var _ref13=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee12(element){var orderinfo,billInfo,items;return _regeneratorRuntime.wrap(function _callee12$(_context12){while(1){switch(_context12.prev=_context12.next){case 0:orderinfo={//for reach document\ndocumentationId:\"\",//tbf\norder_category:element.category,//category\norder:element.name+\" Plan\",//name\ninstruction:\"\",destination_name:document.facilityname,//facilityname\ndestination:document.facility,//facility id\norder_status:\"Billed\",payer:\"\",//!!element.billMode.organizationName?element.billMode.organizationName:\"\",\npaymentmode:\"\",//element.billMode.paymentmode?element.billMode.paymentmode:\"\",\nrequestingdoctor_Id:document.createdBy,requestingdoctor_Name:document.createdByname,requestingdoctor_locationid:document.locationId,requestingdoctor_locationName:document.location,requestingdoctor_facilityId:document.facility,requestingdoctor_facilityname:document.facilityname,clientId:document.client,clientname:document.clientname,client:document.clientobj,order_action:[],medication_action:[],treatment_action:[]};billInfo={orderInfo:{orderId:\"\",//tbf\norderObj:orderinfo},serviceInfo:{price:element.sellingprice,quantity:element.quantity,productId:element.productId,name:element.name+\" Plan\",baseunit:element.baseunit,amount:element.amount,billingId:element.billingId,billingContract:element.billingContract,createdby:user._id},paymentInfo:{amountDue:element.amount,paidup:0,balance:element.amount,paymentDetails:[]},participantInfo:{billingFacility:orderinfo.destination,billingFacilityName:orderinfo.destination_name,locationId:document.locationId,//selected location,\nclientId:orderinfo.clientId,client:orderinfo.client,paymentmode:element.billMode},createdBy:user._id,billing_status:\"Unpaid\"};items={orderinfo:orderinfo,billInfo:billInfo};alert(\"aboutto create bill \"+items.orderinfo.name);serviceList.push(items);case 5:case\"end\":return _context12.stop();}}},_callee12);}));return function(_x8){return _ref13.apply(this,arguments);};}());console.log(\"==================\");console.log(document,serviceList);confirm=window.confirm(\"You are about to bill \".concat(document.clientname,\" for \").concat(serviceList.length,\" service(s)?\"));if(!confirm){_context13.next=23;break;}_context13.next=23;return BillCreateServ.create({document:document,serviceList:serviceList}).then(function(res){setSuccess(true);toast({message:'Billed Orders created succesfully',type:'is-success',dismissible:true,pauseOnHover:true});setSuccess(false);productItem.current=[];//setCalcAmount(0);\nvar today=new Date().toLocaleString();//console.log(today)\ndate.current=today;var invoiceNo=random(6,'uppernumeric');documentNo.current=invoiceNo;}).catch(function(err){toast({message:'Error creating Billed Orders '+err,type:'is-danger',dismissible:true,pauseOnHover:true});});case 23:case\"end\":return _context13.stop();}}},_callee13);}));return function handleCreateBill(){return _ref12.apply(this,arguments);};}();useEffect(function(){getBenfittingPlans();createPaymentOption();return function(){};},[]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card \",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsx(\"p\",{className:\"card-header-title\",children:\"Create Beneficiary\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-content vscrollable remPad1\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"field is-horizontal\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"field \",children:/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",children:\"Principal  \"})}),/*#__PURE__*/_jsx(\"div\",{className:\"field ml-2\",children:!((_state$Beneficiary=state.Beneficiary)===null||_state$Beneficiary===void 0?void 0:_state$Beneficiary.principal._id)&&/*#__PURE__*/_jsx(\"p\",{className:\"control\",children:/*#__PURE__*/_jsx(\"button\",{className:\"button is-info is-small btnheight \",children:/*#__PURE__*/_jsx(\"span\",{className:\"is-small\",onClick:handleClickProd,children:\" +\"})})})})]}),!!((_state$Beneficiary2=state.Beneficiary)===null||_state$Beneficiary2===void 0?void 0:_state$Beneficiary2.principal._id)&&/*#__PURE__*/_jsxs(\"table\",{className:\"table is-striped is-narrow is-hoverable is-fullwidth  \",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Serial No\",children:\"S/No\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Last Name\",children:\"Last Name\"})}),/*#__PURE__*/_jsx(\"th\",{children:\"First Name\"}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Middle Name\",children:\"Middle Name\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Age\",children:\"Age\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Gender\",children:\"Gender\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Phone\",children:\"Phone\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Email\",children:\"Email\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Tags\",children:\"Tags\"})})]})}),/*#__PURE__*/_jsx(\"tfoot\",{}),/*#__PURE__*/_jsx(\"tbody\",{children:/*#__PURE__*/_jsxs(\"tr\",{onClick:function onClick(){var _state$Beneficiary4;return handleRow((_state$Beneficiary4=state.Beneficiary)===null||_state$Beneficiary4===void 0?void 0:_state$Beneficiary4.principal);},className:((_state$Beneficiary5=state.Beneficiary)===null||_state$Beneficiary5===void 0?void 0:_state$Beneficiary5.principal._id)===((selectedClient===null||selectedClient===void 0?void 0:selectedClient._id)||null)?\"is-selected\":\"\",children:[/*#__PURE__*/_jsx(\"td\",{children:1}),/*#__PURE__*/_jsx(\"th\",{children:(_state$Beneficiary6=state.Beneficiary)===null||_state$Beneficiary6===void 0?void 0:_state$Beneficiary6.principal.lastname}),/*#__PURE__*/_jsx(\"td\",{children:(_state$Beneficiary7=state.Beneficiary)===null||_state$Beneficiary7===void 0?void 0:_state$Beneficiary7.principal.firstname}),/*#__PURE__*/_jsx(\"td\",{children:(_state$Beneficiary8=state.Beneficiary)===null||_state$Beneficiary8===void 0?void 0:_state$Beneficiary8.principal.middlename}),/*#__PURE__*/_jsx(\"td\",{children:((_state$Beneficiary9=state.Beneficiary)===null||_state$Beneficiary9===void 0?void 0:_state$Beneficiary9.principal.dob)&&/*#__PURE__*/_jsx(_Fragment,{children:formatDistanceToNowStrict(new Date((_state$Beneficiary10=state.Beneficiary)===null||_state$Beneficiary10===void 0?void 0:_state$Beneficiary10.principal.dob))})}),/*#__PURE__*/_jsx(\"td\",{children:(_state$Beneficiary11=state.Beneficiary)===null||_state$Beneficiary11===void 0?void 0:_state$Beneficiary11.principal.gender}),/*#__PURE__*/_jsx(\"td\",{children:(_state$Beneficiary12=state.Beneficiary)===null||_state$Beneficiary12===void 0?void 0:_state$Beneficiary12.principal.phone}),/*#__PURE__*/_jsx(\"td\",{children:(_state$Beneficiary13=state.Beneficiary)===null||_state$Beneficiary13===void 0?void 0:_state$Beneficiary13.principal.email}),/*#__PURE__*/_jsx(\"td\",{children:(_state$Beneficiary14=state.Beneficiary)===null||_state$Beneficiary14===void 0?void 0:_state$Beneficiary14.principal.clientTags})]},(_state$Beneficiary3=state.Beneficiary)===null||_state$Beneficiary3===void 0?void 0:_state$Beneficiary3.principal._id)})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field is-horizontal\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"field \",children:/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",children:\"Dependents  \"})}),/*#__PURE__*/_jsx(\"div\",{className:\"field ml-2\",children:/*#__PURE__*/_jsx(\"p\",{className:\"control\",children:/*#__PURE__*/_jsx(\"button\",{className:\"button is-info is-small btnheight \",children:/*#__PURE__*/_jsx(\"span\",{className:\"is-small\",onClick:handleClickProd2,children:\" +\"})})})})]}),/*#__PURE__*/_jsx(\"div\",{children:state.Beneficiary.dependent.length>0&&/*#__PURE__*/_jsxs(\"table\",{className:\"table is-striped is-narrow is-hoverable is-fullwidth  \",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Serial No\",children:\"S/No\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Last Name\",children:\"Last Name\"})}),/*#__PURE__*/_jsx(\"th\",{children:\"First Name\"}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Middle Name\",children:\"Middle Name\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Age\",children:\"Payment Mode\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Age\",children:\"Age\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Gender\",children:\"Gender\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Phone\",children:\"Phone\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Email\",children:\"Email\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Tags\",children:\"Tags\"})})]})}),/*#__PURE__*/_jsx(\"tfoot\",{}),/*#__PURE__*/_jsx(\"tbody\",{children:state.Beneficiary.dependent.map(function(Client,i){return/*#__PURE__*/_jsxs(\"tr\",{onClick:function onClick(){return handleRow(Client);},className:Client._id===((selectedClient===null||selectedClient===void 0?void 0:selectedClient._id)||null)?\"is-selected\":\"\",children:[/*#__PURE__*/_jsx(\"td\",{children:i+1}),/*#__PURE__*/_jsx(\"th\",{children:Client.lastname}),/*#__PURE__*/_jsx(\"td\",{children:Client.firstname}),/*#__PURE__*/_jsx(\"td\",{children:Client.middlename}),/*#__PURE__*/_jsx(\"td\",{children:Client.paymentinfo.map(function(pay,i){return/*#__PURE__*/_jsxs(_Fragment,{children:[pay.paymentmode,\" \",pay.paymentmode===\"Cash\"?\"\":\":\",\" \",pay.organizationName,/*#__PURE__*/_jsx(\"br\",{})]});})}),/*#__PURE__*/_jsx(\"td\",{children:Client.dob&&/*#__PURE__*/_jsx(_Fragment,{children:formatDistanceToNowStrict(new Date(Client.dob))})}),/*#__PURE__*/_jsx(\"td\",{children:Client.gender}),/*#__PURE__*/_jsx(\"td\",{children:Client.phone}),/*#__PURE__*/_jsx(\"td\",{children:Client.email}),/*#__PURE__*/_jsx(\"td\",{children:Client.clientTags})]},Client._id);})})]})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",name:\"dob\",type:\"text\",children:\"Primary Provider \"}),/*#__PURE__*/_jsxs(\"div\",{className:\"field is-expanded\"/* style={ !user.stacker?{display:\"none\"}:{}} */,children:[/*#__PURE__*/_jsx(OrgFacilitySearch,{getSearchfacility:getSearchfacility,clear:success}),/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left \",style:{display:\"none\"},children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\"/* ref={register ({ required: true }) }  */ /* add array no */ /* value={facilityId} name=\"facilityId\" type=\"text\" onChange={e=>setFacilityId(e.target.value)} placeholder=\"Product Id\" */}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas  fa-map-marker-alt\"})})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field-body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",name:\"dob\",type:\"text\",children:\"Sponsor \"}),/*#__PURE__*/_jsx(\"div\",{className:\"control\",children:/*#__PURE__*/_jsx(\"div\",{className:\"select is-small \",children:/*#__PURE__*/_jsxs(\"select\",{name:\"sponsortype\",ref:register({required:true}),onChange:function onChange(e){return handleChangeMode(e.target.value);},className:\"selectadd\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\" Choose Sponsor \"}),/*#__PURE__*/_jsx(\"option\",{value:\"Self\",children:\"Self\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Company\",children:\"Company\"})]})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",style:!showCorp?{display:\"none\"}:{},children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",name:\"dob\",type:\"text\",children:\"Corporate Sponsor \"}),/*#__PURE__*/_jsxs(\"div\",{className:\"field is-expanded\"/* style={ !user.stacker?{display:\"none\"}:{}} */,children:[/*#__PURE__*/_jsx(SponsorSearch,{getSearchfacility:getSearchfacility1,clear:success}),/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left \",style:{display:\"none\"},children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\"/* ref={register ({ required: true }) }  */ /* add array no */ /* value={facilityId} name=\"facilityId\" type=\"text\" onChange={e=>setFacilityId(e.target.value)} placeholder=\"Product Id\" */}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas  fa-map-marker-alt\"})})]})]})]})]})}),/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",name:\"dob\",type:\"text\",children:\"Plan \"}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsx(\"div\",{className:\"control\",children:/*#__PURE__*/_jsx(\"div\",{className:\"select is-small \",children:/*#__PURE__*/_jsxs(\"select\",{name:\"plan\",ref:register({required:true}),onChange:function onChange(e,i){return handleChangePlan(e.target.value);},className:\"selectadd\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\" Choose Plan \"}),benefittingPlans1.map(function(option,i){return/*#__PURE__*/_jsxs(\"option\",{value:option.name,children:[\" \",option.name]},i);})]})})})}),/*#__PURE__*/_jsxs(\"label\",{className:\"label is-size-7 my-0\",name:\"dob\",type:\"text\",children:[\"Premium:\",price.price]}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"is-size-7 my-0\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-envelope\"})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"field  is-grouped mt-2\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"control\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"button is-success is-small\",children:\"Save\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"control\",children:/*#__PURE__*/_jsx(\"button\",{type:\"reset\",className:\"button is-warning is-small\"/* onClick={(e)=>e.target.reset()} */,children:\"Reset\"})})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal \".concat(clientModal?\"is-active\":\"\"),children:[/*#__PURE__*/_jsx(\"div\",{className:\"modal-background\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-card modalbkgrnd z10\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"modal-card-head selectadd\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"modal-card-title redu\",children:\"Create Client\"}),/*#__PURE__*/_jsx(\"button\",{className:\"delete\",\"aria-label\":\"close\",onClick:handlecloseModal4})]}),/*#__PURE__*/_jsx(\"section\",{className:\"modal-card-body\",children:/*#__PURE__*/_jsx(ClientCreate,{closeModal:handlecloseModal4})})]})]})]});}export function ClientCreate(_ref14){var closeModal=_ref14.closeModal;var _useForm2=useForm(),register=_useForm2.register,handleSubmit=_useForm2.handleSubmit,setValue=_useForm2.setValue,getValues=_useForm2.getValues,reset=_useForm2.reset;//, watch, errors, reset \n// eslint-disable-next-line\nvar _useState51=useState(false),_useState52=_slicedToArray(_useState51,2),error=_useState52[0],setError=_useState52[1];// eslint-disable-next-line\nvar _useState53=useState(false),_useState54=_slicedToArray(_useState53,2),success=_useState54[0],setSuccess=_useState54[1];// eslint-disable-next-line\nvar _useState55=useState(\"\"),_useState56=_slicedToArray(_useState55,2),message=_useState56[0],setMessage=_useState56[1];// eslint-disable-next-line\nvar _useState57=useState(),_useState58=_slicedToArray(_useState57,2),facility=_useState58[0],setFacility=_useState58[1];var ClientServ=client.service('client');var mpiServ=client.service('mpi');//const history = useHistory()\nvar _useContext6=useContext(UserContext),user=_useContext6.user;//,setUser\nvar _useState59=useState(false),_useState60=_slicedToArray(_useState59,2),billModal=_useState60[0],setBillModal=_useState60[1];var _useState61=useState([]),_useState62=_slicedToArray(_useState61,2),patList=_useState62[0],setPatList=_useState62[1];var _useState63=useState(false),_useState64=_slicedToArray(_useState63,2),dependant=_useState64[0],setDependant=_useState64[1];// eslint-disable-next-line\nvar _useState65=useState(),_useState66=_slicedToArray(_useState65,2),currentUser=_useState66[0],setCurrentUser=_useState66[1];var _useState67=useState(),_useState68=_slicedToArray(_useState67,2),date=_useState68[0],setDate=_useState68[1];var _useContext7=useContext(ObjectContext),state=_useContext7.state,setState=_useContext7.setState;// eslint-disable-next-line\nvar getSearchfacility=function getSearchfacility(obj){setValue(\"facility\",obj._id,{shouldValidate:true,shouldDirty:true});};var handleDate=/*#__PURE__*/function(){var _ref15=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee14(date){return _regeneratorRuntime.wrap(function _callee14$(_context14){while(1){switch(_context14.prev=_context14.next){case 0:setDate(date);case 1:case\"end\":return _context14.stop();}}},_callee14);}));return function handleDate(_x9){return _ref15.apply(this,arguments);};}();useEffect(function(){setCurrentUser(user);//console.log(currentUser)\nreturn function(){};},[user]);//check user for facility or get list of facility  \nuseEffect(function(){//setFacility(user.activeClient.FacilityId)//\nif(!user.stacker){/*    console.log(currentUser)\n        setValue(\"facility\", user.currentEmployee.facilityDetail._id,  {\n            shouldValidate: true,\n            shouldDirty: true\n        })  */}});var checkClient=function checkClient(){var data=getValues();data.dob=date;var obj={firstname:data.firstname,middlename:data.middlename,lastname:data.lastname,gender:data.gender,email:data.email,phone:data.phone,dob:data.dob};/* find if there is a match with the paramters entered\n          run search if \n            1.phone no alone or  \n            2.email alone or \n            3.both is entered\n            4. all other 5 parameters\n\n        */var query={};if(!!data.phone){query.phone=data.phone;checkQuery(query);}if(!!data.email){query.email=data.email;checkQuery(query);}if(!!data.firstname&&!!data.lastname&&!!data.gender&&!!data.dob){// console.log(\"simpa\")\ndata.middlename=data.middlename||\"\";query.gender=data.gender;query.dob=data.dob;query.$or=[{firstname:data.firstname,lastname:data.lastname,middlename:data.middlename},{firstname:data.firstname,lastname:data.middlename,middlename:data.lastname},{firstname:data.middlename,lastname:data.lastname,middlename:data.firstname},{firstname:data.middlename,lastname:data.firstname,middlename:data.lastname},{firstname:data.lastname,lastname:data.firstname,middlename:data.middlename},{firstname:data.lastname,lastname:data.middlename,middlename:data.firstname}];checkQuery(query);}};var checkQuery=function checkQuery(query){setPatList([]);if(!(query&&Object.keys(query).length===0&&query.constructor===Object)){ClientServ.find({query:query}).then(function(res){console.log(res);if(res.total>0){// alert(res.total)\nsetPatList(res.data);setBillModal(true);return;}}).catch(function(err){console.log(err);});}};var handleBill=function handleBill(){setBillModal(true);};var handlecloseModal3=function handlecloseModal3(){setBillModal(false);};var choosen=/*#__PURE__*/function(){var _ref16=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee15(client){return _regeneratorRuntime.wrap(function _callee15$(_context15){while(1){switch(_context15.prev=_context15.next){case 0:case\"end\":return _context15.stop();}}},_callee15);}));return function choosen(_x10){return _ref16.apply(this,arguments);};}();var dupl=function dupl(client){toast({message:'Client previously registered in this facility',type:'is-danger',dismissible:true,pauseOnHover:true});reset();setPatList([]);};var reg=/*#__PURE__*/function(){var _ref17=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee16(client){var newPat;return _regeneratorRuntime.wrap(function _callee16$(_context16){while(1){switch(_context16.prev=_context16.next){case 0:if(!(client.relatedfacilities.findIndex(function(el){return el.facility===user.currentEmployee.facilityDetail._id;})===-1)){_context16.next=4;break;}//create mpi record\nnewPat={client:client._id,facility:user.currentEmployee.facilityDetail._id,mrn:client.mrn,clientTags:client.clientTags,relfacilities:client.relatedfacilities};//console.log(newPat)\n_context16.next=4;return mpiServ.create(newPat).then(function(resp){toast({message:'Client created succesfully',type:'is-success',dismissible:true,pauseOnHover:true});}).catch(function(err){toast({message:'Error creating Client '+err,type:'is-danger',dismissible:true,pauseOnHover:true});});case 4://reset form\nreset();setPatList([]);//cash payment\ncase 6:case\"end\":return _context16.stop();}}},_callee16);}));return function reg(_x11){return _ref17.apply(this,arguments);};}();var depen=function depen(client){setDependant(true);};var onSubmit=/*#__PURE__*/function(){var _ref18=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee17(data,e){var confirm;return _regeneratorRuntime.wrap(function _callee17$(_context17){while(1){switch(_context17.prev=_context17.next){case 0:if(date){_context17.next=3;break;}toast({message:'Please enter Date of Birth! ',type:'is-danger',dismissible:true,pauseOnHover:true});return _context17.abrupt(\"return\");case 3:e.preventDefault();setMessage(\"\");setError(false);setSuccess(false);checkClient();if(!(patList.length>0)){_context17.next=12;break;}if(dependant){_context17.next=11;break;}return _context17.abrupt(\"return\");case 11://alert(\"something\"+\",\"+ patList.length)\n//let confirm = window.confirm(\"Is this person a dependant with parent phone number?\")\n// setOption(confirm)\nsetPatList([]);case 12:// data.createdby=user._id\n//  console.log(data);\nif(user.currentEmployee){data.facility=user.currentEmployee.facilityDetail._id;// or from facility dropdown\n}confirm=window.confirm(\"You are about to register a new client \".concat(data.firstname,\"  \").concat(data.middlename,\" \").concat(data.lastname,\" ?\"));if(!confirm){_context17.next=18;break;}data.dob=date;_context17.next=18;return ClientServ.create(data).then(function(res){console.log(res);//console.log(JSON.stringify(res))\ne.target.reset();/*  setMessage(\"Created Client successfully\") */setSuccess(true);toast({message:'Client created succesfully',type:'is-success',dismissible:true,pauseOnHover:true});setSuccess(false);setPatList([]);setDependant(false);setDate();var newClientModule={};//add to context\n// if principal\nif(state.currBeneficiary===\"principal\"){newClientModule={principal:res,dependent:state.Beneficiary.dependent,others:state.Beneficiary.others,show:'create'};}if(state.currBeneficiary===\"dependent\"){newClientModule={principal:state.Beneficiary.principal,dependent:[].concat(_toConsumableArray(state.Beneficiary.dependent),[res]),others:state.Beneficiary.others,show:'create'};}// if dependent\n/*   const newClientModule={\n                    principal:principal,\n                    dependent:dependents,\n                    others:{},\n                    show:'create'\n                    }          */setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{Beneficiary:newClientModule});});closeModal();}).catch(function(err){toast({message:'Error creating Client '+err,type:'is-danger',dismissible:true,pauseOnHover:true});setPatList([]);setDependant(false);});case 18:case\"end\":return _context17.stop();}}},_callee17);}));return function onSubmit(_x12,_x13){return _ref18.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card \",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsx(\"p\",{className:\"card-header-title\",children:\"Create Client\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-content vscrollable remPad1\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsx(\"p\",{className:\" is-small\",children:\"Names\"}),/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field-body\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left has-icons-right\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small is-danger\",ref:register({required:true}),name:\"firstname\",type:\"text\",placeholder:\"First Name\",onBlur:checkClient}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-hospital\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left has-icons-right\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register(),name:\"middlename\",type:\"text\",placeholder:\"Middle Name\",onBlur:checkClient}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-map-signs\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small is-danger\",ref:register({required:true}),name:\"lastname\",type:\"text\",placeholder:\"Last Name\",onBlur:checkClient}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\" fas fa-user-md \"})})]})})]})}),/*#__PURE__*/_jsx(\"p\",{className:\" is-small\",children:\"Biodata\"}),/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field-body\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsx(\"p\",{className:\"control has-icons-left is-danger\",children:/*#__PURE__*/_jsx(DatePicker,{className:\"is-danger red-border is-small\",selected:date,onChange:function onChange(date){return handleDate(date);},dateFormat:\"dd/MM/yyyy\",placeholderText:\"Enter date with dd/MM/yyyy format \"//isClearable\n/* className=\"\" */})})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register(),name:\"gender\",type:\"text\",placeholder:\"Gender\",onBlur:checkClient}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-envelope\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register(),name:\"maritalstatus\",type:\"text\",placeholder:\"Marital Status\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-envelope\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register(),name:\"mrn\",type:\"text\",placeholder:\"Medical Records Number\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-envelope\"})})]})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field-body\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register(),name:\"religion\",type:\"text\",placeholder:\"Religion\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-envelope\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register(),name:\"profession\",type:\"text\",placeholder:\"Profession\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-envelope\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small is-danger\",ref:register({required:true}),name:\"phone\",type:\"text\",placeholder:\" Phone No\",onBlur:checkClient}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-phone-alt\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small \",ref:register(),name:\"email\",type:\"email\",placeholder:\"Email\",onBlur:checkClient}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-envelope\"})})]})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register(),name:\"clientTags\",type:\"text\",placeholder:\"Tags\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-envelope\"})})]})}),/*#__PURE__*/_jsx(\"p\",{className:\" is-small\",children:\"Address\"}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register(),name:\"address\",type:\"text\",placeholder:\"Residential Address\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-envelope\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field-body\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register(),name:\"city\",type:\"text\",placeholder:\"Town/City\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-envelope\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register(),name:\"lga\",type:\"text\",placeholder:\"Local Govt Area\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-envelope\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register(),name:\"state\",type:\"text\",placeholder:\"State\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-envelope\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register(),name:\"country\",type:\"text\",placeholder:\"Country\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-envelope\"})})]})})]})}),/*#__PURE__*/_jsx(\"p\",{className:\" is-small\",children:\"Medical Data\"}),/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field-body\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register(),name:\"bloodgroup\",type:\"text\",placeholder:\"Blood Group\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-envelope\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register(),name:\"genotype\",type:\"text\",placeholder:\"Genotype\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-envelope\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register(),name:\"disabilities\",type:\"text\",placeholder:\"Disabilities\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-envelope\"})})]})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field-body\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register(),name:\"allergies\",type:\"text\",placeholder:\"Allergies\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-envelope\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register(),name:\"comorbidities\",type:\"text\",placeholder:\"Co-mobidities\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-envelope\"})})]})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register(),name:\"specificDetails\",type:\"text\",placeholder:\"Specific Details about patient\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-envelope\"})})]})}),/*#__PURE__*/_jsx(\"p\",{className:\" is-small\",children:\"Next of Kin Information\"}),/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field-body\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register(),name:\"nok_name\",type:\"text\",placeholder:\"Next of Kin Full Name\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-clinic-medical\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register(),name:\"nok_phoneno\",type:\"text\",placeholder:\"Next of Kin Phone Number\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-clinic-medical\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register(),name:\"nok_email\",type:\"email\",placeholder:\"Next of Kin Email\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-envelope\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register(),name:\"nok_relationship\",type:\"text\",placeholder:\"Next of Kin Relationship\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-envelope\"})})]})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"field  is-grouped mt-2\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"control\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"button is-success is-small\",children:\"Save\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"control\",children:/*#__PURE__*/_jsx(\"button\",{type:\"reset\",className:\"button is-warning is-small\"/* onClick={(e)=>e.target.reset()} */,children:\"Reset\"})})]})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal \".concat(billModal?\"is-active\":\"\"),children:[/*#__PURE__*/_jsx(\"div\",{className:\"modal-background\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-card modalbkgrnd z10\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"modal-card-head selectadd\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"modal-card-title redu\",children:\"Similar Client Already Exist?\"}),/*#__PURE__*/_jsx(\"button\",{className:\"delete\",\"aria-label\":\"close\",onClick:handlecloseModal3})]}),/*#__PURE__*/_jsx(\"section\",{className:\"modal-card-body\",children:/*#__PURE__*/_jsx(ClientGroup,{list:patList,closeModal:handlecloseModal3,choosen:choosen,dupl:dupl,reg:reg,depen:depen})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal \".concat(billModal?\"is-active\":\"\"),children:[/*#__PURE__*/_jsx(\"div\",{className:\"modal-background\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-card modalbkgrnd z10\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"modal-card-head selectadd\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"modal-card-title redu\",children:\"Similar Client Already Exist?\"}),/*#__PURE__*/_jsx(\"button\",{className:\"delete\",\"aria-label\":\"close\",onClick:handlecloseModal3})]}),/*#__PURE__*/_jsx(\"section\",{className:\"modal-card-body\",children:/*#__PURE__*/_jsx(ClientGroup,{list:patList,closeModal:handlecloseModal3,choosen:choosen,dupl:dupl,reg:reg,depen:depen})})]})]})]});}","map":{"version":3,"sources":["/home/mfybaby/Documents/HealthStack2/HS-frontend/src/components/ManagedCare/Policy.js"],"names":["React","useState","useContext","useEffect","useRef","useRouteMatch","useHistory","client","DebounceInput","useForm","UserContext","ObjectContext","toast","formatDistanceToNowStrict","format","ClientFinInfo","BillServiceCreate","AppointmentCreate","InfiniteScroll","ClientBilledPrescription","ClientGroup","DatePicker","OrgFacilitySearch","SponsorSearch","random","require","searchfacility","Policy","state","selectedClient","setSelectedClient","ManagedCareModule","show","PolicyList","error","setError","success","setSuccess","message","setMessage","ClientServ","service","facilities","setFacilities","setState","user","setUser","page","setPage","limit","setLimit","total","setTotal","handleCreateNew","newClientModule","prevstate","ClientModule","handleRow","Client","handleSearch","val","field","console","log","find","query","$or","firstname","$regex","$options","lastname","middlename","phone","clientTags","mrn","email","specificDetails","gender","currentEmployee","facilityDetail","_id","$limit","$sort","createdAt","then","res","data","catch","err","getFacilities","findClient","stacker","rest","on","obj","e","target","value","length","map","i","Date","sponsorshipType","plan","name","premium","isPaid","active","principal","PolicyCreate","register","handleSubmit","setValue","getValues","reset","clientModal","setClientModal","dependant","setDependant","productItem","showCorp","setShowCorp","benefittingPlans1","setBenefittingPlans1","price","setPrice","chosenPlan","setChosenPlan","chosen","setChosen","planHMO","setPlanHMO","documentNo","date","patient","productEntry","type","ServicesServ","policyServ","BillCreateServ","paymentOptions","setPaymentOptions","billMode","setBillMode","setObj","paymentmode","setPaymentMode","getSearchfacility","getSearchfacility1","handleChangeMode","mode","billm","filter","el","handleChangePlan","cplan","contract","contracts","source_org","dest_org","handleClickProd","currBeneficiary","Beneficiary","handleClickProd2","handlecloseModal4","onSubmit","preventDefault","dismissible","pauseOnHover","facility","confirm","window","policy","policyNo","organizationType","facilityType","organizationId","organizationName","facilityName","organization","dependantBeneficiaries","dependent","provider","sponsortype","premiumContract","create","current","today","toLocaleString","invoiceNo","createProductItem","createProductEntry","handleCreateBill","getBenfittingPlans","category","findServices","groupedOrder","services","forEach","c","newPlan","prev","concat","createPaymentOption","paymentoptions","billme","paymentinfo","pay","createObj","push","sname","cover","details","detail","quantity","sellingprice","amount","baseunit","costprice","billingId","billingContract","productitems","totalamount","createdby","transactioncategory","source","serviceList","document","facilityname","documentdetail","documentname","location","employeeLocation","locationName","locationType","locationId","clientname","clientobj","createdBy","createdByname","status","element","orderinfo","documentationId","order_category","order","instruction","destination_name","destination","order_status","payer","requestingdoctor_Id","requestingdoctor_Name","requestingdoctor_locationid","requestingdoctor_locationName","requestingdoctor_facilityId","requestingdoctor_facilityname","clientId","order_action","medication_action","treatment_action","billInfo","orderInfo","orderId","orderObj","serviceInfo","productId","paymentInfo","amountDue","paidup","balance","paymentDetails","participantInfo","billingFacility","billingFacilityName","billing_status","items","alert","dob","display","required","option","ClientCreate","closeModal","setFacility","mpiServ","billModal","setBillModal","patList","setPatList","currentUser","setCurrentUser","setDate","shouldValidate","shouldDirty","handleDate","checkClient","checkQuery","Object","keys","constructor","handleBill","handlecloseModal3","choosen","dupl","reg","relatedfacilities","findIndex","newPat","relfacilities","resp","depen","others"],"mappings":"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","sourcesContent":["import React, {useState,useContext, useEffect,useRef} from 'react'\nimport {  useRouteMatch,  useHistory} from 'react-router-dom' //Route, Switch,Link, NavLink,\nimport client from '../../feathers'\nimport {DebounceInput} from 'react-debounce-input';\nimport { useForm } from \"react-hook-form\";\n//import {useHistory} from 'react-router-dom'\nimport {UserContext,ObjectContext} from '../../context'\nimport {toast} from 'bulma-toast'\nimport { formatDistanceToNowStrict, format } from 'date-fns'\nimport ClientFinInfo from './ClientFinInfo';\nimport BillServiceCreate from '../Finance/BillServiceCreate'\nimport {AppointmentCreate} from '../Clinic/Appointments'\nimport InfiniteScroll from \"react-infinite-scroll-component\";\nimport ClientBilledPrescription from '../Finance/ClientBill'\nimport ClientGroup from './ClientGroup';\nimport DatePicker from \"react-datepicker\";\n\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport {OrgFacilitySearch, SponsorSearch} from '../helpers/FacilitySearch'\nvar random = require('random-string-generator');\n// eslint-disable-next-line\nconst searchfacility={};\n\n\nexport default function Policy() {\n    const {state}=useContext(ObjectContext) //,setState\n    // eslint-disable-next-line\n    const [selectedClient,setSelectedClient]=useState()\n    //const [showState,setShowState]=useState() //create|modify|detail\n    \n    return(\n        <section className= \"section remPadTop\">\n            <div className=\"columns \">\n            <div className=\"column is-6 \">\n                <PolicyList />\n                </div>\n            <div className=\"column is-6 \">\n            {/*   {(state.ManagedCareModule.show ==='List')&&<PolicyList />} */}\n                {(state.ManagedCareModule.show ==='create')&&<PolicyCreate />} \n               {/*  {(state.ClientModule.show ==='detail')&&<ClientDetail  />}\n                {(state.ClientModule.show ==='modify')&&<ClientModify Client={selectedClient} />}  */}\n            </div>\n            </div>                            \n            </section>\n       \n    )\n    \n}\n\n\n\nexport function PolicyList(){\n    // const { register, handleSubmit, watch, errors } = useForm();\n     // eslint-disable-next-line\n     const [error, setError] =useState(false)\n      // eslint-disable-next-line\n     const [success, setSuccess] =useState(false)\n      // eslint-disable-next-line\n    const [message, setMessage] = useState(\"\") \n     const ClientServ=client.service('policy')\n     //const history = useHistory()\n    // const {user,setUser} = useContext(UserContext)\n     const [facilities,setFacilities]=useState([])\n      // eslint-disable-next-line\n    const [selectedClient, setSelectedClient]=useState() //\n     // eslint-disable-next-line\n     const {state,setState}=useContext(ObjectContext)\n     // eslint-disable-next-line\n     const {user,setUser}=useContext(UserContext)\n     const [page, setPage] = useState(0) \n     const [limit, setLimit] = useState(50) \n     const [total, setTotal] = useState(0) \n \n \n \n     const handleCreateNew = async()=>{\n         const newClientModule={\n             selectedClient:{},\n             show :'create'\n             }\n         await setState((prevstate)=>({...prevstate, ClientModule:newClientModule}))\n        //console.log(state)\n         } \n \n     \n     const handleRow= async(Client)=>{\n         await setSelectedClient(Client)\n         const    newClientModule={\n             selectedClient:Client,\n             show :'detail'\n         }\n        await setState((prevstate)=>({...prevstate, ClientModule:newClientModule}))\n     }\n \n    const handleSearch=(val)=>{\n          // eslint-disable-next-line\n        const field='firstname'\n        console.log(val)\n        ClientServ.find({query: {\n                 $or:[\n                     { firstname: {\n                         $regex:val,\n                         $options:'i' \n                     }},\n                     { lastname: {\n                         $regex:val,\n                         $options:'i' \n                     }},\n                     { middlename: {\n                         $regex:val,\n                         $options:'i' \n                     }},\n                     { phone: {\n                         $regex:val,\n                         $options:'i' \n                     }},\n                     { clientTags: {\n                         $regex:val,\n                         $options:'i' \n                     }},\n                     { mrn: {\n                         $regex:val,\n                         $options:'i' \n                     }},\n                     { email: {\n                         $regex:val,\n                         $options:'i' \n                     }},\n                     { specificDetails: {\n                         $regex:val,\n                         $options:'i' \n                     }},\n                     { gender: val},\n                 ],\n \n                 \"relatedfacilities.facility\":user.currentEmployee.facilityDetail._id, // || \"\",\n                 $limit:limit,\n                 $sort: {\n                     createdAt: -1\n                   }\n                     }}).then((res)=>{\n                 console.log(res)\n                setFacilities(res.data)\n                 setMessage(\" Client  fetched successfully\")\n                 setSuccess(true) \n             })\n             .catch((err)=>{\n                 console.log(err)\n                 setMessage(\"Error fetching Client, probable network issues \"+ err )\n                 setError(true)\n             })\n         }\n    \n     const getFacilities= async()=>{\n         \n             if (user.currentEmployee){ \n                // const findClient= await ClientServ.find()     \n             const findClient= await ClientServ.find(\n                 {query: {\n                    // \"relatedfacilities.facility\":user.currentEmployee.facilityDetail._id,\n                    // $limit:limit,\n                    // $skip:page * limit,\n                     $sort: {\n                         createdAt: -1\n                     }\n                     }})\n        /*  if (page===0){ */\n             await setFacilities(findClient.data)\n             console.log(findClient.data)\n         /* }else{\n             await setFacilities(prevstate=>prevstate.concat(findClient.data))\n         } */\n \n         \n          await setTotal(findClient.total)\n          //console.log(user.currentEmployee.facilityDetail._id, state)\n          //console.log(facilities)\n          setPage(page=>page+1)\n                 }\n                 else {\n                     if (user.stacker){\n                         const findClient= await ClientServ.find(\n                             {query: {\n                                 \n                                 $limit:20,\n                                 $sort: {\n                                     createdAt: -1\n                                 }\n                                 }})\n             \n                     await setFacilities(findClient.data)\n \n                     }\n                 }\n             }\n             \n \n     useEffect(() => {\n                \n                 if (user){\n                     //getFacilities()\n                     rest()\n                 }else{\n                     /* const localUser= localStorage.getItem(\"user\")\n                     const user1=JSON.parse(localUser)\n                     console.log(localUser)\n                     console.log(user1)\n                     fetchUser(user1)\n                     console.log(user)\n                     getFacilities(user) */\n                 }\n                 ClientServ.on('created', (obj)=>rest ())\n                 ClientServ.on('updated', (obj)=>rest ())\n                 ClientServ.on('patched', (obj)=>rest ())\n                 ClientServ.on('removed', (obj)=>rest ())\n                 return () => {\n                 \n                 }\n         // eslint-disable-next-line\n             },[])\n         const rest = async ()=>{\n                 // console.log(\"starting rest\")\n                // await setRestful(true)\n                    await  setPage(0) \n                    //await  setLimit(2) \n                    await    setTotal(0) \n                    await  setFacilities([])\n                   await getFacilities()\n                   //await  setPage(0) \n                 //  await setRestful(false)\n              }\n \n              useEffect(() => {\n                 //console.log(facilities)\n                  return () => {\n                     \n                  }\n              }, [facilities])\n     //todo: pagination and vertical scroll bar\n \n     return(\n         <>\n            \n                 <div className=\"level\">\n                     <div className=\"level-left\">\n                         <div className=\"level-item\">\n                             <div className=\"field\">\n                                 <p className=\"control has-icons-left  \">\n                                     <DebounceInput className=\"input is-small \" \n                                         type=\"text\" placeholder=\"Search Clients\"\n                                         minLength={3}\n                                         debounceTimeout={400}\n                                         onChange={(e)=>handleSearch(e.target.value)} />\n                                     <span className=\"icon is-small is-left\">\n                                         <i className=\"fas fa-search\"></i>\n                                     </span>\n                                 </p>\n                             </div>\n                         </div>\n                     </div>\n                     <div className=\"level-item\"> <span className=\"is-size-6 has-text-weight-medium\">List of Clients </span></div>\n                     <div className=\"level-right\">\n                         <div className=\"level-item\"> \n                             <div className=\"level-item\"><div className=\"button is-success is-small\" onClick={handleCreateNew}>New</div></div>\n                         </div>\n                     </div>\n \n                 </div>\n                 <div className=\"table-container pullup  vscrola\"  id=\"scrollableDiv\">\n                 <InfiniteScroll\n                         dataLength={facilities.length}\n                         next={getFacilities}\n                         hasMore={total>facilities.length}\n                         loader={<h4>Loading...</h4>}\n                         scrollableTarget=\"scrollableDiv\"\n                     >\n                                 <table className=\"table is-striped is-narrow is-hoverable is-fullwidth  \">\n                                     <thead>\n                                         <tr>\n                                         <th><abbr title=\"Serial No\">S/No</abbr></th>\n                                         <th><abbr title=\"Date Created \">Date Created </abbr></th>\n                                         <th><abbr title=\"Sponsorship Type\">Sponsorship Type </abbr></th>\n                                         <th><abbr title=\"Plan\">Plan  </abbr></th>\n                                         <th><abbr title=\"Premium\">Premium  </abbr></th>\n                                         <th><abbr title=\"Paid\">Paid  </abbr></th>\n                                         <th><abbr title=\"Active\">Active  </abbr></th>\n                                         <th>Principal Last Name</th>\n                                         <th><abbr title=\"First Name\">First Name</abbr></th>\n                                         <th><abbr title=\"Middle Name\">Middle Name</abbr></th>\n                                         {/* <th><abbr title=\"Age\">Payment Mode</abbr></th> */}\n                                       \n                                         <th><abbr title=\"Phone\">Phone</abbr></th>\n                                         <th><abbr title=\"Email\">Email</abbr></th>\n                                         <th><abbr title=\"Tags\">Tags</abbr></th>\n                                         {/* <th><abbr title=\"Actions\">Actions</abbr></th> */}\n                                         </tr>\n                                     </thead>\n                                     <tfoot>\n                                         \n                                     </tfoot>\n                                     <tbody>\n                                         {facilities.map((Client, i)=>(\n \n                                             <tr key={Client._id} onClick={()=>handleRow(Client)}  className={Client._id===(selectedClient?._id||null)?\"is-selected\":\"\"}>\n                                             <td>{i+1}</td>\n                                             <td>{Client.createdAt && <>{formatDistanceToNowStrict(new Date(Client.createdAt))} {format(new Date(Client.createdAt),'dd-MM-yy HH:mm:ss')}</>}</td>\n                                             <td>{Client.sponsorshipType}</td>\n                                             <td>{Client.plan.name}</td>\n                                             <td>{Client.premium}</td>\n                                             <td>{Client.isPaid}</td>\n                                             <td>{Client.active}</td>\n                                             <th>{Client.principal.lastname}</th>\n                                             <td>{Client.principal.firstname}</td>\n                                             <td>{Client.principal.middlename}</td>\n                                              <td>{Client.principal.phone}</td>\n                                             <td>{Client.principal.email}</td>\n                                             <td>{Client.principal.clientTags}</td>\n                                            {/*  <td><span   className=\"showAction\"  >...</span></td> */}\n                                            \n                                             </tr>\n \n                                         ))}\n                                     </tbody>\n                                     </table>\n                                     </InfiniteScroll>                  \n                 </div>              \n           \n         </>\n               \n     )\n     }\n \n\n\nexport  function PolicyCreate() {\n    const { register, handleSubmit,setValue,  getValues, reset} = useForm(); \n    const {state,setState} = useContext(ObjectContext)\n    const {user} = useContext(UserContext)\n    const [clientModal, setClientModal] =useState(false)\n    const [dependant, setDependant] =useState(false)\n    const [selectedClient, setSelectedClient]=useState()\n    //const [productItem,setProductItem] = useState([])\n    const productItem=useRef([])\n    const [showCorp, setShowCorp] =useState(false)\n    const [message,setMessage] = useState(\"\")\n    const [benefittingPlans1,setBenefittingPlans1] = useState([])\n    const [price, setPrice] =useState(\"\")\n    const [chosenPlan,setChosenPlan] = useState()\n    const [success, setSuccess] =useState(false)\n    const [chosen, setChosen] =useState(\"\")\n    const [planHMO, setPlanHMO] =useState(\"\")\n    const [error, setError] =useState(false)\n    //const [documentNo,setDocumentNo] = useState(\"\")\n    const documentNo=useRef()\n    //const [date,setDate] = useState()\n    const date=useRef()\n    //const [patient, setPatient] =useState(\"\")\n    const patient=useRef()\n    //const [productEntry,setProductEntry]=useState()\n    const productEntry=useRef()\n    //const [type,setType] = useState(\"Bill\")\n    const type=useRef(\"Bill\")\n    const ServicesServ=client.service('billing')\n    const policyServ=client.service('policy')\n    const BillCreateServ=client.service('createbilldirect')\n    const [paymentOptions, setPaymentOptions]=useState([])\n    const [billMode, setBillMode]=useState(\"\")\n    const [obj, setObj]=useState(\"\")\n    const [paymentmode, setPaymentMode] = useState(\"\")\n\n\n    const getSearchfacility=(obj)=>{\n        setChosen(obj)\n       if (!obj){\n \n       }\n   }\n\n   const getSearchfacility1=(obj)=>{\n    setPlanHMO(obj)\n   if (!obj){\n\n   }\n}\n\n    const handleChangeMode = async(mode)=>{\n        setMessage(mode)\n        if (mode===\"Company\"){\n            setShowCorp(true)\n        }else{\n            setShowCorp(false)\n        }\n        let billm= paymentOptions.filter(el=>el.name===mode)\n        await setBillMode(billm[0])\n         console.log(billm) \n\n    }\n\n    const handleChangePlan = async(value)=>{\n        console.log(value)\n        if (value===\"\"){\n            setPrice(\"\")\n            return\n        }\n        console.log(benefittingPlans1)\n        let cplan=benefittingPlans1.filter((el)=>el.name===value)\n        console.log(cplan)\n        setChosenPlan(cplan[0])\n       let contract= cplan[0].contracts.filter((el)=>el.source_org===el.dest_org )\n       setPrice(contract[0])\n    }\n\n    const handleClickProd= ()=>{\n        setState((prevstate)=>({...prevstate, currBeneficiary:\"principal\"}))\n        setDependant(\"principal\")\n        console.log(state.Beneficiary)\n        setClientModal(true)\n    }\n    const handleClickProd2= ()=>{\n        setState((prevstate)=>({...prevstate, currBeneficiary:\"dependent\"}))\n        setDependant(\"dependent\")\n        setClientModal(true)\n    }\n\n    const handleRow=(Client)=>{\n        //domething o\n    }\n\n    const  handlecloseModal4 = () =>{\n        setClientModal(false)\n        console.log(state.Beneficiary)\n        }\n\n    const onSubmit = async (data,e) =>{\n            e.preventDefault();\n           /*  if(!chosenPlan||!message){\n                toast({\n                    message: 'Please choose plan and/or sponsor! ' ,\n                    type: 'is-danger',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  })\n    \n                return\n            } */\n            \n           \n            \n                                                                                                                        \n           //state.Beneficiary?.principal._id\n            if (!state.Beneficiary.principal._id){\n                toast({\n                    message: 'Please add principal! ' ,\n                    type: 'is-danger',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  })\n    \n                    return\n                 }\n              if (user.currentEmployee){\n              data.facility=user.currentEmployee.facilityDetail._id  // or from facility dropdown\n              }\n    \n                \n            let confirm =window.confirm(`You are about to register a new policy CVGBH/2022/098 ?`)\n            if (confirm){\n               let policy ={\n                policyNo:\"CVGBH/2022/098\",\n                organizationType:user.currentEmployee.facilityDetail.facilityType,\n                organizationId:user.currentEmployee.facilityDetail._id,\n                organizationName:user.currentEmployee.facilityDetail.facilityName,\n                organization:user.currentEmployee.facilityDetail,\n                principal: state.Beneficiary.principal, //\n                dependantBeneficiaries:state.Beneficiary.dependent,\n                provider:chosen,  //mixed\n               // sponsor:                                                                                                                         sponsor:state.Beneficiary.principal,  //mixed\n                sponsorshipType:data.sponsortype,\n                plan:chosenPlan,\n                premium:price.price,\n                premiumContract:price,\n                active:false,\n                isPaid: false,\n               // paymentmode:{ type: String,  default:\"Cash\"}, //company\n               // ??clientId:{ type: String,  },\n               // agent\"\":,\"\" // if sales is made on behalf of a state programme\n              //  agentName:{ type: String,  },\n               // bill:{},\n               // billId:\"\",\n               // validityPeriods:[ { type: String,  }],\n              //  validityEnds:{ type: Schema.Types.Date,},\n               //  validitystarts:{ type: Schema.Types.Date,},\n                 \n               // lastCapitationPaidDate: { type: Schema.Types.Date, required: false },\n               // premiumPaymentRef: { type: Schema.Types.Mixed, required: false },\n               }\n    \n    \n    \n            await policyServ.create(policy)\n            .then((res)=>{\n                    //console.log(JSON.stringify(res))\n                    e.target.reset();\n                   /*  setMessage(\"Created Client successfully\") */\n                    setSuccess(true)\n                    toast({\n                        message: 'Client created succesfully',\n                        type: 'is-success',\n                        dismissible: true,\n                        pauseOnHover: true,\n                      })\n                      setSuccess(false)\n                   \n                })\n                .then(async(res)=>{\n                   //await setType(\"Sales\")\n                   type.current=\"Sales\"\n                   const today=new Date().toLocaleString()\n                   //await setDate(today)\n                    date.current=today\n                   const invoiceNo=random(6,'uppernumeric')\n                  // await setDocumentNo(invoiceNo)\n                  documentNo.current=invoiceNo\n                   //await setPatient(state.Beneficiary.principal)\n                   patient.current= state.Beneficiary.principal\n                  // await createBillmode()\n                   await createProductItem()\n                   await createProductEntry()\n                   \n                    await handleCreateBill()\n                })\n                .catch((err)=>{\n                    toast({\n                        message: 'Error creating Client ' + err,\n                        type: 'is-danger',\n                        dismissible: true,\n                        pauseOnHover: true,\n                      })\n                      \n                    \n                })\n            }\n    \n          } \n    const getBenfittingPlans = async()=>{\n        setBenefittingPlans1([])\n        if (user.currentEmployee){\n                \n            const findServices= await ServicesServ.find(\n                    {query: {\n                        facility: user.currentEmployee.facilityDetail._id,\n                        'contracts.source_org' : user.currentEmployee.facilityDetail._id ,\n                        'contracts.dest_org' : user.currentEmployee.facilityDetail._id ,\n                        category:\"Managed Care\",\n                       \n                        $sort: {\n                            category: 1\n                        }\n                        }})\n                        console.log(findServices)\n                        if (findServices.total>0){\n                 \n            findServices.groupedOrder[0].services.forEach(async (c)=>{\n                const newPlan={\n                    name:c.name,\n                  \n                }\n                await setBenefittingPlans1((prev)=>(prev.concat(c)))\n                    })\n                }\n            }\n    \n       }\n\n   const createPaymentOption =()=>{\n    const paymentoptions= []\n    // const info = client.paymentinfo\n     let billme\n    let obj\n       //ideally this should be based on whether self or corporate\n    let patient =state.Beneficiary.principal \n    if (!!patient.paymentinfo){\n    patient.paymentinfo.forEach((pay,i)=>{ \n        if (pay.active){\n    \n         switch(pay.paymentmode) {\n             case 'Cash':\n               // code block\n               obj=createObj(pay,\"Cash\",\"Cash\",\"Cash\" )\n             \n               paymentoptions.push(obj)\n               setPaymentMode(\"Cash\")\n               billme=obj\n               console.log(\"billme\",billme)\n               break;\n             case 'Family':\n               // code block\n               obj=createObj(pay,\"Family Cover\",\"familyCover\", \"Family Cover\")\n               paymentoptions.push(obj)\n               setPaymentMode(\"Family Cover\")\n               billme=obj\n              // console.log(\"billme\",billme)\n               break;\n             case 'Company':\n               // code block\n               let name=\"Company: \" + pay.organizationName + \"(\" + pay.plan+\")\"\n\n               obj=createObj(pay,name,\"CompanyCover\", \"Company Cover\" )\n                   paymentoptions.push(obj)\n                   setPaymentMode(\"Company: \" + pay.organizationName + \"(\" + pay.plan+\")\")\n                  billme=obj\n                 // console.log(\"billme\",billme)\n               break;\n             case 'HMO':\n               // code block\n               console.log(pay)\n              let  sname=\"HMO: \" + pay.organizationName + \"(\" + pay.plan+\")\"\n\n               obj=createObj(pay,sname,\"HMOCover\", \"HMO Cover\" )\n                   paymentoptions.push(obj)\n                   setPaymentMode(\"HMO: \" + pay.organizationName + \"(\" + pay.plan+\")\")\n                  billme=obj\n                //  console.log(\"billme\",billme)\n\n\n                \n               break;\n             default:\n               // code block\n           }\n         }\n         })\n                 \n        }\n     setPaymentOptions(paymentoptions)\n     setBillMode(billme)\n    }\n\n   /* const pay={paymentinfo:\n    {\n      paymentmode:{ type: String,  default:\"Cash\"},\n      organizationId:{ type: Schema.Types.ObjectId },\n      organizationName:{ type: String,  },\n      principalId:{ type: String,  },\n      clientId:{ type: String,  },\n      principalName:{ type: String,  },\n      plan:{ type: String,  },\n      active:{ type: Boolean,default:true},\n      principal:{ type: String},\n      organizationType: { type: String,  },\n      agent:{ type: Schema.Types.ObjectId },\n      agentName:{ type: String,  }\n\n    }\n    }\n   */\n    \n    const createObj= (pay,name,cover,type)=>{\n        let details={}\n          details= {...pay}\n          details.type=type\n  \n      return {\n              name,\n              value:cover,\n              detail:details,\n              type,\n          }\n  \n      }\n  //create productitem\n  const  createProductItem = async()=>{\n  productItem.current=[\n        {\n            //productId:,\n            name:chosenPlan.name ,\n            quantity:\"1\",\n            sellingprice:price.price,\n            amount:price.price, //||qamount\n            baseunit:\"\",\n            costprice:\"\",\n            category: chosenPlan.category,\n            billingId:chosenPlan._id,\n            billingContract:price,\n            billMode:billMode // state.Beneficiary.principal.paymentinfo[0]\n        }\n    ]\n    console.log(chosenPlan.name)\n}\n\nconst createProductEntry=()=>{\n   productEntry.current={\n        productitems:productItem.current,\n        date:date.current,\n        documentNo: documentNo.current,\n        type: type.current,\n        totalamount:price.price,\n        createdby:user._id,\n        transactioncategory:\"debit\",\n       source:patient.current.firstname+\" \"+ patient.current.lastname,\n       facility:user.currentEmployee.facilityDetail._id \n\n    }\n \n\n}\n\n//create billfor policy\nconst handleCreateBill= async()=>{ //handle selected single order\n    //documentation\n    \n    console.log(productEntry.current,productItem.current)\n    let serviceList=[]\n    let document={}\n    \n      if (user.currentEmployee){\n      document.facility=user.currentEmployee.facilityDetail._id \n      document.facilityname=user.currentEmployee.facilityDetail.facilityName // or from facility dropdown\n      }\n     document.documentdetail=productItem.current\n     console.log(document.documentdetail)\n      document.documentname=\"Billed Orders\" //state.DocumentClassModule.selectedDocumentClass.name\n     // document.documentClassId=state.DocumentClassModule.selectedDocumentClass._id\n      document.location=state.employeeLocation.locationName+\" \"+state.employeeLocation.locationType\n      document.locationId=state.employeeLocation.locationId\n      document.client=patient.current._id\n      document.clientname=patient.current.firstname+ \" \"+patient.current.middlename+\" \"+patient.current.lastname\n      document.clientobj=patient.current\n      document.createdBy=user._id\n      document.createdByname=user.firstname+ \" \"+user.lastname\n      document.status=\"completed\"\n      console.log(document)\n \n      \n      //order\n      document.documentdetail.forEach(async (element)=> {\n   \n         let orderinfo={ //for reach document\n         documentationId:\"\", //tbf\n         order_category:element.category, //category\n         order: element.name + \" Plan\",  //name\n         instruction:\"\",\n         destination_name: document.facilityname, //facilityname\n         destination: document.facility, //facility id\n         order_status:\"Billed\",\n         payer:\"\",//!!element.billMode.organizationName?element.billMode.organizationName:\"\",\n         paymentmode:\"\",//element.billMode.paymentmode?element.billMode.paymentmode:\"\",\n         \n         requestingdoctor_Id: document.createdBy, \n         requestingdoctor_Name: document.createdByname,\n         requestingdoctor_locationid:document.locationId,\n         requestingdoctor_locationName:document.location,\n         requestingdoctor_facilityId:document.facility,\n         requestingdoctor_facilityname:document.facilityname,\n      \n         clientId: document.client,\n         clientname:document.clientname,\n         client:document.clientobj,\n       \n         order_action:[],\n         medication_action:[],\n         treatment_action:[]\n      }\n\n      let billInfo={\n         orderInfo:{\n             orderId:\"\", //tbf\n             orderObj:orderinfo,\n           },\n           serviceInfo:{            \n             price: element.sellingprice,\n             quantity: element.quantity,\n             productId: element.productId,\n             name: element.name + \" Plan\",\n             baseunit: element.baseunit,\n             amount:element.amount,\n             billingId:element.billingId,\n             billingContract:element.billingContract,\n             createdby:user._id,\n           },\n           paymentInfo:{\n             amountDue:element.amount,\n             paidup:0,\n             balance:element.amount,\n             paymentDetails:[]\n       \n           },\n           participantInfo:{\n             billingFacility:orderinfo.destination,\n             billingFacilityName:orderinfo.destination_name,\n             locationId:document.locationId, //selected location,\n             clientId:orderinfo.clientId,\n             client:orderinfo.client,\n             paymentmode:element.billMode\n           },\n           createdBy:user._id,\n           billing_status:\"Unpaid\"\n         }\n         let items={\n             orderinfo,\n             billInfo\n         }\n         alert(\"aboutto create bill \" +items.orderinfo.name)\n         serviceList.push(items)\n\n     })\n\n     console.log(\"==================\")\n     console.log(document,serviceList)\n     \n    let confirm =window.confirm(`You are about to bill ${document.clientname} for ${serviceList.length} service(s)?`)\n    if (confirm){\n        await BillCreateServ.create({\n            document,\n            serviceList\n        }).then((res)=>{\n                    setSuccess(true)\n                    toast({\n                        message: 'Billed Orders created succesfully',\n                        type: 'is-success',\n                        dismissible: true,\n                        pauseOnHover: true,\n                        })\n                        setSuccess(false)\n                       productItem.current =[]\n                        //setCalcAmount(0);\n                        const today=new Date().toLocaleString()\n                        //console.log(today)\n                        date.current=today\n                        const invoiceNo=random(6,'uppernumeric')\n                        documentNo.current=invoiceNo\n\n                })\n                .catch((err)=>{\n                    toast({\n                        message: 'Error creating Billed Orders ' + err,\n                        type: 'is-danger',\n                        dismissible: true,\n                        pauseOnHover: true,\n                        })\n                }) \n\n        }\n    }\n\n    useEffect(() => {\n        getBenfittingPlans()\n        createPaymentOption()\n    \n      return () => {\n        \n      }\n    }, [])\n    \n\n  return (\n    <>\n            <div className=\"card \">\n                <div className=\"card-header\">\n                    <p className=\"card-header-title\">\n                        Create Beneficiary\n                    </p>\n                </div>\n                <div className=\"card-content vscrollable remPad1\">\n\n                \n                <div>\n                    <div className=\"field is-horizontal\">\n                        <div className=\"field \">\n                            <label className=\"label is-size-7 my-0\">Principal  </label>\n                        </div>\n                        <div className=\"field ml-2\">\n                         {(!state.Beneficiary?.principal._id)&&   <p className=\"control\">\n                                <button className=\"button is-info is-small btnheight \">\n                                <span className=\"is-small\" onClick={handleClickProd}> +</span>\n                                </button>\n                            </p>\n                            }   \n                        </div>\n                        </div>\n                        { (!!state.Beneficiary?.principal._id)&& <table className=\"table is-striped is-narrow is-hoverable is-fullwidth  \">\n                                    <thead>\n                                        <tr>\n                                        <th><abbr title=\"Serial No\">S/No</abbr></th>\n                                        <th><abbr title=\"Last Name\">Last Name</abbr></th>\n                                        <th>First Name</th>\n                                        <th><abbr title=\"Middle Name\">Middle Name</abbr></th>\n                                        {/* <th><abbr title=\"Age\">Payment Mode</abbr></th> */}\n                                       <th><abbr title=\"Age\">Age</abbr></th>\n                                        <th><abbr title=\"Gender\">Gender</abbr></th> \n                                        <th><abbr title=\"Phone\">Phone</abbr></th>\n                                        <th><abbr title=\"Email\">Email</abbr></th>\n                                        <th><abbr title=\"Tags\">Tags</abbr></th>\n                                        {/* <th><abbr title=\"Actions\">Actions</abbr></th> */}\n                                        </tr>\n                                    </thead>\n                                    <tfoot>\n                                        \n                                    </tfoot>\n                                    <tbody>\n                                        {/* {facilities.map((Client, i)=>( */}\n\n                                            <tr key={state.Beneficiary?.principal._id} onClick={()=>handleRow(state.Beneficiary?.principal)}  className={state.Beneficiary?.principal._id===(selectedClient?._id||null)?\"is-selected\":\"\"}>\n                                            <td>{1}</td>\n                                            <th>{state.Beneficiary?.principal.lastname}</th>\n                                            <td>{state.Beneficiary?.principal.firstname}</td>\n                                            <td>{state.Beneficiary?.principal.middlename}</td>\n                                            {/* <td>{state.Beneficiary?.principal.paymentinfo.map((pay,i)=>(\n                                                <>\n                                                {pay.paymentmode} {pay.paymentmode===\"Cash\"?\"\":\":\" } {pay.organizationName}<br></br>\n                                                </>\n                                            ))}</td> */}\n                                           <td>{state.Beneficiary?.principal.dob && <>{formatDistanceToNowStrict(new Date(state.Beneficiary?.principal.dob))}</>}</td>\n                                            <td>{state.Beneficiary?.principal.gender}</td>\n                                             <td>{state.Beneficiary?.principal.phone}</td>\n                                            <td>{state.Beneficiary?.principal.email}</td>\n                                            <td>{state.Beneficiary?.principal.clientTags}</td>\n                                           {/*  <td><span   className=\"showAction\"  >...</span></td> */}\n                                           \n                                            </tr>\n                                      {/*   ))} */}\n                                    </tbody>\n                                    </table>}\n                   </div>\n                        <div className=\"field is-horizontal\">\n                        <div className=\"field \">\n                            <label className=\"label is-size-7 my-0\">Dependents  </label>\n                        </div>\n                        <div className=\"field ml-2\">\n                            <p className=\"control\">\n                                <button className=\"button is-info is-small btnheight \">\n                                <span className=\"is-small\" onClick={handleClickProd2}> +</span>\n                                </button>\n                            </p>\n                        </div>\n                        </div>\n                        <div>\n                       {(state.Beneficiary.dependent.length>0)&&<table className=\"table is-striped is-narrow is-hoverable is-fullwidth  \">\n                                    <thead>\n                                        <tr>\n                                        <th><abbr title=\"Serial No\">S/No</abbr></th>\n                                        <th><abbr title=\"Last Name\">Last Name</abbr></th>\n                                        <th>First Name</th>\n                                        <th><abbr title=\"Middle Name\">Middle Name</abbr></th>\n                                        <th><abbr title=\"Age\">Payment Mode</abbr></th>\n                                       <th><abbr title=\"Age\">Age</abbr></th>\n                                        <th><abbr title=\"Gender\">Gender</abbr></th> \n                                        <th><abbr title=\"Phone\">Phone</abbr></th>\n                                        <th><abbr title=\"Email\">Email</abbr></th>\n                                        <th><abbr title=\"Tags\">Tags</abbr></th>\n                                        {/* <th><abbr title=\"Actions\">Actions</abbr></th> */}\n                                        </tr>\n                                    </thead>\n                                    <tfoot>\n                                        \n                                    </tfoot>\n                                    <tbody>\n                                        {state.Beneficiary.dependent.map((Client, i)=>(\n\n                                            <tr key={Client._id} onClick={()=>handleRow(Client)}  className={Client._id===(selectedClient?._id||null)?\"is-selected\":\"\"}>\n                                            <td>{i+1}</td>\n                                            <th>{Client.lastname}</th>\n                                            <td>{Client.firstname}</td>\n                                            <td>{Client.middlename}</td>\n                                            <td>{Client.paymentinfo.map((pay,i)=>(\n                                                <>\n                                                {pay.paymentmode} {pay.paymentmode===\"Cash\"?\"\":\":\" } {pay.organizationName}<br></br>\n                                                </>\n                                            ))}</td>\n                                           <td>{Client.dob && <>{formatDistanceToNowStrict(new Date(Client.dob))}</>}</td>\n                                            <td>{Client.gender}</td>\n                                             <td>{Client.phone}</td>\n                                            <td>{Client.email}</td>\n                                            <td>{Client.clientTags}</td>\n                                           {/*  <td><span   className=\"showAction\"  >...</span></td> */}\n                                           \n                                            </tr>\n                                        ))}\n                                    </tbody>\n                                    </table>}\n                                    </div>\n                <form onSubmit={handleSubmit(onSubmit)}>\n                <label className=\"label is-size-7 my-0\"  name=\"dob\" type=\"text\">Primary Provider </label>\n                    <div className=\"field is-expanded\"  /* style={ !user.stacker?{display:\"none\"}:{}} */ >\n                        <OrgFacilitySearch  getSearchfacility={getSearchfacility} clear={success} /> \n                        <p className=\"control has-icons-left \" style={{display:\"none\"}}>\n                            <input className=\"input is-small\" /* ref={register ({ required: true }) }  *//* add array no */  /* value={facilityId} name=\"facilityId\" type=\"text\" onChange={e=>setFacilityId(e.target.value)} placeholder=\"Product Id\" */ />\n                            <span className=\"icon is-small is-left\">\n                            <i className=\"fas  fa-map-marker-alt\"></i>\n                            </span>\n                        </p>\n                    </div>\n                    <div className=\"field is-horizontal\">\n                <div className=\"field-body\">\n                    <div className=\"field\">\n                    <label className=\"label is-size-7 my-0\"  name=\"dob\" type=\"text\">Sponsor </label>\n                    <div className=\"control\">\n                    <div className=\"select is-small \">\n                                <select name=\"sponsortype\"  ref={register({ required: true })}  onChange={(e)=>handleChangeMode(e.target.value)}  className=\"selectadd\" >\n                                <option value=\"\"> Choose Sponsor </option>\n                                <option value=\"Self\">Self</option>\n                                <option value=\"Company\">Company</option>\n                                </select>\n                            </div>\n                                </div>\n                    </div>\n                    <div className=\"field\"  style={ !showCorp?{display:\"none\"}:{}}>\n                    <label className=\"label is-size-7 my-0\"  name=\"dob\" type=\"text\">Corporate Sponsor </label>\n                    <div className=\"field is-expanded\"  /* style={ !user.stacker?{display:\"none\"}:{}} */ >\n                        <SponsorSearch  getSearchfacility={getSearchfacility1} clear={success} /> \n                        <p className=\"control has-icons-left \" style={{display:\"none\"}}>\n                            <input className=\"input is-small\" /* ref={register ({ required: true }) }  *//* add array no */  /* value={facilityId} name=\"facilityId\" type=\"text\" onChange={e=>setFacilityId(e.target.value)} placeholder=\"Product Id\" */ />\n                            <span className=\"icon is-small is-left\">\n                            <i className=\"fas  fa-map-marker-alt\"></i>\n                            </span>\n                        </p>\n                    </div>\n\n                    </div>\n                    \n\n                </div>\n                </div>\n\n\n                <label className=\"label is-size-7 my-0\"  name=\"dob\" type=\"text\">Plan </label>\n              \n                <div className=\"field\">    \n                    <div className=\"control\">\n                        <div className=\"select is-small \">\n                            <select name=\"plan\"  ref={register({ required: true })}  onChange={(e,i)=>handleChangePlan(e.target.value)}  className=\"selectadd\" >\n                            <option value=\"\"> Choose Plan </option>\n                            {benefittingPlans1.map((option,i)=>(\n                                <option key={i} value={option.name}> {option.name}</option>\n                            ))}\n                            </select>\n                        </div>\n                    </div>\n                    </div>\n     \n                \n                <label className=\"label is-size-7 my-0\"  name=\"dob\" type=\"text\">Premium:{price.price}</label>\n               \n                \n                <div className=\"field\">\n                        <p className=\"control has-icons-left\">\n                        \n                        <label className=\"is-size-7 my-0\"></label>\n                            <span className=\"icon is-small is-left\">\n                            <i className=\"nop-envelope\"></i>\n                            </span>\n                        </p>\n                </div>\n            \n                \n            <div className=\"field  is-grouped mt-2\" >\n                    <p className=\"control\">\n                        <button type=\"submit\" className=\"button is-success is-small\" >\n                            Save\n                        </button>\n                    </p>\n                    <p className=\"control\">\n                        <button type=\"reset\" className=\"button is-warning is-small\" /* onClick={(e)=>e.target.reset()} */>\n                            Reset\n                        </button>\n                    </p>\n                {/*  <p className=\"control\">\n                        <button className=\"button is-danger is-small\" onClick={()=>handleDelete()} type=\"delete\">\n                        Delete\n                        </button>\n                    </p> */}\n                </div>\n                \n                </form>\n                </div>\n            </div>\n            <div className={`modal ${clientModal?\"is-active\":\"\"}` }>\n                <div className=\"modal-background\"></div>\n                <div className=\"modal-card modalbkgrnd z10\"  >\n                    <header className=\"modal-card-head selectadd\">\n                    <p className=\"modal-card-title redu\">Create Client</p>\n                    <button className=\"delete\" aria-label=\"close\"  onClick={handlecloseModal4}></button>\n                    </header>\n                    <section className=\"modal-card-body\">\n                    {/* <StoreList standalone=\"true\" /> */}\n                    {/*  <ClientGroup  list={patList}  closeModal={handlecloseModal3} choosen={choosen} dupl ={dupl} reg={reg} depen={depen}/>  */}\n                     <ClientCreate closeModal={handlecloseModal4}/>\n                    </section>\n                    {/* <footer className=\"modal-card-foot\">\n                    <button className=\"button is-success\">Save changes</button>\n                    <button className=\"button\">Cancel</button>\n                    </footer> */}\n                </div>\n            </div>             \n        </>\n  )\n}\n\n\nexport function ClientCreate({closeModal}){\n    const { register, handleSubmit,setValue,  getValues, reset} = useForm(); //, watch, errors, reset \n      // eslint-disable-next-line\n    const [error, setError] =useState(false)\n      // eslint-disable-next-line\n    const [success, setSuccess] =useState(false)\n      // eslint-disable-next-line\n    const [message,setMessage] = useState(\"\")\n    // eslint-disable-next-line\n    const [facility,setFacility] = useState()\n    const ClientServ=client.service('client')\n    const mpiServ=client.service('mpi')\n    //const history = useHistory()\n    const {user} = useContext(UserContext) //,setUser\n    const [billModal, setBillModal] =useState(false)\n    const [patList, setPatList] =useState([])\n    const [dependant, setDependant] =useState(false)\n    // eslint-disable-next-line\n    const [currentUser,setCurrentUser] = useState()\n    const [date,setDate] = useState()\n    const {state,setState} = useContext(ObjectContext)\n\n\n  // eslint-disable-next-line\n    const getSearchfacility=(obj)=>{\n        setValue(\"facility\", obj._id,  {\n            shouldValidate: true,\n            shouldDirty: true\n        })\n    }\n\n    const handleDate=async (date)=>{\n        setDate(date)\n        \n    }\n    useEffect(() => {\n        setCurrentUser(user)\n        //console.log(currentUser)\n        return () => {\n        \n        }\n    }, [user])\n\n  //check user for facility or get list of facility  \n    useEffect(()=>{\n        //setFacility(user.activeClient.FacilityId)//\n      if (!user.stacker){\n       /*    console.log(currentUser)\n        setValue(\"facility\", user.currentEmployee.facilityDetail._id,  {\n            shouldValidate: true,\n            shouldDirty: true\n        })  */\n      }\n    })\n\n    const checkClient=()=>{\n        const data= getValues()\n        data.dob= date\n       const obj ={\n        firstname:data.firstname,\n        middlename:data.middlename,\n        lastname:data.lastname,\n        gender:data.gender,\n        email:data.email,\n        phone:data.phone,\n        dob:data.dob\n       } \n       /* find if there is a match with the paramters entered\n          run search if \n            1.phone no alone or  \n            2.email alone or \n            3.both is entered\n            4. all other 5 parameters\n\n        */\n       let query={}\n\n       if (!!data.phone){\n            query.phone=data.phone\n            checkQuery(query)\n       }\n\n       if (!!data.email){\n        query.email=data.email\n        checkQuery(query)\n       }\n\n       if (!!data.firstname && !!data.lastname && !!data.gender && !!data.dob ){\n          // console.log(\"simpa\")\n           data.middlename=data.middlename||\"\"\n           query.gender=data.gender\n          query.dob=data.dob\n\n           query.$or=[\n                {\n                    firstname: data.firstname,\n                    lastname:data.lastname,\n                    middlename: data.middlename\n                },\n                {\n                    firstname: data.firstname,\n                    lastname:data.middlename,\n                    middlename: data.lastname\n                },\n                {\n                    firstname: data.middlename,\n                    lastname:data.lastname,\n                    middlename: data.firstname\n                },\n                {\n                    firstname: data.middlename,\n                    lastname:data.firstname,\n                    middlename: data.lastname\n                },\n                {\n                    firstname: data.lastname,\n                    lastname:data.firstname,\n                    middlename: data.middlename\n                },\n                {\n                    firstname: data.lastname,\n                    lastname:data.middlename,\n                    middlename: data.firstname\n                },\n        ]\n        checkQuery(query)\n       }\n    \n       \n    }\n\n    const checkQuery=(query)=>{\n        setPatList([])\n        if (!(query && Object.keys(query).length === 0 && query.constructor === Object)){\n            ClientServ.find({query:query}).then((res)=>{\n                console.log(res)\n                if (res.total>0){\n                   // alert(res.total)\n                     setPatList(res.data)\n                   setBillModal(true)\n                   return\n                }\n     \n            })\n            .catch((err)=>{console.log(err)})\n         }\n\n    }\n\n\n    const handleBill =()=>{\n        setBillModal(true)\n    }\n    const  handlecloseModal3 = () =>{\n        setBillModal(false)\n        }\n\n    const choosen=async (client)=>{\n        //update client with facilities\n      /*   if (client.facility !== user.currentEmployee.facilityDetail._id ){ //check taht it is not in list of related facilities\n           \n        \n        //create mpi record\n        const newPat = {\n            client: client._id,\n            facility:user.currentEmployee.facilityDetail._id,\n            mrn:client.mrn,\n            clientTags:client.clientTags,\n            relfacilities:client.relatedfacilites\n           }\n           await mpiServ.create(newPat)\n        } */\n        //reset form\n        //toast niotification\n        //cash payment\n\n    }\n    const dupl=(client)=>{\n        toast({\n            message: 'Client previously registered in this facility',\n            type: 'is-danger',\n            dismissible: true,\n            pauseOnHover: true,\n          })\n          reset()\n          setPatList([])\n        \n    }\n    const reg=async (client)=>{\n        if ((client.relatedfacilities.findIndex(el=>el.facility===user.currentEmployee.facilityDetail._id))===-1){\n            //create mpi record\n            const newPat = {\n                client: client._id,\n                facility:user.currentEmployee.facilityDetail._id,\n                mrn:client.mrn,\n                clientTags:client.clientTags,\n                relfacilities:client.relatedfacilities\n               }\n               //console.log(newPat)\n               await mpiServ.create(newPat).then((resp)=>{\n                toast({\n                    message: 'Client created succesfully',\n                    type: 'is-success',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  })\n               }).catch((err)=>{\n                toast({\n                    message: 'Error creating Client '+err,\n                    type: 'is-danger',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  })\n                  \n               })\n            }\n            //reset form\n            reset()\n            setPatList([])\n            //cash payment\n        \n    }\n    const depen=(client)=>{\n        setDependant(true)\n       \n    }\n    const onSubmit = async (data,e) =>{\n        if(!date){\n            toast({\n                message: 'Please enter Date of Birth! ' ,\n                type: 'is-danger',\n                dismissible: true,\n                pauseOnHover: true,\n              })\n\n            return\n        }\n        e.preventDefault();\n        setMessage(\"\")\n        setError(false)\n        setSuccess(false)\n        checkClient()\n        if (patList.length>0){\n             if(!dependant){\n                return\n             }\n            //alert(\"something\"+\",\"+ patList.length)\n            //let confirm = window.confirm(\"Is this person a dependant with parent phone number?\")\n           // setOption(confirm)\n            setPatList([])\n           \n        }\n         // data.createdby=user._id\n        //  console.log(data);\n          if (user.currentEmployee){\n          data.facility=user.currentEmployee.facilityDetail._id  // or from facility dropdown\n          }\n\n            \n        let confirm =window.confirm(`You are about to register a new client ${ data.firstname}  ${ data.middlename} ${ data.lastname} ?`)\n        if (confirm){\n            data.dob=date\n        await ClientServ.create(data)\n        .then((res)=>{\n            console.log(res)\n                //console.log(JSON.stringify(res))\n                e.target.reset();\n               /*  setMessage(\"Created Client successfully\") */\n                setSuccess(true)\n                toast({\n                    message: 'Client created succesfully',\n                    type: 'is-success',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  })\n                  setSuccess(false)\n                  setPatList([])\n                  setDependant(false)\n                  setDate()\n                  let newClientModule={}\n                  //add to context\n                        // if principal\n                        if(state.currBeneficiary===\"principal\"){\n                             \n\n                              newClientModule={\n                                principal:res,\n                                dependent:state.Beneficiary.dependent,\n                                others:state.Beneficiary.others,\n                                show:'create'\n                                }       \n                        }\n                        if(state.currBeneficiary===\"dependent\"){\n                            \n                             newClientModule={\n                                principal:state.Beneficiary.principal,\n                                dependent:[...state.Beneficiary.dependent, res],\n                                others:state.Beneficiary.others,\n                                show:'create'\n                                }       \n\n                        }\n                       \n                        // if dependent\n                /*   const newClientModule={\n                    principal:principal,\n                    dependent:dependents,\n                    others:{},\n                    show:'create'\n                    }          */                                                                                                                                                \n                setState((prevstate)=>({...prevstate, Beneficiary:newClientModule}))\n                  closeModal()\n            })\n            .catch((err)=>{\n                toast({\n                    message: 'Error creating Client ' + err,\n                    type: 'is-danger',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  })\n                  setPatList([])\n                  setDependant(false)\n            })\n        }\n\n      } \n\n    return (\n        <>\n            <div className=\"card \">\n            <div className=\"card-header\">\n                <p className=\"card-header-title\">\n                    Create Client\n                </p>\n            </div>\n            <div className=\"card-content vscrollable remPad1\">\n           {/*  <p className=\" is-small\">\n                    Kindly search Client list before creating new Clients!\n                </p> */}\n            <form onSubmit={handleSubmit(onSubmit)}>\n                <p className=\" is-small\">Names</p>\n            <div className=\"field is-horizontal\">\n                <div className=\"field-body\">\n                    <div className=\"field\">\n                        <p className=\"control has-icons-left has-icons-right\">\n                            <input className=\"input is-small is-danger\" ref={register({ required: true })}  name=\"firstname\" type=\"text\" placeholder=\"First Name\" onBlur={checkClient}/>\n                            <span className=\"icon is-small is-left\">\n                                <i className=\"fas fa-hospital\"></i>\n                            </span>                    \n                        </p>\n                    </div>\n                \n                \n                    <div className=\"field\">\n                        <p className=\"control has-icons-left has-icons-right\">\n                        <input className=\"input is-small\" ref={register()}  name=\"middlename\" type=\"text\" placeholder=\"Middle Name\" onBlur={checkClient}/>\n                        <span className=\"icon is-small is-left\">\n                            <i className=\"fas fa-map-signs\"></i>\n                        </span>\n                        \n                        </p>\n                    </div>\n              \n                <div className=\"field\">\n                    <p className=\"control has-icons-left\">\n                        <input className=\"input is-small is-danger\" ref={register({ required: true })} name=\"lastname\" type=\"text\" placeholder=\"Last Name\" onBlur={checkClient}/>\n                        <span className=\"icon is-small is-left\">\n                        <i className=\" fas fa-user-md \"></i>\n                        </span>\n                    </p>\n                </div>\n            </div>  \n        </div>\n        <p className=\" is-small\">Biodata</p>\n        <div className=\"field is-horizontal\">\n            <div className=\"field-body\">\n                <div className=\"field\">\n                    <p className=\"control has-icons-left is-danger\">\n                    \n                      {/*   <input className=\"input is-small is-danger\" ref={register({ required: true })} name=\"dob\" type=\"text\" placeholder=\"Date of Birth\"  onBlur={checkClient}/>\n                        <span className=\"icon is-small is-left\">\n                        <i className=\"fas fa-envelope\"></i>\n                        </span> */}\n                        <DatePicker className=\"is-danger red-border is-small\"\n                            selected={date} \n                            onChange={date => handleDate(date)} \n                            dateFormat=\"dd/MM/yyyy\"\n                            placeholderText=\"Enter date with dd/MM/yyyy format \"\n                            //isClearable\n                            /* className=\"\" */\n                            />\n                    </p>\n                </div> \n                <div className=\"field\">\n                    <p className=\"control has-icons-left\">\n                    \n                        <input className=\"input is-small\" ref={register()} name=\"gender\" type=\"text\" placeholder=\"Gender\" onBlur={checkClient} />\n                        <span className=\"icon is-small is-left\">\n                        <i className=\"fas fa-envelope\"></i>\n                        </span>\n                    </p>\n                </div> \n                <div className=\"field\">\n                    <p className=\"control has-icons-left\">\n                    \n                        <input className=\"input is-small\" ref={register()} name=\"maritalstatus\" type=\"text\" placeholder=\"Marital Status\"  />\n                        <span className=\"icon is-small is-left\">\n                        <i className=\"fas fa-envelope\"></i>\n                        </span>\n                    </p>\n                </div> \n                <div className=\"field\">\n                    <p className=\"control has-icons-left\">\n                    \n                        <input className=\"input is-small\" ref={register()} name=\"mrn\" type=\"text\" placeholder=\"Medical Records Number\"  />\n                        <span className=\"icon is-small is-left\">\n                        <i className=\"fas fa-envelope\"></i>\n                        </span>\n                    </p>\n                </div> \n            </div>\n        </div>\n        <div className=\"field is-horizontal\">\n            <div className=\"field-body\">\n                <div className=\"field\">\n                    <p className=\"control has-icons-left\">\n                    \n                        <input className=\"input is-small\" ref={register()} name=\"religion\" type=\"text\" placeholder=\"Religion\"  />\n                        <span className=\"icon is-small is-left\">\n                        <i className=\"fas fa-envelope\"></i>\n                        </span>\n                    </p>\n                </div> \n                <div className=\"field\">\n                    <p className=\"control has-icons-left\">\n                    \n                        <input className=\"input is-small\" ref={register()} name=\"profession\" type=\"text\" placeholder=\"Profession\"  />\n                        <span className=\"icon is-small is-left\">\n                        <i className=\"fas fa-envelope\"></i>\n                        </span>\n                    </p>\n                </div> \n                <div className=\"field\">\n                    <p className=\"control has-icons-left\">\n                        <input className=\"input is-small is-danger\" ref={register({ required: true })} name=\"phone\" type=\"text\" placeholder=\" Phone No\" onBlur={checkClient}/>\n                        <span className=\"icon is-small is-left\">\n                        <i className=\"fas fa-phone-alt\"></i>\n                        </span>\n                    </p>\n                </div>\n\n                <div className=\"field\">\n                    <p className=\"control has-icons-left\">\n                    \n                        <input className=\"input is-small \" ref={register()} name=\"email\" type=\"email\" placeholder=\"Email\"  onBlur={checkClient} />\n                        <span className=\"icon is-small is-left\">\n                        <i className=\"fas fa-envelope\"></i>\n                        </span>\n                    </p>\n                </div> \n            </div>\n        </div>\n        <div className=\"field\">\n                <p className=\"control has-icons-left\">\n                \n                    <input className=\"input is-small\" ref={register()} name=\"clientTags\" type=\"text\" placeholder=\"Tags\"  />\n                    <span className=\"icon is-small is-left\">\n                    <i className=\"fas fa-envelope\"></i>\n                    </span>\n                </p>\n            </div> \n        <p className=\" is-small\">Address</p>\n            <div className=\"field\">\n                <p className=\"control has-icons-left\">\n                \n                    <input className=\"input is-small\" ref={register()} name=\"address\" type=\"text\" placeholder=\"Residential Address\"  />\n                    <span className=\"icon is-small is-left\">\n                    <i className=\"fas fa-envelope\"></i>\n                    </span>\n                </p>\n            </div> \n        <div className=\"field is-horizontal\">\n            <div className=\"field-body\">\n                <div className=\"field\">\n                    <p className=\"control has-icons-left\">\n                    \n                        <input className=\"input is-small\" ref={register()} name=\"city\" type=\"text\" placeholder=\"Town/City\"  />\n                        <span className=\"icon is-small is-left\">\n                        <i className=\"fas fa-envelope\"></i>\n                        </span>\n                    </p>\n                </div> \n                <div className=\"field\">\n                    <p className=\"control has-icons-left\">\n                    \n                        <input className=\"input is-small\" ref={register()} name=\"lga\" type=\"text\" placeholder=\"Local Govt Area\"  />\n                        <span className=\"icon is-small is-left\">\n                        <i className=\"fas fa-envelope\"></i>\n                        </span>\n                    </p>\n                </div> \n                <div className=\"field\">\n                    <p className=\"control has-icons-left\">\n                    \n                        <input className=\"input is-small\" ref={register()} name=\"state\" type=\"text\" placeholder=\"State\"  />\n                        <span className=\"icon is-small is-left\">\n                        <i className=\"fas fa-envelope\"></i>\n                        </span>\n                    </p>\n                </div> \n                <div className=\"field\">\n                    <p className=\"control has-icons-left\">\n                    \n                        <input className=\"input is-small\" ref={register()} name=\"country\" type=\"text\" placeholder=\"Country\"  />\n                        <span className=\"icon is-small is-left\">\n                        <i className=\"fas fa-envelope\"></i>\n                        </span>\n                    </p>\n                </div>\n            </div>\n        </div> \n        <p className=\" is-small\">Medical Data</p>\n        <div className=\"field is-horizontal\">\n            <div className=\"field-body\">\n                    <div className=\"field\">\n                        <p className=\"control has-icons-left\">\n                        \n                            <input className=\"input is-small\" ref={register()} name=\"bloodgroup\" type=\"text\" placeholder=\"Blood Group\"  />\n                            <span className=\"icon is-small is-left\">\n                            <i className=\"fas fa-envelope\"></i>\n                            </span>\n                        </p>\n                    </div> \n                    <div className=\"field\">\n                        <p className=\"control has-icons-left\">\n                        \n                            <input className=\"input is-small\" ref={register()} name=\"genotype\" type=\"text\" placeholder=\"Genotype\"  />\n                            <span className=\"icon is-small is-left\">\n                            <i className=\"fas fa-envelope\"></i>\n                            </span>\n                        </p>\n                    </div> \n                    <div className=\"field\">\n                        <p className=\"control has-icons-left\">\n                        \n                            <input className=\"input is-small\" ref={register()} name=\"disabilities\" type=\"text\" placeholder=\"Disabilities\"  />\n                            <span className=\"icon is-small is-left\">\n                            <i className=\"fas fa-envelope\"></i>\n                            </span>\n                        </p>\n                    </div> \n                </div> \n            </div>  \n            \n        <div className=\"field is-horizontal\">\n            <div className=\"field-body\">\n\n                <div className=\"field\">\n                    <p className=\"control has-icons-left\">\n                    \n                        <input className=\"input is-small\" ref={register()} name=\"allergies\" type=\"text\" placeholder=\"Allergies\"  />\n                        <span className=\"icon is-small is-left\">\n                        <i className=\"fas fa-envelope\"></i>\n                        </span>\n                    </p>\n                </div> \n                <div className=\"field\">\n                    <p className=\"control has-icons-left\">\n                    \n                        <input className=\"input is-small\" ref={register()} name=\"comorbidities\" type=\"text\" placeholder=\"Co-mobidities\"  />\n                        <span className=\"icon is-small is-left\">\n                        <i className=\"fas fa-envelope\"></i>\n                        </span>\n                    </p>\n                </div> \n            </div>\n        </div>\n            \n            <div className=\"field\">\n                <p className=\"control has-icons-left\">\n                    <input className=\"input is-small\" ref={register()} name=\"specificDetails\" type=\"text\" placeholder=\"Specific Details about patient\"  />\n                    <span className=\"icon is-small is-left\">\n                    <i className=\"fas fa-envelope\"></i>\n                    </span>\n                </p>\n            </div> \n            <p className=\" is-small\">Next of Kin Information</p>\n        <div className=\"field is-horizontal\">\n            <div className=\"field-body\">\n                <div className=\"field\">\n                    <p className=\"control has-icons-left\">\n                        <input className=\"input is-small\" ref={register()} name=\"nok_name\" type=\"text\" placeholder=\"Next of Kin Full Name\"/>\n                        <span className=\"icon is-small is-left\">\n                        <i className=\"fas fa-clinic-medical\"></i>\n                        </span>\n                    </p>\n                </div>\n                <div className=\"field\">\n                    <p className=\"control has-icons-left\">\n                        <input className=\"input is-small\" ref={register()} name=\"nok_phoneno\" type=\"text\" placeholder=\"Next of Kin Phone Number\"/>\n                        <span className=\"icon is-small is-left\">\n                        <i className=\"fas fa-clinic-medical\"></i>\n                        </span>\n                    </p>\n                </div> \n                <div className=\"field\">\n                    <p className=\"control has-icons-left\">\n                    \n                        <input className=\"input is-small\" ref={register()} name=\"nok_email\" type=\"email\" placeholder=\"Next of Kin Email\"  />\n                        <span className=\"icon is-small is-left\">\n                        <i className=\"fas fa-envelope\"></i>\n                        </span>\n                    </p>\n                </div>\n                <div className=\"field\">\n                    <p className=\"control has-icons-left\">\n                    \n                        <input className=\"input is-small\" ref={register()} name=\"nok_relationship\" type=\"text\" placeholder=\"Next of Kin Relationship\"  />\n                        <span className=\"icon is-small is-left\">\n                        <i className=\"fas fa-envelope\"></i>\n                        </span>\n                    </p>\n                </div>\n            </div>\n        </div> \n        <div className=\"field  is-grouped mt-2\" >\n                <p className=\"control\">\n                    <button type=\"submit\" className=\"button is-success is-small\" >\n                        Save\n                    </button>\n                </p>\n                <p className=\"control\">\n                    <button type=\"reset\" className=\"button is-warning is-small\" /* onClick={(e)=>e.target.reset()} */>\n                        Reset\n                    </button>\n                </p>\n               {/*  <p className=\"control\">\n                    <button className=\"button is-danger is-small\" onClick={()=>handleDelete()} type=\"delete\">\n                       Delete\n                    </button>\n                </p> */}\n            </div>\n     \n            </form>\n            </div>\n            </div>\n            <div className={`modal ${billModal?\"is-active\":\"\"}` }>\n                <div className=\"modal-background\"></div>\n                <div className=\"modal-card modalbkgrnd z10\"  >\n                    <header className=\"modal-card-head selectadd\">\n                    <p className=\"modal-card-title redu\">Similar Client Already Exist?</p>\n                    <button className=\"delete\" aria-label=\"close\"  onClick={handlecloseModal3}></button>\n                    </header>\n                    <section className=\"modal-card-body\">\n                    {/* <StoreList standalone=\"true\" /> */}\n                     <ClientGroup  list={patList}  closeModal={handlecloseModal3} choosen={choosen} dupl ={dupl} reg={reg} depen={depen}/> \n                    </section>\n                    {/* <footer className=\"modal-card-foot\">\n                    <button className=\"button is-success\">Save changes</button>\n                    <button className=\"button\">Cancel</button>\n                    </footer> */}\n                </div>\n            </div>     \n            <div className={`modal ${billModal?\"is-active\":\"\"}` }>\n                <div className=\"modal-background\"></div>\n                <div className=\"modal-card modalbkgrnd z10\"  >\n                    <header className=\"modal-card-head selectadd\">\n                    <p className=\"modal-card-title redu\">Similar Client Already Exist?</p>\n                    <button className=\"delete\" aria-label=\"close\"  onClick={handlecloseModal3}></button>\n                    </header>\n                    <section className=\"modal-card-body\">\n                    {/* <StoreList standalone=\"true\" /> */}\n                     <ClientGroup  list={patList}  closeModal={handlecloseModal3} choosen={choosen} dupl ={dupl} reg={reg} depen={depen}/> \n                    </section>\n                    {/* <footer className=\"modal-card-foot\">\n                    <button className=\"button is-success\">Save changes</button>\n                    <button className=\"button\">Cancel</button>\n                    </footer> */}\n                </div>\n            </div>                     \n        </>\n    )\n   \n}"]},"metadata":{},"sourceType":"module"}