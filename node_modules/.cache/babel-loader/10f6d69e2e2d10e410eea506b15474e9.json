{"ast":null,"code":"var _toConsumableArray = require(\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/toConsumableArray\");\n\nvar _require = require('@feathersjs/commons'),\n    hooks = _require.hooks,\n    isPromise = _require.isPromise;\n\nvar baseHooks = require('./base');\n\nvar createHookObject = hooks.createHookObject,\n    getHooks = hooks.getHooks,\n    processHooks = hooks.processHooks,\n    enableHooks = hooks.enableHooks,\n    ACTIVATE_HOOKS = hooks.ACTIVATE_HOOKS;\n\nvar withHooks = function withHooks(_ref) {\n  var app = _ref.app,\n      service = _ref.service,\n      method = _ref.method,\n      original = _ref.original;\n  return function () {\n    var _hooks = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    var hooks = app.hookTypes.reduce(function (result, type) {\n      var value = _hooks[type] || [];\n      result[type] = Array.isArray(value) ? value : [value];\n      return result;\n    }, {});\n    return function () {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      var returnHook = args[args.length - 1] === true ? args.pop() : false; // Create the hook object that gets passed through\n\n      var hookObject = createHookObject(method, {\n        type: 'before',\n        // initial hook object type\n        arguments: args,\n        service: service,\n        app: app\n      });\n      return Promise.resolve(hookObject) // Run `before` hooks\n      .then(function (hookObject) {\n        return processHooks.call(service, baseHooks.concat(hooks.before), hookObject);\n      }) // Run the original method\n      .then(function (hookObject) {\n        // If `hookObject.result` is set, skip the original method\n        if (typeof hookObject.result !== 'undefined') {\n          return hookObject;\n        } // Otherwise, call it with arguments created from the hook object\n\n\n        var promise = new Promise(function (resolve) {\n          var func = original || service[method];\n          var args = service.methods[method].map(function (value) {\n            return hookObject[value];\n          });\n          var result = func.apply(service, args);\n\n          if (!isPromise(result)) {\n            throw new Error(\"Service method '\".concat(hookObject.method, \"' for '\").concat(hookObject.path, \"' service must return a promise\"));\n          }\n\n          resolve(result);\n        });\n        return promise.then(function (result) {\n          hookObject.result = result;\n          return hookObject;\n        }).catch(function (error) {\n          error.hook = hookObject;\n          throw error;\n        });\n      }) // Run `after` hooks\n      .then(function (hookObject) {\n        var afterHookObject = Object.assign({}, hookObject, {\n          type: 'after'\n        });\n        return processHooks.call(service, hooks.after, afterHookObject);\n      }) // Run `errors` hooks\n      .catch(function (error) {\n        var errorHookObject = Object.assign({}, error.hook, {\n          type: 'error',\n          original: error.hook,\n          error: error,\n          result: undefined\n        });\n        return processHooks.call(service, hooks.error, errorHookObject).catch(function (error) {\n          var errorHookObject = Object.assign({}, error.hook, {\n            error: error,\n            result: undefined\n          });\n          return errorHookObject;\n        });\n      }) // Run `finally` hooks\n      .then(function (hookObject) {\n        return processHooks.call(service, hooks.finally, hookObject).catch(function (error) {\n          var errorHookObject = Object.assign({}, error.hook, {\n            error: error,\n            result: undefined\n          });\n          return errorHookObject;\n        });\n      }) // Resolve with a result or reject with an error\n      .then(function (hookObject) {\n        if (typeof hookObject.error !== 'undefined' && typeof hookObject.result === 'undefined') {\n          return Promise.reject(returnHook ? hookObject : hookObject.error);\n        } else {\n          return returnHook ? hookObject : hookObject.result;\n        }\n      });\n    };\n  };\n}; // A service mixin that adds `service.hooks()` method and functionality\n\n\nvar hookMixin = exports.hookMixin = function hookMixin(service) {\n  if (typeof service.hooks === 'function') {\n    return;\n  }\n\n  service.methods = Object.getOwnPropertyNames(service).filter(function (key) {\n    return typeof service[key] === 'function' && service[key][ACTIVATE_HOOKS];\n  }).reduce(function (result, methodName) {\n    result[methodName] = service[methodName][ACTIVATE_HOOKS];\n    return result;\n  }, service.methods || {});\n  Object.assign(service.methods, {\n    find: ['params'],\n    get: ['id', 'params'],\n    create: ['data', 'params'],\n    update: ['id', 'data', 'params'],\n    patch: ['id', 'data', 'params'],\n    remove: ['id', 'params']\n  });\n  var app = this;\n  var methodNames = Object.keys(service.methods); // Assemble the mixin object that contains all \"hooked\" service methods\n\n  var mixin = methodNames.reduce(function (mixin, method) {\n    if (typeof service[method] !== 'function') {\n      return mixin;\n    }\n\n    mixin[method] = function () {\n      var service = this;\n      var args = Array.from(arguments);\n\n      var original = service._super.bind(service);\n\n      return withHooks({\n        app: app,\n        service: service,\n        method: method,\n        original: original\n      })({\n        before: getHooks(app, service, 'before', method),\n        after: getHooks(app, service, 'after', method, true),\n        error: getHooks(app, service, 'error', method, true),\n        finally: getHooks(app, service, 'finally', method, true)\n      }).apply(void 0, _toConsumableArray(args));\n    };\n\n    return mixin;\n  }, {}); // Add .hooks method and properties to the service\n\n  enableHooks(service, methodNames, app.hookTypes);\n  service.mixin(mixin);\n};\n\nmodule.exports = function () {\n  return function (app) {\n    // We store a reference of all supported hook types on the app\n    // in case someone needs it\n    Object.assign(app, {\n      hookTypes: ['before', 'after', 'error', 'finally']\n    }); // Add functionality for hooks to be registered as app.hooks\n\n    enableHooks(app, app.methods, app.hookTypes);\n    app.mixins.push(hookMixin);\n  };\n};\n\nmodule.exports.withHooks = withHooks;\nmodule.exports.ACTIVATE_HOOKS = ACTIVATE_HOOKS;\n\nmodule.exports.activateHooks = function activateHooks(args) {\n  return function (fn) {\n    Object.defineProperty(fn, ACTIVATE_HOOKS, {\n      value: args\n    });\n    return fn;\n  };\n};","map":{"version":3,"sources":["/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/@feathersjs/feathers/lib/hooks/index.js"],"names":["require","hooks","isPromise","baseHooks","createHookObject","getHooks","processHooks","enableHooks","ACTIVATE_HOOKS","withHooks","app","service","method","original","_hooks","hookTypes","reduce","result","type","value","Array","isArray","args","returnHook","length","pop","hookObject","arguments","Promise","resolve","then","call","concat","before","promise","func","methods","map","apply","Error","path","catch","error","hook","afterHookObject","Object","assign","after","errorHookObject","undefined","finally","reject","hookMixin","exports","getOwnPropertyNames","filter","key","methodName","find","get","create","update","patch","remove","methodNames","keys","mixin","from","_super","bind","module","mixins","push","activateHooks","fn","defineProperty"],"mappings":"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","sourcesContent":["const { hooks, isPromise } = require('@feathersjs/commons');\nconst baseHooks = require('./base');\n\nconst {\n  createHookObject,\n  getHooks,\n  processHooks,\n  enableHooks,\n  ACTIVATE_HOOKS\n} = hooks;\n\nconst withHooks = function withHooks ({\n  app,\n  service,\n  method,\n  original\n}) {\n  return (_hooks = {}) => {\n    const hooks = app.hookTypes.reduce((result, type) => {\n      const value = _hooks[type] || [];\n\n      result[type] = Array.isArray(value) ? value : [ value ];\n\n      return result;\n    }, {});\n\n    return function (...args) {\n      const returnHook = args[args.length - 1] === true\n        ? args.pop() : false;\n\n      // Create the hook object that gets passed through\n      const hookObject = createHookObject(method, {\n        type: 'before', // initial hook object type\n        arguments: args,\n        service,\n        app\n      });\n\n      return Promise.resolve(hookObject)\n\n        // Run `before` hooks\n        .then(hookObject => {\n          return processHooks.call(service, baseHooks.concat(hooks.before), hookObject);\n        })\n\n        // Run the original method\n        .then(hookObject => {\n          // If `hookObject.result` is set, skip the original method\n          if (typeof hookObject.result !== 'undefined') {\n            return hookObject;\n          }\n\n          // Otherwise, call it with arguments created from the hook object\n          const promise = new Promise(resolve => {\n            const func = original || service[method];\n            const args = service.methods[method].map((value) => hookObject[value]);\n            const result = func.apply(service, args);\n\n            if (!isPromise(result)) {\n              throw new Error(`Service method '${hookObject.method}' for '${hookObject.path}' service must return a promise`);\n            }\n\n            resolve(result);\n          });\n\n          return promise\n            .then(result => {\n              hookObject.result = result;\n              return hookObject;\n            })\n            .catch(error => {\n              error.hook = hookObject;\n              throw error;\n            });\n        })\n\n        // Run `after` hooks\n        .then(hookObject => {\n          const afterHookObject = Object.assign({}, hookObject, {\n            type: 'after'\n          });\n\n          return processHooks.call(service, hooks.after, afterHookObject);\n        })\n\n        // Run `errors` hooks\n        .catch(error => {\n          const errorHookObject = Object.assign({}, error.hook, {\n            type: 'error',\n            original: error.hook,\n            error,\n            result: undefined\n          });\n\n          return processHooks.call(service, hooks.error, errorHookObject)\n            .catch(error => {\n              const errorHookObject = Object.assign({}, error.hook, {\n                error,\n                result: undefined\n              });\n\n              return errorHookObject;\n            });\n        })\n\n        // Run `finally` hooks\n        .then(hookObject => {\n          return processHooks.call(service, hooks.finally, hookObject)\n            .catch(error => {\n              const errorHookObject = Object.assign({}, error.hook, {\n                error,\n                result: undefined\n              });\n\n              return errorHookObject;\n            });\n        })\n\n        // Resolve with a result or reject with an error\n        .then(hookObject => {\n          if (typeof hookObject.error !== 'undefined' && typeof hookObject.result === 'undefined') {\n            return Promise.reject(returnHook ? hookObject : hookObject.error);\n          } else {\n            return returnHook ? hookObject : hookObject.result;\n          }\n        });\n    };\n  };\n};\n\n// A service mixin that adds `service.hooks()` method and functionality\nconst hookMixin = exports.hookMixin = function hookMixin (service) {\n  if (typeof service.hooks === 'function') {\n    return;\n  }\n\n  service.methods = Object.getOwnPropertyNames(service)\n    .filter(key => typeof service[key] === 'function' && service[key][ACTIVATE_HOOKS])\n    .reduce((result, methodName) => {\n      result[methodName] = service[methodName][ACTIVATE_HOOKS];\n      return result;\n    }, service.methods || {});\n\n  Object.assign(service.methods, {\n    find: ['params'],\n    get: ['id', 'params'],\n    create: ['data', 'params'],\n    update: ['id', 'data', 'params'],\n    patch: ['id', 'data', 'params'],\n    remove: ['id', 'params']\n  });\n\n  const app = this;\n  const methodNames = Object.keys(service.methods);\n  // Assemble the mixin object that contains all \"hooked\" service methods\n  const mixin = methodNames.reduce((mixin, method) => {\n    if (typeof service[method] !== 'function') {\n      return mixin;\n    }\n\n    mixin[method] = function () {\n      const service = this;\n      const args = Array.from(arguments);\n      const original = service._super.bind(service);\n\n      return withHooks({\n        app,\n        service,\n        method,\n        original\n      })({\n        before: getHooks(app, service, 'before', method),\n        after: getHooks(app, service, 'after', method, true),\n        error: getHooks(app, service, 'error', method, true),\n        finally: getHooks(app, service, 'finally', method, true)\n      })(...args);\n    };\n\n    return mixin;\n  }, {});\n\n  // Add .hooks method and properties to the service\n  enableHooks(service, methodNames, app.hookTypes);\n\n  service.mixin(mixin);\n};\n\nmodule.exports = function () {\n  return function (app) {\n    // We store a reference of all supported hook types on the app\n    // in case someone needs it\n    Object.assign(app, {\n      hookTypes: ['before', 'after', 'error', 'finally']\n    });\n\n    // Add functionality for hooks to be registered as app.hooks\n    enableHooks(app, app.methods, app.hookTypes);\n\n    app.mixins.push(hookMixin);\n  };\n};\n\nmodule.exports.withHooks = withHooks;\n\nmodule.exports.ACTIVATE_HOOKS = ACTIVATE_HOOKS;\n\nmodule.exports.activateHooks = function activateHooks (args) {\n  return fn => {\n    Object.defineProperty(fn, ACTIVATE_HOOKS, { value: args });\n    return fn;\n  };\n};\n"]},"metadata":{},"sourceType":"script"}