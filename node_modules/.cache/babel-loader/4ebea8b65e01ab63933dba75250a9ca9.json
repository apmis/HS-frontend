{"ast":null,"code":"import _defineProperty from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import _regeneratorRuntime from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _slicedToArray from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";/* eslint-disable */import React,{useState,useContext,useEffect,useRef}from'react';import client from'../../feathers';import{DebounceInput}from'react-debounce-input';import{useForm}from\"react-hook-form\";//import {useHistory} from 'react-router-dom'\nimport{UserContext,ObjectContext}from'../../context';import{toast}from'bulma-toast';import{ProductCreate}from'./Products';var random=require('random-string-generator');// eslint-disable-next-line\nvar searchfacility={};export default function ProductEntry(){var _useContext=useContext(ObjectContext),state=_useContext.state;//,setState\n// eslint-disable-next-line\nvar _useState=useState(),_useState2=_slicedToArray(_useState,2),selectedProductEntry=_useState2[0],setSelectedProductEntry=_useState2[1];//const [showState,setShowState]=useState() //create|modify|detail\nreturn/*#__PURE__*/_jsx(\"section\",{className:\"section remPadTop\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"columns \",children:[/*#__PURE__*/_jsx(\"div\",{className:\"column is-6 \",children:/*#__PURE__*/_jsx(ProductExitList,{})}),/*#__PURE__*/_jsxs(\"div\",{className:\"column is-6 \",children:[state.ProductExitModule.show==='create'&&/*#__PURE__*/_jsx(ProductExitCreate,{}),state.ProductExitModule.show==='detail'&&/*#__PURE__*/_jsx(ProductExitDetail,{}),state.ProductExitModule.show==='modify'&&/*#__PURE__*/_jsx(ProductExitModify,{ProductEntry:selectedProductEntry})]})]})});}export function ProductExitCreate(){// const { register, handleSubmit,setValue} = useForm(); //, watch, errors, reset \nvar _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),success=_useState6[0],setSuccess=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),message=_useState8[0],setMessage=_useState8[1];// eslint-disable-next-line\nvar _useState9=useState(),_useState10=_slicedToArray(_useState9,2),facility=_useState10[0],setFacility=_useState10[1];var ProductEntryServ=client.service('productentry');//const history = useHistory()\nvar _useContext2=useContext(UserContext),user=_useContext2.user;//,setUser\n// eslint-disable-next-line\nvar _useState11=useState(),_useState12=_slicedToArray(_useState11,2),currentUser=_useState12[0],setCurrentUser=_useState12[1];var _useState13=useState(\"Sales\"),_useState14=_slicedToArray(_useState13,2),type=_useState14[0],setType=_useState14[1];var _useState15=useState(\"\"),_useState16=_slicedToArray(_useState15,2),documentNo=_useState16[0],setDocumentNo=_useState16[1];var _useState17=useState(0),_useState18=_slicedToArray(_useState17,2),totalamount=_useState18[0],setTotalamount=_useState18[1];var _useState19=useState(null),_useState20=_slicedToArray(_useState19,2),qamount=_useState20[0],setQAmount=_useState20[1];var _useState21=useState(\"\"),_useState22=_slicedToArray(_useState21,2),productId=_useState22[0],setProductId=_useState22[1];var _useState23=useState(\"\"),_useState24=_slicedToArray(_useState23,2),source=_useState24[0],setSource=_useState24[1];var _useState25=useState(\"\"),_useState26=_slicedToArray(_useState25,2),date=_useState26[0],setDate=_useState26[1];var _useState27=useState(\"\"),_useState28=_slicedToArray(_useState27,2),name=_useState28[0],setName=_useState28[1];var _useState29=useState(\"\"),_useState30=_slicedToArray(_useState29,2),inventoryId=_useState30[0],setInventoryId=_useState30[1];var _useState31=useState(\"\"),_useState32=_slicedToArray(_useState31,2),baseunit=_useState32[0],setBaseunit=_useState32[1];var _useState33=useState(\"\"),_useState34=_slicedToArray(_useState33,2),quantity=_useState34[0],setQuantity=_useState34[1];var _useState35=useState(\"\"),_useState36=_slicedToArray(_useState35,2),sellingprice=_useState36[0],setSellingPrice=_useState36[1];var _useState37=useState(0),_useState38=_slicedToArray(_useState37,2),costprice=_useState38[0],setCostprice=_useState38[1];var _useState39=useState(\"\"),_useState40=_slicedToArray(_useState39,2),invquantity=_useState40[0],setInvQuantity=_useState40[1];var _useState41=useState(0),_useState42=_slicedToArray(_useState41,2),calcamount=_useState42[0],setCalcAmount=_useState42[1];var _useState43=useState([]),_useState44=_slicedToArray(_useState43,2),productItem=_useState44[0],setProductItem=_useState44[1];var _useState45=useState(\"\"),_useState46=_slicedToArray(_useState45,2),billingId=_useState46[0],setBilllingId=_useState46[1];var _useState47=useState(true),_useState48=_slicedToArray(_useState47,2),changeAmount=_useState48[0],setChangeAmount=_useState48[1];var _useContext3=useContext(ObjectContext),state=_useContext3.state;var inputEl=useRef(0);var calcamount1;var hidestatus;var medication=state.financeModule.selectedFinance;console.log(\"medication\",medication);var _useState49=useState({productitems:[],date:date,documentNo:documentNo,type:type,totalamount:totalamount,source:source}),_useState50=_slicedToArray(_useState49,2),productEntry=_useState50[0],setProductEntry=_useState50[1];var productItemI={productId:productId,name:name,quantity:quantity,sellingprice:sellingprice,amount:calcamount,//qamount||\nbaseunit:baseunit,costprice:costprice,billingId:billingId};// consider batchformat{batchno,expirydate,qtty,baseunit}\n//consider baseunoit conversions\nvar getSearchfacility=function getSearchfacility(obj){setProductId(obj.productId);setName(obj.name);setBaseunit(obj.baseunit);setInventoryId(obj.inventoryId);setSellingPrice(obj.sellingprice);setInvQuantity(obj.quantity);setCostprice(obj.costprice);setBilllingId(obj.billingId);if(!obj){//\"clear stuff\"\nsetProductId(\"\");setName(\"\");setBaseunit(\"\");setInventoryId(\"\");setSellingPrice(\"\");setInvQuantity(\"\");setQAmount(null);setCostprice(\"\");// setCalcAmount(null)\n}/*  setValue(\"facility\", obj._id,  {\n            shouldValidate: true,\n            shouldDirty: true\n        }) */};useEffect(function(){setCurrentUser(user);//console.log(currentUser)\nreturn function(){};},[user]);var handleUpdateTotal=function handleUpdateTotal(){setTotalamount(function(prevtotal){return Number(prevtotal)+Number(calcamount);});};var handleChangeType=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return setType(e.target.value);case 2:case\"end\":return _context.stop();}}},_callee);}));return function handleChangeType(_x){return _ref.apply(this,arguments);};}();var handleAmount=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return setQAmount(null);case 2:case\"end\":return _context2.stop();}}},_callee2);}));return function handleAmount(){return _ref2.apply(this,arguments);};}();var handleClickProd=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:console.log(\"amount: \",productItemI.amount);console.log(\"qamount: \",qamount);console.log(\"calcamount: \",calcamount);if(!(quantity===0||quantity===\"\"||productId===\"\")){_context3.next=6;break;}toast({message:'You need to choose a product and quantity to proceed',type:'is-danger',dismissible:true,pauseOnHover:true});return _context3.abrupt(\"return\");case 6:_context3.next=8;return setSuccess(false);case 8:_context3.next=10;return setProductItem(function(prevProd){return prevProd.concat(productItemI);});case 10:handleUpdateTotal();setName(\"\");setBaseunit(\"\");setQuantity(\"\");setInventoryId(\"\");setSellingPrice(\"\");setInvQuantity(\"\");handleAmount();// setCalcAmount(null)\n_context3.next=20;return setSuccess(true);case 20:/*  console.log(success)\n       console.log(qamount)\n       console.log(productItem) */setChangeAmount(true);case 21:case\"end\":return _context3.stop();}}},_callee3);}));return function handleClickProd(){return _ref3.apply(this,arguments);};}();//check user for facility or get list of facility  \n/*  useEffect(()=>{\n        //setFacility(user.activeProductEntry.FacilityId)//\n      if (!user.stacker){\n          console.log(currentUser)\n           /* setValue(\"facility\", user.currentEmployee.facilityDetail._id,  {\n            shouldValidate: true,\n            shouldDirty: true\n        })  \n\n      }\n    }) */var handleQtty=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(e){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(!(invquantity<e.target.value)){_context4.next=3;break;}toast({message:'You can not sell more quantity than exist in inventory ',type:'is-danger',dismissible:true,pauseOnHover:true});return _context4.abrupt(\"return\");case 3:setQuantity(e.target.value);calcamount1=quantity*sellingprice;_context4.next=7;return setCalcAmount(calcamount1);case 7:console.log(calcamount);case 8:case\"end\":return _context4.stop();}}},_callee4);}));return function handleQtty(_x2){return _ref4.apply(this,arguments);};}();useEffect(function(){setProductEntry({date:date,documentNo:documentNo,type:type,totalamount:totalamount,source:source});setCalcAmount(quantity*sellingprice);return function(){};},[date]);var resetform=function resetform(){setType(\"Sales\");setDocumentNo(\"\");setTotalamount(\"\");setProductId(\"\");setSource(\"\");setDate(\"\");setName(\"\");setBaseunit();setCostprice();setProductItem([]);};var onSubmit=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(e){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:e.preventDefault();setMessage(\"\");setError(false);setSuccess(false);/* await setProductEntry({\n            \n            date,\n            documentNo,\n            type,\n            totalamount,\n            source,\n        }) */productEntry.date=date;productEntry.documentNo=documentNo;productEntry.type=type;productEntry.totalamount=totalamount;productEntry.source=source;productEntry.productitems=productItem;productEntry.createdby=user._id;productEntry.transactioncategory=\"debit\";console.log(\"b4 facility\",productEntry);if(!user.currentEmployee){_context5.next=17;break;}productEntry.facility=user.currentEmployee.facilityDetail._id;// or from facility dropdown\n_context5.next=19;break;case 17:toast({message:'You can not remove inventory from any organization',type:'is-danger',dismissible:true,pauseOnHover:true});return _context5.abrupt(\"return\");case 19:if(!state.StoreModule.selectedStore._id){_context5.next=23;break;}productEntry.storeId=state.StoreModule.selectedStore._id;_context5.next=25;break;case 23:toast({message:'You need to select a store before removing inventory',type:'is-danger',dismissible:true,pauseOnHover:true});return _context5.abrupt(\"return\");case 25:console.log(\"b4 create\",productEntry);ProductEntryServ.create(productEntry).then(function(res){//console.log(JSON.stringify(res))\nresetform();/*  setMessage(\"Created ProductEntry successfully\") */setSuccess(true);toast({message:'ProductExit created succesfully',type:'is-success',dismissible:true,pauseOnHover:true});setSuccess(false);setProductItem([]);var today=new Date().toLocaleString();setDate(today);var invoiceNo=random(6,'uppernumeric');setDocumentNo(invoiceNo);setType(\"Sales\");}).catch(function(err){toast({message:'Error creating ProductExit '+err,type:'is-danger',dismissible:true,pauseOnHover:true});});case 27:case\"end\":return _context5.stop();}}},_callee5);}));return function onSubmit(_x3){return _ref5.apply(this,arguments);};}();var handleChangeAmount=function handleChangeAmount(){setChangeAmount(function(rev){return!rev;});};// console.log(\"i am rendering\")\nuseEffect(function(){var today=new Date().toLocaleString();//console.log(today)\nsetDate(today);var invoiceNo=random(6,'uppernumeric');setDocumentNo(invoiceNo);return function(){};},[]);useEffect(function(){calcamount1=quantity*sellingprice;setCalcAmount(calcamount1);console.log(calcamount);setChangeAmount(true);return function(){};},[quantity]);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"card card-overflow\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsx(\"p\",{className:\"card-header-title\",children:\"Point of Sale: Sales, Dispense, Audit, Transfer out\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-content \",children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:onSubmit,children:[\" \",/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field-body\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsx(\"div\",{className:\"control\",children:/*#__PURE__*/_jsx(\"div\",{className:\"select is-small\",children:/*#__PURE__*/_jsxs(\"select\",{name:\"type\",value:type,onChange:handleChangeType,className:\"selectadd\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Choose Type \"}),/*#__PURE__*/_jsx(\"option\",{value:\"Sales\",children:\"Sales \"}),/*#__PURE__*/_jsx(\"option\",{value:\"In-house\",children:\"In-House \"}),/*#__PURE__*/_jsx(\"option\",{value:\"Dispense\",children:\"Dispense\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Audit\",children:\"Audit\"})]})})})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left has-icons-right\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\"/* ref={register({ required: true })} */,value:source,name:\"client\",type:\"text\",onChange:function onChange(e){return setSource(e.target.value);},placeholder:\"Client\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-hospital\"})})]})})]})}),\" \",/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field-body\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left has-icons-right\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\"/* ref={register({ required: true })} */,value:date,name:\"date\",type:\"text\",onChange:function onChange(e){return setDate(e.target.value);},placeholder:\"Date\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-map-signs\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\"/* ref={register} */,name:\"documentNo\",value:documentNo,type:\"text\",onChange:function onChange(e){return setDocumentNo(e.target.value);},placeholder:\" Invoice Number\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-phone-alt\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\"/* ref={register({ required: true })} */,value:totalamount,name:\"totalamount\",type:\"text\",onChange:function onChange(e){return setTotalamount(e.target.value);},placeholder:\" Total Amount\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-coins\"})})]})})]})})]}),/*#__PURE__*/_jsx(\"label\",{className:\"label is-small\",children:\"Add Product Items:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsx(\"div\",{className:\"field-body\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field is-expanded\"/* style={ !user.stacker?{display:\"none\"}:{}} */,children:[/*#__PURE__*/_jsx(InventorySearch,{getSearchfacility:getSearchfacility,clear:success}),/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left \",style:{display:\"none\"},children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\"/* ref={register ({ required: true }) }  */ /* add array no */,value:productId,name:\"productId\",type:\"text\",onChange:function onChange(e){return setProductId(e.target.value);},placeholder:\"Product Id\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas  fa-map-marker-alt\"})})]}),sellingprice&&\"N\",sellingprice,\" \",sellingprice&&\"per\",\"  \",baseunit,\" \",invquantity,\" \",sellingprice&&\"remaining\"]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field-body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"field\",style:{width:\"40%\"},children:[/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\"/* ref={register({ required: true })} */,name:\"quantity\",value:quantity,type:\"text\",onChange:function onChange(e){return handleQtty(e);},placeholder:\"Quantity\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-hashtag\"})})]}),/*#__PURE__*/_jsx(\"label\",{children:baseunit})]}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsx(\"label\",{children:\"Amount:\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",style:{width:\"40%\"},children:[/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left \"/* style={{display:\"none\"}} */,children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",name:\"qamount\",disabled:changeAmount,value:calcamount,type:\"text\",onChange:/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(e){return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return setCalcAmount(e.target.value);case 2:return _context6.abrupt(\"return\",_context6.sent);case 3:case\"end\":return _context6.stop();}}},_callee6);}));return function(_x4){return _ref6.apply(this,arguments);};}(),placeholder:\"Amount\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-dollar-sign\"})})]}),/*#__PURE__*/_jsx(\"button\",{className:\"button is-small is-success btnheight\",onClick:handleChangeAmount,children:\"Adjust\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsx(\"p\",{className:\"control\",children:/*#__PURE__*/_jsx(\"button\",{className:\"button is-info is-small  is-pulled-right\",children:/*#__PURE__*/_jsx(\"span\",{className:\"is-small\",onClick:handleClickProd,children:\" +\"})})})})]})}),productItem.length>0&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Product Items:\"}),/*#__PURE__*/_jsxs(\"table\",{className:\"table is-striped  is-hoverable is-fullwidth is-scrollable \",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Serial No\",children:\"S/No\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Type\",children:\"Name\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Type\",children:\"Quanitity\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Document No\",children:\"Unit\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Cost Price\",children:\"Selling Price\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Cost Price\",children:\"Amount\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Actions\",children:\"Actions\"})})]})}),/*#__PURE__*/_jsx(\"tfoot\",{}),/*#__PURE__*/_jsx(\"tbody\",{children:productItem.map(function(ProductEntry,i){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:i+1}),/*#__PURE__*/_jsx(\"td\",{children:ProductEntry.name}),/*#__PURE__*/_jsx(\"th\",{children:ProductEntry.quantity}),/*#__PURE__*/_jsx(\"td\",{children:ProductEntry.baseunit}),/*#__PURE__*/_jsx(\"td\",{children:ProductEntry.sellingprice}),/*#__PURE__*/_jsx(\"td\",{children:ProductEntry.amount}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"showAction\",children:\"x\"})})]},i);})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field mt-2 is-grouped\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"control\",children:/*#__PURE__*/_jsx(\"button\",{className:\"button is-success is-small\",disabled:!productItem.length>0,onClick:onSubmit,children:\"Sell\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"control\",children:/*#__PURE__*/_jsx(\"button\",{className:\"button is-warning is-small\",disabled:!productItem.length>0/* onClick={onSubmit} */,children:\"Clear\"})})]})]})]})]})});}export function ProductExitList(){// const { register, handleSubmit, watch, errors } = useForm();\n// eslint-disable-next-line\nvar _useState51=useState(false),_useState52=_slicedToArray(_useState51,2),error=_useState52[0],setError=_useState52[1];// eslint-disable-next-line\nvar _useState53=useState(false),_useState54=_slicedToArray(_useState53,2),success=_useState54[0],setSuccess=_useState54[1];// eslint-disable-next-line\nvar _useState55=useState(\"\"),_useState56=_slicedToArray(_useState55,2),message=_useState56[0],setMessage=_useState56[1];var ProductEntryServ=client.service('productentry');//const history = useHistory()\n// const {user,setUser} = useContext(UserContext)\nvar _useState57=useState([]),_useState58=_slicedToArray(_useState57,2),facilities=_useState58[0],setFacilities=_useState58[1];// eslint-disable-next-line\nvar _useState59=useState(),_useState60=_slicedToArray(_useState59,2),selectedProductEntry=_useState60[0],setSelectedProductEntry=_useState60[1];//\n// eslint-disable-next-line\nvar _useContext4=useContext(ObjectContext),state=_useContext4.state,setState=_useContext4.setState;// eslint-disable-next-line\nvar _useContext5=useContext(UserContext),user=_useContext5.user,setUser=_useContext5.setUser;var handleCreateNew=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(){var newProductExitModule;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:newProductExitModule={selectedProductEntry:{},show:'create'};_context7.next=3;return setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{ProductExitModule:newProductExitModule});});case 3:case\"end\":return _context7.stop();}}},_callee7);}));return function handleCreateNew(){return _ref7.apply(this,arguments);};}();var handleRow=/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(ProductEntry){var newProductExitModule;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_context8.next=2;return setSelectedProductEntry(ProductEntry);case 2:newProductExitModule={selectedProductEntry:ProductEntry,show:'detail'};_context8.next=5;return setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{ProductExitModule:newProductExitModule});});case 5:case\"end\":return _context8.stop();}}},_callee8);}));return function handleRow(_x5){return _ref8.apply(this,arguments);};}();var handleSearch=function handleSearch(val){var _query;var field='name';console.log(val);ProductEntryServ.find({query:(_query={},_defineProperty(_query,field,{$regex:val,$options:'i'}),_defineProperty(_query,\"transactioncategory\",\"debit\"),_defineProperty(_query,\"storeId\",state.StoreModule.selectedStore._id),_defineProperty(_query,\"facility\",user.currentEmployee.facilityDetail._id||\"\"),_defineProperty(_query,\"$limit\",10),_defineProperty(_query,\"$sort\",{createdAt:-1}),_query)}).then(function(res){console.log(res);setFacilities(res.data);setMessage(\" ProductEntry  fetched successfully\");setSuccess(true);}).catch(function(err){console.log(err);setMessage(\"Error fetching ProductEntry, probable network issues \"+err);setError(true);});};var getFacilities=/*#__PURE__*/function(){var _ref9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(){var findProductEntry,_findProductEntry;return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:if(!user.currentEmployee){_context9.next=8;break;}_context9.next=3;return ProductEntryServ.find({query:{transactioncategory:\"debit\",facility:user.currentEmployee.facilityDetail._id,storeId:state.StoreModule.selectedStore._id,$limit:20,$sort:{createdAt:-1}}});case 3:findProductEntry=_context9.sent;_context9.next=6;return setFacilities(findProductEntry.data);case 6:_context9.next=14;break;case 8:if(!user.stacker){_context9.next=14;break;}_context9.next=11;return ProductEntryServ.find({query:{transactioncategory:\"debit\",$limit:20,$sort:{createdAt:-1}}});case 11:_findProductEntry=_context9.sent;_context9.next=14;return setFacilities(_findProductEntry.data);case 14:case\"end\":return _context9.stop();}}},_callee9);}));return function getFacilities(){return _ref9.apply(this,arguments);};}();useEffect(function(){if(!state.StoreModule.selectedStore){toast({message:'kindly select a store',type:'is-danger',dismissible:true,pauseOnHover:true});return;getFacilities();}else{/* const localUser= localStorage.getItem(\"user\")\n                    const user1=JSON.parse(localUser)\n                    console.log(localUser)\n                    console.log(user1)\n                    fetchUser(user1)\n                    console.log(user)\n                    getFacilities(user) */}ProductEntryServ.on('created',function(obj){return getFacilities();});ProductEntryServ.on('updated',function(obj){return getFacilities();});ProductEntryServ.on('patched',function(obj){return getFacilities();});ProductEntryServ.on('removed',function(obj){return getFacilities();});return function(){};},[]);useEffect(function(){getFacilities();console.log(\"store changed\");return function(){};},[state.StoreModule.selectedStore]);//todo: pagination and vertical scroll bar\nreturn/*#__PURE__*/_jsx(_Fragment,{children:state.StoreModule.selectedStore?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"level\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"level-left\",children:/*#__PURE__*/_jsx(\"div\",{className:\"level-item\",children:/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left  \",children:[/*#__PURE__*/_jsx(DebounceInput,{className:\"input is-small \",type:\"text\",placeholder:\"Search ProductEntry\",minLength:3,debounceTimeout:400,onChange:function onChange(e){return handleSearch(e.target.value);}}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-search\"})})]})})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"level-item\",children:[\" \",/*#__PURE__*/_jsx(\"span\",{className:\"is-size-6 has-text-weight-medium\",children:\"Product Exits \"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"level-right\",children:/*#__PURE__*/_jsx(\"div\",{className:\"level-item\",children:/*#__PURE__*/_jsx(\"div\",{className:\"level-item\",children:/*#__PURE__*/_jsx(\"div\",{className:\"button is-success is-small\",onClick:handleCreateNew,children:\"New\"})})})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"table-container pullup \",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table is-striped is-narrow is-hoverable is-fullwidth is-scrollable \",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Serial No\",children:\"S/No\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Date\",children:\"Date\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Type\",children:\"Type\"})}),/*#__PURE__*/_jsx(\"th\",{children:\"Client\"}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Document No\",children:\"Document No\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Total Amount\",children:\"Total Amount\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Enteredby\",children:\"Entered By\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Actions\",children:\"Actions\"})})]})}),/*#__PURE__*/_jsx(\"tfoot\",{}),/*#__PURE__*/_jsx(\"tbody\",{children:facilities.map(function(ProductEntry,i){return/*#__PURE__*/_jsxs(\"tr\",{onClick:function onClick(){return handleRow(ProductEntry);},children:[/*#__PURE__*/_jsx(\"th\",{children:i+1}),/*#__PURE__*/_jsx(\"td\",{children:ProductEntry.date}),/*#__PURE__*/_jsx(\"th\",{children:ProductEntry.type}),/*#__PURE__*/_jsx(\"td\",{children:ProductEntry.source}),/*#__PURE__*/_jsx(\"td\",{children:ProductEntry.documentNo}),/*#__PURE__*/_jsx(\"td\",{children:ProductEntry.totalamount}),/*#__PURE__*/_jsx(\"td\",{children:ProductEntry.enteredby}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"showAction\",children:\"...\"})})]},ProductEntry._id);})})]})})]}):/*#__PURE__*/_jsx(\"div\",{children:\"loading... Choose a Store\"})});}export function ProductExitDetail(){//const { register, handleSubmit, watch, setValue } = useForm(); //errors,\n// eslint-disable-next-line\nvar _useState61=useState(false),_useState62=_slicedToArray(_useState61,2),error=_useState62[0],setError=_useState62[1];//, \n//const [success, setSuccess] =useState(false)\n// eslint-disable-next-line\nvar _useState63=useState(\"\"),_useState64=_slicedToArray(_useState63,2),message=_useState64[0],setMessage=_useState64[1];//,\n//const ProductEntryServ=client.service('/ProductEntry')\n//const history = useHistory()\n//const {user,setUser} = useContext(UserContext)\nvar _useContext6=useContext(ObjectContext),state=_useContext6.state,setState=_useContext6.setState;var ProductEntry=state.ProductExitModule.selectedProductEntry;var handleEdit=/*#__PURE__*/function(){var _ref10=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee10(){var newProductExitModule;return _regeneratorRuntime.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:newProductExitModule={selectedProductEntry:ProductEntry,show:'modify'};_context10.next=3;return setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{ProductExitModule:newProductExitModule});});case 3:case\"end\":return _context10.stop();}}},_callee10);}));return function handleEdit(){return _ref10.apply(this,arguments);};}();return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"card \",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsx(\"p\",{className:\"card-header-title\",children:\"ProductEntry Details\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-content vscrollable\",children:[/*#__PURE__*/_jsx(\"table\",{children:/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"label\",{className:\"label is-small\",children:[\" \",/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-hospital\"})}),\"Type\"]})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"span\",{className:\"is-size-7 padleft\",name:\"name\",children:[\" \",ProductEntry.type,\" \"]})}),/*#__PURE__*/_jsx(\"td\",{}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"label\",{className:\"label is-small padleft\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-map-signs\"})}),\"Supplier:\"]})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"span\",{className:\"is-size-7 padleft\",name:\"ProductEntryType\",children:[ProductEntry.source,\" \"]})})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"label\",{className:\"label is-small\",children:[\" \",/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-hospital\"})}),\"Date:\"]})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"span\",{className:\"is-size-7 padleft\",name:\"name\",children:[\" \",ProductEntry.date,\" \"]})}),/*#__PURE__*/_jsx(\"td\",{}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"label\",{className:\"label is-small padleft\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-map-signs\"})}),\"Invoice No:\"]})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"span\",{className:\"is-size-7 padleft\",name:\"ProductEntryType\",children:[ProductEntry.documentNo,\" \"]})})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"label\",{className:\"label is-small\",children:[\" \",/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-hospital\"})}),\"Total Amount:\"]})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"span\",{className:\"is-size-7 padleft\",name:\"name\",children:[\" \",ProductEntry.totalamount,\" \"]})})]})]})}),/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 mt-2\",children:\"Product Items:\"}),/*#__PURE__*/_jsxs(\"table\",{className:\"table is-striped  is-hoverable is-fullwidth is-scrollable \",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Serial No\",children:\"S/No\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Type\",children:\"Name\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Type\",children:\"Quanitity\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Document No\",children:\"Unit\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Selling Price\",children:\"Selling Price\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Amount\",children:\"Amount\"})})]})}),/*#__PURE__*/_jsx(\"tfoot\",{}),/*#__PURE__*/_jsx(\"tbody\",{children:ProductEntry.productitems.map(function(ProductEntry,i){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:i+1}),/*#__PURE__*/_jsx(\"td\",{children:ProductEntry.name}),/*#__PURE__*/_jsx(\"th\",{children:ProductEntry.quantity}),/*#__PURE__*/_jsx(\"td\",{children:ProductEntry.baseunit}),/*#__PURE__*/_jsx(\"td\",{children:ProductEntry.sellingprice}),/*#__PURE__*/_jsx(\"td\",{children:ProductEntry.amount})]},i);})})]})]})]})});}export function ProductExitModify(){var _useForm=useForm(),register=_useForm.register,handleSubmit=_useForm.handleSubmit,setValue=_useForm.setValue,reset=_useForm.reset,errors=_useForm.errors;//watch, errors,\n// eslint-disable-next-line \nvar _useState65=useState(false),_useState66=_slicedToArray(_useState65,2),error=_useState66[0],setError=_useState66[1];// eslint-disable-next-line \nvar _useState67=useState(false),_useState68=_slicedToArray(_useState67,2),success=_useState68[0],setSuccess=_useState68[1];// eslint-disable-next-line \nvar _useState69=useState(\"\"),_useState70=_slicedToArray(_useState69,2),message=_useState70[0],setMessage=_useState70[1];// eslint-disable-next-line \nvar ProductEntryServ=client.service('productentry');//const history = useHistory()\n// eslint-disable-next-line\nvar _useContext7=useContext(UserContext),user=_useContext7.user;var _useContext8=useContext(ObjectContext),state=_useContext8.state,setState=_useContext8.setState;var ProductEntry=state.ProductExitModule.selectedProductEntry;useEffect(function(){setValue(\"name\",ProductEntry.name,{shouldValidate:true,shouldDirty:true});setValue(\"ProductEntryType\",ProductEntry.ProductEntryType,{shouldValidate:true,shouldDirty:true});/*  setValue(\"profession\", ProductEntry.profession,  {\n                shouldValidate: true,\n                shouldDirty: true\n            })\n            setValue(\"phone\", ProductEntry.phone,  {\n                shouldValidate: true,\n                shouldDirty: true\n            })\n            setValue(\"email\", ProductEntry.email,  {\n                shouldValidate: true,\n                shouldDirty: true\n            })\n            setValue(\"department\", ProductEntry.department,  {\n                shouldValidate: true,\n                shouldDirty: true\n            })\n            setValue(\"deptunit\", ProductEntry.deptunit,  {\n                shouldValidate: true,\n                shouldDirty: true\n            }) */ /*   setValue(\"ProductEntryCategory\", ProductEntry.ProductEntryCategory,  {\n                shouldValidate: true,\n                shouldDirty: true\n            }) */return function(){};});var handleCancel=/*#__PURE__*/function(){var _ref11=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee11(){var newProductExitModule;return _regeneratorRuntime.wrap(function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:newProductExitModule={selectedProductEntry:{},show:'create'};_context11.next=3;return setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{ProductExitModule:newProductExitModule});});case 3:case\"end\":return _context11.stop();}}},_callee11);}));return function handleCancel(){return _ref11.apply(this,arguments);};}();var changeState=function changeState(){var newProductExitModule={selectedProductEntry:{},show:'create'};setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{ProductExitModule:newProductExitModule});});};var handleDelete=/*#__PURE__*/function(){var _ref12=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee12(){var conf,dleteId;return _regeneratorRuntime.wrap(function _callee12$(_context12){while(1){switch(_context12.prev=_context12.next){case 0:conf=window.confirm(\"Are you sure you want to delete this data?\");dleteId=ProductEntry._id;if(conf){ProductEntryServ.remove(dleteId).then(function(res){//console.log(JSON.stringify(res))\nreset();/*  setMessage(\"Deleted ProductEntry successfully\")\n                setSuccess(true)\n                changeState()\n               setTimeout(() => {\n                setSuccess(false)\n                }, 200); */toast({message:'ProductEntry deleted succesfully',type:'is-success',dismissible:true,pauseOnHover:true});changeState();}).catch(function(err){// setMessage(\"Error deleting ProductEntry, probable network issues \"+ err )\n// setError(true)\ntoast({message:\"Error deleting ProductEntry, probable network issues or \"+err,type:'is-danger',dismissible:true,pauseOnHover:true});});}case 3:case\"end\":return _context12.stop();}}},_callee12);}));return function handleDelete(){return _ref12.apply(this,arguments);};}();/* ()=> setValue(\"firstName\", \"Bill\", , {\n            shouldValidate: true,\n            shouldDirty: true\n          })) */var onSubmit=function onSubmit(data,e){e.preventDefault();setSuccess(false);console.log(data);data.facility=ProductEntry.facility;//console.log(data);\nProductEntryServ.patch(ProductEntry._id,data).then(function(res){//console.log(JSON.stringify(res))\n// e.target.reset();\n// setMessage(\"updated ProductEntry successfully\")\ntoast({message:'ProductEntry updated succesfully',type:'is-success',dismissible:true,pauseOnHover:true});changeState();}).catch(function(err){//setMessage(\"Error creating ProductEntry, probable network issues \"+ err )\n// setError(true)\ntoast({message:\"Error updating ProductEntry, probable network issues or \"+err,type:'is-danger',dismissible:true,pauseOnHover:true});});};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"card \",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsx(\"p\",{className:\"card-header-title\",children:\"ProductEntry Details-Modify\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-content vscrollable\",children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"label\",{className:\"label is-small\",children:[\" Name\",/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left has-icons-right\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input  is-small\",ref:register({required:true}),name:\"name\",type:\"text\",placeholder:\"Name\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-hospital\"})})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"label\",{className:\"label is-small\",children:[\"ProductEntry Type\",/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left has-icons-right\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small \",ref:register({required:true}),disabled:true,name:\"ProductEntryType\",type:\"text\",placeholder:\"ProductEntry Type\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-map-signs\"})})]})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field  is-grouped mt-2\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"control\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"button is-success is-small\",onClick:handleSubmit(onSubmit),children:\"Save\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"control\",children:/*#__PURE__*/_jsx(\"button\",{className:\"button is-warning is-small\",onClick:handleCancel,children:\"Cancel\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"control\",children:/*#__PURE__*/_jsx(\"button\",{className:\"button is-danger is-small\",onClick:function onClick(){return handleDelete();},type:\"delete\",children:\"Delete\"})})]})]})]})});}export function InventorySearch(_ref13){var getSearchfacility=_ref13.getSearchfacility,clear=_ref13.clear;var productServ=client.service('inventory');var _useState71=useState([]),_useState72=_slicedToArray(_useState71,2),facilities=_useState72[0],setFacilities=_useState72[1];// eslint-disable-next-line\nvar _useState73=useState(false),_useState74=_slicedToArray(_useState73,2),searchError=_useState74[0],setSearchError=_useState74[1];// eslint-disable-next-line\nvar _useState75=useState(false),_useState76=_slicedToArray(_useState75,2),showPanel=_useState76[0],setShowPanel=_useState76[1];// eslint-disable-next-line\nvar _useState77=useState(\"\"),_useState78=_slicedToArray(_useState77,2),searchMessage=_useState78[0],setSearchMessage=_useState78[1];// eslint-disable-next-line \nvar _useState79=useState(\"\"),_useState80=_slicedToArray(_useState79,2),simpa=_useState80[0],setSimpa=_useState80[1];// eslint-disable-next-line \nvar _useState81=useState(false),_useState82=_slicedToArray(_useState81,2),chosen=_useState82[0],setChosen=_useState82[1];// eslint-disable-next-line \nvar _useState83=useState(0),_useState84=_slicedToArray(_useState83,2),count=_useState84[0],setCount=_useState84[1];var inputEl=useRef(null);var _useState85=useState(\"\"),_useState86=_slicedToArray(_useState85,2),val=_useState86[0],setVal=_useState86[1];var _useContext9=useContext(UserContext),user=_useContext9.user;var _useContext10=useContext(ObjectContext),state=_useContext10.state;var _useState87=useState(false),_useState88=_slicedToArray(_useState87,2),productModal=_useState88[0],setProductModal=_useState88[1];var handleRow=/*#__PURE__*/function(){var _ref14=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee13(obj){return _regeneratorRuntime.wrap(function _callee13$(_context13){while(1){switch(_context13.prev=_context13.next){case 0:_context13.next=2;return setChosen(true);case 2://alert(\"something is chaning\")\ngetSearchfacility(obj);_context13.next=5;return setSimpa(obj.name);case 5:// setSelectedFacility(obj)\nsetShowPanel(false);_context13.next=8;return setCount(2);case 8:case\"end\":return _context13.stop();}}},_callee13);}));return function handleRow(_x6){return _ref14.apply(this,arguments);};}();var handleBlur=/*#__PURE__*/function(){var _ref15=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee14(e){return _regeneratorRuntime.wrap(function _callee14$(_context14){while(1){switch(_context14.prev=_context14.next){case 0:if(count===2){console.log(\"stuff was chosen\");}/*  console.log(\"blur\")\n         setShowPanel(false)\n        console.log(JSON.stringify(simpa))\n        if (simpa===\"\"){\n            console.log(facilities.length)\n            setSimpa(\"abc\")\n            setSimpa(\"\")\n            setFacilities([])\n            inputEl.current.setValue=\"\"\n        }\n        console.log(facilities.length)\n        console.log(inputEl.current) */case 1:case\"end\":return _context14.stop();}}},_callee14);}));return function handleBlur(_x7){return _ref15.apply(this,arguments);};}();var handleSearch=/*#__PURE__*/function(){var _ref16=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee15(value){var field,_query2;return _regeneratorRuntime.wrap(function _callee15$(_context15){while(1){switch(_context15.prev=_context15.next){case 0:setVal(value);if(!(value===\"\")){_context15.next=5;break;}setShowPanel(false);getSearchfacility(false);return _context15.abrupt(\"return\");case 5:field='name';//field variable\nif(!(value.length>=3)){_context15.next=10;break;}productServ.find({query:(_query2={},_defineProperty(_query2,field,{$regex:value,$options:'i'}),_defineProperty(_query2,\"facility\",user.currentEmployee.facilityDetail._id),_defineProperty(_query2,\"storeId\",state.StoreModule.selectedStore._id),_defineProperty(_query2,\"$limit\",10),_defineProperty(_query2,\"$sort\",{createdAt:-1}),_query2)}).then(function(res){console.log(\"product  fetched successfully\");console.log(res.data);setFacilities(res.data);setSearchMessage(\" product  fetched successfully\");setShowPanel(true);}).catch(function(err){toast({message:'Error creating ProductEntry '+err,type:'is-danger',dismissible:true,pauseOnHover:true});});_context15.next=16;break;case 10:console.log(\"less than 3 \");console.log(val);setShowPanel(false);_context15.next=15;return setFacilities([]);case 15:console.log(facilities);case 16:case\"end\":return _context15.stop();}}},_callee15);}));return function handleSearch(_x8){return _ref16.apply(this,arguments);};}();var handleAddproduct=function handleAddproduct(){setProductModal(true);};var handlecloseModal=function handlecloseModal(){setProductModal(false);handleSearch(val);};useEffect(function(){if(clear){console.log(\"success has changed\",clear);setSimpa(\"\");}return function(){};},[clear]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsx(\"div\",{className:\"control has-icons-left  \",children:/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown \".concat(showPanel?\"is-active\":\"\"),style:{width:\"100%\"},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown-trigger\",style:{width:\"100%\"},children:[/*#__PURE__*/_jsx(DebounceInput,{className:\"input is-small  is-expanded\",type:\"text\",placeholder:\"Search Product\",value:simpa,minLength:3,debounceTimeout:400,onBlur:function onBlur(e){return handleBlur(e);},onChange:function onChange(e){return handleSearch(e.target.value);},inputRef:inputEl}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-search\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"dropdown-menu expanded\",style:{width:\"100%\"},children:/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown-content\",children:[facilities.length>0?\"\":/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown-item\"/* onClick={handleAddproduct} */,children:[\" \",/*#__PURE__*/_jsxs(\"span\",{children:[\" \",val,\" is not in your inventory\"]}),\" \"]}),facilities.map(function(facility,i){return/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown-item\",onClick:function onClick(){return handleRow(facility);},children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"span\",{children:facility.name})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{children:/*#__PURE__*/_jsx(\"strong\",{children:facility.quantity})}),/*#__PURE__*/_jsxs(\"span\",{children:[facility.baseunit,\"(s) remaining\"]}),/*#__PURE__*/_jsxs(\"span\",{className:\"padleft\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Price:\"}),\" N\",facility.sellingprice]})]})]},facility._id);})]})})]})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal \".concat(productModal?\"is-active\":\"\"),children:[/*#__PURE__*/_jsx(\"div\",{className:\"modal-background\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-card\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"modal-card-head\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"modal-card-title\",children:\"Choose Store\"}),/*#__PURE__*/_jsx(\"button\",{className:\"delete\",\"aria-label\":\"close\",onClick:handlecloseModal})]}),/*#__PURE__*/_jsx(\"section\",{className:\"modal-card-body\",children:/*#__PURE__*/_jsx(ProductCreate,{})})]})]})]});}","map":{"version":3,"sources":["/home/mfybaby/Documents/HealthStack2/HS-frontend/src/components/Laboratory/ProductExit.js"],"names":["React","useState","useContext","useEffect","useRef","client","DebounceInput","useForm","UserContext","ObjectContext","toast","ProductCreate","random","require","searchfacility","ProductEntry","state","selectedProductEntry","setSelectedProductEntry","ProductExitModule","show","ProductExitCreate","error","setError","success","setSuccess","message","setMessage","facility","setFacility","ProductEntryServ","service","user","currentUser","setCurrentUser","type","setType","documentNo","setDocumentNo","totalamount","setTotalamount","qamount","setQAmount","productId","setProductId","source","setSource","date","setDate","name","setName","inventoryId","setInventoryId","baseunit","setBaseunit","quantity","setQuantity","sellingprice","setSellingPrice","costprice","setCostprice","invquantity","setInvQuantity","calcamount","setCalcAmount","productItem","setProductItem","billingId","setBilllingId","changeAmount","setChangeAmount","inputEl","calcamount1","hidestatus","medication","financeModule","selectedFinance","console","log","productitems","productEntry","setProductEntry","productItemI","amount","getSearchfacility","obj","handleUpdateTotal","prevtotal","Number","handleChangeType","e","target","value","handleAmount","handleClickProd","dismissible","pauseOnHover","prevProd","concat","handleQtty","resetform","onSubmit","preventDefault","createdby","_id","transactioncategory","currentEmployee","facilityDetail","StoreModule","selectedStore","storeId","create","then","res","today","Date","toLocaleString","invoiceNo","catch","err","handleChangeAmount","rev","display","width","length","map","i","ProductExitList","facilities","setFacilities","setState","setUser","handleCreateNew","newProductExitModule","prevstate","handleRow","handleSearch","val","field","find","query","$regex","$options","createdAt","data","getFacilities","$limit","$sort","findProductEntry","stacker","on","enteredby","ProductExitDetail","handleEdit","ProductExitModify","register","handleSubmit","setValue","reset","errors","shouldValidate","shouldDirty","ProductEntryType","handleCancel","changeState","handleDelete","conf","window","confirm","dleteId","remove","patch","required","InventorySearch","clear","productServ","searchError","setSearchError","showPanel","setShowPanel","searchMessage","setSearchMessage","simpa","setSimpa","chosen","setChosen","count","setCount","setVal","productModal","setProductModal","handleBlur","handleAddproduct","handlecloseModal"],"mappings":"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","sourcesContent":["/* eslint-disable */\nimport React, {useState,useContext, useEffect,useRef} from 'react'\nimport client from '../../feathers'\nimport {DebounceInput} from 'react-debounce-input';\nimport { useForm } from \"react-hook-form\";\n//import {useHistory} from 'react-router-dom'\nimport {UserContext,ObjectContext} from '../../context'\nimport {toast} from 'bulma-toast'\nimport {ProductCreate} from './Products'\nvar random = require('random-string-generator');\n// eslint-disable-next-line\nconst searchfacility={};\n\n\nexport default function ProductEntry() {\n    const {state}=useContext(ObjectContext) //,setState\n    // eslint-disable-next-line\n    const [selectedProductEntry,setSelectedProductEntry]=useState()\n    //const [showState,setShowState]=useState() //create|modify|detail\n    \n    return(\n        <section className= \"section remPadTop\">\n           {/*  <div className=\"level\">\n            <div className=\"level-item\"> <span className=\"is-size-6 has-text-weight-medium\">ProductEntry  Module</span></div>\n            </div> */}\n            <div className=\"columns \">\n            <div className=\"column is-6 \">\n                <ProductExitList />\n                </div>\n            <div className=\"column is-6 \">\n                {(state.ProductExitModule.show ==='create')&&<ProductExitCreate />}\n                {(state.ProductExitModule.show ==='detail')&&<ProductExitDetail  />}\n                {(state.ProductExitModule.show ==='modify')&&<ProductExitModify ProductEntry={selectedProductEntry} />}\n               \n            </div>\n\n            </div>                            \n            </section>\n       \n    )\n    \n}\n\nexport function ProductExitCreate(){\n   // const { register, handleSubmit,setValue} = useForm(); //, watch, errors, reset \n    const [error, setError] =useState(false)\n    const [success, setSuccess] =useState(false)\n    const [message,setMessage] = useState(\"\")\n    // eslint-disable-next-line\n    const [facility,setFacility] = useState()\n    const ProductEntryServ=client.service('productentry')\n    //const history = useHistory()\n    const {user} = useContext(UserContext) //,setUser\n    // eslint-disable-next-line\n    const [currentUser,setCurrentUser] = useState()\n    const [type,setType] = useState(\"Sales\")\n    const [documentNo,setDocumentNo] = useState(\"\")\n    const [totalamount,setTotalamount] = useState(0)\n    const [qamount,setQAmount] = useState(null)\n    const [productId,setProductId] = useState(\"\")\n    const [source,setSource] = useState(\"\")\n    const [date,setDate] = useState(\"\")\n    const [name,setName] = useState(\"\")\n    const [inventoryId,setInventoryId] = useState(\"\")\n    const [baseunit,setBaseunit] = useState(\"\")\n    const [quantity,setQuantity] = useState(\"\")\n    const [sellingprice,setSellingPrice] = useState(\"\")\n    const [costprice,setCostprice] = useState(0)\n    const [invquantity,setInvQuantity] = useState(\"\")\n    const [calcamount,setCalcAmount] = useState(0)\n    const [productItem,setProductItem] = useState([])\n    const [billingId,setBilllingId]=useState(\"\")  \n    const [changeAmount, setChangeAmount] = useState(true)\n    const {state}=useContext(ObjectContext)\n    const inputEl = useRef(0);\n    let calcamount1\n    let hidestatus\n\n    let medication =state.financeModule.selectedFinance\n    console.log(\"medication\", medication)\n\n    const [productEntry,setProductEntry]=useState({\n        productitems:[],\n        date,\n        documentNo,\n        type,\n        totalamount,\n        source,\n\n    })\n \n    const productItemI={\n        productId,\n        name,\n        quantity,\n        sellingprice,\n        amount:calcamount, //qamount||\n        baseunit,\n        costprice,\n        billingId\n\n    }\n    // consider batchformat{batchno,expirydate,qtty,baseunit}\n    //consider baseunoit conversions\n    const getSearchfacility=(obj)=>{\n\n        setProductId(obj.productId)\n        setName(obj.name)\n        setBaseunit(obj.baseunit)\n        setInventoryId(obj.inventoryId)\n        setSellingPrice(obj.sellingprice)\n        setInvQuantity(obj.quantity)\n        setCostprice(obj.costprice)\n        setBilllingId(obj.billingId)\n        if (!obj){\n            //\"clear stuff\"\n            setProductId(\"\")\n            setName(\"\")\n            setBaseunit(\"\")\n            setInventoryId(\"\")\n            setSellingPrice(\"\")\n            setInvQuantity(\"\")\n            setQAmount(null)\n            setCostprice(\"\")\n           // setCalcAmount(null)\n\n        }\n        \n       /*  setValue(\"facility\", obj._id,  {\n            shouldValidate: true,\n            shouldDirty: true\n        }) */\n    }\n    \n    useEffect(() => {\n        setCurrentUser(user)\n        //console.log(currentUser)\n        return () => {\n        \n        }\n    }, [user])\n\n    const handleUpdateTotal=()=>{\n\n        \n        setTotalamount(prevtotal=>Number(prevtotal) + Number(calcamount))\n    }\n\n    const handleChangeType=async (e)=>{\n        await setType(e.target.value)\n    }\n\n    const handleAmount= async()=>{\n        await setQAmount(null)\n       // alert(\"Iam chaning qamount\")\n    }\n    const handleClickProd=async()=>{\n        console.log(\"amount: \",productItemI.amount)\n        console.log(\"qamount: \",qamount)\n        console.log(\"calcamount: \",calcamount)\n\n        if ( quantity===0||quantity===\"\"|| productId===\"\"){\n            toast({\n                message: 'You need to choose a product and quantity to proceed',\n                type: 'is-danger',\n                dismissible: true,\n                pauseOnHover: true,\n              }) \n              return \n        }\n\n        await setSuccess(false)\n        await setProductItem(\n            prevProd=>prevProd.concat(productItemI)\n        )\n       handleUpdateTotal()\n        setName(\"\")\n        setBaseunit(\"\")\n        setQuantity(\"\")\n        setInventoryId(\"\")\n        setSellingPrice(\"\")\n        setInvQuantity(\"\")\n            handleAmount()\n       // setCalcAmount(null)\n       await setSuccess(true)\n      /*  console.log(success)\n       console.log(qamount)\n       console.log(productItem) */\n       setChangeAmount(true)\n    }\n  //check user for facility or get list of facility  \n   /*  useEffect(()=>{\n        //setFacility(user.activeProductEntry.FacilityId)//\n      if (!user.stacker){\n          console.log(currentUser)\n           /* setValue(\"facility\", user.currentEmployee.facilityDetail._id,  {\n            shouldValidate: true,\n            shouldDirty: true\n        })  \n\n      }\n    }) */\n\n    const handleQtty=async(e)=>{\n        if (invquantity<e.target.value){\n            toast({\n                message: 'You can not sell more quantity than exist in inventory ' ,\n                type: 'is-danger',\n                dismissible: true,\n                pauseOnHover: true,\n              })\n            return\n        }\n        setQuantity(e.target.value)\n        calcamount1=quantity*sellingprice\n        await setCalcAmount(calcamount1)\n        console.log(calcamount)\n\n       \n\n    }\n\n    useEffect( () => {\n         setProductEntry({\n            \n            date,\n            documentNo,\n            type,\n            totalamount,\n            source,\n        })\n       setCalcAmount(quantity*sellingprice) \n        return () => {\n            \n        }\n    },[date])\n\n    const resetform=()=>{\n     setType(\"Sales\")\n    setDocumentNo(\"\")\n    setTotalamount(\"\")\n    setProductId(\"\")\n    setSource(\"\")\n    setDate(\"\")\n    setName(\"\")\n    setBaseunit()\n    setCostprice()\n    setProductItem([])\n    }\n\n    const onSubmit = async(e) =>{\n        e.preventDefault();\n        setMessage(\"\")\n        setError(false)\n        setSuccess(false)\n        /* await setProductEntry({\n            \n            date,\n            documentNo,\n            type,\n            totalamount,\n            source,\n        }) */\n        productEntry.date = date\n        productEntry.documentNo= documentNo\n        productEntry.type=type\n        productEntry.totalamount= totalamount\n        productEntry.source=source\n        productEntry.productitems=productItem\n        productEntry.createdby=user._id\n        productEntry.transactioncategory=\"debit\"\n       \n          console.log(\"b4 facility\",productEntry);\n          if (user.currentEmployee){\n         productEntry.facility=user.currentEmployee.facilityDetail._id  // or from facility dropdown\n          }else{\n            toast({\n                message: 'You can not remove inventory from any organization',\n                type: 'is-danger',\n                dismissible: true,\n                pauseOnHover: true,\n              }) \n              return\n          }\n          if (state.StoreModule.selectedStore._id){\n            productEntry.storeId=state.StoreModule.selectedStore._id\n          }else{\n            toast({\n                message: 'You need to select a store before removing inventory',\n                type: 'is-danger',\n                dismissible: true,\n                pauseOnHover: true,\n              }) \n              return\n\n          }\n          console.log(\"b4 create\",productEntry);\n        ProductEntryServ.create(productEntry)\n        .then((res)=>{\n                //console.log(JSON.stringify(res))\n                resetform()\n               /*  setMessage(\"Created ProductEntry successfully\") */\n                setSuccess(true)\n                toast({\n                    message: 'ProductExit created succesfully',\n                    type: 'is-success',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  })\n                  setSuccess(false)\n                  setProductItem([])\n                  const today=new Date().toLocaleString()\n      \n                  setDate(today)\n                  const invoiceNo=random(6,'uppernumeric')\n                setDocumentNo(invoiceNo)\n                setType(\"Sales\")\n            })\n            .catch((err)=>{\n                toast({\n                    message: 'Error creating ProductExit ' + err,\n                    type: 'is-danger',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  })\n            })\n\n      } \n\n      const handleChangeAmount=()=>{\n        setChangeAmount((rev)=>(!rev))\n        \n    }\n   // console.log(\"i am rendering\")\n\n    useEffect(() => {\n        const today=new Date().toLocaleString()\n        //console.log(today)\n        setDate(today)\n        const invoiceNo=random(6,'uppernumeric')\n        setDocumentNo(invoiceNo)\n        return () => {\n            \n        }\n    }, [])\n\n    useEffect(() => {\n        calcamount1=quantity*sellingprice\n         setCalcAmount(calcamount1)\n         console.log(calcamount)\n         setChangeAmount(true)\n        return () => {\n            \n        }\n    }, [quantity])\n\n  \n    \n\n    return (\n        <>\n            <div className=\"card card-overflow\">\n            <div className=\"card-header\">\n                <p className=\"card-header-title\">\n                   Point of Sale: Sales, Dispense, Audit, Transfer out\n                </p>\n            </div>\n            <div className=\"card-content \">\n   \n            <form onSubmit={onSubmit}> {/* handleSubmit(onSubmit) */}\n            <div className=\"field is-horizontal\">\n            <div className=\"field-body\">\n            <div className=\"field\">    \n                <div className=\"control\">\n                    <div className=\"select is-small\">\n                        <select name=\"type\" value={type} onChange={handleChangeType} className=\"selectadd\">\n                           <option value=\"\">Choose Type </option>\n                            <option value=\"Sales\">Sales </option>\n                            <option value=\"In-house\">In-House </option>\n                            <option value=\"Dispense\">Dispense</option>\n                            <option value=\"Audit\">Audit</option>\n                        </select>\n                    </div>\n                </div>\n            </div>\n            <div className=\"field\">\n                    <p className=\"control has-icons-left has-icons-right\">\n                        <input className=\"input is-small\" /* ref={register({ required: true })} */ value={source} name=\"client\" type=\"text\" onChange={e=>setSource(e.target.value)} placeholder=\"Client\" />\n                        <span className=\"icon is-small is-left\">\n                            <i className=\"fas fa-hospital\"></i>\n                        </span>                    \n                    </p>\n                </div>\n           \n            </div>\n            </div> {/* horizontal end */}\n           {/*  <div className=\"field\">\n                <p className=\"control has-icons-left\"> // Audit/initialization/Purchase Invoice \n                    <input className=\"input is-small\"  ref={register({ required: true })} name=\"type\" type=\"text\" placeholder=\"Type of Product Entry\"/>\n                    <span className=\"icon is-small is-left\">\n                    <i className=\" fas fa-user-md \"></i>\n                    </span>\n                </p>\n            </div> */}\n               <div className=\"field is-horizontal\">\n               <div className=\"field-body\">\n               <div className=\"field\">\n                <p className=\"control has-icons-left has-icons-right\">\n                    <input className=\"input is-small\"  /* ref={register({ required: true })} */ value={date}  name=\"date\" type=\"text\" onChange={e=>setDate(e.target.value)} placeholder=\"Date\" />\n                    <span className=\"icon is-small is-left\">\n                        <i className=\"fas fa-map-signs\"></i>\n                    </span>\n                </p>\n            </div>\n            <div className=\"field\">\n                <p className=\"control has-icons-left\">\n                    <input className=\"input is-small\" /* ref={register} */ name=\"documentNo\" value={documentNo} type=\"text\" onChange={e=>setDocumentNo(e.target.value)} placeholder=\" Invoice Number\"/>\n                    <span className=\"icon is-small is-left\">\n                    <i className=\"fas fa-phone-alt\"></i>\n                    </span>\n                </p>\n            </div>\n            <div className=\"field\">\n                <p className=\"control has-icons-left\">\n                    <input className=\"input is-small\" /* ref={register({ required: true })} */ value={totalamount} name=\"totalamount\" type=\"text\" onChange={e=>setTotalamount(e.target.value)} placeholder=\" Total Amount\"/>\n                    <span className=\"icon is-small is-left\">\n                    <i className=\"fas fa-coins\"></i>\n                    </span>\n                </p>\n            </div>\n\n                </div> \n                </div> \n               \n                </form>   \n               \n           \n         {/* array of ProductEntry items */}\n        \n        <label className=\"label is-small\">Add Product Items:</label>\n         <div className=\"field is-horizontal\">\n            <div className=\"field-body\">\n            <div className=\"field is-expanded\"  /* style={ !user.stacker?{display:\"none\"}:{}} */ >\n                    <InventorySearch  getSearchfacility={getSearchfacility} clear={success} /> \n                    <p className=\"control has-icons-left \" style={{display:\"none\"}}>\n                        <input className=\"input is-small\" /* ref={register ({ required: true }) }  *//* add array no */  value={productId} name=\"productId\" type=\"text\" onChange={e=>setProductId(e.target.value)} placeholder=\"Product Id\" />\n                        <span className=\"icon is-small is-left\">\n                        <i className=\"fas  fa-map-marker-alt\"></i>\n                        </span>\n                    </p>\n                 {sellingprice &&   \"N\"}{sellingprice} {sellingprice &&   \"per\"}  {baseunit} {invquantity} {sellingprice &&   \"remaining\"} \n                </div>\n            </div>\n        </div>\n        <div className=\"field is-horizontal\">\n            <div className=\"field-body\" >\n                <div className=\"field\" style={{width:\"40%\"}}>\n                <p className=\"control has-icons-left\" >\n                    <input className=\"input is-small\"  /* ref={register({ required: true })} */ name=\"quantity\" value={quantity} type=\"text\" onChange={ e=> handleQtty(e)} placeholder=\"Quantity\"  />\n                    <span className=\"icon is-small is-left\">\n                    <i className=\"fas fa-hashtag\"></i>\n                    </span>\n                   \n                </p>\n        <label >{baseunit}</label>\n            </div> \n            <div className=\"field\">\n            <label>Amount:</label>{/* <p>{quantity*sellingprice}</p> */}\n            </div>\n            <div className=\"field\" style={{width:\"40%\"}}>\n                <p className=\"control has-icons-left \" /* style={{display:\"none\"}} */>\n                    <input className=\"input is-small\" name=\"qamount\" disabled={changeAmount} value={calcamount} type=\"text\"  onChange={async e=> await setCalcAmount(e.target.value)}  placeholder=\"Amount\"   />\n                    <span className=\"icon is-small is-left\">\n                    <i className=\"fas fa-dollar-sign\"></i>\n                    </span>\n                </p>\n                <button className=\"button is-small is-success btnheight\" onClick={handleChangeAmount}>Adjust</button>\n            </div> \n            <div className=\"field\">\n            <p className=\"control\">\n                    <button className=\"button is-info is-small  is-pulled-right\">\n                      <span className=\"is-small\" onClick={handleClickProd}> +</span>\n                    </button>\n                </p>\n            </div>\n            </div>\n         </div>\n            \n       {(productItem.length>0) && <div>\n            <label>Product Items:</label>\n         <table className=\"table is-striped  is-hoverable is-fullwidth is-scrollable \">\n                <thead>\n                    <tr>\n                    <th><abbr title=\"Serial No\">S/No</abbr></th>\n                    <th><abbr title=\"Type\">Name</abbr></th>\n                    <th><abbr title=\"Type\">Quanitity</abbr></th>\n                    <th><abbr title=\"Document No\">Unit</abbr></th>\n                    <th><abbr title=\"Cost Price\">Selling Price</abbr></th>\n                    <th><abbr title=\"Cost Price\">Amount</abbr></th>\n                    <th><abbr title=\"Actions\">Actions</abbr></th>\n                    </tr>\n                </thead>\n                <tfoot>\n                    \n                </tfoot>\n                <tbody>\n                   { productItem.map((ProductEntry, i)=>(\n\n                        <tr key={i}>\n                        <th>{i+1}</th>\n                        <td>{ProductEntry.name}</td>\n                        <th>{ProductEntry.quantity}</th>\n                        <td>{ProductEntry.baseunit}</td>\n                        <td>{ProductEntry.sellingprice}</td>\n                        <td>{ProductEntry.amount}</td>\n                        <td><span className=\"showAction\"  >x</span></td>\n                        \n                        </tr>\n\n                    ))}\n                </tbody>\n                </table>\n                <div className=\"field mt-2 is-grouped\">\n                <p className=\"control\">\n                    <button className=\"button is-success is-small\" disabled={!productItem.length>0} onClick={onSubmit}>\n                        Sell\n                    </button>\n                </p>\n                <p className=\"control\">\n                    <button className=\"button is-warning is-small\" disabled={!productItem.length>0} /* onClick={onSubmit} */>\n                        Clear\n                    </button>\n                </p>\n                </div>\n                </div>\n           \n            }\n            \n            \n            </div>\n            </div>\n        </>\n    )\n   \n}\n\nexport function ProductExitList(){\n   // const { register, handleSubmit, watch, errors } = useForm();\n    // eslint-disable-next-line\n    const [error, setError] =useState(false)\n     // eslint-disable-next-line\n    const [success, setSuccess] =useState(false)\n     // eslint-disable-next-line\n   const [message, setMessage] = useState(\"\") \n    const ProductEntryServ=client.service('productentry')\n    //const history = useHistory()\n   // const {user,setUser} = useContext(UserContext)\n    const [facilities,setFacilities]=useState([])\n     // eslint-disable-next-line\n   const [selectedProductEntry, setSelectedProductEntry]=useState() //\n    // eslint-disable-next-line\n    const {state,setState}=useContext(ObjectContext)\n    // eslint-disable-next-line\n    const {user,setUser}=useContext(UserContext)\n\n\n\n    const handleCreateNew = async()=>{\n        const    newProductExitModule={\n            selectedProductEntry:{},\n            show :'create'\n            }\n       await setState((prevstate)=>({...prevstate, ProductExitModule:newProductExitModule}))\n       //console.log(state)\n        \n\n    }\n    const handleRow= async(ProductEntry)=>{\n        //console.log(\"b4\",state)\n\n        //console.log(\"handlerow\",ProductEntry)\n\n        await setSelectedProductEntry(ProductEntry)\n\n        const    newProductExitModule={\n            selectedProductEntry:ProductEntry,\n            show :'detail'\n        }\n       await setState((prevstate)=>({...prevstate, ProductExitModule:newProductExitModule}))\n       //console.log(state)\n\n    }\n\n   const handleSearch=(val)=>{\n       const field='name'\n       console.log(val)\n       ProductEntryServ.find({query: {\n                [field]: {\n                    $regex:val,\n                    $options:'i'\n                   \n                },\n                transactioncategory:\"debit\",\n                storeId:state.StoreModule.selectedStore._id,\n               facility:user.currentEmployee.facilityDetail._id || \"\",\n                $limit:10,\n                $sort: {\n                    createdAt: -1\n                  }\n                    }}).then((res)=>{\n                console.log(res)\n               setFacilities(res.data)\n                setMessage(\" ProductEntry  fetched successfully\")\n                setSuccess(true) \n            })\n            .catch((err)=>{\n                console.log(err)\n                setMessage(\"Error fetching ProductEntry, probable network issues \"+ err )\n                setError(true)\n            })\n        }\n   \n        const getFacilities= async()=>{\n            if (user.currentEmployee){\n            \n        const findProductEntry= await ProductEntryServ.find(\n                {query: {\n                    transactioncategory:\"debit\",\n                    facility:user.currentEmployee.facilityDetail._id,\n                    storeId:state.StoreModule.selectedStore._id,\n                    $limit:20,\n                    $sort: {\n                        createdAt: -1\n                    }\n                    }})\n\n         await setFacilities(findProductEntry.data)\n                }\n                else {\n                    if (user.stacker){\n                        /* toast({\n                            message: 'You do not qualify to view this',\n                            type: 'is-danger',\n                            dismissible: true,\n                            pauseOnHover: true,\n                          }) \n                          return */\n                        const findProductEntry= await ProductEntryServ.find(\n                            {query: {\n                                transactioncategory:\"debit\",\n                                $limit:20,\n                                $sort: {\n                                    createdAt: -1\n                                }\n                                }})\n            \n                    await setFacilities(findProductEntry.data)\n\n                    }\n                }\n          /*   .then((res)=>{\n                console.log(res)\n                    setFacilities(res.data)\n                    setMessage(\" ProductEntry  fetched successfully\")\n                    setSuccess(true)\n                })\n                .catch((err)=>{\n                    setMessage(\"Error creating ProductEntry, probable network issues \"+ err )\n                    setError(true)\n                }) */\n            }\n            \n        \n\n            useEffect(() => {\n               \n                if (!state.StoreModule.selectedStore){\n                    toast({\n                        message: 'kindly select a store',\n                        type: 'is-danger',\n                        dismissible: true,\n                        pauseOnHover: true,\n                      }) \n                      return\n                    getFacilities()\n\n                }else{\n                    /* const localUser= localStorage.getItem(\"user\")\n                    const user1=JSON.parse(localUser)\n                    console.log(localUser)\n                    console.log(user1)\n                    fetchUser(user1)\n                    console.log(user)\n                    getFacilities(user) */\n                }\n                ProductEntryServ.on('created', (obj)=>getFacilities())\n                ProductEntryServ.on('updated', (obj)=>getFacilities())\n                ProductEntryServ.on('patched', (obj)=>getFacilities())\n                ProductEntryServ.on('removed', (obj)=>getFacilities())\n                return () => {\n                \n                }\n            },[])\n\n            useEffect(() => {\n                getFacilities()\n                console.log(\"store changed\")\n                return () => {\n                   \n                }\n            }, [state.StoreModule.selectedStore])\n    //todo: pagination and vertical scroll bar\n\n    return(\n        <>\n           {state.StoreModule.selectedStore?( <>  \n                <div className=\"level\">\n                    <div className=\"level-left\">\n                        <div className=\"level-item\">\n                            <div className=\"field\">\n                                <p className=\"control has-icons-left  \">\n                                    <DebounceInput className=\"input is-small \" \n                                        type=\"text\" placeholder=\"Search ProductEntry\"\n                                        minLength={3}\n                                        debounceTimeout={400}\n                                        onChange={(e)=>handleSearch(e.target.value)} />\n                                    <span className=\"icon is-small is-left\">\n                                        <i className=\"fas fa-search\"></i>\n                                    </span>\n                                </p>\n                            </div>\n                        </div>\n                    </div>\n                    <div className=\"level-item\"> <span className=\"is-size-6 has-text-weight-medium\">Product Exits </span></div>\n                    <div className=\"level-right\">\n                        <div className=\"level-item\"> \n                            <div className=\"level-item\"><div className=\"button is-success is-small\" onClick={handleCreateNew}>New</div></div>\n                        </div>\n                    </div>\n\n                </div>\n                <div className=\"table-container pullup \">\n                                <table className=\"table is-striped is-narrow is-hoverable is-fullwidth is-scrollable \">\n                                    <thead>\n                                        <tr>\n                                        <th><abbr title=\"Serial No\">S/No</abbr></th>\n                                        <th><abbr title=\"Date\">Date</abbr></th>\n                                        <th><abbr title=\"Type\">Type</abbr></th>\n                                        <th>Client</th>\n                                        <th><abbr title=\"Document No\">Document No</abbr></th>\n                                        <th><abbr title=\"Total Amount\">Total Amount</abbr></th>\n                                        <th><abbr title=\"Enteredby\">Entered By</abbr></th>\n                                        <th><abbr title=\"Actions\">Actions</abbr></th>\n                                        </tr>\n                                    </thead>\n                                    <tfoot>\n                                        \n                                    </tfoot>\n                                    <tbody>\n                                        {facilities.map((ProductEntry, i)=>(\n\n                                            <tr key={ProductEntry._id} onClick={()=>handleRow(ProductEntry)}>\n                                            <th>{i+1}</th>\n                                            <td>{ProductEntry.date}</td>\n                                            <th>{ProductEntry.type}</th>\n                                            <td>{ProductEntry.source}</td>\n                                            <td>{ProductEntry.documentNo}</td>\n                                            <td>{ProductEntry.totalamount}</td>\n                                            <td>{ProductEntry.enteredby}</td>\n                                            <td><span className=\"showAction\"  >...</span></td>\n                                           \n                                            </tr>\n\n                                        ))}\n                                    </tbody>\n                                    </table>\n                                    \n                </div>              \n            </>):<div>loading... Choose a Store</div>}\n            </>\n              \n    )\n    }\n\n\nexport function ProductExitDetail(){\n    //const { register, handleSubmit, watch, setValue } = useForm(); //errors,\n     // eslint-disable-next-line\n    const [error, setError] =useState(false) //, \n    //const [success, setSuccess] =useState(false)\n     // eslint-disable-next-line\n    const [message, setMessage] = useState(\"\") //,\n    //const ProductEntryServ=client.service('/ProductEntry')\n    //const history = useHistory()\n    //const {user,setUser} = useContext(UserContext)\n    const {state,setState} = useContext(ObjectContext)\n\n   \n\n   const ProductEntry =state.ProductExitModule.selectedProductEntry \n\n    const handleEdit= async()=>{\n        const    newProductExitModule={\n            selectedProductEntry:ProductEntry,\n            show :'modify'\n        }\n       await setState((prevstate)=>({...prevstate, ProductExitModule:newProductExitModule}))\n       //console.log(state)\n       \n    }\n \n    return (\n        <>\n        <div className=\"card \">\n            <div className=\"card-header\">\n                <p className=\"card-header-title\">\n                    ProductEntry Details\n                </p>\n            </div>\n            <div className=\"card-content vscrollable\">\n           \n                <table> \n                <tbody>         \n                <tr>\n                    <td>\n                      <label className=\"label is-small\"> <span className=\"icon is-small is-left\">\n                            <i className=\"fas fa-hospital\"></i>\n                        </span>                    \n                        Type\n                        </label>\n                    </td>\n                    <td>\n                        <span className=\"is-size-7 padleft\"   name=\"name\"> {ProductEntry.type} </span>\n                    </td>\n                    <td>\n\n                    </td>\n                    <td>\n                        <label className=\"label is-small padleft\"><span className=\"icon is-small is-left\">\n                            <i className=\"fas fa-map-signs\"></i>\n                        </span>Supplier:\n                        </label>\n                    </td>\n                    <td>\n                        <span className=\"is-size-7 padleft\"   name=\"ProductEntryType\">{ProductEntry.source} </span> \n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <label className=\"label is-small\"> <span className=\"icon is-small is-left\">\n                        <i className=\"fas fa-hospital\"></i>\n                        </span>                    \n                        Date:\n                        </label>\n                    </td>\n                    <td>\n                        <span className=\"is-size-7 padleft\"   name=\"name\"> {ProductEntry.date} </span>\n                    </td>\n                    <td>\n                                \n                    </td>\n                    <td>\n                        <label className=\"label is-small padleft\"><span className=\"icon is-small is-left\">\n                            <i className=\"fas fa-map-signs\"></i>\n                        </span>Invoice No:\n                        </label>\n                    </td>\n                    \n                    <td>\n                         <span className=\"is-size-7 padleft\"   name=\"ProductEntryType\">{ProductEntry.documentNo} </span> \n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                \n                        <label className=\"label is-small\"> <span className=\"icon is-small is-left\">\n                        <i className=\"fas fa-hospital\"></i>\n                    </span>            \n                        Total Amount:\n                    </label>\n                    </td>\n                    <td>\n                        <span className=\"is-size-7 padleft\"   name=\"name\"> {ProductEntry.totalamount} </span>\n                    </td>\n                </tr>\n\n                </tbody> \n            </table> \n            <label className=\"label is-size-7 mt-2\">Product Items:</label>\n         <table className=\"table is-striped  is-hoverable is-fullwidth is-scrollable \">\n                <thead>\n                    <tr>\n                    <th><abbr title=\"Serial No\">S/No</abbr></th>\n                    <th><abbr title=\"Type\">Name</abbr></th>\n                    <th><abbr title=\"Type\">Quanitity</abbr></th>\n                    <th><abbr title=\"Document No\">Unit</abbr></th>\n                    <th><abbr title=\"Selling Price\">Selling Price</abbr></th>\n                    <th><abbr title=\"Amount\">Amount</abbr></th>\n                   \n                    </tr>\n                </thead>\n                <tfoot>\n                    \n                </tfoot>\n                <tbody>\n                   { ProductEntry.productitems.map((ProductEntry, i)=>(\n\n                        <tr key={i}>\n                        <th>{i+1}</th>\n                        <td>{ProductEntry.name}</td>\n                        <th>{ProductEntry.quantity}</th>\n                        <td>{ProductEntry.baseunit}</td>\n                        <td>{ProductEntry.sellingprice}</td>\n                        <td>{ProductEntry.amount}</td>\n                        \n                        \n                        </tr>\n\n                    ))}\n                </tbody>\n                </table>\n                  {/*   <tr>\n                    <td>\n            <label className=\"label is-small\"><span className=\"icon is-small is-left\">\n                    <i className=\"fas fa-map-marker-alt\"></i>\n                    </span>Profession: \n                \n                    \n                    </label>\n                    </td>\n                <td>\n                <span className=\"is-size-7 padleft \"  name=\"ProductEntryCity\">{ProductEntry.profession}</span> \n                </td>\n                </tr>\n                    <tr>\n            <td>\n            <label className=\"label is-small\"><span className=\"icon is-small is-left\">\n                    <i className=\"fas fa-phone-alt\"></i>\n                    </span>Phone:           \n                    \n                        </label>\n                        </td>\n                        <td>\n                        <span className=\"is-size-7 padleft \"  name=\"ProductEntryContactPhone\" >{ProductEntry.phone}</span>\n                        </td>\n                  </tr>\n                    <tr><td>\n            \n            <label className=\"label is-small\"><span className=\"icon is-small is-left\">\n                    <i className=\"fas fa-envelope\"></i>\n                    </span>Email:                     \n                    \n                         </label></td><td>\n                         <span className=\"is-size-7 padleft \"  name=\"ProductEntryEmail\" >{ProductEntry.email}</span>\n                         </td>\n             \n                </tr>\n                    <tr>\n            <td>\n            <label className=\"label is-small\"> <span className=\"icon is-small is-left\">\n                    <i className=\"fas fa-user-md\"></i></span>Department:\n                    \n                    </label></td>\n                    <td>\n                    <span className=\"is-size-7 padleft \"  name=\"ProductEntryOwner\">{ProductEntry.department}</span>\n                    </td>\n               \n                </tr>\n                    <tr>\n            <td>\n            <label className=\"label is-small\"> <span className=\"icon is-small is-left\">\n                    <i className=\"fas fa-hospital-symbol\"></i>\n                    </span>Departmental Unit:              \n                    \n                </label></td>\n                <td>\n                <span className=\"is-size-7 padleft \"  name=\"ProductEntryType\">{ProductEntry.deptunit}</span>\n                </td>\n              \n                </tr> */}\n                    \n          {/*   <div className=\"field\">\n             <label className=\"label is-small\"><span className=\"icon is-small is-left\">\n                    <i className=\"fas fa-clinic-medical\"></i>\n                    </span>Category:              \n                    <span className=\"is-size-7 padleft \"  name= \"ProductEntryCategory\">{ProductEntry.ProductEntryCategory}</span>\n                </label>\n                 </div> */}\n\n            \n           \n           {/*  <div className=\"field mt-2\">\n                <p className=\"control\">\n                    <button className=\"button is-success is-small\" onClick={handleEdit}>\n                        Edit\n                    </button>\n                </p>\n            </div>\n            { error && <div className=\"message\"> {message}</div>} */}\n           \n        </div>\n        </div>\n        </>\n    )\n   \n   \n}\n\nexport function ProductExitModify(){\n    const { register, handleSubmit, setValue,reset, errors } = useForm(); //watch, errors,\n    // eslint-disable-next-line \n    const [error, setError] =useState(false)\n    // eslint-disable-next-line \n    const [success, setSuccess] =useState(false)\n    // eslint-disable-next-line \n    const [message,setMessage] = useState(\"\")\n    // eslint-disable-next-line \n    const ProductEntryServ=client.service('productentry')\n    //const history = useHistory()\n     // eslint-disable-next-line\n    const {user} = useContext(UserContext)\n    const {state,setState} = useContext(ObjectContext)\n\n    const ProductEntry =state.ProductExitModule.selectedProductEntry \n\n        useEffect(() => {\n            setValue(\"name\", ProductEntry.name,  {\n                shouldValidate: true,\n                shouldDirty: true\n            })\n            setValue(\"ProductEntryType\", ProductEntry.ProductEntryType,  {\n                shouldValidate: true,\n                shouldDirty: true\n            })\n           /*  setValue(\"profession\", ProductEntry.profession,  {\n                shouldValidate: true,\n                shouldDirty: true\n            })\n            setValue(\"phone\", ProductEntry.phone,  {\n                shouldValidate: true,\n                shouldDirty: true\n            })\n            setValue(\"email\", ProductEntry.email,  {\n                shouldValidate: true,\n                shouldDirty: true\n            })\n            setValue(\"department\", ProductEntry.department,  {\n                shouldValidate: true,\n                shouldDirty: true\n            })\n            setValue(\"deptunit\", ProductEntry.deptunit,  {\n                shouldValidate: true,\n                shouldDirty: true\n            }) */\n          /*   setValue(\"ProductEntryCategory\", ProductEntry.ProductEntryCategory,  {\n                shouldValidate: true,\n                shouldDirty: true\n            }) */\n            \n            return () => {\n                \n            }\n        })\n\n   const handleCancel=async()=>{\n    const    newProductExitModule={\n        selectedProductEntry:{},\n        show :'create'\n      }\n   await setState((prevstate)=>({...prevstate, ProductExitModule:newProductExitModule}))\n   //console.log(state)\n           }\n\n\n        const changeState =()=>{\n        const    newProductExitModule={\n            selectedProductEntry:{},\n            show :'create'\n        }\n        setState((prevstate)=>({...prevstate, ProductExitModule:newProductExitModule}))\n\n        }\n    const handleDelete=async()=>{\n        let conf=window.confirm(\"Are you sure you want to delete this data?\")\n        \n        const dleteId=ProductEntry._id\n        if (conf){\n             \n        ProductEntryServ.remove(dleteId)\n        .then((res)=>{\n                //console.log(JSON.stringify(res))\n                reset();\n               /*  setMessage(\"Deleted ProductEntry successfully\")\n                setSuccess(true)\n                changeState()\n               setTimeout(() => {\n                setSuccess(false)\n                }, 200); */\n                toast({\n                    message: 'ProductEntry deleted succesfully',\n                    type: 'is-success',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  })\n                changeState()\n            })\n            .catch((err)=>{\n               // setMessage(\"Error deleting ProductEntry, probable network issues \"+ err )\n               // setError(true)\n                toast({\n                    message: \"Error deleting ProductEntry, probable network issues or \"+ err,\n                    type: 'is-danger',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  })\n            })\n        }\n    }\n        \n\n   /* ()=> setValue(\"firstName\", \"Bill\", , {\n            shouldValidate: true,\n            shouldDirty: true\n          })) */\n    const onSubmit = (data,e) =>{\n        e.preventDefault();\n        \n        setSuccess(false)\n        console.log(data)\n        data.facility=ProductEntry.facility\n          //console.log(data);\n          \n        ProductEntryServ.patch(ProductEntry._id,data)\n        .then((res)=>{\n                //console.log(JSON.stringify(res))\n               // e.target.reset();\n               // setMessage(\"updated ProductEntry successfully\")\n                 toast({\n                    message: 'ProductEntry updated succesfully',\n                    type: 'is-success',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  })\n                  \n                changeState()\n\n            })\n            .catch((err)=>{\n                //setMessage(\"Error creating ProductEntry, probable network issues \"+ err )\n               // setError(true)\n                toast({\n                    message: \"Error updating ProductEntry, probable network issues or \"+ err,\n                    type: 'is-danger',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  })\n            })\n\n      } \n     \n      \n    return (\n        \n        <>\n        <div className=\"card \">\n            <div className=\"card-header\">\n                <p className=\"card-header-title\">\n                    ProductEntry Details-Modify\n                </p>\n            </div>\n            <div className=\"card-content vscrollable\">\n           \n            <form onSubmit={handleSubmit(onSubmit)}>\n                <div className=\"field\">\n                    <label className=\"label is-small\"> Name\n                    <p className=\"control has-icons-left has-icons-right\">\n                        <input className=\"input  is-small\" ref={register({ required: true })}  name=\"name\" type=\"text\" placeholder=\"Name\" />\n                        <span className=\"icon is-small is-left\">\n                            <i className=\"fas fa-hospital\"></i>\n                        </span>                    \n                    </p>\n                    </label>\n                    </div>\n                <div className=\"field\">\n                <label className=\"label is-small\">ProductEntry Type\n                    <p className=\"control has-icons-left has-icons-right\">\n                    <input className=\"input is-small \" ref={register({ required: true })} disabled name=\"ProductEntryType\" type=\"text\" placeholder=\"ProductEntry Type\" />\n                    <span className=\"icon is-small is-left\">\n                        <i className=\"fas fa-map-signs\"></i>\n                    </span>\n                    \n                </p>\n                </label>\n                </div>\n            {/* <div className=\"field\">\n            <label className=\"label is-small\">Profession\n                <p className=\"control has-icons-left\">\n                    <input className=\"input is-small\" ref={register({ required: true })} name=\"profession\" type=\"text\" placeholder=\"Profession\"/>\n                    <span className=\"icon is-small is-left\">\n                    <i className=\"fas fa-map-marker-alt\"></i>\n                    </span>\n                </p>\n                </label>\n                </div>\n            <div className=\"field\">\n            <label className=\"label is-small\">Phone\n                <p className=\"control has-icons-left\">\n                    <input className=\"input is-small\" ref={register({ required: true })} name=\"phone\" type=\"text\" placeholder=\"Phone No\"/>\n                    <span className=\"icon is-small is-left\">\n                    <i className=\"fas fa-phone-alt\"></i>\n                    </span>\n                </p>\n                </label>\n                 </div>\n            <div className=\"field\">\n            <label className=\"label is-small\">Email\n                <p className=\"control has-icons-left\">\n                    <input className=\"input is-small\" ref={register({ required: true })} name=\"email\" type=\"email\" placeholder=\"ProductEntry Email\"/>\n                    <span className=\"icon is-small is-left\">\n                    <i className=\"fas fa-envelope\"></i>\n                    </span>\n                </p>\n                </label>\n                </div>\n            <div className=\"field\">\n            <label className=\"label is-small\">Department\n                <p className=\"control has-icons-left\">\n                    <input className=\"input is-small\" ref={register({ required: true })} name=\"department\" type=\"text\" placeholder=\"Department\"/>\n                    <span className=\"icon is-small is-left\">\n                    <i className=\"fas fa-user-md\"></i>\n                    </span>\n                </p>\n                </label>\n                {errors.department && <span>This field is required</span>}\n                </div>\n            <div className=\"field\">\n            <label className=\"label is-small\">Departmental Unit\n                <p className=\"control has-icons-left\">\n                    <input className=\"input is-small\" ref={register({ required: true })} name=\"deptunit\" type=\"text\" placeholder=\"Departmental Unit\"/>\n                    <span className=\"icon is-small is-left\">\n                    <i className=\"fas fa-hospital-symbol\"></i>\n                    </span>\n                </p>\n                </label>\n                </div> */}\n           {/*  <div className=\"field\">\n            <label className=\"label is-small\">Category\n                <p className=\"control has-icons-left\">\n                    <input className=\"input is-small\" ref={register({ required: true })} name=\"ProductEntryCategory\" type=\"text\" placeholder=\"ProductEntry Category\"/>\n                    <span className=\"icon is-small is-left\">\n                    <i className=\"fas fa-clinic-medical\"></i>\n                    </span>\n                </p>\n                </label>\n            </div> */}\n           \n           \n            </form>\n            \n            <div className=\"field  is-grouped mt-2\" >\n                <p className=\"control\">\n                    <button type=\"submit\" className=\"button is-success is-small\" onClick={handleSubmit(onSubmit)}>\n                        Save\n                    </button>\n                </p>\n                <p className=\"control\">\n                    <button className=\"button is-warning is-small\" onClick={handleCancel}>\n                        Cancel\n                    </button>\n                </p>\n                <p className=\"control\">\n                    <button className=\"button is-danger is-small\" onClick={()=>handleDelete()} type=\"delete\">\n                       Delete\n                    </button>\n                </p>\n            </div>\n        </div>\n        </div>\n        </>\n    )\n   \n   \n                \n}   \n\nexport  function InventorySearch({getSearchfacility,clear}) {\n    \n    const productServ=client.service('inventory')\n    const [facilities,setFacilities]=useState([])\n     // eslint-disable-next-line\n     const [searchError, setSearchError] =useState(false)\n     // eslint-disable-next-line\n    const [showPanel, setShowPanel] =useState(false)\n     // eslint-disable-next-line\n   const [searchMessage, setSearchMessage] = useState(\"\") \n   // eslint-disable-next-line \n   const [simpa,setSimpa]=useState(\"\")\n   // eslint-disable-next-line \n   const [chosen,setChosen]=useState(false)\n   // eslint-disable-next-line \n   const [count,setCount]=useState(0)\n   const inputEl=useRef(null)\n   const [val,setVal]=useState(\"\")\n   const {user} = useContext(UserContext) \n   const {state}=useContext(ObjectContext)\n    const [productModal,setProductModal]=useState(false)\n\n   const handleRow= async(obj)=>{\n        await setChosen(true)\n        //alert(\"something is chaning\")\n       getSearchfacility(obj)\n       \n       await setSimpa(obj.name)\n       \n        // setSelectedFacility(obj)\n        setShowPanel(false)\n        await setCount(2)\n        /* const    newfacilityModule={\n            selectedFacility:facility,\n            show :'detail'\n        }\n   await setState((prevstate)=>({...prevstate, facilityModule:newfacilityModule})) */\n   //console.log(state)\n    }\n    const handleBlur=async(e)=>{\n         if (count===2){\n             console.log(\"stuff was chosen\")\n         }\n       \n       /*  console.log(\"blur\")\n         setShowPanel(false)\n        console.log(JSON.stringify(simpa))\n        if (simpa===\"\"){\n            console.log(facilities.length)\n            setSimpa(\"abc\")\n            setSimpa(\"\")\n            setFacilities([])\n            inputEl.current.setValue=\"\"\n        }\n        console.log(facilities.length)\n        console.log(inputEl.current) */\n    }\n    const handleSearch=async(value)=>{\n        setVal(value)\n        if (value===\"\"){\n            setShowPanel(false)\n            getSearchfacility(false)\n            return\n        }\n        const field='name' //field variable\n\n       \n        if (value.length>=3 ){\n            productServ.find({query: {     //service\n                 [field]: {\n                     $regex:value,\n                     $options:'i'\n                    \n                 },\n                 facility: user.currentEmployee.facilityDetail._id,\n                 storeId: state.StoreModule.selectedStore._id,\n                 $limit:10,\n                 $sort: {\n                     createdAt: -1\n                   }\n                     }}).then((res)=>{\n              console.log(\"product  fetched successfully\") \n              console.log(res.data) \n                setFacilities(res.data)\n                 setSearchMessage(\" product  fetched successfully\")\n                 setShowPanel(true)\n             })\n             .catch((err)=>{\n                toast({\n                    message: 'Error creating ProductEntry ' + err,\n                    type: 'is-danger',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  })\n             })\n         }\n        else{\n            console.log(\"less than 3 \")\n            console.log(val)\n            setShowPanel(false)\n            await setFacilities([])\n            console.log(facilities)\n        }\n    }\n\n    const handleAddproduct =()=>{\n        setProductModal(true) \n    }\n    const handlecloseModal =()=>{\n        setProductModal(false)\n        handleSearch(val)\n    }\n    useEffect(() => {\n       if (clear){\n           console.log(\"success has changed\",clear)\n           setSimpa(\"\")\n       }\n        return () => {\n            \n        }\n    }, [clear] )\n    return (\n        <div>\n            <div className=\"field\">\n                <div className=\"control has-icons-left  \">\n                    <div className={`dropdown ${showPanel?\"is-active\":\"\"}`} style={{width:\"100%\"}}>\n                        <div className=\"dropdown-trigger\" style={{width:\"100%\"}}>\n                            <DebounceInput className=\"input is-small  is-expanded\" \n                                type=\"text\" placeholder=\"Search Product\"\n                                value={simpa}\n                                minLength={3}\n                                debounceTimeout={400}\n                                onBlur={(e)=>handleBlur(e)}\n                                onChange={(e)=>handleSearch(e.target.value)}\n                                inputRef={inputEl}\n                                  />\n                            <span className=\"icon is-small is-left\">\n                                <i className=\"fas fa-search\"></i>\n                            </span>\n                        </div>\n                        {/* {searchError&&<div>{searchMessage}</div>} */}\n                        <div className=\"dropdown-menu expanded\" style={{width:\"100%\"}}>\n                            <div className=\"dropdown-content\">\n                          { facilities.length>0?\"\":<div className=\"dropdown-item\" /* onClick={handleAddproduct} */> <span> {val} is not in your inventory</span> </div>}\n\n                              {facilities.map((facility, i)=>(\n                                    \n                                    <div className=\"dropdown-item\" key={facility._id} onClick={()=>handleRow(facility)}>\n                                        \n                                        <div><span>{facility.name}</span></div>\n                                        <div><span><strong>{facility.quantity}</strong></span>\n                                        <span>{facility.baseunit}(s) remaining</span>\n                                        <span className=\"padleft\"><strong>Price:</strong> N{facility.sellingprice}</span></div>\n                                        \n                                    </div>\n                                    \n                                    ))}\n                                    \n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div className={`modal ${productModal?\"is-active\":\"\"}` }>\n                                    <div className=\"modal-background\"></div>\n                                    <div className=\"modal-card\">\n                                        <header className=\"modal-card-head\">\n                                        <p className=\"modal-card-title\">Choose Store</p>\n                                        <button className=\"delete\" aria-label=\"close\"  onClick={handlecloseModal}></button>\n                                        </header>\n                                        <section className=\"modal-card-body\">\n                                        {/* <StoreList standalone=\"true\" /> */}\n                                        <ProductCreate />\n                                        </section>\n                                        {/* <footer className=\"modal-card-foot\">\n                                        <button className=\"button is-success\">Save changes</button>\n                                        <button className=\"button\">Cancel</button>\n                                        </footer> */}\n                                    </div>\n                                </div>       \n        </div>\n    )\n}"]},"metadata":{},"sourceType":"module"}