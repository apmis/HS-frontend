{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport _regeneratorRuntime from \"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _objectSpread from \"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _asyncToGenerator from \"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _slicedToArray from \"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"/home/mfybaby/Documents/HealthStack2/HS-frontend/src/components/Ward/Inpatient.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$();\n\n/* eslint-disable */\nimport React, { useState, useContext, useEffect, useRef } from 'react';\nimport { useRouteMatch, useHistory } from 'react-router-dom'; //Route, Switch,Link, NavLink,\n\nimport client from '../../feathers';\nimport { DebounceInput } from 'react-debounce-input';\nimport { useForm } from \"react-hook-form\"; //import {useHistory} from 'react-router-dom'\n\nimport { UserContext, ObjectContext } from '../../context';\nimport { toast } from 'bulma-toast';\nimport { format, formatDistanceToNowStrict } from 'date-fns';\nimport AdmissionCreate from './AdmissionCreate';\nimport PatientProfile from '../ClientMgt/PatientProfile';\n/* import {ProductCreate} from './Products' */\n// eslint-disable-next-line\n//const searchfacility={};\n\nimport { Accordion, AccordionItem, AccordionItemHeading, AccordionItemButton, AccordionItemPanel } from 'react-accessible-accordion'; // Demo styles, see 'Styles' section below for some notes on use.\n\nimport 'react-accessible-accordion/dist/fancy-example.css';\nimport ClientBilledAdmission from './ClientAdmission';\nexport default function Inpatient() {\n  _s();\n\n  //const {state}=useContext(ObjectContext) //,setState\n  // eslint-disable-next-line\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      selectedProductEntry = _useState2[0],\n      setSelectedProductEntry = _useState2[1]; //const [showState,setShowState]=useState() //create|modify|detail\n\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      error = _useState4[0],\n      setError = _useState4[1]; // eslint-disable-next-line\n\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      success = _useState6[0],\n      setSuccess = _useState6[1]; // eslint-disable-next-line\n\n\n  var _useState7 = useState(\"\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      message = _useState8[0],\n      setMessage = _useState8[1];\n\n  var OrderServ = client.service('order'); //const history = useHistory()\n  // const {user,setUser} = useContext(UserContext)\n\n  var _useState9 = useState([]),\n      _useState10 = _slicedToArray(_useState9, 2),\n      facilities = _useState10[0],\n      setFacilities = _useState10[1]; // eslint-disable-next-line\n\n\n  var _useState11 = useState(),\n      _useState12 = _slicedToArray(_useState11, 2),\n      selectedDispense = _useState12[0],\n      setSelectedDispense = _useState12[1]; //\n  // eslint-disable-next-line\n\n\n  var _useContext = useContext(ObjectContext),\n      state = _useContext.state,\n      setState = _useContext.setState; // eslint-disable-next-line\n\n\n  var _useContext2 = useContext(UserContext),\n      user = _useContext2.user,\n      setUser = _useContext2.setUser;\n  /*  useEffect(() => {\n      const updatedOne= state.currentClients.filter(el=>(JSON.stringify(el.client_id)===JSON.stringify(state.DispenseModule.selectedDispense.client_id)))\n      console.log(\"udatedone\", updatedOne)\n      console.log(\"state\", state.currentClients)\n      handleRow(updatedOne)\n       return () => {\n           \n       }\n   }, []) */\n\n\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: \"section remPadTop\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"columns \",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"column is-2 \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"column is-8 \",\n        children: /*#__PURE__*/_jsxDEV(InpatientList, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"column is-2 \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Inpatient, \"n0B8kdy8zFPO223d+YW31T9UTUs=\");\n\n_c = Inpatient;\nexport function InpatientList() {\n  _s2();\n\n  var _this = this;\n\n  // const { register, handleSubmit, watch, errors } = useForm();\n  // eslint-disable-next-line\n  var history = useHistory();\n\n  var _useState13 = useState(false),\n      _useState14 = _slicedToArray(_useState13, 2),\n      error = _useState14[0],\n      setError = _useState14[1]; // eslint-disable-next-line\n\n\n  var _useState15 = useState(false),\n      _useState16 = _slicedToArray(_useState15, 2),\n      success = _useState16[0],\n      setSuccess = _useState16[1]; // eslint-disable-next-line\n\n\n  var _useState17 = useState(\"\"),\n      _useState18 = _slicedToArray(_useState17, 2),\n      message = _useState18[0],\n      setMessage = _useState18[1];\n\n  var OrderServ = client.service('admission'); //const history = useHistory()\n  // const {user,setUser} = useContext(UserContext)\n\n  var _useState19 = useState([]),\n      _useState20 = _slicedToArray(_useState19, 2),\n      facilities = _useState20[0],\n      setFacilities = _useState20[1]; // eslint-disable-next-line\n\n\n  var _useState21 = useState(),\n      _useState22 = _slicedToArray(_useState21, 2),\n      selectedDispense = _useState22[0],\n      setSelectedDispense = _useState22[1]; //\n  // eslint-disable-next-line\n\n\n  var _useContext3 = useContext(ObjectContext),\n      state = _useContext3.state,\n      setState = _useContext3.setState; // eslint-disable-next-line\n\n\n  var _useContext4 = useContext(UserContext),\n      user = _useContext4.user,\n      setUser = _useContext4.setUser;\n\n  var _useState23 = useState(\"\"),\n      _useState24 = _slicedToArray(_useState23, 2),\n      selectedMedication = _useState24[0],\n      setSelectedMedication = _useState24[1];\n\n  var handleSelectedClient = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(Client) {\n      var newClientModule;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              // await setSelectedClient(Client)\n              newClientModule = {\n                selectedClient: Client,\n                show: 'detail'\n              };\n              _context.next = 3;\n              return setState(function (prevstate) {\n                return _objectSpread(_objectSpread({}, prevstate), {}, {\n                  ClientModule: newClientModule\n                });\n              });\n\n            case 3:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function handleSelectedClient(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var handleMedicationRow = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(inpatient) {\n      var currClient, newClientModule;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              currClient = inpatient.client; // eslint-disable-next-line\n\n              currClient.ward = inpatient.ward_name;\n              currClient.bed = inpatient.bed;\n              currClient.bed_id = inpatient.bed_id;\n              currClient.ward_id = inpatient.ward_id;\n              currClient.admission_id = inpatient._id;\n              console.log(currClient); //currClient.details=inpatient\n\n              newClientModule = {\n                selectedClient: currClient,\n                show: 'modify'\n              };\n              _context2.next = 10;\n              return setState(function (prevstate) {\n                return _objectSpread(_objectSpread({}, prevstate), {}, {\n                  ClientModule: newClientModule\n                });\n              });\n\n            case 10:\n              //console.log(state)\n              history.push('/app/ward/encounter');\n\n            case 11:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function handleMedicationRow(_x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var handleCreateNew = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n      var newProductEntryModule;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              newProductEntryModule = {\n                selectedDispense: {},\n                show: 'create'\n              };\n              _context3.next = 3;\n              return setState(function (prevstate) {\n                return _objectSpread(_objectSpread({}, prevstate), {}, {\n                  DispenseModule: newProductEntryModule\n                });\n              });\n\n            case 3:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function handleCreateNew() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var handleSearch = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(val) {\n      var field;\n      return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              field = 'name';\n              console.log(val);\n              OrderServ.find({\n                query: {\n                  $or: [{\n                    order: {\n                      $regex: val,\n                      $options: 'i'\n                    }\n                  }, {\n                    order_status: {\n                      $regex: val,\n                      $options: 'i'\n                    }\n                  }, {\n                    clientname: {\n                      $regex: val,\n                      $options: 'i'\n                    }\n                  }],\n                  order_category: \"Admission Order\",\n                  fulfilled: \"False\",\n                  destination: user.currentEmployee.facilityDetail._id,\n                  destination_location: state.WardModule.selectedWard._id,\n                  order_status: \"Pending\",\n                  // storeId:state.StoreModule.selectedStore._id,\n                  //facility:user.currentEmployee.facilityDetail._id || \"\",\n                  $limit: 50,\n                  $sort: {\n                    createdAt: -1\n                  }\n                }\n              }).then( /*#__PURE__*/function () {\n                var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(res) {\n                  return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n                    while (1) {\n                      switch (_context4.prev = _context4.next) {\n                        case 0:\n                          console.log(res);\n                          setFacilities(res.groupedOrder); // await setState((prevstate)=>({...prevstate, currentClients:res.groupedOrder}))\n\n                          setMessage(\" ProductEntry  fetched successfully\");\n                          setSuccess(true);\n\n                        case 4:\n                        case \"end\":\n                          return _context4.stop();\n                      }\n                    }\n                  }, _callee4);\n                }));\n\n                return function (_x4) {\n                  return _ref5.apply(this, arguments);\n                };\n              }()).catch(function (err) {\n                // console.log(err)\n                setMessage(\"Error fetching ProductEntry, probable network issues \" + err);\n                setError(true);\n              });\n\n            case 3:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5);\n    }));\n\n    return function handleSearch(_x3) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  var getFacilities = /*#__PURE__*/function () {\n    var _ref6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6() {\n      var findProductEntry;\n      return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n        while (1) {\n          switch (_context6.prev = _context6.next) {\n            case 0:\n              _context6.next = 2;\n              return OrderServ.find({\n                query: {\n                  /* order_category:\"Admission Order\",\n                  fulfilled:\"False\", */\n                  facility: user.currentEmployee.facilityDetail._id,\n                  ward_id: state.WardModule.selectedWard._id,\n                  end_time: \"\",\n\n                  /*  order_status:\"Pending\",  */\n                  // need to set this finally\n                  //storeId:state.StoreModule.selectedStore._id,\n                  //clientId:state.ClientModule.selectedClient._id,\n                  $limit: 100,\n                  $sort: {\n                    bed: -1\n                  }\n                }\n              });\n\n            case 2:\n              findProductEntry = _context6.sent;\n              console.log(\"updatedorder\", findProductEntry.data);\n              _context6.next = 6;\n              return setFacilities(findProductEntry.data);\n\n            case 6:\n              _context6.next = 8;\n              return setState(function (prevstate) {\n                return _objectSpread(_objectSpread({}, prevstate), {}, {\n                  currentClients: findProductEntry.data\n                });\n              });\n\n            case 8:\n            case \"end\":\n              return _context6.stop();\n          }\n        }\n      }, _callee6);\n    }));\n\n    return function getFacilities() {\n      return _ref6.apply(this, arguments);\n    };\n  }(); //1.consider using props for global data\n\n\n  useEffect(function () {\n    // console.log(\"started\")\n    getFacilities();\n    OrderServ.on('created', function (obj) {\n      return getFacilities();\n    });\n    OrderServ.on('updated', function (obj) {\n      return getFacilities();\n    });\n    OrderServ.on('patched', function (obj) {\n      return getFacilities();\n    });\n    OrderServ.on('removed', function (obj) {\n      return getFacilities();\n    });\n    return function () {};\n  }, []);\n\n  var handleRow = /*#__PURE__*/function () {\n    var _ref7 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7(ProductEntry) {\n      var newProductEntryModule;\n      return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n        while (1) {\n          switch (_context7.prev = _context7.next) {\n            case 0:\n              _context7.next = 2;\n              return setSelectedDispense(ProductEntry);\n\n            case 2:\n              newProductEntryModule = {\n                selectedDispense: ProductEntry,\n                show: 'detail'\n              };\n              _context7.next = 5;\n              return setState(function (prevstate) {\n                return _objectSpread(_objectSpread({}, prevstate), {}, {\n                  DispenseModule: newProductEntryModule\n                });\n              });\n\n            case 5:\n            case \"end\":\n              return _context7.stop();\n          }\n        }\n      }, _callee7);\n    }));\n\n    return function handleRow(_x5) {\n      return _ref7.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    getFacilities();\n    return function () {};\n  }, [state.WardModule.selectedWard]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"level\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"level-left\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"level-item\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"field\",\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"control has-icons-left  \",\n              children: [/*#__PURE__*/_jsxDEV(DebounceInput, {\n                className: \"input is-small \",\n                type: \"text\",\n                placeholder: \"Search Tests\",\n                minLength: 3,\n                debounceTimeout: 400,\n                onChange: function onChange(e) {\n                  return handleSearch(e.target.value);\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 273,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"icon is-small is-left\",\n                children: /*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fas fa-search\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 279,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 278,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 272,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 271,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"level-item\",\n        children: [\" \", /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"is-size-6 has-text-weight-medium\",\n          children: \"INPATIENTS \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 50\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 285,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 268,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \" pullup\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \" is-fullwidth vscrollable pr-1\",\n        children: /*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"table is-striped  is-hoverable is-fullwidth is-scrollable mr-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                children: /*#__PURE__*/_jsxDEV(\"abbr\", {\n                  title: \"Serial No\",\n                  children: \"S/No\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 299,\n                  columnNumber: 57\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 299,\n                columnNumber: 53\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: /*#__PURE__*/_jsxDEV(\"abbr\", {\n                  title: \"Bed\",\n                  children: \"Bed\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 300,\n                  columnNumber: 57\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 300,\n                columnNumber: 53\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: /*#__PURE__*/_jsxDEV(\"abbr\", {\n                  title: \"Name\",\n                  children: \" Name\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 301,\n                  columnNumber: 57\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 301,\n                columnNumber: 53\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: /*#__PURE__*/_jsxDEV(\"abbr\", {\n                  title: \"Gender\",\n                  children: \"Gender\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 302,\n                  columnNumber: 57\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 302,\n                columnNumber: 53\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: /*#__PURE__*/_jsxDEV(\"abbr\", {\n                  title: \"Age\",\n                  children: \"Age\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 304,\n                  columnNumber: 57\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 304,\n                columnNumber: 53\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: /*#__PURE__*/_jsxDEV(\"abbr\", {\n                  title: \"Days\",\n                  children: \"Days on Admission\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 305,\n                  columnNumber: 57\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 305,\n                columnNumber: 53\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: /*#__PURE__*/_jsxDEV(\"abbr\", {\n                  title: \"Age\",\n                  children: \"Payment Mode\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 306,\n                  columnNumber: 57\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 306,\n                columnNumber: 53\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: /*#__PURE__*/_jsxDEV(\"abbr\", {\n                  title: \"Tags\",\n                  children: \"Tags\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 307,\n                  columnNumber: 57\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 307,\n                columnNumber: 53\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 298,\n              columnNumber: 49\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 297,\n            columnNumber: 45\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: facilities.map(function (order, i) {\n              return /*#__PURE__*/_jsxDEV(\"tr\", {\n                onClick: function onClick() {\n                  return handleMedicationRow(order);\n                },\n                className: order._id === ((selectedMedication === null || selectedMedication === void 0 ? void 0 : selectedMedication._id) || null) ? \"is-selected\" : \"\",\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  children: i + 1\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 317,\n                  columnNumber: 57\n                }, _this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: order.bed\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 318,\n                  columnNumber: 57\n                }, _this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: [order.client.firstname, \" \", order.client.lastname]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 319,\n                  columnNumber: 57\n                }, _this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: order.client.gender\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 321,\n                  columnNumber: 57\n                }, _this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: order.client.dob && /*#__PURE__*/_jsxDEV(_Fragment, {\n                    children: formatDistanceToNowStrict(new Date(order.client.dob))\n                  }, void 0, false)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 322,\n                  columnNumber: 57\n                }, _this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: [formatDistanceToNowStrict(new Date(order.createdAt), {\n                      addSuffix: true\n                    }), \"  \"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 323,\n                    columnNumber: 61\n                  }, _this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 323,\n                  columnNumber: 57\n                }, _this), \" \", /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: order.client.paymentinfo.map(function (pay, i) {\n                    return /*#__PURE__*/_jsxDEV(_Fragment, {\n                      children: [pay.paymentmode, \" \", pay.paymentmode === \"Cash\" ? \"\" : \":\", \" \", pay.organizationName, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 326,\n                        columnNumber: 140\n                      }, _this)]\n                    }, void 0, true);\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 324,\n                  columnNumber: 57\n                }, _this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: order.client.clientTags\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 329,\n                  columnNumber: 57\n                }, _this)]\n              }, order._id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 316,\n                columnNumber: 57\n              }, _this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 313,\n            columnNumber: 45\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 296,\n          columnNumber: 37\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true);\n}\n\n_s2(InpatientList, \"wMSsw0jw9SURDqipdOHYBuACFuQ=\", false, function () {\n  return [useHistory];\n});\n\n_c2 = InpatientList;\nexport function DispenseDetail() {\n  _s3();\n\n  var _this2 = this;\n\n  //const { register, handleSubmit, watch, setValue } = useForm(); //errors,\n  // eslint-disable-next-line\n  var _useState25 = useState(false),\n      _useState26 = _slicedToArray(_useState25, 2),\n      error = _useState26[0],\n      setError = _useState26[1]; //, \n\n\n  var _useState27 = useState(\"\"),\n      _useState28 = _slicedToArray(_useState27, 2),\n      selectedMedication = _useState28[0],\n      setSelectedMedication = _useState28[1];\n\n  var _useState29 = useState(\"\"),\n      _useState30 = _slicedToArray(_useState29, 2),\n      currentOrder = _useState30[0],\n      setCurrentOrder = _useState30[1]; // eslint-disable-next-line\n\n\n  var _useState31 = useState(\"\"),\n      _useState32 = _slicedToArray(_useState31, 2),\n      message = _useState32[0],\n      setMessage = _useState32[1]; //,\n  //const ProductEntryServ=client.service('/ProductEntry')\n  //const history = useHistory()\n  //const {user,setUser} = useContext(UserContext)\n\n\n  var _useContext5 = useContext(ObjectContext),\n      state = _useContext5.state,\n      setState = _useContext5.setState;\n\n  var OrderServ = client.service('order');\n  /* const [ProductEntry, setProductEntry] = useState(\"\")\n  const [facilities, setFacilities] = useState(\"\") */\n\n  var ProductEntry = state.DispenseModule.selectedDispense; //const facilities=ProductEntry.orders\n\n  var handleRow = /*#__PURE__*/function () {\n    var _ref8 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee8(ProductEntry) {\n      var newProductEntryModule;\n      return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n        while (1) {\n          switch (_context8.prev = _context8.next) {\n            case 0:\n              _context8.next = 2;\n              return setSelectedMedication(ProductEntry);\n\n            case 2:\n              newProductEntryModule = {\n                selectedMedication: ProductEntry,\n                show: 'detail'\n              };\n              _context8.next = 5;\n              return setState(function (prevstate) {\n                return _objectSpread(_objectSpread({}, prevstate), {}, {\n                  medicationModule: newProductEntryModule\n                });\n              });\n\n            case 5:\n            case \"end\":\n              return _context8.stop();\n          }\n        }\n      }, _callee8);\n    }));\n\n    return function handleRow(_x6) {\n      return _ref8.apply(this, arguments);\n    };\n  }();\n\n  var handleEdit = /*#__PURE__*/function () {\n    var _ref9 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee9(ProductEntry) {\n      var newProductEntryModule;\n      return _regeneratorRuntime.wrap(function _callee9$(_context9) {\n        while (1) {\n          switch (_context9.prev = _context9.next) {\n            case 0:\n              newProductEntryModule = {\n                selectedDispense: ProductEntry,\n                show: 'modify'\n              };\n              _context9.next = 3;\n              return setState(function (prevstate) {\n                return _objectSpread(_objectSpread({}, prevstate), {}, {\n                  DispenseModule: newProductEntryModule\n                });\n              });\n\n            case 3:\n            case \"end\":\n              return _context9.stop();\n          }\n        }\n      }, _callee9);\n    }));\n\n    return function handleEdit(_x7) {\n      return _ref9.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    var client1 = state.currentClients.find(function (el) {\n      return JSON.stringify(el.client_id) === JSON.stringify(state.DispenseModule.selectedDispense);\n    });\n    setCurrentOrder(client1); // console.log(client1)\n\n    return function () {};\n  }, []);\n  /*  \n      const setprod=async()=>{\n         await setProductEntry(state.DispenseModule.selectedDispense)\n     } */\n\n  useEffect(function () {\n    /* OrderServ.on('created', (obj)=>getFacilities())\n    OrderServ.on('updated', (obj)=>getFacilities())\n            OrderServ.on('removed', (obj)=>getFacilities()) */\n    OrderServ.on('patched', function (obj) {\n      //update state.DispenseModule.selectedDispense\n      // console.log(obj.clientId)\n      // console.log(\"currentClients\",state.currentClients)\n      var current1 = state.currentClients.find(function (el) {\n        return JSON.stringify(el.client_id) === JSON.stringify(obj.clientId);\n      });\n      setCurrentOrder(current1); // console.log(\"currentone\",current1)\n    });\n    return function () {};\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card \",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-header\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"card-header-title\",\n          children: \"Dispense Details\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 433,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 432,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-content vscrollable\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"table-container pullup \",\n          children: /*#__PURE__*/_jsxDEV(\"table\", {\n            className: \"table is-striped is-narrow is-hoverable is-fullwidth is-scrollable \",\n            children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  children: /*#__PURE__*/_jsxDEV(\"abbr\", {\n                    title: \"Serial No\",\n                    children: \"S/No\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 443,\n                    columnNumber: 45\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 443,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: /*#__PURE__*/_jsxDEV(\"abbr\", {\n                    title: \"Date\",\n                    children: \"Date\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 446,\n                    columnNumber: 45\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 446,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: /*#__PURE__*/_jsxDEV(\"abbr\", {\n                    title: \"Order\",\n                    children: \"Medication\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 447,\n                    columnNumber: 45\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 447,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Fulfilled\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 448,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: /*#__PURE__*/_jsxDEV(\"abbr\", {\n                    title: \"Status\",\n                    children: \"Status\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 449,\n                    columnNumber: 45\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 449,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: /*#__PURE__*/_jsxDEV(\"abbr\", {\n                    title: \"Requesting Physician\",\n                    children: \"Requesting Physician\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 450,\n                    columnNumber: 45\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 450,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 442,\n                columnNumber: 41\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 441,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"tfoot\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 455,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n              children: state.DispenseModule.selectedDispense.orders.map(function (order, i) {\n                return /*#__PURE__*/_jsxDEV(\"tr\", {\n                  onClick: function onClick() {\n                    return handleRow(order);\n                  },\n                  className: order._id === ((selectedMedication === null || selectedMedication === void 0 ? void 0 : selectedMedication._id) || null) ? \"is-selected\" : \"\",\n                  children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                    children: i + 1\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 463,\n                    columnNumber: 48\n                  }, _this2), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: format(new Date(order.createdAt), 'dd-MM-yy')\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 468,\n                      columnNumber: 49\n                    }, _this2)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 468,\n                    columnNumber: 45\n                  }, _this2), \" \", /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: order.order\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 469,\n                    columnNumber: 43\n                  }, _this2), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: order.fulfilled === \"True\" ? \"Yes\" : \"No\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 470,\n                    columnNumber: 45\n                  }, _this2), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: order.order_status\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 471,\n                    columnNumber: 45\n                  }, _this2), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: order.requestingdoctor_Name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 472,\n                    columnNumber: 45\n                  }, _this2)]\n                }, order._id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 461,\n                  columnNumber: 45\n                }, _this2);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 458,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 440,\n            columnNumber: 33\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 439,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 437,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 431,\n      columnNumber: 9\n    }, this)\n  }, void 0, false);\n}\n\n_s3(DispenseDetail, \"txCZ1/G0eCP6avDchgTQICwi/A0=\");\n\n_c3 = DispenseDetail;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"Inpatient\");\n$RefreshReg$(_c2, \"InpatientList\");\n$RefreshReg$(_c3, \"DispenseDetail\");","map":{"version":3,"sources":["/home/mfybaby/Documents/HealthStack2/HS-frontend/src/components/Ward/Inpatient.js"],"names":["React","useState","useContext","useEffect","useRef","useRouteMatch","useHistory","client","DebounceInput","useForm","UserContext","ObjectContext","toast","format","formatDistanceToNowStrict","AdmissionCreate","PatientProfile","Accordion","AccordionItem","AccordionItemHeading","AccordionItemButton","AccordionItemPanel","ClientBilledAdmission","Inpatient","selectedProductEntry","setSelectedProductEntry","error","setError","success","setSuccess","message","setMessage","OrderServ","service","facilities","setFacilities","selectedDispense","setSelectedDispense","state","setState","user","setUser","InpatientList","history","selectedMedication","setSelectedMedication","handleSelectedClient","Client","newClientModule","selectedClient","show","prevstate","ClientModule","handleMedicationRow","inpatient","currClient","ward","ward_name","bed","bed_id","ward_id","admission_id","_id","console","log","push","handleCreateNew","newProductEntryModule","DispenseModule","handleSearch","val","field","find","query","$or","order","$regex","$options","order_status","clientname","order_category","fulfilled","destination","currentEmployee","facilityDetail","destination_location","WardModule","selectedWard","$limit","$sort","createdAt","then","res","groupedOrder","catch","err","getFacilities","facility","end_time","findProductEntry","data","currentClients","on","obj","handleRow","ProductEntry","e","target","value","map","i","firstname","lastname","gender","dob","Date","addSuffix","paymentinfo","pay","paymentmode","organizationName","clientTags","DispenseDetail","currentOrder","setCurrentOrder","medicationModule","handleEdit","client1","el","JSON","stringify","client_id","current1","clientId","orders","requestingdoctor_Name"],"mappings":"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","sourcesContent":["/* eslint-disable */\nimport React, {useState,useContext, useEffect,useRef} from 'react'\nimport {  useRouteMatch,  useHistory} from 'react-router-dom' //Route, Switch,Link, NavLink,\nimport client from '../../feathers'\nimport {DebounceInput} from 'react-debounce-input';\nimport { useForm } from \"react-hook-form\";\n//import {useHistory} from 'react-router-dom'\nimport {UserContext,ObjectContext} from '../../context'\nimport {toast} from 'bulma-toast'\nimport {format, formatDistanceToNowStrict } from 'date-fns'\nimport AdmissionCreate from './AdmissionCreate'\nimport PatientProfile from '../ClientMgt/PatientProfile'\n/* import {ProductCreate} from './Products' */\n// eslint-disable-next-line\n//const searchfacility={};\nimport {\n    Accordion,\n    AccordionItem,\n    AccordionItemHeading,\n    AccordionItemButton,\n    AccordionItemPanel,\n} from 'react-accessible-accordion';\n\n// Demo styles, see 'Styles' section below for some notes on use.\nimport 'react-accessible-accordion/dist/fancy-example.css';\nimport ClientBilledAdmission from './ClientAdmission';\n\n\n\nexport default function Inpatient() {\n    //const {state}=useContext(ObjectContext) //,setState\n    // eslint-disable-next-line\n    const [selectedProductEntry,setSelectedProductEntry]=useState()\n    //const [showState,setShowState]=useState() //create|modify|detail\n    const [error, setError] =useState(false)\n    // eslint-disable-next-line\n   const [success, setSuccess] =useState(false)\n    // eslint-disable-next-line\n  const [message, setMessage] = useState(\"\") \n   const OrderServ=client.service('order')\n   //const history = useHistory()\n  // const {user,setUser} = useContext(UserContext)\n   const [facilities,setFacilities]=useState([])\n    // eslint-disable-next-line\n  const [selectedDispense, setSelectedDispense]=useState() //\n   // eslint-disable-next-line\n   const {state,setState}=useContext(ObjectContext)\n   // eslint-disable-next-line\n   const {user,setUser}=useContext(UserContext)\n\n\n\n\n    /*  useEffect(() => {\n        const updatedOne= state.currentClients.filter(el=>(JSON.stringify(el.client_id)===JSON.stringify(state.DispenseModule.selectedDispense.client_id)))\n        console.log(\"udatedone\", updatedOne)\n        console.log(\"state\", state.currentClients)\n        handleRow(updatedOne)\n         return () => {\n             \n         }\n     }, []) */\n    \n    return(\n        <section className= \"section remPadTop\">\n           {/*  <div className=\"level\">\n            <div className=\"level-item\"> <span className=\"is-size-6 has-text-weight-medium\">ProductEntry  Module</span></div>\n            </div> */}\n            <div className=\"columns \">\n            <div className=\"column is-2 \">\n                \n               {/*  {(state.AdmissionModule.show ==='detail')&&<AdmissionCreate />} */}\n                </div>\n\n                <div className=\"column is-8 \">\n                    <InpatientList />\n                    </div>\n              \n              \n                <div className=\"column is-2 \">\n                \n               {/*  {(state.AdmissionModule.show ==='detail')&&<PatientProfile />} */}\n                </div>\n\n            </div>                            \n            </section>\n       \n    )\n    \n}\n\nexport function InpatientList(){\n   // const { register, handleSubmit, watch, errors } = useForm();\n    // eslint-disable-next-line\n    const history =useHistory()\n    const [error, setError] =useState(false)\n     // eslint-disable-next-line\n    const [success, setSuccess] =useState(false)\n     // eslint-disable-next-line\n   const [message, setMessage] = useState(\"\") \n    const OrderServ=client.service('admission')\n    //const history = useHistory()\n   // const {user,setUser} = useContext(UserContext)\n    const [facilities,setFacilities]=useState([])\n     // eslint-disable-next-line\n   const [selectedDispense, setSelectedDispense]=useState() //\n    // eslint-disable-next-line\n    const {state,setState}=useContext(ObjectContext)\n    // eslint-disable-next-line\n    const {user,setUser}=useContext(UserContext)\n    const [selectedMedication, setSelectedMedication] =useState(\"\")\n\n    const handleSelectedClient= async(Client)=>{\n        // await setSelectedClient(Client)\n         const    newClientModule={\n             selectedClient:Client,\n             show :'detail'\n         }\n        await setState((prevstate)=>({...prevstate, ClientModule:newClientModule}))\n     }\n\n    const handleMedicationRow= async(inpatient)=>{ \n      \n        \n      let currClient =inpatient.client \n      // eslint-disable-next-line\n        currClient.ward=inpatient.ward_name\n        currClient.bed=inpatient.bed\n        currClient.bed_id=inpatient.bed_id\n        currClient.ward_id=inpatient.ward_id\n        currClient.admission_id=inpatient._id\n        console.log(currClient)\n        //currClient.details=inpatient\n\n   \n         const    newClientModule={\n             selectedClient:currClient,\n             show :'modify'\n         }\n        await setState((prevstate)=>({...prevstate, ClientModule:newClientModule}))\n        //console.log(state)\n        \n     \n      history.push('/app/ward/encounter')\n    \n    }\n\n    const handleCreateNew = async()=>{\n        const    newProductEntryModule={\n            selectedDispense:{},\n            show :'create'\n            }\n       await setState((prevstate)=>({...prevstate, DispenseModule:newProductEntryModule}))\n       //console.log(state)\n        \n\n    }\n  \n\n    const handleSearch= async(val)=>{\n       const field='name'\n       console.log(val)\n       OrderServ.find({query: {\n           $or:[\n                {order: {\n                    $regex:val,\n                    $options:'i'\n                   \n                }},\n               { order_status: {\n                    $regex:val,\n                    $options:'i'\n                   \n                }},\n                {clientname: {\n                    $regex:val,\n                    $options:'i'\n                   \n                }}\n                ],\n                order_category:\"Admission Order\",\n                fulfilled:\"False\",\n                destination: user.currentEmployee.facilityDetail._id,\n                destination_location:state.WardModule.selectedWard._id,\n                order_status:\"Pending\",\n               // storeId:state.StoreModule.selectedStore._id,\n               //facility:user.currentEmployee.facilityDetail._id || \"\",\n                $limit:50,\n                $sort: {\n                    createdAt: -1\n                  }\n                }}).then( async(res)=>{\n               console.log(res)\n               setFacilities(res.groupedOrder)\n              // await setState((prevstate)=>({...prevstate, currentClients:res.groupedOrder}))\n                setMessage(\" ProductEntry  fetched successfully\")\n                setSuccess(true)\n            })\n            .catch((err)=>{\n               // console.log(err)\n                setMessage(\"Error fetching ProductEntry, probable network issues \"+ err )\n                setError(true)\n            })\n        }\n\n    const getFacilities= async()=>{\n       \n         \n    const findProductEntry= await OrderServ.find(\n            {query: {\n                /* order_category:\"Admission Order\",\n                fulfilled:\"False\", */\n                facility: user.currentEmployee.facilityDetail._id,\n                ward_id:state.WardModule.selectedWard._id,\n                end_time:\"\",\n               /*  order_status:\"Pending\",  */ // need to set this finally\n                //storeId:state.StoreModule.selectedStore._id,\n                //clientId:state.ClientModule.selectedClient._id,\n                $limit:100,\n                $sort: {\n                    bed: -1\n                }\n                }})\n\n                \n           console.log(\"updatedorder\", findProductEntry.data)\n            await setFacilities(findProductEntry.data)\n            await setState((prevstate)=>({...prevstate, currentClients:findProductEntry.data}))\n            }   \n\n    //1.consider using props for global data\n    useEffect(() => {\n        // console.log(\"started\")\n            getFacilities()\n            OrderServ.on('created', (obj)=>getFacilities())\n            OrderServ.on('updated', (obj)=>getFacilities())\n            OrderServ.on('patched', (obj)=>getFacilities())\n            OrderServ.on('removed', (obj)=>getFacilities())\n            return () => {\n            \n            }\n            },[])\n\n    const handleRow= async(ProductEntry)=>{\n    \n        await setSelectedDispense(ProductEntry)\n\n        const    newProductEntryModule={\n            selectedDispense:ProductEntry,\n            show :'detail'\n        }\n        await setState((prevstate)=>({...prevstate, DispenseModule:newProductEntryModule}))\n        //console.log(state)\n        \n        }\n\n   useEffect(() =>{\n    getFacilities()\n\n            return ()=>{\n                \n            }\n\n   }, [state.WardModule.selectedWard])\n\n    return(     \n            <>  \n                <div className=\"level\">\n                    <div className=\"level-left\">\n                        <div className=\"level-item\">\n                            <div className=\"field\">\n                                <p className=\"control has-icons-left  \">\n                                    <DebounceInput className=\"input is-small \" \n                                        type=\"text\" placeholder=\"Search Tests\"\n                                        minLength={3}\n                                        debounceTimeout={400}\n                                        onChange={(e)=>handleSearch(e.target.value)} />\n                                    <span className=\"icon is-small is-left\">\n                                        <i className=\"fas fa-search\"></i>\n                                    </span>\n                                </p>\n                            </div>\n                        </div>\n                    </div>\n                    <div className=\"level-item\"> <span className=\"is-size-6 has-text-weight-medium\">INPATIENTS </span></div>\n                     {/* <div className=\"level-right\">\n                       <div className=\"level-item\"> \n                            <div nclassName=\"level-item\"><div className=\"button is-success is-small\" onClick={handleCreateNew}>New</div></div>\n                        </div> \n                    </div>*/}\n\n                </div>\n                <div className=\" pullup\">\n                    <div className=\" is-fullwidth vscrollable pr-1\">   \n                \n                                    <table className=\"table is-striped  is-hoverable is-fullwidth is-scrollable mr-2\">\n                                            <thead>\n                                                <tr>\n                                                    <th><abbr title=\"Serial No\">S/No</abbr></th>\n                                                    <th><abbr title=\"Bed\">Bed</abbr></th>\n                                                    <th><abbr title=\"Name\"> Name</abbr></th>\n                                                    <th><abbr title=\"Gender\">Gender</abbr></th> \n                                                   {/*  <th><abbr title=\"Status\">Last Name</abbr></th> */}\n                                                    <th><abbr title=\"Age\">Age</abbr></th>\n                                                    <th><abbr title=\"Days\">Days on Admission</abbr></th>\n                                                    <th><abbr title=\"Age\">Payment Mode</abbr></th>\n                                                    <th><abbr title=\"Tags\">Tags</abbr></th>\n                                                   {/*  <th>Diagnosis</th>\n                                                    \n                                                    */}\n                                                </tr>\n                                            </thead>\n                                            <tbody>\n                                            { facilities.map((order, i)=>(\n\n                                                        <tr key={order._id} onClick={()=>handleMedicationRow(order)} className={order._id===(selectedMedication?._id||null)?\"is-selected\":\"\"}>                                         \n                                                        <th>{i+1}</th>\n                                                        <th>{order.bed}</th>\n                                                        <th>{order.client.firstname} {order.client.lastname}</th>\n                                                        \n                                                        <td>{order.client.gender}</td>\n                                                        <td>{order.client.dob && <>{formatDistanceToNowStrict(new Date(order.client.dob))}</>}</td>\n                                                        <td><span>{formatDistanceToNowStrict(new Date(order.createdAt),{addSuffix: true})}  </span></td> {/*  {format(new Date(order.createdAt),'dd-MM-yy')} */}\n                                                        <td>{order.client.paymentinfo.map((pay,i)=>(\n                                                                <>\n                                                                {pay.paymentmode} {pay.paymentmode===\"Cash\"?\"\":\":\" } {pay.organizationName}<br></br>\n                                                                </>\n                                                            ))}</td>\n                                                        <td>{order.client.clientTags}</td>\n                                                        </tr>\n\n                                                ))}\n                                            </tbody>\n                                            </table>\n                                            \n                             \n                    </div>                   \n                </div>  \n            </>          \n        )\n    }\n\n\nexport function DispenseDetail(){\n    //const { register, handleSubmit, watch, setValue } = useForm(); //errors,\n     // eslint-disable-next-line\n    const [error, setError] =useState(false) //, \n    const [selectedMedication, setSelectedMedication] =useState(\"\")\n    const [currentOrder, setCurrentOrder] =useState(\"\")\n     // eslint-disable-next-line\n    const [message, setMessage] = useState(\"\") //,\n    //const ProductEntryServ=client.service('/ProductEntry')\n    //const history = useHistory()\n    //const {user,setUser} = useContext(UserContext)\n    const {state,setState} = useContext(ObjectContext)\n    const OrderServ=client.service('order')\n    /* const [ProductEntry, setProductEntry] = useState(\"\")\n    const [facilities, setFacilities] = useState(\"\") */\n\n let ProductEntry =state.DispenseModule.selectedDispense\n   //const facilities=ProductEntry.orders\n\n   const handleRow= async(ProductEntry)=>{\n    //console.log(\"b4\",state)\n\n    //console.log(\"handlerow\",ProductEntry)\n\n    await setSelectedMedication(ProductEntry)\n\n    const    newProductEntryModule={\n        selectedMedication:ProductEntry,\n        show :'detail'\n    }\n  await setState((prevstate)=>({...prevstate, medicationModule:newProductEntryModule}))\n   //console.log(state)\n  // ProductEntry.show=!ProductEntry.show\n\n}\n\n    const handleEdit= async(ProductEntry)=>{\n        const    newProductEntryModule={\n            selectedDispense:ProductEntry,\n            show :'modify'\n        }\n       await setState((prevstate)=>({...prevstate, DispenseModule:newProductEntryModule}))\n       //console.log(state)\n       \n    }\n\n    useEffect(() => {\n\n\n      const client1=  state.currentClients.find(el=>{\n            return JSON.stringify(el.client_id)===JSON.stringify(state.DispenseModule.selectedDispense)\n        })\n\n    setCurrentOrder(client1)\n   // console.log(client1)\n        return () => {\n        \n        }\n    }, [])\n   \n\n /*  \n     const setprod=async()=>{\n        await setProductEntry(state.DispenseModule.selectedDispense)\n    } */\n \n    useEffect(() => {\n        /* OrderServ.on('created', (obj)=>getFacilities())\n        OrderServ.on('updated', (obj)=>getFacilities())\n       \n        OrderServ.on('removed', (obj)=>getFacilities()) */\n        OrderServ.on('patched',  (obj)=>{\n            //update state.DispenseModule.selectedDispense\n           // console.log(obj.clientId)\n           // console.log(\"currentClients\",state.currentClients)\n           const current1=state.currentClients.find(el=>(JSON.stringify(el.client_id)===JSON.stringify(obj.clientId)))\n           setCurrentOrder(current1)\n          // console.log(\"currentone\",current1)\n        })\n      \n        return () => {\n         \n        }\n    },[])\n \n    return (\n        <>\n        <div className=\"card \">\n            <div className=\"card-header\">\n                <p className=\"card-header-title\">\n                    Dispense Details\n                </p>\n            </div>\n            <div className=\"card-content vscrollable\">\n            {/* {JSON.stringify(ProductEntry.orders,2,10)} */}\n            <div className=\"table-container pullup \">\n                                <table className=\"table is-striped is-narrow is-hoverable is-fullwidth is-scrollable \">\n                                    <thead>\n                                        <tr>\n                                        <th><abbr title=\"Serial No\">S/No</abbr></th>\n                                        {/* <th><abbr title=\"Client Name\">Client Name</abbr></th> */}\n                                        {/* <th><abbr title=\"Number of Orders\"># of Medication</abbr></th> */}\n                                        <th><abbr title=\"Date\">Date</abbr></th>\n                                        <th><abbr title=\"Order\">Medication</abbr></th>\n                                        <th>Fulfilled</th>\n                                        <th><abbr title=\"Status\">Status</abbr></th>\n                                        <th><abbr title=\"Requesting Physician\">Requesting Physician</abbr></th>\n                                        \n                                        {/* <th><abbr title=\"Actions\">Actions</abbr></th> */}\n                                        </tr>\n                                    </thead>\n                                    <tfoot>\n                                        \n                                    </tfoot>\n                                    <tbody>\n                                        {state.DispenseModule.selectedDispense.orders.map((order, i)=>(\n\n                                            <tr key={order._id} onClick={()=>handleRow(order)} className={order._id===(selectedMedication?._id||null)?\"is-selected\":\"\"}>\n                                            \n                                               <th>{i+1}</th>\n                                                 {/* <td>{ProductEntry.clientname}</td> \n                                                <td>{ProductEntry.orders.length}</td> */}\n                                           \n                                           \n                                            <td><span>{format(new Date(order.createdAt),'dd-MM-yy')}</span></td> {/* {formatDistanceToNowStrict(new Date(ProductEntry.createdAt),{addSuffix: true})} <br/> */} \n                                          <th>{order.order}</th>\n                                            <td>{order.fulfilled===\"True\"?\"Yes\":\"No\"}</td>\n                                            <td>{order.order_status}</td>\n                                            <td>{order.requestingdoctor_Name}</td>\n                                            \n                                           {/*  <td><span className=\"showAction\"  >...</span></td> */}\n                                           \n                                            </tr>\n\n                                        ))}\n                                    </tbody>\n                                    </table>\n                        \n                </div>              \n               \n            </div>\n        </div>\n        </>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}