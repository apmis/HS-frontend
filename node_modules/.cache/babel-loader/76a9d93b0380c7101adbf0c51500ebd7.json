{"ast":null,"code":"import{Fragment as _Fragment}from\"react/jsx-runtime\";import _defineProperty from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _slicedToArray from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";/* eslint-disable */import React,{useState,useContext,useEffect,useRef}from'react';import{useRouteMatch,useHistory}from'react-router-dom';//Route, Switch,Link, NavLink,\nimport client from'../../feathers';import{DebounceInput}from'react-debounce-input';import{useForm}from\"react-hook-form\";//import {useHistory} from 'react-router-dom'\nimport{UserContext,ObjectContext}from'../../context';import{toast}from'bulma-toast';import{formatDistanceToNowStrict}from'date-fns';import ClientFinInfo from'./ClientFinInfo';import BillServiceCreate from'../Finance/BillServiceCreate';import{AppointmentCreate}from'../Clinic/Appointments';import InfiniteScroll from\"react-infinite-scroll-component\";import ClientBilledPrescription from'../Finance/ClientBill';import ClientGroup from'./ClientGroup';import DatePicker from\"react-datepicker\";import\"react-datepicker/dist/react-datepicker.css\";import{OrgFacilitySearch,SponsorSearch}from'../helpers/FacilitySearch';var random=require('random-string-generator');// eslint-disable-next-line\nvar searchfacility={};export default function Beneficiary(){var _useContext=useContext(ObjectContext),state=_useContext.state;//,setState\n// eslint-disable-next-line\nvar _useState=useState(),_useState2=_slicedToArray(_useState,2),selectedClient=_useState2[0],setSelectedClient=_useState2[1];//const [showState,setShowState]=useState() //create|modify|detail\nreturn/*#__PURE__*/_jsx(\"section\",{className:\"section remPadTop\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"columns \",children:[/*#__PURE__*/_jsx(\"div\",{className:\"column is-6 \",children:/*#__PURE__*/_jsx(ClientList,{})}),/*#__PURE__*/_jsxs(\"div\",{className:\"column is-6 \",children:[state.ClientModule.show==='List'&&/*#__PURE__*/_jsx(ClientList,{}),state.ClientModule.show==='create'&&/*#__PURE__*/_jsx(BeneficiaryCreate,{}),state.ClientModule.show==='detail'&&/*#__PURE__*/_jsx(ClientDetail,{}),state.ClientModule.show==='modify'&&/*#__PURE__*/_jsx(ClientModify,{Client:selectedClient})]})]})});}export function ClientCreate(_ref){var closeModal=_ref.closeModal;var _useForm=useForm(),register=_useForm.register,handleSubmit=_useForm.handleSubmit,setValue=_useForm.setValue,getValues=_useForm.getValues,reset=_useForm.reset;//, watch, errors, reset \n// eslint-disable-next-line\nvar _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];// eslint-disable-next-line\nvar _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),success=_useState6[0],setSuccess=_useState6[1];// eslint-disable-next-line\nvar _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),message=_useState8[0],setMessage=_useState8[1];// eslint-disable-next-line\nvar _useState9=useState(),_useState10=_slicedToArray(_useState9,2),facility=_useState10[0],setFacility=_useState10[1];var ClientServ=client.service('client');var mpiServ=client.service('mpi');//const history = useHistory()\nvar _useContext2=useContext(UserContext),user=_useContext2.user;//,setUser\nvar _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),billModal=_useState12[0],setBillModal=_useState12[1];var _useState13=useState([]),_useState14=_slicedToArray(_useState13,2),patList=_useState14[0],setPatList=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),dependant=_useState16[0],setDependant=_useState16[1];// eslint-disable-next-line\nvar _useState17=useState(),_useState18=_slicedToArray(_useState17,2),currentUser=_useState18[0],setCurrentUser=_useState18[1];var _useState19=useState(),_useState20=_slicedToArray(_useState19,2),date=_useState20[0],setDate=_useState20[1];var _useContext3=useContext(ObjectContext),state=_useContext3.state,setState=_useContext3.setState;// eslint-disable-next-line\nvar getSearchfacility=function getSearchfacility(obj){setValue(\"facility\",obj._id,{shouldValidate:true,shouldDirty:true});};var handleDate=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(date){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setDate(date);case 1:case\"end\":return _context.stop();}}},_callee);}));return function handleDate(_x){return _ref2.apply(this,arguments);};}();useEffect(function(){setCurrentUser(user);//console.log(currentUser)\nreturn function(){};},[user]);//check user for facility or get list of facility  \nuseEffect(function(){//setFacility(user.activeClient.FacilityId)//\nif(!user.stacker){/*    console.log(currentUser)\n        setValue(\"facility\", user.currentEmployee.facilityDetail._id,  {\n            shouldValidate: true,\n            shouldDirty: true\n        })  */}});var checkClient=function checkClient(){var data=getValues();data.dob=date;var obj={firstname:data.firstname,middlename:data.middlename,lastname:data.lastname,gender:data.gender,email:data.email,phone:data.phone,dob:data.dob};/* find if there is a match with the paramters entered\n          run search if \n            1.phone no alone or  \n            2.email alone or \n            3.both is entered\n            4. all other 5 parameters\n\n        */var query={};if(!!data.phone){query.phone=data.phone;checkQuery(query);}if(!!data.email){query.email=data.email;checkQuery(query);}if(!!data.firstname&&!!data.lastname&&!!data.gender&&!!data.dob){// console.log(\"simpa\")\ndata.middlename=data.middlename||\"\";query.gender=data.gender,query.dob=data.dob,query.$or=[{firstname:data.firstname,lastname:data.lastname,middlename:data.middlename},{firstname:data.firstname,lastname:data.middlename,middlename:data.lastname},{firstname:data.middlename,lastname:data.lastname,middlename:data.firstname},{firstname:data.middlename,lastname:data.firstname,middlename:data.lastname},{firstname:data.lastname,lastname:data.firstname,middlename:data.middlename},{firstname:data.lastname,lastname:data.middlename,middlename:data.firstname}];checkQuery(query);}};var checkQuery=function checkQuery(query){setPatList([]);if(!(query&&Object.keys(query).length===0&&query.constructor===Object)){ClientServ.find({query:query}).then(function(res){console.log(res);if(res.total>0){// alert(res.total)\nsetPatList(res.data);setBillModal(true);return;}}).catch(function(err){console.log(err);});}};var handleBill=function handleBill(){setBillModal(true);};var handlecloseModal3=function handlecloseModal3(){setBillModal(false);};var choosen=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(client){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:case\"end\":return _context2.stop();}}},_callee2);}));return function choosen(_x2){return _ref3.apply(this,arguments);};}();var dupl=function dupl(client){toast({message:'Client previously registered in this facility',type:'is-danger',dismissible:true,pauseOnHover:true});reset();setPatList([]);};var reg=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(client){var newPat;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(!(client.relatedfacilities.findIndex(function(el){return el.facility===user.currentEmployee.facilityDetail._id;})===-1)){_context3.next=4;break;}//create mpi record\nnewPat={client:client._id,facility:user.currentEmployee.facilityDetail._id,mrn:client.mrn,clientTags:client.clientTags,relfacilities:client.relatedfacilities};//console.log(newPat)\n_context3.next=4;return mpiServ.create(newPat).then(function(resp){toast({message:'Client created succesfully',type:'is-success',dismissible:true,pauseOnHover:true});}).catch(function(err){toast({message:'Error creating Client '+err,type:'is-danger',dismissible:true,pauseOnHover:true});});case 4://reset form\nreset();setPatList([]);//cash payment\ncase 6:case\"end\":return _context3.stop();}}},_callee3);}));return function reg(_x3){return _ref4.apply(this,arguments);};}();var depen=function depen(client){setDependant(true);};var onSubmit=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(data,e){var confirm;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(date){_context4.next=3;break;}toast({message:'Please enter Date of Birth! ',type:'is-danger',dismissible:true,pauseOnHover:true});return _context4.abrupt(\"return\");case 3:e.preventDefault();setMessage(\"\");setError(false);setSuccess(false);checkClient();if(!(patList.length>0)){_context4.next=12;break;}if(dependant){_context4.next=11;break;}return _context4.abrupt(\"return\");case 11://alert(\"something\"+\",\"+ patList.length)\n//let confirm = window.confirm(\"Is this person a dependant with parent phone number?\")\n// setOption(confirm)\nsetPatList([]);case 12:// data.createdby=user._id\n//  console.log(data);\nif(user.currentEmployee){data.facility=user.currentEmployee.facilityDetail._id;// or from facility dropdown\n}confirm=window.confirm(\"You are about to register a new client \".concat(data.firstname,\"  \").concat(data.middlename,\" \").concat(data.lastname,\" ?\"));if(!confirm){_context4.next=18;break;}data.dob=date;_context4.next=18;return ClientServ.create(data).then(function(res){console.log(res);//console.log(JSON.stringify(res))\ne.target.reset();/*  setMessage(\"Created Client successfully\") */setSuccess(true);toast({message:'Client created succesfully',type:'is-success',dismissible:true,pauseOnHover:true});setSuccess(false);setPatList([]);setDependant(false);setDate();var newClientModule={};//add to context\n// if principal\nif(state.currBeneficiary===\"principal\"){newClientModule={principal:res,dependent:state.Beneficiary.dependent,others:state.Beneficiary.others,show:'create'};}if(state.currBeneficiary===\"dependent\"){newClientModule={principal:state.Beneficiary.principal,dependent:[].concat(_toConsumableArray(state.Beneficiary.dependent),[res]),others:state.Beneficiary.others,show:'create'};}// if dependent\n/*   const newClientModule={\n                    principal:principal,\n                    dependent:dependents,\n                    others:{},\n                    show:'create'\n                    }          */setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{Beneficiary:newClientModule});});closeModal();}).catch(function(err){toast({message:'Error creating Client '+err,type:'is-danger',dismissible:true,pauseOnHover:true});setPatList([]);setDependant(false);});case 18:case\"end\":return _context4.stop();}}},_callee4);}));return function onSubmit(_x4,_x5){return _ref5.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card \",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsx(\"p\",{className:\"card-header-title\",children:\"Create Client\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-content vscrollable remPad1\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsx(\"p\",{className:\" is-small\",children:\"Names\"}),/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field-body\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left has-icons-right\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small is-danger\",ref:register({required:true}),name:\"firstname\",type:\"text\",placeholder:\"First Name\",onBlur:checkClient}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-hospital\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left has-icons-right\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register(),name:\"middlename\",type:\"text\",placeholder:\"Middle Name\",onBlur:checkClient}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-map-signs\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small is-danger\",ref:register({required:true}),name:\"lastname\",type:\"text\",placeholder:\"Last Name\",onBlur:checkClient}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\" fas fa-user-md \"})})]})})]})}),/*#__PURE__*/_jsx(\"p\",{className:\" is-small\",children:\"Biodata\"}),/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field-body\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsx(\"p\",{className:\"control has-icons-left is-danger\",children:/*#__PURE__*/_jsx(DatePicker,_defineProperty({className:\"is-danger\",selected:date,onChange:function onChange(date){return handleDate(date);},dateFormat:\"dd/MM/yyyy\",placeholderText:\"Enter date with dd/MM/yyyy format \"//isClearable\n},\"className\",\"red-border is-small\"))})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register(),name:\"gender\",type:\"text\",placeholder:\"Gender\",onBlur:checkClient}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-envelope\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register(),name:\"maritalstatus\",type:\"text\",placeholder:\"Marital Status\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-envelope\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register(),name:\"mrn\",type:\"text\",placeholder:\"Medical Records Number\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-envelope\"})})]})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field-body\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register(),name:\"religion\",type:\"text\",placeholder:\"Religion\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-envelope\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register(),name:\"profession\",type:\"text\",placeholder:\"Profession\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-envelope\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small is-danger\",ref:register({required:true}),name:\"phone\",type:\"text\",placeholder:\" Phone No\",onBlur:checkClient}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-phone-alt\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small \",ref:register(),name:\"email\",type:\"email\",placeholder:\"Email\",onBlur:checkClient}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-envelope\"})})]})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register(),name:\"clientTags\",type:\"text\",placeholder:\"Tags\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-envelope\"})})]})}),/*#__PURE__*/_jsx(\"p\",{className:\" is-small\",children:\"Address\"}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register(),name:\"address\",type:\"text\",placeholder:\"Residential Address\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-envelope\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field-body\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register(),name:\"city\",type:\"text\",placeholder:\"Town/City\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-envelope\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register(),name:\"lga\",type:\"text\",placeholder:\"Local Govt Area\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-envelope\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register(),name:\"state\",type:\"text\",placeholder:\"State\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-envelope\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register(),name:\"country\",type:\"text\",placeholder:\"Country\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-envelope\"})})]})})]})}),/*#__PURE__*/_jsx(\"p\",{className:\" is-small\",children:\"Medical Data\"}),/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field-body\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register(),name:\"bloodgroup\",type:\"text\",placeholder:\"Blood Group\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-envelope\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register(),name:\"genotype\",type:\"text\",placeholder:\"Genotype\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-envelope\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register(),name:\"disabilities\",type:\"text\",placeholder:\"Disabilities\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-envelope\"})})]})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field-body\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register(),name:\"allergies\",type:\"text\",placeholder:\"Allergies\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-envelope\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register(),name:\"comorbidities\",type:\"text\",placeholder:\"Co-mobidities\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-envelope\"})})]})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register(),name:\"specificDetails\",type:\"text\",placeholder:\"Specific Details about patient\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-envelope\"})})]})}),/*#__PURE__*/_jsx(\"p\",{className:\" is-small\",children:\"Next of Kin Information\"}),/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field-body\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register(),name:\"nok_name\",type:\"text\",placeholder:\"Next of Kin Full Name\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-clinic-medical\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register(),name:\"nok_phoneno\",type:\"text\",placeholder:\"Next of Kin Phone Number\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-clinic-medical\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register(),name:\"nok_email\",type:\"email\",placeholder:\"Next of Kin Email\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-envelope\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register(),name:\"nok_relationship\",type:\"text\",placeholder:\"Next of Kin Relationship\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-envelope\"})})]})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"field  is-grouped mt-2\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"control\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"button is-success is-small\",children:\"Save\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"control\",children:/*#__PURE__*/_jsx(\"button\",{type:\"reset\",className:\"button is-warning is-small\"/* onClick={(e)=>e.target.reset()} */,children:\"Reset\"})})]})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal \".concat(billModal?\"is-active\":\"\"),children:[/*#__PURE__*/_jsx(\"div\",{className:\"modal-background\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-card modalbkgrnd z10\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"modal-card-head selectadd\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"modal-card-title redu\",children:\"Similar Client Already Exist?\"}),/*#__PURE__*/_jsx(\"button\",{className:\"delete\",\"aria-label\":\"close\",onClick:handlecloseModal3})]}),/*#__PURE__*/_jsx(\"section\",{className:\"modal-card-body\",children:/*#__PURE__*/_jsx(ClientGroup,{list:patList,closeModal:handlecloseModal3,choosen:choosen,dupl:dupl,reg:reg,depen:depen})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal \".concat(billModal?\"is-active\":\"\"),children:[/*#__PURE__*/_jsx(\"div\",{className:\"modal-background\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-card modalbkgrnd z10\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"modal-card-head selectadd\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"modal-card-title redu\",children:\"Similar Client Already Exist?\"}),/*#__PURE__*/_jsx(\"button\",{className:\"delete\",\"aria-label\":\"close\",onClick:handlecloseModal3})]}),/*#__PURE__*/_jsx(\"section\",{className:\"modal-card-body\",children:/*#__PURE__*/_jsx(ClientGroup,{list:patList,closeModal:handlecloseModal3,choosen:choosen,dupl:dupl,reg:reg,depen:depen})})]})]})]});}export function BeneficiaryCreate(){var _state$Beneficiary,_state$Beneficiary2,_state$Beneficiary3,_state$Beneficiary5,_state$Beneficiary6,_state$Beneficiary7,_state$Beneficiary8,_state$Beneficiary9,_state$Beneficiary10,_state$Beneficiary11,_state$Beneficiary12,_state$Beneficiary13,_state$Beneficiary14;var _useForm2=useForm(),register=_useForm2.register,handleSubmit=_useForm2.handleSubmit,setValue=_useForm2.setValue,getValues=_useForm2.getValues,reset=_useForm2.reset;//, watch, errors, reset \n// eslint-disable-next-line\nvar _useState21=useState(false),_useState22=_slicedToArray(_useState21,2),error=_useState22[0],setError=_useState22[1];// eslint-disable-next-line\nvar _useState23=useState(false),_useState24=_slicedToArray(_useState23,2),success=_useState24[0],setSuccess=_useState24[1];// eslint-disable-next-line\nvar _useState25=useState(\"\"),_useState26=_slicedToArray(_useState25,2),message=_useState26[0],setMessage=_useState26[1];// eslint-disable-next-line\nvar _useState27=useState(),_useState28=_slicedToArray(_useState27,2),facility=_useState28[0],setFacility=_useState28[1];var ClientServ=client.service('client');var policyServ=client.service('policy');//const history = useHistory()\nvar _useState29=useState(\"\"),_useState30=_slicedToArray(_useState29,2),chosen=_useState30[0],setChosen=_useState30[1];var _useContext4=useContext(UserContext),user=_useContext4.user;//,setUser\nvar _useState31=useState(false),_useState32=_slicedToArray(_useState31,2),billModal=_useState32[0],setBillModal=_useState32[1];var _useState33=useState(false),_useState34=_slicedToArray(_useState33,2),clientModal=_useState34[0],setClientModal=_useState34[1];var _useState35=useState(false),_useState36=_slicedToArray(_useState35,2),showCorp=_useState36[0],setShowCorp=_useState36[1];var _useState37=useState(\"\"),_useState38=_slicedToArray(_useState37,2),planHMO=_useState38[0],setPlanHMO=_useState38[1];var _useState39=useState(\"\"),_useState40=_slicedToArray(_useState39,2),plan=_useState40[0],setPlan=_useState40[1];var _useState41=useState(\"\"),_useState42=_slicedToArray(_useState41,2),price=_useState42[0],setPrice=_useState42[1];var _useState43=useState(\"\"),_useState44=_slicedToArray(_useState43,2),patient=_useState44[0],setPatient=_useState44[1];var _useState45=useState([]),_useState46=_slicedToArray(_useState45,2),patList=_useState46[0],setPatList=_useState46[1];var _useState47=useState([]),_useState48=_slicedToArray(_useState47,2),facilities=_useState48[0],setFacilities=_useState48[1];var _useState49=useState(false),_useState50=_slicedToArray(_useState49,2),dependant=_useState50[0],setDependant=_useState50[1];var _useState51=useState(),_useState52=_slicedToArray(_useState51,2),selectedClient=_useState52[0],setSelectedClient=_useState52[1];var _useState53=useState([]),_useState54=_slicedToArray(_useState53,2),productItem=_useState54[0],setProductItem=_useState54[1];// eslint-disable-next-line\nvar _useState55=useState(),_useState56=_slicedToArray(_useState55,2),currentUser=_useState56[0],setCurrentUser=_useState56[1];var _useState57=useState(),_useState58=_slicedToArray(_useState57,2),date=_useState58[0],setDate=_useState58[1];var _useState59=useState(\"Sales \"),_useState60=_slicedToArray(_useState59,2),type=_useState60[0],setType=_useState60[1];var _useState61=useState(),_useState62=_slicedToArray(_useState61,2),chosenPlan=_useState62[0],setChosenPlan=_useState62[1];var _useContext5=useContext(ObjectContext),state=_useContext5.state,setState=_useContext5.setState;var _useState63=useState(\"\"),_useState64=_slicedToArray(_useState63,2),documentNo=_useState64[0],setDocumentNo=_useState64[1];var hMO=[\"simpa\",\"dania\"];var _useState65=useState([]),_useState66=_slicedToArray(_useState65,2),benefittingPlans1=_useState66[0],setBenefittingPlans1=_useState66[1];var ServicesServ=client.service('billing');var _useState67=useState(),_useState68=_slicedToArray(_useState67,2),productEntry=_useState68[0],setProductEntry=_useState68[1];var sponsorlist=[\"Self\",\"SME\",\"Corporate\",\"Government\",\"others\"];// eslint-disable-next-line\n/*   const getSearchfacility=(obj)=>{\n        setValue(\"facility\", obj._id,  {\n            shouldValidate: true,\n            shouldDirty: true\n        })\n    } */var handleDate=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(date){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:setDate(date);case 1:case\"end\":return _context5.stop();}}},_callee5);}));return function handleDate(_x6){return _ref6.apply(this,arguments);};}();//check user for facility or get list of facility  \nuseEffect(function(){//setFacility(user.activeClient.FacilityId)//\nif(!user.stacker){console.log(state.Beneficiary);}getBenfittingPlans();//load plan\n//load sponsor\n//load primary provider\n//load premium\nreturn function(){};},[]);var getSearchfacility=function getSearchfacility(obj){setChosen(obj);if(!obj){}};var getSearchfacility1=function getSearchfacility1(obj){setPlanHMO(obj);if(!obj){}};var getBenfittingPlans=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(){var findServices;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:setBenefittingPlans1([]);if(!user.currentEmployee){_context7.next=7;break;}_context7.next=4;return ServicesServ.find({query:{facility:user.currentEmployee.facilityDetail._id,'contracts.source_org':user.currentEmployee.facilityDetail._id,'contracts.dest_org':user.currentEmployee.facilityDetail._id,category:\"Managed Care\",// storeId:state.StoreModule.selectedStore._id,\n// $limit:20,\n//   paginate:false,\n$sort:{category:1}}});case 4:findServices=_context7.sent;console.log(findServices);if(findServices.total>0){findServices.groupedOrder[0].services.forEach(/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(c){var newPlan;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:newPlan={name:c.name// checked:false\n};_context6.next=3;return setBenefittingPlans1(function(prev){return prev.concat(c);});case 3:case\"end\":return _context6.stop();}}},_callee6);}));return function(_x7){return _ref8.apply(this,arguments);};}());}case 7:case\"end\":return _context7.stop();}}},_callee7);}));return function getBenfittingPlans(){return _ref7.apply(this,arguments);};}();var handleChangeMode=function handleChangeMode(mode){setMessage(mode);if(mode==\"Corporate\"){setShowCorp(true);}};var handleChangePlan=/*#__PURE__*/function(){var _ref9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(value){var cplan,contract;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:console.log(value);if(!(value==\"\")){_context8.next=4;break;}setPrice(\"\");return _context8.abrupt(\"return\");case 4:console.log(benefittingPlans1);cplan=benefittingPlans1.filter(function(el){return el.name===value;});console.log(cplan);setChosenPlan(cplan[0]);contract=cplan[0].contracts.filter(function(el){return el.source_org===el.dest_org;});setPrice(contract[0]);case 10:case\"end\":return _context8.stop();}}},_callee8);}));return function handleChangePlan(_x8){return _ref9.apply(this,arguments);};}();var handleBill=function handleBill(){setBillModal(true);};var handlecloseModal3=function handlecloseModal3(){setBillModal(false);};var handleClient=function handleClient(){setClientModal(true);};var handlecloseModal4=function handlecloseModal4(){setClientModal(false);console.log(state.Beneficiary);};var choosen=/*#__PURE__*/function(){var _ref10=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(client){return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:case\"end\":return _context9.stop();}}},_callee9);}));return function choosen(_x9){return _ref10.apply(this,arguments);};}();var dupl=function dupl(client){toast({message:'Client previously registered in this facility',type:'is-danger',dismissible:true,pauseOnHover:true});reset();setPatList([]);};var reg=/*#__PURE__*/function(){var _ref11=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee10(client){var newPat;return _regeneratorRuntime.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:if(!(client.relatedfacilities.findIndex(function(el){return el.facility===user.currentEmployee.facilityDetail._id;})===-1)){_context10.next=4;break;}//create mpi record\nnewPat={client:client._id,facility:user.currentEmployee.facilityDetail._id,mrn:client.mrn,clientTags:client.clientTags,relfacilities:client.relatedfacilities};//console.log(newPat)\n_context10.next=4;return mpiServ.create(newPat).then(function(resp){toast({message:'Client created succesfully',type:'is-success',dismissible:true,pauseOnHover:true});}).catch(function(err){toast({message:'Error creating Client '+err,type:'is-danger',dismissible:true,pauseOnHover:true});});case 4://reset form\nreset();setPatList([]);//cash payment\ncase 6:case\"end\":return _context10.stop();}}},_callee10);}));return function reg(_x10){return _ref11.apply(this,arguments);};}();var depen=function depen(client){setDependant(true);};//create productitem\nvar createProductItem=/*#__PURE__*/function(){var _ref12=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee11(){return _regeneratorRuntime.wrap(function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:setProductItem([{//productId:,\nname:chosenPlan.name,quantity:\"1\",sellingprice:price.price,amount:price.price,//||qamount\nbaseunit:\"\",costprice:\"\",category:chosenPlan.category,billingId:chosenPlan._id,billingContract:price,billMode:state.Beneficiary.principal.paymentinfo[0]}]);case 1:case\"end\":return _context11.stop();}}},_callee11);}));return function createProductItem(){return _ref12.apply(this,arguments);};}();var createProductEntry=function createProductEntry(){var _useState69=useState({productitems:productItem,date:date,documentNo:documentNo,type:type,totalamount:price.priceso// source,\n}),_useState70=_slicedToArray(_useState69,2),productEntry=_useState70[0],setProductEntry=_useState70[1];};//create billfor policy\nvar handleCreateBill=/*#__PURE__*/function(){var _ref13=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee13(){var serviceList,document,confirm;return _regeneratorRuntime.wrap(function _callee13$(_context13){while(1){switch(_context13.prev=_context13.next){case 0://handle selected single order\n//documentation\nserviceList=[];document={};if(user.currentEmployee){document.facility=user.currentEmployee.facilityDetail._id;document.facilityname=user.currentEmployee.facilityDetail.facilityName;// or from facility dropdown\n}document.documentdetail=productItem;console.log(document.documentdetail);document.documentname=\"Billed Orders\";//state.DocumentClassModule.selectedDocumentClass.name\n// document.documentClassId=state.DocumentClassModule.selectedDocumentClass._id\ndocument.location=state.employeeLocation.locationName+\" \"+state.employeeLocation.locationType;document.locationId=state.employeeLocation.locationId;document.client=patient._id;document.clientname=patient.firstname+\" \"+patient.middlename+\" \"+patient.lastname;document.clientobj=patient;document.createdBy=user._id;document.createdByname=user.firstname+\" \"+user.lastname;document.status=\"completed\";console.log(document);//order\ndocument.documentdetail.forEach(/*#__PURE__*/function(){var _ref14=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee12(element){var orderinfo,billInfo,items;return _regeneratorRuntime.wrap(function _callee12$(_context12){while(1){switch(_context12.prev=_context12.next){case 0:orderinfo={//for reach document\ndocumentationId:\"\",//tbf\norder_category:element.category,//category\norder:element.name,//name\ninstruction:\"\",destination_name:document.facilityname,//facilityname\ndestination:document.facility,//facility id\norder_status:\"Billed\",payer:element.billMode.organizationName,paymentmode:element.billMode.paymentmode,requestingdoctor_Id:document.createdBy,requestingdoctor_Name:document.createdByname,requestingdoctor_locationid:document.locationId,requestingdoctor_locationName:document.location,requestingdoctor_facilityId:document.facility,requestingdoctor_facilityname:document.facilityname,clientId:document.client,clientname:document.clientname,client:document.clientobj,order_action:[],medication_action:[],treatment_action:[]};billInfo={orderInfo:{orderId:\"\",//tbf\norderObj:orderinfo},serviceInfo:{price:element.sellingprice,quantity:element.quantity,productId:element.productId,name:element.name,baseunit:element.baseunit,amount:element.amount,billingId:element.billingId,billingContract:element.billingContract,createdby:user._id},paymentInfo:{amountDue:element.amount,paidup:0,balance:element.amount,paymentDetails:[]},participantInfo:{billingFacility:orderinfo.destination,billingFacilityName:orderinfo.destination_name,locationId:document.locationId,//selected location,\nclientId:orderinfo.clientId,client:orderinfo.client,paymentmode:element.billMode},createdBy:user._id,billing_status:\"Unpaid\"};items={orderinfo:orderinfo,billInfo:billInfo};serviceList.push(items);case 4:case\"end\":return _context12.stop();}}},_callee12);}));return function(_x11){return _ref14.apply(this,arguments);};}());console.log(\"==================\");console.log(document,serviceList);confirm=window.confirm(\"You are about to bill \".concat(document.clientname,\" for \").concat(serviceList.length,\" service(s)?\"));if(!confirm){_context13.next=22;break;}_context13.next=22;return BillCreateServ.create({document:document,serviceList:serviceList}).then(function(res){setSuccess(true);toast({message:'Billed Orders created succesfully',type:'is-success',dismissible:true,pauseOnHover:true});setSuccess(false);setProductItem([]);setCalcAmount(0);var today=new Date().toLocaleString();//console.log(today)\nsetDate(today);var invoiceNo=random(6,'uppernumeric');setDocumentNo(invoiceNo);}).catch(function(err){toast({message:'Error creating Billed Orders '+err,type:'is-danger',dismissible:true,pauseOnHover:true});});case 22:case\"end\":return _context13.stop();}}},_callee13);}));return function handleCreateBill(){return _ref13.apply(this,arguments);};}();//create policy\nvar onSubmit=/*#__PURE__*/function(){var _ref15=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee15(data,e){var confirm,policy;return _regeneratorRuntime.wrap(function _callee15$(_context15){while(1){switch(_context15.prev=_context15.next){case 0:e.preventDefault();/*  if(!chosenPlan||!message){\n            toast({\n                message: 'Please choose plan and/or sponsor! ' ,\n                type: 'is-danger',\n                dismissible: true,\n                pauseOnHover: true,\n              })\n\n            return\n        } */setMessage(\"\");setError(false);setSuccess(false);//state.Beneficiary?.principal._id\nif(state.Beneficiary.principal._id){_context15.next=7;break;}toast({message:'Please add principal! ',type:'is-danger',dismissible:true,pauseOnHover:true});return _context15.abrupt(\"return\");case 7:// data.createdby=user._id\n//  console.log(data);\nif(user.currentEmployee){data.facility=user.currentEmployee.facilityDetail._id;// or from facility dropdown\n}confirm=window.confirm(\"You are about to register a new policy ?\");if(!confirm){_context15.next=13;break;}policy={policyNo:\"CVGBH/2022/098\",organizationType:user.currentEmployee.facilityDetail.facilityType,organizationId:user.currentEmployee.facilityDetail._id,organizationName:user.currentEmployee.facilityDetail.facilityName,organization:user.currentEmployee.facilityDetail,principal:state.Beneficiary.principal,//\ndependantBeneficiaries:state.Beneficiary.dependent,provider:chosen,//mixed\n// sponsor:                                                                                                                         sponsor:state.Beneficiary.principal,  //mixed\nsponsorshipType:data.sponsortype,plan:chosenPlan,premium:price.price,premiumContract:price,active:false,isPaid:false// paymentmode:{ type: String,  default:\"Cash\"}, //company\n// ??clientId:{ type: String,  },\n// agent\"\":,\"\" // if sales is made on behalf of a state programme\n//  agentName:{ type: String,  },\n// bill:{},\n// billId:\"\",\n// validityPeriods:[ { type: String,  }],\n//  validityEnds:{ type: Schema.Types.Date,},\n//  validitystarts:{ type: Schema.Types.Date,},\n// lastCapitationPaidDate: { type: Schema.Types.Date, required: false },\n// premiumPaymentRef: { type: Schema.Types.Mixed, required: false },\n};_context15.next=13;return policyServ.create(policy).then(function(res){//console.log(JSON.stringify(res))\ne.target.reset();/*  setMessage(\"Created Client successfully\") */setSuccess(true);toast({message:'Client created succesfully',type:'is-success',dismissible:true,pauseOnHover:true});setSuccess(false);/*  setPatList([])\n                  setDependant(false)\n                  setDate() */}).then(/*#__PURE__*/function(){var _ref16=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee14(res){return _regeneratorRuntime.wrap(function _callee14$(_context14){while(1){switch(_context14.prev=_context14.next){case 0:case\"end\":return _context14.stop();}}},_callee14);}));return function(_x14){return _ref16.apply(this,arguments);};}()).catch(function(err){toast({message:'Error creating Client '+err,type:'is-danger',dismissible:true,pauseOnHover:true});setPatList([]);setDependant(false);});case 13:case\"end\":return _context15.stop();}}},_callee15);}));return function onSubmit(_x12,_x13){return _ref15.apply(this,arguments);};}();var handleClickProd=function handleClickProd(){setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{currBeneficiary:\"principal\"});});setDependant(\"principal\");console.log(state.Beneficiary);setClientModal(true);};var handleClickProd2=function handleClickProd2(){setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{currBeneficiary:\"dependent\"});});setDependant(\"dependent\");setClientModal(true);};var handleHMO=function handleHMO(e){console.log(e);};var handlePlan=function handlePlan(e){console.log(e);};var handleRow=function handleRow(Client){//domething o\n};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card \",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsx(\"p\",{className:\"card-header-title\",children:\"Create Beneficiary\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-content vscrollable remPad1\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"field is-horizontal\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"field \",children:/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",children:\"Principal  \"})}),/*#__PURE__*/_jsx(\"div\",{className:\"field ml-2\",children:!((_state$Beneficiary=state.Beneficiary)===null||_state$Beneficiary===void 0?void 0:_state$Beneficiary.principal._id)&&/*#__PURE__*/_jsx(\"p\",{className:\"control\",children:/*#__PURE__*/_jsx(\"button\",{className:\"button is-info is-small btnheight \",children:/*#__PURE__*/_jsx(\"span\",{className:\"is-small\",onClick:handleClickProd,children:\" +\"})})})})]}),!!((_state$Beneficiary2=state.Beneficiary)===null||_state$Beneficiary2===void 0?void 0:_state$Beneficiary2.principal._id)&&/*#__PURE__*/_jsxs(\"table\",{className:\"table is-striped is-narrow is-hoverable is-fullwidth  \",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Serial No\",children:\"S/No\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Last Name\",children:\"Last Name\"})}),/*#__PURE__*/_jsx(\"th\",{children:\"First Name\"}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Middle Name\",children:\"Middle Name\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Age\",children:\"Age\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Gender\",children:\"Gender\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Phone\",children:\"Phone\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Email\",children:\"Email\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Tags\",children:\"Tags\"})})]})}),/*#__PURE__*/_jsx(\"tfoot\",{}),/*#__PURE__*/_jsx(\"tbody\",{children:/*#__PURE__*/_jsxs(\"tr\",{onClick:function onClick(){var _state$Beneficiary4;return handleRow((_state$Beneficiary4=state.Beneficiary)===null||_state$Beneficiary4===void 0?void 0:_state$Beneficiary4.principal);},className:((_state$Beneficiary5=state.Beneficiary)===null||_state$Beneficiary5===void 0?void 0:_state$Beneficiary5.principal._id)===((selectedClient===null||selectedClient===void 0?void 0:selectedClient._id)||null)?\"is-selected\":\"\",children:[/*#__PURE__*/_jsx(\"td\",{children:1}),/*#__PURE__*/_jsx(\"th\",{children:(_state$Beneficiary6=state.Beneficiary)===null||_state$Beneficiary6===void 0?void 0:_state$Beneficiary6.principal.lastname}),/*#__PURE__*/_jsx(\"td\",{children:(_state$Beneficiary7=state.Beneficiary)===null||_state$Beneficiary7===void 0?void 0:_state$Beneficiary7.principal.firstname}),/*#__PURE__*/_jsx(\"td\",{children:(_state$Beneficiary8=state.Beneficiary)===null||_state$Beneficiary8===void 0?void 0:_state$Beneficiary8.principal.middlename}),/*#__PURE__*/_jsx(\"td\",{children:((_state$Beneficiary9=state.Beneficiary)===null||_state$Beneficiary9===void 0?void 0:_state$Beneficiary9.principal.dob)&&/*#__PURE__*/_jsx(_Fragment,{children:formatDistanceToNowStrict(new Date((_state$Beneficiary10=state.Beneficiary)===null||_state$Beneficiary10===void 0?void 0:_state$Beneficiary10.principal.dob))})}),/*#__PURE__*/_jsx(\"td\",{children:(_state$Beneficiary11=state.Beneficiary)===null||_state$Beneficiary11===void 0?void 0:_state$Beneficiary11.principal.gender}),/*#__PURE__*/_jsx(\"td\",{children:(_state$Beneficiary12=state.Beneficiary)===null||_state$Beneficiary12===void 0?void 0:_state$Beneficiary12.principal.phone}),/*#__PURE__*/_jsx(\"td\",{children:(_state$Beneficiary13=state.Beneficiary)===null||_state$Beneficiary13===void 0?void 0:_state$Beneficiary13.principal.email}),/*#__PURE__*/_jsx(\"td\",{children:(_state$Beneficiary14=state.Beneficiary)===null||_state$Beneficiary14===void 0?void 0:_state$Beneficiary14.principal.clientTags})]},(_state$Beneficiary3=state.Beneficiary)===null||_state$Beneficiary3===void 0?void 0:_state$Beneficiary3.principal._id)})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field is-horizontal\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"field \",children:/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",children:\"Dependents  \"})}),/*#__PURE__*/_jsx(\"div\",{className:\"field ml-2\",children:/*#__PURE__*/_jsx(\"p\",{className:\"control\",children:/*#__PURE__*/_jsx(\"button\",{className:\"button is-info is-small btnheight \",children:/*#__PURE__*/_jsx(\"span\",{className:\"is-small\",onClick:handleClickProd2,children:\" +\"})})})})]}),/*#__PURE__*/_jsx(\"div\",{children:state.Beneficiary.dependent.length>0&&/*#__PURE__*/_jsxs(\"table\",{className:\"table is-striped is-narrow is-hoverable is-fullwidth  \",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Serial No\",children:\"S/No\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Last Name\",children:\"Last Name\"})}),/*#__PURE__*/_jsx(\"th\",{children:\"First Name\"}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Middle Name\",children:\"Middle Name\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Age\",children:\"Payment Mode\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Age\",children:\"Age\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Gender\",children:\"Gender\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Phone\",children:\"Phone\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Email\",children:\"Email\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Tags\",children:\"Tags\"})})]})}),/*#__PURE__*/_jsx(\"tfoot\",{}),/*#__PURE__*/_jsx(\"tbody\",{children:state.Beneficiary.dependent.map(function(Client,i){return/*#__PURE__*/_jsxs(\"tr\",{onClick:function onClick(){return handleRow(Client);},className:Client._id===((selectedClient===null||selectedClient===void 0?void 0:selectedClient._id)||null)?\"is-selected\":\"\",children:[/*#__PURE__*/_jsx(\"td\",{children:i+1}),/*#__PURE__*/_jsx(\"th\",{children:Client.lastname}),/*#__PURE__*/_jsx(\"td\",{children:Client.firstname}),/*#__PURE__*/_jsx(\"td\",{children:Client.middlename}),/*#__PURE__*/_jsx(\"td\",{children:Client.paymentinfo.map(function(pay,i){return/*#__PURE__*/_jsxs(_Fragment,{children:[pay.paymentmode,\" \",pay.paymentmode===\"Cash\"?\"\":\":\",\" \",pay.organizationName,/*#__PURE__*/_jsx(\"br\",{})]});})}),/*#__PURE__*/_jsx(\"td\",{children:Client.dob&&/*#__PURE__*/_jsx(_Fragment,{children:formatDistanceToNowStrict(new Date(Client.dob))})}),/*#__PURE__*/_jsx(\"td\",{children:Client.gender}),/*#__PURE__*/_jsx(\"td\",{children:Client.phone}),/*#__PURE__*/_jsx(\"td\",{children:Client.email}),/*#__PURE__*/_jsx(\"td\",{children:Client.clientTags})]},Client._id);})})]})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",name:\"dob\",type:\"text\",children:\"Primary Provider \"}),/*#__PURE__*/_jsxs(\"div\",{className:\"field is-expanded\"/* style={ !user.stacker?{display:\"none\"}:{}} */,children:[/*#__PURE__*/_jsx(OrgFacilitySearch,{getSearchfacility:getSearchfacility,clear:success}),/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left \",style:{display:\"none\"},children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\"/* ref={register ({ required: true }) }  */ /* add array no */ /* value={facilityId} name=\"facilityId\" type=\"text\" onChange={e=>setFacilityId(e.target.value)} placeholder=\"Product Id\" */}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas  fa-map-marker-alt\"})})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field-body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",name:\"dob\",type:\"text\",children:\"Sponsor \"}),/*#__PURE__*/_jsx(\"div\",{className:\"control\",children:/*#__PURE__*/_jsx(\"div\",{className:\"select is-small \",children:/*#__PURE__*/_jsxs(\"select\",{name:\"sponsortype\",ref:register({required:true}),onChange:function onChange(e){return handleChangeMode(e.target.value);},className:\"selectadd\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\" Choose Sponsor \"}),/*#__PURE__*/_jsx(\"option\",{value:\"Self\",children:\"Self\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Corporate\",children:\"Corporate\"})]})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",style:!showCorp?{display:\"none\"}:{},children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",name:\"dob\",type:\"text\",children:\"Corporate Sponsor \"}),/*#__PURE__*/_jsxs(\"div\",{className:\"field is-expanded\"/* style={ !user.stacker?{display:\"none\"}:{}} */,children:[/*#__PURE__*/_jsx(SponsorSearch,{getSearchfacility:getSearchfacility1,clear:success}),/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left \",style:{display:\"none\"},children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\"/* ref={register ({ required: true }) }  */ /* add array no */ /* value={facilityId} name=\"facilityId\" type=\"text\" onChange={e=>setFacilityId(e.target.value)} placeholder=\"Product Id\" */}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas  fa-map-marker-alt\"})})]})]})]})]})}),/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",name:\"dob\",type:\"text\",children:\"Plan \"}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsx(\"div\",{className:\"control\",children:/*#__PURE__*/_jsx(\"div\",{className:\"select is-small \",children:/*#__PURE__*/_jsxs(\"select\",{name:\"plan\",ref:register({required:true}),onChange:function onChange(e,i){return handleChangePlan(e.target.value);},className:\"selectadd\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\" Choose Plan \"}),benefittingPlans1.map(function(option,i){return/*#__PURE__*/_jsxs(\"option\",{value:option.name,children:[\" \",option.name]},i);})]})})})}),/*#__PURE__*/_jsxs(\"label\",{className:\"label is-size-7 my-0\",name:\"dob\",type:\"text\",children:[\"Premium:\",price.price]}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"is-size-7 my-0\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-envelope\"})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"field  is-grouped mt-2\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"control\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"button is-success is-small\",children:\"Save\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"control\",children:/*#__PURE__*/_jsx(\"button\",{type:\"reset\",className:\"button is-warning is-small\"/* onClick={(e)=>e.target.reset()} */,children:\"Reset\"})})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal \".concat(clientModal?\"is-active\":\"\"),children:[/*#__PURE__*/_jsx(\"div\",{className:\"modal-background\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-card modalbkgrnd z10\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"modal-card-head selectadd\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"modal-card-title redu\",children:\"Create Client\"}),/*#__PURE__*/_jsx(\"button\",{className:\"delete\",\"aria-label\":\"close\",onClick:handlecloseModal4})]}),/*#__PURE__*/_jsx(\"section\",{className:\"modal-card-body\",children:/*#__PURE__*/_jsx(ClientCreate,{closeModal:handlecloseModal4})})]})]})]});}export function ClientList(){// const { register, handleSubmit, watch, errors } = useForm();\n// eslint-disable-next-line\nvar _useState71=useState(false),_useState72=_slicedToArray(_useState71,2),error=_useState72[0],setError=_useState72[1];// eslint-disable-next-line\nvar _useState73=useState(false),_useState74=_slicedToArray(_useState73,2),success=_useState74[0],setSuccess=_useState74[1];// eslint-disable-next-line\nvar _useState75=useState(\"\"),_useState76=_slicedToArray(_useState75,2),message=_useState76[0],setMessage=_useState76[1];var ClientServ=client.service('client');//const history = useHistory()\n// const {user,setUser} = useContext(UserContext)\nvar _useState77=useState([]),_useState78=_slicedToArray(_useState77,2),facilities=_useState78[0],setFacilities=_useState78[1];// eslint-disable-next-line\nvar _useState79=useState(),_useState80=_slicedToArray(_useState79,2),selectedClient=_useState80[0],setSelectedClient=_useState80[1];//\n// eslint-disable-next-line\nvar _useContext6=useContext(ObjectContext),state=_useContext6.state,setState=_useContext6.setState;// eslint-disable-next-line\nvar _useContext7=useContext(UserContext),user=_useContext7.user,setUser=_useContext7.setUser;var _useState81=useState(0),_useState82=_slicedToArray(_useState81,2),page=_useState82[0],setPage=_useState82[1];var _useState83=useState(50),_useState84=_slicedToArray(_useState83,2),limit=_useState84[0],setLimit=_useState84[1];var _useState85=useState(0),_useState86=_slicedToArray(_useState85,2),total=_useState86[0],setTotal=_useState86[1];var handleCreateNew=/*#__PURE__*/function(){var _ref17=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee16(){var newClientModule;return _regeneratorRuntime.wrap(function _callee16$(_context16){while(1){switch(_context16.prev=_context16.next){case 0:newClientModule={selectedClient:{},show:'create'};_context16.next=3;return setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{ClientModule:newClientModule});});case 3:case\"end\":return _context16.stop();}}},_callee16);}));return function handleCreateNew(){return _ref17.apply(this,arguments);};}();var handleRow=/*#__PURE__*/function(){var _ref18=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee17(Client){var newClientModule;return _regeneratorRuntime.wrap(function _callee17$(_context17){while(1){switch(_context17.prev=_context17.next){case 0:_context17.next=2;return setSelectedClient(Client);case 2:newClientModule={selectedClient:Client,show:'detail'};_context17.next=5;return setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{ClientModule:newClientModule});});case 5:case\"end\":return _context17.stop();}}},_callee17);}));return function handleRow(_x15){return _ref18.apply(this,arguments);};}();var handleSearch=function handleSearch(val){// eslint-disable-next-line\nvar field='firstname';console.log(val);ClientServ.find({query:{$or:[{firstname:{$regex:val,$options:'i'}},{lastname:{$regex:val,$options:'i'}},{middlename:{$regex:val,$options:'i'}},{phone:{$regex:val,$options:'i'}},{clientTags:{$regex:val,$options:'i'}},{mrn:{$regex:val,$options:'i'}},{email:{$regex:val,$options:'i'}},{specificDetails:{$regex:val,$options:'i'}},{gender:val}],\"relatedfacilities.facility\":user.currentEmployee.facilityDetail._id,// || \"\",\n$limit:limit,$sort:{createdAt:-1}}}).then(function(res){console.log(res);setFacilities(res.data);setMessage(\" Client  fetched successfully\");setSuccess(true);}).catch(function(err){console.log(err);setMessage(\"Error fetching Client, probable network issues \"+err);setError(true);});};var getFacilities=/*#__PURE__*/function(){var _ref19=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee18(){var findClient,_findClient;return _regeneratorRuntime.wrap(function _callee18$(_context18){while(1){switch(_context18.prev=_context18.next){case 0:if(!user.currentEmployee){_context18.next=11;break;}_context18.next=3;return ClientServ.find({query:{// \"relatedfacilities.facility\":user.currentEmployee.facilityDetail._id,\n// $limit:limit,\n// $skip:page * limit,\n$sort:{createdAt:-1}}});case 3:findClient=_context18.sent;_context18.next=6;return setFacilities(findClient.data);case 6:_context18.next=8;return setTotal(findClient.total);case 8://console.log(user.currentEmployee.facilityDetail._id, state)\n//console.log(facilities)\nsetPage(function(page){return page+1;});_context18.next=17;break;case 11:if(!user.stacker){_context18.next=17;break;}_context18.next=14;return ClientServ.find({query:{$limit:20,$sort:{createdAt:-1}}});case 14:_findClient=_context18.sent;_context18.next=17;return setFacilities(_findClient.data);case 17:case\"end\":return _context18.stop();}}},_callee18);}));return function getFacilities(){return _ref19.apply(this,arguments);};}();useEffect(function(){if(user){//getFacilities()\nrest();}else{/* const localUser= localStorage.getItem(\"user\")\n                    const user1=JSON.parse(localUser)\n                    console.log(localUser)\n                    console.log(user1)\n                    fetchUser(user1)\n                    console.log(user)\n                    getFacilities(user) */}ClientServ.on('created',function(obj){return rest();});ClientServ.on('updated',function(obj){return rest();});ClientServ.on('patched',function(obj){return rest();});ClientServ.on('removed',function(obj){return rest();});return function(){};// eslint-disable-next-line\n},[]);var rest=/*#__PURE__*/function(){var _ref20=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee19(){return _regeneratorRuntime.wrap(function _callee19$(_context19){while(1){switch(_context19.prev=_context19.next){case 0:_context19.next=2;return setPage(0);case 2:_context19.next=4;return setTotal(0);case 4:_context19.next=6;return setFacilities([]);case 6:_context19.next=8;return getFacilities();case 8:case\"end\":return _context19.stop();}}},_callee19);}));return function rest(){return _ref20.apply(this,arguments);};}();useEffect(function(){//console.log(facilities)\nreturn function(){};},[facilities]);//todo: pagination and vertical scroll bar\nreturn/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"level\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"level-left\",children:/*#__PURE__*/_jsx(\"div\",{className:\"level-item\",children:/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left  \",children:[/*#__PURE__*/_jsx(DebounceInput,{className:\"input is-small \",type:\"text\",placeholder:\"Search Clients\",minLength:3,debounceTimeout:400,onChange:function onChange(e){return handleSearch(e.target.value);}}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-search\"})})]})})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"level-item\",children:[\" \",/*#__PURE__*/_jsx(\"span\",{className:\"is-size-6 has-text-weight-medium\",children:\"List of Clients \"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"level-right\",children:/*#__PURE__*/_jsx(\"div\",{className:\"level-item\",children:/*#__PURE__*/_jsx(\"div\",{className:\"level-item\",children:/*#__PURE__*/_jsx(\"div\",{className:\"button is-success is-small\",onClick:handleCreateNew,children:\"New\"})})})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"table-container pullup  vscrola\",id:\"scrollableDiv\",children:/*#__PURE__*/_jsx(InfiniteScroll,{dataLength:facilities.length,next:getFacilities,hasMore:total>facilities.length,loader:/*#__PURE__*/_jsx(\"h4\",{children:\"Loading...\"}),scrollableTarget:\"scrollableDiv\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table is-striped is-narrow is-hoverable is-fullwidth  \",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Serial No\",children:\"S/No\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Last Name\",children:\"Last Name\"})}),/*#__PURE__*/_jsx(\"th\",{children:\"First Name\"}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Middle Name\",children:\"Middle Name\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Age\",children:\"Payment Mode\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Age\",children:\"Age\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Gender\",children:\"Gender\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Phone\",children:\"Phone\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Email\",children:\"Email\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Tags\",children:\"Tags\"})})]})}),/*#__PURE__*/_jsx(\"tfoot\",{}),/*#__PURE__*/_jsx(\"tbody\",{children:facilities.map(function(Client,i){return/*#__PURE__*/_jsxs(\"tr\",{onClick:function onClick(){return handleRow(Client);},className:Client._id===((selectedClient===null||selectedClient===void 0?void 0:selectedClient._id)||null)?\"is-selected\":\"\",children:[/*#__PURE__*/_jsx(\"td\",{children:i+1}),/*#__PURE__*/_jsx(\"th\",{children:Client.lastname}),/*#__PURE__*/_jsx(\"td\",{children:Client.firstname}),/*#__PURE__*/_jsx(\"td\",{children:Client.middlename}),/*#__PURE__*/_jsx(\"td\",{children:Client.paymentinfo.map(function(pay,i){return/*#__PURE__*/_jsxs(_Fragment,{children:[pay.paymentmode,\" \",pay.paymentmode===\"Cash\"?\"\":\":\",\" \",pay.organizationName,/*#__PURE__*/_jsx(\"br\",{})]});})}),/*#__PURE__*/_jsx(\"td\",{children:Client.dob&&/*#__PURE__*/_jsx(_Fragment,{children:formatDistanceToNowStrict(new Date(Client.dob))})}),/*#__PURE__*/_jsx(\"td\",{children:Client.gender}),/*#__PURE__*/_jsx(\"td\",{children:Client.phone}),/*#__PURE__*/_jsx(\"td\",{children:Client.email}),/*#__PURE__*/_jsx(\"td\",{children:Client.clientTags})]},Client._id);})})]})})})]});}export function ClientDetail(){var _user$currentEmployee,_user$currentEmployee2;//const { register, handleSubmit, watch, setValue } = useForm(); //errors,\n// eslint-disable-next-line\nvar history=useHistory();// eslint-disable-next-line\nvar _useRouteMatch=useRouteMatch(),path=_useRouteMatch.path,url=_useRouteMatch.url;// eslint-disable-next-line\nvar _useState87=useState(false),_useState88=_slicedToArray(_useState87,2),error=_useState88[0],setError=_useState88[1];//, \nvar _useState89=useState(false),_useState90=_slicedToArray(_useState89,2),finacialInfoModal=_useState90[0],setFinacialInfoModal=_useState90[1];var _useState91=useState(false),_useState92=_slicedToArray(_useState91,2),billingModal=_useState92[0],setBillingModal=_useState92[1];var _useState93=useState(false),_useState94=_slicedToArray(_useState93,2),billModal=_useState94[0],setBillModal=_useState94[1];var _useState95=useState(false),_useState96=_slicedToArray(_useState95,2),appointmentModal=_useState96[0],setAppointmentModal=_useState96[1];// eslint-disable-next-line\nvar _useState97=useState(\"\"),_useState98=_slicedToArray(_useState97,2),message=_useState98[0],setMessage=_useState98[1];//,\n//const ClientServ=client.service('/Client')\n//const history = useHistory()\nvar _useContext8=useContext(UserContext),user=_useContext8.user,setUser=_useContext8.setUser;var _useContext9=useContext(ObjectContext),state=_useContext9.state,setState=_useContext9.setState;var Client=state.ClientModule.selectedClient;// eslint-disable-next-line\nvar client=Client;var handleEdit=/*#__PURE__*/function(){var _ref21=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee20(){var newClientModule;return _regeneratorRuntime.wrap(function _callee20$(_context20){while(1){switch(_context20.prev=_context20.next){case 0:newClientModule={selectedClient:Client,show:'modify'};_context20.next=3;return setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{ClientModule:newClientModule});});case 3:case\"end\":return _context20.stop();}}},_callee20);}));return function handleEdit(){return _ref21.apply(this,arguments);};}();var handleFinancialInfo=function handleFinancialInfo(){setFinacialInfoModal(true);};var handlecloseModal=function handlecloseModal(){setFinacialInfoModal(false);};var handlecloseModal1=function handlecloseModal1(){setBillingModal(false);};var handlecloseModal2=function handlecloseModal2(){setAppointmentModal(false);};var showBilling=function showBilling(){setBillingModal(true);//history.push('/app/finance/billservice')\n};var handleSchedule=function handleSchedule(){setAppointmentModal(true);};var handleBill=function handleBill(){setBillModal(true);};var handlecloseModal3=function handlecloseModal3(){setBillModal(false);};/*  useEffect(() => {\n        Client =state.ClientModule.selectedClient\n        return () => {\n           \n        }\n    }, [billingModal]) */return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card \",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-header\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"card-header-title\",children:\"Client Details\"}),(((_user$currentEmployee=user.currentEmployee)===null||_user$currentEmployee===void 0?void 0:_user$currentEmployee.roles.includes('Bill Client'))||((_user$currentEmployee2=user.currentEmployee)===null||_user$currentEmployee2===void 0?void 0:_user$currentEmployee2.roles.length)===0||user.stacker)&&/*#__PURE__*/_jsx(\"button\",{className:\"button is-success is-small btnheight mt-2\",onClick:showBilling,children:\"Bill Client\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-content vscrollable\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field-body\",children:[Client.firstname&&/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left has-icons-right\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0 \",name:\"firstname\",type:\"text\",children:\"First Name \"}),/*#__PURE__*/_jsx(\"label\",{className:\"is-size-7 my-0 \",children:Client.firstname}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-hospital\"})})]})}),Client.middlename&&/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left has-icons-right\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",name:\"middlename\",type:\"text\",children:\" Middle Name \"}),/*#__PURE__*/_jsx(\"label\",{className:\"is-size-7 my-0\",children:Client.middlename}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-map-signs\"})})]})}),Client.lastname&&/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",name:\"lastname\",type:\"text\",children:\"Last Name\"}),/*#__PURE__*/_jsx(\"label\",{className:\"is-size-7 my-0\",children:Client.lastname}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\" nop-user-md \"})})]})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field-body\",children:[Client.dob&&/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",name:\"dob\",type:\"text\",children:\"Date of Birth \"}),/*#__PURE__*/_jsx(\"label\",{className:\"is-size-7 my-0\",children:new Date(Client.dob).toLocaleDateString('en-GB')}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-envelope\"})})]})}),Client.gender&&/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",name:\"gender\",type:\"text\",children:\"Gender \"}),/*#__PURE__*/_jsx(\"label\",{className:\"is-size-7 my-0\",children:Client.gender}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-envelope\"})})]})}),Client.maritalstatus&&/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",name:\"maritalstatus\",type:\"text\",children:\"Marital Status \"}),/*#__PURE__*/_jsx(\"label\",{className:\"is-size-7 my-0\",children:Client.maritalstatus}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-envelope\"})})]})}),Client.mrn&&/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",name:\"mrn\",type:\"text\",children:\"Medical Records Number  \"}),/*#__PURE__*/_jsx(\"label\",{className:\"is-size-7 my-0\",children:Client.mrn}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-envelope\"})})]})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field-body\",children:[Client.religion&&/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",name:\"religion\",type:\"text\",children:\"Religion  \"}),/*#__PURE__*/_jsx(\"label\",{className:\"is-size-7 my-0\",children:Client.religion}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-envelope\"})})]})}),Client.profession&&/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",name:\"profession\",type:\"text\",children:\"Profession  \"}),/*#__PURE__*/_jsx(\"label\",{className:\"is-size-7 my-0\",children:Client.profession}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-envelope\"})})]})}),Client.phone&&/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",name:\"phone\",type:\"text\",children:\" Phone No\"}),/*#__PURE__*/_jsx(\"label\",{className:\"is-size-7 my-0\",children:Client.phone}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-phone-alt\"})})]})}),Client.email&&/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",name:\"email\",type:\"email\",children:\"Email  \"}),/*#__PURE__*/_jsx(\"label\",{className:\"is-size-7 my-0\",children:Client.email}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-envelope\"})})]})})]})}),Client.address&&/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",name:\"address\",type:\"text\",children:\"Residential Address  \"}),/*#__PURE__*/_jsx(\"label\",{className:\"is-size-7 my-0\",children:Client.address}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-envelope\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field-body\",children:[Client.city&&/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",name:\"city\",type:\"text\",children:\"Town/City  \"}),/*#__PURE__*/_jsx(\"label\",{className:\"is-size-7 my-0\",children:Client.city}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-envelope\"})})]})}),Client.lga&&/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",name:\"lga\",type:\"text\",children:\"Local Govt Area  \"}),/*#__PURE__*/_jsx(\"label\",{className:\"is-size-7 my-0\",children:Client.lga}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-envelope\"})})]})}),Client.state&&/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",name:\"state\",type:\"text\",children:\"State  \"}),/*#__PURE__*/_jsx(\"label\",{className:\"is-size-7 my-0\",children:Client.state}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-envelope\"})})]})}),Client.country&&/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",name:\"country\",type:\"text\",children:\"Country  \"}),/*#__PURE__*/_jsx(\"label\",{className:\"is-size-7 my-0\",children:Client.country}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-envelope\"})})]})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field-body\",children:[Client.bloodgroup&&/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",name:\"bloodgroup\",type:\"text\",children:\"Blood Group \"}),/*#__PURE__*/_jsx(\"label\",{className:\"is-size-7 my-0\",children:Client.bloodgroup}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-envelope\"})})]})}),Client.genotype&&/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",name:\"genotype\",type:\"text\",children:\"Genotype  \"}),/*#__PURE__*/_jsx(\"label\",{className:\"is-size-7 my-0\",children:Client.genotype}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-envelope\"})})]})}),Client.disabilities&&/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",name:\"disabilities\",type:\"text\",children:\"Disabilities  \"}),/*#__PURE__*/_jsx(\"label\",{className:\"is-size-7 my-0\",children:Client.disabilities}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-envelope\"})})]})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field-body\",children:[Client.allergies&&/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",name:\"allergies\",type:\"text\",children:\"Allergies  \"}),/*#__PURE__*/_jsx(\"label\",{className:\"is-size-7 my-0\",children:Client.allergies}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-envelope\"})})]})}),Client.comorbidities&&/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",name:\"comorbidities\",type:\"text\",children:\"Co-mobidities  \"}),/*#__PURE__*/_jsx(\"label\",{className:\"is-size-7 my-0\",children:Client.comorbidities}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-envelope\"})})]})})]})}),Client.clientTags&&/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",name:\"clientTags\",type:\"text\",children:\"Tags \"}),/*#__PURE__*/_jsx(\"label\",{className:\"is-size-7 my-0\",children:Client.clientTags}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-envelope\"})})]})}),Client.specificDetails&&/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",name:\"specificDetails\",type:\"text\",children:\"Specific Details about Client \"}),/*#__PURE__*/_jsx(\"label\",{className:\"is-size-7 my-0\",children:Client.specificDetails}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-envelope\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field-body\",children:[Client.nok_name&&/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",name:\"nok_name\",type:\"text\",children:\"Next of Kin Full Name\"}),/*#__PURE__*/_jsx(\"label\",{className:\"is-size-7 my-0\",children:Client.nok_name}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-clinic-medical\"})})]})}),Client.nok_phoneno&&/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",name:\"nok_phoneno\",type:\"text\",children:\"Next of Kin Phone Number\"}),/*#__PURE__*/_jsx(\"label\",{className:\"is-size-7 my-0\",children:Client.nok_phoneno}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-clinic-medical\"})})]})}),Client.nok_email&&/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",name:\"nok_email\",type:\"email\",children:\"Next of Kin Email \"}),/*#__PURE__*/_jsx(\"label\",{className:\"is-size-7 my-0\",children:Client.nok_email}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-envelope\"})})]})}),Client.nok_relationship&&/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",name:\"nok_relationship\",type:\"text\",children:\"Next of Kin Relationship\\\"  \"}),/*#__PURE__*/_jsx(\"label\",{className:\"is-size-7 my-0\",children:Client.nok_relationship}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-envelope\"})})]})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"field is-grouped  mt-2\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"control\",children:/*#__PURE__*/_jsx(\"button\",{className:\"button is-success is-small\",onClick:handleEdit,children:\"Edit Details\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"control\",children:/*#__PURE__*/_jsx(\"button\",{className:\"button is-info is-small\",onClick:handleFinancialInfo,children:\"Payment Info\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"control\",children:/*#__PURE__*/_jsx(\"button\",{className:\"button is-warning is-small\",onClick:handleSchedule,children:\"Schedule appointment\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"control\",children:/*#__PURE__*/_jsx(\"button\",{className:\"button is-link is-small\",onClick:function onClick(){history.push('/app/clinic/encounter');},children:\"Attend to Client\"})})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal \".concat(finacialInfoModal?\"is-active\":\"\"),children:[/*#__PURE__*/_jsx(\"div\",{className:\"modal-background\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-card\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"modal-card-head\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"modal-card-title\",children:\"Financial Information\"}),/*#__PURE__*/_jsx(\"button\",{className:\"delete\",\"aria-label\":\"close\",onClick:handlecloseModal})]}),/*#__PURE__*/_jsx(\"section\",{className:\"modal-card-body\",children:/*#__PURE__*/_jsx(ClientFinInfo,{closeModal:handlecloseModal})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal \".concat(billingModal?\"is-active\":\"\"),children:[/*#__PURE__*/_jsx(\"div\",{className:\"modal-background\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-card\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"modal-card-head\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"modal-card-title\",children:\"Bill Client\"}),/*#__PURE__*/_jsx(\"button\",{className:\"delete\",\"aria-label\":\"close\",onClick:handlecloseModal1})]}),/*#__PURE__*/_jsx(\"section\",{className:\"modal-card-body\",children:/*#__PURE__*/_jsx(BillServiceCreate,{closeModal:handlecloseModal1})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal \".concat(appointmentModal?\"is-active\":\"\"),children:[/*#__PURE__*/_jsx(\"div\",{className:\"modal-background\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-card\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"modal-card-head\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"modal-card-title\",children:\"Set Appointment\"}),/*#__PURE__*/_jsx(\"button\",{className:\"delete\",\"aria-label\":\"close\",onClick:handlecloseModal2})]}),/*#__PURE__*/_jsx(\"section\",{className:\"modal-card-body\",children:/*#__PURE__*/_jsx(AppointmentCreate,{closeModal:handlecloseModal2})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal \".concat(billModal?\"is-active\":\"\"),children:[/*#__PURE__*/_jsx(\"div\",{className:\"modal-background\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-card\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"modal-card-head\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"modal-card-title\",children:\"Set Appointment\"}),/*#__PURE__*/_jsx(\"button\",{className:\"delete\",\"aria-label\":\"close\",onClick:handlecloseModal3})]}),/*#__PURE__*/_jsx(\"section\",{className:\"modal-card-body\",children:/*#__PURE__*/_jsx(ClientBilledPrescription,{selectedClient:Client._id,closeModal:handlecloseModal3})})]})]})]});}export function ClientModify(){var _useForm3=useForm(),register=_useForm3.register,handleSubmit=_useForm3.handleSubmit,setValue=_useForm3.setValue,reset=_useForm3.reset;//watch, errors,, errors \n// eslint-disable-next-line \nvar _useState99=useState(false),_useState100=_slicedToArray(_useState99,2),error=_useState100[0],setError=_useState100[1];// eslint-disable-next-line \nvar _useState101=useState(false),_useState102=_slicedToArray(_useState101,2),success=_useState102[0],setSuccess=_useState102[1];// eslint-disable-next-line \nvar _useState103=useState(\"\"),_useState104=_slicedToArray(_useState103,2),message=_useState104[0],setMessage=_useState104[1];// eslint-disable-next-line \nvar ClientServ=client.service('client');//const history = useHistory()\n// eslint-disable-next-line\nvar _useContext10=useContext(UserContext),user=_useContext10.user;var _useContext11=useContext(ObjectContext),state=_useContext11.state,setState=_useContext11.setState;var Client=state.ClientModule.selectedClient;useEffect(function(){setValue(\"firstname\",Client.firstname,{shouldValidate:true,shouldDirty:true});setValue(\"middlename\",Client.middlename,{shouldValidate:true,shouldDirty:true});setValue(\"lastname\",Client.lastname,{shouldValidate:true,shouldDirty:true});setValue(\"phone\",Client.phone,{shouldValidate:true,shouldDirty:true});setValue(\"email\",Client.email,{shouldValidate:true,shouldDirty:true});setValue(\"dob\",Client.dob,{shouldValidate:true,shouldDirty:true});setValue(\"gender\",Client.gender,{shouldValidate:true,shouldDirty:true});setValue(\"profession\",Client.profession,{shouldValidate:true,shouldDirty:true});setValue(\"address\",Client.address,{shouldValidate:true,shouldDirty:true});setValue(\"city\",Client.city,{shouldValidate:true,shouldDirty:true});setValue(\"state\",Client.state,{shouldValidate:true,shouldDirty:true});setValue(\"country\",Client.country,{shouldValidate:true,shouldDirty:true});setValue(\"nok_name\",Client.nok_name,{shouldValidate:true,shouldDirty:true});setValue(\"nok_email\",Client.nok_email,{shouldValidate:true,shouldDirty:true});setValue(\"nok_phoneno\",Client.nokphoneno,{shouldValidate:true,shouldDirty:true});setValue(\"lga\",Client.lga,{shouldValidate:true,shouldDirty:true});setValue(\"bloodgroup\",Client.bloodgroup,{shouldValidate:true,shouldDirty:true});setValue(\"genotype\",Client.genotype,{shouldValidate:true,shouldDirty:true});setValue(\"disabilities\",Client.disabilities,{shouldValidate:true,shouldDirty:true});setValue(\"specificDetails\",Client.specificDetails,{shouldValidate:true,shouldDirty:true});setValue(\"clientTags\",Client.clientTags,{shouldValidate:true,shouldDirty:true});setValue(\"mrn\",Client.mrn,{shouldValidate:true,shouldDirty:true});setValue(\"comorbidities\",Client.comorbidities,{shouldValidate:true,shouldDirty:true});setValue(\"allergies\",Client.allergies,{shouldValidate:true,shouldDirty:true});return function(){};});var handleCancel=/*#__PURE__*/function(){var _ref22=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee21(){var newClientModule;return _regeneratorRuntime.wrap(function _callee21$(_context21){while(1){switch(_context21.prev=_context21.next){case 0:newClientModule={selectedClient:Client,show:'detail'};_context21.next=3;return setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{ClientModule:newClientModule});});case 3:case\"end\":return _context21.stop();}}},_callee21);}));return function handleCancel(){return _ref22.apply(this,arguments);};}();var changeState=function changeState(){var newClientModule={selectedClient:{},show:'create'};setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{ClientModule:newClientModule});});};// eslint-disable-next-line\nvar handleDelete=/*#__PURE__*/function(){var _ref23=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee22(){var conf,dleteId;return _regeneratorRuntime.wrap(function _callee22$(_context22){while(1){switch(_context22.prev=_context22.next){case 0:conf=window.confirm(\"Are you sure you want to delete this data?\");dleteId=Client._id;if(conf){ClientServ.remove(dleteId).then(function(res){//console.log(JSON.stringify(res))\nreset();/*  setMessage(\"Deleted Client successfully\")\n                setSuccess(true)\n                changeState()\n               setTimeout(() => {\n                setSuccess(false)\n                }, 200); */toast({message:'Client deleted succesfully',type:'is-success',dismissible:true,pauseOnHover:true});changeState();}).catch(function(err){// setMessage(\"Error deleting Client, probable network issues \"+ err )\n// setError(true)\ntoast({message:\"Error deleting Client, probable network issues or \"+err,type:'is-danger',dismissible:true,pauseOnHover:true});});}case 3:case\"end\":return _context22.stop();}}},_callee22);}));return function handleDelete(){return _ref23.apply(this,arguments);};}();/* ()=> setValue(\"firstName\", \"Bill\", , {\n            shouldValidate: true,\n            shouldDirty: true\n          })) */var onSubmit=function onSubmit(data,e){e.preventDefault();setSuccess(false);// console.log(data)\n//  data.facility=Client.facility\n//console.log(data);\nClientServ.patch(Client._id,data).then(function(res){//console.log(JSON.stringify(res))\n// e.target.reset();\n// setMessage(\"updated Client successfully\")\ntoast({message:'Client updated succesfully',type:'is-success',dismissible:true,pauseOnHover:true});changeState();}).catch(function(err){//setMessage(\"Error creating Client, probable network issues \"+ err )\n// setError(true)\ntoast({message:\"Error updating Client, probable network issues or \"+err,type:'is-danger',dismissible:true,pauseOnHover:true});});};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"card \",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsx(\"p\",{className:\"card-header-title\",children:\"Client Details-Modify\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-content vscrollable\",children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field-body\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left has-icons-right\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7\",children:\"First Name \"}),\" \",/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register(),name:\"firstname\",type:\"text\",placeholder:\"First Name \"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-hospital\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left has-icons-right\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7\",children:\" Middle Name \"}),/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register(),name:\"middlename\",type:\"text\",placeholder:\"Middle Name \"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-map-signs\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7\",children:\"Last Name\"}),/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register(),name:\"lastname\",type:\"text\",placeholder:\"Last Name \"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\" nop-user-md \"})})]})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field-body\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7\",children:\"Date of Birth  \"}),/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register(),name:\"dob\",type:\"text\",placeholder:\"Date of Birth \"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-envelope\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7\",children:\"Gender  \"}),/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register(),name:\"gender\",type:\"text\",placeholder:\"Gender  \"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-envelope\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7\",children:\"Marital Status  \"}),/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register(),name:\"maritalstatus\",type:\"text\",placeholder:\"Marital Status  \"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-envelope\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7\",children:\" Records Number \"}),/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register(),name:\"mrn\",type:\"text\",placeholder:\"Records Number  \"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-envelope\"})})]})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field-body\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7\",children:\"Religion\"}),/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register(),name:\"religion\",type:\"text\",placeholder:\"Religion \"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-envelope\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7\",children:\"Profession  \"}),/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register(),name:\"profession\",type:\"text\",placeholder:\"Profession\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-envelope\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7\",children:\" Phone No\"}),/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register(),name:\"phone\",type:\"text\",placeholder:\" Phone No \"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-phone-alt\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7\",children:\"Email  \"}),/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register(),name:\"email\",type:\"email\",placeholder:\"Email  \"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-envelope\"})})]})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7\",children:\"Residential Address  \"}),/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register(),name:\"address\",type:\"text\",placeholder:\"Residential Address  \"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-envelope\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field-body\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7\",children:\"Town/City  \"}),/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register(),name:\"city\",type:\"text\",placeholder:\"Town/City  \"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-envelope\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7\",children:\"Local Govt Area  \"}),/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register(),name:\"lga\",type:\"text\",placeholder:\"Local Govt Area  \"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-envelope\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7\",children:\"State  \"}),/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register(),name:\"state\",type:\"text\",placeholder:\"State\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-envelope\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7\",children:\"Country  \"}),/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register(),name:\"country\",type:\"text\",placeholder:\"Country  \"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-envelope\"})})]})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field-body\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7\",children:\"Blood Group \"}),/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register(),name:\"bloodgroup\",type:\"text\",placeholder:\"Blood Group \"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-envelope\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7\",children:\"Genotype  \"}),/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register(),name:\"genotype\",type:\"text\",placeholder:\"Genotype \"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-envelope\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7\",children:\"Disabilities  \"}),/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register(),name:\"disabilities\",type:\"text\",placeholder:\"Disabilities  \"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-envelope\"})})]})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field-body\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7\",children:\"Allergies  \"}),/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register(),name:\"allergies\",type:\"text\",placeholder:\"Allergies  \"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-envelope\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7\",children:\"Co-mobidities \"}),/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register(),name:\"comorbidities\",type:\"text\",placeholder:\"Co-mobidities \"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-envelope\"})})]})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7\",children:\"Tags  \"}),/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register(),name:\"clientTags\",type:\"text\",placeholder:\"Tags \"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-envelope\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7\",children:\"Specific Details about client  \"}),/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register(),name:\"specificDetails\",type:\"text\",placeholder:\"Specific Details about client \"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-envelope\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field-body\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7\",children:\"Next of Kin Full Name\"}),/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register(),name:\"nok_name\",type:\"text\",placeholder:\"Next of Kin Full Name \"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-clinic-medical\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7\",children:\"Phone Number\"}),/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register(),name:\"nok_phoneno\",type:\"text\",placeholder:\" \"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-clinic-medical\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7\",children:\"Next of Kin Email  \"}),/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register(),name:\"nok_email\",type:\"email\",placeholder:\"Next of Kin Email  \"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-envelope\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7\",children:\" Relationship  \"}),/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register(),name:\"nok_relationship\",type:\"text\",placeholder:\"Next of Kin Relationship\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-envelope\"})})]})})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field  is-grouped mt-2\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"control\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"button is-success is-small\",onClick:handleSubmit(onSubmit),children:\"Save\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"control\",children:/*#__PURE__*/_jsx(\"button\",{className:\"button is-warning is-small\",onClick:handleCancel,children:\"Cancel\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"control\",children:/*#__PURE__*/_jsx(\"button\",{className:\"button is-danger is-small\",onClick:function onClick(){return handleDelete();},type:\"delete\",children:\"Delete\"})})]})]})]})});}export function InputSearch(_ref24){var getSearchfacility=_ref24.getSearchfacility,clear=_ref24.clear;var ClientServ=client.service('client');// const facilityServ=client.service('facility')\nvar _useState105=useState([]),_useState106=_slicedToArray(_useState105,2),facilities=_useState106[0],setFacilities=_useState106[1];// eslint-disable-next-line\nvar _useState107=useState(false),_useState108=_slicedToArray(_useState107,2),searchError=_useState108[0],setSearchError=_useState108[1];// eslint-disable-next-line\nvar _useState109=useState(false),_useState110=_slicedToArray(_useState109,2),showPanel=_useState110[0],setShowPanel=_useState110[1];// eslint-disable-next-line\nvar _useState111=useState(\"\"),_useState112=_slicedToArray(_useState111,2),searchMessage=_useState112[0],setSearchMessage=_useState112[1];// eslint-disable-next-line \nvar _useState113=useState(\"\"),_useState114=_slicedToArray(_useState113,2),simpa=_useState114[0],setSimpa=_useState114[1];// eslint-disable-next-line \nvar _useState115=useState(false),_useState116=_slicedToArray(_useState115,2),chosen=_useState116[0],setChosen=_useState116[1];// eslint-disable-next-line \nvar _useState117=useState(0),_useState118=_slicedToArray(_useState117,2),count=_useState118[0],setCount=_useState118[1];var inputEl=useRef(null);var handleRow=/*#__PURE__*/function(){var _ref25=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee23(obj){return _regeneratorRuntime.wrap(function _callee23$(_context23){while(1){switch(_context23.prev=_context23.next){case 0:_context23.next=2;return setChosen(true);case 2://alert(\"something is chaning\")\ngetSearchfacility(obj);_context23.next=5;return setSimpa(obj.facilityName);case 5:// setSelectedFacility(obj)\nsetShowPanel(false);_context23.next=8;return setCount(2);case 8:case\"end\":return _context23.stop();}}},_callee23);}));return function handleRow(_x16){return _ref25.apply(this,arguments);};}();var handleBlur=/*#__PURE__*/function(){var _ref26=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee24(e){return _regeneratorRuntime.wrap(function _callee24$(_context24){while(1){switch(_context24.prev=_context24.next){case 0:if(count===2){console.log(\"stuff was chosen\");}/*  console.log(\"blur\")\n         setShowPanel(false)\n        console.log(JSON.stringify(simpa))\n        if (simpa===\"\"){\n            console.log(facilities.length)\n            setSimpa(\"abc\")\n            setSimpa(\"\")\n            setFacilities([])\n            inputEl.current.setValue=\"\"\n        }\n        console.log(facilities.length)\n        console.log(inputEl.current) */case 1:case\"end\":return _context24.stop();}}},_callee24);}));return function handleBlur(_x17){return _ref26.apply(this,arguments);};}();var handleSearch=/*#__PURE__*/function(){var _ref27=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee25(val){var field,_query;return _regeneratorRuntime.wrap(function _callee25$(_context25){while(1){switch(_context25.prev=_context25.next){case 0:field='facilityName';//field variable\nif(!(val.length>=3)){_context25.next=5;break;}ClientServ.find({query:(_query={},_defineProperty(_query,field,{$regex:val,$options:'i'}),_defineProperty(_query,\"$limit\",10),_defineProperty(_query,\"$sort\",{createdAt:-1}),_query)}).then(function(res){console.log(\"facility  fetched successfully\");setFacilities(res.data);setSearchMessage(\" facility  fetched successfully\");setShowPanel(true);}).catch(function(err){console.log(err);setSearchMessage(\"Error searching facility, probable network issues \"+err);setSearchError(true);});_context25.next=11;break;case 5:console.log(\"less than 3 \");console.log(val);setShowPanel(false);_context25.next=10;return setFacilities([]);case 10:console.log(facilities);case 11:case\"end\":return _context25.stop();}}},_callee25);}));return function handleSearch(_x18){return _ref27.apply(this,arguments);};}();useEffect(function(){if(clear){setSimpa(\"\");}return function(){};},[clear]);return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsx(\"div\",{className:\"control has-icons-left  \",children:/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown \".concat(showPanel?\"is-active\":\"\"),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown-trigger\",children:[/*#__PURE__*/_jsx(DebounceInput,{className:\"input is-small \",type:\"text\",placeholder:\"Search Facilities\",value:simpa,minLength:1,debounceTimeout:400,onBlur:function onBlur(e){return handleBlur(e);},onChange:function onChange(e){return handleSearch(e.target.value);},inputRef:inputEl}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-search\"})})]}),searchError&&/*#__PURE__*/_jsx(\"div\",{children:searchMessage}),/*#__PURE__*/_jsx(\"div\",{className:\"dropdown-menu\",children:/*#__PURE__*/_jsx(\"div\",{className:\"dropdown-content\",children:facilities.map(function(facility,i){return/*#__PURE__*/_jsx(\"div\",{className:\"dropdown-item\",onClick:function onClick(){return handleRow(facility);},children:/*#__PURE__*/_jsx(\"span\",{children:facility.facilityName})},facility._id);})})})]})})})});}","map":{"version":3,"sources":["/home/mfybaby/Documents/HealthStack2/HS-frontend/src/components/ManagedCare/Beneficiary.js"],"names":["React","useState","useContext","useEffect","useRef","useRouteMatch","useHistory","client","DebounceInput","useForm","UserContext","ObjectContext","toast","formatDistanceToNowStrict","ClientFinInfo","BillServiceCreate","AppointmentCreate","InfiniteScroll","ClientBilledPrescription","ClientGroup","DatePicker","OrgFacilitySearch","SponsorSearch","random","require","searchfacility","Beneficiary","state","selectedClient","setSelectedClient","ClientModule","show","ClientCreate","closeModal","register","handleSubmit","setValue","getValues","reset","error","setError","success","setSuccess","message","setMessage","facility","setFacility","ClientServ","service","mpiServ","user","billModal","setBillModal","patList","setPatList","dependant","setDependant","currentUser","setCurrentUser","date","setDate","setState","getSearchfacility","obj","_id","shouldValidate","shouldDirty","handleDate","stacker","checkClient","data","dob","firstname","middlename","lastname","gender","email","phone","query","checkQuery","$or","Object","keys","length","constructor","find","then","res","console","log","total","catch","err","handleBill","handlecloseModal3","choosen","dupl","type","dismissible","pauseOnHover","reg","relatedfacilities","findIndex","el","currentEmployee","facilityDetail","newPat","mrn","clientTags","relfacilities","create","resp","depen","onSubmit","e","preventDefault","confirm","window","target","newClientModule","currBeneficiary","principal","dependent","others","prevstate","required","BeneficiaryCreate","policyServ","chosen","setChosen","clientModal","setClientModal","showCorp","setShowCorp","planHMO","setPlanHMO","plan","setPlan","price","setPrice","patient","setPatient","facilities","setFacilities","productItem","setProductItem","setType","chosenPlan","setChosenPlan","documentNo","setDocumentNo","hMO","benefittingPlans1","setBenefittingPlans1","ServicesServ","productEntry","setProductEntry","sponsorlist","getBenfittingPlans","getSearchfacility1","category","$sort","findServices","groupedOrder","services","forEach","c","newPlan","name","prev","concat","handleChangeMode","mode","handleChangePlan","value","cplan","filter","contract","contracts","source_org","dest_org","handleClient","handlecloseModal4","createProductItem","quantity","sellingprice","amount","baseunit","costprice","billingId","billingContract","billMode","paymentinfo","createProductEntry","productitems","totalamount","priceso","handleCreateBill","serviceList","document","facilityname","facilityName","documentdetail","documentname","location","employeeLocation","locationName","locationType","locationId","clientname","clientobj","createdBy","createdByname","status","element","orderinfo","documentationId","order_category","order","instruction","destination_name","destination","order_status","payer","organizationName","paymentmode","requestingdoctor_Id","requestingdoctor_Name","requestingdoctor_locationid","requestingdoctor_locationName","requestingdoctor_facilityId","requestingdoctor_facilityname","clientId","order_action","medication_action","treatment_action","billInfo","orderInfo","orderId","orderObj","serviceInfo","productId","createdby","paymentInfo","amountDue","paidup","balance","paymentDetails","participantInfo","billingFacility","billingFacilityName","billing_status","items","push","BillCreateServ","setCalcAmount","today","Date","toLocaleString","invoiceNo","policy","policyNo","organizationType","facilityType","organizationId","organization","dependantBeneficiaries","provider","sponsorshipType","sponsortype","premium","premiumContract","active","isPaid","handleClickProd","handleClickProd2","handleHMO","handlePlan","handleRow","Client","map","i","pay","display","option","ClientList","setUser","page","setPage","limit","setLimit","setTotal","handleCreateNew","handleSearch","val","field","$regex","$options","specificDetails","$limit","createdAt","getFacilities","findClient","rest","on","ClientDetail","history","path","url","finacialInfoModal","setFinacialInfoModal","billingModal","setBillingModal","appointmentModal","setAppointmentModal","handleEdit","handleFinancialInfo","handlecloseModal","handlecloseModal1","handlecloseModal2","showBilling","handleSchedule","roles","includes","toLocaleDateString","maritalstatus","religion","profession","address","city","lga","country","bloodgroup","genotype","disabilities","allergies","comorbidities","nok_name","nok_phoneno","nok_email","nok_relationship","ClientModify","nokphoneno","handleCancel","changeState","handleDelete","conf","dleteId","remove","patch","InputSearch","clear","searchError","setSearchError","showPanel","setShowPanel","searchMessage","setSearchMessage","simpa","setSimpa","count","setCount","inputEl","handleBlur"],"mappings":"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","sourcesContent":["/* eslint-disable */\nimport React, {useState,useContext, useEffect,useRef} from 'react'\nimport {  useRouteMatch,  useHistory} from 'react-router-dom' //Route, Switch,Link, NavLink,\nimport client from '../../feathers'\nimport {DebounceInput} from 'react-debounce-input';\nimport { useForm } from \"react-hook-form\";\n//import {useHistory} from 'react-router-dom'\nimport {UserContext,ObjectContext} from '../../context'\nimport {toast} from 'bulma-toast'\nimport { formatDistanceToNowStrict } from 'date-fns'\nimport ClientFinInfo from './ClientFinInfo';\nimport BillServiceCreate from '../Finance/BillServiceCreate'\nimport {AppointmentCreate} from '../Clinic/Appointments'\nimport InfiniteScroll from \"react-infinite-scroll-component\";\nimport ClientBilledPrescription from '../Finance/ClientBill'\nimport ClientGroup from './ClientGroup';\nimport DatePicker from \"react-datepicker\";\n\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport {OrgFacilitySearch, SponsorSearch} from '../helpers/FacilitySearch'\nvar random = require('random-string-generator');\n// eslint-disable-next-line\nconst searchfacility={};\n\n\nexport default function Beneficiary() {\n    const {state}=useContext(ObjectContext) //,setState\n    // eslint-disable-next-line\n    const [selectedClient,setSelectedClient]=useState()\n    //const [showState,setShowState]=useState() //create|modify|detail\n    \n    return(\n        <section className= \"section remPadTop\">\n            <div className=\"columns \">\n            <div className=\"column is-6 \">\n                <ClientList />\n                </div>\n            <div className=\"column is-6 \">\n              {(state.ClientModule.show ==='List')&&<ClientList />}\n                {(state.ClientModule.show ==='create')&&<BeneficiaryCreate />}\n                {(state.ClientModule.show ==='detail')&&<ClientDetail  />}\n                {(state.ClientModule.show ==='modify')&&<ClientModify Client={selectedClient} />} \n            </div>\n            </div>                            \n            </section>\n       \n    )\n    \n}\n\nexport function ClientCreate({closeModal}){\n    const { register, handleSubmit,setValue,  getValues, reset} = useForm(); //, watch, errors, reset \n      // eslint-disable-next-line\n    const [error, setError] =useState(false)\n      // eslint-disable-next-line\n    const [success, setSuccess] =useState(false)\n      // eslint-disable-next-line\n    const [message,setMessage] = useState(\"\")\n    // eslint-disable-next-line\n    const [facility,setFacility] = useState()\n    const ClientServ=client.service('client')\n    const mpiServ=client.service('mpi')\n    //const history = useHistory()\n    const {user} = useContext(UserContext) //,setUser\n    const [billModal, setBillModal] =useState(false)\n    const [patList, setPatList] =useState([])\n    const [dependant, setDependant] =useState(false)\n    // eslint-disable-next-line\n    const [currentUser,setCurrentUser] = useState()\n    const [date,setDate] = useState()\n    const {state,setState} = useContext(ObjectContext)\n\n\n  // eslint-disable-next-line\n    const getSearchfacility=(obj)=>{\n        setValue(\"facility\", obj._id,  {\n            shouldValidate: true,\n            shouldDirty: true\n        })\n    }\n\n    const handleDate=async (date)=>{\n        setDate(date)\n        \n    }\n    useEffect(() => {\n        setCurrentUser(user)\n        //console.log(currentUser)\n        return () => {\n        \n        }\n    }, [user])\n\n  //check user for facility or get list of facility  \n    useEffect(()=>{\n        //setFacility(user.activeClient.FacilityId)//\n      if (!user.stacker){\n       /*    console.log(currentUser)\n        setValue(\"facility\", user.currentEmployee.facilityDetail._id,  {\n            shouldValidate: true,\n            shouldDirty: true\n        })  */\n      }\n    })\n\n    const checkClient=()=>{\n        const data= getValues()\n        data.dob= date\n       const obj ={\n        firstname:data.firstname,\n        middlename:data.middlename,\n        lastname:data.lastname,\n        gender:data.gender,\n        email:data.email,\n        phone:data.phone,\n        dob:data.dob\n       } \n       /* find if there is a match with the paramters entered\n          run search if \n            1.phone no alone or  \n            2.email alone or \n            3.both is entered\n            4. all other 5 parameters\n\n        */\n       let query={}\n\n       if (!!data.phone){\n            query.phone=data.phone\n            checkQuery(query)\n       }\n\n       if (!!data.email){\n        query.email=data.email\n        checkQuery(query)\n       }\n\n       if (!!data.firstname && !!data.lastname && !!data.gender && !!data.dob ){\n          // console.log(\"simpa\")\n           data.middlename=data.middlename||\"\"\n           query.gender=data.gender,\n           query.dob=data.dob,\n\n           query.$or=[\n                {\n                    firstname: data.firstname,\n                    lastname:data.lastname,\n                    middlename: data.middlename\n                },\n                {\n                    firstname: data.firstname,\n                    lastname:data.middlename,\n                    middlename: data.lastname\n                },\n                {\n                    firstname: data.middlename,\n                    lastname:data.lastname,\n                    middlename: data.firstname\n                },\n                {\n                    firstname: data.middlename,\n                    lastname:data.firstname,\n                    middlename: data.lastname\n                },\n                {\n                    firstname: data.lastname,\n                    lastname:data.firstname,\n                    middlename: data.middlename\n                },\n                {\n                    firstname: data.lastname,\n                    lastname:data.middlename,\n                    middlename: data.firstname\n                },\n        ]\n        checkQuery(query)\n       }\n    \n       \n    }\n\n    const checkQuery=(query)=>{\n        setPatList([])\n        if (!(query && Object.keys(query).length === 0 && query.constructor === Object)){\n            ClientServ.find({query:query}).then((res)=>{\n                console.log(res)\n                if (res.total>0){\n                   // alert(res.total)\n                     setPatList(res.data)\n                   setBillModal(true)\n                   return\n                }\n     \n            })\n            .catch((err)=>{console.log(err)})\n         }\n\n    }\n\n\n    const handleBill =()=>{\n        setBillModal(true)\n    }\n    const  handlecloseModal3 = () =>{\n        setBillModal(false)\n        }\n\n    const choosen=async (client)=>{\n        //update client with facilities\n      /*   if (client.facility !== user.currentEmployee.facilityDetail._id ){ //check taht it is not in list of related facilities\n           \n        \n        //create mpi record\n        const newPat = {\n            client: client._id,\n            facility:user.currentEmployee.facilityDetail._id,\n            mrn:client.mrn,\n            clientTags:client.clientTags,\n            relfacilities:client.relatedfacilites\n           }\n           await mpiServ.create(newPat)\n        } */\n        //reset form\n        //toast niotification\n        //cash payment\n\n    }\n    const dupl=(client)=>{\n        toast({\n            message: 'Client previously registered in this facility',\n            type: 'is-danger',\n            dismissible: true,\n            pauseOnHover: true,\n          })\n          reset()\n          setPatList([])\n        \n    }\n    const reg=async (client)=>{\n        if ((client.relatedfacilities.findIndex(el=>el.facility===user.currentEmployee.facilityDetail._id))===-1){\n            //create mpi record\n            const newPat = {\n                client: client._id,\n                facility:user.currentEmployee.facilityDetail._id,\n                mrn:client.mrn,\n                clientTags:client.clientTags,\n                relfacilities:client.relatedfacilities\n               }\n               //console.log(newPat)\n               await mpiServ.create(newPat).then((resp)=>{\n                toast({\n                    message: 'Client created succesfully',\n                    type: 'is-success',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  })\n               }).catch((err)=>{\n                toast({\n                    message: 'Error creating Client '+err,\n                    type: 'is-danger',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  })\n                  \n               })\n            }\n            //reset form\n            reset()\n            setPatList([])\n            //cash payment\n        \n    }\n    const depen=(client)=>{\n        setDependant(true)\n       \n    }\n    const onSubmit = async (data,e) =>{\n        if(!date){\n            toast({\n                message: 'Please enter Date of Birth! ' ,\n                type: 'is-danger',\n                dismissible: true,\n                pauseOnHover: true,\n              })\n\n            return\n        }\n        e.preventDefault();\n        setMessage(\"\")\n        setError(false)\n        setSuccess(false)\n        checkClient()\n        if (patList.length>0){\n             if(!dependant){\n                return\n             }\n            //alert(\"something\"+\",\"+ patList.length)\n            //let confirm = window.confirm(\"Is this person a dependant with parent phone number?\")\n           // setOption(confirm)\n            setPatList([])\n           \n        }\n         // data.createdby=user._id\n        //  console.log(data);\n          if (user.currentEmployee){\n          data.facility=user.currentEmployee.facilityDetail._id  // or from facility dropdown\n          }\n\n            \n        let confirm =window.confirm(`You are about to register a new client ${ data.firstname}  ${ data.middlename} ${ data.lastname} ?`)\n        if (confirm){\n            data.dob=date\n        await ClientServ.create(data)\n        .then((res)=>{\n            console.log(res)\n                //console.log(JSON.stringify(res))\n                e.target.reset();\n               /*  setMessage(\"Created Client successfully\") */\n                setSuccess(true)\n                toast({\n                    message: 'Client created succesfully',\n                    type: 'is-success',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  })\n                  setSuccess(false)\n                  setPatList([])\n                  setDependant(false)\n                  setDate()\n                  let newClientModule={}\n                  //add to context\n                        // if principal\n                        if(state.currBeneficiary===\"principal\"){\n                             \n\n                              newClientModule={\n                                principal:res,\n                                dependent:state.Beneficiary.dependent,\n                                others:state.Beneficiary.others,\n                                show:'create'\n                                }       \n                        }\n                        if(state.currBeneficiary===\"dependent\"){\n                            \n                             newClientModule={\n                                principal:state.Beneficiary.principal,\n                                dependent:[...state.Beneficiary.dependent, res],\n                                others:state.Beneficiary.others,\n                                show:'create'\n                                }       \n\n                        }\n                       \n                        // if dependent\n                /*   const newClientModule={\n                    principal:principal,\n                    dependent:dependents,\n                    others:{},\n                    show:'create'\n                    }          */                                                                                                                                                \n                setState((prevstate)=>({...prevstate, Beneficiary:newClientModule}))\n                  closeModal()\n            })\n            .catch((err)=>{\n                toast({\n                    message: 'Error creating Client ' + err,\n                    type: 'is-danger',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  })\n                  setPatList([])\n                  setDependant(false)\n            })\n        }\n\n      } \n\n    return (\n        <>\n            <div className=\"card \">\n            <div className=\"card-header\">\n                <p className=\"card-header-title\">\n                    Create Client\n                </p>\n            </div>\n            <div className=\"card-content vscrollable remPad1\">\n           {/*  <p className=\" is-small\">\n                    Kindly search Client list before creating new Clients!\n                </p> */}\n            <form onSubmit={handleSubmit(onSubmit)}>\n                <p className=\" is-small\">Names</p>\n            <div className=\"field is-horizontal\">\n                <div className=\"field-body\">\n                    <div className=\"field\">\n                        <p className=\"control has-icons-left has-icons-right\">\n                            <input className=\"input is-small is-danger\" ref={register({ required: true })}  name=\"firstname\" type=\"text\" placeholder=\"First Name\" onBlur={checkClient}/>\n                            <span className=\"icon is-small is-left\">\n                                <i className=\"fas fa-hospital\"></i>\n                            </span>                    \n                        </p>\n                    </div>\n                \n                \n                    <div className=\"field\">\n                        <p className=\"control has-icons-left has-icons-right\">\n                        <input className=\"input is-small\" ref={register()}  name=\"middlename\" type=\"text\" placeholder=\"Middle Name\" onBlur={checkClient}/>\n                        <span className=\"icon is-small is-left\">\n                            <i className=\"fas fa-map-signs\"></i>\n                        </span>\n                        \n                        </p>\n                    </div>\n              \n                <div className=\"field\">\n                    <p className=\"control has-icons-left\">\n                        <input className=\"input is-small is-danger\" ref={register({ required: true })} name=\"lastname\" type=\"text\" placeholder=\"Last Name\" onBlur={checkClient}/>\n                        <span className=\"icon is-small is-left\">\n                        <i className=\" fas fa-user-md \"></i>\n                        </span>\n                    </p>\n                </div>\n            </div>  \n        </div>\n        <p className=\" is-small\">Biodata</p>\n        <div className=\"field is-horizontal\">\n            <div className=\"field-body\">\n                <div className=\"field\">\n                    <p className=\"control has-icons-left is-danger\">\n                    \n                      {/*   <input className=\"input is-small is-danger\" ref={register({ required: true })} name=\"dob\" type=\"text\" placeholder=\"Date of Birth\"  onBlur={checkClient}/>\n                        <span className=\"icon is-small is-left\">\n                        <i className=\"fas fa-envelope\"></i>\n                        </span> */}\n                        <DatePicker className=\"is-danger\"\n                            selected={date} \n                            onChange={date => handleDate(date)} \n                            dateFormat=\"dd/MM/yyyy\"\n                            placeholderText=\"Enter date with dd/MM/yyyy format \"\n                            //isClearable\n                            className=\"red-border is-small\"\n                            />\n                    </p>\n                </div> \n                <div className=\"field\">\n                    <p className=\"control has-icons-left\">\n                    \n                        <input className=\"input is-small\" ref={register()} name=\"gender\" type=\"text\" placeholder=\"Gender\" onBlur={checkClient} />\n                        <span className=\"icon is-small is-left\">\n                        <i className=\"fas fa-envelope\"></i>\n                        </span>\n                    </p>\n                </div> \n                <div className=\"field\">\n                    <p className=\"control has-icons-left\">\n                    \n                        <input className=\"input is-small\" ref={register()} name=\"maritalstatus\" type=\"text\" placeholder=\"Marital Status\"  />\n                        <span className=\"icon is-small is-left\">\n                        <i className=\"fas fa-envelope\"></i>\n                        </span>\n                    </p>\n                </div> \n                <div className=\"field\">\n                    <p className=\"control has-icons-left\">\n                    \n                        <input className=\"input is-small\" ref={register()} name=\"mrn\" type=\"text\" placeholder=\"Medical Records Number\"  />\n                        <span className=\"icon is-small is-left\">\n                        <i className=\"fas fa-envelope\"></i>\n                        </span>\n                    </p>\n                </div> \n            </div>\n        </div>\n        <div className=\"field is-horizontal\">\n            <div className=\"field-body\">\n                <div className=\"field\">\n                    <p className=\"control has-icons-left\">\n                    \n                        <input className=\"input is-small\" ref={register()} name=\"religion\" type=\"text\" placeholder=\"Religion\"  />\n                        <span className=\"icon is-small is-left\">\n                        <i className=\"fas fa-envelope\"></i>\n                        </span>\n                    </p>\n                </div> \n                <div className=\"field\">\n                    <p className=\"control has-icons-left\">\n                    \n                        <input className=\"input is-small\" ref={register()} name=\"profession\" type=\"text\" placeholder=\"Profession\"  />\n                        <span className=\"icon is-small is-left\">\n                        <i className=\"fas fa-envelope\"></i>\n                        </span>\n                    </p>\n                </div> \n                <div className=\"field\">\n                    <p className=\"control has-icons-left\">\n                        <input className=\"input is-small is-danger\" ref={register({ required: true })} name=\"phone\" type=\"text\" placeholder=\" Phone No\" onBlur={checkClient}/>\n                        <span className=\"icon is-small is-left\">\n                        <i className=\"fas fa-phone-alt\"></i>\n                        </span>\n                    </p>\n                </div>\n\n                <div className=\"field\">\n                    <p className=\"control has-icons-left\">\n                    \n                        <input className=\"input is-small \" ref={register()} name=\"email\" type=\"email\" placeholder=\"Email\"  onBlur={checkClient} />\n                        <span className=\"icon is-small is-left\">\n                        <i className=\"fas fa-envelope\"></i>\n                        </span>\n                    </p>\n                </div> \n            </div>\n        </div>\n        <div className=\"field\">\n                <p className=\"control has-icons-left\">\n                \n                    <input className=\"input is-small\" ref={register()} name=\"clientTags\" type=\"text\" placeholder=\"Tags\"  />\n                    <span className=\"icon is-small is-left\">\n                    <i className=\"fas fa-envelope\"></i>\n                    </span>\n                </p>\n            </div> \n        <p className=\" is-small\">Address</p>\n            <div className=\"field\">\n                <p className=\"control has-icons-left\">\n                \n                    <input className=\"input is-small\" ref={register()} name=\"address\" type=\"text\" placeholder=\"Residential Address\"  />\n                    <span className=\"icon is-small is-left\">\n                    <i className=\"fas fa-envelope\"></i>\n                    </span>\n                </p>\n            </div> \n        <div className=\"field is-horizontal\">\n            <div className=\"field-body\">\n                <div className=\"field\">\n                    <p className=\"control has-icons-left\">\n                    \n                        <input className=\"input is-small\" ref={register()} name=\"city\" type=\"text\" placeholder=\"Town/City\"  />\n                        <span className=\"icon is-small is-left\">\n                        <i className=\"fas fa-envelope\"></i>\n                        </span>\n                    </p>\n                </div> \n                <div className=\"field\">\n                    <p className=\"control has-icons-left\">\n                    \n                        <input className=\"input is-small\" ref={register()} name=\"lga\" type=\"text\" placeholder=\"Local Govt Area\"  />\n                        <span className=\"icon is-small is-left\">\n                        <i className=\"fas fa-envelope\"></i>\n                        </span>\n                    </p>\n                </div> \n                <div className=\"field\">\n                    <p className=\"control has-icons-left\">\n                    \n                        <input className=\"input is-small\" ref={register()} name=\"state\" type=\"text\" placeholder=\"State\"  />\n                        <span className=\"icon is-small is-left\">\n                        <i className=\"fas fa-envelope\"></i>\n                        </span>\n                    </p>\n                </div> \n                <div className=\"field\">\n                    <p className=\"control has-icons-left\">\n                    \n                        <input className=\"input is-small\" ref={register()} name=\"country\" type=\"text\" placeholder=\"Country\"  />\n                        <span className=\"icon is-small is-left\">\n                        <i className=\"fas fa-envelope\"></i>\n                        </span>\n                    </p>\n                </div>\n            </div>\n        </div> \n        <p className=\" is-small\">Medical Data</p>\n        <div className=\"field is-horizontal\">\n            <div className=\"field-body\">\n                    <div className=\"field\">\n                        <p className=\"control has-icons-left\">\n                        \n                            <input className=\"input is-small\" ref={register()} name=\"bloodgroup\" type=\"text\" placeholder=\"Blood Group\"  />\n                            <span className=\"icon is-small is-left\">\n                            <i className=\"fas fa-envelope\"></i>\n                            </span>\n                        </p>\n                    </div> \n                    <div className=\"field\">\n                        <p className=\"control has-icons-left\">\n                        \n                            <input className=\"input is-small\" ref={register()} name=\"genotype\" type=\"text\" placeholder=\"Genotype\"  />\n                            <span className=\"icon is-small is-left\">\n                            <i className=\"fas fa-envelope\"></i>\n                            </span>\n                        </p>\n                    </div> \n                    <div className=\"field\">\n                        <p className=\"control has-icons-left\">\n                        \n                            <input className=\"input is-small\" ref={register()} name=\"disabilities\" type=\"text\" placeholder=\"Disabilities\"  />\n                            <span className=\"icon is-small is-left\">\n                            <i className=\"fas fa-envelope\"></i>\n                            </span>\n                        </p>\n                    </div> \n                </div> \n            </div>  \n            \n        <div className=\"field is-horizontal\">\n            <div className=\"field-body\">\n\n                <div className=\"field\">\n                    <p className=\"control has-icons-left\">\n                    \n                        <input className=\"input is-small\" ref={register()} name=\"allergies\" type=\"text\" placeholder=\"Allergies\"  />\n                        <span className=\"icon is-small is-left\">\n                        <i className=\"fas fa-envelope\"></i>\n                        </span>\n                    </p>\n                </div> \n                <div className=\"field\">\n                    <p className=\"control has-icons-left\">\n                    \n                        <input className=\"input is-small\" ref={register()} name=\"comorbidities\" type=\"text\" placeholder=\"Co-mobidities\"  />\n                        <span className=\"icon is-small is-left\">\n                        <i className=\"fas fa-envelope\"></i>\n                        </span>\n                    </p>\n                </div> \n            </div>\n        </div>\n            \n            <div className=\"field\">\n                <p className=\"control has-icons-left\">\n                    <input className=\"input is-small\" ref={register()} name=\"specificDetails\" type=\"text\" placeholder=\"Specific Details about patient\"  />\n                    <span className=\"icon is-small is-left\">\n                    <i className=\"fas fa-envelope\"></i>\n                    </span>\n                </p>\n            </div> \n            <p className=\" is-small\">Next of Kin Information</p>\n        <div className=\"field is-horizontal\">\n            <div className=\"field-body\">\n                <div className=\"field\">\n                    <p className=\"control has-icons-left\">\n                        <input className=\"input is-small\" ref={register()} name=\"nok_name\" type=\"text\" placeholder=\"Next of Kin Full Name\"/>\n                        <span className=\"icon is-small is-left\">\n                        <i className=\"fas fa-clinic-medical\"></i>\n                        </span>\n                    </p>\n                </div>\n                <div className=\"field\">\n                    <p className=\"control has-icons-left\">\n                        <input className=\"input is-small\" ref={register()} name=\"nok_phoneno\" type=\"text\" placeholder=\"Next of Kin Phone Number\"/>\n                        <span className=\"icon is-small is-left\">\n                        <i className=\"fas fa-clinic-medical\"></i>\n                        </span>\n                    </p>\n                </div> \n                <div className=\"field\">\n                    <p className=\"control has-icons-left\">\n                    \n                        <input className=\"input is-small\" ref={register()} name=\"nok_email\" type=\"email\" placeholder=\"Next of Kin Email\"  />\n                        <span className=\"icon is-small is-left\">\n                        <i className=\"fas fa-envelope\"></i>\n                        </span>\n                    </p>\n                </div>\n                <div className=\"field\">\n                    <p className=\"control has-icons-left\">\n                    \n                        <input className=\"input is-small\" ref={register()} name=\"nok_relationship\" type=\"text\" placeholder=\"Next of Kin Relationship\"  />\n                        <span className=\"icon is-small is-left\">\n                        <i className=\"fas fa-envelope\"></i>\n                        </span>\n                    </p>\n                </div>\n            </div>\n        </div> \n        <div className=\"field  is-grouped mt-2\" >\n                <p className=\"control\">\n                    <button type=\"submit\" className=\"button is-success is-small\" >\n                        Save\n                    </button>\n                </p>\n                <p className=\"control\">\n                    <button type=\"reset\" className=\"button is-warning is-small\" /* onClick={(e)=>e.target.reset()} */>\n                        Reset\n                    </button>\n                </p>\n               {/*  <p className=\"control\">\n                    <button className=\"button is-danger is-small\" onClick={()=>handleDelete()} type=\"delete\">\n                       Delete\n                    </button>\n                </p> */}\n            </div>\n     \n            </form>\n            </div>\n            </div>\n            <div className={`modal ${billModal?\"is-active\":\"\"}` }>\n                <div className=\"modal-background\"></div>\n                <div className=\"modal-card modalbkgrnd z10\"  >\n                    <header className=\"modal-card-head selectadd\">\n                    <p className=\"modal-card-title redu\">Similar Client Already Exist?</p>\n                    <button className=\"delete\" aria-label=\"close\"  onClick={handlecloseModal3}></button>\n                    </header>\n                    <section className=\"modal-card-body\">\n                    {/* <StoreList standalone=\"true\" /> */}\n                     <ClientGroup  list={patList}  closeModal={handlecloseModal3} choosen={choosen} dupl ={dupl} reg={reg} depen={depen}/> \n                    </section>\n                    {/* <footer className=\"modal-card-foot\">\n                    <button className=\"button is-success\">Save changes</button>\n                    <button className=\"button\">Cancel</button>\n                    </footer> */}\n                </div>\n            </div>     \n            <div className={`modal ${billModal?\"is-active\":\"\"}` }>\n                <div className=\"modal-background\"></div>\n                <div className=\"modal-card modalbkgrnd z10\"  >\n                    <header className=\"modal-card-head selectadd\">\n                    <p className=\"modal-card-title redu\">Similar Client Already Exist?</p>\n                    <button className=\"delete\" aria-label=\"close\"  onClick={handlecloseModal3}></button>\n                    </header>\n                    <section className=\"modal-card-body\">\n                    {/* <StoreList standalone=\"true\" /> */}\n                     <ClientGroup  list={patList}  closeModal={handlecloseModal3} choosen={choosen} dupl ={dupl} reg={reg} depen={depen}/> \n                    </section>\n                    {/* <footer className=\"modal-card-foot\">\n                    <button className=\"button is-success\">Save changes</button>\n                    <button className=\"button\">Cancel</button>\n                    </footer> */}\n                </div>\n            </div>                     \n        </>\n    )\n   \n}\n\nexport function BeneficiaryCreate(){\n    const { register, handleSubmit,setValue,  getValues, reset} = useForm(); //, watch, errors, reset \n      // eslint-disable-next-line\n    const [error, setError] =useState(false)\n      // eslint-disable-next-line\n    const [success, setSuccess] =useState(false)\n      // eslint-disable-next-line\n    const [message,setMessage] = useState(\"\")\n    // eslint-disable-next-line\n    const [facility,setFacility] = useState()\n    const ClientServ=client.service('client')\n    const policyServ=client.service('policy')\n    //const history = useHistory()\n    const [chosen, setChosen] =useState(\"\")\n    const {user} = useContext(UserContext) //,setUser\n    const [billModal, setBillModal] =useState(false)\n    const [clientModal, setClientModal] =useState(false)\n    const [showCorp, setShowCorp] =useState(false)\n    const [planHMO, setPlanHMO] =useState(\"\")\n    const [plan, setPlan] =useState(\"\")\n    const [price, setPrice] =useState(\"\")\n    const [patient, setPatient] =useState(\"\")\n    const [patList, setPatList] =useState([])\n    const [facilities, setFacilities] =useState([])\n    const [dependant, setDependant] =useState(false)\n    const [selectedClient, setSelectedClient]=useState()\n    const [productItem,setProductItem] = useState([])\n    // eslint-disable-next-line\n    const [currentUser,setCurrentUser] = useState()\n    const [date,setDate] = useState()\n    const [type,setType] = useState(\"Sales \")\n    const [chosenPlan,setChosenPlan] = useState()\n    const {state,setState} = useContext(ObjectContext)\n    const [documentNo,setDocumentNo] = useState(\"\")\n    const hMO=[\"simpa\", \"dania\"]\n    const [benefittingPlans1,setBenefittingPlans1] = useState([])\n    const ServicesServ=client.service('billing')\n    const [productEntry,setProductEntry]=useState()\n    const sponsorlist=[\"Self\", \"SME\",\"Corporate\", \"Government\", \"others\"]\n\n  // eslint-disable-next-line\n  /*   const getSearchfacility=(obj)=>{\n        setValue(\"facility\", obj._id,  {\n            shouldValidate: true,\n            shouldDirty: true\n        })\n    } */\n  const handleDate=async (date)=>{\n        setDate(date)\n        \n    }\n     \n  \n  //check user for facility or get list of facility  \n    useEffect(()=>{\n        //setFacility(user.activeClient.FacilityId)//\n      if (!user.stacker){\n           console.log(state.Beneficiary)\n       \n      }\n      getBenfittingPlans()\n      //load plan\n      //load sponsor\n      //load primary provider\n      //load premium\n      return () => {\n        \n    }\n    },[])\n\n    const getSearchfacility=(obj)=>{\n        setChosen(obj)\n       if (!obj){\n \n       }\n   }\n\n   const getSearchfacility1=(obj)=>{\n    setPlanHMO(obj)\n   if (!obj){\n\n   }\n}\n\n\n    const getBenfittingPlans = async()=>{\n        setBenefittingPlans1([])\n        if (user.currentEmployee){\n                \n            const findServices= await ServicesServ.find(\n                    {query: {\n                        facility: user.currentEmployee.facilityDetail._id,\n                        'contracts.source_org' : user.currentEmployee.facilityDetail._id ,\n                        'contracts.dest_org' : user.currentEmployee.facilityDetail._id ,\n                        category:\"Managed Care\",\n                       // storeId:state.StoreModule.selectedStore._id,\n                       // $limit:20,\n                    //   paginate:false,\n                        $sort: {\n                            category: 1\n                        }\n                        }})\n                        console.log(findServices)\n                        if (findServices.total>0){\n                 \n            findServices.groupedOrder[0].services.forEach(async (c)=>{\n                const newPlan={\n                    name:c.name,\n                   // checked:false\n                }\n                await setBenefittingPlans1((prev)=>(prev.concat(c)))\n                    })\n                }\n            }\n    \n       }\n\n  \n\n \n\n    const handleChangeMode = (mode)=>{\n        setMessage(mode)\n        if (mode==\"Corporate\"){\n            setShowCorp(true)\n        }\n\n    }\n\n    const handleChangePlan = async(value)=>{\n        console.log(value)\n        if (value==\"\"){\n            setPrice(\"\")\n            return\n        }\n        console.log(benefittingPlans1)\n        let cplan=benefittingPlans1.filter((el)=>el.name===value)\n        console.log(cplan)\n        setChosenPlan(cplan[0])\n       let contract= cplan[0].contracts.filter((el)=>el.source_org===el.dest_org )\n       setPrice(contract[0])\n            \n\n    }\n    const handleBill =()=>{\n        setBillModal(true)\n    }\n    const  handlecloseModal3 = () =>{\n        setBillModal(false)\n        }\n    const handleClient =()=>{\n        setClientModal(true)\n    }\n    const  handlecloseModal4 = () =>{\n        setClientModal(false)\n        console.log(state.Beneficiary)\n        }\n\n    const choosen=async (client)=>{\n        //update client with facilities\n      /*   if (client.facility !== user.currentEmployee.facilityDetail._id ){ //check taht it is not in list of related facilities\n           \n        \n        //create mpi record\n        const newPat = {\n            client: client._id,\n            facility:user.currentEmployee.facilityDetail._id,\n            mrn:client.mrn,\n            clientTags:client.clientTags,\n            relfacilities:client.relatedfacilites\n           }\n           await mpiServ.create(newPat)\n        } */\n        //reset form\n        //toast niotification\n        //cash payment\n    }\n    const dupl=(client)=>{\n        toast({\n            message: 'Client previously registered in this facility',\n            type: 'is-danger',\n            dismissible: true,\n            pauseOnHover: true,\n          })\n          reset()\n          setPatList([])\n        \n    }\n    const reg=async (client)=>{\n        if ((client.relatedfacilities.findIndex(el=>el.facility===user.currentEmployee.facilityDetail._id))===-1){\n            //create mpi record\n            const newPat = {\n                client: client._id,\n                facility:user.currentEmployee.facilityDetail._id,\n                mrn:client.mrn,\n                clientTags:client.clientTags,\n                relfacilities:client.relatedfacilities\n               }\n               //console.log(newPat)\n               await mpiServ.create(newPat).then((resp)=>{\n                toast({\n                    message: 'Client created succesfully',\n                    type: 'is-success',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  })\n               }).catch((err)=>{\n                toast({\n                    message: 'Error creating Client '+err,\n                    type: 'is-danger',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  })\n                  \n               })\n            }\n            //reset form\n            reset()\n            setPatList([])\n            //cash payment\n        \n    }\n    const depen=(client)=>{\n        setDependant(true)\n       \n    }\n    //create productitem\n    const  createProductItem = async()=>{\n        setProductItem([\n            {\n                //productId:,\n                name:chosenPlan.name,\n                quantity:\"1\",\n                sellingprice:price.price,\n                amount:price.price, //||qamount\n                baseunit:\"\",\n                costprice:\"\",\n                category: chosenPlan.category,\n                billingId:chosenPlan._id,\n                billingContract:price,\n                billMode: state.Beneficiary.principal.paymentinfo[0]\n            }\n        ])\n\n    }\n\n    const createProductEntry=()=>{\n        const [productEntry,setProductEntry]=useState({\n            productitems:productItem,\n            date,\n            documentNo,\n            type,\n            totalamount:price.priceso,\n           // source,\n    \n        })\n     \n\n    }\n\n    //create billfor policy\n    const handleCreateBill= async()=>{ //handle selected single order\n           \n\n        //documentation\n        let serviceList=[]\n        let document={}\n        \n          if (user.currentEmployee){\n          document.facility=user.currentEmployee.facilityDetail._id \n          document.facilityname=user.currentEmployee.facilityDetail.facilityName // or from facility dropdown\n          }\n         document.documentdetail=productItem\n         console.log(document.documentdetail)\n          document.documentname=\"Billed Orders\" //state.DocumentClassModule.selectedDocumentClass.name\n         // document.documentClassId=state.DocumentClassModule.selectedDocumentClass._id\n          document.location=state.employeeLocation.locationName+\" \"+state.employeeLocation.locationType\n          document.locationId=state.employeeLocation.locationId\n          document.client=patient._id\n          document.clientname=patient.firstname+ \" \"+patient.middlename+\" \"+patient.lastname\n          document.clientobj=patient\n          document.createdBy=user._id\n          document.createdByname=user.firstname+ \" \"+user.lastname\n          document.status=\"completed\"\n          console.log(document)\n     \n          //order\n          document.documentdetail.forEach(async (element)=> {\n       \n             let orderinfo={ //for reach document\n             documentationId:\"\", //tbf\n             order_category:element.category, //category\n             order: element.name,  //name\n             instruction:\"\",\n             destination_name: document.facilityname, //facilityname\n             destination: document.facility, //facility id\n             order_status:\"Billed\",\n             payer:element.billMode.organizationName,\n             paymentmode:element.billMode.paymentmode,\n             \n             requestingdoctor_Id: document.createdBy, \n             requestingdoctor_Name: document.createdByname,\n             requestingdoctor_locationid:document.locationId,\n             requestingdoctor_locationName:document.location,\n             requestingdoctor_facilityId:document.facility,\n             requestingdoctor_facilityname:document.facilityname,\n          \n             clientId: document.client,\n             clientname:document.clientname,\n             client:document.clientobj,\n           \n             order_action:[],\n             medication_action:[],\n             treatment_action:[]\n          }\n  \n          let billInfo={\n             orderInfo:{\n                 orderId:\"\", //tbf\n                 orderObj:orderinfo,\n               },\n               serviceInfo:{            \n                 price: element.sellingprice,\n                 quantity: element.quantity,\n                 productId: element.productId,\n                 name: element.name,\n                 baseunit: element.baseunit,\n                 amount:element.amount,\n                 billingId:element.billingId,\n                 billingContract:element.billingContract,\n                 createdby:user._id,\n               },\n               paymentInfo:{\n                 amountDue:element.amount,\n                 paidup:0,\n                 balance:element.amount,\n                 paymentDetails:[]\n           \n               },\n               participantInfo:{\n                 billingFacility:orderinfo.destination,\n                 billingFacilityName:orderinfo.destination_name,\n                 locationId:document.locationId, //selected location,\n                 clientId:orderinfo.clientId,\n                 client:orderinfo.client,\n                 paymentmode:element.billMode\n               },\n               createdBy:user._id,\n               billing_status:\"Unpaid\"\n             }\n             let items={\n                 orderinfo,\n                 billInfo\n             }\n  \n             serviceList.push(items)\n  \n         })\n  \n         console.log(\"==================\")\n         console.log(document,serviceList)\n         \n     \n     let confirm =window.confirm(`You are about to bill ${document.clientname} for ${serviceList.length} service(s)?`)\n  if (confirm){\n         await BillCreateServ.create({\n             document,\n             serviceList\n         }).then((res)=>{\n                     setSuccess(true)\n                     toast({\n                         message: 'Billed Orders created succesfully',\n                         type: 'is-success',\n                         dismissible: true,\n                         pauseOnHover: true,\n                         })\n                         setSuccess(false)\n                         setProductItem([])\n                         setCalcAmount(0);\n                         const today=new Date().toLocaleString()\n                         //console.log(today)\n                         setDate(today)\n                         const invoiceNo=random(6,'uppernumeric')\n                         setDocumentNo(invoiceNo)\n  \n                 })\n                 .catch((err)=>{\n                     toast({\n                         message: 'Error creating Billed Orders ' + err,\n                         type: 'is-danger',\n                         dismissible: true,\n                         pauseOnHover: true,\n                         })\n                 }) \n  \n         }\n  \n  \n  \n  \n  \n  \n    /*  const    newProductEntryModule={\n         selectedMedication:{},\n         show :'create'\n     }\n   await setState((prevstate)=>({...prevstate, medicationModule:newProductEntryModule})) */\n    //console.log(state)\n   // ProductEntry.show=!ProductEntry.show\n  \n  }\n  \n  //create policy\n const onSubmit = async (data,e) =>{\n        e.preventDefault();\n       /*  if(!chosenPlan||!message){\n            toast({\n                message: 'Please choose plan and/or sponsor! ' ,\n                type: 'is-danger',\n                dismissible: true,\n                pauseOnHover: true,\n              })\n\n            return\n        } */\n        \n        setMessage(\"\")\n        setError(false)\n        setSuccess(false)\n       //state.Beneficiary?.principal._id\n        if (!state.Beneficiary.principal._id){\n            toast({\n                message: 'Please add principal! ' ,\n                type: 'is-danger',\n                dismissible: true,\n                pauseOnHover: true,\n              })\n\n                return\n             }\n           \n           \n        \n         // data.createdby=user._id\n        //  console.log(data);\n          if (user.currentEmployee){\n          data.facility=user.currentEmployee.facilityDetail._id  // or from facility dropdown\n          }\n\n            \n        let confirm =window.confirm(`You are about to register a new policy ?`)\n        if (confirm){\n           let policy ={\n            policyNo:\"CVGBH/2022/098\",\n            organizationType:user.currentEmployee.facilityDetail.facilityType,\n            organizationId:user.currentEmployee.facilityDetail._id,\n            organizationName:user.currentEmployee.facilityDetail.facilityName,\n            organization:user.currentEmployee.facilityDetail,\n            principal: state.Beneficiary.principal, //\n            dependantBeneficiaries:state.Beneficiary.dependent,\n            provider:chosen,  //mixed\n           // sponsor:                                                                                                                         sponsor:state.Beneficiary.principal,  //mixed\n            sponsorshipType:data.sponsortype,\n            plan:chosenPlan,\n            premium:price.price,\n            premiumContract:price,\n            active:false,\n            isPaid: false,\n           // paymentmode:{ type: String,  default:\"Cash\"}, //company\n           // ??clientId:{ type: String,  },\n           // agent\"\":,\"\" // if sales is made on behalf of a state programme\n          //  agentName:{ type: String,  },\n           // bill:{},\n           // billId:\"\",\n           // validityPeriods:[ { type: String,  }],\n          //  validityEnds:{ type: Schema.Types.Date,},\n           //  validitystarts:{ type: Schema.Types.Date,},\n             \n           // lastCapitationPaidDate: { type: Schema.Types.Date, required: false },\n           // premiumPaymentRef: { type: Schema.Types.Mixed, required: false },\n           }\n\n\n\n        await policyServ.create(policy)\n        .then((res)=>{\n                //console.log(JSON.stringify(res))\n                e.target.reset();\n               /*  setMessage(\"Created Client successfully\") */\n                setSuccess(true)\n                toast({\n                    message: 'Client created succesfully',\n                    type: 'is-success',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  })\n                  setSuccess(false)\n                 /*  setPatList([])\n                  setDependant(false)\n                  setDate() */\n                 \n\n            })\n            .then(async(res)=>{\n              //  await setType(\"Sales\")\n            //    const today=new Date().toLocaleString()\n              // await setDate(today)\n            //    const invoiceNo=random(6,'uppernumeric')\n            //   await setDocumentNo(invoiceNo)\n              // await setPatient(state.Beneficiary.principal)\n              // await createProductItem()\n               // await createProductEntry()\n                \n               // await handleCreateBill()\n            })\n            .catch((err)=>{\n                toast({\n                    message: 'Error creating Client ' + err,\n                    type: 'is-danger',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  })\n                  setPatList([])\n                  setDependant(false)\n            })\n        }\n\n      } \n\n\nconst handleClickProd= ()=>{\n    setState((prevstate)=>({...prevstate, currBeneficiary:\"principal\"}))\n    setDependant(\"principal\")\n    console.log(state.Beneficiary)\n    setClientModal(true)\n}\nconst handleClickProd2= ()=>{\n    setState((prevstate)=>({...prevstate, currBeneficiary:\"dependent\"}))\n    setDependant(\"dependent\")\n    setClientModal(true)\n}\nconst handleHMO=(e)=>{\n    console.log(e)\n}\n\nconst handlePlan=(e)=>{\n    console.log(e)\n}\n\nconst handleRow=(Client)=>{\n    //domething o\n}\n    return (\n        <>\n            <div className=\"card \">\n                <div className=\"card-header\">\n                    <p className=\"card-header-title\">\n                        Create Beneficiary\n                    </p>\n                </div>\n                <div className=\"card-content vscrollable remPad1\">\n\n                \n                <div>\n                    <div className=\"field is-horizontal\">\n                        <div className=\"field \">\n                            <label className=\"label is-size-7 my-0\">Principal  </label>\n                        </div>\n                        <div className=\"field ml-2\">\n                         {(!state.Beneficiary?.principal._id)&&   <p className=\"control\">\n                                <button className=\"button is-info is-small btnheight \">\n                                <span className=\"is-small\" onClick={handleClickProd}> +</span>\n                                </button>\n                            </p>\n                            }   \n                        </div>\n                        </div>\n                        { (!!state.Beneficiary?.principal._id)&& <table className=\"table is-striped is-narrow is-hoverable is-fullwidth  \">\n                                    <thead>\n                                        <tr>\n                                        <th><abbr title=\"Serial No\">S/No</abbr></th>\n                                        <th><abbr title=\"Last Name\">Last Name</abbr></th>\n                                        <th>First Name</th>\n                                        <th><abbr title=\"Middle Name\">Middle Name</abbr></th>\n                                        {/* <th><abbr title=\"Age\">Payment Mode</abbr></th> */}\n                                       <th><abbr title=\"Age\">Age</abbr></th>\n                                        <th><abbr title=\"Gender\">Gender</abbr></th> \n                                        <th><abbr title=\"Phone\">Phone</abbr></th>\n                                        <th><abbr title=\"Email\">Email</abbr></th>\n                                        <th><abbr title=\"Tags\">Tags</abbr></th>\n                                        {/* <th><abbr title=\"Actions\">Actions</abbr></th> */}\n                                        </tr>\n                                    </thead>\n                                    <tfoot>\n                                        \n                                    </tfoot>\n                                    <tbody>\n                                        {/* {facilities.map((Client, i)=>( */}\n\n                                            <tr key={state.Beneficiary?.principal._id} onClick={()=>handleRow(state.Beneficiary?.principal)}  className={state.Beneficiary?.principal._id===(selectedClient?._id||null)?\"is-selected\":\"\"}>\n                                            <td>{1}</td>\n                                            <th>{state.Beneficiary?.principal.lastname}</th>\n                                            <td>{state.Beneficiary?.principal.firstname}</td>\n                                            <td>{state.Beneficiary?.principal.middlename}</td>\n                                            {/* <td>{state.Beneficiary?.principal.paymentinfo.map((pay,i)=>(\n                                                <>\n                                                {pay.paymentmode} {pay.paymentmode===\"Cash\"?\"\":\":\" } {pay.organizationName}<br></br>\n                                                </>\n                                            ))}</td> */}\n                                           <td>{state.Beneficiary?.principal.dob && <>{formatDistanceToNowStrict(new Date(state.Beneficiary?.principal.dob))}</>}</td>\n                                            <td>{state.Beneficiary?.principal.gender}</td>\n                                             <td>{state.Beneficiary?.principal.phone}</td>\n                                            <td>{state.Beneficiary?.principal.email}</td>\n                                            <td>{state.Beneficiary?.principal.clientTags}</td>\n                                           {/*  <td><span   className=\"showAction\"  >...</span></td> */}\n                                           \n                                            </tr>\n                                      {/*   ))} */}\n                                    </tbody>\n                                    </table>}\n                   </div>\n                        <div className=\"field is-horizontal\">\n                        <div className=\"field \">\n                            <label className=\"label is-size-7 my-0\">Dependents  </label>\n                        </div>\n                        <div className=\"field ml-2\">\n                            <p className=\"control\">\n                                <button className=\"button is-info is-small btnheight \">\n                                <span className=\"is-small\" onClick={handleClickProd2}> +</span>\n                                </button>\n                            </p>\n                        </div>\n                        </div>\n                        <div>\n                       {(state.Beneficiary.dependent.length>0)&&<table className=\"table is-striped is-narrow is-hoverable is-fullwidth  \">\n                                    <thead>\n                                        <tr>\n                                        <th><abbr title=\"Serial No\">S/No</abbr></th>\n                                        <th><abbr title=\"Last Name\">Last Name</abbr></th>\n                                        <th>First Name</th>\n                                        <th><abbr title=\"Middle Name\">Middle Name</abbr></th>\n                                        <th><abbr title=\"Age\">Payment Mode</abbr></th>\n                                       <th><abbr title=\"Age\">Age</abbr></th>\n                                        <th><abbr title=\"Gender\">Gender</abbr></th> \n                                        <th><abbr title=\"Phone\">Phone</abbr></th>\n                                        <th><abbr title=\"Email\">Email</abbr></th>\n                                        <th><abbr title=\"Tags\">Tags</abbr></th>\n                                        {/* <th><abbr title=\"Actions\">Actions</abbr></th> */}\n                                        </tr>\n                                    </thead>\n                                    <tfoot>\n                                        \n                                    </tfoot>\n                                    <tbody>\n                                        {state.Beneficiary.dependent.map((Client, i)=>(\n\n                                            <tr key={Client._id} onClick={()=>handleRow(Client)}  className={Client._id===(selectedClient?._id||null)?\"is-selected\":\"\"}>\n                                            <td>{i+1}</td>\n                                            <th>{Client.lastname}</th>\n                                            <td>{Client.firstname}</td>\n                                            <td>{Client.middlename}</td>\n                                            <td>{Client.paymentinfo.map((pay,i)=>(\n                                                <>\n                                                {pay.paymentmode} {pay.paymentmode===\"Cash\"?\"\":\":\" } {pay.organizationName}<br></br>\n                                                </>\n                                            ))}</td>\n                                           <td>{Client.dob && <>{formatDistanceToNowStrict(new Date(Client.dob))}</>}</td>\n                                            <td>{Client.gender}</td>\n                                             <td>{Client.phone}</td>\n                                            <td>{Client.email}</td>\n                                            <td>{Client.clientTags}</td>\n                                           {/*  <td><span   className=\"showAction\"  >...</span></td> */}\n                                           \n                                            </tr>\n                                        ))}\n                                    </tbody>\n                                    </table>}\n                                    </div>\n                <form onSubmit={handleSubmit(onSubmit)}>\n                <label className=\"label is-size-7 my-0\"  name=\"dob\" type=\"text\">Primary Provider </label>\n                    <div className=\"field is-expanded\"  /* style={ !user.stacker?{display:\"none\"}:{}} */ >\n                        <OrgFacilitySearch  getSearchfacility={getSearchfacility} clear={success} /> \n                        <p className=\"control has-icons-left \" style={{display:\"none\"}}>\n                            <input className=\"input is-small\" /* ref={register ({ required: true }) }  *//* add array no */  /* value={facilityId} name=\"facilityId\" type=\"text\" onChange={e=>setFacilityId(e.target.value)} placeholder=\"Product Id\" */ />\n                            <span className=\"icon is-small is-left\">\n                            <i className=\"fas  fa-map-marker-alt\"></i>\n                            </span>\n                        </p>\n                    </div>\n                    <div className=\"field is-horizontal\">\n                <div className=\"field-body\">\n                    <div className=\"field\">\n                    <label className=\"label is-size-7 my-0\"  name=\"dob\" type=\"text\">Sponsor </label>\n                    <div className=\"control\">\n                    <div className=\"select is-small \">\n                                <select name=\"sponsortype\"  ref={register({ required: true })}  onChange={(e)=>handleChangeMode(e.target.value)}  className=\"selectadd\" >\n                                <option value=\"\"> Choose Sponsor </option>\n                                <option value=\"Self\">Self</option>\n                                <option value=\"Corporate\">Corporate</option>\n                                </select>\n                            </div>\n                                </div>\n                    </div>\n                    <div className=\"field\"  style={ !showCorp?{display:\"none\"}:{}}>\n                    <label className=\"label is-size-7 my-0\"  name=\"dob\" type=\"text\">Corporate Sponsor </label>\n                    <div className=\"field is-expanded\"  /* style={ !user.stacker?{display:\"none\"}:{}} */ >\n                        <SponsorSearch  getSearchfacility={getSearchfacility1} clear={success} /> \n                        <p className=\"control has-icons-left \" style={{display:\"none\"}}>\n                            <input className=\"input is-small\" /* ref={register ({ required: true }) }  *//* add array no */  /* value={facilityId} name=\"facilityId\" type=\"text\" onChange={e=>setFacilityId(e.target.value)} placeholder=\"Product Id\" */ />\n                            <span className=\"icon is-small is-left\">\n                            <i className=\"fas  fa-map-marker-alt\"></i>\n                            </span>\n                        </p>\n                    </div>\n\n                    </div>\n                    \n\n                </div>\n                </div>\n\n\n                <label className=\"label is-size-7 my-0\"  name=\"dob\" type=\"text\">Plan </label>\n              \n                <div className=\"field\">    \n                    <div className=\"control\">\n                        <div className=\"select is-small \">\n                            <select name=\"plan\"  ref={register({ required: true })}  onChange={(e,i)=>handleChangePlan(e.target.value)}  className=\"selectadd\" >\n                            <option value=\"\"> Choose Plan </option>\n                            {benefittingPlans1.map((option,i)=>(\n                                <option key={i} value={option.name}> {option.name}</option>\n                            ))}\n                            </select>\n                        </div>\n                    </div>\n                    </div>\n     \n                \n                <label className=\"label is-size-7 my-0\"  name=\"dob\" type=\"text\">Premium:{price.price}</label>\n               \n                \n                <div className=\"field\">\n                        <p className=\"control has-icons-left\">\n                        \n                        <label className=\"is-size-7 my-0\"></label>\n                            <span className=\"icon is-small is-left\">\n                            <i className=\"nop-envelope\"></i>\n                            </span>\n                        </p>\n                </div>\n            \n                \n            <div className=\"field  is-grouped mt-2\" >\n                    <p className=\"control\">\n                        <button type=\"submit\" className=\"button is-success is-small\" >\n                            Save\n                        </button>\n                    </p>\n                    <p className=\"control\">\n                        <button type=\"reset\" className=\"button is-warning is-small\" /* onClick={(e)=>e.target.reset()} */>\n                            Reset\n                        </button>\n                    </p>\n                {/*  <p className=\"control\">\n                        <button className=\"button is-danger is-small\" onClick={()=>handleDelete()} type=\"delete\">\n                        Delete\n                        </button>\n                    </p> */}\n                </div>\n                \n                </form>\n                </div>\n            </div>\n            <div className={`modal ${clientModal?\"is-active\":\"\"}` }>\n                <div className=\"modal-background\"></div>\n                <div className=\"modal-card modalbkgrnd z10\"  >\n                    <header className=\"modal-card-head selectadd\">\n                    <p className=\"modal-card-title redu\">Create Client</p>\n                    <button className=\"delete\" aria-label=\"close\"  onClick={handlecloseModal4}></button>\n                    </header>\n                    <section className=\"modal-card-body\">\n                    {/* <StoreList standalone=\"true\" /> */}\n                    {/*  <ClientGroup  list={patList}  closeModal={handlecloseModal3} choosen={choosen} dupl ={dupl} reg={reg} depen={depen}/>  */}\n                     <ClientCreate closeModal={handlecloseModal4}/>\n                    </section>\n                    {/* <footer className=\"modal-card-foot\">\n                    <button className=\"button is-success\">Save changes</button>\n                    <button className=\"button\">Cancel</button>\n                    </footer> */}\n                </div>\n            </div>             \n        </>\n    )\n   \n}\n\nexport function ClientList(){\n   // const { register, handleSubmit, watch, errors } = useForm();\n    // eslint-disable-next-line\n    const [error, setError] =useState(false)\n     // eslint-disable-next-line\n    const [success, setSuccess] =useState(false)\n     // eslint-disable-next-line\n   const [message, setMessage] = useState(\"\") \n    const ClientServ=client.service('client')\n    //const history = useHistory()\n   // const {user,setUser} = useContext(UserContext)\n    const [facilities,setFacilities]=useState([])\n     // eslint-disable-next-line\n   const [selectedClient, setSelectedClient]=useState() //\n    // eslint-disable-next-line\n    const {state,setState}=useContext(ObjectContext)\n    // eslint-disable-next-line\n    const {user,setUser}=useContext(UserContext)\n    const [page, setPage] = useState(0) \n    const [limit, setLimit] = useState(50) \n    const [total, setTotal] = useState(0) \n\n\n\n    const handleCreateNew = async()=>{\n        const newClientModule={\n            selectedClient:{},\n            show :'create'\n            }\n        await setState((prevstate)=>({...prevstate, ClientModule:newClientModule}))\n       //console.log(state)\n        } \n\n    \n    const handleRow= async(Client)=>{\n        await setSelectedClient(Client)\n        const    newClientModule={\n            selectedClient:Client,\n            show :'detail'\n        }\n       await setState((prevstate)=>({...prevstate, ClientModule:newClientModule}))\n    }\n\n   const handleSearch=(val)=>{\n         // eslint-disable-next-line\n       const field='firstname'\n       console.log(val)\n       ClientServ.find({query: {\n                $or:[\n                    { firstname: {\n                        $regex:val,\n                        $options:'i' \n                    }},\n                    { lastname: {\n                        $regex:val,\n                        $options:'i' \n                    }},\n                    { middlename: {\n                        $regex:val,\n                        $options:'i' \n                    }},\n                    { phone: {\n                        $regex:val,\n                        $options:'i' \n                    }},\n                    { clientTags: {\n                        $regex:val,\n                        $options:'i' \n                    }},\n                    { mrn: {\n                        $regex:val,\n                        $options:'i' \n                    }},\n                    { email: {\n                        $regex:val,\n                        $options:'i' \n                    }},\n                    { specificDetails: {\n                        $regex:val,\n                        $options:'i' \n                    }},\n                    { gender: val},\n                ],\n\n                \"relatedfacilities.facility\":user.currentEmployee.facilityDetail._id, // || \"\",\n                $limit:limit,\n                $sort: {\n                    createdAt: -1\n                  }\n                    }}).then((res)=>{\n                console.log(res)\n               setFacilities(res.data)\n                setMessage(\" Client  fetched successfully\")\n                setSuccess(true) \n            })\n            .catch((err)=>{\n                console.log(err)\n                setMessage(\"Error fetching Client, probable network issues \"+ err )\n                setError(true)\n            })\n        }\n   \n    const getFacilities= async()=>{\n        \n            if (user.currentEmployee){ \n               // const findClient= await ClientServ.find()     \n            const findClient= await ClientServ.find(\n                {query: {\n                   // \"relatedfacilities.facility\":user.currentEmployee.facilityDetail._id,\n                   // $limit:limit,\n                   // $skip:page * limit,\n                    $sort: {\n                        createdAt: -1\n                    }\n                    }})\n       /*  if (page===0){ */\n            await setFacilities(findClient.data)\n        /* }else{\n            await setFacilities(prevstate=>prevstate.concat(findClient.data))\n        } */\n\n        \n         await setTotal(findClient.total)\n         //console.log(user.currentEmployee.facilityDetail._id, state)\n         //console.log(facilities)\n         setPage(page=>page+1)\n                }\n                else {\n                    if (user.stacker){\n                        const findClient= await ClientServ.find(\n                            {query: {\n                                \n                                $limit:20,\n                                $sort: {\n                                    createdAt: -1\n                                }\n                                }})\n            \n                    await setFacilities(findClient.data)\n\n                    }\n                }\n            }\n            \n\n    useEffect(() => {\n               \n                if (user){\n                    //getFacilities()\n                    rest()\n                }else{\n                    /* const localUser= localStorage.getItem(\"user\")\n                    const user1=JSON.parse(localUser)\n                    console.log(localUser)\n                    console.log(user1)\n                    fetchUser(user1)\n                    console.log(user)\n                    getFacilities(user) */\n                }\n                ClientServ.on('created', (obj)=>rest ())\n                ClientServ.on('updated', (obj)=>rest ())\n                ClientServ.on('patched', (obj)=>rest ())\n                ClientServ.on('removed', (obj)=>rest ())\n                return () => {\n                \n                }\n        // eslint-disable-next-line\n            },[])\n        const rest = async ()=>{\n                // console.log(\"starting rest\")\n               // await setRestful(true)\n                   await  setPage(0) \n                   //await  setLimit(2) \n                   await    setTotal(0) \n                   await  setFacilities([])\n                  await getFacilities()\n                  //await  setPage(0) \n                //  await setRestful(false)\n             }\n\n             useEffect(() => {\n                //console.log(facilities)\n                 return () => {\n                    \n                 }\n             }, [facilities])\n    //todo: pagination and vertical scroll bar\n\n    return(\n        <>\n           \n                <div className=\"level\">\n                    <div className=\"level-left\">\n                        <div className=\"level-item\">\n                            <div className=\"field\">\n                                <p className=\"control has-icons-left  \">\n                                    <DebounceInput className=\"input is-small \" \n                                        type=\"text\" placeholder=\"Search Clients\"\n                                        minLength={3}\n                                        debounceTimeout={400}\n                                        onChange={(e)=>handleSearch(e.target.value)} />\n                                    <span className=\"icon is-small is-left\">\n                                        <i className=\"fas fa-search\"></i>\n                                    </span>\n                                </p>\n                            </div>\n                        </div>\n                    </div>\n                    <div className=\"level-item\"> <span className=\"is-size-6 has-text-weight-medium\">List of Clients </span></div>\n                    <div className=\"level-right\">\n                        <div className=\"level-item\"> \n                            <div className=\"level-item\"><div className=\"button is-success is-small\" onClick={handleCreateNew}>New</div></div>\n                        </div>\n                    </div>\n\n                </div>\n                <div className=\"table-container pullup  vscrola\"  id=\"scrollableDiv\">\n                <InfiniteScroll\n                        dataLength={facilities.length}\n                        next={getFacilities}\n                        hasMore={total>facilities.length}\n                        loader={<h4>Loading...</h4>}\n                        scrollableTarget=\"scrollableDiv\"\n                    >\n                                <table className=\"table is-striped is-narrow is-hoverable is-fullwidth  \">\n                                    <thead>\n                                        <tr>\n                                        <th><abbr title=\"Serial No\">S/No</abbr></th>\n                                        <th><abbr title=\"Last Name\">Last Name</abbr></th>\n                                        <th>First Name</th>\n                                        <th><abbr title=\"Middle Name\">Middle Name</abbr></th>\n                                        <th><abbr title=\"Age\">Payment Mode</abbr></th>\n                                       <th><abbr title=\"Age\">Age</abbr></th>\n                                        <th><abbr title=\"Gender\">Gender</abbr></th> \n                                        <th><abbr title=\"Phone\">Phone</abbr></th>\n                                        <th><abbr title=\"Email\">Email</abbr></th>\n                                        <th><abbr title=\"Tags\">Tags</abbr></th>\n                                        {/* <th><abbr title=\"Actions\">Actions</abbr></th> */}\n                                        </tr>\n                                    </thead>\n                                    <tfoot>\n                                        \n                                    </tfoot>\n                                    <tbody>\n                                        {facilities.map((Client, i)=>(\n\n                                            <tr key={Client._id} onClick={()=>handleRow(Client)}  className={Client._id===(selectedClient?._id||null)?\"is-selected\":\"\"}>\n                                            <td>{i+1}</td>\n                                            <th>{Client.lastname}</th>\n                                            <td>{Client.firstname}</td>\n                                            <td>{Client.middlename}</td>\n                                            <td>{Client.paymentinfo.map((pay,i)=>(\n                                                <>\n                                                {pay.paymentmode} {pay.paymentmode===\"Cash\"?\"\":\":\" } {pay.organizationName}<br></br>\n                                                </>\n                                            ))}</td>\n                                           <td>{Client.dob && <>{formatDistanceToNowStrict(new Date(Client.dob))}</>}</td>\n                                            <td>{Client.gender}</td>\n                                             <td>{Client.phone}</td>\n                                            <td>{Client.email}</td>\n                                            <td>{Client.clientTags}</td>\n                                           {/*  <td><span   className=\"showAction\"  >...</span></td> */}\n                                           \n                                            </tr>\n\n                                        ))}\n                                    </tbody>\n                                    </table>\n                                    </InfiniteScroll>                  \n                </div>              \n          \n        </>\n              \n    )\n    }\n\nexport function ClientDetail(){\n    //const { register, handleSubmit, watch, setValue } = useForm(); //errors,\n     // eslint-disable-next-line\n    const history =useHistory()\n      // eslint-disable-next-line\n    let { path, url } = useRouteMatch();\n  // eslint-disable-next-line\n    const [error, setError] =useState(false) //, \n    const [finacialInfoModal, setFinacialInfoModal] =useState(false)\n    const [billingModal, setBillingModal] =useState(false)\n    const [billModal, setBillModal] =useState(false)\n    const [appointmentModal, setAppointmentModal] =useState(false)\n     // eslint-disable-next-line\n    const [message, setMessage] = useState(\"\") //,\n    //const ClientServ=client.service('/Client')\n    //const history = useHistory()\n    const {user,setUser} = useContext(UserContext)\n    const {state,setState} = useContext(ObjectContext)\n\n   \n\n  let Client =state.ClientModule.selectedClient \n     // eslint-disable-next-line\n    const client=Client\n    const handleEdit= async()=>{\n        const    newClientModule={\n            selectedClient:Client,\n            show :'modify'\n        }\n       await setState((prevstate)=>({...prevstate, ClientModule:newClientModule}))\n       //console.log(state)\n       \n    }\n \n    const  handleFinancialInfo = ()=>{\n    setFinacialInfoModal(true)\n\n    }\n    const  handlecloseModal = () =>{\n    setFinacialInfoModal(false)\n    }\n\n    const  handlecloseModal1 = () =>{\n        setBillingModal(false)\n        }\n\n    const  handlecloseModal2 = () =>{\n            setAppointmentModal(false)\n            }\n\n    const showBilling = () =>{\n        setBillingModal(true)\n       //history.push('/app/finance/billservice')\n        }\n\n    const handleSchedule =()=>{\n        setAppointmentModal(true)\n    }\n    const handleBill =()=>{\n        setBillModal(true)\n    }\n    const  handlecloseModal3 = () =>{\n        setBillModal(false)\n        }\n\n   /*  useEffect(() => {\n        Client =state.ClientModule.selectedClient\n        return () => {\n           \n        }\n    }, [billingModal]) */\n    return (\n        <>\n        <div className=\"card \">\n            <div className=\"card-header\">\n                <p className=\"card-header-title\">\n                    Client Details\n                </p>\n                {(user.currentEmployee?.roles.includes('Bill Client')||user.currentEmployee?.roles.length===0||user.stacker )&&   <button className=\"button is-success is-small btnheight mt-2\" onClick={showBilling}>Bill Client</button>}\n            </div>\n            <div className=\"card-content vscrollable\">\n           \n            <div className=\"field is-horizontal\">\n                <div className=\"field-body\">\n                {Client.firstname &&  <div className=\"field\">\n                        <p className=\"control has-icons-left has-icons-right\">\n                            <label className=\"label is-size-7 my-0 \"   name=\"firstname\" type=\"text\">First Name </label><label className=\"is-size-7 my-0 \">{Client.firstname }</label>\n                            <span className=\"icon is-small is-left\">\n                                <i className=\"nop-hospital\"></i>\n                            </span>                    \n                        </p>\n                    </div>}\n\n\n                    {Client.middlename &&  <div className=\"field\">\n                        <p className=\"control has-icons-left has-icons-right\">\n                        <label className=\"label is-size-7 my-0\"   name=\"middlename\" type=\"text\"> Middle Name </label><label className=\"is-size-7 my-0\">{Client.middlename }</label>\n                        <span className=\"icon is-small is-left\">\n                            <i className=\"nop-map-signs\"></i>\n                        </span>\n                        \n                        </p>\n                    </div>}\n             {Client.lastname &&\n                <div className=\"field\">\n                    <p className=\"control has-icons-left\">\n                        <label className=\"label is-size-7 my-0\"  name=\"lastname\" type=\"text\">Last Name</label><label className=\"is-size-7 my-0\">{Client.lastname }</label>\n                        <span className=\"icon is-small is-left\">\n                        <i className=\" nop-user-md \"></i>\n                        </span>\n                    </p>\n                </div>}\n                </div>  \n                </div>\n                <div className=\"field is-horizontal\">\n                <div className=\"field-body\">\n                {Client.dob &&<div className=\"field\">\n                    <p className=\"control has-icons-left\">\n                    \n                        <label className=\"label is-size-7 my-0\"  name=\"dob\" type=\"text\">Date of Birth </label><label className=\"is-size-7 my-0\">{ new Date(Client.dob).toLocaleDateString('en-GB')}</label>\n                        <span className=\"icon is-small is-left\">\n                        <i className=\"nop-envelope\"></i>\n                        </span>\n                    </p>\n                </div> }\n                {Client.gender &&<div className=\"field\">\n                    <p className=\"control has-icons-left\">\n                    \n                        <label className=\"label is-size-7 my-0\"  name=\"gender\" type=\"text\">Gender </label><label className=\"is-size-7 my-0\">{Client.gender }</label>\n                        <span className=\"icon is-small is-left\">\n                        <i className=\"nop-envelope\"></i>\n                        </span>\n                    </p>\n                </div> }\n                {Client.maritalstatus && <div className=\"field\">\n                    <p className=\"control has-icons-left\">\n                    \n                        <label className=\"label is-size-7 my-0\"  name=\"maritalstatus\" type=\"text\">Marital Status </label><label className=\"is-size-7 my-0\">{Client.maritalstatus }</label>\n                        <span className=\"icon is-small is-left\">\n                        <i className=\"nop-envelope\"></i>\n                        </span>\n                    </p>\n                </div> }\n                {Client.mrn && <div className=\"field\">\n                    <p className=\"control has-icons-left\">\n                    \n                        <label className=\"label is-size-7 my-0\"  name=\"mrn\" type=\"text\">Medical Records Number  </label><label className=\"is-size-7 my-0\">{Client.mrn }</label>\n                        <span className=\"icon is-small is-left\">\n                        <i className=\"nop-envelope\"></i>\n                        </span>\n                    </p>\n                </div> }\n                </div>\n                </div>\n                <div className=\"field is-horizontal\">\n                    <div className=\"field-body\">\n                    {Client.religion && <div className=\"field\">\n                        <p className=\"control has-icons-left\">\n                        \n                            <label className=\"label is-size-7 my-0\"  name=\"religion\" type=\"text\">Religion  </label><label className=\"is-size-7 my-0\">{Client.religion }</label>\n                            <span className=\"icon is-small is-left\">\n                            <i className=\"nop-envelope\"></i>\n                            </span>\n                        </p>\n                    </div> }\n                    {Client.profession &&  <div className=\"field\">\n                        <p className=\"control has-icons-left\">\n                        \n                            <label className=\"label is-size-7 my-0\"  name=\"profession\" type=\"text\">Profession  </label><label className=\"is-size-7 my-0\">{Client.profession }</label>\n                            <span className=\"icon is-small is-left\">\n                            <i className=\"nop-envelope\"></i>\n                            </span>\n                        </p>\n                    </div> }\n                    {Client.phone &&<div className=\"field\">\n                        <p className=\"control has-icons-left\">\n                            <label className=\"label is-size-7 my-0\"  name=\"phone\" type=\"text\"> Phone No</label><label className=\"is-size-7 my-0\">{Client.phone }</label>\n                            <span className=\"icon is-small is-left\">\n                            <i className=\"nop-phone-alt\"></i>\n                            </span>\n                        </p>\n                    </div>}\n\n                    {Client.email && <div className=\"field\">\n                        <p className=\"control has-icons-left\">\n                        \n                            <label className=\"label is-size-7 my-0\"  name=\"email\" type=\"email\">Email  </label><label className=\"is-size-7 my-0\">{Client.email }</label>\n                            <span className=\"icon is-small is-left\">\n                            <i className=\"nop-envelope\"></i>\n                            </span>\n                        </p>\n                    </div> }\n                    </div>\n                </div>\n\n                {Client.address &&<div className=\"field\">\n                <p className=\"control has-icons-left\">\n\n                    <label className=\"label is-size-7 my-0\"  name=\"address\" type=\"text\">Residential Address  </label><label className=\"is-size-7 my-0\">{Client.address }</label>\n                    <span className=\"icon is-small is-left\">\n                    <i className=\"nop-envelope\"></i>\n                    </span>\n                </p>\n                </div>} \n                <div className=\"field is-horizontal\">\n                    <div className=\"field-body\">\n                        {Client.city && <div className=\"field\">\n                            <p className=\"control has-icons-left\">\n                            \n                                <label className=\"label is-size-7 my-0\"  name=\"city\" type=\"text\">Town/City  </label><label className=\"is-size-7 my-0\">{Client.city }</label>\n                                <span className=\"icon is-small is-left\">\n                                <i className=\"nop-envelope\"></i>\n                                </span>\n                            </p>\n                        </div> }\n                        {Client.lga && <div className=\"field\">\n                            <p className=\"control has-icons-left\">\n                            \n                                <label className=\"label is-size-7 my-0\"  name=\"lga\" type=\"text\">Local Govt Area  </label><label className=\"is-size-7 my-0\">{Client.lga }</label>\n                                <span className=\"icon is-small is-left\">\n                                <i className=\"nop-envelope\"></i>\n                                </span>\n                            </p>\n                        </div> }\n                        {Client.state && <div className=\"field\">\n                            <p className=\"control has-icons-left\">\n                                <label className=\"label is-size-7 my-0\"  name=\"state\" type=\"text\">State  </label><label className=\"is-size-7 my-0\">{Client.state }</label>\n                                <span className=\"icon is-small is-left\">\n                                <i className=\"nop-envelope\"></i>\n                                </span>\n                            </p>\n                        </div> }\n                        {Client.country &&<div className=\"field\">\n                        <p className=\"control has-icons-left\">\n                        \n                            <label className=\"label is-size-7 my-0\"  name=\"country\" type=\"text\">Country  </label><label className=\"is-size-7 my-0\">{Client.country }</label>\n                            <span className=\"icon is-small is-left\">\n                            <i className=\"nop-envelope\"></i>\n                            </span>\n                        </p>\n                    </div>}\n                    </div>\n                </div> \n                <div className=\"field is-horizontal\">\n                <div className=\"field-body\">\n                     {Client.bloodgroup &&  <div className=\"field\">\n                        <p className=\"control has-icons-left\">\n                        \n                            <label className=\"label is-size-7 my-0\"  name=\"bloodgroup\" type=\"text\">Blood Group </label><label className=\"is-size-7 my-0\">{Client.bloodgroup }</label>\n                            <span className=\"icon is-small is-left\">\n                            <i className=\"nop-envelope\"></i>\n                            </span>\n                        </p>\n                    </div>}\n                   \n                    {Client.genotype && <div className=\"field\">\n                        <p className=\"control has-icons-left\">\n                        \n                            <label className=\"label is-size-7 my-0\"  name=\"genotype\" type=\"text\">Genotype  </label><label className=\"is-size-7 my-0\">{Client.genotype }</label>\n                            <span className=\"icon is-small is-left\">\n                            <i className=\"nop-envelope\"></i>\n                            </span>\n                        </p>\n                    </div> }\n                    {Client.disabilities && <div className=\"field\">\n                        <p className=\"control has-icons-left\">\n                        \n                            <label className=\"label is-size-7 my-0\"  name=\"disabilities\" type=\"text\">Disabilities  </label><label className=\"is-size-7 my-0\">{Client.disabilities }</label>\n                            <span className=\"icon is-small is-left\">\n                            <i className=\"nop-envelope\"></i>\n                            </span>\n                        </p>\n                    </div> }\n                </div> \n                </div>  \n\n                <div className=\"field is-horizontal\">\n                <div className=\"field-body\">\n\n                {Client.allergies && <div className=\"field\">\n                    <p className=\"control has-icons-left\">\n                    \n                        <label className=\"label is-size-7 my-0\"  name=\"allergies\" type=\"text\">Allergies  </label><label className=\"is-size-7 my-0\">{Client.allergies }</label>\n                        <span className=\"icon is-small is-left\">\n                        <i className=\"nop-envelope\"></i>\n                        </span>\n                    </p>\n                </div> }\n                {Client.comorbidities && <div className=\"field\">\n                    <p className=\"control has-icons-left\">\n                    \n                        <label className=\"label is-size-7 my-0\"  name=\"comorbidities\" type=\"text\">Co-mobidities  </label><label className=\"is-size-7 my-0\">{Client.comorbidities }</label>\n                        <span className=\"icon is-small is-left\">\n                        <i className=\"nop-envelope\"></i>\n                        </span>\n                    </p>\n                </div> }\n                </div>\n                </div>\n               {Client.clientTags && <div className=\"field\">\n                <p className=\"control has-icons-left\">\n\n                    <label className=\"label is-size-7 my-0\"  name=\"clientTags\" type=\"text\">Tags </label><label className=\"is-size-7 my-0\">{Client.clientTags }</label>\n                    <span className=\"icon is-small is-left\">\n                    <i className=\"nop-envelope\"></i>\n                    </span>\n                </p>\n                </div> }\n                {Client.specificDetails && <div className=\"field\">\n                <p className=\"control has-icons-left\">\n                    <label className=\"label is-size-7 my-0\"  name=\"specificDetails\" type=\"text\">Specific Details about Client </label><label className=\"is-size-7 my-0\">{Client.specificDetails }</label>\n                    <span className=\"icon is-small is-left\">\n                    <i className=\"nop-envelope\"></i>\n                    </span>\n                </p>\n                </div> }\n                <div className=\"field is-horizontal\">\n                <div className=\"field-body\">\n                {Client.nok_name && <div className=\"field\">\n                    <p className=\"control has-icons-left\">\n                        <label className=\"label is-size-7 my-0\"  name=\"nok_name\" type=\"text\">Next of Kin Full Name</label><label className=\"is-size-7 my-0\">{Client.nok_name }</label>\n                        <span className=\"icon is-small is-left\">\n                        <i className=\"nop-clinic-medical\"></i>\n                        </span>\n                    </p>\n                </div>}\n                {Client.nok_phoneno && <div className=\"field\">\n                    <p className=\"control has-icons-left\">\n                        <label className=\"label is-size-7 my-0\"  name=\"nok_phoneno\" type=\"text\">Next of Kin Phone Number</label><label className=\"is-size-7 my-0\">{Client.nok_phoneno }</label>\n                        <span className=\"icon is-small is-left\">\n                        <i className=\"nop-clinic-medical\"></i>\n                        </span>\n                    </p>\n                </div> }\n                {Client.nok_email && <div className=\"field\">\n                    <p className=\"control has-icons-left\">\n                    \n                        <label className=\"label is-size-7 my-0\"  name=\"nok_email\" type=\"email\">Next of Kin Email </label><label className=\"is-size-7 my-0\">{Client.nok_email }</label>\n                        <span className=\"icon is-small is-left\">\n                        <i className=\"nop-envelope\"></i>\n                        </span>\n                    </p>\n                </div>}\n                {Client.nok_relationship && <div className=\"field\">\n                    <p className=\"control has-icons-left\">\n                    \n                        <label className=\"label is-size-7 my-0\"  name=\"nok_relationship\" type=\"text\">Next of Kin Relationship\"  </label><label className=\"is-size-7 my-0\">{Client.nok_relationship }</label>\n                        <span className=\"icon is-small is-left\">\n                        <i className=\"nop-envelope\"></i>\n                        </span>\n                    </p>\n                </div>}\n                </div>\n                </div> \n            <div className=\"field is-grouped  mt-2\">\n                <p className=\"control\">\n                    <button className=\"button is-success is-small\" onClick={handleEdit}>\n                        Edit Details\n                    </button>\n                </p>\n                <p className=\"control\">\n                    <button className=\"button is-info is-small\" onClick={handleFinancialInfo}>\n                        Payment Info\n                    </button>\n                </p>\n                <p className=\"control\">\n                    <button className=\"button is-warning is-small\" onClick={handleSchedule}>\n                        Schedule appointment\n                    </button>\n                </p>\n               {/*  <p className=\"control\">\n                    <button className=\"button is-danger is-small\" >\n                        Check into Clinic \n                    </button>\n                </p> */}\n                <p className=\"control\">\n                    <button className=\"button is-link is-small\" onClick={()=>{history.push('/app/clinic/encounter')}} >\n                        Attend to Client\n                    </button>\n                </p>\n\n            </div>\n            \n           \n        </div>\n        </div>\n        <div className={`modal ${finacialInfoModal?\"is-active\":\"\"}` }>\n            <div className=\"modal-background\"></div>\n            <div className=\"modal-card\">\n                <header className=\"modal-card-head\">\n                <p className=\"modal-card-title\">Financial Information</p>\n                <button className=\"delete\" aria-label=\"close\"  onClick={handlecloseModal}></button>\n                </header>\n                <section className=\"modal-card-body\">\n                {/* <StoreList standalone=\"true\" /> */}\n                <ClientFinInfo closeModal={handlecloseModal}/>\n                </section>\n                {/* <footer className=\"modal-card-foot\">\n                <button className=\"button is-success\">Save changes</button>\n                <button className=\"button\">Cancel</button>\n                </footer> */}\n            </div>\n        </div> \n\n            <div className={`modal ${billingModal?\"is-active\":\"\"}` }>\n                <div className=\"modal-background\"></div>\n                <div className=\"modal-card\">\n                    <header className=\"modal-card-head\">\n                    <p className=\"modal-card-title\">Bill Client</p>\n                    <button className=\"delete\" aria-label=\"close\"  onClick={handlecloseModal1}></button>\n                    </header>\n                    <section className=\"modal-card-body\">\n                    {/* <StoreList standalone=\"true\" /> */}\n                    < BillServiceCreate closeModal={handlecloseModal1}/>\n                    </section>\n                    {/* <footer className=\"modal-card-foot\">\n                    <button className=\"button is-success\">Save changes</button>\n                    <button className=\"button\">Cancel</button>\n                    </footer> */}\n                </div>\n            </div>  \n            <div className={`modal ${appointmentModal?\"is-active\":\"\"}` }>\n                <div className=\"modal-background\"></div>\n                <div className=\"modal-card\">\n                    <header className=\"modal-card-head\">\n                    <p className=\"modal-card-title\">Set Appointment</p>\n                    <button className=\"delete\" aria-label=\"close\"  onClick={handlecloseModal2}></button>\n                    </header>\n                    <section className=\"modal-card-body\">\n                    {/* <StoreList standalone=\"true\" /> */}\n                    <AppointmentCreate  closeModal={handlecloseModal2}/>\n                    </section>\n                    {/* <footer className=\"modal-card-foot\">\n                    <button className=\"button is-success\">Save changes</button>\n                    <button className=\"button\">Cancel</button>\n                    </footer> */}\n                </div>\n            </div>\n            <div className={`modal ${billModal?\"is-active\":\"\"}` }>\n                <div className=\"modal-background\"></div>\n                <div className=\"modal-card\">\n                    <header className=\"modal-card-head\">\n                    <p className=\"modal-card-title\">Set Appointment</p>\n                    <button className=\"delete\" aria-label=\"close\"  onClick={handlecloseModal3}></button>\n                    </header>\n                    <section className=\"modal-card-body\">\n                    {/* <StoreList standalone=\"true\" /> */}\n                    <ClientBilledPrescription  selectedClient={Client._id}  closeModal={handlecloseModal3}/>\n                    </section>\n                    {/* <footer className=\"modal-card-foot\">\n                    <button className=\"button is-success\">Save changes</button>\n                    <button className=\"button\">Cancel</button>\n                    </footer> */}\n                </div>\n            </div>                       \n        </>\n    )\n   \n   \n}\n\nexport function ClientModify(){\n    const { register, handleSubmit, setValue,reset} = useForm(); //watch, errors,, errors \n    // eslint-disable-next-line \n    const [error, setError] =useState(false)\n    // eslint-disable-next-line \n    const [success, setSuccess] =useState(false)\n    // eslint-disable-next-line \n    const [message,setMessage] = useState(\"\")\n    // eslint-disable-next-line \n    const ClientServ=client.service('client')\n    //const history = useHistory()\n     // eslint-disable-next-line\n    const {user} = useContext(UserContext)\n    const {state,setState} = useContext(ObjectContext)\n\n    const Client =state.ClientModule.selectedClient \n\n        useEffect(() => {\n            setValue(\"firstname\", Client.firstname,  {\n                shouldValidate: true,\n                shouldDirty: true\n            })\n            setValue(\"middlename\", Client.middlename,  {\n                shouldValidate: true,\n                shouldDirty: true\n            })\n             setValue(\"lastname\", Client.lastname,  {\n                shouldValidate: true,\n                shouldDirty: true\n            })\n            setValue(\"phone\", Client.phone,  {\n                shouldValidate: true,\n                shouldDirty: true\n            })\n            setValue(\"email\", Client.email,  {\n                shouldValidate: true,\n                shouldDirty: true\n            })\n            setValue(\"dob\", Client.dob,  {\n                shouldValidate: true,\n                shouldDirty: true\n            })\n            setValue(\"gender\", Client.gender,  {\n                shouldValidate: true,\n                shouldDirty: true\n            }) \n             setValue(\"profession\", Client.profession,  {\n                shouldValidate: true,\n                shouldDirty: true\n            }) \n            setValue(\"address\", Client.address,  {\n                shouldValidate: true,\n                shouldDirty: true\n            })\n            setValue(\"city\", Client.city,  {\n                shouldValidate: true,\n                shouldDirty: true\n            })\n             setValue(\"state\", Client.state,  {\n                shouldValidate: true,\n                shouldDirty: true\n            })\n            setValue(\"country\", Client.country,  {\n                shouldValidate: true,\n                shouldDirty: true\n            })\n            setValue(\"nok_name\", Client.nok_name,  {\n                shouldValidate: true,\n                shouldDirty: true\n            })\n            setValue(\"nok_email\", Client.nok_email,  {\n                shouldValidate: true,\n                shouldDirty: true\n            })\n            setValue(\"nok_phoneno\", Client.nokphoneno,  {\n                shouldValidate: true,\n                shouldDirty: true\n            }) \n             setValue(\"lga\", Client.lga,  {\n                shouldValidate: true,\n                shouldDirty: true\n            }) \n            setValue(\"bloodgroup\", Client.bloodgroup,  {\n                shouldValidate: true,\n                shouldDirty: true\n            })\n            setValue(\"genotype\", Client.genotype,  {\n                shouldValidate: true,\n                shouldDirty: true\n            })\n             setValue(\"disabilities\", Client.disabilities,  {\n                shouldValidate: true,\n                shouldDirty: true\n            })\n            setValue(\"specificDetails\", Client.specificDetails,  {\n                shouldValidate: true,\n                shouldDirty: true\n            })\n            setValue(\"clientTags\", Client.clientTags,  {\n                shouldValidate: true,\n                shouldDirty: true\n            })\n            setValue(\"mrn\", Client.mrn,  {\n                shouldValidate: true,\n                shouldDirty: true\n            })\n            setValue(\"comorbidities\", Client.comorbidities,  {\n                shouldValidate: true,\n                shouldDirty: true\n            }) \n             setValue(\"allergies\", Client.allergies,  {\n                shouldValidate: true,\n                shouldDirty: true\n            }) \n           \n            \n            return () => {\n                \n            }\n        })\n\n   const handleCancel=async()=>{\n    const    newClientModule={\n        selectedClient:Client,\n        show :'detail'\n      }\n   await setState((prevstate)=>({...prevstate, ClientModule:newClientModule}))\n   //console.log(state)\n           }\n\n\n        const changeState =()=>{\n        const    newClientModule={\n            selectedClient:{},\n            show :'create'\n        }\n        setState((prevstate)=>({...prevstate, ClientModule:newClientModule}))\n\n        }\n          // eslint-disable-next-line\n    const handleDelete=async()=>{\n        let conf=window.confirm(\"Are you sure you want to delete this data?\")\n        \n        const dleteId=Client._id\n        if (conf){\n             \n        ClientServ.remove(dleteId)\n        .then((res)=>{\n                //console.log(JSON.stringify(res))\n                reset();\n               /*  setMessage(\"Deleted Client successfully\")\n                setSuccess(true)\n                changeState()\n               setTimeout(() => {\n                setSuccess(false)\n                }, 200); */\n                toast({\n                    message: 'Client deleted succesfully',\n                    type: 'is-success',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  })\n                changeState()\n            })\n            .catch((err)=>{\n               // setMessage(\"Error deleting Client, probable network issues \"+ err )\n               // setError(true)\n                toast({\n                    message: \"Error deleting Client, probable network issues or \"+ err,\n                    type: 'is-danger',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  })\n            })\n        }\n    }\n        \n\n   /* ()=> setValue(\"firstName\", \"Bill\", , {\n            shouldValidate: true,\n            shouldDirty: true\n          })) */\n    const onSubmit = (data,e) =>{\n        e.preventDefault();\n        \n        setSuccess(false)\n       // console.log(data)\n      //  data.facility=Client.facility\n          //console.log(data);\n          \n        ClientServ.patch(Client._id,data)\n        .then((res)=>{\n                //console.log(JSON.stringify(res))\n               // e.target.reset();\n               // setMessage(\"updated Client successfully\")\n                 toast({\n                    message: 'Client updated succesfully',\n                    type: 'is-success',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  })\n                  \n                changeState()\n\n            })\n            .catch((err)=>{\n                //setMessage(\"Error creating Client, probable network issues \"+ err )\n               // setError(true)\n                toast({\n                    message: \"Error updating Client, probable network issues or \"+ err,\n                    type: 'is-danger',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  })\n            })\n\n      } \n     \n      \n    return (\n        \n        <>\n        <div className=\"card \">\n            <div className=\"card-header\">\n                <p className=\"card-header-title\">\n                    Client Details-Modify\n                </p>\n            </div>\n            <div className=\"card-content vscrollable\">\n           \n            <form onSubmit={handleSubmit(onSubmit)}>\n            <div className=\"field is-horizontal\">\n        <div className=\"field-body\">\n            <div className=\"field\">\n                <p className=\"control has-icons-left has-icons-right\">\n                    <label className=\"label is-size-7\"   >First Name </label> <input className=\"input is-small\" ref={register()} name=\"firstname\" type=\"text\" placeholder=\"First Name \" />\n                    <span className=\"icon is-small is-left\">\n                        <i className=\"nop-hospital\"></i>\n                    </span>                    \n                </p>\n            </div>\n\n\n            <div className=\"field\">\n                <p className=\"control has-icons-left has-icons-right\">\n                <label className=\"label is-size-7\"   > Middle Name </label><input className=\"input is-small\" ref={register()} name=\"middlename\" type=\"text\" placeholder=\"Middle Name \" />\n                <span className=\"icon is-small is-left\">\n                    <i className=\"nop-map-signs\"></i>\n                </span>\n                \n                </p>\n            </div>\n\n        <div className=\"field\">\n            <p className=\"control has-icons-left\">\n                <label className=\"label is-size-7\"  >Last Name</label><input className=\"input is-small\" ref={register()} name=\"lastname\" type=\"text\"placeholder=\"Last Name \" />\n                <span className=\"icon is-small is-left\">\n                <i className=\" nop-user-md \"></i>\n                </span>\n            </p>\n        </div>\n        </div>  \n        </div>\n        \n        <div className=\"field is-horizontal\">\n        <div className=\"field-body\">\n        <div className=\"field\">\n            <p className=\"control has-icons-left\">\n            \n                <label className=\"label is-size-7\"  >Date of Birth  </label><input className=\"input is-small\" ref={register()} name=\"dob\" type=\"text\"placeholder=\"Date of Birth \" />\n                <span className=\"icon is-small is-left\">\n                <i className=\"nop-envelope\"></i>\n                </span>\n            </p>\n        </div> \n        <div className=\"field\">\n            <p className=\"control has-icons-left\">\n            \n                <label className=\"label is-size-7\"  >Gender  </label><input className=\"input is-small\" ref={register()} name=\"gender\" type=\"text\"placeholder=\"Gender  \" />\n                <span className=\"icon is-small is-left\">\n                <i className=\"nop-envelope\"></i>\n                </span>\n            </p>\n        </div> \n        <div className=\"field\">\n            <p className=\"control has-icons-left\">\n            \n                <label className=\"label is-size-7\"  >Marital Status  </label><input className=\"input is-small\" ref={register()} name=\"maritalstatus\" type=\"text\"placeholder=\"Marital Status  \" />\n                <span className=\"icon is-small is-left\">\n                <i className=\"nop-envelope\"></i>\n                </span>\n            </p>\n        </div> \n        <div className=\"field\">\n            <p className=\"control has-icons-left\">\n            \n                <label className=\"label is-size-7\"  > Records Number </label><input className=\"input is-small\" ref={register()} name=\"mrn\" type=\"text\"placeholder=\"Records Number  \" />\n                <span className=\"icon is-small is-left\">\n                <i className=\"nop-envelope\"></i>\n                </span>\n            </p>\n        </div> \n        </div>\n        </div>\n        <div className=\"field is-horizontal\">\n        <div className=\"field-body\">\n        <div className=\"field\">\n            <p className=\"control has-icons-left\">\n            \n                <label className=\"label is-size-7\"  >Religion</label><input className=\"input is-small\" ref={register()} name=\"religion\" type=\"text\"placeholder=\"Religion \" />\n                <span className=\"icon is-small is-left\">\n                <i className=\"nop-envelope\"></i>\n                </span>\n            </p>\n        </div> \n        <div className=\"field\">\n            <p className=\"control has-icons-left\">\n            \n                <label className=\"label is-size-7\"  >Profession  </label><input className=\"input is-small\" ref={register()} name=\"profession\" type=\"text\" placeholder=\"Profession\" />\n                <span className=\"icon is-small is-left\">\n                <i className=\"nop-envelope\"></i>\n                </span>\n            </p>\n        </div> \n        <div className=\"field\">\n            <p className=\"control has-icons-left\">\n                <label className=\"label is-size-7\"  > Phone No</label><input className=\"input is-small\" ref={register()} name=\"phone\" type=\"text\" placeholder=\" Phone No \" />\n                <span className=\"icon is-small is-left\">\n                <i className=\"nop-phone-alt\"></i>\n                </span>\n            </p>\n        </div>\n\n        <div className=\"field\">\n            <p className=\"control has-icons-left\">\n            \n                <label className=\"label is-size-7\"  >Email  </label><input className=\"input is-small\" ref={register()} name=\"email\" type=\"email\"placeholder=\"Email  \" />\n                <span className=\"icon is-small is-left\">\n                <i className=\"nop-envelope\"></i>\n                </span>\n            </p>\n        </div> \n        </div>\n        </div>\n\n        <div className=\"field\">\n        <p className=\"control has-icons-left\">\n\n            <label className=\"label is-size-7\"  >Residential Address  </label><input className=\"input is-small\" ref={register()} name=\"address\" type=\"text\" placeholder=\"Residential Address  \" />\n            <span className=\"icon is-small is-left\">\n            <i className=\"nop-envelope\"></i>\n            </span>\n        </p>\n        </div> \n        <div className=\"field is-horizontal\">\n        <div className=\"field-body\">\n        <div className=\"field\">\n            <p className=\"control has-icons-left\">\n            \n                <label className=\"label is-size-7\"  >Town/City  </label><input className=\"input is-small\" ref={register()} name=\"city\" type=\"text\" placeholder=\"Town/City  \" />\n                <span className=\"icon is-small is-left\">\n                <i className=\"nop-envelope\"></i>\n                </span>\n            </p>\n        </div> \n        <div className=\"field\">\n            <p className=\"control has-icons-left\">\n            \n                <label className=\"label is-size-7\"  >Local Govt Area  </label><input className=\"input is-small\" ref={register()} name=\"lga\" type=\"text\"placeholder=\"Local Govt Area  \" />\n                <span className=\"icon is-small is-left\">\n                <i className=\"nop-envelope\"></i>\n                </span>\n            </p>\n        </div> \n        <div className=\"field\">\n            <p className=\"control has-icons-left\">\n            \n                <label className=\"label is-size-7\"  >State  </label><input className=\"input is-small\" ref={register()} name=\"state\" type=\"text\"placeholder=\"State\" />\n                <span className=\"icon is-small is-left\">\n                <i className=\"nop-envelope\"></i>\n                </span>\n            </p>\n        </div> \n        <div className=\"field\">\n            <p className=\"control has-icons-left\">\n            \n                <label className=\"label is-size-7\"  >Country  </label><input className=\"input is-small\" ref={register()} name=\"country\" type=\"text\" placeholder=\"Country  \" />\n                <span className=\"icon is-small is-left\">\n                <i className=\"nop-envelope\"></i>\n                </span>\n            </p>\n        </div>\n        </div>\n        </div> \n        <div className=\"field is-horizontal\">\n        <div className=\"field-body\">\n            <div className=\"field\">\n                <p className=\"control has-icons-left\">\n                \n                    <label className=\"label is-size-7\"  >Blood Group </label><input className=\"input is-small\" ref={register()} name=\"bloodgroup\" type=\"text\"placeholder=\"Blood Group \" />\n                    <span className=\"icon is-small is-left\">\n                    <i className=\"nop-envelope\"></i>\n                    </span>\n                </p>\n            </div> \n            <div className=\"field\">\n                <p className=\"control has-icons-left\">\n                \n                    <label className=\"label is-size-7\"  >Genotype  </label><input className=\"input is-small\" ref={register()} name=\"genotype\" type=\"text\" placeholder=\"Genotype \" />\n                    <span className=\"icon is-small is-left\">\n                    <i className=\"nop-envelope\"></i>\n                    </span>\n                </p>\n            </div> \n            <div className=\"field\">\n                <p className=\"control has-icons-left\">\n                \n                    <label className=\"label is-size-7\" >Disabilities  </label><input className=\"input is-small\" ref={register()}  name=\"disabilities\" type=\"text\"placeholder=\"Disabilities  \" />\n                    <span className=\"icon is-small is-left\">\n                    <i className=\"nop-envelope\"></i>\n                    </span>\n                </p>\n            </div> \n        </div> \n        </div>  \n\n        <div className=\"field is-horizontal\">\n        <div className=\"field-body\">\n\n        <div className=\"field\">\n            <p className=\"control has-icons-left\">\n            \n                <label className=\"label is-size-7\"  >Allergies  </label><input className=\"input is-small\" ref={register()} name=\"allergies\" type=\"text\"placeholder=\"Allergies  \" />\n                <span className=\"icon is-small is-left\">\n                <i className=\"nop-envelope\"></i>\n                </span>\n            </p>\n        </div> \n        <div className=\"field\">\n            <p className=\"control has-icons-left\">\n            \n                <label className=\"label is-size-7\"  >Co-mobidities </label><input className=\"input is-small\" ref={register()} name=\"comorbidities\" type=\"text\"placeholder=\"Co-mobidities \" />\n                <span className=\"icon is-small is-left\">\n                <i className=\"nop-envelope\"></i>\n                </span>\n            </p>\n        </div> \n        </div>\n        </div>\n        <div className=\"field\">\n        <p className=\"control has-icons-left\">\n\n            <label className=\"label is-size-7\"  >Tags  </label><input className=\"input is-small\" ref={register()} name=\"clientTags\" type=\"text\" placeholder=\"Tags \" />\n            <span className=\"icon is-small is-left\">\n            <i className=\"nop-envelope\"></i>\n            </span>\n        </p>\n        </div> \n        <div className=\"field\">\n        <p className=\"control has-icons-left\">\n            <label className=\"label is-size-7\"  >Specific Details about client  </label><input className=\"input is-small\" ref={register()} name=\"specificDetails\" type=\"text\"placeholder=\"Specific Details about client \" />\n            <span className=\"icon is-small is-left\">\n            <i className=\"nop-envelope\"></i>\n            </span>\n        </p>\n        </div> \n        <div className=\"field is-horizontal\">\n        <div className=\"field-body\">\n        <div className=\"field\">\n            <p className=\"control has-icons-left\">\n                <label className=\"label is-size-7\"  >Next of Kin Full Name</label><input className=\"input is-small\" ref={register()} name=\"nok_name\" type=\"text\"placeholder=\"Next of Kin Full Name \" />\n                <span className=\"icon is-small is-left\">\n                <i className=\"nop-clinic-medical\"></i>\n                </span>\n            </p>\n        </div>\n        <div className=\"field\">\n            <p className=\"control has-icons-left\">\n                <label className=\"label is-size-7\" >Phone Number</label><input className=\"input is-small\" ref={register()}  name=\"nok_phoneno\" type=\"text\"placeholder=\" \" />\n                <span className=\"icon is-small is-left\">\n                <i className=\"nop-clinic-medical\"></i>\n                </span>\n            </p>\n        </div> \n        <div className=\"field\">\n            <p className=\"control has-icons-left\">\n            \n                <label className=\"label is-size-7\"  >Next of Kin Email  </label><input className=\"input is-small\" ref={register()} name=\"nok_email\" type=\"email\"placeholder=\"Next of Kin Email  \" />\n                <span className=\"icon is-small is-left\">\n                <i className=\"nop-envelope\"></i>\n                </span>\n            </p>\n        </div>\n        <div className=\"field\">\n            <p className=\"control has-icons-left\">\n            \n                <label className=\"label is-size-7\"  > Relationship  </label><input className=\"input is-small\" ref={register()} name=\"nok_relationship\" type=\"text\" placeholder=\"Next of Kin Relationship\" />\n                <span className=\"icon is-small is-left\">\n                <i className=\"nop-envelope\"></i>\n                </span>\n            </p>\n        </div>\n        </div>\n        </div> \n           \n           \n            </form>\n            \n            <div className=\"field  is-grouped mt-2\" >\n                <p className=\"control\">\n                    <button type=\"submit\" className=\"button is-success is-small\" onClick={handleSubmit(onSubmit)}>\n                        Save\n                    </button>\n                </p>\n                <p className=\"control\">\n                    <button className=\"button is-warning is-small\" onClick={handleCancel}>\n                        Cancel\n                    </button>\n                </p>\n               <p className=\"control\">\n                    <button className=\"button is-danger is-small\" onClick={()=>handleDelete()} type=\"delete\">\n                       Delete\n                    </button>\n                </p> \n            </div>\n        </div>\n        </div>\n        </>\n    )\n   \n   \n                \n}   \n\nexport  function InputSearch({getSearchfacility,clear}) {\n    const ClientServ=client.service('client')\n   // const facilityServ=client.service('facility')\n    const [facilities,setFacilities]=useState([])\n     // eslint-disable-next-line\n     const [searchError, setSearchError] =useState(false)\n     // eslint-disable-next-line\n    const [showPanel, setShowPanel] =useState(false)\n     // eslint-disable-next-line\n   const [searchMessage, setSearchMessage] = useState(\"\") \n   // eslint-disable-next-line \n   const [simpa,setSimpa]=useState(\"\")\n   // eslint-disable-next-line \n   const [chosen,setChosen]=useState(false)\n   // eslint-disable-next-line \n   const [count,setCount]=useState(0)\n   const inputEl=useRef(null)\n\n\n   const handleRow= async(obj)=>{\n        await setChosen(true)\n        //alert(\"something is chaning\")\n       getSearchfacility(obj)\n       \n       await setSimpa(obj.facilityName)\n       \n        // setSelectedFacility(obj)\n        setShowPanel(false)\n        await setCount(2)\n        /* const    newfacilityModule={\n            selectedFacility:facility,\n            show :'detail'\n        }\n   await setState((prevstate)=>({...prevstate, facilityModule:newfacilityModule})) */\n   //console.log(state)\n}\n    const handleBlur=async(e)=>{\n         if (count===2){\n             console.log(\"stuff was chosen\")\n         }\n       \n       /*  console.log(\"blur\")\n         setShowPanel(false)\n        console.log(JSON.stringify(simpa))\n        if (simpa===\"\"){\n            console.log(facilities.length)\n            setSimpa(\"abc\")\n            setSimpa(\"\")\n            setFacilities([])\n            inputEl.current.setValue=\"\"\n        }\n        console.log(facilities.length)\n        console.log(inputEl.current) */\n    }\n    const handleSearch=async(val)=>{\n        \n        const field='facilityName' //field variable\n       \n        if (val.length>=3){\n            ClientServ.find({query: {     //service\n                 [field]: {\n                     $regex:val,\n                     $options:'i'\n                    \n                 },\n                 $limit:10,\n                 $sort: {\n                     createdAt: -1\n                   }\n                     }}).then((res)=>{\n              console.log(\"facility  fetched successfully\") \n                setFacilities(res.data)\n                 setSearchMessage(\" facility  fetched successfully\")\n                 setShowPanel(true)\n             })\n             .catch((err)=>{\n                 console.log(err)\n                 setSearchMessage(\"Error searching facility, probable network issues \"+ err )\n                 setSearchError(true)\n             })\n         }\n        else{\n            console.log(\"less than 3 \")\n            console.log(val)\n            setShowPanel(false)\n            await setFacilities([])\n            console.log(facilities)\n        }\n    }\n    useEffect(() => {\n       if (clear){\n           setSimpa(\"\")\n       }\n        return () => {\n            \n        }\n    }, [clear] )\n    return (\n        <div>\n            <div className=\"field\">\n                <div className=\"control has-icons-left  \">\n                    <div className={`dropdown ${showPanel?\"is-active\":\"\"}`}>\n                        <div className=\"dropdown-trigger\">\n                            <DebounceInput className=\"input is-small \" \n                                type=\"text\" placeholder=\"Search Facilities\"\n                                value={simpa}\n                                minLength={1}\n                                debounceTimeout={400}\n                                onBlur={(e)=>handleBlur(e)}\n                                onChange={(e)=>handleSearch(e.target.value)}\n                                inputRef={inputEl}\n                                  />\n                            <span className=\"icon is-small is-left\">\n                                <i className=\"fas fa-search\"></i>\n                            </span>\n                        </div>\n                        {searchError&&<div>{searchMessage}</div>}\n                        <div className=\"dropdown-menu\" >\n                            <div className=\"dropdown-content\">\n                            {facilities.map((facility, i)=>(\n                                    \n                                    <div className=\"dropdown-item\" key={facility._id} onClick={()=>handleRow(facility)}>\n                                        \n                                        <span>{facility.facilityName}</span>\n                                        \n                                    </div>\n                                    \n                                    ))}\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n          \n        </div>\n    )\n}"]},"metadata":{},"sourceType":"module"}