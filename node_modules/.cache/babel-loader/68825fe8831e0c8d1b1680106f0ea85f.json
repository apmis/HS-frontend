{"ast":null,"code":"import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _regeneratorRuntime from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";/* eslint-disable */import React,{useState,useContext,useEffect,useRef}from'react';import client from'../../feathers';import{DebounceInput}from'react-debounce-input';import{UserContext,ObjectContext}from'../../context';import{toast}from'bulma-toast';import{FacilitySearch}from'../helpers/FacilitySearch';import{ClientSearch}from'../helpers/ClientSearch';export default function ClientFinInfo(_ref){var closeModal=_ref.closeModal;var _useContext=useContext(UserContext),user=_useContext.user;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),organizationId=_useState2[0],setOrganizationId=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),principalId=_useState4[0],setPrincipalId=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),clientId=_useState6[0],setClientId=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),principalName=_useState8[0],setPrincipalName=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),organization=_useState10[0],setOrganization=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),organizationName=_useState12[0],setOrganizationName=_useState12[1];var _useState13=useState(null),_useState14=_slicedToArray(_useState13,2),principal=_useState14[0],setPrincipal=_useState14[1];var _useState15=useState(\"\"),_useState16=_slicedToArray(_useState15,2),plan=_useState16[0],setPlan=_useState16[1];var _useState17=useState(\"\"),_useState18=_slicedToArray(_useState17,2),planHMO=_useState18[0],setPlanHMO=_useState18[1];var _useState19=useState(\"\"),_useState20=_slicedToArray(_useState19,2),chosenHMO=_useState20[0],setChosenHMO=_useState20[1];var ServicesServ=client.service('billing');var _useState21=useState(false),_useState22=_slicedToArray(_useState21,2),active=_useState22[0],setActive=_useState22[1];var _useState23=useState(false),_useState24=_slicedToArray(_useState23,2),success=_useState24[0],setSuccess=_useState24[1];var _useState25=useState(false),_useState26=_slicedToArray(_useState25,2),success1=_useState26[0],setSuccess1=_useState26[1];var _useState27=useState(\"HMO\"),_useState28=_slicedToArray(_useState27,2),paymentmode=_useState28[0],setPaymentMode=_useState28[1];var _useState29=useState([]),_useState30=_slicedToArray(_useState29,2),productItem=_useState30[0],setProductItem=_useState30[1];var _useState31=useState(\"\"),_useState32=_slicedToArray(_useState31,2),obj=_useState32[0],setObj=_useState32[1];var _useState33=useState([]),_useState34=_slicedToArray(_useState33,2),benefittingPlans1=_useState34[0],setBenefittingPlans1=_useState34[1];var _useState35=useState([]),_useState36=_slicedToArray(_useState35,2),benefittingHMO=_useState36[0],setBenefittingHMO=_useState36[1];var _useContext2=useContext(ObjectContext),state=_useContext2.state,setState=_useContext2.setState;var ClientServ=client.service('client');var HMOServ=client.service('organizationclient');//  const [productEntry,setProductEntry]=useState({\n//})\nvar medication=state.ClientModule.selectedClient;//console.log(state.financeModule.state)\nvar handleChangeMode=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(value){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return setPaymentMode(value);case 2:setOrganizationId(null);setOrganizationName(\"\");setOrganization(null);setPlan(\"\");setPlanHMO(\"\");setActive(false);setClientId(\"\");setPrincipalId(\"\");setPrincipal(null);setPrincipalName(\"\");setSuccess(true);case 13:case\"end\":return _context.stop();}}},_callee);}));return function handleChangeMode(_x){return _ref2.apply(this,arguments);};}();var productItemI={paymentmode:paymentmode,organizationName:organizationName,organizationId:organizationId,clientId:clientId,principal:principal,principalId:principalId,principalName:principalName,plan:plan,active:active,agent:planHMO?planHMO.organizationDetail._id:null,organizationType:organization===null||organization===void 0?void 0:organization.facilityType,agentName:planHMO?planHMO.organizationDetail.facilityName:\"\"};var getSearchfacility1=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(obj){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0://setPrincipalId(obj._id)\nsetPrincipalName(obj.firstname+\" \"+obj.lastname);setPrincipal(obj._id);if(!obj){//\"clear stuff\"\nsetPrincipalId(\"\");setPrincipalName(\"\");setPrincipal(null);setPlanHMO(\"\");}case 3:case\"end\":return _context2.stop();}}},_callee2);}));return function getSearchfacility1(_x2){return _ref3.apply(this,arguments);};}();var getSearchfacility=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(obj){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:console.log(obj);_context3.next=3;return setOrganization(obj);case 3:_context3.next=5;return setOrganizationId(obj._id);case 5:_context3.next=7;return setOrganizationName(obj.facilityName);case 7:getBenfittingPlans(obj);getBenfittingHMO(obj);// setOrgType(obj.facilityType)\nif(!obj){setOrganizationId(null);setOrganizationName(\"\");setOrganization(null);}case 10:case\"end\":return _context3.stop();}}},_callee3);}));return function getSearchfacility(_x3){return _ref4.apply(this,arguments);};}();useEffect(function(){// console.log(\"success\", success)\nif(success){setSuccess(false);}},[success]);useEffect(function(){// console.log(\"success\", success)\nif(success1){setSuccess1(false);}},[success1]);var resetform=function resetform(){setOrganizationId(null);setOrganizationName(\"\");setOrganization(null);setPlan(\"\");setActive(false);setClientId(\"\");setPrincipalId(\"\");setPrincipal(null);setPrincipalName(\"\");setSuccess(true);setPaymentMode(\"HMO\");setPlanHMO(\"\");//setSuccess(false)\n};var onSubmit=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(e){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:e.preventDefault();case 1:case\"end\":return _context4.stop();}}},_callee4);}));return function onSubmit(_x4){return _ref5.apply(this,arguments);};}();var handleAdd=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0://setSuccess(false)\nconsole.log(productItemI);setProductItem(function(prev){return prev.concat(productItemI);});resetform();//\ncase 3:case\"end\":return _context5.stop();}}},_callee5);}));return function handleAdd(){return _ref6.apply(this,arguments);};}();var handlePayment=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(){return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:// console.log(productItem)\nconsole.log(productItem);ClientServ.patch(medication._id,{paymentinfo:productItem}).then(function(resp){resetform();var client=resp;console.log(client);medication=resp;// setProductItem([])\ntoast({message:'Client financial info updated succesfully',type:'is-success',dismissible:true,pauseOnHover:true});closeModal();}).catch(function(err){console.log(err);toast({message:'Error creating Client '+err,type:'is-danger',dismissible:true,pauseOnHover:true});});case 2:case\"end\":return _context6.stop();}}},_callee6);}));return function handlePayment(){return _ref7.apply(this,arguments);};}();useEffect(function(){setProductItem(medication.paymentinfo);return function(){};},[]);useEffect(function(){setProductItem(medication.paymentinfo);return function(){};},[medication]);var getBenfittingHMO=/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(obj){return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return setBenefittingHMO([]);case 2:_context7.next=4;return HMOServ.find({query:{facility:obj._id,relationshiptype:\"managedcare\",$sort:{createdAt:-1}}}).then(function(res){console.log(res);setBenefittingHMO(res.data);/*   toast({\n                message: 'Client financial info updated succesfully',\n                type: 'is-success',\n                dismissible: true,\n                pauseOnHover: true,\n              }) */}).catch(function(err){console.log(err);toast({message:'Error fetching HMO '+err,type:'is-danger',dismissible:true,pauseOnHover:true});});case 4:case\"end\":return _context7.stop();}}},_callee7);}));return function getBenfittingHMO(_x5){return _ref8.apply(this,arguments);};}();var getBenfittingPlans=/*#__PURE__*/function(){var _ref9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(obj){var findServices;return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:_context9.next=2;return setBenefittingPlans1([]);case 2:if(!user.currentEmployee){_context9.next=9;break;}console.log(obj._id,organizationId);_context9.next=6;return ServicesServ.find({query:{//facility: obj._id, // user.currentEmployee.facilityDetail._id,\n'contracts.source_org':obj._id,// user.currentEmployee.facilityDetail._id ,\n'contracts.dest_org':obj._id,//user.currentEmployee.facilityDetail._id ,\ncategory:\"Managed Care\",// storeId:state.StoreModule.selectedStore._id,\n// $limit:20,\n//   paginate:false,\n$sort:{category:1}}});case 6:findServices=_context9.sent;findServices.groupedOrder[0].services.forEach(/*#__PURE__*/function(){var _ref10=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(c){var newPlan;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:newPlan={name:c.name,checked:false};_context8.next=3;return setBenefittingPlans1(function(prev){return prev.concat(c);});case 3:case\"end\":return _context8.stop();}}},_callee8);}));return function(_x7){return _ref10.apply(this,arguments);};}());console.log(findServices.groupedOrder[0]);case 9:case\"end\":return _context9.stop();}}},_callee9);}));return function getBenfittingPlans(_x6){return _ref9.apply(this,arguments);};}();var handleChange=/*#__PURE__*/function(){var _ref11=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee10(e){return _regeneratorRuntime.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:setPlan(e.target.value);case 1:case\"end\":return _context10.stop();}}},_callee10);}));return function handleChange(_x8){return _ref11.apply(this,arguments);};}();var handleHMO=/*#__PURE__*/function(){var _ref12=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee11(e){var abc,hmo;return _regeneratorRuntime.wrap(function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:abc=e.target.value;hmo=benefittingHMO.find(function(el){return el._id===abc;});/*  if (e.target.value===undefined||e.target.value===\"\"){\n                toast({\n                    message: 'Kindly select Agent HMO ',\n                    type: 'is-danger',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  })\n                  return\n             }else{ */console.log(e.target.value);if(!hmo){_context11.next=6;break;}_context11.next=6;return setPlanHMO(hmo);case 6:case\"end\":return _context11.stop();}}},_callee11);}));return function handleHMO(_x9){return _ref12.apply(this,arguments);};}();return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"card card-overflow\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-content \",children:[/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsx(\"div\",{className:\"control\",children:/*#__PURE__*/_jsx(\"div\",{className:\"select is-small \",children:/*#__PURE__*/_jsxs(\"select\",{name:\"paymentmode\",value:paymentmode,onChange:function onChange(e){return handleChangeMode(e.target.value);},className:\"selectadd\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Payment Mode \"}),/*#__PURE__*/_jsx(\"option\",{value:\"HMO\",children:\"HMO Cover\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Family\",children:\"Family Cover \"}),/*#__PURE__*/_jsx(\"option\",{value:\"Company\",children:\"Company Cover\"})]})})})}),paymentmode!==\"Family\"?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field-body\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"field  is-expanded\",children:/*#__PURE__*/_jsx(FacilitySearch,{getSearchfacility:getSearchfacility,clear:success})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",name:\"clientid\",value:clientId,type:\"text\",onChange:function onChange(e){return setClientId(e.target.value);},placeholder:\" Organization's Client Identifier \"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-hashtag\"})})]})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field-body\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",name:\"principalname\",value:principalName,type:\"text\",onChange:function onChange(e){return setPrincipalName(e.target.value);},placeholder:\"Principal Name\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-hashtag\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",name:\"principalid\",value:principalId,type:\"text\",onChange:function onChange(e){return setPrincipalId(e.target.value);},placeholder:\"Organization's Principal ID\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-hashtag\"})})]})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field-body\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsx(\"div\",{className:\"control\",children:/*#__PURE__*/_jsx(\"div\",{className:\"select is-small \",children:/*#__PURE__*/_jsxs(\"select\",{name:\"bandType\",value:plan,onChange:function onChange(e){return handleChange(e);},className:\"selectadd\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Choose Plan \"}),benefittingPlans1.map(function(option,i){return/*#__PURE__*/_jsxs(\"option\",{value:option.name,children:[\" \",option.name]},i);})]})})})}),(organization===null||organization===void 0?void 0:organization.facilityType)===\"State HIA\"?/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsx(\"div\",{className:\"control\",children:/*#__PURE__*/_jsx(\"div\",{className:\"select is-small \",children:/*#__PURE__*/_jsx(\"select\",{name:\"bandType\",value:planHMO===null||planHMO===void 0?void 0:planHMO._id,onChange:function onChange(e){return handleHMO(e);},className:\"selectadd\",children:benefittingHMO.map(function(options,i){return/*#__PURE__*/_jsxs(\"option\",{value:options._id,children:[\" \",options.organizationDetail.facilityName]},i);})})})})}):/*#__PURE__*/_jsx(_Fragment,{}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsx(\"p\",{className:\"control \",children:/*#__PURE__*/_jsxs(\"label\",{className:\"label is-size-7 poslabel\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"checkbox is-small\",name:\"order\",checked:active,type:\"checkbox\",onChange:function onChange(e){return setActive(e.target.checked);},placeholder:\"Active\"}),\"Active\"]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsx(\"p\",{className:\"control\",children:/*#__PURE__*/_jsx(\"button\",{className:\"button is-info is-small  is-pulled-right selectadd\",children:/*#__PURE__*/_jsx(\"span\",{className:\"is-small\",onClick:handleAdd,children:\"Add\"})})})})]})})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsx(\"div\",{className:\"field-body\",children:/*#__PURE__*/_jsx(\"div\",{className:\"field  is-expanded\",children:/*#__PURE__*/_jsx(ClientSearch,{getSearchfacility:getSearchfacility1,clear:success1})})})}),/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field-body\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",name:\"plan\",value:plan,type:\"text\",onChange:function onChange(e){return setPlan(e.target.value);},placeholder:\"Plan\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-hashtag\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsx(\"p\",{className:\"control \",children:/*#__PURE__*/_jsxs(\"label\",{className:\"label is-size-7 poslabel\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"checkbox is-small\",name:\"order\",checked:active,type:\"checkbox\",onChange:function onChange(e){return setActive(e.target.checked);},placeholder:\"Active\"}),\"Active\"]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsx(\"p\",{className:\"control\",children:/*#__PURE__*/_jsx(\"button\",{className:\"button is-info is-small  is-pulled-right selectadd\",children:/*#__PURE__*/_jsx(\"span\",{className:\"is-small\",onClick:handleAdd,children:\"Add\"})})})})]})})]}),productItem.length>0&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Payment Options:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"vscrollable-acc\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table is-striped  is-hoverable is-fullwidth is-scrollable \",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Serial No\",children:\"S/No\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Type\",children:\"Type\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Principal\",children:\"Principal\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Organization\",children:\"Organization\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"HMO\",children:\"HMO Agent\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Plan\",children:\"Plan\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Active\",children:\"Active\"})})]})}),/*#__PURE__*/_jsx(\"tfoot\",{}),/*#__PURE__*/_jsx(\"tbody\",{children:productItem.map(function(ProductEntry,i){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:i+1}),/*#__PURE__*/_jsx(\"th\",{children:ProductEntry.paymentmode}),/*#__PURE__*/_jsx(\"td\",{children:ProductEntry.principalName}),/*#__PURE__*/_jsx(\"td\",{children:ProductEntry.organizationName}),/*#__PURE__*/_jsx(\"td\",{children:ProductEntry.agentName}),/*#__PURE__*/_jsx(\"td\",{children:ProductEntry.plan}),/*#__PURE__*/_jsx(\"td\",{children:ProductEntry.active?\"Yes\":\"No\"})]},i);})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"field mt-2 is-grouped\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"control\",children:/*#__PURE__*/_jsx(\"button\",{className:\"button is-success is-small\",disabled:!productItem.length>0,onClick:handlePayment,children:\"Update\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"control\",children:/*#__PURE__*/_jsx(\"button\",{className:\"button is-warning is-small\",disabled:!productItem.length>0,onClick:onSubmit,children:\"Cancel\"})})]})]})]})})});}","map":{"version":3,"sources":["/home/mfybaby/Documents/HealthStack2/HS-frontend/src/components/ClientMgt/ClientFinInfo.js"],"names":["React","useState","useContext","useEffect","useRef","client","DebounceInput","UserContext","ObjectContext","toast","FacilitySearch","ClientSearch","ClientFinInfo","closeModal","user","organizationId","setOrganizationId","principalId","setPrincipalId","clientId","setClientId","principalName","setPrincipalName","organization","setOrganization","organizationName","setOrganizationName","principal","setPrincipal","plan","setPlan","planHMO","setPlanHMO","chosenHMO","setChosenHMO","ServicesServ","service","active","setActive","success","setSuccess","success1","setSuccess1","paymentmode","setPaymentMode","productItem","setProductItem","obj","setObj","benefittingPlans1","setBenefittingPlans1","benefittingHMO","setBenefittingHMO","state","setState","ClientServ","HMOServ","medication","ClientModule","selectedClient","handleChangeMode","value","productItemI","agent","organizationDetail","_id","organizationType","facilityType","agentName","facilityName","getSearchfacility1","firstname","lastname","getSearchfacility","console","log","getBenfittingPlans","getBenfittingHMO","resetform","onSubmit","e","preventDefault","handleAdd","prev","concat","handlePayment","patch","paymentinfo","then","resp","message","type","dismissible","pauseOnHover","catch","err","find","query","facility","relationshiptype","$sort","createdAt","res","data","currentEmployee","category","findServices","groupedOrder","services","forEach","c","newPlan","name","checked","handleChange","target","handleHMO","abc","hmo","el","map","option","i","options","length","ProductEntry"],"mappings":"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","sourcesContent":["/* eslint-disable */\nimport React, {useState,useContext, useEffect,useRef} from 'react'\nimport client from '../../feathers'\nimport {DebounceInput} from 'react-debounce-input';\nimport {UserContext,ObjectContext} from '../../context'\nimport {toast} from 'bulma-toast'\nimport { FacilitySearch } from '../helpers/FacilitySearch';\nimport  {ClientSearch}  from '../helpers/ClientSearch';\n\n\nexport default function ClientFinInfo({closeModal}){\n     const {user} = useContext(UserContext)\n     const [organizationId,setOrganizationId] = useState(null)\n     const [principalId,setPrincipalId] = useState(\"\")\n     const [clientId,setClientId] = useState(\"\")\n     const [principalName,setPrincipalName] = useState(\"\")\n     const [organization,setOrganization] = useState(\"\")\n     const [organizationName,setOrganizationName] = useState(\"\")\n     const [principal,setPrincipal] = useState(null)\n     const [plan,setPlan] = useState(\"\")\n     const [planHMO,setPlanHMO] = useState(\"\") \n     const [chosenHMO,setChosenHMO] = useState(\"\")\n     const ServicesServ=client.service('billing')\n     const [active,setActive] = useState(false)\n     const [success, setSuccess] =useState(false)\n     const [success1, setSuccess1] =useState(false)\n     const [paymentmode, setPaymentMode] = useState(\"HMO\")\n     const [productItem,setProductItem] = useState([])\n     const [obj, setObj]=useState(\"\")\n     const [benefittingPlans1,setBenefittingPlans1] = useState([])\n     const [benefittingHMO,setBenefittingHMO] = useState([])\n     const {state,setState}=useContext(ObjectContext)\n     const ClientServ=client.service('client')\n     const HMOServ=client.service('organizationclient')\n   //  const [productEntry,setProductEntry]=useState({\n       \n    //})\n    \n  let medication =state.ClientModule.selectedClient \n\n  //console.log(state.financeModule.state)\n\n  const handleChangeMode= async(value)=>{\n      \n        await setPaymentMode(value)\n        setOrganizationId(null)\n        setOrganizationName(\"\")\n        setOrganization(null)\n        setPlan(\"\")\n        setPlanHMO(\"\")\n        setActive(false)\n        setClientId(\"\")\n        setPrincipalId(\"\")\n        setPrincipal(null)\n        setPrincipalName(\"\")\n        setSuccess(true)\n\n    }\n  \n  const productItemI={\n        paymentmode,\n        organizationName,\n        organizationId,\n        clientId,\n        principal,\n        principalId,\n        principalName,\n        plan,\n        active,\n        agent:planHMO?planHMO.organizationDetail._id:null,\n        organizationType:organization?.facilityType,\n        agentName:planHMO?planHMO.organizationDetail.facilityName:\"\"\n\n     }\n\n     const getSearchfacility1=async (obj)=>{\n        //setPrincipalId(obj._id)\n        setPrincipalName(obj.firstname +\" \"+obj.lastname)\n        setPrincipal(obj._id)\n        \n         if (!obj){\n             //\"clear stuff\"\n             setPrincipalId(\"\")\n             setPrincipalName(\"\")\n             setPrincipal(null)\n             setPlanHMO(\"\")\n            \n         }\n      }\n\n    const getSearchfacility=async (obj)=>{\n        console.log(obj)\n       await setOrganization(obj)\n      await setOrganizationId(obj._id)\n      await setOrganizationName(obj.facilityName)\n      getBenfittingPlans(obj)\n      getBenfittingHMO(obj)\n      // setOrgType(obj.facilityType)\n       if(!obj){\n        setOrganizationId(null)\n        setOrganizationName(\"\")\n       setOrganization(null)\n       }\n     }\n\n    useEffect(() => {\n       // console.log(\"success\", success)\n        if (success){\n            setSuccess(false)\n        }\n      \n     }, [success])\n\n     useEffect(() => {\n        // console.log(\"success\", success)\n         if (success1){\n             setSuccess1(false)\n         }\n       \n      }, [success1])\n\n    const resetform=()=>{\n        setOrganizationId(null)\n        setOrganizationName(\"\")\n       setOrganization(null)\n       setPlan(\"\")\n       setActive(false)\n       setClientId(\"\")\n       setPrincipalId(\"\")\n       setPrincipal(null)\n       setPrincipalName(\"\")\n       setSuccess(true)\n       setPaymentMode(\"HMO\")\n       setPlanHMO(\"\")\n       //setSuccess(false)\n\n     }\n \n    const onSubmit = async(e) =>{\n         e.preventDefault();\n         \n\n       } \n\n    const handleAdd=async()=>{\n       //setSuccess(false)\n        console.log(productItemI)\n        setProductItem(prev=>prev.concat(productItemI))\n        resetform()\n        //\n    }\n\n\n    const handlePayment= async ()=>{\n       // console.log(productItem)\n       console.log(productItem)\n        ClientServ.patch(medication._id, {\n            paymentinfo:productItem\n        })\n        .then((resp)=>{\n            resetform()\n           let client=resp\n            console.log(client)\n            medication=resp\n           // setProductItem([])\n            toast({\n                message: 'Client financial info updated succesfully',\n                type: 'is-success',\n                dismissible: true,\n                pauseOnHover: true,\n              })\n            closeModal()\n\n        })\n        .catch((err)=>{\n            console.log(err)\n            toast({\n                message: 'Error creating Client ' + err,\n                type: 'is-danger',\n                dismissible: true,\n                pauseOnHover: true,\n              })\n        })\n\n        }     \n    useEffect(() => {\n        setProductItem(medication.paymentinfo)\n\n        return () => {\n           \n        }\n    }, [])   \n    \n    useEffect(() => {\n        setProductItem(medication.paymentinfo)\n        return () => {\n          \n        }\n    },[medication])\n\n    const getBenfittingHMO = async( obj)=>{\n        await setBenefittingHMO([])\n        await HMOServ.find({query: {\n            facility:obj._id,\n            relationshiptype:\"managedcare\",\n            $sort: {\n                createdAt: -1\n              }\n                }})\n        .then((res)=>{\n            console.log(res)\n            setBenefittingHMO(res.data)\n          /*   toast({\n                message: 'Client financial info updated succesfully',\n                type: 'is-success',\n                dismissible: true,\n                pauseOnHover: true,\n              }) */\n            })\n            .catch((err)=>{\n                console.log(err)\n                toast({\n                    message: 'Error fetching HMO ' + err,\n                    type: 'is-danger',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  })\n            })\n\n     \n        }\n\n    const getBenfittingPlans = async( obj)=>{\n       await setBenefittingPlans1([])\n        if (user.currentEmployee){\n            console.log(obj._id, organizationId)\n                \n            const findServices= await ServicesServ.find(\n                    {query: {\n                        //facility: obj._id, // user.currentEmployee.facilityDetail._id,\n                        'contracts.source_org' :obj._id,// user.currentEmployee.facilityDetail._id ,\n                        'contracts.dest_org' : obj._id,//user.currentEmployee.facilityDetail._id ,\n                        category:\"Managed Care\",\n                       // storeId:state.StoreModule.selectedStore._id,\n                       // $limit:20,\n                    //   paginate:false,\n                        $sort: {\n                            category: 1\n                        }\n                        }})\n    \n            findServices.groupedOrder[0].services.forEach(async (c)=>{\n                const newPlan={\n                    name:c.name,\n                    checked:false\n                }\n                await setBenefittingPlans1((prev)=>(prev.concat(c)))\n            })\n            console.log(findServices.groupedOrder[0])\n            }\n            \n    \n       }\n\n       const handleChange = async(e) => {\n   \n        setPlan(e.target.value)\n   \n       }\n       const handleHMO = async(e) => {\n           const abc=e.target.value\n           const hmo=benefittingHMO.find((el=>el._id===abc))\n           \n            /*  if (e.target.value===undefined||e.target.value===\"\"){\n                toast({\n                    message: 'Kindly select Agent HMO ',\n                    type: 'is-danger',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  })\n                  return\n             }else{ */\n                console.log(e.target.value)\n                if (!!hmo){\n                    await setPlanHMO(hmo)\n                }\n\n      \n    \n      //console.log(benefittingHMO[e.target.value].organizationDetail.facilityName)\n     /*  } */\n    }\n\n     return (\n         <>\n             <div className=\"card card-overflow\">\n             <div className=\"card-content \">\n         \n             <div className=\"field\">    \n                    <div className=\"control\">\n                        <div className=\"select is-small \">\n                            <select name=\"paymentmode\" value={paymentmode} onChange={(e)=>handleChangeMode(e.target.value)} className=\"selectadd\" >\n                                <option value=\"\">Payment Mode </option>\n                                <option value=\"HMO\">HMO Cover</option>\n                                <option value=\"Family\">Family Cover </option>\n                                <option value=\"Company\">Company Cover</option>\n                               \n                            </select>\n                        </div>\n                    </div>\n                    </div>\n            {(paymentmode!==\"Family\")? <> \n            <div className=\"field is-horizontal\">\n             <div className=\"field-body\">\n             <div className=\"field  is-expanded\" >\n                <FacilitySearch  getSearchfacility={getSearchfacility} clear={success} /> \n             </div> \n             <div className=\"field\" >\n                 <p className=\"control has-icons-left\" >\n                     <input className=\"input is-small\"  name=\"clientid\" value={clientId} type=\"text\" onChange={ e=> setClientId(e.target.value)} placeholder=\" Organization's Client Identifier \"  />\n                     <span className=\"icon is-small is-left\">\n                     <i className=\"fas fa-hashtag\"></i>\n                     </span>\n                 </p>\n             </div> \n             </div>\n            </div>\n            <div className=\"field is-horizontal\">\n             <div className=\"field-body\">\n             \n             <div className=\"field\" >\n                 <p className=\"control has-icons-left\" >\n                     <input className=\"input is-small\"  name=\"principalname\" value={principalName} type=\"text\" onChange={ e=> setPrincipalName(e.target.value)} placeholder=\"Principal Name\"  />\n                     <span className=\"icon is-small is-left\">\n                     <i className=\"fas fa-hashtag\"></i>\n                     </span>\n                 </p>\n             </div> \n             <div className=\"field\" >\n                 <p className=\"control has-icons-left\" >\n                     <input className=\"input is-small\"  name=\"principalid\" value={principalId} type=\"text\" onChange={ e=> setPrincipalId(e.target.value)} placeholder=\"Organization's Principal ID\"  />\n                     <span className=\"icon is-small is-left\">\n                     <i className=\"fas fa-hashtag\"></i>\n                     </span>\n                 </p>\n             </div>  \n             </div>\n            </div>\n            <div className=\"field is-horizontal\">\n             <div className=\"field-body\">\n            {/*  <div className=\"field\" >\n                 <p className=\"control has-icons-left\" >\n                     <input className=\"input is-small\"  name=\"plan\" value={plan} type=\"text\" onChange={ e=> setPlan(e.target.value)} placeholder=\"Plan\"  />\n                     <span className=\"icon is-small is-left\">\n                     <i className=\"fas fa-hashtag\"></i>\n                     </span>\n                 </p>\n             </div>  */}\n             <div className=\"field\">    \n                        <div className=\"control\">\n                            <div className=\"select is-small \">\n                                <select name=\"bandType\" value={plan} onChange={(e)=>handleChange(e)} className=\"selectadd\" >\n                                <option value=\"\">Choose Plan </option>\n                                {benefittingPlans1.map((option,i)=>(\n                                    <option key={i} value={option.name}> {option.name}</option>\n                                ))}\n                                </select>\n                            </div>\n                        </div>\n                    </div>\n              {  organization?.facilityType===\"State HIA\"?    <div className=\"field\">    \n                        <div className=\"control\">\n                            <div className=\"select is-small \">\n                                <select name=\"bandType\"  value={planHMO?._id}  onChange={(e)=>handleHMO(e)} className=\"selectadd\" >\n                               {/*  <option value=\"\">Choose HMO </option>  */}\n                                {benefittingHMO.map((options,i)=>(\n                                    <option key={i} value={options._id}> {options.organizationDetail.facilityName}</option>\n                                ))}\n                                </select>\n                            </div>\n                        </div>\n                    </div>:<></>}\n             <div className=\"field\" >\n                 <p className=\"control \" >\n                     <label  className=\"label is-size-7 poslabel\" >\n                     <input className=\"checkbox is-small\"  name=\"order\" checked={active} type=\"checkbox\" onChange={ e=> setActive(e.target.checked)} placeholder=\"Active\"  />\n                        Active\n                     </label>\n                 </p>\n             </div> \n             <div className=\"field\">\n                <p className=\"control\">\n                     <button className=\"button is-info is-small  is-pulled-right selectadd\" >\n                       <span className=\"is-small\" onClick={handleAdd} >Add</span>\n                     </button>\n                 </p>\n             </div>\n             </div>\n             </div>\n            </>:\n            <>\n             <div className=\"field is-horizontal\">\n                <div className=\"field-body\">\n                    <div className=\"field  is-expanded\" >\n                        <ClientSearch  getSearchfacility={getSearchfacility1} clear={success1} /> \n                    </div> \n                </div>\n             </div>\n             <div className=\"field is-horizontal\">\n             <div className=\"field-body\">\n             <div className=\"field\" >\n                 <p className=\"control has-icons-left\" >\n                     <input className=\"input is-small\"  name=\"plan\" value={plan} type=\"text\" onChange={ e=> setPlan(e.target.value)} placeholder=\"Plan\"  />\n                     <span className=\"icon is-small is-left\">\n                     <i className=\"fas fa-hashtag\"></i>\n                     </span>\n                 </p>\n             </div> \n             \n             <div className=\"field\" >\n                 <p className=\"control \" >\n                     <label  className=\"label is-size-7 poslabel\" >\n                     <input className=\"checkbox is-small\"  name=\"order\" checked={active} type=\"checkbox\" onChange={ e=> setActive(e.target.checked)} placeholder=\"Active\"  />\n                        Active\n                     </label>\n                 </p>\n             </div> \n             <div className=\"field\">\n                <p className=\"control\">\n                     <button className=\"button is-info is-small  is-pulled-right selectadd\" >\n                       <span className=\"is-small\" onClick={handleAdd} >Add</span>\n                     </button>\n                 </p>\n             </div>\n             </div>\n             </div>\n\n            </>\n            \n            }\n          \n        \n             \n        {(productItem.length>0) && <>\n            <label>Payment Options:</label>\n        <div className=\"vscrollable-acc\">\n             \n          <table className=\"table is-striped  is-hoverable is-fullwidth is-scrollable \">\n                 <thead>\n                     <tr>\n                     <th><abbr title=\"Serial No\">S/No</abbr></th>\n                     <th><abbr title=\"Type\">Type</abbr></th>\n                     <th><abbr title=\"Principal\">Principal</abbr></th>\n                     <th><abbr title=\"Organization\">Organization</abbr></th>\n                     <th><abbr title=\"HMO\">HMO Agent</abbr></th>\n                     <th><abbr title=\"Plan\">Plan</abbr></th>\n                     <th><abbr title=\"Active\">Active</abbr></th>\n                     {/*  */}\n                     {/* <th><abbr title=\"Actions\">Actions</abbr></th> */}\n                     </tr>\n                 </thead>\n                 <tfoot>\n                     \n                 </tfoot>\n                 <tbody>\n                    { productItem.map((ProductEntry, i)=>(\n                          <tr key={i}>\n                         <th>{i+1}</th>\n                         <th>{ProductEntry.paymentmode}</th>\n                         <td>{ProductEntry.principalName}</td>\n                         <td>{ProductEntry.organizationName}</td>\n                         <td>{ProductEntry.agentName}</td>\n                         <td>{ProductEntry.plan}</td>\n                         <td>{ProductEntry.active?\"Yes\":\"No\"}</td>\n\n                          \n                        {/* <td>{ProductEntry.amount}</td> */}\n                        {/*  <td><span className=\"showAction\"  >x</span></td> */}\n                         </tr>\n                     ))}\n                 </tbody>\n                 </table>\n                 </div>    \n                 <div className=\"field mt-2 is-grouped\">\n                    <p className=\"control\">\n                        <button className=\"button is-success is-small\" disabled={!productItem.length>0} onClick={handlePayment}>\n                           Update\n                        </button>\n                    </p>\n                <p className=\"control\">\n                     <button className=\"button is-warning is-small\" disabled={!productItem.length>0} onClick={onSubmit} >\n                        Cancel\n                     </button>\n                 </p>  \n                 </div>\n        \n            </>\n        }   \n             \n             \n             </div>\n             </div>\n           \n         </>\n     )\n    \n }\n"]},"metadata":{},"sourceType":"module"}