{"ast":null,"code":"import _defineProperty from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _slicedToArray from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";/* eslint-disable */import React,{useState,useContext,useEffect,useRef}from'react';import client from'../../feathers';import{DebounceInput}from'react-debounce-input';import{useForm}from\"react-hook-form\";//import {useHistory} from 'react-router-dom'\nimport{UserContext,ObjectContext}from'../../context';import ModuleList from'./ModuleList';import{toast}from'bulma-toast';// eslint-disable-next-line\nvar searchfacility={};export default function Employee(){var _useContext=useContext(ObjectContext),state=_useContext.state;//,setState\n// eslint-disable-next-line\nvar _useState=useState(),_useState2=_slicedToArray(_useState,2),selectedEmployee=_useState2[0],setSelectedEmployee=_useState2[1];//const [showState,setShowState]=useState() //create|modify|detail\nreturn/*#__PURE__*/_jsx(\"section\",{className:\"section remPadTop\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"columns \",children:[/*#__PURE__*/_jsx(\"div\",{className:\"column is-8 \",children:/*#__PURE__*/_jsx(EmployeeList,{})}),/*#__PURE__*/_jsxs(\"div\",{className:\"column is-4 \",children:[state.EmployeeModule.show==='create'&&/*#__PURE__*/_jsx(EmployeeCreate,{}),state.EmployeeModule.show==='detail'&&/*#__PURE__*/_jsx(EmployeeDetail,{}),state.EmployeeModule.show==='modify'&&/*#__PURE__*/_jsx(EmployeeModify,{Employee:selectedEmployee})]})]})});}export function EmployeeCreate(){var _useForm=useForm(),register=_useForm.register,handleSubmit=_useForm.handleSubmit,setValue=_useForm.setValue;//, watch, errors, reset \nvar _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),success=_useState6[0],setSuccess=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),message=_useState8[0],setMessage=_useState8[1];// eslint-disable-next-line\nvar _useState9=useState(),_useState10=_slicedToArray(_useState9,2),facility=_useState10[0],setFacility=_useState10[1];var EmployeeServ=client.service('employee');//const history = useHistory()\nvar _useContext2=useContext(UserContext),user=_useContext2.user;//,setUser\n// eslint-disable-next-line\nvar _useState11=useState(),_useState12=_slicedToArray(_useState11,2),currentUser=_useState12[0],setCurrentUser=_useState12[1];var getSearchfacility=function getSearchfacility(obj){setValue(\"facility\",obj._id,{shouldValidate:true,shouldDirty:true});};useEffect(function(){setCurrentUser(user);//console.log(currentUser)\nreturn function(){};},[user]);//check user for facility or get list of facility  \nuseEffect(function(){//setFacility(user.activeEmployee.FacilityId)//\nif(!user.stacker){setValue(\"facility\",user.currentEmployee.facilityDetail._id,{shouldValidate:true,shouldDirty:true});}},[user]);var onSubmit=function onSubmit(data,e){e.preventDefault();setMessage(\"\");setError(false);setSuccess(false);data.createdby=user._id;//console.log(data);\nif(user.currentEmployee){// data.facility=user.currentEmployee.facilityDetail._id  // or from facility dropdown\n}EmployeeServ.create(data).then(function(res){//console.log(JSON.stringify(res))\ne.target.reset();/*  setMessage(\"Created Employee successfully\") */setSuccess(true);toast({message:'Employee created succesfully',type:'is-success',dismissible:true,pauseOnHover:true});setSuccess(false);}).catch(function(err){toast({message:'Error creating employee '+err,type:'is-danger',dismissible:true,pauseOnHover:true});});};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"card \",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsx(\"p\",{className:\"card-header-title\",children:\"Create Employee\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-content vscrollable\",children:[success&&/*#__PURE__*/_jsxs(\"div\",{className:\"message\",children:[\" \",message]}),error&&/*#__PURE__*/_jsxs(\"div\",{className:\"is-danger\",children:[\" \",message]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left has-icons-right\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register({required:true}),name:\"firstname\",type:\"text\",placeholder:\"First Name\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-hospital\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left has-icons-right\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register({required:true}),name:\"lastname\",type:\"text\",placeholder:\"Last Name\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-map-signs\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register({required:true}),name:\"profession\",type:\"text\",placeholder:\"Profession\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\" fas fa-user-md \"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register({required:true}),name:\"phone\",type:\"text\",placeholder:\" Phone No\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-phone-alt\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register({required:true}),name:\"email\",type:\"email\",placeholder:\"Email\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-envelope\"})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",style:!user.stacker?{display:\"none\"}:{},children:[/*#__PURE__*/_jsx(InputSearch,{getSearchfacility:getSearchfacility,clear:success}),/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left \",style:{display:\"none\"},children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register({required:true}),name:\"facility\",type:\"text\",placeholder:\"Facility\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas  fa-map-marker-alt\"})})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsx(\"div\",{className:\"control has-icons-left\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown \",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown-trigger\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register({required:true}),name:\"department\",type:\"text\",placeholder:\"Department\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-hospital-symbol\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"dropdown-menu\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"dropdown-item\",children:\"simpa\"}),/*#__PURE__*/_jsx(\"div\",{className:\"dropdown-item is-active\",children:\"simpa 2\"}),/*#__PURE__*/_jsx(\"div\",{className:\"dropdown-item\",children:\"simpa 3\"}),/*#__PURE__*/_jsx(\"div\",{className:\"dropdown-item\",children:\"simpa 4\"})]})})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register({required:true}),name:\"deptunit\",type:\"text\",placeholder:\"Department Unit\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-clinic-medical\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register({required:true}),name:\"password\",type:\"text\",placeholder:\"password\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-clinic-medical\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsx(\"p\",{className:\"control\",children:/*#__PURE__*/_jsx(\"button\",{className:\"button is-success is-small\",children:\"Create\"})})})]})]})]})});}export function EmployeeList(){// const { register, handleSubmit, watch, errors } = useForm();\n// eslint-disable-next-line\nvar _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),error=_useState14[0],setError=_useState14[1];// eslint-disable-next-line\nvar _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),success=_useState16[0],setSuccess=_useState16[1];// eslint-disable-next-line\nvar _useState17=useState(\"\"),_useState18=_slicedToArray(_useState17,2),message=_useState18[0],setMessage=_useState18[1];var EmployeeServ=client.service('employee');//const history = useHistory()\n// const {user,setUser} = useContext(UserContext)\nvar _useState19=useState([]),_useState20=_slicedToArray(_useState19,2),facilities=_useState20[0],setFacilities=_useState20[1];// eslint-disable-next-line\nvar _useState21=useState(),_useState22=_slicedToArray(_useState21,2),selectedEmployee=_useState22[0],setSelectedEmployee=_useState22[1];//\n// eslint-disable-next-line\nvar _useContext3=useContext(ObjectContext),state=_useContext3.state,setState=_useContext3.setState;// eslint-disable-next-line\nvar _useContext4=useContext(UserContext),user=_useContext4.user,setUser=_useContext4.setUser;var handleCreateNew=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var newEmployeeModule;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:newEmployeeModule={selectedEmployee:{},show:'create'};_context.next=3;return setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{EmployeeModule:newEmployeeModule});});case 3:case\"end\":return _context.stop();}}},_callee);}));return function handleCreateNew(){return _ref.apply(this,arguments);};}();var handleRow=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(Employee){var newEmployeeModule;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return setSelectedEmployee(Employee);case 2:newEmployeeModule={selectedEmployee:Employee,show:'detail'};_context2.next=5;return setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{EmployeeModule:newEmployeeModule});});case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function handleRow(_x){return _ref2.apply(this,arguments);};}();var handleSearch=function handleSearch(val){var _query;var field='firstname';console.log(val);EmployeeServ.find({query:(_query={},_defineProperty(_query,field,{$regex:val,$options:'i'}),_defineProperty(_query,\"facility\",user.currentEmployee.facilityDetail._id||\"\"),_defineProperty(_query,\"$limit\",1000),_defineProperty(_query,\"$sort\",{createdAt:-1}),_query)}).then(function(res){console.log(res);setFacilities(res.data);setMessage(\" Employee  fetched successfully\");setSuccess(true);}).catch(function(err){console.log(err);setMessage(\"Error fetching Employee, probable network issues \"+err);setError(true);});};var getFacilities=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var findEmployee,_findEmployee;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(!user.currentEmployee){_context3.next=8;break;}_context3.next=3;return EmployeeServ.find({query:{facility:user.currentEmployee.facilityDetail._id,$limit:200,$sort:{createdAt:-1}}});case 3:findEmployee=_context3.sent;_context3.next=6;return setFacilities(findEmployee.data);case 6:_context3.next=14;break;case 8:if(!user.stacker){_context3.next=14;break;}_context3.next=11;return EmployeeServ.find({query:{$limit:100,$sort:{facility:-1}}});case 11:_findEmployee=_context3.sent;_context3.next=14;return setFacilities(_findEmployee.data);case 14:case\"end\":return _context3.stop();}}},_callee3);}));return function getFacilities(){return _ref3.apply(this,arguments);};}();useEffect(function(){return function(){};},[]);useEffect(function(){if(user){getFacilities();}else{/* const localUser= localStorage.getItem(\"user\")\n                    const user1=JSON.parse(localUser)\n                    console.log(localUser)\n                    console.log(user1)\n                    fetchUser(user1)\n                    console.log(user)\n                    getFacilities(user) */}EmployeeServ.on('created',function(obj){return getFacilities();});EmployeeServ.on('updated',function(obj){return getFacilities();});EmployeeServ.on('patched',function(obj){getFacilities();//console.log(facilities.filter(el=>(el._id=selectedEmployee._id)))\n});EmployeeServ.on('removed',function(obj){return getFacilities();});return function(){};},[]);//todo: pagination and vertical scroll bar\nreturn/*#__PURE__*/_jsx(_Fragment,{children:user?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"level\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"level-left\",children:/*#__PURE__*/_jsx(\"div\",{className:\"level-item\",children:/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left  \",children:[/*#__PURE__*/_jsx(DebounceInput,{className:\"input is-small \",type:\"text\",placeholder:\"Search Facilities\",minLength:3,debounceTimeout:400,onChange:function onChange(e){return handleSearch(e.target.value);}}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-search\"})})]})})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"level-item\",children:[\" \",/*#__PURE__*/_jsx(\"span\",{className:\"is-size-6 has-text-weight-medium\",children:\"List of Employees \"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"level-right\",children:/*#__PURE__*/_jsx(\"div\",{className:\"level-item\",children:/*#__PURE__*/_jsx(\"div\",{className:\"level-item\",children:/*#__PURE__*/_jsx(\"div\",{className:\"button is-success is-small\",onClick:handleCreateNew,children:\"New\"})})})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"table-container pullup \",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table is-striped is-narrow is-hoverable is-fullwidth is-scrollable \",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Serial No\",children:\"S/No\"})}),/*#__PURE__*/_jsx(\"th\",{children:\"First Name\"}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Last Name\",children:\"Last Name\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Profession\",children:\"Profession\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Phone\",children:\"Phone\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Email\",children:\"Email\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Department\",children:\"Department\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Departmental Unit\",children:\"Departmental Unit\"})})]})}),/*#__PURE__*/_jsx(\"tfoot\",{}),/*#__PURE__*/_jsx(\"tbody\",{children:facilities.map(function(Employee,i){return/*#__PURE__*/_jsxs(\"tr\",{onClick:function onClick(){return handleRow(Employee);},children:[/*#__PURE__*/_jsx(\"th\",{children:i+1}),/*#__PURE__*/_jsx(\"th\",{children:Employee===null||Employee===void 0?void 0:Employee.firstname}),/*#__PURE__*/_jsx(\"td\",{children:Employee===null||Employee===void 0?void 0:Employee.lastname}),/*#__PURE__*/_jsx(\"td\",{children:Employee===null||Employee===void 0?void 0:Employee.profession}),/*#__PURE__*/_jsx(\"td\",{children:Employee===null||Employee===void 0?void 0:Employee.phone}),/*#__PURE__*/_jsx(\"td\",{children:Employee===null||Employee===void 0?void 0:Employee.email}),/*#__PURE__*/_jsx(\"td\",{children:Employee===null||Employee===void 0?void 0:Employee.department}),/*#__PURE__*/_jsx(\"td\",{children:Employee===null||Employee===void 0?void 0:Employee.deptunit})]},Employee._id);})})]})})]}):/*#__PURE__*/_jsx(\"div\",{children:\"loading\"})});}export function EmployeeDetail(){//const { register, handleSubmit, watch, setValue } = useForm(); //errors,\n// eslint-disable-next-line\nvar _useState23=useState(false),_useState24=_slicedToArray(_useState23,2),error=_useState24[0],setError=_useState24[1];//, \n//const [success, setSuccess] =useState(false)\n// eslint-disable-next-line\nvar _useState25=useState(\"\"),_useState26=_slicedToArray(_useState25,2),message=_useState26[0],setMessage=_useState26[1];//,\n//const EmployeeServ=client.service('/Employee')\n//const history = useHistory()\n//const {user,setUser} = useContext(UserContext)\nvar _useContext5=useContext(ObjectContext),state=_useContext5.state,setState=_useContext5.setState;var _useState27=useState(\"\"),_useState28=_slicedToArray(_useState27,2),showRoles=_useState28[0],setShowRoles=_useState28[1];var Employee=state.EmployeeModule.selectedEmployee;var handleEdit=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var newEmployeeModule;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:newEmployeeModule={selectedEmployee:Employee,show:'modify'};_context4.next=3;return setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{EmployeeModule:newEmployeeModule});});case 3:case\"end\":return _context4.stop();}}},_callee4);}));return function handleEdit(){return _ref4.apply(this,arguments);};}();var handleRoles=function handleRoles(){setShowRoles(true);};var handlecloseModal=function handlecloseModal(){setShowRoles(false);};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card \",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsx(\"p\",{className:\"card-header-title\",children:\"Employee Details\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-content vscrollable\",children:/*#__PURE__*/_jsxs(\"fieldset\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"label\",{className:\"label is-small\",children:[\" \",/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-hospital\"})}),\"First Name:\"]})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"span\",{className:\"is-medium \",name:\"EmployeeName\",children:[\" \",Employee===null||Employee===void 0?void 0:Employee.firstname,\" \"]})})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"label\",{className:\"label is-small\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-map-signs\"})}),\"Last Name:\"]})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"span\",{className:\"is-small \",name:\"EmployeeAddress\",children:[Employee===null||Employee===void 0?void 0:Employee.lastname,\" \"]})})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"label\",{className:\"label is-small\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-map-marker-alt\"})}),\"Profession:\"]})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"is-small \",name:\"EmployeeCity\",children:Employee===null||Employee===void 0?void 0:Employee.profession})})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"label\",{className:\"label is-small\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-phone-alt\"})}),\"Phone:\"]})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"is-small \",name:\"EmployeeContactPhone\",children:Employee===null||Employee===void 0?void 0:Employee.phone})})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"label\",{className:\"label is-small\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-envelope\"})}),\"Email:\"]})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"is-small \",name:\"EmployeeEmail\",children:Employee===null||Employee===void 0?void 0:Employee.email})})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"label\",{className:\"label is-small\",children:[\" \",/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-user-md\"})}),\"Department:\"]})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"is-small \",name:\"EmployeeOwner\",children:Employee===null||Employee===void 0?void 0:Employee.department})})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"label\",{className:\"label is-small\",children:[\" \",/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-hospital-symbol\"})}),\"Departmental Unit:\"]})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"is-small \",name:\"EmployeeType\",children:Employee===null||Employee===void 0?void 0:Employee.deptunit})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field mt-2 is-grouped\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"control\",children:/*#__PURE__*/_jsx(\"button\",{className:\"button is-success is-small\",onClick:handleEdit,children:\"Edit\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"control\",children:/*#__PURE__*/_jsx(\"button\",{className:\"button is-info is-small\",onClick:handleRoles,children:\"Set Roles\"})})]}),error&&/*#__PURE__*/_jsxs(\"div\",{className:\"message\",children:[\" \",message]})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal \".concat(showRoles?\"is-active\":\"\"),children:[/*#__PURE__*/_jsx(\"div\",{className:\"modal-background\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-card\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"modal-card-head minHt\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"modal-card-title\",children:\"Employee Roles\"}),/*#__PURE__*/_jsx(\"button\",{className:\"delete\",\"aria-label\":\"close\",onClick:handlecloseModal})]}),/*#__PURE__*/_jsx(\"section\",{className:\"modal-card-body\",children:/*#__PURE__*/_jsx(ModuleList,{handlecloseModal:handlecloseModal})})]})]})]});}export function EmployeeModify(){var _useForm2=useForm(),register=_useForm2.register,handleSubmit=_useForm2.handleSubmit,setValue=_useForm2.setValue,reset=_useForm2.reset,errors=_useForm2.errors;//watch, errors,\n// eslint-disable-next-line \nvar _useState29=useState(false),_useState30=_slicedToArray(_useState29,2),error=_useState30[0],setError=_useState30[1];// eslint-disable-next-line \nvar _useState31=useState(false),_useState32=_slicedToArray(_useState31,2),success=_useState32[0],setSuccess=_useState32[1];// eslint-disable-next-line \nvar _useState33=useState(\"\"),_useState34=_slicedToArray(_useState33,2),message=_useState34[0],setMessage=_useState34[1];// eslint-disable-next-line \nvar EmployeeServ=client.service('employee');//const history = useHistory()\n// eslint-disable-next-line\nvar _useContext6=useContext(UserContext),user=_useContext6.user;var _useContext7=useContext(ObjectContext),state=_useContext7.state,setState=_useContext7.setState;var Employee=state.EmployeeModule.selectedEmployee;useEffect(function(){setValue(\"firstname\",Employee.firstname,{shouldValidate:true,shouldDirty:true});setValue(\"lastname\",Employee.lastname,{shouldValidate:true,shouldDirty:true});setValue(\"profession\",Employee.profession,{shouldValidate:true,shouldDirty:true});setValue(\"phone\",Employee.phone,{shouldValidate:true,shouldDirty:true});setValue(\"email\",Employee.email,{shouldValidate:true,shouldDirty:true});setValue(\"department\",Employee.department,{shouldValidate:true,shouldDirty:true});setValue(\"deptunit\",Employee.deptunit,{shouldValidate:true,shouldDirty:true});/*   setValue(\"EmployeeCategory\", Employee.EmployeeCategory,  {\n                shouldValidate: true,\n                shouldDirty: true\n            }) */return function(){};});var handleCancel=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){var newEmployeeModule;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:newEmployeeModule={selectedEmployee:{},show:'create'};_context5.next=3;return setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{EmployeeModule:newEmployeeModule});});case 3:case\"end\":return _context5.stop();}}},_callee5);}));return function handleCancel(){return _ref5.apply(this,arguments);};}();var changeState=function changeState(){var newEmployeeModule={selectedEmployee:{},show:'create'};setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{EmployeeModule:newEmployeeModule});});};var handleDelete=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(){var conf,dleteId;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:conf=window.confirm(\"Are you sure you want to delete this data?\");dleteId=Employee._id;if(conf){EmployeeServ.remove(dleteId).then(function(res){//console.log(JSON.stringify(res))\nreset();/*  setMessage(\"Deleted Employee successfully\")\n                setSuccess(true)\n                changeState()\n               setTimeout(() => {\n                setSuccess(false)\n                }, 200); */toast({message:'Employee deleted succesfully',type:'is-success',dismissible:true,pauseOnHover:true});changeState();}).catch(function(err){// setMessage(\"Error deleting Employee, probable network issues \"+ err )\n// setError(true)\ntoast({message:\"Error deleting Employee, probable network issues or \"+err,type:'is-danger',dismissible:true,pauseOnHover:true});});}case 3:case\"end\":return _context6.stop();}}},_callee6);}));return function handleDelete(){return _ref6.apply(this,arguments);};}();/* ()=> setValue(\"firstName\", \"Bill\", , {\n            shouldValidate: true,\n            shouldDirty: true\n          })) */var onSubmit=function onSubmit(data,e){e.preventDefault();setSuccess(false);console.log(data);data.facility=Employee.facility;//console.log(data);\nEmployeeServ.patch(Employee._id,data).then(function(res){//console.log(JSON.stringify(res))\n// e.target.reset();\n// setMessage(\"updated Employee successfully\")\ntoast({message:'Employee updated succesfully',type:'is-success',dismissible:true,pauseOnHover:true});changeState();}).catch(function(err){//setMessage(\"Error creating Employee, probable network issues \"+ err )\n// setError(true)\ntoast({message:\"Error updating Employee, probable network issues or \"+err,type:'is-danger',dismissible:true,pauseOnHover:true});});};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"card \",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsx(\"p\",{className:\"card-header-title\",children:\"Employee Details-Modify\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-content vscrollable\",children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"label\",{className:\"label is-small\",children:[\"First Name\",/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left has-icons-right\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input  is-small\",ref:register({required:true}),name:\"firstname\",type:\"text\",placeholder:\"First Name\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-hospital\"})})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"label\",{className:\"label is-small\",children:[\"Last Name\",/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left has-icons-right\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register({required:true}),name:\"lastname\",type:\"text\",placeholder:\"Last Name\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-map-signs\"})})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"label\",{className:\"label is-small\",children:[\"Profession\",/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register({required:true}),name:\"profession\",type:\"text\",placeholder:\"Profession\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-map-marker-alt\"})})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"label\",{className:\"label is-small\",children:[\"Phone\",/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register({required:true}),name:\"phone\",type:\"text\",placeholder:\"Phone No\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-phone-alt\"})})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"label\",{className:\"label is-small\",children:[\"Email\",/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register({required:true}),name:\"email\",type:\"email\",placeholder:\"Employee Email\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-envelope\"})})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"label is-small\",children:[\"Department\",/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register({required:true}),name:\"department\",type:\"text\",placeholder:\"Department\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-user-md\"})})]})]}),errors.department&&/*#__PURE__*/_jsx(\"span\",{children:\"This field is required\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"label\",{className:\"label is-small\",children:[\"Departmental Unit\",/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register({required:true}),name:\"deptunit\",type:\"text\",placeholder:\"Departmental Unit\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-hospital-symbol\"})})]})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"block\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field  is-grouped\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"control\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"button is-success is-small\",onClick:handleSubmit(onSubmit),children:\"Save\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"control\",children:/*#__PURE__*/_jsx(\"button\",{className:\"button is-warning is-small\",onClick:handleCancel,children:\"Cancel\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"control\",children:/*#__PURE__*/_jsx(\"button\",{className:\"button is-danger is-small\",onClick:function onClick(){return handleDelete();},type:\"delete\",children:\"Delete\"})})]})})]})]})});}export function InputSearch(_ref7){var getSearchfacility=_ref7.getSearchfacility,clear=_ref7.clear;var facilityServ=client.service('facility');var _useState35=useState([]),_useState36=_slicedToArray(_useState35,2),facilities=_useState36[0],setFacilities=_useState36[1];// eslint-disable-next-line\nvar _useState37=useState(false),_useState38=_slicedToArray(_useState37,2),searchError=_useState38[0],setSearchError=_useState38[1];// eslint-disable-next-line\nvar _useState39=useState(false),_useState40=_slicedToArray(_useState39,2),showPanel=_useState40[0],setShowPanel=_useState40[1];// eslint-disable-next-line\nvar _useState41=useState(\"\"),_useState42=_slicedToArray(_useState41,2),searchMessage=_useState42[0],setSearchMessage=_useState42[1];// eslint-disable-next-line \nvar _useState43=useState(\"\"),_useState44=_slicedToArray(_useState43,2),simpa=_useState44[0],setSimpa=_useState44[1];// eslint-disable-next-line \nvar _useState45=useState(false),_useState46=_slicedToArray(_useState45,2),chosen=_useState46[0],setChosen=_useState46[1];// eslint-disable-next-line \nvar _useState47=useState(0),_useState48=_slicedToArray(_useState47,2),count=_useState48[0],setCount=_useState48[1];var inputEl=useRef(null);var handleRow=/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(obj){return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return setChosen(true);case 2://alert(\"something is chaning\")\ngetSearchfacility(obj);_context7.next=5;return setSimpa(obj.facilityName);case 5:// setSelectedFacility(obj)\nsetShowPanel(false);_context7.next=8;return setCount(2);case 8:case\"end\":return _context7.stop();}}},_callee7);}));return function handleRow(_x2){return _ref8.apply(this,arguments);};}();var handleBlur=/*#__PURE__*/function(){var _ref9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(e){return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:if(count===2){console.log(\"stuff was chosen\");}/*  console.log(\"blur\")\n         setShowPanel(false)\n        console.log(JSON.stringify(simpa))\n        if (simpa===\"\"){\n            console.log(facilities.length)\n            setSimpa(\"abc\")\n            setSimpa(\"\")\n            setFacilities([])\n            inputEl.current.setValue=\"\"\n        }\n        console.log(facilities.length)\n        console.log(inputEl.current) */case 1:case\"end\":return _context8.stop();}}},_callee8);}));return function handleBlur(_x3){return _ref9.apply(this,arguments);};}();var handleSearch=/*#__PURE__*/function(){var _ref10=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(val){var field,_query2;return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:field='facilityName';//field variable\nif(!(val.length>=3)){_context9.next=5;break;}facilityServ.find({query:(_query2={},_defineProperty(_query2,field,{$regex:val,$options:'i'}),_defineProperty(_query2,\"$limit\",10),_defineProperty(_query2,\"$sort\",{createdAt:-1}),_query2)}).then(function(res){console.log(\"facility  fetched successfully\");setFacilities(res.data);setSearchMessage(\" facility  fetched successfully\");setShowPanel(true);}).catch(function(err){console.log(err);setSearchMessage(\"Error searching facility, probable network issues \"+err);setSearchError(true);});_context9.next=11;break;case 5:console.log(\"less than 3 \");console.log(val);setShowPanel(false);_context9.next=10;return setFacilities([]);case 10:console.log(facilities);case 11:case\"end\":return _context9.stop();}}},_callee9);}));return function handleSearch(_x4){return _ref10.apply(this,arguments);};}();useEffect(function(){if(clear){setSimpa(\"\");}return function(){};},[clear]);return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsx(\"div\",{className:\"control has-icons-left  \",children:/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown \".concat(showPanel?\"is-active\":\"\"),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown-trigger\",children:[/*#__PURE__*/_jsx(DebounceInput,{className:\"input is-small \",type:\"text\",placeholder:\"Search Facilities\",value:simpa,minLength:1,debounceTimeout:400,onBlur:function onBlur(e){return handleBlur(e);},onChange:function onChange(e){return handleSearch(e.target.value);},inputRef:inputEl}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-search\"})})]}),searchError&&/*#__PURE__*/_jsx(\"div\",{children:searchMessage}),/*#__PURE__*/_jsx(\"div\",{className:\"dropdown-menu\",children:/*#__PURE__*/_jsx(\"div\",{className:\"dropdown-content\",children:facilities.map(function(facility,i){return/*#__PURE__*/_jsx(\"div\",{className:\"dropdown-item\",onClick:function onClick(){return handleRow(facility);},children:/*#__PURE__*/_jsx(\"span\",{children:facility.facilityName})},facility._id);})})})]})})})});}","map":{"version":3,"sources":["/home/mfybaby/Documents/HealthStack2/HS-frontend/src/components/facility/Employee.js"],"names":["React","useState","useContext","useEffect","useRef","client","DebounceInput","useForm","UserContext","ObjectContext","ModuleList","toast","searchfacility","Employee","state","selectedEmployee","setSelectedEmployee","EmployeeModule","show","EmployeeCreate","register","handleSubmit","setValue","error","setError","success","setSuccess","message","setMessage","facility","setFacility","EmployeeServ","service","user","currentUser","setCurrentUser","getSearchfacility","obj","_id","shouldValidate","shouldDirty","stacker","currentEmployee","facilityDetail","onSubmit","data","e","preventDefault","createdby","create","then","res","target","reset","type","dismissible","pauseOnHover","catch","err","required","display","EmployeeList","facilities","setFacilities","setState","setUser","handleCreateNew","newEmployeeModule","prevstate","handleRow","handleSearch","val","field","console","log","find","query","$regex","$options","createdAt","getFacilities","$limit","$sort","findEmployee","on","value","map","i","firstname","lastname","profession","phone","email","department","deptunit","EmployeeDetail","showRoles","setShowRoles","handleEdit","handleRoles","handlecloseModal","EmployeeModify","errors","handleCancel","changeState","handleDelete","conf","window","confirm","dleteId","remove","patch","InputSearch","clear","facilityServ","searchError","setSearchError","showPanel","setShowPanel","searchMessage","setSearchMessage","simpa","setSimpa","chosen","setChosen","count","setCount","inputEl","facilityName","handleBlur","length"],"mappings":"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","sourcesContent":["/* eslint-disable */\nimport React, {useState,useContext, useEffect,useRef} from 'react'\nimport client from '../../feathers'\nimport {DebounceInput} from 'react-debounce-input';\nimport { useForm } from \"react-hook-form\";\n//import {useHistory} from 'react-router-dom'\nimport {UserContext,ObjectContext} from '../../context'\nimport ModuleList from './ModuleList'\nimport {toast} from 'bulma-toast'\n// eslint-disable-next-line\nconst searchfacility={};\n\n\nexport default function Employee() {\n    const {state}=useContext(ObjectContext) //,setState\n    // eslint-disable-next-line\n    const [selectedEmployee,setSelectedEmployee]=useState()\n    //const [showState,setShowState]=useState() //create|modify|detail\n    \n    return(\n        <section className= \"section remPadTop\">\n           {/*  <div className=\"level\">\n            <div className=\"level-item\"> <span className=\"is-size-6 has-text-weight-medium\">Employee  Module</span></div>\n            </div> */}\n            <div className=\"columns \">\n            <div className=\"column is-8 \">\n                <EmployeeList />\n                </div>\n            <div className=\"column is-4 \">\n                {(state.EmployeeModule.show ==='create')&&<EmployeeCreate />}\n                {(state.EmployeeModule.show ==='detail')&&<EmployeeDetail  />}\n                {(state.EmployeeModule.show ==='modify')&&<EmployeeModify Employee={selectedEmployee} />}\n               \n            </div>\n\n            </div>                            \n            </section>\n       \n    )\n    \n}\n\nexport function EmployeeCreate(){\n    const { register, handleSubmit,setValue} = useForm(); //, watch, errors, reset \n    const [error, setError] =useState(false)\n    const [success, setSuccess] =useState(false)\n    const [message,setMessage] = useState(\"\")\n    // eslint-disable-next-line\n    const [facility,setFacility] = useState()\n    const EmployeeServ=client.service('employee')\n    //const history = useHistory()\n    const {user} = useContext(UserContext) //,setUser\n    // eslint-disable-next-line\n    const [currentUser,setCurrentUser] = useState()\n\n\n\n    const getSearchfacility=(obj)=>{\n        \n        setValue(\"facility\", obj._id,  {\n            shouldValidate: true,\n            shouldDirty: true\n        })\n    }\n    \n    useEffect(() => {\n        setCurrentUser(user)\n        //console.log(currentUser)\n        return () => {\n        \n        }\n    }, [user])\n\n  //check user for facility or get list of facility  \n    useEffect(()=>{\n        //setFacility(user.activeEmployee.FacilityId)//\n      if (!user.stacker){\n        setValue(\"facility\", user.currentEmployee.facilityDetail._id,  {\n            shouldValidate: true,\n            shouldDirty: true\n        }) \n      }\n    },[user])\n\n    const onSubmit = (data,e) =>{\n        e.preventDefault();\n        setMessage(\"\")\n        setError(false)\n        setSuccess(false)\n          data.createdby=user._id\n          //console.log(data);\n          if (user.currentEmployee){\n         // data.facility=user.currentEmployee.facilityDetail._id  // or from facility dropdown\n          }\n        EmployeeServ.create(data)\n        .then((res)=>{\n                //console.log(JSON.stringify(res))\n                e.target.reset();\n               /*  setMessage(\"Created Employee successfully\") */\n                setSuccess(true)\n                toast({\n                    message: 'Employee created succesfully',\n                    type: 'is-success',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  })\n                  setSuccess(false)\n            })\n            .catch((err)=>{\n                toast({\n                    message: 'Error creating employee ' + err,\n                    type: 'is-danger',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  })\n            })\n\n      } \n\n    return (\n        <>\n            <div className=\"card \">\n            <div className=\"card-header\">\n                <p className=\"card-header-title\">\n                    Create Employee\n                </p>\n            </div>\n            <div className=\"card-content vscrollable\">\n            { success && <div className=\"message\"> {message}</div>}\n            { error && <div className=\"is-danger\"> {message}</div>}\n            <form onSubmit={handleSubmit(onSubmit)}>\n                <div className=\"field\">\n                    <p className=\"control has-icons-left has-icons-right\">\n                        <input className=\"input is-small\" ref={register({ required: true })}  name=\"firstname\" type=\"text\" placeholder=\"First Name\" />\n                        <span className=\"icon is-small is-left\">\n                            <i className=\"fas fa-hospital\"></i>\n                        </span>                    \n                    </p>\n                </div>\n                <div className=\"field\">\n                    <p className=\"control has-icons-left has-icons-right\">\n                    <input className=\"input is-small\" ref={register({ required: true })}  name=\"lastname\" type=\"text\" placeholder=\"Last Name\" />\n                    <span className=\"icon is-small is-left\">\n                        <i className=\"fas fa-map-signs\"></i>\n                    </span>\n                    \n                </p>\n            </div>\n            <div className=\"field\">\n                <p className=\"control has-icons-left\">\n                    <input className=\"input is-small\" ref={register({ required: true })} name=\"profession\" type=\"text\" placeholder=\"Profession\"/>\n                    <span className=\"icon is-small is-left\">\n                    <i className=\" fas fa-user-md \"></i>\n                    </span>\n                </p>\n            </div>\n            <div className=\"field\">\n                <p className=\"control has-icons-left\">\n                    <input className=\"input is-small\" ref={register({ required: true })} name=\"phone\" type=\"text\" placeholder=\" Phone No\"/>\n                    <span className=\"icon is-small is-left\">\n                    <i className=\"fas fa-phone-alt\"></i>\n                    </span>\n                </p>\n            </div>\n           \n            <div className=\"field\">\n                <p className=\"control has-icons-left\">\n                \n                    <input className=\"input is-small\" ref={register({ required: true })} name=\"email\" type=\"email\" placeholder=\"Email\"  />\n                    <span className=\"icon is-small is-left\">\n                    <i className=\"fas fa-envelope\"></i>\n                    </span>\n                </p>\n            </div>\n           <div className=\"field\"  style={ !user.stacker?{display:\"none\"}:{}} >\n                <InputSearch  getSearchfacility={getSearchfacility} clear={success} /> \n                <p className=\"control has-icons-left \" style={{display:\"none\"}}>\n                    <input className=\"input is-small\" ref={register({ required: true })} name=\"facility\" type=\"text\" placeholder=\"Facility\" />\n                    <span className=\"icon is-small is-left\">\n                    <i className=\"fas  fa-map-marker-alt\"></i>\n                    </span>\n                </p>\n            </div>\n            <div className=\"field\">\n                <div className=\"control has-icons-left\">\n                    <div className=\"dropdown \">\n                        <div className=\"dropdown-trigger\">\n                            <input className=\"input is-small\" ref={register({ required: true })} name=\"department\" type=\"text\" placeholder=\"Department\"/>\n                            <span className=\"icon is-small is-left\">\n                            <i className=\"fas fa-hospital-symbol\"></i>\n                            </span>\n                        </div>\n                        <div className=\"dropdown-menu\">\n                            <div className=\"dropdown-content\">\n                                <div className=\"dropdown-item\">\n                                    simpa\n                                </div>\n                                <div className=\"dropdown-item is-active\">\n                                    simpa 2\n                                </div>\n                                <div className=\"dropdown-item\">\n                                    simpa 3\n                                </div>\n                                <div className=\"dropdown-item\">\n                                    simpa 4\n                                </div>\n                            </div>\n                        </div>   \n                    </div>\n                </div>\n            </div>\n            <div className=\"field\">\n                <p className=\"control has-icons-left\">\n                    <input className=\"input is-small\" ref={register({ required: true })} name=\"deptunit\" type=\"text\" placeholder=\"Department Unit\"/>\n                    <span className=\"icon is-small is-left\">\n                    <i className=\"fas fa-clinic-medical\"></i>\n                    </span>\n                </p>\n            </div>\n            <div className=\"field\">\n                <p className=\"control has-icons-left\">\n                    <input className=\"input is-small\" ref={register({ required: true })} name=\"password\" type=\"text\" placeholder=\"password\"/>\n                    <span className=\"icon is-small is-left\">\n                    <i className=\"fas fa-clinic-medical\"></i>\n                    </span>\n                </p>\n            </div>\n            <div className=\"field\">\n                <p className=\"control\">\n                    <button className=\"button is-success is-small\">\n                        Create\n                    </button>\n                </p>\n            </div>\n            \n            </form>\n            </div>\n            </div>\n        </>\n    )\n   \n}\n\nexport function EmployeeList(){\n   // const { register, handleSubmit, watch, errors } = useForm();\n    // eslint-disable-next-line\n    const [error, setError] =useState(false)\n     // eslint-disable-next-line\n    const [success, setSuccess] =useState(false)\n     // eslint-disable-next-line\n   const [message, setMessage] = useState(\"\") \n    const EmployeeServ=client.service('employee')\n    //const history = useHistory()\n   // const {user,setUser} = useContext(UserContext)\n    const [facilities,setFacilities]=useState([])\n     // eslint-disable-next-line\n   const [selectedEmployee, setSelectedEmployee]=useState() //\n    // eslint-disable-next-line\n    const {state,setState}=useContext(ObjectContext)\n    // eslint-disable-next-line\n    const {user,setUser}=useContext(UserContext)\n\n\n\n    const handleCreateNew = async()=>{\n        const    newEmployeeModule={\n            selectedEmployee:{},\n            show :'create'\n            }\n       await setState((prevstate)=>({...prevstate, EmployeeModule:newEmployeeModule}))\n       //console.log(state)\n        \n\n    }\n    const handleRow= async(Employee)=>{\n        //console.log(\"b4\",state)\n\n        //console.log(\"handlerow\",Employee)\n\n        await setSelectedEmployee(Employee)\n\n        const    newEmployeeModule={\n            selectedEmployee:Employee,\n            show :'detail'\n        }\n       await setState((prevstate)=>({...prevstate, EmployeeModule:newEmployeeModule}))\n       //console.log(state)\n\n    }\n\n   const handleSearch=(val)=>{\n       const field='firstname'\n       console.log(val)\n       EmployeeServ.find({query: {\n                [field]: {\n                    $regex:val,\n                    $options:'i'\n                   \n                },\n               facility:user.currentEmployee.facilityDetail._id || \"\",\n                $limit:1000,\n                $sort: {\n                    createdAt: -1\n                  }\n                    }}).then((res)=>{\n                console.log(res)\n               setFacilities(res.data)\n                setMessage(\" Employee  fetched successfully\")\n                setSuccess(true) \n            })\n            .catch((err)=>{\n                console.log(err)\n                setMessage(\"Error fetching Employee, probable network issues \"+ err )\n                setError(true)\n            })\n        }\n   \n        const getFacilities= async()=>{\n            if (user.currentEmployee){\n            \n        const findEmployee= await EmployeeServ.find(\n                {query: {\n                    facility:user.currentEmployee.facilityDetail._id,\n                    $limit:200,\n                    $sort: {\n                        createdAt: -1\n                    }\n                    }})\n\n         await setFacilities(findEmployee.data)\n                }\n                else {\n                    if (user.stacker){\n                        const findEmployee= await EmployeeServ.find(\n                            {query: {\n                                \n                                $limit:100,\n                                $sort: {\n                                    facility: -1\n                                }\n                                }})\n            \n                    await setFacilities(findEmployee.data)\n\n                    }\n                }\n         \n            }\n            \n            useEffect(() => {\n              \n\n                return () => {\n                    \n\n                }\n            },[])\n\n            useEffect(() => {\n               \n                if (user){\n                    getFacilities()\n                }else{\n                    /* const localUser= localStorage.getItem(\"user\")\n                    const user1=JSON.parse(localUser)\n                    console.log(localUser)\n                    console.log(user1)\n                    fetchUser(user1)\n                    console.log(user)\n                    getFacilities(user) */\n                }\n                EmployeeServ.on('created', (obj)=>getFacilities())\n                EmployeeServ.on('updated', (obj)=>getFacilities())\n                EmployeeServ.on('patched', \n                    (obj)=>{\n                        getFacilities()\n                        //console.log(facilities.filter(el=>(el._id=selectedEmployee._id)))\n\n                })\n                EmployeeServ.on('removed', (obj)=>getFacilities())\n                return () => {\n                \n                }\n            },[])\n\n\n    //todo: pagination and vertical scroll bar\n\n    return(\n        <>\n           {user?( <>  \n                <div className=\"level\">\n                    <div className=\"level-left\">\n                        <div className=\"level-item\">\n                            <div className=\"field\">\n                                <p className=\"control has-icons-left  \">\n                                    <DebounceInput className=\"input is-small \" \n                                        type=\"text\" placeholder=\"Search Facilities\"\n                                        minLength={3}\n                                        debounceTimeout={400}\n                                        onChange={(e)=>handleSearch(e.target.value)} />\n                                    <span className=\"icon is-small is-left\">\n                                        <i className=\"fas fa-search\"></i>\n                                    </span>\n                                </p>\n                            </div>\n                        </div>\n                    </div>\n                    <div className=\"level-item\"> <span className=\"is-size-6 has-text-weight-medium\">List of Employees </span></div>\n                    <div className=\"level-right\">\n                        <div className=\"level-item\"> \n                            <div className=\"level-item\"><div className=\"button is-success is-small\" onClick={handleCreateNew}>New</div></div>\n                        </div>\n                    </div>\n\n                </div>\n                <div className=\"table-container pullup \">\n                                <table className=\"table is-striped is-narrow is-hoverable is-fullwidth is-scrollable \">\n                                    <thead>\n                                        <tr>\n                                        <th><abbr title=\"Serial No\">S/No</abbr></th>\n                                        <th>First Name</th>\n                                        <th><abbr title=\"Last Name\">Last Name</abbr></th>\n                                        <th><abbr title=\"Profession\">Profession</abbr></th>\n                                        <th><abbr title=\"Phone\">Phone</abbr></th>\n                                        <th><abbr title=\"Email\">Email</abbr></th>\n                                        <th><abbr title=\"Department\">Department</abbr></th>\n                                        <th><abbr title=\"Departmental Unit\">Departmental Unit</abbr></th>\n                                       {/*  <th><abbr title=\"Facility\">Facility</abbr></th>\n                                        <th><abbr title=\"Actions\">Actions</abbr></th> */}\n                                        </tr>\n                                    </thead>\n                                    <tfoot>\n                                        \n                                    </tfoot>\n                                    <tbody>\n                                        {facilities.map((Employee, i)=>(\n\n                                            <tr key={Employee._id} onClick={()=>handleRow(Employee)}>\n                                            <th>{i+1}</th>\n                                            <th>{Employee?.firstname}</th>\n                                            <td>{Employee?.lastname}</td>\n                                            <td>{Employee?.profession}</td>\n                                            <td>{Employee?.phone}</td>\n                                            <td>{Employee?.email}</td>\n                                            <td>{Employee?.department}</td>\n                                            <td>{Employee?.deptunit}</td>\n                                            {/* <td>{Employee.facility}</td>\n                                            <td><span   className=\"showAction\"  >...</span></td> */}\n                                           \n                                            </tr>\n\n                                        ))}\n                                    </tbody>\n                                    </table>\n                                    \n                </div>              \n            </>):<div>loading</div>}\n            </>\n              \n    )\n    }\n\n\nexport function EmployeeDetail(){\n    //const { register, handleSubmit, watch, setValue } = useForm(); //errors,\n     // eslint-disable-next-line\n    const [error, setError] =useState(false) //, \n    //const [success, setSuccess] =useState(false)\n     // eslint-disable-next-line\n    const [message, setMessage] = useState(\"\") //,\n    //const EmployeeServ=client.service('/Employee')\n    //const history = useHistory()\n    //const {user,setUser} = useContext(UserContext)\n    const {state,setState} = useContext(ObjectContext)\n    const [showRoles, setShowRoles] = useState(\"\") \n\n   \n\n   const Employee =state.EmployeeModule.selectedEmployee \n\n    const handleEdit= async()=>{\n        const    newEmployeeModule={\n            selectedEmployee:Employee,\n            show :'modify'\n        }\n       await setState((prevstate)=>({...prevstate, EmployeeModule:newEmployeeModule}))\n       //console.log(state)\n       \n    }\n    const handleRoles=()=>{\n        setShowRoles(true)\n    }\n    const handlecloseModal =()=>{\n        setShowRoles(false)\n    }\n \n    return (\n        <>\n        <div className=\"card \">\n            <div className=\"card-header\">\n                <p className=\"card-header-title\">\n                    Employee Details\n                </p>\n            </div>\n            <div className=\"card-content vscrollable\">\n           \n            <fieldset>\n                <tr>\n                    <td>\n                \n                    <label className=\"label is-small\"> <span className=\"icon is-small is-left\">\n                            <i className=\"fas fa-hospital\"></i>\n                        </span>                    \n                        First Name: \n                        </label>\n                        </td>\n                        <td>\n                        <span className=\"is-medium \"   name=\"EmployeeName\"> {Employee?.firstname} </span>\n                        </td>\n                    </tr>\n                    <tr>\n                    <td>\n                <label className=\"label is-small\"><span className=\"icon is-small is-left\">\n                        <i className=\"fas fa-map-signs\"></i>\n                    </span>Last Name:\n                    </label></td>\n                    <td>\n                    <span className=\"is-small \"  name=\"EmployeeAddress\">{Employee?.lastname} </span> \n                    </td>\n                </tr>\n                    <tr>\n                    <td>\n            <label className=\"label is-small\"><span className=\"icon is-small is-left\">\n                    <i className=\"fas fa-map-marker-alt\"></i>\n                    </span>Profession: \n                \n                    \n                    </label>\n                    </td>\n                <td>\n                <span className=\"is-small \"  name=\"EmployeeCity\">{Employee?.profession}</span> \n                </td>\n                </tr>\n                    <tr>\n            <td>\n            <label className=\"label is-small\"><span className=\"icon is-small is-left\">\n                    <i className=\"fas fa-phone-alt\"></i>\n                    </span>Phone:           \n                    \n                        </label>\n                        </td>\n                        <td>\n                        <span className=\"is-small \"  name=\"EmployeeContactPhone\" >{Employee?.phone}</span>\n                        </td>\n                  </tr>\n                    <tr><td>\n            \n            <label className=\"label is-small\"><span className=\"icon is-small is-left\">\n                    <i className=\"fas fa-envelope\"></i>\n                    </span>Email:                     \n                    \n                         </label></td><td>\n                         <span className=\"is-small \"  name=\"EmployeeEmail\" >{Employee?.email}</span>\n                         </td>\n             \n                </tr>\n                    <tr>\n            <td>\n            <label className=\"label is-small\"> <span className=\"icon is-small is-left\">\n                    <i className=\"fas fa-user-md\"></i></span>Department:\n                    \n                    </label></td>\n                    <td>\n                    <span className=\"is-small \"  name=\"EmployeeOwner\">{Employee?.department}</span>\n                    </td>\n               \n                </tr>\n                    <tr>\n            <td>\n            <label className=\"label is-small\"> <span className=\"icon is-small is-left\">\n                    <i className=\"fas fa-hospital-symbol\"></i>\n                    </span>Departmental Unit:              \n                    \n                </label></td>\n                <td>\n                <span className=\"is-small \"  name=\"EmployeeType\">{Employee?.deptunit}</span>\n                </td>\n              \n                </tr>\n                    \n          {/*   <div className=\"field\">\n             <label className=\"label is-small\"><span className=\"icon is-small is-left\">\n                    <i className=\"fas fa-clinic-medical\"></i>\n                    </span>Category:              \n                    <span className=\"is-small \"  name= \"EmployeeCategory\">{Employee.EmployeeCategory}</span>\n                </label>\n                 </div> */}\n\n\n        <div className=\"field mt-2 is-grouped\"> \n           \n                <p className=\"control\">\n                    <button className=\"button is-success is-small\" onClick={handleEdit}>\n                        Edit\n                    </button>\n                </p>\n         \n          \n                <p className=\"control\">\n                    <button className=\"button is-info is-small\" onClick={handleRoles}>\n                        Set Roles\n                    </button>\n                </p>\n         \n            </div>\n            { error && <div className=\"message\"> {message}</div>}\n            </fieldset>\n        </div>\n        </div>\n        <div className={`modal ${showRoles?\"is-active\":\"\"}` }>\n                                    <div className=\"modal-background\"></div>\n                                    <div className=\"modal-card\">\n                                        <header className=\"modal-card-head minHt\">\n                                        <p className=\"modal-card-title\">Employee Roles</p>\n                                        <button className=\"delete\" aria-label=\"close\"  onClick={handlecloseModal}></button>\n                                        </header>\n                                        <section className=\"modal-card-body\">\n                                        {/* <StoreList standalone=\"true\" /> */}\n                                        <ModuleList handlecloseModal={handlecloseModal}/>\n                                        </section>\n                                        {/* <footer className=\"modal-card-foot\">\n                                        <button className=\"button is-success\">Save changes</button>\n                                        <button className=\"button\">Cancel</button>\n                                        </footer> */}\n                                    </div>\n                                </div>  \n        </>\n    )\n   \n   \n}\n\nexport function EmployeeModify(){\n    const { register, handleSubmit, setValue,reset, errors } = useForm(); //watch, errors,\n    // eslint-disable-next-line \n    const [error, setError] =useState(false)\n    // eslint-disable-next-line \n    const [success, setSuccess] =useState(false)\n    // eslint-disable-next-line \n    const [message,setMessage] = useState(\"\")\n    // eslint-disable-next-line \n    const EmployeeServ=client.service('employee')\n    //const history = useHistory()\n     // eslint-disable-next-line\n    const {user} = useContext(UserContext)\n    const {state,setState} = useContext(ObjectContext)\n\n    const Employee =state.EmployeeModule.selectedEmployee \n\n        useEffect(() => {\n            setValue(\"firstname\", Employee.firstname,  {\n                shouldValidate: true,\n                shouldDirty: true\n            })\n            setValue(\"lastname\", Employee.lastname,  {\n                shouldValidate: true,\n                shouldDirty: true\n            })\n            setValue(\"profession\", Employee.profession,  {\n                shouldValidate: true,\n                shouldDirty: true\n            })\n            setValue(\"phone\", Employee.phone,  {\n                shouldValidate: true,\n                shouldDirty: true\n            })\n            setValue(\"email\", Employee.email,  {\n                shouldValidate: true,\n                shouldDirty: true\n            })\n            setValue(\"department\", Employee.department,  {\n                shouldValidate: true,\n                shouldDirty: true\n            })\n            setValue(\"deptunit\", Employee.deptunit,  {\n                shouldValidate: true,\n                shouldDirty: true\n            })\n          /*   setValue(\"EmployeeCategory\", Employee.EmployeeCategory,  {\n                shouldValidate: true,\n                shouldDirty: true\n            }) */\n            \n            return () => {\n                \n            }\n        })\n\n   const handleCancel=async()=>{\n    const    newEmployeeModule={\n        selectedEmployee:{},\n        show :'create'\n      }\n   await setState((prevstate)=>({...prevstate, EmployeeModule:newEmployeeModule}))\n   //console.log(state)\n           }\n\n\n        const changeState =()=>{\n        const    newEmployeeModule={\n            selectedEmployee:{},\n            show :'create'\n        }\n        setState((prevstate)=>({...prevstate, EmployeeModule:newEmployeeModule}))\n\n        }\n    const handleDelete=async()=>{\n        let conf=window.confirm(\"Are you sure you want to delete this data?\")\n        \n        const dleteId=Employee._id\n        if (conf){\n             \n        EmployeeServ.remove(dleteId)\n        .then((res)=>{\n                //console.log(JSON.stringify(res))\n                reset();\n               /*  setMessage(\"Deleted Employee successfully\")\n                setSuccess(true)\n                changeState()\n               setTimeout(() => {\n                setSuccess(false)\n                }, 200); */\n                toast({\n                    message: 'Employee deleted succesfully',\n                    type: 'is-success',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  })\n                changeState()\n            })\n            .catch((err)=>{\n               // setMessage(\"Error deleting Employee, probable network issues \"+ err )\n               // setError(true)\n                toast({\n                    message: \"Error deleting Employee, probable network issues or \"+ err,\n                    type: 'is-danger',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  })\n            })\n        }\n    }\n        \n\n   /* ()=> setValue(\"firstName\", \"Bill\", , {\n            shouldValidate: true,\n            shouldDirty: true\n          })) */\n    const onSubmit = (data,e) =>{\n        e.preventDefault();\n        \n        setSuccess(false)\n        console.log(data)\n        data.facility=Employee.facility\n          //console.log(data);\n          \n        EmployeeServ.patch(Employee._id,data)\n        .then((res)=>{\n                //console.log(JSON.stringify(res))\n               // e.target.reset();\n               // setMessage(\"updated Employee successfully\")\n                 toast({\n                    message: 'Employee updated succesfully',\n                    type: 'is-success',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  })\n                  \n                changeState()\n\n            })\n            .catch((err)=>{\n                //setMessage(\"Error creating Employee, probable network issues \"+ err )\n               // setError(true)\n                toast({\n                    message: \"Error updating Employee, probable network issues or \"+ err,\n                    type: 'is-danger',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  })\n            })\n\n      } \n     \n      \n    return (\n        \n        <>\n        <div className=\"card \">\n            <div className=\"card-header\">\n                <p className=\"card-header-title\">\n                    Employee Details-Modify\n                </p>\n            </div>\n            <div className=\"card-content vscrollable\">\n           \n            <form onSubmit={handleSubmit(onSubmit)}>\n                <div className=\"field\">\n                    <label className=\"label is-small\">First Name\n                    <p className=\"control has-icons-left has-icons-right\">\n                        <input className=\"input  is-small\" ref={register({ required: true })}  name=\"firstname\" type=\"text\" placeholder=\"First Name\" />\n                        <span className=\"icon is-small is-left\">\n                            <i className=\"fas fa-hospital\"></i>\n                        </span>                    \n                    </p>\n                    </label>\n                    </div>\n                <div className=\"field\">\n                <label className=\"label is-small\">Last Name\n                    <p className=\"control has-icons-left has-icons-right\">\n                    <input className=\"input is-small\" ref={register({ required: true })}  name=\"lastname\" type=\"text\" placeholder=\"Last Name\" />\n                    <span className=\"icon is-small is-left\">\n                        <i className=\"fas fa-map-signs\"></i>\n                    </span>\n                    \n                </p>\n                </label>\n                </div>\n            <div className=\"field\">\n            <label className=\"label is-small\">Profession\n                <p className=\"control has-icons-left\">\n                    <input className=\"input is-small\" ref={register({ required: true })} name=\"profession\" type=\"text\" placeholder=\"Profession\"/>\n                    <span className=\"icon is-small is-left\">\n                    <i className=\"fas fa-map-marker-alt\"></i>\n                    </span>\n                </p>\n                </label>\n                </div>\n            <div className=\"field\">\n            <label className=\"label is-small\">Phone\n                <p className=\"control has-icons-left\">\n                    <input className=\"input is-small\" ref={register({ required: true })} name=\"phone\" type=\"text\" placeholder=\"Phone No\"/>\n                    <span className=\"icon is-small is-left\">\n                    <i className=\"fas fa-phone-alt\"></i>\n                    </span>\n                </p>\n                </label>\n                 </div>\n            <div className=\"field\">\n            <label className=\"label is-small\">Email\n                <p className=\"control has-icons-left\">\n                    <input className=\"input is-small\" ref={register({ required: true })} name=\"email\" type=\"email\" placeholder=\"Employee Email\"/>\n                    <span className=\"icon is-small is-left\">\n                    <i className=\"fas fa-envelope\"></i>\n                    </span>\n                </p>\n                </label>\n                </div>\n            <div className=\"field\">\n            <label className=\"label is-small\">Department\n                <p className=\"control has-icons-left\">\n                    <input className=\"input is-small\" ref={register({ required: true })} name=\"department\" type=\"text\" placeholder=\"Department\"/>\n                    <span className=\"icon is-small is-left\">\n                    <i className=\"fas fa-user-md\"></i>\n                    </span>\n                </p>\n                </label>\n                {errors.department && <span>This field is required</span>}\n                </div>\n            <div className=\"field\">\n            <label className=\"label is-small\">Departmental Unit\n                <p className=\"control has-icons-left\">\n                    <input className=\"input is-small\" ref={register({ required: true })} name=\"deptunit\" type=\"text\" placeholder=\"Departmental Unit\"/>\n                    <span className=\"icon is-small is-left\">\n                    <i className=\"fas fa-hospital-symbol\"></i>\n                    </span>\n                </p>\n                </label>\n                </div>\n           {/*  <div className=\"field\">\n            <label className=\"label is-small\">Category\n                <p className=\"control has-icons-left\">\n                    <input className=\"input is-small\" ref={register({ required: true })} name=\"EmployeeCategory\" type=\"text\" placeholder=\"Employee Category\"/>\n                    <span className=\"icon is-small is-left\">\n                    <i className=\"fas fa-clinic-medical\"></i>\n                    </span>\n                </p>\n                </label>\n            </div> */}\n           \n           \n            </form>\n            <div className=\"block\">\n            <div className=\"field  is-grouped\">\n                <p className=\"control\">\n                    <button type=\"submit\" className=\"button is-success is-small\" onClick={handleSubmit(onSubmit)}>\n                        Save\n                    </button>\n                </p>\n                <p className=\"control\">\n                    <button className=\"button is-warning is-small\" onClick={handleCancel}>\n                        Cancel\n                    </button>\n                </p>\n                <p className=\"control\">\n                    <button className=\"button is-danger is-small\" onClick={()=>handleDelete()} type=\"delete\">\n                       Delete\n                    </button>\n                </p>\n            </div>\n            </div>\n        </div>\n        </div>\n             \n        </>\n    )\n   \n   \n                \n}   \n\nexport  function InputSearch({getSearchfacility,clear}) {\n    \n    const facilityServ=client.service('facility')\n    const [facilities,setFacilities]=useState([])\n     // eslint-disable-next-line\n     const [searchError, setSearchError] =useState(false)\n     // eslint-disable-next-line\n    const [showPanel, setShowPanel] =useState(false)\n     // eslint-disable-next-line\n   const [searchMessage, setSearchMessage] = useState(\"\") \n   // eslint-disable-next-line \n   const [simpa,setSimpa]=useState(\"\")\n   // eslint-disable-next-line \n   const [chosen,setChosen]=useState(false)\n   // eslint-disable-next-line \n   const [count,setCount]=useState(0)\n   const inputEl=useRef(null)\n\n\n   const handleRow= async(obj)=>{\n        await setChosen(true)\n        //alert(\"something is chaning\")\n       getSearchfacility(obj)\n       \n       await setSimpa(obj.facilityName)\n       \n        // setSelectedFacility(obj)\n        setShowPanel(false)\n        await setCount(2)\n        /* const    newfacilityModule={\n            selectedFacility:facility,\n            show :'detail'\n        }\n   await setState((prevstate)=>({...prevstate, facilityModule:newfacilityModule})) */\n   //console.log(state)\n}\n    const handleBlur=async(e)=>{\n         if (count===2){\n             console.log(\"stuff was chosen\")\n         }\n       \n       /*  console.log(\"blur\")\n         setShowPanel(false)\n        console.log(JSON.stringify(simpa))\n        if (simpa===\"\"){\n            console.log(facilities.length)\n            setSimpa(\"abc\")\n            setSimpa(\"\")\n            setFacilities([])\n            inputEl.current.setValue=\"\"\n        }\n        console.log(facilities.length)\n        console.log(inputEl.current) */\n    }\n    const handleSearch=async(val)=>{\n        \n        const field='facilityName' //field variable\n       \n        if (val.length>=3){\n            facilityServ.find({query: {     //service\n                 [field]: {\n                     $regex:val,\n                     $options:'i'\n                    \n                 },\n                 $limit:10,\n                 $sort: {\n                     createdAt: -1\n                   }\n                     }}).then((res)=>{\n              console.log(\"facility  fetched successfully\") \n                setFacilities(res.data)\n                 setSearchMessage(\" facility  fetched successfully\")\n                 setShowPanel(true)\n             })\n             .catch((err)=>{\n                 console.log(err)\n                 setSearchMessage(\"Error searching facility, probable network issues \"+ err )\n                 setSearchError(true)\n             })\n         }\n        else{\n            console.log(\"less than 3 \")\n            console.log(val)\n            setShowPanel(false)\n            await setFacilities([])\n            console.log(facilities)\n        }\n    }\n    useEffect(() => {\n       if (clear){\n           setSimpa(\"\")\n       }\n        return () => {\n            \n        }\n    }, [clear] )\n    return (\n        <div>\n            <div className=\"field\">\n                <div className=\"control has-icons-left  \">\n                    <div className={`dropdown ${showPanel?\"is-active\":\"\"}`}>\n                        <div className=\"dropdown-trigger\">\n                            <DebounceInput className=\"input is-small \" \n                                type=\"text\" placeholder=\"Search Facilities\"\n                                value={simpa}\n                                minLength={1}\n                                debounceTimeout={400}\n                                onBlur={(e)=>handleBlur(e)}\n                                onChange={(e)=>handleSearch(e.target.value)}\n                                inputRef={inputEl}\n                                  />\n                            <span className=\"icon is-small is-left\">\n                                <i className=\"fas fa-search\"></i>\n                            </span>\n                        </div>\n                        {searchError&&<div>{searchMessage}</div>}\n                        <div className=\"dropdown-menu\" >\n                            <div className=\"dropdown-content\">\n                            {facilities.map((facility, i)=>(\n                                    \n                                    <div className=\"dropdown-item\" key={facility._id} onClick={()=>handleRow(facility)}>\n                                        \n                                        <span>{facility.facilityName}</span>\n                                        \n                                    </div>\n                                    \n                                    ))}\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n          \n        </div>\n    )\n}"]},"metadata":{},"sourceType":"module"}