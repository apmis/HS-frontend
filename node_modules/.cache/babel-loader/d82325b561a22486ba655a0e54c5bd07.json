{"ast":null,"code":"import{Fragment as _Fragment}from\"react/jsx-runtime\";import _regeneratorRuntime from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _slicedToArray from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";/* eslint-disable */import React,{useState,useContext,useEffect,useRef}from'react';import client from'../../feathers';import{DebounceInput}from'react-debounce-input';import{useForm}from\"react-hook-form\";//import {useHistory} from 'react-router-dom'\nimport{UserContext,ObjectContext}from'../../context';import{toast}from'bulma-toast';import{format,formatDistanceToNowStrict}from'date-fns';import HmoClaimCreate from'./HmoClaimCreate';import PatientProfile from'../ClientMgt/PatientProfile';/* import {ProductCreate} from './Products' */ // eslint-disable-next-line\n//const searchfacility={};\nimport{Accordion,AccordionItem,AccordionItemHeading,AccordionItemState,AccordionItemButton,AccordionItemPanel}from'react-accessible-accordion';// Demo styles, see 'Styles' section below for some notes on use.\nimport'react-accessible-accordion/dist/fancy-example.css';//import BillPrescriptionCreate from './BillPrescriptionCreate';\nexport default function HMOauth(){//const {state}=useContext(ObjectContext) //,setState\n// eslint-disable-next-line\nvar _useState=useState(),_useState2=_slicedToArray(_useState,2),selectedProductEntry=_useState2[0],setSelectedProductEntry=_useState2[1];//const [showState,setShowState]=useState() //create|modify|detail\nvar _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];// eslint-disable-next-line\nvar _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),success=_useState6[0],setSuccess=_useState6[1];// eslint-disable-next-line\nvar _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),message=_useState8[0],setMessage=_useState8[1];var BillServ=client.service('bills');//const history = useHistory()\n// const {user,setUser} = useContext(UserContext)\nvar _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),facilities=_useState10[0],setFacilities=_useState10[1];// eslint-disable-next-line\nvar _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),selectedOrders=_useState12[0],setSelectedOrders=_useState12[1];//\n// eslint-disable-next-line\nvar _useContext=useContext(ObjectContext),state=_useContext.state,setState=_useContext.setState;// eslint-disable-next-line\nvar _useContext2=useContext(UserContext),user=_useContext2.user,setUser=_useContext2.setUser;return/*#__PURE__*/_jsx(\"section\",{className:\"section remPadTop\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"columns \",children:[/*#__PURE__*/_jsx(\"div\",{className:\"column is-6 \",children:/*#__PURE__*/_jsx(BillingList,{})}),/*#__PURE__*/_jsx(\"div\",{className:\"column is-6 \",children:state.financeModule.show==='detail'&&/*#__PURE__*/_jsx(HmoClaimCreate,{})})]})});}export function BillingList(){// const { register, handleSubmit, watch, errors } = useForm();\n// eslint-disable-next-line\nvar _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),error=_useState14[0],setError=_useState14[1];// eslint-disable-next-line\nvar _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),success=_useState16[0],setSuccess=_useState16[1];// eslint-disable-next-line\nvar _useState17=useState(\"\"),_useState18=_slicedToArray(_useState17,2),message=_useState18[0],setMessage=_useState18[1];var BillServ=client.service('bills');//const history = useHistory()\n// const {user,setUser} = useContext(UserContext)\nvar _useState19=useState([]),_useState20=_slicedToArray(_useState19,2),facilities=_useState20[0],setFacilities=_useState20[1];// eslint-disable-next-line\nvar _useState21=useState(),_useState22=_slicedToArray(_useState21,2),selectedDispense=_useState22[0],setSelectedDispense=_useState22[1];//\nvar _useState23=useState([]),_useState24=_slicedToArray(_useState23,2),selectedOrders=_useState24[0],setSelectedOrders=_useState24[1];// eslint-disable-next-line\nvar _useContext3=useContext(ObjectContext),state=_useContext3.state,setState=_useContext3.setState;// eslint-disable-next-line\nvar _useContext4=useContext(UserContext),user=_useContext4.user,setUser=_useContext4.setUser;var _useState25=useState(\"\"),_useState26=_slicedToArray(_useState25,2),selectedFinance=_useState26[0],setSelectedFinance=_useState26[1];var _useState27=useState(\"\"),_useState28=_slicedToArray(_useState27,2),expanded=_useState28[0],setExpanded=_useState28[1];var _useState29=useState(\"\"),_useState30=_slicedToArray(_useState29,2),oldClient=_useState30[0],setOldClient=_useState30[1];var handleSelectedClient=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(Client){var newClientModule;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:// await setSelectedClient(Client)\nnewClientModule={selectedClient:Client,show:'detail'};_context.next=3;return setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{ClientModule:newClientModule});});case 3:case\"end\":return _context.stop();}}},_callee);}));return function handleSelectedClient(_x){return _ref.apply(this,arguments);};}();var handleChoseClient=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(client,e,order){var newClient,newProductEntryModule;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setOldClient(client.clientname);newClient=client.clientname;if(oldClient!==newClient){//alert(\"New Client Onboard\")\n//remove all checked clientsly\nselectedOrders.forEach(function(el){return el.checked=\"\";});setSelectedOrders([]);}// console.log(e.target.checked)\norder.checked=e.target.checked;_context2.next=6;return handleSelectedClient(order.participantInfo.client);case 6:_context2.next=8;return setSelectedFinance(order);case 8:newProductEntryModule={selectedFinance:order,show:'detail',state:e.target.checked};_context2.next=11;return setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{financeModule:newProductEntryModule});});case 11:if(!e.target.checked){_context2.next=16;break;}_context2.next=14;return setSelectedOrders(function(prevstate){return prevstate.concat(order);});case 14:_context2.next=17;break;case 16:setSelectedOrders(function(prevstate){return prevstate.filter(function(el){return el._id!==order._id;});});case 17:case\"end\":return _context2.stop();}}},_callee2);}));return function handleChoseClient(_x2,_x3,_x4){return _ref2.apply(this,arguments);};}();var handleMedicationRow=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(ProductEntry,e){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:case\"end\":return _context3.stop();}}},_callee3);}));return function handleMedicationRow(_x5,_x6){return _ref3.apply(this,arguments);};}();var handleCreateNew=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var newProductEntryModule;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:newProductEntryModule={selectedDispense:{},show:'create'};_context4.next=3;return setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{DispenseModule:newProductEntryModule});});case 3:case\"end\":return _context4.stop();}}},_callee4);}));return function handleCreateNew(){return _ref4.apply(this,arguments);};}();var handleSearch=function handleSearch(val){var field='name';//console.log(val)\nBillServ.find({query:{'participantInfo.paymentmode.detail.principalName':{$regex:val,$options:'i'},/*  $or:[\n                {\n           \n                } ,\n                {\n            'orderInfo.orderObj.clientname': {\n                        $regex:val,\n                        $options:'i'\n                    \n                    }\n                }\n                ], */ //order_category:\"Prescription\",\n$or:[{'participantInfo.paymentmode.type':\"HMO\"},{'participantInfo.paymentmode.type':\"Company Cover\"}],'participantInfo.billingFacility':user.currentEmployee.facilityDetail._id,billing_status:{$ne:\"Fully Paid\"},//set to not equal to \"fully paid\" // need to set this finally\n// storeId:state.StoreModule.selectedStore._id,\n//facility:user.currentEmployee.facilityDetail._id || \"\",\n$limit:100,$sort:{createdAt:-1}}}).then(function(res){console.log(res);setFacilities(res.groupedOrder);setMessage(\" ProductEntry  fetched successfully\");setSuccess(true);}).catch(function(err){// console.log(err)\nsetMessage(\"Error fetching ProductEntry, probable network issues \"+err);setError(true);});};var getFacilities=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){var findProductEntry;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return BillServ.find({query:{$or:[{'participantInfo.paymentmode.type':\"HMO Cover\"},{'participantInfo.paymentmode.type':\"Company Cover\"}],'participantInfo.billingFacility':user.currentEmployee.facilityDetail._id,billing_status:{$ne:\"Fully Paid\"},// need to set this finally\n//storeId:state.StoreModule.selectedStore._id,\n//clientId:state.ClientModule.selectedClient._id,\n$limit:100,$sort:{createdAt:-1}}});case 2:findProductEntry=_context5.sent;console.log(\"updatedorder\",findProductEntry.groupedOrder);_context5.next=6;return setFacilities(findProductEntry.groupedOrder);case 6:case\"end\":return _context5.stop();}}},_callee5);}));return function getFacilities(){return _ref5.apply(this,arguments);};}();var handleRow=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(Client,e){return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:case\"end\":return _context6.stop();}}},_callee6);}));return function handleRow(_x7,_x8){return _ref6.apply(this,arguments);};}();//1.consider using props for global data\nuseEffect(function(){// console.log(\"started\")\ngetFacilities();BillServ.on('created',function(obj){return getFacilities();});BillServ.on('updated',function(obj){return getFacilities();});BillServ.on('patched',function(obj){return getFacilities();});BillServ.on('removed',function(obj){return getFacilities();});return function(){};},[]);useEffect(function(){//changes with checked box\n// console.log(selectedOrders)\nreturn function(){};},[selectedOrders]);useEffect(function(){if(state.financeModule.show===\"create\"){selectedOrders.forEach(function(el){return el.checked=\"\";});setSelectedOrders([]);}return function(){};},[state.financeModule.show]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"level\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"level-left\",children:/*#__PURE__*/_jsx(\"div\",{className:\"level-item\",children:/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left  \",children:[/*#__PURE__*/_jsx(DebounceInput,{className:\"input is-small \",type:\"text\",placeholder:\"Search Bills\",minLength:3,debounceTimeout:400,onChange:function onChange(e){return handleSearch(e.target.value);}}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-search\"})})]})})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"level-item\",children:[\" \",/*#__PURE__*/_jsx(\"span\",{className:\"is-size-6 has-text-weight-medium\",children:\"Unpaid Bills \"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\" pullup \",children:/*#__PURE__*/_jsx(\"div\",{className:\" is-fullwidth vscrollable pr-1\",children:/*#__PURE__*/_jsx(Accordion,{allowZeroExpanded:true,children:facilities.map(function(Clinic,i){return/*#__PURE__*/_jsxs(AccordionItem,{children:[/*#__PURE__*/_jsx(AccordionItemHeading,{children:/*#__PURE__*/_jsx(AccordionItemButton,{children:/*#__PURE__*/_jsxs(\"strong\",{children:[\" \",i+1,\" \",Clinic.bills[0].order[0].participantInfo.client.firstname,\"  \",Clinic.bills[0].order[0].participantInfo.client.lastname,\" \"]})})}),/*#__PURE__*/_jsx(AccordionItemPanel,{children:/*#__PURE__*/_jsx(\"div\",{className:\" is-fullwidth vscrollable pr-1\",children:/*#__PURE__*/_jsx(Accordion,{allowZeroExpanded:true,children:Clinic.bills.map(function(category,i){return/*#__PURE__*/_jsxs(AccordionItem,{children:[/*#__PURE__*/_jsx(AccordionItemHeading,{children:/*#__PURE__*/_jsxs(AccordionItemButton,{children:[category.catName,\" with \",category.order.length,\" Unpaid bills. \"]})}),/*#__PURE__*/_jsx(AccordionItemPanel,{children:/*#__PURE__*/_jsxs(\"table\",{className:\"table is-striped  is-hoverable is-fullwidth is-scrollable mr-2\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Serial No\",children:\"S/No\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Date\",children:\"Date\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Description\",children:\"Description\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Status\",children:\"Status\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Amount\",children:\"Amount\"})})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:category.order.map(function(order,i){return/*#__PURE__*/_jsxs(\"tr\",{/*  onClick={()=>handleMedicationRow(order)} */className:order._id===((selectedFinance===null||selectedFinance===void 0?void 0:selectedFinance._id)||null)?\"is-selected\":\"\",children:[/*#__PURE__*/_jsxs(\"th\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:order._id,onChange:function onChange(e){return handleChoseClient(Clinic,e,order);},checked:order.checked}),\"  \",i+1]}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{children:format(new Date(order.createdAt),'dd-MM-yy')})}),\" \",/*#__PURE__*/_jsx(\"th\",{children:order.serviceInfo.name}),/*#__PURE__*/_jsx(\"td\",{children:order.billing_status}),/*#__PURE__*/_jsx(\"td\",{children:order.billing_status===\"Unpaid\"?order.serviceInfo.amount:order.paymentInfo.balance})]},order._id);})})]})})]},i);})})})})]},Clinic.client_id);})})})})]});}export function DispenseDetail(){//const { register, handleSubmit, watch, setValue } = useForm(); //errors,\n// eslint-disable-next-line\nvar _useState31=useState(false),_useState32=_slicedToArray(_useState31,2),error=_useState32[0],setError=_useState32[1];//, \nvar _useState33=useState(\"\"),_useState34=_slicedToArray(_useState33,2),selectedMedication=_useState34[0],setSelectedMedication=_useState34[1];var _useState35=useState(\"\"),_useState36=_slicedToArray(_useState35,2),currentOrder=_useState36[0],setCurrentOrder=_useState36[1];// eslint-disable-next-line\nvar _useState37=useState(\"\"),_useState38=_slicedToArray(_useState37,2),message=_useState38[0],setMessage=_useState38[1];//,\n//const ProductEntryServ=client.service('/ProductEntry')\n//const history = useHistory()\n//const {user,setUser} = useContext(UserContext)\nvar _useContext5=useContext(ObjectContext),state=_useContext5.state,setState=_useContext5.setState;var BillServ=client.service('order');/* const [ProductEntry, setProductEntry] = useState(\"\")\n    const [facilities, setFacilities] = useState(\"\") */var ProductEntry=state.DispenseModule.selectedDispense;//const facilities=ProductEntry.orders\nvar handleRow=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(ProductEntry){var newProductEntryModule;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return setSelectedMedication(ProductEntry);case 2:newProductEntryModule={selectedMedication:ProductEntry,show:'detail'};_context7.next=5;return setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{medicationModule:newProductEntryModule});});case 5:case\"end\":return _context7.stop();}}},_callee7);}));return function handleRow(_x9){return _ref7.apply(this,arguments);};}();var handleEdit=/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(ProductEntry){var newProductEntryModule;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:newProductEntryModule={selectedDispense:ProductEntry,show:'modify'};_context8.next=3;return setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{DispenseModule:newProductEntryModule});});case 3:case\"end\":return _context8.stop();}}},_callee8);}));return function handleEdit(_x10){return _ref8.apply(this,arguments);};}();useEffect(function(){var client1=state.currentClients.find(function(el){return JSON.stringify(el.client_id)===JSON.stringify(state.DispenseModule.selectedDispense);});setCurrentOrder(client1);// console.log(client1)\nreturn function(){};},[]);/*  \n     const setprod=async()=>{\n        await setProductEntry(state.DispenseModule.selectedDispense)\n    } */useEffect(function(){/* BillServ.on('created', (obj)=>getFacilities())\n        BillServ.on('updated', (obj)=>getFacilities())\n       \n        BillServ.on('removed', (obj)=>getFacilities()) */BillServ.on('patched',function(obj){//update state.DispenseModule.selectedDispense\n// console.log(obj.clientId)\n// console.log(\"currentClients\",state.currentClients)\nvar current1=state.currentClients.find(function(el){return JSON.stringify(el.client_id)===JSON.stringify(obj.clientId);});setCurrentOrder(current1);// console.log(\"currentone\",current1)\n});return function(){};},[]);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"card \",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsx(\"p\",{className:\"card-header-title\",children:\"Dispense Details\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-content vscrollable\",children:/*#__PURE__*/_jsx(\"div\",{className:\"table-container pullup \",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table is-striped is-narrow is-hoverable is-fullwidth is-scrollable \",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Serial No\",children:\"S/No\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Date\",children:\"Date\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Order\",children:\"Medication\"})}),/*#__PURE__*/_jsx(\"th\",{children:\"Fulfilled\"}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Status\",children:\"Status\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Requesting Physician\",children:\"Requesting Physician\"})})]})}),/*#__PURE__*/_jsx(\"tfoot\",{}),/*#__PURE__*/_jsx(\"tbody\",{children:state.DispenseModule.selectedDispense.orders.map(function(order,i){return/*#__PURE__*/_jsxs(\"tr\",{onClick:function onClick(){return handleRow(order);},className:order._id===((selectedMedication===null||selectedMedication===void 0?void 0:selectedMedication._id)||null)?\"is-selected\":\"\",children:[/*#__PURE__*/_jsx(\"th\",{children:i+1}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{children:format(new Date(order.createdAt),'dd-MM-yy')})}),\" \",/*#__PURE__*/_jsx(\"th\",{children:order.order}),/*#__PURE__*/_jsx(\"td\",{children:order.fulfilled===\"True\"?\"Yes\":\"No\"}),/*#__PURE__*/_jsx(\"td\",{children:order.order_status}),/*#__PURE__*/_jsx(\"td\",{children:order.requestingdoctor_Name})]},order._id);})})]})})})]})});}","map":{"version":3,"sources":["/home/mfybaby/Documents/HealthStack2/HS-frontend/src/components/Finance/HMOauth.js"],"names":["React","useState","useContext","useEffect","useRef","client","DebounceInput","useForm","UserContext","ObjectContext","toast","format","formatDistanceToNowStrict","HmoClaimCreate","PatientProfile","Accordion","AccordionItem","AccordionItemHeading","AccordionItemState","AccordionItemButton","AccordionItemPanel","HMOauth","selectedProductEntry","setSelectedProductEntry","error","setError","success","setSuccess","message","setMessage","BillServ","service","facilities","setFacilities","selectedOrders","setSelectedOrders","state","setState","user","setUser","financeModule","show","BillingList","selectedDispense","setSelectedDispense","selectedFinance","setSelectedFinance","expanded","setExpanded","oldClient","setOldClient","handleSelectedClient","Client","newClientModule","selectedClient","prevstate","ClientModule","handleChoseClient","e","order","clientname","newClient","forEach","el","checked","target","participantInfo","newProductEntryModule","concat","filter","_id","handleMedicationRow","ProductEntry","handleCreateNew","DispenseModule","handleSearch","val","field","find","query","$regex","$options","$or","currentEmployee","facilityDetail","billing_status","$ne","$limit","$sort","createdAt","then","res","console","log","groupedOrder","catch","err","getFacilities","findProductEntry","handleRow","on","obj","value","map","Clinic","i","bills","firstname","lastname","category","catName","length","Date","serviceInfo","name","amount","paymentInfo","balance","client_id","DispenseDetail","selectedMedication","setSelectedMedication","currentOrder","setCurrentOrder","medicationModule","handleEdit","client1","currentClients","JSON","stringify","current1","clientId","orders","fulfilled","order_status","requestingdoctor_Name"],"mappings":"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","sourcesContent":["/* eslint-disable */\nimport React, {useState,useContext, useEffect,useRef} from 'react'\nimport client from '../../feathers'\nimport {DebounceInput} from 'react-debounce-input';\nimport { useForm } from \"react-hook-form\";\n//import {useHistory} from 'react-router-dom'\nimport {UserContext,ObjectContext} from '../../context'\nimport {toast} from 'bulma-toast'\nimport {format, formatDistanceToNowStrict } from 'date-fns'\nimport HmoClaimCreate from './HmoClaimCreate'\nimport PatientProfile from '../ClientMgt/PatientProfile'\n/* import {ProductCreate} from './Products' */\n// eslint-disable-next-line\n//const searchfacility={};\nimport {\n    Accordion,\n    AccordionItem,\n    AccordionItemHeading,\n    AccordionItemState,\n    AccordionItemButton,\n    AccordionItemPanel,\n} from 'react-accessible-accordion';\n\n// Demo styles, see 'Styles' section below for some notes on use.\nimport 'react-accessible-accordion/dist/fancy-example.css';\n//import BillPrescriptionCreate from './BillPrescriptionCreate';\n\n\n\nexport default function HMOauth() {\n    //const {state}=useContext(ObjectContext) //,setState\n    // eslint-disable-next-line\n    const [selectedProductEntry,setSelectedProductEntry]=useState()\n    //const [showState,setShowState]=useState() //create|modify|detail\n    const [error, setError] =useState(false)\n    // eslint-disable-next-line\n   const [success, setSuccess] =useState(false)\n    // eslint-disable-next-line\n  const [message, setMessage] = useState(\"\") \n   const BillServ=client.service('bills')\n   //const history = useHistory()\n  // const {user,setUser} = useContext(UserContext)\n   const [facilities,setFacilities]=useState([])\n    // eslint-disable-next-line\n  const [selectedOrders, setSelectedOrders]=useState([]) //\n   // eslint-disable-next-line\n   const {state,setState}=useContext(ObjectContext)\n   // eslint-disable-next-line\n   const {user,setUser}=useContext(UserContext)\n    \n    return(\n        <section className= \"section remPadTop\">\n           {/*  <div className=\"level\">\n            <div className=\"level-item\"> <span className=\"is-size-6 has-text-weight-medium\">ProductEntry  Module</span></div>\n            </div> */}\n            <div className=\"columns \">\n                <div className=\"column is-6 \">\n                    <BillingList />\n                    </div>\n              \n                <div className=\"column is-6 \">\n                \n                {(state.financeModule.show ==='detail')&& <HmoClaimCreate />}\n                </div>\n               {/*  <div className=\"column is-3 \">\n                {(state.financeModule.show ==='detail')&&<PatientProfile />}\n                </div> */}\n\n            </div>                            \n            </section>\n       \n    )\n    \n}\n\nexport function BillingList(){\n   // const { register, handleSubmit, watch, errors } = useForm();\n    // eslint-disable-next-line\n    const [error, setError] =useState(false)\n     // eslint-disable-next-line\n    const [success, setSuccess] =useState(false)\n     // eslint-disable-next-line\n   const [message, setMessage] = useState(\"\") \n   const BillServ=client.service('bills')\n    //const history = useHistory()\n   // const {user,setUser} = useContext(UserContext)\n    const [facilities,setFacilities]=useState([])\n     // eslint-disable-next-line\n   const [selectedDispense, setSelectedDispense]=useState() //\n   const [selectedOrders, setSelectedOrders]=useState([]) \n    // eslint-disable-next-line\n    const {state,setState}=useContext(ObjectContext)\n    // eslint-disable-next-line\n    const {user,setUser}=useContext(UserContext)\n    const [selectedFinance, setSelectedFinance] =useState(\"\")\n    const [expanded, setExpanded] =useState(\"\")\n    const [oldClient, setOldClient] =useState(\"\")\n\n    const handleSelectedClient= async(Client)=>{\n        // await setSelectedClient(Client)\n         const    newClientModule={\n             selectedClient:Client,\n             show :'detail'\n         }\n        await setState((prevstate)=>({...prevstate, ClientModule:newClientModule}))\n     }\n\n    const handleChoseClient= async(client,e, order)=>{\n        setOldClient(client.clientname)\n        let newClient=client.clientname\n        if(oldClient!==newClient){\n            //alert(\"New Client Onboard\")\n            //remove all checked clientsly\n            selectedOrders.forEach(el=>el.checked=\"\")\n            setSelectedOrders([])\n        }\n\n       // console.log(e.target.checked)\n        order.checked=e.target.checked\n        await handleSelectedClient(order.participantInfo.client)\n        //handleMedicationRow(order)\n        await setSelectedFinance(order)\n        const    newProductEntryModule={\n            selectedFinance:order,\n            show :'detail',\n            state:e.target.checked\n        }\n      await setState((prevstate)=>({...prevstate, financeModule:newProductEntryModule}))\n      \n      //set of checked items\n      if (e.target.checked){\n        await setSelectedOrders((prevstate)=>(prevstate.concat(order)))\n      }else{\n        setSelectedOrders( prevstate=>prevstate.filter(el=>el._id!==order._id))\n      }\n    \n       // console.log(selectedOrders)\n    }\n    const handleMedicationRow= async(ProductEntry,e)=>{ //handle selected single order\n        //console.log(\"b4\",state)\n       // alert(\"Header touched\")\n    \n        //console.log(\"handlerow\",ProductEntry)\n       /* alert(ProductEntry.checked)*/\n       /*  ProductEntry.checked=!ProductEntry.checked */\n    \n       /*  await setSelectedFinance(ProductEntry)\n    \n        const    newProductEntryModule={\n            selectedFinance:ProductEntry,\n            show :'detail'\n\n        }\n      await setState((prevstate)=>({...prevstate, financeModule:newProductEntryModule})) */\n       //console.log(state)\n      // ProductEntry.show=!ProductEntry.show\n    \n    }\n\n    const handleCreateNew = async()=>{\n        const    newProductEntryModule={\n            selectedDispense:{},\n            show :'create'\n            }\n       await setState((prevstate)=>({...prevstate, DispenseModule:newProductEntryModule}))\n       //console.log(state)\n        \n\n    }\n  \n\n    const handleSearch=(val)=>{\n       const field='name'\n       //console.log(val)\n       BillServ.find({query: {\n        'participantInfo.paymentmode.detail.principalName': {\n            $regex:val,\n            $options:'i'\n        \n        },\n           /*  $or:[\n                {\n           \n                } ,\n                {\n            'orderInfo.orderObj.clientname': {\n                        $regex:val,\n                        $options:'i'\n                    \n                    }\n                }\n                ], */\n                \n                //order_category:\"Prescription\",\n             $or:[\n                    {\n                       'participantInfo.paymentmode.type':\"HMO\"\n                    },\n                    {\n                       'participantInfo.paymentmode.type':\"Company Cover\"\n                    }\n                ],\n                'participantInfo.billingFacility': user.currentEmployee.facilityDetail._id,\n                billing_status:{\n                    $ne:\"Fully Paid\"\n                }, //set to not equal to \"fully paid\" // need to set this finally\n               // storeId:state.StoreModule.selectedStore._id,\n               //facility:user.currentEmployee.facilityDetail._id || \"\",\n                $limit:100,\n                $sort: {\n                    createdAt: -1\n                  }\n                    }}).then((res)=>{\n                console.log(res)\n               setFacilities(res.groupedOrder)\n                setMessage(\" ProductEntry  fetched successfully\")\n                setSuccess(true) \n            })\n            .catch((err)=>{\n               // console.log(err)\n                setMessage(\"Error fetching ProductEntry, probable network issues \"+ err )\n                setError(true)\n            })\n        }\n    const getFacilities= async()=>{\n       \n            // console.log(\"here b4 server\")\n    const findProductEntry= await BillServ.find(\n            {query: {\n                $or:[\n                    {\n                       'participantInfo.paymentmode.type':\"HMO Cover\"\n                    },\n                    {\n                       'participantInfo.paymentmode.type':\"Company Cover\"\n                    }\n                ],\n                'participantInfo.billingFacility': user.currentEmployee.facilityDetail._id,\n                billing_status:{\n                    $ne:\"Fully Paid\"\n                },  // need to set this finally\n                //storeId:state.StoreModule.selectedStore._id,\n                //clientId:state.ClientModule.selectedClient._id,\n                $limit:100,\n                $sort: {\n                    createdAt: -1\n                }\n                }})\n\n            console.log(\"updatedorder\", findProductEntry.groupedOrder)\n            await setFacilities(findProductEntry.groupedOrder)\n          //  await setState((prevstate)=>({...prevstate, currentClients:findProductEntry.groupedOrder}))\n            }   \n    const handleRow= async(Client,e)=>{\n           // alert(expanded)\n              \n            }\n    //1.consider using props for global data\n    useEffect(() => {\n        // console.log(\"started\")\n            getFacilities()\n            BillServ.on('created', (obj)=>getFacilities())\n            BillServ.on('updated', (obj)=>getFacilities())\n            BillServ.on('patched', (obj)=>getFacilities())\n            BillServ.on('removed', (obj)=>getFacilities())\n            return () => {\n            \n            }\n            },[])\n\n    useEffect(() => {\n        //changes with checked box\n       // console.log(selectedOrders)\n        \n        return () => {\n            \n        }\n    }, [selectedOrders])\n\n    useEffect(() => {\n       if (state.financeModule.show===\"create\"){\n        selectedOrders.forEach(el=>el.checked=\"\")\n        setSelectedOrders([])\n\n       }\n        return () => {\n           \n        }\n    }, [state.financeModule.show])\n   \n \n\n    return(     \n            <>  \n                <div className=\"level\">\n                    <div className=\"level-left\">\n                        <div className=\"level-item\">\n                            <div className=\"field\">\n                                <p className=\"control has-icons-left  \">\n                                    <DebounceInput className=\"input is-small \" \n                                        type=\"text\" placeholder=\"Search Bills\"\n                                        minLength={3}\n                                        debounceTimeout={400}\n                                        onChange={(e)=>handleSearch(e.target.value)} />\n                                    <span className=\"icon is-small is-left\">\n                                        <i className=\"fas fa-search\"></i>\n                                    </span>\n                                </p>\n                            </div>\n                        </div>\n                    </div>\n                    <div className=\"level-item\"> <span className=\"is-size-6 has-text-weight-medium\">Unpaid Bills </span></div>\n                     {/* <div className=\"level-right\">\n                       <div className=\"level-item\"> \n                            <div className=\"level-item\"><div className=\"button is-success is-small\" onClick={handleCreateNew}>New</div></div>\n                        </div> \n                    </div>*/}\n\n                </div>\n                <div className=\" pullup \">\n                    <div className=\" is-fullwidth vscrollable pr-1\">   \n                    <Accordion allowZeroExpanded >\n                        {facilities.map((Clinic, i)=>(\n                            <AccordionItem  key={Clinic.client_id}  >\n                               <AccordionItemHeading >\n                                    <AccordionItemButton  >\n                                    {/* <input type = \"checkbox\" name={Clinic.client_id}  />   */}\n                                    <strong> {i+1} {Clinic.bills[0].order[0].participantInfo.client.firstname}  {Clinic.bills[0].order[0].participantInfo.client.lastname}{/* with {Clinic.bills.length} Unpaid bills. */} {/* Grand Total amount: N */}</strong> \n                                    </AccordionItemButton>\n                                </AccordionItemHeading>\n                                <AccordionItemPanel>\n                                    <div className=\" is-fullwidth vscrollable pr-1\">   \n                                        <Accordion allowZeroExpanded>\n                                            {Clinic.bills.map((category, i)=>(\n                                                <AccordionItem  key={i} >\n                                                    <AccordionItemHeading >\n                                                    <AccordionItemButton  >\n                                                    {/* <input type = \"checkbox\" name={Clinic.client_id} onChange={(e)=>handleMedicationRow(Clinic,e)} /> */}  \n                                                         {category.catName} with {category.order.length} Unpaid bills. {/* Total amount: N */}\n                                                    </AccordionItemButton>\n                                                    </AccordionItemHeading>\n                                                    <AccordionItemPanel>\n                                                        <table className=\"table is-striped  is-hoverable is-fullwidth is-scrollable mr-2\">\n                                                                <thead>\n                                                                    <tr>\n                                                                        <th><abbr title=\"Serial No\">S/No</abbr></th>\n                                                                        <th><abbr title=\"Date\">Date</abbr></th>\n                                                                        <th><abbr title=\"Description\">Description</abbr></th>\n                                                                    {/*  <th>Fulfilled</th> */}\n                                                                        <th><abbr title=\"Status\">Status</abbr></th>\n                                                                        <th><abbr title=\"Amount\">Amount</abbr></th>\n                                                                    </tr>\n                                                                </thead>\n                                                                <tbody>\n                                                     { category.order.map((order, i)=>(\n\n                                                        <tr key={order._id}  /*  onClick={()=>handleMedicationRow(order)} */  className={order._id===(selectedFinance?._id||null)?\"is-selected\":\"\"}>                                         \n                                                        <th><input type = \"checkbox\" name={order._id} onChange={(e)=>handleChoseClient(Clinic,e, order)}  checked={order.checked}/>  {i+1}</th>\n                                                        <td><span>{format(new Date(order.createdAt),'dd-MM-yy')}</span></td> {/* {formatDistanceToNowStrict(new Date(ProductEntry.createdAt),{addSuffix: true})} <br/> */} \n                                                        <th>{order.serviceInfo.name}</th>\n                                                       {/*  <td>{order.fulfilled===\"True\"?\"Yes\":\"No\"}</td> */}\n                                                        <td>{order.billing_status}</td>\n                                                        <td>{(order.billing_status===\"Unpaid\")?order.serviceInfo.amount:order.paymentInfo.balance}</td>\n                                                        </tr>\n                                                ))}\n                                            </tbody>\n                                            </table>\n\n                                                    </AccordionItemPanel>                                          \n                                                </AccordionItem>\n                                            ))}\n                                        </Accordion>\n                                    </div>\n                                </AccordionItemPanel>                    \n                            </AccordionItem >\n                        ))}\n                    </Accordion >\n                    </div>  \n                </div>\n            </>          \n    )\n    }\n\n\nexport function DispenseDetail(){\n    //const { register, handleSubmit, watch, setValue } = useForm(); //errors,\n     // eslint-disable-next-line\n    const [error, setError] =useState(false) //, \n    const [selectedMedication, setSelectedMedication] =useState(\"\")\n    const [currentOrder, setCurrentOrder] =useState(\"\")\n     // eslint-disable-next-line\n    const [message, setMessage] = useState(\"\") //,\n    //const ProductEntryServ=client.service('/ProductEntry')\n    //const history = useHistory()\n    //const {user,setUser} = useContext(UserContext)\n    const {state,setState} = useContext(ObjectContext)\n    const BillServ=client.service('order')\n    /* const [ProductEntry, setProductEntry] = useState(\"\")\n    const [facilities, setFacilities] = useState(\"\") */\n\n let ProductEntry =state.DispenseModule.selectedDispense\n   //const facilities=ProductEntry.orders\n\n   const handleRow= async(ProductEntry)=>{\n    //console.log(\"b4\",state)\n\n    //console.log(\"handlerow\",ProductEntry)\n\n    await setSelectedMedication(ProductEntry)\n\n    const    newProductEntryModule={\n        selectedMedication:ProductEntry,\n        show :'detail'\n    }\n  await setState((prevstate)=>({...prevstate, medicationModule:newProductEntryModule}))\n   //console.log(state)\n  // ProductEntry.show=!ProductEntry.show\n\n}\n\n    const handleEdit= async(ProductEntry)=>{\n        const    newProductEntryModule={\n            selectedDispense:ProductEntry,\n            show :'modify'\n        }\n       await setState((prevstate)=>({...prevstate, DispenseModule:newProductEntryModule}))\n       //console.log(state)\n       \n    }\n\n    useEffect(() => {\n\n\n      const client1=  state.currentClients.find(el=>{\n            return JSON.stringify(el.client_id)===JSON.stringify(state.DispenseModule.selectedDispense)\n        })\n\n    setCurrentOrder(client1)\n   // console.log(client1)\n        return () => {\n        \n        }\n    }, [])\n   \n\n /*  \n     const setprod=async()=>{\n        await setProductEntry(state.DispenseModule.selectedDispense)\n    } */\n \n    useEffect(() => {\n        /* BillServ.on('created', (obj)=>getFacilities())\n        BillServ.on('updated', (obj)=>getFacilities())\n       \n        BillServ.on('removed', (obj)=>getFacilities()) */\n        BillServ.on('patched',  (obj)=>{\n            //update state.DispenseModule.selectedDispense\n           // console.log(obj.clientId)\n           // console.log(\"currentClients\",state.currentClients)\n           const current1=state.currentClients.find(el=>(JSON.stringify(el.client_id)===JSON.stringify(obj.clientId)))\n           setCurrentOrder(current1)\n          // console.log(\"currentone\",current1)\n        })\n      \n        return () => {\n         \n        }\n    },[])\n \n    return (\n        <>\n        <div className=\"card \">\n            <div className=\"card-header\">\n                <p className=\"card-header-title\">\n                    Dispense Details\n                </p>\n            </div>\n            <div className=\"card-content vscrollable\">\n            {/* {JSON.stringify(ProductEntry.orders,2,10)} */}\n            <div className=\"table-container pullup \">\n                                <table className=\"table is-striped is-narrow is-hoverable is-fullwidth is-scrollable \">\n                                    <thead>\n                                        <tr>\n                                        <th><abbr title=\"Serial No\">S/No</abbr></th>\n                                        {/* <th><abbr title=\"Client Name\">Client Name</abbr></th> */}\n                                        {/* <th><abbr title=\"Number of Orders\"># of Medication</abbr></th> */}\n                                        <th><abbr title=\"Date\">Date</abbr></th>\n                                        <th><abbr title=\"Order\">Medication</abbr></th>\n                                        <th>Fulfilled</th>\n                                        <th><abbr title=\"Status\">Status</abbr></th>\n                                        <th><abbr title=\"Requesting Physician\">Requesting Physician</abbr></th>\n                                        \n                                        {/* <th><abbr title=\"Actions\">Actions</abbr></th> */}\n                                        </tr>\n                                    </thead>\n                                    <tfoot>\n                                        \n                                    </tfoot>\n                                    <tbody>\n                                        {state.DispenseModule.selectedDispense.orders.map((order, i)=>(\n\n                                            <tr key={order._id} onClick={()=>handleRow(order)} className={order._id===(selectedMedication?._id||null)?\"is-selected\":\"\"}>\n                                            \n                                               <th>{i+1}</th>\n                                                 {/* <td>{ProductEntry.clientname}</td> \n                                                <td>{ProductEntry.orders.length}</td> */}\n                                           \n                                           \n                                            <td><span>{format(new Date(order.createdAt),'dd-MM-yy')}</span></td> {/* {formatDistanceToNowStrict(new Date(ProductEntry.createdAt),{addSuffix: true})} <br/> */} \n                                          <th>{order.order}</th>\n                                            <td>{order.fulfilled===\"True\"?\"Yes\":\"No\"}</td>\n                                            <td>{order.order_status}</td>\n                                            <td>{order.requestingdoctor_Name}</td>\n                                            \n                                           {/*  <td><span className=\"showAction\"  >...</span></td> */}\n                                           \n                                            </tr>\n\n                                        ))}\n                                    </tbody>\n                                    </table>\n                        \n                </div>              \n               \n            </div>\n        </div>\n        </>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}