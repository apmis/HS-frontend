{"ast":null,"code":"import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _slicedToArray from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useContext,useEffect,useRef}from'react';import client from'../../feathers';import{DebounceInput}from'react-debounce-input';import{useForm}from\"react-hook-form\";//import {DocumentClassList} from './DocumentClass'\n//import {useHistory} from 'react-router-dom'\nimport{UserContext,ObjectContext}from'../../context';import{toast}from'bulma-toast';export default function ModuleList(_ref){var handlecloseModal=_ref.handlecloseModal;var _useForm=useForm(),register=_useForm.register,handleSubmit=_useForm.handleSubmit,setValue=_useForm.setValue;//, watch, errors, reset \nvar _useState=useState(false),_useState2=_slicedToArray(_useState,2),error=_useState2[0],setError=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),success=_useState4[0],setSuccess=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),message=_useState6[0],setMessage=_useState6[1];// eslint-disable-next-line\nvar _useState7=useState(),_useState8=_slicedToArray(_useState7,2),facility=_useState8[0],setFacility=_useState8[1];var EmployeeServ=client.service('employee');//const history = useHistory()\nvar _useContext=useContext(UserContext),user=_useContext.user;//,setUser\n// eslint-disable-next-line\nvar _useContext2=useContext(ObjectContext),state=_useContext2.state;var draftDoc={};draftDoc=state.EmployeeModule.selectedEmployee;// console.log(draftDoc)\nvar mList=[\"Client\",\"Clinic\",\"Ward\",\"Laboratory\",\"Pharmacy\",\"Radiology\",\"Inventory\",\"Finance\",\"Managed Care\",\"Theatre\",\"Epidemiology\",\"Admin\",\"Bill Client\",\"Adjust Price\"];//\"Frontdesk\",\n//state.DocumentClassModule.selectedDocumentClass.name\nuseEffect(function(){//  console.log(draftDoc.roles,\"loading\")\nObject.entries(draftDoc).map(function(_ref2,i){var _ref3=_slicedToArray(_ref2,2),keys=_ref3[0],value=_ref3[1];return setValue(keys,value,{shouldValidate:true,shouldDirty:true});});return function(){};});useEffect(function(){draftDoc=state.EmployeeModule.selectedEmployee;return function(){};},[state.EmployeeModule.selectedEmployee]);var onSubmit=function onSubmit(data,e){e.preventDefault();setMessage(\"\");setError(false);setSuccess(false);console.log(data);var confirm=window.confirm(\"You are about to update roles for the employee ?\");if(confirm){EmployeeServ.patch(draftDoc._id,data)// draftDoc._id\n.then(function(res){//console.log(JSON.stringify(res))\ne.target.reset();/*  setMessage(\"Created Client successfully\") */setSuccess(true);toast({message:'Roles updated succesfully',type:'is-success',dismissible:true,pauseOnHover:true});setSuccess(false);draftDoc={};handlecloseModal();}).catch(function(err){console.log(err);toast({message:'Error updating Roles'+err,type:'is-danger',dismissible:true,pauseOnHover:true});});}};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"card \",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsx(\"p\",{className:\"card-header-title\",children:\"Choose Modules\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-content vscrollable remPad1\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field ml-3 \",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"mr-2 \",children:[\" \",/*#__PURE__*/_jsx(\"b\",{children:\"Modules:\"})]}),mList.map(function(c,i){return/*#__PURE__*/_jsxs(\"label\",{className:\" is-small\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",value:c,name:\"roles\",ref:register}),c+\" \"]},c);})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"field  is-grouped mt-2\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"control\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"button is-success is-small\",children:\"Save\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"control\",children:/*#__PURE__*/_jsx(\"button\",{type:\"reset\",className:\"button is-warning is-small\",children:\"Cancel\"})})]})]})})]})});}","map":{"version":3,"sources":["/home/mfybaby/Documents/HealthStack2/HS-frontend/src/components/facility/ModuleList.js"],"names":["React","useState","useContext","useEffect","useRef","client","DebounceInput","useForm","UserContext","ObjectContext","toast","ModuleList","handlecloseModal","register","handleSubmit","setValue","error","setError","success","setSuccess","message","setMessage","facility","setFacility","EmployeeServ","service","user","state","draftDoc","EmployeeModule","selectedEmployee","mList","Object","entries","map","i","keys","value","shouldValidate","shouldDirty","onSubmit","data","e","preventDefault","console","log","confirm","window","patch","_id","then","res","target","reset","type","dismissible","pauseOnHover","catch","err","c"],"mappings":"oTAAA,MAAOA,CAAAA,KAAP,EAAeC,QAAf,CAAwBC,UAAxB,CAAoCC,SAApC,CAA8CC,MAA9C,KAA2D,OAA3D,CACA,MAAOC,CAAAA,MAAP,KAAmB,gBAAnB,CACA,OAAQC,aAAR,KAA4B,sBAA5B,CACA,OAASC,OAAT,KAAwB,iBAAxB,CACA;AACA;AACA,OAAQC,WAAR,CAAoBC,aAApB,KAAwC,eAAxC,CACA,OAAQC,KAAR,KAAoB,aAApB,CAEA,cAAe,SAASC,CAAAA,UAAT,MAAwC,IAAnBC,CAAAA,gBAAmB,MAAnBA,gBAAmB,cAERL,OAAO,EAFC,CAE3CM,QAF2C,UAE3CA,QAF2C,CAEjCC,YAFiC,UAEjCA,YAFiC,CAEpBC,QAFoB,UAEpBA,QAFoB,CAEG;AAFH,cAG1Bd,QAAQ,CAAC,KAAD,CAHkB,wCAG5Ce,KAH4C,eAGrCC,QAHqC,8BAItBhB,QAAQ,CAAC,KAAD,CAJc,yCAI5CiB,OAJ4C,eAInCC,UAJmC,8BAKtBlB,QAAQ,CAAC,EAAD,CALc,yCAK5CmB,OAL4C,eAKpCC,UALoC,eAMnD;AANmD,eAOpBpB,QAAQ,EAPY,yCAO5CqB,QAP4C,eAOnCC,WAPmC,eAQnD,GAAMC,CAAAA,YAAY,CAACnB,MAAM,CAACoB,OAAP,CAAe,UAAf,CAAnB,CACA;AATmD,gBAUpCvB,UAAU,CAACM,WAAD,CAV0B,CAU5CkB,IAV4C,aAU5CA,IAV4C,CAUZ;AACvC;AAXmD,iBAarCxB,UAAU,CAACO,aAAD,CAb2B,CAa5CkB,KAb4C,cAa5CA,KAb4C,CAenD,GAAIC,CAAAA,QAAQ,CAAC,EAAb,CACCA,QAAQ,CAACD,KAAK,CAACE,cAAN,CAAqBC,gBAA9B,CACD;AAEC,GAAMC,CAAAA,KAAK,CAAC,CAAE,QAAF,CAAW,QAAX,CAAoB,MAApB,CAA4B,YAA5B,CAAyC,UAAzC,CAAoD,WAApD,CAAgE,WAAhE,CAA4E,SAA5E,CAAsF,cAAtF,CAAsG,SAAtG,CAAgH,cAAhH,CAA+H,OAA/H,CAAwI,aAAxI,CAAsJ,cAAtJ,CAAZ,CAAkL;AAClL;AAEA5B,SAAS,CAAC,UAAM,CACX;AAEE6B,MAAM,CAACC,OAAP,CAAeL,QAAf,EAAyBM,GAAzB,CAA6B,eAAcC,CAAd,oCAAEC,IAAF,UAAOC,KAAP,gBACzBtB,CAAAA,QAAQ,CAACqB,IAAD,CAAOC,KAAP,CAAe,CACnBC,cAAc,CAAE,IADG,CAEnBC,WAAW,CAAE,IAFM,CAAf,CADiB,EAA7B,EASH,MAAO,WAAM,CAEZ,CAFD,CAGH,CAfQ,CAAT,CAiBHpC,SAAS,CAAC,UAAM,CACdyB,QAAQ,CAACD,KAAK,CAACE,cAAN,CAAqBC,gBAA9B,CACE,MAAO,WAAM,CAEZ,CAFD,CAGH,CALQ,CAKN,CAACH,KAAK,CAACE,cAAN,CAAqBC,gBAAtB,CALM,CAAT,CAOE,GAAMU,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAACC,IAAD,CAAMC,CAAN,CAAW,CACxBA,CAAC,CAACC,cAAF,GACAtB,UAAU,CAAC,EAAD,CAAV,CACAJ,QAAQ,CAAC,KAAD,CAAR,CACAE,UAAU,CAAC,KAAD,CAAV,CACAyB,OAAO,CAACC,GAAR,CAAYJ,IAAZ,EAIA,GAAIK,CAAAA,OAAO,CAAGC,MAAM,CAACD,OAAP,oDAAd,CACA,GAAIA,OAAJ,CAAY,CACRtB,YAAY,CAACwB,KAAb,CAAmBpB,QAAQ,CAACqB,GAA5B,CAAiCR,IAAjC,CAAuC;AAAvC,CACCS,IADD,CACM,SAACC,GAAD,CAAO,CACL;AACAT,CAAC,CAACU,MAAF,CAASC,KAAT,GAED,gDACClC,UAAU,CAAC,IAAD,CAAV,CACAT,KAAK,CAAC,CACFU,OAAO,CAAE,2BADP,CAEFkC,IAAI,CAAE,YAFJ,CAGFC,WAAW,CAAE,IAHX,CAIFC,YAAY,CAAE,IAJZ,CAAD,CAAL,CAMErC,UAAU,CAAC,KAAD,CAAV,CACAS,QAAQ,CAAC,EAAT,CACAhB,gBAAgB,GACrB,CAhBL,EAiBK6C,KAjBL,CAiBW,SAACC,GAAD,CAAO,CACVd,OAAO,CAACC,GAAR,CAAYa,GAAZ,EACAhD,KAAK,CAAC,CACFU,OAAO,CAAE,uBAAyBsC,GADhC,CAEFJ,IAAI,CAAE,WAFJ,CAGFC,WAAW,CAAE,IAHX,CAIFC,YAAY,CAAE,IAJZ,CAAD,CAAL,CAMH,CAzBL,EA4BH,CAEJ,CAzCD,CA2CA,mBACI,sCACA,aAAK,SAAS,CAAC,OAAf,wBACI,YAAK,SAAS,CAAC,aAAf,uBACI,UAAG,SAAS,CAAC,mBAAb,4BADJ,EADJ,cAMI,YAAK,SAAS,CAAC,kCAAf,uBAGA,cAAM,QAAQ,CAAE1C,YAAY,CAAC0B,QAAD,CAA5B,wBAEI,YAAK,SAAS,CAAC,qBAAf,uBAEI,aAAK,SAAS,CAAC,aAAf,wBACA,eAAO,SAAS,CAAE,OAAlB,4BAA2B,+BAA3B,GADA,CAGQT,KAAK,CAACG,GAAN,CAAU,SAACyB,CAAD,CAAGxB,CAAH,qBACN,eAAQ,SAAS,CAAC,WAAlB,wBACI,cAAO,IAAI,CAAC,UAAZ,CAAuB,KAAK,CAAEwB,CAA9B,CAAiC,IAAI,CAAC,OAAtC,CAA8C,GAAG,CAAE9C,QAAnD,EADJ,CACoE8C,CAAC,CAAG,GADxE,GAAmCA,CAAnC,CADM,EAAV,CAHR,GAFJ,EAFJ,cAkBJ,aAAK,SAAS,CAAC,wBAAf,wBACQ,UAAG,SAAS,CAAC,SAAb,uBACI,eAAQ,IAAI,CAAC,QAAb,CAAsB,SAAS,CAAC,4BAAhC,kBADJ,EADR,cAMQ,UAAG,SAAS,CAAC,SAAb,uBACI,eAAQ,IAAI,CAAC,OAAb,CAAqB,SAAS,CAAC,4BAA/B,oBADJ,EANR,GAlBI,GAHA,EANJ,GADA,EADJ,CAkDH","sourcesContent":["import React, {useState,useContext, useEffect,useRef} from 'react'\nimport client from '../../feathers'\nimport {DebounceInput} from 'react-debounce-input';\nimport { useForm } from \"react-hook-form\";\n//import {DocumentClassList} from './DocumentClass'\n//import {useHistory} from 'react-router-dom'\nimport {UserContext,ObjectContext} from '../../context'\nimport {toast} from 'bulma-toast'\n\nexport default function ModuleList({handlecloseModal}) {\n\n    const { register, handleSubmit,setValue} = useForm(); //, watch, errors, reset \n    const [error, setError] =useState(false)\n    const [success, setSuccess] =useState(false)\n    const [message,setMessage] = useState(\"\")\n    // eslint-disable-next-line\n    const [facility,setFacility] = useState()\n    const EmployeeServ=client.service('employee')\n    //const history = useHistory()\n    const {user} = useContext(UserContext) //,setUser\n    // eslint-disable-next-line\n \n    const {state}=useContext(ObjectContext)\n\n    let draftDoc={}\n     draftDoc=state.EmployeeModule.selectedEmployee \n    // console.log(draftDoc)\n   \n     const mList=[ \"Client\",\"Clinic\",\"Ward\", \"Laboratory\",\"Pharmacy\",\"Radiology\",\"Inventory\",\"Finance\",\"Managed Care\", \"Theatre\",\"Epidemiology\",\"Admin\", \"Bill Client\",\"Adjust Price\"] //\"Frontdesk\",\n     //state.DocumentClassModule.selectedDocumentClass.name\n\n     useEffect(() => {\n          //  console.log(draftDoc.roles,\"loading\")\n\n            Object.entries(draftDoc).map(([keys,value],i)=>(\n                setValue(keys, value,  {\n                    shouldValidate: true,\n                    shouldDirty: true\n                })\n\n            ))\n          \n    \n         return () => {\n            \n         }\n     })\n\n  useEffect(() => {\n    draftDoc=state.EmployeeModule.selectedEmployee \n      return () => {\n        \n      }\n  }, [state.EmployeeModule.selectedEmployee])\n   \n    const onSubmit = (data,e) =>{\n        e.preventDefault();\n        setMessage(\"\")\n        setError(false)\n        setSuccess(false)\n        console.log(data)\n     \n         \n         \n        let confirm = window.confirm(`You are about to update roles for the employee ?`)\n        if (confirm){\n            EmployeeServ.patch(draftDoc._id, data) // draftDoc._id\n            .then((res)=>{\n                    //console.log(JSON.stringify(res))\n                    e.target.reset();\n                   \n                   /*  setMessage(\"Created Client successfully\") */\n                    setSuccess(true)\n                    toast({\n                        message: 'Roles updated succesfully',\n                        type: 'is-success',\n                        dismissible: true,\n                        pauseOnHover: true,\n                      })\n                      setSuccess(false)\n                      draftDoc={}\n                      handlecloseModal()\n                })\n                .catch((err)=>{\n                    console.log(err)\n                    toast({\n                        message: 'Error updating Roles' + err,\n                        type: 'is-danger',\n                        dismissible: true,\n                        pauseOnHover: true,\n                      })\n                })\n\n       \n        }\n      \n    }\n\n    return (\n        <>\n        <div className=\"card \">\n            <div className=\"card-header\">\n                <p className=\"card-header-title\">\n                Choose Modules\n                </p>\n            </div>\n            <div className=\"card-content vscrollable remPad1\">\n\n              \n            <form onSubmit={handleSubmit(onSubmit)}>\n                \n                <div className=\"field is-horizontal\">\n                       \n                    <div className=\"field ml-3 \">\n                    <label className= \"mr-2 \"> <b>Modules:</b></label>\n                        {\n                            mList.map((c,i) => \n                                <label  className=\" is-small\" key={c}>\n                                    <input type=\"checkbox\" value={c} name=\"roles\" ref={register} />{c + \" \"}\n                                </label>\n                            )\n                        }\n                    </div>  \n                    </div> \n                      \n                  \n              \n        <div className=\"field  is-grouped mt-2\" >\n                <p className=\"control\">\n                    <button type=\"submit\" className=\"button is-success is-small\" >\n                        Save\n                    </button>\n                </p>\n                <p className=\"control\">\n                    <button type=\"reset\" className=\"button is-warning is-small\" >\n                        Cancel\n                    </button>\n                </p>\n               \n            </div>\n     \n            </form>\n            </div>\n            </div>\n                 \n        </>\n    )\n   \n}\n"]},"metadata":{},"sourceType":"module"}