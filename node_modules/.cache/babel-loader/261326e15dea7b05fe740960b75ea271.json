{"ast":null,"code":"import _defineProperty from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _objectSpread from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";/* eslint-disable */import React,{useState,useContext,useEffect,useRef}from'react';import client from'../../feathers';import{DebounceInput}from'react-debounce-input';import{useForm}from\"react-hook-form\";//import {useHistory} from 'react-router-dom'\nimport{UserContext,ObjectContext}from'../../context';import{toast}from'bulma-toast';import{ProductCreate}from'./Products';import Encounter from'../EncounterMgt/Encounter';import{ClientSearch}from'../helpers/ClientSearch';import ServiceSearch from'../helpers/ServiceSearch';var random=require('random-string-generator');// eslint-disable-next-line\nvar searchfacility={};export default function BillServiceCreate(){var _user$currentEmployee,_user$currentEmployee2;// const { register, handleSubmit,setValue} = useForm(); //, watch, errors, reset \n//const [error, setError] =useState(false)\nvar _useState=useState(false),_useState2=_slicedToArray(_useState,2),success=_useState2[0],setSuccess=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),success1=_useState4[0],setSuccess1=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),message=_useState6[0],setMessage=_useState6[1];// eslint-disable-next-line\nvar _useState7=useState(),_useState8=_slicedToArray(_useState7,2),facility=_useState8[0],setFacility=_useState8[1];//const ProductEntryServ=client.service('productentry')\nvar OrderServ=client.service('order');var BillCreateServ=client.service('createbilldirect');//const history = useHistory()\nvar _useContext=useContext(UserContext),user=_useContext.user;//,setUser\n// eslint-disable-next-line\nvar _useState9=useState(),_useState10=_slicedToArray(_useState9,2),currentUser=_useState10[0],setCurrentUser=_useState10[1];var _useState11=useState(\"Bill\"),_useState12=_slicedToArray(_useState11,2),type=_useState12[0],setType=_useState12[1];var _useState13=useState(\"\"),_useState14=_slicedToArray(_useState13,2),documentNo=_useState14[0],setDocumentNo=_useState14[1];var _useState15=useState(0),_useState16=_slicedToArray(_useState15,2),totalamount=_useState16[0],setTotalamount=_useState16[1];var _useState17=useState(null),_useState18=_slicedToArray(_useState17,2),qamount=_useState18[0],setQAmount=_useState18[1];var _useState19=useState(\"\"),_useState20=_slicedToArray(_useState19,2),productId=_useState20[0],setProductId=_useState20[1];var _useState21=useState(\"\"),_useState22=_slicedToArray(_useState21,2),source=_useState22[0],setSource=_useState22[1];var _useState23=useState(\"\"),_useState24=_slicedToArray(_useState23,2),date=_useState24[0],setDate=_useState24[1];var _useState25=useState(\"\"),_useState26=_slicedToArray(_useState25,2),name=_useState26[0],setName=_useState26[1];var _useState27=useState(\"\"),_useState28=_slicedToArray(_useState27,2),inventoryId=_useState28[0],setInventoryId=_useState28[1];var _useState29=useState(\"\"),_useState30=_slicedToArray(_useState29,2),baseunit=_useState30[0],setBaseunit=_useState30[1];var _useState31=useState(1),_useState32=_slicedToArray(_useState31,2),quantity=_useState32[0],setQuantity=_useState32[1];var _useState33=useState(\"\"),_useState34=_slicedToArray(_useState33,2),sellingprice=_useState34[0],setSellingPrice=_useState34[1];var _useState35=useState(0),_useState36=_slicedToArray(_useState35,2),costprice=_useState36[0],setCostprice=_useState36[1];var _useState37=useState(\"\"),_useState38=_slicedToArray(_useState37,2),invquantity=_useState38[0],setInvQuantity=_useState38[1];var _useState39=useState(0),_useState40=_slicedToArray(_useState39,2),calcamount=_useState40[0],setCalcAmount=_useState40[1];var _useState41=useState([]),_useState42=_slicedToArray(_useState41,2),productItem=_useState42[0],setProductItem=_useState42[1];var _useState43=useState(\"\"),_useState44=_slicedToArray(_useState43,2),billingId=_useState44[0],setBilllingId=_useState44[1];var _useState45=useState(true),_useState46=_slicedToArray(_useState45,2),changeAmount=_useState46[0],setChangeAmount=_useState46[1];var _useState47=useState(\"\"),_useState48=_slicedToArray(_useState47,2),paymentmode=_useState48[0],setPaymentMode=_useState48[1];var _useState49=useState(\"\"),_useState50=_slicedToArray(_useState49,2),category=_useState50[0],setCategory=_useState50[1];var _useState51=useState([]),_useState52=_slicedToArray(_useState51,2),paymentOptions=_useState52[0],setPaymentOptions=_useState52[1];var _useState53=useState(\"\"),_useState54=_slicedToArray(_useState53,2),billMode=_useState54[0],setBillMode=_useState54[1];var _useState55=useState(\"\"),_useState56=_slicedToArray(_useState55,2),obj=_useState56[0],setObj=_useState56[1];var _useState57=useState(false),_useState58=_slicedToArray(_useState57,2),productModal=_useState58[0],setProductModal=_useState58[1];var _useState59=useState(\"\"),_useState60=_slicedToArray(_useState59,2),patient=_useState60[0],setPatient=_useState60[1];var _useState61=useState(\"\"),_useState62=_slicedToArray(_useState61,2),contracts=_useState62[0],setContracts=_useState62[1];var _useContext2=useContext(ObjectContext),state=_useContext2.state,setState=_useContext2.setState;var inputEl=useRef(0);var calcamount1;var hidestatus;var medication=state.medicationModule.selectedMedication;var handlecloseModal=function handlecloseModal(){//   setProductModal(false)\n// handleSearch(val)\n};var handleChangeMode=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(value){var billm;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(\"value\",value);_context.next=3;return setPaymentMode(value);case 3:console.log(value);billm=paymentOptions.filter(function(el){return el.name===value;});_context.next=7;return setBillMode(billm[0]);case 7:console.log(billm);// at startup\n// check payment mode options from patient financial info\n// load that to select options\n// default to HMO-->company-->family-->cash\n//when chosen\n//append payment mode to order\n//check service contract for pricing info\n// calculate pricing \n// pricing\ncase 8:case\"end\":return _context.stop();}}},_callee);}));return function handleChangeMode(_x){return _ref.apply(this,arguments);};}();var handleRow=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(ProductEntry){var newProductEntryModule;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0://console.log(\"b4\",state)\n//console.log(\"handlerow\",ProductEntry)\n//await setMedication(ProductEntry)\nnewProductEntryModule={selectedMedication:ProductEntry,show:'detail'};_context2.next=3;return setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{medicationModule:newProductEntryModule});});case 3:case\"end\":return _context2.stop();}}},_callee2);}));return function handleRow(_x2){return _ref2.apply(this,arguments);};}();var _useState63=useState({productitems:[],date:date,documentNo:documentNo,type:type,totalamount:totalamount,source:source}),_useState64=_slicedToArray(_useState63,2),productEntry=_useState64[0],setProductEntry=_useState64[1];var productItemI={productId:productId,name:name,quantity:quantity,sellingprice:sellingprice,amount:calcamount,//||qamount\nbaseunit:baseunit,costprice:costprice,category:category===\"Inventory\"?\"Prescription\":category,billingId:billingId,billingContract:contracts,billMode:billMode};var checkPrice=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(contracts,billMode){var contract,_contract,_contract2;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(!(billMode.type===\"HMO Cover\")){_context3.next=10;break;}//paymentmode\n/*  if (billMode.detail.plan===\"NHIS\"){\n                //find contract for NHIS\n                let contract=contracts.filter(el=>el.source_org_name===\"NHIS\")\n                if (contract.length){\n                   // console.log(contract[0].price)\n                  await  setSellingPrice(contract[0].price)     \n             }else{\n                toast({\n                    message: 'Please NHIS does not have cover/price for this service. Either set service price for NHIS, try another service or bill using cash',\n                    type: 'is-danger',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  })\n                 await setSellingPrice(0)\n             }\n\n            }else{ */contract=contracts.filter(function(el){return el.source_org===billMode.detail.organizationId;});if(!contract.length){_context3.next=7;break;}_context3.next=5;return setSellingPrice(contract[0].price);case 5:_context3.next=10;break;case 7:toast({message:'Please HMO does not have cover/price for this service. Either set service price for HMO , try another drug, bill using cash or adjust amount ',type:'is-danger',dismissible:true,pauseOnHover:true});_context3.next=10;return setSellingPrice(0);case 10:if(!(billMode.type===\"Company Cover\")){_context3.next=20;break;}//paymentmode\n_contract=contracts.filter(function(el){return el.source_org===billMode.detail.organizationId;});if(!_contract.length){_context3.next=17;break;}_context3.next=15;return setSellingPrice(_contract[0].price);case 15:_context3.next=20;break;case 17:toast({message:'Please company does not have cover/price for this service. Either set service price for Company or try another drug or bill using cash',type:'is-danger',dismissible:true,pauseOnHover:true});_context3.next=20;return setSellingPrice(0);case 20:if(!(billMode.type===\"Cash\"||billMode.type===\"Family Cover\")){_context3.next=30;break;}//paymentmode\n_contract2=contracts.filter(function(el){return el.source_org===el.dest_org;});if(!_contract2.length){_context3.next=27;break;}_context3.next=25;return setSellingPrice(_contract2[0].price);case 25:_context3.next=30;break;case 27:toast({message:'Please there is no cover/price for this service. Either set service price or try another service. Setting price at zero ',type:'is-danger',dismissible:true,pauseOnHover:true});_context3.next=30;return setSellingPrice(0);case 30:case\"end\":return _context3.stop();}}},_callee3);}));return function checkPrice(_x3,_x4){return _ref3.apply(this,arguments);};}();var getSearchfacility=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(service){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(service){_context4.next=14;break;}//\"clear stuff\"\nsetProductId(\"\");setName(\"\");setBaseunit(\"\");setInventoryId(\"\");setSellingPrice(0);setInvQuantity(\"\");setQAmount(null);setCostprice(\"\");setContracts(\"\");setCategory(\"\");setInventoryId(\"\");setBilllingId(\"\");//setCalcAmount(null)\nreturn _context4.abrupt(\"return\");case 14:setContracts(service.contracts);setProductId(service.productId);setName(service.name);setCategory(service.category);setBaseunit(service.baseunit);setInventoryId(service.inventoryId);setBilllingId(service._id);_context4.next=23;return setObj(service);case 23:console.log(service.contracts);case 24:case\"end\":return _context4.stop();}}},_callee4);}));return function getSearchfacility(_x5){return _ref4.apply(this,arguments);};}();var getSearchfacility1=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(person){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:if(person){_context5.next=4;break;}//\"clear stuff\"\n/*   setProductId(\"\")\n             setName(\"\")\n             setBaseunit(\"\")\n             setInventoryId(\"\")\n             setSellingPrice(\"\")\n             setInvQuantity(\"\")\n             setQAmount(null)\n             setCostprice(\"\") */setPatient(\"\");setSource(\"\");return _context5.abrupt(\"return\");case 4:_context5.next=6;return setPatient(person);case 6:setSource(person.firstname+\" \"+person.lastname);case 7:case\"end\":return _context5.stop();}}},_callee5);}));return function getSearchfacility1(_x6){return _ref5.apply(this,arguments);};}();useEffect(function(){setCurrentUser(user);//console.log(currentUser)\nreturn function(){};},[user]);var handleUpdateTotal=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(){return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return setTotalamount(function(prevtotal){return Number(prevtotal)+Number(calcamount);});case 2:case\"end\":return _context6.stop();}}},_callee6);}));return function handleUpdateTotal(){return _ref6.apply(this,arguments);};}();var handleChangeType=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(e){return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return setType(e.target.value);case 2:case\"end\":return _context7.stop();}}},_callee7);}));return function handleChangeType(_x7){return _ref7.apply(this,arguments);};}();var handleAmount=/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(){return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:case\"end\":return _context8.stop();}}},_callee8);}));return function handleAmount(){return _ref8.apply(this,arguments);};}();var handleClickProd=/*#__PURE__*/function(){var _ref9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(){return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:if(!(source===\"\"||quantity===\"\"||obj===\"\"||quantity===0||paymentmode===\"\")){_context9.next=3;break;}toast({message:'You need to choose a service, billing mode and quantity to proceed',type:'is-danger',dismissible:true,pauseOnHover:true});return _context9.abrupt(\"return\");case 3:_context9.next=5;return setSuccess(false);case 5:_context9.next=7;return setProductItem(function(prevProd){return prevProd.concat(productItemI);});case 7:handleUpdateTotal();// generate billing info\n//update order\n/*   OrderServ.patch(medication._id,{\n            order_status:\"Billed\", //Billed\n            billInfo,\n        }).then((resp)=>{\n           // medication=resp\n           // console.log(resp)\n             handleRow(resp) \n            //update dispense\n\n        })\n        .catch((err)=>{\n            console.log(err)\n        })\n         */ //update status(billed) + action()\n//?attached chosen product to medication\n//dispense helper?\nsetName(\"\");setBaseunit(\"\");setQuantity(1);setInventoryId(\"\");setSellingPrice(0);setInvQuantity(\"\");// handleAmount()\nsetCalcAmount(0);_context9.next=17;return setSuccess(true);case 17:getSearchfacility(false);setObj(\"\");console.log(sellingprice);/* console.log(qamount)\n        console.log(productItem) */setChangeAmount(true);setContracts(\"\");// alert(\"finished\")\ncase 22:case\"end\":return _context9.stop();}}},_callee9);}));return function handleClickProd(){return _ref9.apply(this,arguments);};}();var handleQtty=/*#__PURE__*/function(){var _ref10=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee10(e){return _regeneratorRuntime.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:/*  if (invquantity<e.target.value){\n             toast({\n                 message: 'You can not sell more quantity than exist in inventory ' ,\n                 type: 'is-danger',\n                 dismissible: true,\n                 pauseOnHover: true,\n               })\n             return\n         } */setQuantity(e.target.value);if(e.target.vlue===\"\"){setQuantity(1);}/* calcamount1=quantity*sellingprice\n         await setCalcAmount(calcamount1)\n         console.log(calcamount) */case 2:case\"end\":return _context10.stop();}}},_callee10);}));return function handleQtty(_x8){return _ref10.apply(this,arguments);};}();useEffect(function(){setProductEntry({date:date,documentNo:documentNo,type:type,totalamount:totalamount,source:source});// setCalcAmount(quantity*sellingprice) \nreturn function(){};},[date]);var resetform=function resetform(){setType(\"Sales\");setDocumentNo(\"\");setTotalamount(\"\");setProductId(\"\");setSource(\"\");setDate(\"\");setName(\"\");setBaseunit();setCostprice();setProductItem([]);setContracts(\"\");};var handleCreateBill=/*#__PURE__*/function(){var _ref11=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee12(){var serviceList,document,confirm;return _regeneratorRuntime.wrap(function _callee12$(_context12){while(1){switch(_context12.prev=_context12.next){case 0://handle selected single order\n//documentation\nserviceList=[];document={};if(user.currentEmployee){document.facility=user.currentEmployee.facilityDetail._id;document.facilityname=user.currentEmployee.facilityDetail.facilityName;// or from facility dropdown\n}document.documentdetail=productItem;console.log(document.documentdetail);document.documentname=\"Billed Orders\";//state.DocumentClassModule.selectedDocumentClass.name\n// document.documentClassId=state.DocumentClassModule.selectedDocumentClass._id\ndocument.location=state.employeeLocation.locationName+\" \"+state.employeeLocation.locationType;document.locationId=state.employeeLocation.locationId;document.client=patient._id;document.clientname=patient.firstname+\" \"+patient.middlename+\" \"+patient.lastname;document.clientobj=patient;document.createdBy=user._id;document.createdByname=user.firstname+\" \"+user.lastname;document.status=\"completed\";console.log(document);//order\ndocument.documentdetail.forEach(/*#__PURE__*/function(){var _ref12=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee11(element){var orderinfo,billInfo,items;return _regeneratorRuntime.wrap(function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:orderinfo={//for reach document\ndocumentationId:\"\",//tbf\norder_category:element.category,//category\norder:element.name,//name\ninstruction:\"\",destination_name:document.facilityname,//facilityname\ndestination:document.facility,//facility id\norder_status:\"Billed\",payer:element.billMode.organizationName,paymentmode:element.billMode.paymentmode,requestingdoctor_Id:document.createdBy,requestingdoctor_Name:document.createdByname,requestingdoctor_locationid:document.locationId,requestingdoctor_locationName:document.location,requestingdoctor_facilityId:document.facility,requestingdoctor_facilityname:document.facilityname,clientId:document.client,clientname:document.clientname,client:document.clientobj,order_action:[],medication_action:[],treatment_action:[]};billInfo={orderInfo:{orderId:\"\",//tbf\norderObj:orderinfo},serviceInfo:{price:element.sellingprice,quantity:element.quantity,productId:element.productId,name:element.name,baseunit:element.baseunit,amount:element.amount,billingId:element.billingId,billingContract:element.billingContract,createdby:user._id},paymentInfo:{amountDue:element.amount,paidup:0,balance:element.amount,paymentDetails:[]},participantInfo:{billingFacility:orderinfo.destination,billingFacilityName:orderinfo.destination_name,locationId:document.locationId,//selected location,\nclientId:orderinfo.clientId,client:orderinfo.client,paymentmode:element.billMode},createdBy:user._id,billing_status:\"Unpaid\"};items={orderinfo:orderinfo,billInfo:billInfo};serviceList.push(items);case 4:case\"end\":return _context11.stop();}}},_callee11);}));return function(_x9){return _ref12.apply(this,arguments);};}());console.log(\"==================\");console.log(document,serviceList);confirm=window.confirm(\"You are about to bill \".concat(document.clientname,\" for \").concat(serviceList.length,\" service(s)?\"));if(!confirm){_context12.next=22;break;}_context12.next=22;return BillCreateServ.create({document:document,serviceList:serviceList}).then(function(res){setSuccess(true);toast({message:'Billed Orders created succesfully',type:'is-success',dismissible:true,pauseOnHover:true});setSuccess(false);setProductItem([]);setCalcAmount(0);var today=new Date().toLocaleString();//console.log(today)\nsetDate(today);var invoiceNo=random(6,'uppernumeric');setDocumentNo(invoiceNo);}).catch(function(err){toast({message:'Error creating Billed Orders '+err,type:'is-danger',dismissible:true,pauseOnHover:true});});case 22:case\"end\":return _context12.stop();}}},_callee12);}));return function handleCreateBill(){return _ref11.apply(this,arguments);};}();var onSubmit=/*#__PURE__*/function(){var _ref13=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee13(e){return _regeneratorRuntime.wrap(function _callee13$(_context13){while(1){switch(_context13.prev=_context13.next){case 0:e.preventDefault();setMessage(\"\");//setError(false)\nsetSuccess(false);_context13.next=5;return setProductEntry({date:date,documentNo:documentNo,type:type,totalamount:totalamount,source:source});case 5:productEntry.productitems=productItem;productEntry.createdby=user._id;productEntry.transactioncategory=\"debit\";// console.log(\"b4 facility\",productEntry);\nif(!user.currentEmployee){_context13.next=12;break;}productEntry.facility=user.currentEmployee.facilityDetail._id;// or from facility dropdown\n_context13.next=14;break;case 12:toast({message:'You can not remove inventory from any organization',type:'is-danger',dismissible:true,pauseOnHover:true});return _context13.abrupt(\"return\");case 14:if(!state.StoreModule.selectedStore._id){_context13.next=18;break;}productEntry.storeId=state.StoreModule.selectedStore._id;_context13.next=20;break;case 18:toast({message:'You need to select a store before removing inventory',type:'is-danger',dismissible:true,pauseOnHover:true});return _context13.abrupt(\"return\");case 20:case\"end\":return _context13.stop();}}},_callee13);}));return function onSubmit(_x10){return _ref13.apply(this,arguments);};}();var handleChangeAmount=function handleChangeAmount(){setChangeAmount(function(rev){return!rev;});};var newclient=/*#__PURE__*/function(){var _ref14=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee14(){return _regeneratorRuntime.wrap(function _callee14$(_context14){while(1){switch(_context14.prev=_context14.next){case 0:_context14.next=2;return setProductItem([]);case 2:case\"end\":return _context14.stop();}}},_callee14);}));return function newclient(){return _ref14.apply(this,arguments);};}();var createObj=function createObj(pay,name,cover,type){var details={};details=_objectSpread({},pay);details.type=type;return{name:name,value:cover,detail:details,type:type};};useEffect(function(){//update selling price\nif(!!billMode&&!!contracts){// console.log(contracts)\ncheckPrice(contracts,billMode);}return function(){};},[obj]);useEffect(function(){setProductItem([]);setTotalamount(0);var paymentoptions=[];// const info = client.paymentinfo\nvar billme;var obj;if(!!patient){// console.log(patient)\npatient.paymentinfo.forEach(function(pay,i){if(pay.active){switch(pay.paymentmode){case'Cash':// code block\nobj=createObj(pay,\"Cash\",\"Cash\",\"Cash\");paymentoptions.push(obj);setPaymentMode(\"Cash\");billme=obj;// console.log(\"billme\",billme)\nbreak;case'Family':// code block\nobj=createObj(pay,\"Family Cover\",\"familyCover\",\"Family Cover\");paymentoptions.push(obj);setPaymentMode(\"Family Cover\");billme=obj;// console.log(\"billme\",billme)\nbreak;case'Company':// code block\nvar _name=\"Company: \"+pay.organizationName+\"(\"+pay.plan+\")\";obj=createObj(pay,_name,\"CompanyCover\",\"Company Cover\");paymentoptions.push(obj);setPaymentMode(\"Company: \"+pay.organizationName+\"(\"+pay.plan+\")\");billme=obj;// console.log(\"billme\",billme)\nbreak;case'HMO':// code block\nconsole.log(pay);var sname=\"HMO: \"+pay.organizationName+\"(\"+pay.plan+\")\";obj=createObj(pay,sname,\"HMOCover\",\"HMO Cover\");paymentoptions.push(obj);setPaymentMode(\"HMO: \"+pay.organizationName+\"(\"+pay.plan+\")\");billme=obj;//  console.log(\"billme\",billme)\nbreak;default:// code block\n}}});setPaymentOptions(paymentoptions);setBillMode(billme);}//console.log(paymentoptions)\n// console.log(billMode)\nreturn function(){};},[source]);useEffect(function(){console.log(\"startup\");// const medication =state.medicationModule.selectedMedication\nvar today=new Date().toLocaleString();//console.log(today)\nsetDate(today);var invoiceNo=random(6,'uppernumeric');setDocumentNo(invoiceNo);return function(){console.log(\"closeup\");var today=new Date().toLocaleString();//console.log(today)\nsetDate(today);var invoiceNo=random(6,'uppernumeric');setDocumentNo(invoiceNo);setCalcAmount(0);};},[]);useEffect(function(){calcamount1=quantity*sellingprice;setCalcAmount(calcamount1);//console.log(calcamount1)\nsetChangeAmount(true);return function(){};},[quantity,sellingprice]);useEffect(function(){// console.log(\"success\", success)\nif(success){setSuccess(false);}},[success]);useEffect(function(){// console.log(\"success\", success)\nif(success1){setSuccess1(false);}},[success1]);useEffect(function(){if(!!billMode&&!!contracts){//console.log(contracts)\ncheckPrice(contracts,billMode);}return function(){};},[billMode]);useEffect(function(){// console.log(sellingprice)\nreturn function(){};},[sellingprice]);useEffect(function(){getSearchfacility1(state.ClientModule.selectedClient);/* appointee=state.ClientModule.selectedClient \n        console.log(appointee.firstname) */return function(){};},[state.ClientModule.selectedClient]);var handleRemoveBill=function handleRemoveBill(item,index){setProductItem(function(prev){return prev.filter(function(el,i){return i!==index;});});};// console.log(\"simpa\")\nreturn/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"card card-overflow\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsx(\"p\",{className:\"card-header-title\",children:\"Bill Service\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-content \",children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:onSubmit,children:[\" \",/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field-body\",children:[state.ClientModule.selectedClient.firstname!==undefined?/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"label\",{className:\"label is-size-7\",children:[\" \",state.ClientModule.selectedClient.firstname,\" \",state.ClientModule.selectedClient.lastname]})}):/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsx(ClientSearch,{getSearchfacility:getSearchfacility1,clear:success1})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsx(\"div\",{className:\"control\",children:/*#__PURE__*/_jsx(\"div\",{className:\"select is-small \",children:/*#__PURE__*/_jsxs(\"select\",{name:\"paymentmode\",value:paymentmode,onChange:function onChange(e){return handleChangeMode(e.target.value);},className:\"selectadd\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Billing Mode \"}),paymentOptions.map(function(option,i){return/*#__PURE__*/_jsxs(\"option\",{value:option.details,children:[\" \",option.name]},i);})]})})})})]})}),\" \",/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field-body\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left has-icons-right\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\"/* ref={register({ required: true })} */,value:date,name:\"date\",type:\"text\",onChange:function onChange(e){return setDate(e.target.value);},placeholder:\"Date\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-map-signs\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\"/* ref={register} */,name:\"documentNo\",value:documentNo,type:\"text\",onChange:function onChange(e){return setDocumentNo(e.target.value);},placeholder:\" Invoice Number\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-phone-alt\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\"/* ref={register({ required: true })} */,value:totalamount,name:\"totalamount\",type:\"text\",onChange:function onChange(e){return setTotalamount(e.target.value);},placeholder:\" Total Amount\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-coins\"})})]})})]})})]}),/*#__PURE__*/_jsx(\"label\",{className:\"label is-small\",children:\"Choose Service Item:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsx(\"div\",{className:\"field-body\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field is-expanded\"/* style={ !user.stacker?{display:\"none\"}:{}} */,children:[/*#__PURE__*/_jsx(ServiceSearch,{getSearchfacility:getSearchfacility,clear:success,mode:billMode}),/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left \",style:{display:\"none\"},children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\"/* ref={register ({ required: true }) }  */ /* add array no */,value:productId,name:\"productId\",type:\"text\",onChange:function onChange(e){return setProductId(e.target.value);},placeholder:\"Product Id\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas  fa-map-marker-alt\"})})]})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field-body\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"field\",style:{width:\"40%\"},children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\"/* ref={register({ required: true })} */,name:\"quantity\",value:quantity,type:\"text\",onChange:function onChange(e){return handleQtty(e);},placeholder:\"Quantity\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-hashtag\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsx(\"label\",{children:\"Amount:\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",style:{width:\"40%\"},children:[/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left \"/* style={{display:\"none\"}} */,children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",name:\"qamount\",disabled:changeAmount,value:calcamount,type:\"text\",onChange:/*#__PURE__*/function(){var _ref15=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee15(e){return _regeneratorRuntime.wrap(function _callee15$(_context15){while(1){switch(_context15.prev=_context15.next){case 0:_context15.next=2;return setCalcAmount(e.target.value);case 2:return _context15.abrupt(\"return\",_context15.sent);case 3:case\"end\":return _context15.stop();}}},_callee15);}));return function(_x11){return _ref15.apply(this,arguments);};}(),placeholder:\"Amount\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-hashtag\"})})]}),(((_user$currentEmployee=user.currentEmployee)===null||_user$currentEmployee===void 0?void 0:_user$currentEmployee.roles.includes('Adjust Price'))||((_user$currentEmployee2=user.currentEmployee)===null||_user$currentEmployee2===void 0?void 0:_user$currentEmployee2.roles.length)===0||user.stacker)&&/*#__PURE__*/_jsx(\"button\",{className:\"button is-small is-success btnheight\",onClick:handleChangeAmount,children:\"Adjust\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsx(\"p\",{className:\"control\",children:/*#__PURE__*/_jsx(\"button\",{className:\"button is-info is-small  is-pulled-right\",children:/*#__PURE__*/_jsx(\"span\",{className:\"is-small\",onClick:handleClickProd,children:\" +\"})})})})]})}),productItem.length>0&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Service Items:\"}),/*#__PURE__*/_jsx(\"div\",{class:\"table-container\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table is-striped  is-hoverable is-fullwidth is-scrollable \",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Serial No\",children:\"S/No\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Category\",children:\"Category\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Name\",children:\"Name\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Quantity\",children:\"Quanitity\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Unit\",children:\"Unit\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Selling Price\",children:\"Selling Price\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Amount\",children:\"Amount\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Billing Mode\",children:\"Mode\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Actions\",children:\"Actions\"})})]})}),/*#__PURE__*/_jsx(\"tfoot\",{}),/*#__PURE__*/_jsx(\"tbody\",{children:productItem.map(function(ProductEntry,i){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:i+1}),/*#__PURE__*/_jsx(\"td\",{children:ProductEntry.category}),/*#__PURE__*/_jsx(\"td\",{children:ProductEntry.name}),/*#__PURE__*/_jsx(\"th\",{children:ProductEntry.quantity}),/*#__PURE__*/_jsx(\"td\",{children:ProductEntry.baseunit}),/*#__PURE__*/_jsx(\"td\",{children:ProductEntry.sellingprice}),/*#__PURE__*/_jsx(\"td\",{children:ProductEntry.amount}),/*#__PURE__*/_jsx(\"td\",{children:ProductEntry.billMode.type}),/*#__PURE__*/_jsx(\"td\",{onClick:function onClick(){return handleRemoveBill(ProductEntry,i);},children:/*#__PURE__*/_jsx(\"span\",{className:\"showAction\",children:\"x\"})})]},i);})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field mt-2 is-grouped\",children:/*#__PURE__*/_jsx(\"p\",{className:\"control\",children:/*#__PURE__*/_jsx(\"button\",{className:\"button is-success is-small\",disabled:!productItem.length>0,onClick:handleCreateBill,children:\"Done\"})})})]})]})]})});}export function ServiceSearch2(_ref16){var getSearchfacility=_ref16.getSearchfacility,clear=_ref16.clear;var productServ=client.service('billing');var _useState65=useState([]),_useState66=_slicedToArray(_useState65,2),facilities=_useState66[0],setFacilities=_useState66[1];// eslint-disable-next-line\nvar _useState67=useState(false),_useState68=_slicedToArray(_useState67,2),searchError=_useState68[0],setSearchError=_useState68[1];// eslint-disable-next-line\nvar _useState69=useState(false),_useState70=_slicedToArray(_useState69,2),showPanel=_useState70[0],setShowPanel=_useState70[1];// eslint-disable-next-line\nvar _useState71=useState(\"\"),_useState72=_slicedToArray(_useState71,2),searchMessage=_useState72[0],setSearchMessage=_useState72[1];// eslint-disable-next-line \nvar _useState73=useState(\"\"),_useState74=_slicedToArray(_useState73,2),simpa=_useState74[0],setSimpa=_useState74[1];// eslint-disable-next-line \nvar _useState75=useState(false),_useState76=_slicedToArray(_useState75,2),chosen=_useState76[0],setChosen=_useState76[1];// eslint-disable-next-line \nvar _useState77=useState(0),_useState78=_slicedToArray(_useState77,2),count=_useState78[0],setCount=_useState78[1];var inputEl=useRef(null);var _useState79=useState(\"\"),_useState80=_slicedToArray(_useState79,2),val=_useState80[0],setVal=_useState80[1];var _useContext3=useContext(UserContext),user=_useContext3.user;var _useContext4=useContext(ObjectContext),state=_useContext4.state;var _useState81=useState(false),_useState82=_slicedToArray(_useState81,2),productModal=_useState82[0],setProductModal=_useState82[1];var handleRow=/*#__PURE__*/function(){var _ref17=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee16(obj){return _regeneratorRuntime.wrap(function _callee16$(_context16){while(1){switch(_context16.prev=_context16.next){case 0:_context16.next=2;return setChosen(true);case 2:_context16.next=4;return setSimpa(obj.name);case 4:getSearchfacility(obj);// setSelectedFacility(obj)\nsetShowPanel(false);// await setCount(2)\n/* const    newfacilityModule={\n            selectedFacility:facility,\n            show :'detail'\n        }\n   await setState((prevstate)=>({...prevstate, facilityModule:newfacilityModule})) */ //console.log(state)\ncase 6:case\"end\":return _context16.stop();}}},_callee16);}));return function handleRow(_x12){return _ref17.apply(this,arguments);};}();var handleBlur=/*#__PURE__*/function(){var _ref18=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee17(e){return _regeneratorRuntime.wrap(function _callee17$(_context17){while(1){switch(_context17.prev=_context17.next){case 0:case\"end\":return _context17.stop();}}},_callee17);}));return function handleBlur(_x13){return _ref18.apply(this,arguments);};}();var handleSearch=/*#__PURE__*/function(){var _ref19=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee18(value){var field,_query;return _regeneratorRuntime.wrap(function _callee18$(_context18){while(1){switch(_context18.prev=_context18.next){case 0:setVal(value);if(!(value===\"\")){_context18.next=5;break;}setShowPanel(false);getSearchfacility(false);return _context18.abrupt(\"return\");case 5:field='name';//field variable\nif(!(value.length>=3)){_context18.next=10;break;}productServ.find({query:(_query={},_defineProperty(_query,field,{$regex:value,$options:'i'}),_defineProperty(_query,\"facility\",user.currentEmployee.facilityDetail._id),_defineProperty(_query,\"$limit\",10),_defineProperty(_query,\"$sort\",{createdAt:-1}),_query)}).then(function(res){//console.log(\"product  fetched successfully\") \n//console.log(res.data) \nsetFacilities(res.data);setSearchMessage(\" product  fetched successfully\");setShowPanel(true);}).catch(function(err){toast({message:'Error creating ProductEntry '+err,type:'is-danger',dismissible:true,pauseOnHover:true});});_context18.next=13;break;case 10://console.log(\"less than 3 \")\n// console.log(val)\nsetShowPanel(false);_context18.next=13;return setFacilities([]);case 13:case\"end\":return _context18.stop();}}},_callee18);}));return function handleSearch(_x14){return _ref19.apply(this,arguments);};}();var handleAddproduct=function handleAddproduct(){setProductModal(true);};var handlecloseModal=function handlecloseModal(){setProductModal(false);handleSearch(val);};useEffect(function(){if(clear){// console.log(\"success has changed\",clear)\nsetSimpa(\"\");}return function(){};},[clear]);return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsx(\"div\",{className:\"control has-icons-left  \",children:/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown \".concat(showPanel?\"is-active\":\"\"),style:{width:\"100%\"},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown-trigger\",style:{width:\"100%\"},children:[/*#__PURE__*/_jsx(DebounceInput,{className:\"input is-small  is-expanded\",type:\"text\",placeholder:\"Search Services\",value:simpa,minLength:3,debounceTimeout:400,onBlur:function onBlur(e){return handleBlur(e);},onChange:function onChange(e){return handleSearch(e.target.value);},inputRef:inputEl}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-search\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"dropdown-menu expanded\",style:{width:\"100%\"},children:/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown-content\",children:[facilities.length>0?\"\":/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown-item selectadd\"/* onClick={handleAddproduct} */,children:[\" \",/*#__PURE__*/_jsxs(\"span\",{children:[\" \",val,\" is not in your inventory\"]}),\" \"]}),facilities.map(function(facility,i){return/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown-item\",onClick:function onClick(){return handleRow(facility);},children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"span\",{children:facility.name})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{children:/*#__PURE__*/_jsx(\"strong\",{children:facility.quantity})}),/*#__PURE__*/_jsxs(\"span\",{children:[facility.baseunit,\"(s) remaining\"]}),/*#__PURE__*/_jsxs(\"span\",{className:\"padleft\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Price:\"}),\" N\",facility.sellingprice]})]})]},facility._id);})]})})]})})})});}","map":{"version":3,"sources":["/home/mfybaby/Documents/HealthStack2/HS-frontend/src/components/Finance/BillServiceCreate.js"],"names":["React","useState","useContext","useEffect","useRef","client","DebounceInput","useForm","UserContext","ObjectContext","toast","ProductCreate","Encounter","ClientSearch","ServiceSearch","random","require","searchfacility","BillServiceCreate","success","setSuccess","success1","setSuccess1","message","setMessage","facility","setFacility","OrderServ","service","BillCreateServ","user","currentUser","setCurrentUser","type","setType","documentNo","setDocumentNo","totalamount","setTotalamount","qamount","setQAmount","productId","setProductId","source","setSource","date","setDate","name","setName","inventoryId","setInventoryId","baseunit","setBaseunit","quantity","setQuantity","sellingprice","setSellingPrice","costprice","setCostprice","invquantity","setInvQuantity","calcamount","setCalcAmount","productItem","setProductItem","billingId","setBilllingId","changeAmount","setChangeAmount","paymentmode","setPaymentMode","category","setCategory","paymentOptions","setPaymentOptions","billMode","setBillMode","obj","setObj","productModal","setProductModal","patient","setPatient","contracts","setContracts","state","setState","inputEl","calcamount1","hidestatus","medication","medicationModule","selectedMedication","handlecloseModal","handleChangeMode","value","console","log","billm","filter","el","handleRow","ProductEntry","newProductEntryModule","show","prevstate","productitems","productEntry","setProductEntry","productItemI","amount","billingContract","checkPrice","contract","source_org","detail","organizationId","length","price","dismissible","pauseOnHover","dest_org","getSearchfacility","_id","getSearchfacility1","person","firstname","lastname","handleUpdateTotal","prevtotal","Number","handleChangeType","e","target","handleAmount","handleClickProd","prevProd","concat","handleQtty","vlue","resetform","handleCreateBill","serviceList","document","currentEmployee","facilityDetail","facilityname","facilityName","documentdetail","documentname","location","employeeLocation","locationName","locationType","locationId","clientname","middlename","clientobj","createdBy","createdByname","status","forEach","element","orderinfo","documentationId","order_category","order","instruction","destination_name","destination","order_status","payer","organizationName","requestingdoctor_Id","requestingdoctor_Name","requestingdoctor_locationid","requestingdoctor_locationName","requestingdoctor_facilityId","requestingdoctor_facilityname","clientId","order_action","medication_action","treatment_action","billInfo","orderInfo","orderId","orderObj","serviceInfo","createdby","paymentInfo","amountDue","paidup","balance","paymentDetails","participantInfo","billingFacility","billingFacilityName","billing_status","items","push","confirm","window","create","then","res","today","Date","toLocaleString","invoiceNo","catch","err","onSubmit","preventDefault","transactioncategory","StoreModule","selectedStore","storeId","handleChangeAmount","rev","newclient","createObj","pay","cover","details","paymentoptions","billme","paymentinfo","i","active","plan","sname","ClientModule","selectedClient","handleRemoveBill","item","index","prev","undefined","map","option","display","width","roles","includes","stacker","ServiceSearch2","clear","productServ","facilities","setFacilities","searchError","setSearchError","showPanel","setShowPanel","searchMessage","setSearchMessage","simpa","setSimpa","chosen","setChosen","count","setCount","val","setVal","handleBlur","handleSearch","field","find","query","$regex","$options","createdAt","data","handleAddproduct"],"mappings":"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","sourcesContent":["/* eslint-disable */\nimport React, {useState,useContext, useEffect,useRef} from 'react'\nimport client from '../../feathers'\nimport {DebounceInput} from 'react-debounce-input';\nimport { useForm } from \"react-hook-form\";\n//import {useHistory} from 'react-router-dom'\nimport {UserContext,ObjectContext} from '../../context'\nimport {toast} from 'bulma-toast'\nimport {ProductCreate} from './Products'\nimport Encounter from '../EncounterMgt/Encounter';\nimport { ClientSearch } from '../helpers/ClientSearch';\nimport  ServiceSearch  from '../helpers/ServiceSearch';\nvar random = require('random-string-generator');\n// eslint-disable-next-line\nconst searchfacility={};\n\nexport default function BillServiceCreate(){\n    // const { register, handleSubmit,setValue} = useForm(); //, watch, errors, reset \n     //const [error, setError] =useState(false)\n     const [success, setSuccess] =useState(false)\n     const [success1, setSuccess1] =useState(false)\n     const [message,setMessage] = useState(\"\")\n     // eslint-disable-next-line\n     const [facility,setFacility] = useState()\n     //const ProductEntryServ=client.service('productentry')\n     const OrderServ=client.service('order')\n     const BillCreateServ=client.service('createbilldirect')\n     //const history = useHistory()\n     const {user} = useContext(UserContext) //,setUser\n     // eslint-disable-next-line\n     const [currentUser,setCurrentUser] = useState()\n     const [type,setType] = useState(\"Bill\")\n     const [documentNo,setDocumentNo] = useState(\"\")\n     const [totalamount,setTotalamount] = useState(0)\n     const [qamount,setQAmount] = useState(null)\n     const [productId,setProductId] = useState(\"\")\n     const [source,setSource] = useState(\"\")\n     const [date,setDate] = useState(\"\")\n     const [name,setName] = useState(\"\")\n     const [inventoryId,setInventoryId] = useState(\"\")\n     const [baseunit,setBaseunit] = useState(\"\")\n     const [quantity,setQuantity] = useState(1)\n     const [sellingprice,setSellingPrice] = useState(\"\")\n     const [costprice,setCostprice] = useState(0)\n     const [invquantity,setInvQuantity] = useState(\"\")\n     const [calcamount,setCalcAmount] = useState(0)\n     const [productItem,setProductItem] = useState([])\n      const [billingId,setBilllingId]=useState(\"\")  \n      const [changeAmount, setChangeAmount] = useState(true)\n      const [paymentmode, setPaymentMode] = useState(\"\")\n      const [category, setCategory] = useState(\"\")\n      const [paymentOptions, setPaymentOptions]=useState([])\n      const [billMode, setBillMode]=useState(\"\")\n      const [obj, setObj]=useState(\"\")\n      const [productModal, setProductModal]=useState(false)\n      const [patient, setPatient]=useState(\"\")\n      const [contracts, setContracts]=useState(\"\")\n     \n     const {state,setState}=useContext(ObjectContext)\n     const inputEl = useRef(0);\n     let calcamount1\n     let hidestatus\n  \n\n    \n  let medication =state.medicationModule.selectedMedication\n\n\n  const handlecloseModal =()=>{\n //   setProductModal(false)\n   // handleSearch(val)\n    }\n\n\n    const \n    \n    \n    \n    handleChangeMode= async(value)=>{\n    console.log(\"value\",value)\n       await setPaymentMode(value)\n        console.log(value)\n       let billm= paymentOptions.filter(el=>el.name===value)\n       await setBillMode(billm[0])\n        console.log(billm)\n        // at startup\n        // check payment mode options from patient financial info\n        // load that to select options\n        // default to HMO-->company-->family-->cash\n        //when chosen\n        //append payment mode to order\n        //check service contract for pricing info\n        // calculate pricing \n        // pricing\n\n\n    }\n\n    const handleRow= async(ProductEntry)=>{\n    //console.log(\"b4\",state)\n\n    //console.log(\"handlerow\",ProductEntry)\n\n    //await setMedication(ProductEntry)\n\n    const    newProductEntryModule={\n        selectedMedication:ProductEntry,\n        show :'detail'\n    }\n  await setState((prevstate)=>({...prevstate, medicationModule:newProductEntryModule}))\n   //console.log(state)\n  // ProductEntry.show=!ProductEntry.show\n\n        } \n \n     const [productEntry,setProductEntry]=useState({\n         productitems:[],\n         date,\n         documentNo,\n         type,\n         totalamount,\n         source,\n \n     })\n  \n     const productItemI={\n         productId,\n         name,\n         quantity,\n         sellingprice,\n         amount:calcamount, //||qamount\n         baseunit,\n         costprice,\n         category: category===\"Inventory\"?\"Prescription\":category,\n         billingId,\n         billingContract:contracts,\n         billMode\n \n     }\n   \n     const checkPrice= async(contracts,billMode)=>{\n           if( billMode.type===\"HMO Cover\"){ //paymentmode\n           /*  if (billMode.detail.plan===\"NHIS\"){\n                //find contract for NHIS\n                let contract=contracts.filter(el=>el.source_org_name===\"NHIS\")\n                if (contract.length){\n                   // console.log(contract[0].price)\n                  await  setSellingPrice(contract[0].price)     \n             }else{\n                toast({\n                    message: 'Please NHIS does not have cover/price for this service. Either set service price for NHIS, try another service or bill using cash',\n                    type: 'is-danger',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  })\n                 await setSellingPrice(0)\n             }\n\n            }else{ */\n\n            let contract=contracts.filter(el=>el.source_org===billMode.detail.organizationId)\n            if (contract.length){\n              //  console.log(contract[0].price)\n               await setSellingPrice(contract[0].price)\n               \n             }else{\n            toast({\n                message: 'Please HMO does not have cover/price for this service. Either set service price for HMO , try another drug, bill using cash or adjust amount ',\n                type: 'is-danger',\n                dismissible: true,\n                pauseOnHover: true,\n              })\n              await setSellingPrice(0)\n         }\n        \n        }\n       /*  } */\n        if( billMode.type===\"Company Cover\"){ //paymentmode\n            let contract=contracts.filter(el=>el.source_org===billMode.detail.organizationId)\n            if (contract.length){\n           // console.log(contract[0].price)\n          await   setSellingPrice(contract[0].price)\n            \n           \n           }else{\n\n            toast({\n                message: 'Please company does not have cover/price for this service. Either set service price for Company or try another drug or bill using cash',\n                type: 'is-danger',\n                dismissible: true,\n                pauseOnHover: true,\n              })\n            await  setSellingPrice(0)   \n         }\n\n     }\n     if( billMode.type===\"Cash\" || billMode.type===\"Family Cover\"){ //paymentmode\n        let contract=contracts.filter(el=>el.source_org===el.dest_org)\n        if (contract.length){\n       // console.log(contract[0].price)\n        await setSellingPrice(contract[0].price)\n       \n       \n            }else{\n\n        toast({\n            message: 'Please there is no cover/price for this service. Either set service price or try another service. Setting price at zero ',\n            type: 'is-danger',\n            dismissible: true,\n            pauseOnHover: true,\n          })\n          await setSellingPrice(0)   \n     }\n\n     }\n\n    }\n\n     const getSearchfacility=async (service)=>{\n      //  console.log(JSON.stringify(service))\n        if (!service){\n            //\"clear stuff\"\n            setProductId(\"\")\n            setName(\"\")\n            setBaseunit(\"\")\n            setInventoryId(\"\")\n            setSellingPrice(0)\n            setInvQuantity(\"\")\n            setQAmount(null)\n            setCostprice(\"\")\n            setContracts(\"\")\n            setCategory(\"\")\n            setInventoryId(\"\")\n            setBilllingId(\"\")\n        \n           //setCalcAmount(null)\n            return\n        }\n         setContracts(service.contracts)\n         setProductId(service.productId)\n         setName(service.name)\n         setCategory(service.category)\n         setBaseunit(service.baseunit)\n         setInventoryId(service.inventoryId)\n         setBilllingId(service._id)\n         await setObj(service)\n        console.log(service.contracts)\n        \n     }\n\n\n    const getSearchfacility1=async (person)=>{\n       \n       \n        if (!person){\n             //\"clear stuff\"\n           /*   setProductId(\"\")\n             setName(\"\")\n             setBaseunit(\"\")\n             setInventoryId(\"\")\n             setSellingPrice(\"\")\n             setInvQuantity(\"\")\n             setQAmount(null)\n             setCostprice(\"\") */\n             setPatient(\"\")\n             setSource(\"\")\n             return\n         }\n         await setPatient(person)\n          setSource(person.firstname+\" \"+ person.lastname)\n     }\n\n     useEffect(() => {\n         setCurrentUser(user)\n         //console.log(currentUser)\n         return () => {\n         \n         }\n     }, [user])\n \n     const handleUpdateTotal=async ()=>{\n        await setTotalamount(prevtotal=>Number(prevtotal) + Number(calcamount))\n     }\n \n     const handleChangeType=async (e)=>{\n        // console.log(e.target.value)\n         await setType(e.target.value)\n     }\n \n     const handleAmount= async()=>{\n        // await setQAmount(null)\n        // alert(\"Iam chaning qamount\")\n     }\n\n     const handleClickProd=async()=>{\n       /*   console.log(\"amount: \",productItemI.amount)\n         console.log(\"qamount: \",qamount)\n         console.log(\"calcamount: \",calcamount) */\n        if ( source===\"\"||quantity===\"\"|| obj===\"\"|| quantity===0||paymentmode===\"\" ){\n            toast({\n                message: 'You need to choose a service, billing mode and quantity to proceed',\n                type: 'is-danger',\n                dismissible: true,\n                pauseOnHover: true,\n              })\n              return \n        }\n\n         await setSuccess(false)\n         await setProductItem(\n             prevProd=>prevProd.concat(productItemI)\n         )\n        handleUpdateTotal()\n            // generate billing info\n           \n        //update order\n        \n      /*   OrderServ.patch(medication._id,{\n            order_status:\"Billed\", //Billed\n            billInfo,\n        }).then((resp)=>{\n           // medication=resp\n           // console.log(resp)\n             handleRow(resp) \n            //update dispense\n\n        })\n        .catch((err)=>{\n            console.log(err)\n        })\n         */\n        //update status(billed) + action()\n        //?attached chosen product to medication\n        //dispense helper?\n\n         setName(\"\")\n         setBaseunit(\"\")\n         setQuantity(1)\n         setInventoryId(\"\")\n         setSellingPrice(0)\n         setInvQuantity(\"\")\n            // handleAmount()\n        setCalcAmount(0)\n        await setSuccess(true)\n        getSearchfacility(false)\n        setObj(\"\")\n        console.log(sellingprice)\n        /* console.log(qamount)\n        console.log(productItem) */\n        setChangeAmount(true)\n        setContracts(\"\")\n       // alert(\"finished\")\n     }\n  \n \n     const handleQtty=async(e)=>{\n        /*  if (invquantity<e.target.value){\n             toast({\n                 message: 'You can not sell more quantity than exist in inventory ' ,\n                 type: 'is-danger',\n                 dismissible: true,\n                 pauseOnHover: true,\n               })\n             return\n         } */\n         setQuantity(e.target.value)\n         if (e.target.vlue===\"\"){\n            setQuantity(1)\n         }\n         /* calcamount1=quantity*sellingprice\n         await setCalcAmount(calcamount1)\n         console.log(calcamount) */\n     }\n \n     useEffect( () => {\n          setProductEntry({\n             \n             date,\n             documentNo,\n             type,\n             totalamount,\n             source,\n         })\n       // setCalcAmount(quantity*sellingprice) \n         return () => {\n             \n         }\n     },[date])\n \n     const resetform=()=>{\n      setType(\"Sales\")\n     setDocumentNo(\"\")\n     setTotalamount(\"\")\n     setProductId(\"\")\n     setSource(\"\")\n     setDate(\"\")\n     setName(\"\")\n     setBaseunit()\n     setCostprice()\n     setProductItem([])\n     setContracts(\"\")\n     }\n\n\n     const handleCreateBill= async()=>{ //handle selected single order\n           \n\n           //documentation\n           let serviceList=[]\n           let document={}\n           \n             if (user.currentEmployee){\n             document.facility=user.currentEmployee.facilityDetail._id \n             document.facilityname=user.currentEmployee.facilityDetail.facilityName // or from facility dropdown\n             }\n            document.documentdetail=productItem\n            console.log(document.documentdetail)\n             document.documentname=\"Billed Orders\" //state.DocumentClassModule.selectedDocumentClass.name\n            // document.documentClassId=state.DocumentClassModule.selectedDocumentClass._id\n             document.location=state.employeeLocation.locationName+\" \"+state.employeeLocation.locationType\n             document.locationId=state.employeeLocation.locationId\n             document.client=patient._id\n             document.clientname=patient.firstname+ \" \"+patient.middlename+\" \"+patient.lastname\n             document.clientobj=patient\n             document.createdBy=user._id\n             document.createdByname=user.firstname+ \" \"+user.lastname\n             document.status=\"completed\"\n             console.log(document)\n        \n             //order\n             document.documentdetail.forEach(async (element)=> {\n          \n                let orderinfo={ //for reach document\n                documentationId:\"\", //tbf\n                order_category:element.category, //category\n                order: element.name,  //name\n                instruction:\"\",\n                destination_name: document.facilityname, //facilityname\n                destination: document.facility, //facility id\n                order_status:\"Billed\",\n                payer:element.billMode.organizationName,\n                paymentmode:element.billMode.paymentmode,\n                \n                requestingdoctor_Id: document.createdBy, \n                requestingdoctor_Name: document.createdByname,\n                requestingdoctor_locationid:document.locationId,\n                requestingdoctor_locationName:document.location,\n                requestingdoctor_facilityId:document.facility,\n                requestingdoctor_facilityname:document.facilityname,\n             \n                clientId: document.client,\n                clientname:document.clientname,\n                client:document.clientobj,\n              \n                order_action:[],\n                medication_action:[],\n                treatment_action:[]\n             }\n\n             let billInfo={\n                orderInfo:{\n                    orderId:\"\", //tbf\n                    orderObj:orderinfo,\n                  },\n                  serviceInfo:{            \n                    price: element.sellingprice,\n                    quantity: element.quantity,\n                    productId: element.productId,\n                    name: element.name,\n                    baseunit: element.baseunit,\n                    amount:element.amount,\n                    billingId:element.billingId,\n                    billingContract:element.billingContract,\n                    createdby:user._id,\n                  },\n                  paymentInfo:{\n                    amountDue:element.amount,\n                    paidup:0,\n                    balance:element.amount,\n                    paymentDetails:[]\n              \n                  },\n                  participantInfo:{\n                    billingFacility:orderinfo.destination,\n                    billingFacilityName:orderinfo.destination_name,\n                    locationId:document.locationId, //selected location,\n                    clientId:orderinfo.clientId,\n                    client:orderinfo.client,\n                    paymentmode:element.billMode\n                  },\n                  createdBy:user._id,\n                  billing_status:\"Unpaid\"\n                }\n                let items={\n                    orderinfo,\n                    billInfo\n                }\n\n                serviceList.push(items)\n\n            })\n\n            console.log(\"==================\")\n            console.log(document,serviceList)\n            \n        \n        let confirm =window.confirm(`You are about to bill ${document.clientname} for ${serviceList.length} service(s)?`)\n    if (confirm){\n            await BillCreateServ.create({\n                document,\n                serviceList\n            }).then((res)=>{\n                        setSuccess(true)\n                        toast({\n                            message: 'Billed Orders created succesfully',\n                            type: 'is-success',\n                            dismissible: true,\n                            pauseOnHover: true,\n                            })\n                            setSuccess(false)\n                            setProductItem([])\n                            setCalcAmount(0);\n                            const today=new Date().toLocaleString()\n                            //console.log(today)\n                            setDate(today)\n                            const invoiceNo=random(6,'uppernumeric')\n                            setDocumentNo(invoiceNo)\n\n                    })\n                    .catch((err)=>{\n                        toast({\n                            message: 'Error creating Billed Orders ' + err,\n                            type: 'is-danger',\n                            dismissible: true,\n                            pauseOnHover: true,\n                            })\n                    }) \n   \n            }\n\n\n\n\n\n\n       /*  const    newProductEntryModule={\n            selectedMedication:{},\n            show :'create'\n        }\n      await setState((prevstate)=>({...prevstate, medicationModule:newProductEntryModule})) */\n       //console.log(state)\n      // ProductEntry.show=!ProductEntry.show\n    \n    }\n \n     const onSubmit = async(e) =>{\n         e.preventDefault();\n         setMessage(\"\")\n         //setError(false)\n         setSuccess(false)\n         await setProductEntry({\n             \n             date,\n             documentNo,\n             type,\n             totalamount,\n             source,\n         })\n         productEntry.productitems=productItem\n         productEntry.createdby=user._id\n         productEntry.transactioncategory=\"debit\"\n        \n          // console.log(\"b4 facility\",productEntry);\n           if (user.currentEmployee){\n          productEntry.facility=user.currentEmployee.facilityDetail._id  // or from facility dropdown\n           }else{\n             toast({\n                 message: 'You can not remove inventory from any organization',\n                 type: 'is-danger',\n                 dismissible: true,\n                 pauseOnHover: true,\n               }) \n               return\n           }\n           \n           if (state.StoreModule.selectedStore._id){\n             productEntry.storeId=state.StoreModule.selectedStore._id\n           }else{\n             toast({\n                 message: 'You need to select a store before removing inventory',\n                 type: 'is-danger',\n                 dismissible: true,\n                 pauseOnHover: true,\n               }) \n               return\n \n           }\n           \n \n       } \n \n  \n    const handleChangeAmount=()=>{\n        setChangeAmount((rev)=>(!rev))\n        \n    }\n\n    const newclient=async ()=>{\n        await  setProductItem([])\n    }\n\n    const createObj= (pay,name,cover,type)=>{\n      let details={}\n        details= {...pay}\n        details.type=type\n\n    return {\n            name,\n            value:cover,\n            detail:details,\n            type,\n        }\n\n    }\n\n    useEffect(() => {\n        \n        //update selling price\n        if (!!billMode && !!contracts){\n           // console.log(contracts)\n            checkPrice(contracts,billMode)\n        }\n       \n        return () => {\n           \n        }\n    }, [obj])\n\n   useEffect(() => {\n       \n        setProductItem([])\n        setTotalamount(0)\n        const paymentoptions= []\n       // const info = client.paymentinfo\n        let billme\n       let obj\n       if (!!patient){\n          // console.log(patient)\n\n        patient.paymentinfo.forEach((pay,i)=>{ \n           if (pay.active){\n       \n            switch(pay.paymentmode) {\n                case 'Cash':\n                  // code block\n                  obj=createObj(pay,\"Cash\",\"Cash\",\"Cash\" )\n                \n                  paymentoptions.push(obj)\n                  setPaymentMode(\"Cash\")\n                  billme=obj\n                 // console.log(\"billme\",billme)\n                  break;\n                case 'Family':\n                  // code block\n                  obj=createObj(pay,\"Family Cover\",\"familyCover\", \"Family Cover\")\n                  paymentoptions.push(obj)\n                  setPaymentMode(\"Family Cover\")\n                  billme=obj\n                 // console.log(\"billme\",billme)\n                  break;\n                case 'Company':\n                  // code block\n                  let name=\"Company: \" + pay.organizationName + \"(\" + pay.plan+\")\"\n\n                  obj=createObj(pay,name,\"CompanyCover\", \"Company Cover\" )\n                      paymentoptions.push(obj)\n                      setPaymentMode(\"Company: \" + pay.organizationName + \"(\" + pay.plan+\")\")\n                     billme=obj\n                    // console.log(\"billme\",billme)\n                  break;\n                case 'HMO':\n                  // code block\n                  console.log(pay)\n                 let  sname=\"HMO: \" + pay.organizationName + \"(\" + pay.plan+\")\"\n\n                  obj=createObj(pay,sname,\"HMOCover\", \"HMO Cover\" )\n                      paymentoptions.push(obj)\n                      setPaymentMode(\"HMO: \" + pay.organizationName + \"(\" + pay.plan+\")\")\n                     billme=obj\n                   //  console.log(\"billme\",billme)\n                  break;\n                default:\n                  // code block\n              }\n            }\n            })\n                    \n          \n        setPaymentOptions(paymentoptions)\n        setBillMode(billme)\n       }\n       //console.log(paymentoptions)\n       // console.log(billMode)\n        return () => {\n           \n        }\n    }, [source]) \n\n\n     useEffect(() => {\n         console.log(\"startup\")\n       // const medication =state.medicationModule.selectedMedication\n         const today=new Date().toLocaleString()\n         //console.log(today)\n         setDate(today)\n         const invoiceNo=random(6,'uppernumeric')\n         setDocumentNo(invoiceNo)\n         return () => {\n            console.log(\"closeup\")\n            const today=new Date().toLocaleString()\n            //console.log(today)\n            setDate(today)\n            const invoiceNo=random(6,'uppernumeric')\n            setDocumentNo(invoiceNo)\n            setCalcAmount(0)\n             \n         }\n     }, [])\n\n     useEffect(() => {\n        calcamount1=quantity*sellingprice\n         setCalcAmount(calcamount1)\n         //console.log(calcamount1)\n         setChangeAmount(true)\n         return () => {\n            \n        }\n    }, [quantity,sellingprice])\n\n    useEffect(() => {\n        // console.log(\"success\", success)\n         if (success){\n             setSuccess(false)\n         }\n       \n      }, [success])\n \n      useEffect(() => {\n         // console.log(\"success\", success)\n          if (success1){\n              setSuccess1(false)\n          }\n        \n       }, [success1])\n    \n    useEffect(() => {\n        if (!!billMode && !!contracts){\n            //console.log(contracts)\n            checkPrice(contracts,billMode)\n        }\n        \n        return () => {\n            \n        }\n    }, [billMode])\n\n    useEffect(() => {\n       // console.log(sellingprice)\n        return () => {\n            \n        }\n    }, [sellingprice])\n\n    useEffect(() => {\n        getSearchfacility1(state.ClientModule.selectedClient )\n        \n        /* appointee=state.ClientModule.selectedClient \n        console.log(appointee.firstname) */\n        return () => {\n           \n        }\n    }, [state.ClientModule.selectedClient ])\n\n    const handleRemoveBill=(item,index)=>{\n        setProductItem(prev=>prev.filter((el,i)=>i!==index))\n    }\n\n// console.log(\"simpa\")\n     return (\n         <>\n             <div className=\"card card-overflow\">\n             <div className=\"card-header\">\n                 <p className=\"card-header-title\">\n                     Bill Service\n                 </p>\n                {/*  <button className=\"button is-success is-small btnheight mt-2\" onClick={showDocumentation}>Documentation</button> */}\n             </div>\n             <div className=\"card-content \">\n    \n             <form onSubmit={onSubmit}> {/* handleSubmit(onSubmit) */}\n             <div className=\"field is-horizontal\">\n             <div className=\"field-body\">\n            {/*  <div className=\"field\">    \n                 <div className=\"control\">\n                     <div className=\"select is-small\">\n                         <select name=\"type\" value={type} onChange={handleChangeType} className=\"selectadd\">\n                            <option value=\"\">Choose Type </option>\n                             <option value=\"Dispense\">Dispense</option>\n                             <option value=\"Bill\">Bill </option> */}\n                             {/* <option value=\"Dispense\">Dispense</option>\n                             <option value=\"Audit\">Audit</option> */}\n                 {/*         </select>\n                     </div>\n                 </div>\n             </div>\n */}\n              {state.ClientModule.selectedClient.firstname !==undefined ? <div className=\"field\"> \n              <label className=\"label is-size-7\" > {state.ClientModule.selectedClient.firstname} {state.ClientModule.selectedClient .lastname}</label>\n               </div> \n               :\n             <div className=\"field\">\n                 <ClientSearch  getSearchfacility={getSearchfacility1} clear={success1} /> \n                     {/* <p className=\"control has-icons-left has-icons-right\">\n                         <input className=\"input is-small\"  ref={register({ required: true })}  value={source} name=\"client\" type=\"text\" onChange={e=>setSource(e.target.value)} placeholder=\"Client\" />\n                         <span className=\"icon is-small is-left\">\n                             <i className=\"fas fa-hospital\"></i>\n                         </span>                    \n                     </p> */}\n                 </div>}\n                 <div className=\"field\">    \n                 <div className=\"control\">\n                     <div className=\"select is-small \">\n                         <select name=\"paymentmode\" value={paymentmode} onChange={(e)=>handleChangeMode(e.target.value)} className=\"selectadd\" >\n                         <option value=\"\">Billing Mode </option>\n                           {paymentOptions.map((option,i)=>(\n                               <option key={i} value={option.details}> {option.name}</option>\n                           ))}\n                           \n                            \n                            {/*  <option value=\"Cash\">Cash</option>\n                             <option value=\"Family\">Family </option>\n                            <option value=\"Company Cover\">Company Cover</option>\n                             <option value=\"HMO\">HMO</option> */}\n                         </select>\n                     </div>\n                 </div>\n             </div>\n            \n             </div>\n             </div> {/* horizontal end */}\n            {/*  <div className=\"field\">\n                 <p className=\"control has-icons-left\"> // Audit/initialization/Purchase Invoice \n                     <input className=\"input is-small\"  ref={register({ required: true })} name=\"type\" type=\"text\" placeholder=\"Type of Product Entry\"/>\n                     <span className=\"icon is-small is-left\">\n                     <i className=\" fas fa-user-md \"></i>\n                     </span>\n                 </p>\n             </div> */}\n                <div className=\"field is-horizontal\">\n                <div className=\"field-body\">\n                <div className=\"field\">\n                 <p className=\"control has-icons-left has-icons-right\">\n                     <input className=\"input is-small\"  /* ref={register({ required: true })} */ value={date}  name=\"date\" type=\"text\" onChange={e=>setDate(e.target.value)} placeholder=\"Date\" />\n                     <span className=\"icon is-small is-left\">\n                         <i className=\"fas fa-map-signs\"></i>\n                     </span>\n                 </p>\n             </div>\n             <div className=\"field\">\n                 <p className=\"control has-icons-left\">\n                     <input className=\"input is-small\" /* ref={register} */ name=\"documentNo\" value={documentNo} type=\"text\" onChange={e=>setDocumentNo(e.target.value)} placeholder=\" Invoice Number\"/>\n                     <span className=\"icon is-small is-left\">\n                     <i className=\"fas fa-phone-alt\"></i>\n                     </span>\n                 </p>\n             </div>\n             <div className=\"field\">\n                 <p className=\"control has-icons-left\">\n                     <input className=\"input is-small\" /* ref={register({ required: true })} */ value={totalamount} name=\"totalamount\" type=\"text\" onChange={e=>setTotalamount(e.target.value)} placeholder=\" Total Amount\"/>\n                     <span className=\"icon is-small is-left\">\n                     <i className=\"fas fa-coins\"></i>\n                     </span>\n                 </p>\n             </div>\n \n                 </div> \n                 </div> \n                \n                 </form>   \n                \n        \n             <label className=\"label is-small\">Choose Service Item:</label>\n          <div className=\"field is-horizontal\">\n             <div className=\"field-body\">\n             <div className=\"field is-expanded\"  /* style={ !user.stacker?{display:\"none\"}:{}} */ >\n                     <ServiceSearch  getSearchfacility={getSearchfacility} clear={success} mode={billMode}/> \n                     <p className=\"control has-icons-left \" style={{display:\"none\"}}>\n                         <input className=\"input is-small\" /* ref={register ({ required: true }) }  *//* add array no */  value={productId} name=\"productId\" type=\"text\" onChange={e=>setProductId(e.target.value)} placeholder=\"Product Id\" />\n                         <span className=\"icon is-small is-left\">\n                         <i className=\"fas  fa-map-marker-alt\"></i>\n                         </span>\n                     </p>\n                     \n                {/* {sellingprice}  {sellingprice &&   \"N\"}{sellingprice} {sellingprice &&   \"per\"}  {baseunit} {invquantity} {sellingprice &&   \"remaining\"}  */}\n                 </div>\n             </div>\n         </div>\n         <div className=\"field is-horizontal\">\n             <div className=\"field-body\" >\n                 <div className=\"field\" style={{width:\"40%\"}}>\n                 <p className=\"control has-icons-left\" >\n                     <input className=\"input is-small\"  /* ref={register({ required: true })} */ name=\"quantity\" value={quantity} type=\"text\" onChange={ e=> handleQtty(e)} placeholder=\"Quantity\"  />\n                     <span className=\"icon is-small is-left\">\n                     <i className=\"fas fa-hashtag\"></i>\n                     </span>\n                    \n                 </p>\n        {/*  <label >{baseunit}</label> */}\n             </div> \n             <div className=\"field\">\n             <label>Amount:</label>{/* <p>{quantity*sellingprice}</p> */}\n             </div>\n             <div className=\"field\" style={{width:\"40%\"}}>\n                 <p className=\"control has-icons-left \" /* style={{display:\"none\"}} */>\n                     <input className=\"input is-small\"  name=\"qamount\" disabled={changeAmount} value={calcamount} type=\"text\"  onChange={async e=> await setCalcAmount(e.target.value)}  placeholder=\"Amount\"  />\n                     <span className=\"icon is-small is-left\">\n                     <i className=\"fas fa-hashtag\"></i>\n                     </span>\n                 </p>\n                 {(user.currentEmployee?.roles.includes('Adjust Price')||user.currentEmployee?.roles.length===0||user.stacker )&& <button className=\"button is-small is-success btnheight\" onClick={handleChangeAmount}>Adjust</button>}\n \n             </div> \n             <div className=\"field\">\n             <p className=\"control\">\n                     <button className=\"button is-info is-small  is-pulled-right\">\n                       <span className=\"is-small\" onClick={handleClickProd}> +</span>\n                     </button>\n                 </p>\n             </div>\n             </div>\n          </div>\n    \n        {(productItem.length>0) && <div>\n             <label>Service Items:</label>\n             <div class=\"table-container\">\n          <table className=\"table is-striped  is-hoverable is-fullwidth is-scrollable \">\n                 <thead>\n                     <tr>\n                     <th><abbr title=\"Serial No\">S/No</abbr></th>\n                     <th><abbr title=\"Category\">Category</abbr></th>\n                     <th><abbr title=\"Name\">Name</abbr></th>\n                     <th><abbr title=\"Quantity\">Quanitity</abbr></th>\n                     <th><abbr title=\"Unit\">Unit</abbr></th>\n                     <th><abbr title=\"Selling Price\">Selling Price</abbr></th>\n                     <th><abbr title=\"Amount\">Amount</abbr></th>\n                     <th><abbr title=\"Billing Mode\">Mode</abbr></th>\n                     <th><abbr title=\"Actions\">Actions</abbr></th>\n                     </tr>\n                 </thead>\n                 <tfoot>\n                     \n                 </tfoot>\n                 <tbody>\n                    { productItem.map((ProductEntry, i)=>(\n                          <tr key={i}>\n                         <th>{i+1}</th>\n                         <td>{ProductEntry.category}</td>\n                         <td>{ProductEntry.name}</td>\n                         <th>{ProductEntry.quantity}</th>\n                         <td>{ProductEntry.baseunit}</td>\n                         <td>{ProductEntry.sellingprice}</td>\n                         <td>{ProductEntry.amount}</td>\n                         <td>{ProductEntry.billMode.type}</td>\n                         <td onClick={()=>handleRemoveBill(ProductEntry,i)}><span className=\"showAction\"  >x</span></td>\n                         </tr>\n                     ))}\n                 </tbody>\n                 </table>\n                 </div>\n                 <div className=\"field mt-2 is-grouped\">\n                 <p className=\"control\">\n                     <button className=\"button is-success is-small\" disabled={!productItem.length>0} onClick={handleCreateBill}>\n                        Done\n                     </button>\n                 </p>\n                {/*  <p className=\"control\">\n                     <button className=\"button is-warning is-small\" disabled={!productItem.length>0} onClick={onSubmit} >\n                         Clear\n                     </button>\n                 </p> */}\n                 </div>\n                 </div>\n            \n             }\n             \n             \n             </div>\n             </div>\n           \n         </>\n     )\n    \n }\n\n export  function ServiceSearch2({getSearchfacility,clear}) {\n    \n    const productServ=client.service('billing')\n    const [facilities,setFacilities]=useState([])\n     // eslint-disable-next-line\n     const [searchError, setSearchError] =useState(false)\n     // eslint-disable-next-line\n    const [showPanel, setShowPanel] =useState(false)\n     // eslint-disable-next-line\n   const [searchMessage, setSearchMessage] = useState(\"\") \n   // eslint-disable-next-line \n   const [simpa,setSimpa]=useState(\"\")\n   // eslint-disable-next-line \n   const [chosen,setChosen]=useState(false)\n   // eslint-disable-next-line \n   const [count,setCount]=useState(0)\n   const inputEl=useRef(null)\n   const [val,setVal]=useState(\"\")\n   const {user} = useContext(UserContext) \n   const {state}=useContext(ObjectContext)\n    const [productModal,setProductModal]=useState(false)\n\n   const handleRow= async(obj)=>{\n        await setChosen(true)\n        //alert(\"something is chaning\")\n       await setSimpa(obj.name)\n       getSearchfacility(obj)\n        // setSelectedFacility(obj)\n        setShowPanel(false)\n       // await setCount(2)\n        /* const    newfacilityModule={\n            selectedFacility:facility,\n            show :'detail'\n        }\n   await setState((prevstate)=>({...prevstate, facilityModule:newfacilityModule})) */\n   //console.log(state)\n    }\n    const handleBlur=async(e)=>{\n         /* if (count===2){\n             console.log(\"stuff was chosen\")\n         } */\n       \n       /*  console.log(\"blur\")\n         setShowPanel(false)\n        console.log(JSON.stringify(simpa))\n        if (simpa===\"\"){\n            console.log(facilities.length)\n            setSimpa(\"abc\")\n            setSimpa(\"\")\n            setFacilities([])\n            inputEl.current.setValue=\"\"\n        }\n        console.log(facilities.length)\n        console.log(inputEl.current) */\n    }\n    const handleSearch=async(value)=>{\n        setVal(value)\n        if (value===\"\"){\n            setShowPanel(false)\n            getSearchfacility(false)\n            return\n        }\n        const field='name' //field variable\n\n       \n        if (value.length>=3 ){\n            productServ.find({query: {     //service\n                 [field]: {\n                     $regex:value,\n                     $options:'i'\n                    \n                 },\n                 facility: user.currentEmployee.facilityDetail._id,\n                 //storeId: state.StoreModule.selectedStore._id,\n                 $limit:10,\n                 $sort: {\n                     createdAt: -1\n                   }\n                     }}).then((res)=>{\n              //console.log(\"product  fetched successfully\") \n              //console.log(res.data) \n                setFacilities(res.data)\n                 setSearchMessage(\" product  fetched successfully\")\n                 setShowPanel(true)\n             })\n             .catch((err)=>{\n                toast({\n                    message: 'Error creating ProductEntry ' + err,\n                    type: 'is-danger',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  })\n             })\n         }\n        else{\n            //console.log(\"less than 3 \")\n           // console.log(val)\n            setShowPanel(false)\n            await setFacilities([])\n           // console.log(facilities)\n        }\n    }\n\n    const handleAddproduct =()=>{\n        setProductModal(true) \n    }\n    const handlecloseModal =()=>{\n        setProductModal(false)\n        handleSearch(val)\n    }\n    useEffect(() => {\n       if (clear){\n          // console.log(\"success has changed\",clear)\n           setSimpa(\"\")\n       }\n        return () => {\n            \n        }\n    }, [clear] )\n    return (\n        <div>\n            <div className=\"field\">\n                <div className=\"control has-icons-left  \">\n                    <div className={`dropdown ${showPanel?\"is-active\":\"\"}`} style={{width:\"100%\"}}>\n                        <div className=\"dropdown-trigger\" style={{width:\"100%\"}}>\n                            <DebounceInput className=\"input is-small  is-expanded\" \n                                type=\"text\" placeholder=\"Search Services\"\n                                value={simpa}\n                                minLength={3}\n                                debounceTimeout={400}\n                                onBlur={(e)=>handleBlur(e)}\n                                onChange={(e)=>handleSearch(e.target.value)}\n                                inputRef={inputEl}\n                                  />\n                            <span className=\"icon is-small is-left\">\n                                <i className=\"fas fa-search\"></i>\n                            </span>\n                        </div>\n                        {/* {searchError&&<div>{searchMessage}</div>} */}\n                        <div className=\"dropdown-menu expanded\" style={{width:\"100%\"}}>\n                            <div className=\"dropdown-content\">\n                          { facilities.length>0?\"\":<div className=\"dropdown-item selectadd\" /* onClick={handleAddproduct} */> <span> {val} is not in your inventory</span> </div>}\n\n                              {facilities.map((facility, i)=>(\n                                    \n                                    <div className=\"dropdown-item\" key={facility._id} onClick={()=>handleRow(facility)}>\n                                        \n                                        <div><span>{facility.name}</span></div>\n                                        <div><span><strong>{facility.quantity}</strong></span>\n                                        <span>{facility.baseunit}(s) remaining</span>\n                                        <span className=\"padleft\"><strong>Price:</strong> N{facility.sellingprice}</span></div>\n                                        \n                                    </div>\n                                    \n                                    ))}\n                                    \n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            \n        </div>\n    )\n}"]},"metadata":{},"sourceType":"module"}