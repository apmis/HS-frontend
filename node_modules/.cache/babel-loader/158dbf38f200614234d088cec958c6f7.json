{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _regeneratorRuntime from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useContext,useEffect,useRef}from'react';//import {Route, Switch,  useRouteMatch, Link, NavLink, useHistory} from 'react-router-dom'\nimport client from'../../feathers';import{DebounceInput}from'react-debounce-input';//import { useForm } from \"react-hook-form\";\n//import {useHistory} from 'react-router-dom'\nimport{UserContext,ObjectContext}from'../../context';import{toast}from'bulma-toast';import{formatDistanceToNowStrict,format}from'date-fns';// eslint-disable-next-line\n//const searchfacility={};\nexport default function EmployeeSearch(_ref){var id=_ref.id,getSearchfacility=_ref.getSearchfacility,clear=_ref.clear;var ClientServ=client.service('employee');var _useState=useState([]),_useState2=_slicedToArray(_useState,2),facilities=_useState2[0],setFacilities=_useState2[1];// eslint-disable-next-line\nvar _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),searchError=_useState4[0],setSearchError=_useState4[1];// eslint-disable-next-line\nvar _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),showPanel=_useState6[0],setShowPanel=_useState6[1];// eslint-disable-next-line\nvar _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),searchMessage=_useState8[0],setSearchMessage=_useState8[1];// eslint-disable-next-line \nvar _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),simpa=_useState10[0],setSimpa=_useState10[1];// eslint-disable-next-line \nvar _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),chosen=_useState12[0],setChosen=_useState12[1];// eslint-disable-next-line \nvar _useState13=useState(0),_useState14=_slicedToArray(_useState13,2),count=_useState14[0],setCount=_useState14[1];var inputEl=useRef(null);var _useState15=useState(\"\"),_useState16=_slicedToArray(_useState15,2),val=_useState16[0],setVal=_useState16[1];var _useContext=useContext(UserContext),user=_useContext.user;var _useContext2=useContext(ObjectContext),state=_useContext2.state;var _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),productModal=_useState18[0],setProductModal=_useState18[1];var getInitial=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(id){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!id){_context.next=3;break;}_context.next=3;return ClientServ.get(id).then(function(resp){handleRow(resp);}).catch(function(err){return console.log(err);});case 3:case\"end\":return _context.stop();}}},_callee);}));return function getInitial(_x){return _ref2.apply(this,arguments);};}();useEffect(function(){getInitial(id);return function(){};},[]);var handleRow=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(obj){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return setChosen(true);case 2:_context2.next=4;return setSimpa(obj.firstname+\" \"+obj.lastname+\"  (\"+obj.profession+\", \"+obj.department+\" Department )\");case 4:getSearchfacility(obj);// setSelectedFacility(obj)\nsetShowPanel(false);_context2.next=8;return setCount(2);case 8:case\"end\":return _context2.stop();}}},_callee2);}));return function handleRow(_x2){return _ref3.apply(this,arguments);};}();var handleBlur=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(e){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:case\"end\":return _context3.stop();}}},_callee3);}));return function handleBlur(_x3){return _ref4.apply(this,arguments);};}();var handleSearch=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(val){var field;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:setVal(val);if(!(val===\"\")){_context4.next=5;break;}setShowPanel(false);getSearchfacility(false);return _context4.abrupt(\"return\");case 5:field='name';//field variable\n/* name: { type: String, required: true },\n        locationType: { type: String }, */if(!(val.length>=3)){_context4.next=10;break;}ClientServ.find({query:{$or:[{firstname:{$regex:val,$options:'i'}},{lastname:{$regex:val,$options:'i'}},{profession:{$regex:val,$options:'i'}},{department:{$regex:val,$options:'i'}}/* { clientTags: {\n                        $regex:val,\n                        $options:'i' \n                    }},\n                    { mrn: {\n                        $regex:val,\n                        $options:'i' \n                    }},\n                    { specificDetails: {\n                        $regex:val,\n                        $options:'i' \n                    }}, */],facility:user.currentEmployee.facilityDetail._id,//storeId: state.StoreModule.selectedStore._id,\n$limit:20,$sort:{lastname:1}}}).then(function(res){console.log(\"employees  fetched successfully\");console.log(res.data);setFacilities(res.data);setSearchMessage(\" Employees  fetched successfully\");setShowPanel(true);}).catch(function(err){toast({message:'Error searching Employees '+err,type:'is-danger',dismissible:true,pauseOnHover:true});});_context4.next=16;break;case 10:console.log(\"less than 3 \");console.log(val);setShowPanel(false);_context4.next=15;return setFacilities([]);case 15:console.log(facilities);case 16:case\"end\":return _context4.stop();}}},_callee4);}));return function handleSearch(_x4){return _ref5.apply(this,arguments);};}();var handleAddproduct=function handleAddproduct(){setProductModal(true);};var handlecloseModal=function handlecloseModal(){setProductModal(false);handleSearch(val);};useEffect(function(){if(clear){console.log(\"success has changed\",clear);setSimpa(\"\");}return function(){};},[clear]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsx(\"div\",{className:\"control has-icons-left  \",children:/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown \".concat(showPanel?\"is-active\":\"\"),style:{width:\"100%\"},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown-trigger\",style:{width:\"100%\"},children:[/*#__PURE__*/_jsx(DebounceInput,{className:\"input is-small  is-expanded mb-0\",type:\"text\",placeholder:\"Search for Employee\",value:simpa,minLength:3,debounceTimeout:400,onBlur:function onBlur(e){return handleBlur(e);},onChange:function onChange(e){return handleSearch(e.target.value);},inputRef:inputEl}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-search\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"dropdown-menu expanded\",style:{width:\"100%\"},children:/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown-content\",children:[facilities.length>0?\"\":/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown-item selectadd\"/* onClick={handleAddproduct} */,children:[\" \",/*#__PURE__*/_jsxs(\"span\",{children:[\" \",val,\" is not an employee\"]}),\" \"]}),facilities.map(function(facility,i){return/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown-item selectadd \",onClick:function onClick(){return handleRow(facility);},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{children:facility.lastname}),/*#__PURE__*/_jsx(\"span\",{className:\"padleft\",children:facility.firstname}),/*#__PURE__*/_jsx(\"span\",{className:\"padleft\",children:facility.profession}),/*#__PURE__*/_jsxs(\"span\",{className:\"padleft\",children:[facility.department,\" Department\"]})]}),/*#__PURE__*/_jsx(\"br\",{})]},facility._id);})]})})]})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal \".concat(productModal?\"is-active\":\"\"),children:[/*#__PURE__*/_jsx(\"div\",{className:\"modal-background\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-card\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"modal-card-head\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"modal-card-title\",children:\"Choose Store\"}),/*#__PURE__*/_jsx(\"button\",{className:\"delete\",\"aria-label\":\"close\",onClick:handlecloseModal})]}),/*#__PURE__*/_jsx(\"section\",{className:\"modal-card-body\"})]})]})]});}","map":{"version":3,"sources":["/home/mfybaby/Documents/HealthStack2/HS-frontend/src/components/helpers/EmployeeSearch.js"],"names":["React","useState","useContext","useEffect","useRef","client","DebounceInput","UserContext","ObjectContext","toast","formatDistanceToNowStrict","format","EmployeeSearch","id","getSearchfacility","clear","ClientServ","service","facilities","setFacilities","searchError","setSearchError","showPanel","setShowPanel","searchMessage","setSearchMessage","simpa","setSimpa","chosen","setChosen","count","setCount","inputEl","val","setVal","user","state","productModal","setProductModal","getInitial","get","then","resp","handleRow","catch","err","console","log","obj","firstname","lastname","profession","department","handleBlur","e","handleSearch","field","length","find","query","$or","$regex","$options","facility","currentEmployee","facilityDetail","_id","$limit","$sort","res","data","message","type","dismissible","pauseOnHover","handleAddproduct","handlecloseModal","width","target","value","map","i"],"mappings":"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","sourcesContent":["import React, {useState,useContext, useEffect,useRef} from 'react'\n//import {Route, Switch,  useRouteMatch, Link, NavLink, useHistory} from 'react-router-dom'\nimport client from '../../feathers'\nimport {DebounceInput} from 'react-debounce-input';\n//import { useForm } from \"react-hook-form\";\n//import {useHistory} from 'react-router-dom'\nimport {UserContext,ObjectContext} from '../../context'\nimport {toast} from 'bulma-toast'\nimport { formatDistanceToNowStrict, format } from 'date-fns'\n// eslint-disable-next-line\n//const searchfacility={};\n\n\nexport  default function EmployeeSearch({id,getSearchfacility,clear}) {\n    \n    const ClientServ=client.service('employee')\n    const [facilities,setFacilities]=useState([])\n     // eslint-disable-next-line\n     const [searchError, setSearchError] =useState(false)\n     // eslint-disable-next-line\n    const [showPanel, setShowPanel] =useState(false)\n     // eslint-disable-next-line\n   const [searchMessage, setSearchMessage] = useState(\"\") \n   // eslint-disable-next-line \n   const [simpa,setSimpa]=useState(\"\")\n   // eslint-disable-next-line \n   const [chosen,setChosen]=useState(false)\n   // eslint-disable-next-line \n   const [count,setCount]=useState(0)\n   const inputEl=useRef(null)\n   const [val,setVal]=useState(\"\")\n   const {user} = useContext(UserContext) \n   const {state}=useContext(ObjectContext)\n    const [productModal,setProductModal]=useState(false)\n\n    const getInitial=async(id)=>{\n        if(!!id){\n        await ClientServ.get(id).then((resp)=>{\n            handleRow(resp)\n        })\n        .catch((err)=>console.log(err))\n         }\n       }\n    \n        useEffect(() => {\n            getInitial(id)\n            return () => {\n                \n            }\n        }, [])\n\n   const handleRow= async(obj)=>{\n        await setChosen(true)\n        //alert(\"something is chaning\")\n      \n       \n       await setSimpa(obj.firstname + \" \"+ obj.lastname + \"  (\"+ obj.profession + \", \"+ obj.department + \" Department )\" )\n       getSearchfacility(obj)\n        // setSelectedFacility(obj)\n        setShowPanel(false)\n        await setCount(2)\n        /* const    newfacilityModule={\n            selectedFacility:facility,\n            show :'detail'\n        }\n   await setState((prevstate)=>({...prevstate, facilityModule:newfacilityModule})) */\n   //console.log(state)\n    }\n\n    const handleBlur=async(e)=>{\n       /*   if (count===2){\n             console.log(\"stuff was chosen\")\n         } */\n       \n       /*  console.log(\"blur\")\n         setShowPanel(false)\n        console.log(JSON.stringify(simpa))\n        if (simpa===\"\"){\n            console.log(facilities.length)\n            setSimpa(\"abc\")\n            setSimpa(\"\")\n            setFacilities([])\n            inputEl.current.setValue=\"\"\n        }\n        console.log(facilities.length)\n        console.log(inputEl.current) */\n    }\n    const handleSearch=async(val)=>{\n        setVal(val)\n        if (val===\"\"){\n            setShowPanel(false)\n            getSearchfacility(false)\n            return\n        }\n        const field='name' //field variable\n        /* name: { type: String, required: true },\n        locationType: { type: String }, */\n       \n        if (val.length>=3 ){\n            ClientServ.find({query: {\n                $or:[\n                    {firstname: {\n                        $regex:val,\n                        $options:'i' \n                    }},\n                    { lastname: {\n                        $regex:val,\n                        $options:'i' \n                    }},\n                    { profession: {\n                        $regex:val,\n                        $options:'i' \n                    }},\n                    { department: {\n                        $regex:val,\n                        $options:'i' \n                    }},\n                    /* { clientTags: {\n                        $regex:val,\n                        $options:'i' \n                    }},\n                    { mrn: {\n                        $regex:val,\n                        $options:'i' \n                    }},\n                    { specificDetails: {\n                        $regex:val,\n                        $options:'i' \n                    }}, */\n                ],\n              \n                 facility: user.currentEmployee.facilityDetail._id,\n                 //storeId: state.StoreModule.selectedStore._id,\n                 $limit:20,\n                 $sort: {\n                    lastname: 1\n                   }\n                     }}).then((res)=>{\n              console.log(\"employees  fetched successfully\") \n              console.log(res.data) \n                setFacilities(res.data)\n                 setSearchMessage(\" Employees  fetched successfully\")\n                 setShowPanel(true)\n             })\n             .catch((err)=>{\n                toast({\n                    message: 'Error searching Employees ' + err,\n                    type: 'is-danger',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  })\n             })\n         }\n        else{\n            console.log(\"less than 3 \")\n            console.log(val)\n            setShowPanel(false)\n            await setFacilities([])\n            console.log(facilities)\n        }\n    }\n\n    const handleAddproduct =()=>{\n        setProductModal(true) \n    }\n    const handlecloseModal =()=>{\n        setProductModal(false)\n        handleSearch(val)\n    }\n    useEffect(() => {\n       if (clear){\n           console.log(\"success has changed\",clear)\n           setSimpa(\"\")\n       }\n        return () => {\n            \n        }\n    }, [clear] )\n    return (\n        <div>\n            <div className=\"field\">\n                <div className=\"control has-icons-left  \">\n                    <div className={`dropdown ${showPanel?\"is-active\":\"\"}`} style={{width:\"100%\"}}>\n                        <div className=\"dropdown-trigger\" style={{width:\"100%\"}}>\n                            <DebounceInput className=\"input is-small  is-expanded mb-0\" \n                                type=\"text\" placeholder=\"Search for Employee\"\n                                value={simpa}\n                                minLength={3}\n                                debounceTimeout={400}\n                                onBlur={(e)=>handleBlur(e)}\n                                onChange={(e)=>handleSearch(e.target.value)}\n                                inputRef={inputEl}\n                                  />\n                            <span className=\"icon is-small is-left\">\n                                <i className=\"fas fa-search\"></i>\n                            </span>\n                        </div>\n                        <div className=\"dropdown-menu expanded\" style={{width:\"100%\"}}>\n                            <div className=\"dropdown-content\">\n                          { facilities.length>0?\"\":<div className=\"dropdown-item selectadd\" /* onClick={handleAddproduct} */> <span> {val} is not an employee</span> </div>}\n\n                              {facilities.map((facility, i)=>(\n                                    \n                                    <div className=\"dropdown-item selectadd \" key={facility._id} onClick={()=>handleRow(facility)}>\n                                        \n                                        <div ><span>{facility.lastname}</span>\n                                        <span className=\"padleft\">{facility.firstname}</span>\n                                        <span className=\"padleft\">{facility.profession}</span>\n                                        <span className=\"padleft\">{facility.department} Department</span>\n                                         {/* <span className=\"padleft\"> {facility.dob && formatDistanceToNowStrict(new Date(facility.dob))}</span>\n                                       \n                                        <span className=\"padleft\">{facility.profession}</span>\n                                        <span className=\"padleft\">{facility.phone}</span> */}\n                                        {/* <span className=\"padleft\">{facility.email}</span> */}\n                                        </div>\n                            \n                                        <br />\n                                    </div>\n                                    \n                                    ))}\n                                    \n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div className={`modal ${productModal?\"is-active\":\"\"}` }>\n                                    <div className=\"modal-background\"></div>\n                                    <div className=\"modal-card\">\n                                        <header className=\"modal-card-head\">\n                                        <p className=\"modal-card-title\">Choose Store</p>\n                                        <button className=\"delete\" aria-label=\"close\"  onClick={handlecloseModal}></button>\n                                        </header>\n                                        <section className=\"modal-card-body\">\n                                        {/* <StoreList standalone=\"true\" /> */}\n                                        {/* <ProductCreate /> */}\n                                        </section>\n                                        {/* <footer className=\"modal-card-foot\">\n                                        <button className=\"button is-success\">Save changes</button>\n                                        <button className=\"button\">Cancel</button>\n                                        </footer> */}\n                                    </div>\n                                </div>       \n        </div>\n    )\n}"]},"metadata":{},"sourceType":"module"}