{"ast":null,"code":"import{Fragment as _Fragment}from\"react/jsx-runtime\";import _regeneratorRuntime from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _slicedToArray from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";/* eslint-disable */import React,{useState,useContext,useEffect,useRef}from'react';import client from'../../feathers';import{DebounceInput}from'react-debounce-input';import{useForm}from\"react-hook-form\";//import {useHistory} from 'react-router-dom'\nimport{UserContext,ObjectContext}from'../../context';import{toast}from'bulma-toast';import{format,formatDistanceToNowStrict}from'date-fns';import ReportCreate from'./ReportCreate';import PatientProfile from'../ClientMgt/PatientProfile';import Encounter from'../EncounterMgt/Encounter';/* import {ProductCreate} from './Products' */ // eslint-disable-next-line\n//const searchfacility={};\nimport{Accordion,AccordionItem,AccordionItemHeading,AccordionItemState,AccordionItemButton,AccordionItemPanel}from'react-accessible-accordion';// Demo styles, see 'Styles' section below for some notes on use.\nimport'react-accessible-accordion/dist/fancy-example.css';//import BillPrescriptionCreate from './BillPrescriptionCreate';\nexport default function TheatreReport(){//const {state}=useContext(ObjectContext) //,setState\n// eslint-disable-next-line\nvar _useState=useState(),_useState2=_slicedToArray(_useState,2),selectedProductEntry=_useState2[0],setSelectedProductEntry=_useState2[1];//const [showState,setShowState]=useState() //create|modify|detail\nvar _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];// eslint-disable-next-line\nvar _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),success=_useState6[0],setSuccess=_useState6[1];// eslint-disable-next-line\nvar _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),message=_useState8[0],setMessage=_useState8[1];var BillServ=client.service('bills');//const history = useHistory()\n// const {user,setUser} = useContext(UserContext)\nvar _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),facilities=_useState10[0],setFacilities=_useState10[1];// eslint-disable-next-line\nvar _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),selectedOrders=_useState12[0],setSelectedOrders=_useState12[1];//\n// eslint-disable-next-line\nvar _useContext=useContext(ObjectContext),state=_useContext.state,setState=_useContext.setState;// eslint-disable-next-line\nvar _useContext2=useContext(UserContext),user=_useContext2.user,setUser=_useContext2.setUser;return/*#__PURE__*/_jsx(\"section\",{className:\"section remPadTop\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"columns \",children:[/*#__PURE__*/_jsx(\"div\",{className:\"column is-4 \",children:/*#__PURE__*/_jsx(TheatreOrderList,{})}),/*#__PURE__*/_jsx(\"div\",{className:\"column is-5 \",children:state.financeModule.show==='detail'&&/*#__PURE__*/_jsx(TheatreNoteCreate,{})}),/*#__PURE__*/_jsx(\"div\",{className:\"column is-3 \",children:state.ClientModule.show==='detail'&&/*#__PURE__*/_jsx(PatientProfile,{})})]})});}export function TheatreOrderList(){// const { register, handleSubmit, watch, errors } = useForm();\n// eslint-disable-next-line\nvar _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),error=_useState14[0],setError=_useState14[1];// eslint-disable-next-line\nvar _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),success=_useState16[0],setSuccess=_useState16[1];// eslint-disable-next-line\nvar _useState17=useState(\"\"),_useState18=_slicedToArray(_useState17,2),message=_useState18[0],setMessage=_useState18[1];var BillServ=client.service('bills');//const history = useHistory()\n// const {user,setUser} = useContext(UserContext)\nvar _useState19=useState([]),_useState20=_slicedToArray(_useState19,2),facilities=_useState20[0],setFacilities=_useState20[1];// eslint-disable-next-line\nvar _useState21=useState(),_useState22=_slicedToArray(_useState21,2),selectedDispense=_useState22[0],setSelectedDispense=_useState22[1];//\nvar _useState23=useState([]),_useState24=_slicedToArray(_useState23,2),selectedOrders=_useState24[0],setSelectedOrders=_useState24[1];// eslint-disable-next-line\nvar _useContext3=useContext(ObjectContext),state=_useContext3.state,setState=_useContext3.setState;// eslint-disable-next-line\nvar _useContext4=useContext(UserContext),user=_useContext4.user,setUser=_useContext4.setUser;var _useState25=useState(\"\"),_useState26=_slicedToArray(_useState25,2),selectedFinance=_useState26[0],setSelectedFinance=_useState26[1];var _useState27=useState(\"\"),_useState28=_slicedToArray(_useState27,2),expanded=_useState28[0],setExpanded=_useState28[1];var _useState29=useState(\"\"),_useState30=_slicedToArray(_useState29,2),oldClient=_useState30[0],setOldClient=_useState30[1];var handleSelectedClient=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(Client){var newClientModule;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:// await setSelectedClient(Client)\nnewClientModule={selectedClient:Client,show:'detail'};_context.next=3;return setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{ClientModule:newClientModule});});case 3:case\"end\":return _context.stop();}}},_callee);}));return function handleSelectedClient(_x){return _ref.apply(this,arguments);};}();var handleChoseClient=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(client,e,order){var newClient,newProductEntryModule;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setOldClient(client.clientname);newClient=client.clientname;if(oldClient!==newClient){//alert(\"New Client Onboard\")\n//remove all checked clientsly\nselectedOrders.forEach(function(el){return el.checked=\"\";});setSelectedOrders([]);}// console.log(e.target.checked)\norder.checked=e.target.checked;_context2.next=6;return handleSelectedClient(order.participantInfo.client);case 6:_context2.next=8;return setSelectedFinance(order);case 8:newProductEntryModule={selectedFinance:order,show:'detail',state:e.target.checked};_context2.next=11;return setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{financeModule:newProductEntryModule});});case 11:if(!e.target.checked){_context2.next=16;break;}_context2.next=14;return setSelectedOrders(function(prevstate){return prevstate.concat(order);});case 14:_context2.next=17;break;case 16:setSelectedOrders(function(prevstate){return prevstate.filter(function(el){return el._id!==order._id;});});case 17:case\"end\":return _context2.stop();}}},_callee2);}));return function handleChoseClient(_x2,_x3,_x4){return _ref2.apply(this,arguments);};}();var handleMedicationRow=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(order){var newProductEntryModule;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return setSelectedFinance(order);case 2:_context3.next=4;return handleSelectedClient(order.participantInfo.client);case 4:// grab report\n// if draft show create/modify\n//if final: show final\n// console.log(order)\nnewProductEntryModule={selectedFinance:order,show:'detail',report_status:order.report_status};_context3.next=7;return setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{financeModule:newProductEntryModule});});case 7:case\"end\":return _context3.stop();}}},_callee3);}));return function handleMedicationRow(_x5){return _ref3.apply(this,arguments);};}();var handleCreateNew=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var newProductEntryModule;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:newProductEntryModule={selectedDispense:{},show:'create'};_context4.next=3;return setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{DispenseModule:newProductEntryModule});});case 3:case\"end\":return _context4.stop();}}},_callee4);}));return function handleCreateNew(){return _ref4.apply(this,arguments);};}();var handleSearch=function handleSearch(val){var field='name';//console.log(val)\nBillServ.find({query:{'participantInfo.paymentmode.detail.principalName':{$regex:val,$options:'i'},/*  $or:[\n                {\n           \n                } ,\n                {\n            'orderInfo.orderObj.clientname': {\n                        $regex:val,\n                        $options:'i'\n                    \n                    }\n                }\n                ], */ //order_category:\"Prescription\",\n$or:[{'participantInfo.paymentmode.type':\"Cash\"},{'participantInfo.paymentmode.type':\"Family Cover\"}],'orderInfo.orderObj.order_category':\"Theatre Order\",'participantInfo.billingFacility':user.currentEmployee.facilityDetail._id,billing_status:\"Unpaid\",// need to set this finally\n// storeId:state.StoreModule.selectedStore._id,\n//facility:user.currentEmployee.facilityDetail._id || \"\",\n$limit:20,$sort:{createdAt:-1}}}).then(function(res){// console.log(res)\nsetFacilities(res.groupedOrder);setMessage(\" ProductEntry  fetched successfully\");setSuccess(true);}).catch(function(err){// console.log(err)\nsetMessage(\"Error fetching ProductEntry, probable network issues \"+err);setError(true);});};var getFacilities=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){var findProductEntry;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return BillServ.find({query:{/*  $or:[\n                    {\n                       'participantInfo.paymentmode.type':\"Cash\"\n                    },\n                    {\n                       'participantInfo.paymentmode.type':\"Family Cover\"\n                    }\n                ], */'participantInfo.billingFacility':user.currentEmployee.facilityDetail._id,'orderInfo.orderObj.order_category':\"Theatre Order\",// billing_status:\"Unpaid\",  // need to set this finally\n//storeId:state.StoreModule.selectedStore._id,\n//clientId:state.ClientModule.selectedClient._id,\n$limit:1000,$sort:{createdAt:-1}}});case 2:findProductEntry=_context5.sent;_context5.next=5;return setFacilities(findProductEntry.data);case 5:case\"end\":return _context5.stop();}}},_callee5);}));return function getFacilities(){return _ref5.apply(this,arguments);};}();var handleRow=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(Client,e){return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:case\"end\":return _context6.stop();}}},_callee6);}));return function handleRow(_x6,_x7){return _ref6.apply(this,arguments);};}();//1.consider using props for global data\nuseEffect(function(){// console.log(\"started\")\ngetFacilities();BillServ.on('created',function(obj){return getFacilities();});BillServ.on('updated',function(obj){return getFacilities();});BillServ.on('patched',function(obj){return getFacilities();});BillServ.on('removed',function(obj){return getFacilities();});return function(){};},[]);useEffect(function(){return function(){};},[selectedOrders]);useEffect(function(){if(state.financeModule.show===\"create\"){selectedOrders.forEach(function(el){return el.checked=\"\";});setSelectedOrders([]);}return function(){};},[state.financeModule.show]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"level\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"level-left\",children:/*#__PURE__*/_jsx(\"div\",{className:\"level-item\",children:/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left  \",children:[/*#__PURE__*/_jsx(DebounceInput,{className:\"input is-small \",type:\"text\",placeholder:\"Search Bills\",minLength:3,debounceTimeout:400,onChange:function onChange(e){return handleSearch(e.target.value);}}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-search\"})})]})})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"level-item\",children:[\" \",/*#__PURE__*/_jsx(\"span\",{className:\"is-size-6 has-text-weight-medium\",children:\"Theatre Investigations \"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\" pullup \",children:/*#__PURE__*/_jsx(\"div\",{className:\" is-fullwidth vscrollable pr-1\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table is-striped  is-hoverable is-fullwidth is-scrollable mr-2\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Serial No\",children:\"S/No\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Date\",children:\"Date\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Client\",children:\"Client\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Description\",children:\"Test\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Amount\",children:\"Amount\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Status\",children:\"Payment Status\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Status\",children:\"Result Status\"})})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:facilities.map(function(order,i){return/*#__PURE__*/_jsxs(\"tr\",{onClick:function onClick(){return handleMedicationRow(order);},className:order._id===((selectedFinance===null||selectedFinance===void 0?void 0:selectedFinance._id)||null)?\"is-selected\":\"\",children:[/*#__PURE__*/_jsx(\"th\",{children:i+1}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{children:format(new Date(order.createdAt),'dd-MM-yy')})}),\"  \",/*#__PURE__*/_jsx(\"th\",{children:order.orderInfo.orderObj.clientname}),/*#__PURE__*/_jsx(\"th\",{children:order.serviceInfo.name}),\" \",/*#__PURE__*/_jsx(\"td\",{children:order.serviceInfo.amount}),/*#__PURE__*/_jsx(\"td\",{children:order.billing_status}),/*#__PURE__*/_jsx(\"td\",{children:order.report_status})]},order._id);})})]})})})]});}export function TheatreNoteCreate(){var _useForm=useForm(),register=_useForm.register,handleSubmit=_useForm.handleSubmit,setValue=_useForm.setValue;//, watch, errors, reset \nvar _useState31=useState(false),_useState32=_slicedToArray(_useState31,2),error=_useState32[0],setError=_useState32[1];var _useState33=useState(false),_useState34=_slicedToArray(_useState33,2),success=_useState34[0],setSuccess=_useState34[1];var _useState35=useState(\"\"),_useState36=_slicedToArray(_useState35,2),message=_useState36[0],setMessage=_useState36[1];// eslint-disable-next-line\nvar _useState37=useState(),_useState38=_slicedToArray(_useState37,2),facility=_useState38[0],setFacility=_useState38[1];var ClientServ=client.service('labresults');//const history = useHistory()\nvar _useContext5=useContext(UserContext),user=_useContext5.user;//,setUser\n// eslint-disable-next-line\nvar _useState39=useState(),_useState40=_slicedToArray(_useState39,2),currentUser=_useState40[0],setCurrentUser=_useState40[1];var _useState41=useState(\"Draft\"),_useState42=_slicedToArray(_useState41,2),reportStatus=_useState42[0],setReportStatus=_useState42[1];var _useContext6=useContext(ObjectContext),state=_useContext6.state,setState=_useContext6.setState;var _useState43=useState(false),_useState44=_slicedToArray(_useState43,2),productModal=_useState44[0],setProductModal=_useState44[1];var order=state.financeModule.selectedFinance;var bill_report_status=state.financeModule.report_status;var getSearchfacility=function getSearchfacility(obj){setValue(\"facility\",obj._id,{shouldValidate:true,shouldDirty:true});};useEffect(function(){var _order$resultDetail;// setState((prevstate)=>({...prevstate, labFormType:value}))\nif(!((_order$resultDetail=order.resultDetail)===null||_order$resultDetail===void 0?void 0:_order$resultDetail.documentdetail)){setValue(\"Finding\",\"\",{shouldValidate:true,shouldDirty:true});setValue(\"Recommendation\",\"\",{shouldValidate:true,shouldDirty:true});// setReportStatus(order.report_status)\nreturn;}if(order.report_status!==\"Pending\"){console.log(order.resultDetail.documentdetail);Object.entries(order.resultDetail.documentdetail).map(function(_ref7,i){var _ref8=_slicedToArray(_ref7,2),keys=_ref8[0],value=_ref8[1];return setValue(keys,value,{shouldValidate:true,shouldDirty:true});});}return function(){};},[order]);var onSubmit=/*#__PURE__*/function(){var _ref9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(data,e){var document,newProductEntryModule;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:e.preventDefault();setMessage(\"\");setError(false);setSuccess(false);document={};// data.createdby=user._id\n//  console.log(data);\nif(user.currentEmployee){document.facility=user.currentEmployee.facilityDetail._id;document.facilityname=user.currentEmployee.facilityDetail.facilityName;// or from facility dropdown\n}document.documentdetail=data;document.documentType=\"Post-Op Documentation\";document.documentname=\"Post-Op Notes\";/* `${order.serviceInfo.name} Result` */ // document.documentClassId=state.DocumentClassModule.selectedDocumentClass._id\ndocument.location=state.employeeLocation.locationName+\" \"+state.employeeLocation.locationType;document.locationId=state.employeeLocation.locationId;document.client=order.orderInfo.orderObj.clientId;document.createdBy=user._id;document.createdByname=user.firstname+\" \"+user.lastname;document.status=reportStatus;document.billId=order._id;//  console.log(document)\n//  console.log(order)\nif(!(document.location===undefined||!document.createdByname||!document.facilityname)){_context7.next=19;break;}toast({message:' Documentation data missing, requires location and facility details',type:'is-danger',dismissible:true,pauseOnHover:true});return _context7.abrupt(\"return\");case 19:if(bill_report_status===\"Pending\"){ClientServ.create(document).then(function(res){e.target.reset();setSuccess(true);toast({message:'Lab Result created succesfully',type:'is-success',dismissible:true,pauseOnHover:true});setSuccess(false);}).catch(function(err){toast({message:'Error creating Lab Result '+err,type:'is-danger',dismissible:true,pauseOnHover:true});});}if(bill_report_status===\"Draft\"){ClientServ.patch(order.resultDetail._id,document).then(function(res){e.target.reset();setSuccess(true);toast({message:'Post-op Notes updated succesfully',type:'is-success',dismissible:true,pauseOnHover:true});setSuccess(false);}).catch(function(err){toast({message:'Error updating Post-op Notes '+err,type:'is-danger',dismissible:true,pauseOnHover:true});});}newProductEntryModule={selectedFinance:order,show:'show'// report_status:order.report_status\n};_context7.next=24;return setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{financeModule:newProductEntryModule});});case 24:case\"end\":return _context7.stop();}}},_callee7);}));return function onSubmit(_x8,_x9){return _ref9.apply(this,arguments);};}();var handleChangePart=/*#__PURE__*/function(){var _ref10=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(e){return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:console.log(e.target.value);_context8.next=3;return setReportStatus(e.target.value);case 3:case\"end\":return _context8.stop();}}},_callee8);}));return function handleChangePart(_x10){return _ref10.apply(this,arguments);};}();useEffect(function(){var _order$resultDetail2;if(!((_order$resultDetail2=order.resultDetail)===null||_order$resultDetail2===void 0?void 0:_order$resultDetail2.documentdetail)){setValue(\"Finding\",\"\",{shouldValidate:true,shouldDirty:true});setValue(\"Recommendation\",\"\",{shouldValidate:true,shouldDirty:true});// setReportStatus(order.report_status)\nreturn;}if(order.report_status!==\"Pending\"){console.log(order.resultDetail.documentdetail);setValue(\"Finding\",order.resultDetail.documentdetail.Finding,{shouldValidate:true,shouldDirty:true});setValue(\"Recommendation\",order.resultDetail.documentdetail.Recommendation,{shouldValidate:true,shouldDirty:true});setReportStatus(order.report_status);}return function(){};},[order]);var showDocumentation=/*#__PURE__*/function(){var _ref11=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(value){return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:setProductModal(true);case 1:case\"end\":return _context9.stop();}}},_callee9);}));return function showDocumentation(_x11){return _ref11.apply(this,arguments);};}();var handlecloseModal=function handlecloseModal(){setProductModal(false);// handleSearch(val)\n};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card \",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-header\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"card-header-title\",children:[\"Post-Op Note for \",order.orderInfo.orderObj.clientname,\" Surgery:  \",order.serviceInfo.name]}),/*#__PURE__*/_jsx(\"button\",{className:\"button is-success is-small btnheight mt-2\",onClick:showDocumentation,children:\"Documentation\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"card-content vscrollable remPad1\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsx(\"div\",{className:\"field-body\",children:/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsx(\"p\",{className:\"control has-icons-left has-icons-right\",children:/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register(),name:\"Procedure\",type:\"text\",placeholder:\"Procedure\",disabled:bill_report_status===\"Final\"})})})})}),/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsx(\"div\",{className:\"field-body\",children:/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsx(\"p\",{className:\"control has-icons-left has-icons-right\",children:/*#__PURE__*/_jsx(\"textarea\",{className:\"textarea is-small\",ref:register(),name:\"Clinical Indication\",type:\"text\",placeholder:\"Clinical Indication\",disabled:bill_report_status===\"Final\"})})})})}),/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsx(\"div\",{className:\"field-body\",children:/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsx(\"p\",{className:\"control has-icons-left has-icons-right\",children:/*#__PURE__*/_jsx(\"textarea\",{className:\"textarea is-small\",ref:register(),name:\"Technique\",type:\"text\",placeholder:\"Technique\",disabled:bill_report_status===\"Final\"})})})})}),/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsx(\"div\",{className:\"field-body\",children:/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsx(\"p\",{className:\"control has-icons-left has-icons-right\",children:/*#__PURE__*/_jsx(\"textarea\",{className:\"textarea is-small\",ref:register(),name:\"Comparison\",type:\"text\",placeholder:\"Comparison\",disabled:bill_report_status===\"Final\"})})})})}),/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsx(\"div\",{className:\"field-body\",children:/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsx(\"p\",{className:\"control has-icons-left has-icons-right\",children:/*#__PURE__*/_jsx(\"textarea\",{className:\"textarea is-small\",ref:register(),name:\"Finding\",type:\"text\",placeholder:\"Findings\",disabled:bill_report_status===\"Final\"})})})})}),/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsx(\"div\",{className:\"field-body\",children:/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsx(\"p\",{className:\"control has-icons-left has-icons-right\",children:/*#__PURE__*/_jsx(\"textarea\",{className:\"textarea is-small\",ref:register(),name:\"Impression\",type:\"text\",placeholder:\"Impression\",disabled:bill_report_status===\"Final\"})})})})}),/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsx(\"div\",{className:\"field-body\",children:/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsx(\"div\",{className:\"control has-icons-left has-icons-right\",children:/*#__PURE__*/_jsx(\"textarea\",{className:\"textarea is-small\",ref:register(),name:\"Recommendation\",type:\"text\",placeholder:\"Recommendation\",disabled:bill_report_status===\"Final\"})})})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\" is-small\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"status\",value:\"Draft\",checked:reportStatus===\"Draft\"||reportStatus===\"Pending\",onChange:function onChange(e){handleChangePart(e);},disabled:bill_report_status===\"Final\"}),/*#__PURE__*/_jsx(\"span\",{children:\" Draft\"})]}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"label\",{className:\" is-small\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"status\",value:\"Final\",checked:reportStatus===\"Final\",onChange:function onChange(e){return handleChangePart(e);},disabled:bill_report_status===\"Final\"}),/*#__PURE__*/_jsx(\"span\",{children:\" Final \"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"field  is-grouped mt-2\",children:/*#__PURE__*/_jsx(\"p\",{className:\"control\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"button is-success is-small\",disabled:bill_report_status===\"Final\",children:bill_report_status===\"Pending\"?\"Save\":\"Update\"})})})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal \".concat(productModal?\"is-active\":\"\"),children:[/*#__PURE__*/_jsx(\"div\",{className:\"modal-background\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-card  modalbkgrnd\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"modal-card-head  btnheight\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"modal-card-title\",children:\"Documentation\"}),/*#__PURE__*/_jsx(\"button\",{className:\"delete\",\"aria-label\":\"close\",onClick:handlecloseModal})]}),/*#__PURE__*/_jsx(\"section\",{className:\"modal-card-body modalcolor\",children:/*#__PURE__*/_jsx(Encounter,{standalone:\"true\"})})]})]})]});}","map":{"version":3,"sources":["/home/mfybaby/Documents/HealthStack2/HS-frontend/src/components/Theatre/TheatreReport.js"],"names":["React","useState","useContext","useEffect","useRef","client","DebounceInput","useForm","UserContext","ObjectContext","toast","format","formatDistanceToNowStrict","ReportCreate","PatientProfile","Encounter","Accordion","AccordionItem","AccordionItemHeading","AccordionItemState","AccordionItemButton","AccordionItemPanel","TheatreReport","selectedProductEntry","setSelectedProductEntry","error","setError","success","setSuccess","message","setMessage","BillServ","service","facilities","setFacilities","selectedOrders","setSelectedOrders","state","setState","user","setUser","financeModule","show","ClientModule","TheatreOrderList","selectedDispense","setSelectedDispense","selectedFinance","setSelectedFinance","expanded","setExpanded","oldClient","setOldClient","handleSelectedClient","Client","newClientModule","selectedClient","prevstate","handleChoseClient","e","order","clientname","newClient","forEach","el","checked","target","participantInfo","newProductEntryModule","concat","filter","_id","handleMedicationRow","report_status","handleCreateNew","DispenseModule","handleSearch","val","field","find","query","$regex","$options","$or","currentEmployee","facilityDetail","billing_status","$limit","$sort","createdAt","then","res","groupedOrder","catch","err","getFacilities","findProductEntry","data","handleRow","on","obj","value","map","i","Date","orderInfo","orderObj","serviceInfo","name","amount","TheatreNoteCreate","register","handleSubmit","setValue","facility","setFacility","ClientServ","currentUser","setCurrentUser","reportStatus","setReportStatus","productModal","setProductModal","bill_report_status","getSearchfacility","shouldValidate","shouldDirty","resultDetail","documentdetail","console","log","Object","entries","keys","onSubmit","preventDefault","document","facilityname","facilityName","documentType","documentname","location","employeeLocation","locationName","locationType","locationId","clientId","createdBy","createdByname","firstname","lastname","status","billId","undefined","type","dismissible","pauseOnHover","create","reset","patch","handleChangePart","Finding","Recommendation","showDocumentation","handlecloseModal"],"mappings":"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","sourcesContent":["/* eslint-disable */\nimport React, {useState,useContext, useEffect,useRef} from 'react'\nimport client from '../../feathers'\nimport {DebounceInput} from 'react-debounce-input';\nimport { useForm } from \"react-hook-form\";\n//import {useHistory} from 'react-router-dom'\nimport {UserContext,ObjectContext} from '../../context'\nimport {toast} from 'bulma-toast'\nimport {format, formatDistanceToNowStrict } from 'date-fns'\nimport ReportCreate from './ReportCreate'\nimport PatientProfile from '../ClientMgt/PatientProfile'\nimport Encounter from '../EncounterMgt/Encounter';\n/* import {ProductCreate} from './Products' */\n// eslint-disable-next-line\n//const searchfacility={};\nimport {\n    Accordion,\n    AccordionItem,\n    AccordionItemHeading,\n    AccordionItemState,\n    AccordionItemButton,\n    AccordionItemPanel,\n} from 'react-accessible-accordion';\n\n// Demo styles, see 'Styles' section below for some notes on use.\nimport 'react-accessible-accordion/dist/fancy-example.css';\n//import BillPrescriptionCreate from './BillPrescriptionCreate';\n\n\nexport default function TheatreReport() {\n    //const {state}=useContext(ObjectContext) //,setState\n    // eslint-disable-next-line\n    const [selectedProductEntry,setSelectedProductEntry]=useState()\n    //const [showState,setShowState]=useState() //create|modify|detail\n    const [error, setError] =useState(false)\n    // eslint-disable-next-line\n   const [success, setSuccess] =useState(false)\n    // eslint-disable-next-line\n  const [message, setMessage] = useState(\"\") \n   const BillServ=client.service('bills')\n   //const history = useHistory()\n  // const {user,setUser} = useContext(UserContext)\n   const [facilities,setFacilities]=useState([])\n    // eslint-disable-next-line\n  const [selectedOrders, setSelectedOrders]=useState([]) //\n   // eslint-disable-next-line\n   const {state,setState}=useContext(ObjectContext)\n   // eslint-disable-next-line\n   const {user,setUser}=useContext(UserContext)\n    \n    return(\n        <section className= \"section remPadTop\">\n           {/*  <div className=\"level\">\n            <div className=\"level-item\"> <span className=\"is-size-6 has-text-weight-medium\">ProductEntry  Module</span></div>\n            </div> */}\n            <div className=\"columns \">\n                <div className=\"column is-4 \">\n                    <TheatreOrderList />\n                    </div>\n              \n                <div className=\"column is-5 \">\n                \n                {(state.financeModule.show ==='detail')&&  <TheatreNoteCreate />}\n                </div>\n\n              <div className=\"column is-3 \">  \n                \n                {(state.ClientModule.show ==='detail')&&<PatientProfile />}\n                </div> \n\n            </div>                            \n            </section>\n       \n    )\n    \n}\n\nexport function TheatreOrderList(){\n   // const { register, handleSubmit, watch, errors } = useForm();\n    // eslint-disable-next-line\n    const [error, setError] =useState(false)\n     // eslint-disable-next-line\n    const [success, setSuccess] =useState(false)\n     // eslint-disable-next-line\n   const [message, setMessage] = useState(\"\") \n   const BillServ=client.service('bills')\n    //const history = useHistory()\n   // const {user,setUser} = useContext(UserContext)\n    const [facilities,setFacilities]=useState([])\n     // eslint-disable-next-line\n   const [selectedDispense, setSelectedDispense]=useState() //\n   const [selectedOrders, setSelectedOrders]=useState([]) \n    // eslint-disable-next-line\n    const {state,setState}=useContext(ObjectContext)\n    // eslint-disable-next-line\n    const {user,setUser}=useContext(UserContext)\n    const [selectedFinance, setSelectedFinance] =useState(\"\")\n    const [expanded, setExpanded] =useState(\"\")\n    const [oldClient, setOldClient] =useState(\"\")\n\n    const handleSelectedClient= async(Client)=>{\n        // await setSelectedClient(Client)\n         const    newClientModule={\n             selectedClient:Client,\n             show :'detail'\n         }\n        await setState((prevstate)=>({...prevstate, ClientModule:newClientModule}))\n     }\n\n    const handleChoseClient= async(client,e, order)=>{\n        setOldClient(client.clientname)\n        let newClient=client.clientname\n        if(oldClient!==newClient){\n            //alert(\"New Client Onboard\")\n            //remove all checked clientsly\n            selectedOrders.forEach(el=>el.checked=\"\")\n            setSelectedOrders([])\n        }\n\n       // console.log(e.target.checked)\n        order.checked=e.target.checked\n        await handleSelectedClient(order.participantInfo.client)\n        //handleMedicationRow(order)\n        await setSelectedFinance(order)\n        const    newProductEntryModule={\n            selectedFinance:order,\n            show :'detail',\n            state:e.target.checked\n        }\n      await setState((prevstate)=>({...prevstate, financeModule:newProductEntryModule}))\n      \n      //set of checked items\n      if (e.target.checked){\n        await setSelectedOrders((prevstate)=>(prevstate.concat(order)))\n      }else{\n        setSelectedOrders( prevstate=>prevstate.filter(el=>el._id!==order._id))\n      }\n    \n       // console.log(selectedOrders)\n    }\n    const handleMedicationRow= async(order)=>{\n        \n        await setSelectedFinance(order)\n        await handleSelectedClient(order.participantInfo.client)\n        // grab report\n        // if draft show create/modify\n        //if final: show final\n       // console.log(order)\n        const    newProductEntryModule={\n            selectedFinance:order,\n            show :'detail',\n            report_status:order.report_status\n           \n        }\n      await setState((prevstate)=>({...prevstate, financeModule:newProductEntryModule}))\n    \n    }\n\n    const handleCreateNew = async()=>{\n        \n        const    newProductEntryModule={\n            selectedDispense:{},\n            show :'create'\n            }\n       await setState((prevstate)=>({...prevstate, DispenseModule:newProductEntryModule}))\n       //console.log(state)\n        \n\n    }\n  \n\n    const handleSearch=(val)=>{\n       const field='name'\n       //console.log(val)\n       BillServ.find({query: {\n        'participantInfo.paymentmode.detail.principalName': {\n            $regex:val,\n            $options:'i'\n        \n        },\n           /*  $or:[\n                {\n           \n                } ,\n                {\n            'orderInfo.orderObj.clientname': {\n                        $regex:val,\n                        $options:'i'\n                    \n                    }\n                }\n                ], */\n                \n                //order_category:\"Prescription\",\n             $or:[\n                    {\n                       'participantInfo.paymentmode.type':\"Cash\"\n                    },\n                    {\n                       'participantInfo.paymentmode.type':\"Family Cover\"\n                    }\n                ],\n                'orderInfo.orderObj.order_category':\"Theatre Order\",\n                'participantInfo.billingFacility': user.currentEmployee.facilityDetail._id,\n                billing_status:\"Unpaid\",  // need to set this finally\n               // storeId:state.StoreModule.selectedStore._id,\n               //facility:user.currentEmployee.facilityDetail._id || \"\",\n                $limit:20,\n                $sort: {\n                    createdAt: -1\n                  }\n                    }}).then((res)=>{\n               // console.log(res)\n               setFacilities(res.groupedOrder)\n                setMessage(\" ProductEntry  fetched successfully\")\n                setSuccess(true) \n            })\n            .catch((err)=>{\n               // console.log(err)\n                setMessage(\"Error fetching ProductEntry, probable network issues \"+ err )\n                setError(true)\n            })\n        }\n    const getFacilities= async()=>{\n       \n            // console.log(\"here b4 server\")\n    const findProductEntry= await BillServ.find(\n            {query: {\n               /*  $or:[\n                    {\n                       'participantInfo.paymentmode.type':\"Cash\"\n                    },\n                    {\n                       'participantInfo.paymentmode.type':\"Family Cover\"\n                    }\n                ], */\n                'participantInfo.billingFacility': user.currentEmployee.facilityDetail._id,\n                'orderInfo.orderObj.order_category':\"Theatre Order\",\n               // billing_status:\"Unpaid\",  // need to set this finally\n                //storeId:state.StoreModule.selectedStore._id,\n                //clientId:state.ClientModule.selectedClient._id,\n                $limit:1000,\n                $sort: {\n                    createdAt: -1\n                }\n                }})\n\n        //    console.log(\"bills\", findProductEntry.data)\n            await setFacilities(findProductEntry.data)\n          //  await setState((prevstate)=>({...prevstate, currentClients:findProductEntry.groupedOrder}))\n            }   \n    const handleRow= async(Client,e)=>{\n           // alert(expanded)\n              \n            }\n    //1.consider using props for global data\n    useEffect(() => {\n        // console.log(\"started\")\n            getFacilities()\n            BillServ.on('created', (obj)=>getFacilities())\n            BillServ.on('updated', (obj)=>getFacilities())\n            BillServ.on('patched', (obj)=>getFacilities())\n            BillServ.on('removed', (obj)=>getFacilities())\n            return () => {\n            \n            }\n            },[])\n\n    useEffect(() => {\n      \n        return () => {\n            \n        }\n    }, [selectedOrders])\n\n    useEffect(() => {\n       if (state.financeModule.show===\"create\"){\n        selectedOrders.forEach(el=>el.checked=\"\")\n        setSelectedOrders([])\n\n       }\n        return () => {\n           \n        }\n    }, [state.financeModule.show])\n   \n \n\n    return(     \n            <>  \n                <div className=\"level\">\n                    <div className=\"level-left\">\n                        <div className=\"level-item\">\n                            <div className=\"field\">\n                                <p className=\"control has-icons-left  \">\n                                    <DebounceInput className=\"input is-small \" \n                                        type=\"text\" placeholder=\"Search Bills\"\n                                        minLength={3}\n                                        debounceTimeout={400}\n                                        onChange={(e)=>handleSearch(e.target.value)} />\n                                    <span className=\"icon is-small is-left\">\n                                        <i className=\"fas fa-search\"></i>\n                                    </span>\n                                </p>\n                            </div>\n                        </div>\n                    </div>\n                    <div className=\"level-item\"> <span className=\"is-size-6 has-text-weight-medium\">Theatre Investigations </span></div>\n                     {/* <div className=\"level-right\">\n                       <div className=\"level-item\"> \n                            <div className=\"level-item\"><div className=\"button is-success is-small\" onClick={handleCreateNew}>New</div></div>\n                        </div> \n                    </div>*/}\n\n                </div>\n                <div className=\" pullup \">\n                    <div className=\" is-fullwidth vscrollable pr-1\"> \n                    <table className=\"table is-striped  is-hoverable is-fullwidth is-scrollable mr-2\">\n                        <thead>\n                                <tr>\n                                    <th><abbr title=\"Serial No\">S/No</abbr></th>\n                                    <th><abbr title=\"Date\">Date</abbr></th>\n                                    <th><abbr title=\"Client\">Client</abbr></th>\n                                   {/*  <th><abbr title=\"Client\">Client</abbr></th> */}\n                                    <th><abbr title=\"Description\">Test</abbr></th>\n                                    <th><abbr title=\"Amount\">Amount</abbr></th>\n                                {/*  <th>Fulfilled</th> */}\n                                    <th><abbr title=\"Status\">Payment Status</abbr></th>\n                                    <th><abbr title=\"Status\">Result Status</abbr></th> \n                                </tr>\n                        </thead>\n                        <tbody>\n                            { facilities.map((order, i)=>(\n                                <tr key={order._id}  onClick={()=>handleMedicationRow(order)} className={order._id===(selectedFinance?._id||null)?\"is-selected\":\"\"}>                                         \n                                <th>{i+1}</th>\n                                <td><span>{format(new Date(order.createdAt),'dd-MM-yy')}</span></td>  {/* {formatDistanceToNowStrict(new Date(ProductEntry.createdAt),{addSuffix: true})} <br/> */} \n                                <th>{order.orderInfo.orderObj.clientname}</th>{/* client name */}\n                                <th>{order.serviceInfo.name}</th>{/* test name */} {/*  <td>{order.fulfilled===\"True\"?\"Yes\":\"No\"}</td> */}\n                                <td>{order.serviceInfo.amount}</td>\n                                <td>{order.billing_status}</td>\n                                <td>{order.report_status}</td>\n                                </tr>\n                            ))}\n                        </tbody>\n                    </table>\n                    \n                    </div>  \n                </div>\n            </>          \n    )\n}\n\nexport function TheatreNoteCreate(){\n    const { register, handleSubmit,setValue} = useForm(); //, watch, errors, reset \n    const [error, setError] =useState(false)\n    const [success, setSuccess] =useState(false)\n    const [message,setMessage] = useState(\"\")\n    // eslint-disable-next-line\n    const [facility,setFacility] = useState()\n    const ClientServ=client.service('labresults')\n    //const history = useHistory()\n    const {user} = useContext(UserContext) //,setUser\n    // eslint-disable-next-line\n    const [currentUser,setCurrentUser] = useState()\n    const [reportStatus,setReportStatus] = useState(\"Draft\")\n    const {state, setState}=useContext(ObjectContext)\n    const [productModal, setProductModal]=useState(false)\n\n    const order=state.financeModule.selectedFinance\n    const bill_report_status=state.financeModule.report_status\n\n    const getSearchfacility=(obj)=>{\n        setValue(\"facility\", obj._id,  {\n            shouldValidate: true,\n            shouldDirty: true\n        })\n    }\n    \n    useEffect(() => {\n        // setState((prevstate)=>({...prevstate, labFormType:value}))\n         if (!order.resultDetail?.documentdetail ){\n             setValue(\"Finding\", \"\",  {\n                 shouldValidate: true,\n                 shouldDirty: true\n             })\n             setValue(\"Recommendation\",\"\",  {\n                 shouldValidate: true,\n                 shouldDirty: true\n             })\n            // setReportStatus(order.report_status)\n            \n             return\n     \n         }\n         if (order.report_status !==\"Pending\"){\n             console.log(order.resultDetail.documentdetail)\n     \n             \n            Object.entries(order.resultDetail.documentdetail).map(([keys,value],i)=>(\n             setValue(keys, value,  {\n                 shouldValidate: true,\n                 shouldDirty: true\n             })\n     \n         ))\n     \n     \n     }\n         \n         return () => {\n             \n         }\n     }, [order])\n\n    const onSubmit = async(data,e) =>{\n        e.preventDefault();\n        setMessage(\"\")\n        setError(false)\n        setSuccess(false)\n        let document={}\n         // data.createdby=user._id\n        //  console.log(data);\n          if (user.currentEmployee){\n          document.facility=user.currentEmployee.facilityDetail._id \n          document.facilityname=user.currentEmployee.facilityDetail.facilityName // or from facility dropdown\n          }\n         document.documentdetail=data\n         document.documentType=\"Post-Op Documentation\"\n          document.documentname= `Post-Op Notes` /* `${order.serviceInfo.name} Result` */\n         // document.documentClassId=state.DocumentClassModule.selectedDocumentClass._id\n          document.location=state.employeeLocation.locationName +\" \"+ state.employeeLocation.locationType\n          document.locationId=state.employeeLocation.locationId\n          document.client=order.orderInfo.orderObj.clientId\n          document.createdBy=user._id\n          document.createdByname=user.firstname+ \" \"+user.lastname\n          document.status=reportStatus\n          document.billId=order._id\n        //  console.log(document)\n        //  console.log(order)\n\n          if (\n            document.location===undefined ||!document.createdByname || !document.facilityname ){\n            toast({\n                message: ' Documentation data missing, requires location and facility details' ,\n                type: 'is-danger',\n                dismissible: true,\n                pauseOnHover: true,\n              })\n              return\n          }\n\n        if (bill_report_status===\"Pending\"){\n            ClientServ.create(document)\n            .then((res)=>{\n                  \n                    e.target.reset();\n                  \n                    setSuccess(true)\n                    toast({\n                        message: 'Lab Result created succesfully',\n                        type: 'is-success',\n                        dismissible: true,\n                        pauseOnHover: true,\n                      })\n                      setSuccess(false)\n                })\n                .catch((err)=>{\n                    toast({\n                        message: 'Error creating Lab Result ' + err,\n                        type: 'is-danger',\n                        dismissible: true,\n                        pauseOnHover: true,\n                      })\n                })  \n        }\n\n        if (bill_report_status===\"Draft\"){\n         ClientServ.patch(order.resultDetail._id, document)\n        .then((res)=>{\n              \n                e.target.reset();\n              \n                setSuccess(true)\n                toast({\n                    message: 'Post-op Notes updated succesfully',\n                    type: 'is-success',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  })\n                  setSuccess(false)\n            })\n            .catch((err)=>{\n                toast({\n                    message: 'Error updating Post-op Notes ' + err,\n                    type: 'is-danger',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  })\n            }) \n        }\n        const    newProductEntryModule={\n            selectedFinance:order,\n            show :'show',\n           // report_status:order.report_status\n           \n        }\n      await setState((prevstate)=>({...prevstate, financeModule:newProductEntryModule}))\n      } \n\n    const handleChangePart=async (e)=>{\n        console.log(e.target.value)\n        await setReportStatus(e.target.value)\n\n    }\n\n    useEffect(() => {\n        if (!order.resultDetail?.documentdetail ){\n            setValue(\"Finding\", \"\",  {\n                shouldValidate: true,\n                shouldDirty: true\n            })\n            setValue(\"Recommendation\",\"\",  {\n                shouldValidate: true,\n                shouldDirty: true\n            })\n           // setReportStatus(order.report_status)\n           \n            return\n\n        }\n        if (order.report_status !==\"Pending\"){\n            console.log(order.resultDetail.documentdetail)\n\n        setValue(\"Finding\", order.resultDetail.documentdetail.Finding,  {\n            shouldValidate: true,\n            shouldDirty: true\n        })\n        setValue(\"Recommendation\", order.resultDetail.documentdetail.Recommendation,  {\n            shouldValidate: true,\n            shouldDirty: true\n        })\n        setReportStatus(order.report_status)\n    }\n        \n        return () => {\n            \n        }\n    }, [order])\n    const showDocumentation = async (value)=>{\n        setProductModal(true)\n      }\n      const handlecloseModal =()=>{\n        setProductModal(false)\n       // handleSearch(val)\n        }\n\n    return (\n        <>\n            <div className=\"card \">\n            <div className=\"card-header\">\n                <p className=\"card-header-title\">\n                    Post-Op Note for {order.orderInfo.orderObj.clientname} Surgery:  {order.serviceInfo.name}\n                </p>\n                <button className=\"button is-success is-small btnheight mt-2\" onClick={showDocumentation}>Documentation</button>\n            </div>\n            <div className=\"card-content vscrollable remPad1\">\n\n            <form onSubmit={handleSubmit(onSubmit)}>\n            <div className=\"field is-horizontal\">\n                <div className=\"field-body\">\n                    <div className=\"field\">\n                        <p className=\"control has-icons-left has-icons-right\">\n                            <input className=\"input is-small\" ref={register()}  name=\"Procedure\" type=\"text\" placeholder=\"Procedure\" disabled={bill_report_status===\"Final\"}/>                 \n                        </p>\n                    </div>\n                    </div>\n                    </div>\n                    <div className=\"field is-horizontal\">\n                <div className=\"field-body\">\n                    <div className=\"field\">\n                        <p className=\"control has-icons-left has-icons-right\">\n                            <textarea className=\"textarea is-small\" ref={register()}  name=\"Clinical Indication\" type=\"text\" placeholder=\"Clinical Indication\" disabled={bill_report_status===\"Final\"}/>                 \n                        </p>\n                    </div>\n                    </div>\n                    </div>\n            <div className=\"field is-horizontal\">\n                <div className=\"field-body\">\n                    <div className=\"field\">\n                        <p className=\"control has-icons-left has-icons-right\">\n                            <textarea className=\"textarea is-small\" ref={register()}  name=\"Technique\" type=\"text\" placeholder=\"Technique\" disabled={bill_report_status===\"Final\"}/>                 \n                        </p>\n                    </div>\n                    </div>\n                    </div>\n                    <div className=\"field is-horizontal\">\n                <div className=\"field-body\">\n                    <div className=\"field\">\n                        <p className=\"control has-icons-left has-icons-right\">\n                            <textarea className=\"textarea is-small\" ref={register()}  name=\"Comparison\" type=\"text\" placeholder=\"Comparison\" disabled={bill_report_status===\"Final\"}/>                 \n                        </p>\n                    </div>\n                    </div>\n                    </div>\n            <div className=\"field is-horizontal\">\n                <div className=\"field-body\">\n                    <div className=\"field\">\n                        <p className=\"control has-icons-left has-icons-right\">\n                            <textarea className=\"textarea is-small\" ref={register()}  name=\"Finding\" type=\"text\" placeholder=\"Findings\" disabled={bill_report_status===\"Final\"}/>                 \n                        </p>\n                    </div>\n                    </div>\n                    </div>\n                    <div className=\"field is-horizontal\">\n                <div className=\"field-body\">\n                    <div className=\"field\">\n                        <p className=\"control has-icons-left has-icons-right\">\n                            <textarea className=\"textarea is-small\" ref={register()}  name=\"Impression\" type=\"text\" placeholder=\"Impression\" disabled={bill_report_status===\"Final\"}/>                 \n                        </p>\n                    </div>\n                    </div>\n                    </div>\n            <div className=\"field is-horizontal\">\n                <div className=\"field-body\">\n                    <div className=\"field\">\n                        <div className=\"control has-icons-left has-icons-right\">\n                        <textarea className=\"textarea is-small\" ref={register()}  name=\"Recommendation\" type=\"text\" placeholder=\"Recommendation\" disabled={bill_report_status===\"Final\"}/>\n                        </div>\n                    </div>\n                    </div>\n                    </div>\n                    <div className=\"field\">\n                    <label className=\" is-small\">\n                             <input  type=\"radio\" name=\"status\" value=\"Draft\"   checked={reportStatus===\"Draft\"||reportStatus===\"Pending\"} onChange={(e)=>{handleChangePart(e)}} disabled={bill_report_status===\"Final\"}/>\n                               <span > Draft</span>\n                              </label> <br/>\n                              <label className=\" is-small\">\n                             <input type=\"radio\" name=\"status\"  value=\"Final\"   checked={reportStatus===\"Final\"} onChange={(e)=>handleChangePart(e)} disabled={bill_report_status===\"Final\"}/>\n                             <span> Final </span>\n                              </label>\n                              </div> \n             <div className=\"field  is-grouped mt-2\" >\n                <p className=\"control\">\n                    <button type=\"submit\" className=\"button is-success is-small\" disabled={bill_report_status===\"Final\"} >\n                    {bill_report_status===\"Pending\"? \"Save\":\"Update\"}\n                    </button>\n                </p>\n               {/*  <p className=\"control\">\n                    <button className=\"button is-warning is-small\" onClick={(e)=>e.target.reset()}>\n                        Cancel\n                    </button>\n                </p> */}\n               \n            </div>\n     \n            </form>\n            </div>\n            </div>\n            <div className={`modal ${productModal?\"is-active\":\"\"}` }>\n                                    <div className=\"modal-background\"></div>\n                                    <div className=\"modal-card  modalbkgrnd\">\n                                        <header className=\"modal-card-head  btnheight\">\n                                        <p className=\"modal-card-title\">Documentation</p>\n                                        <button className=\"delete\" aria-label=\"close\"  onClick={handlecloseModal}></button>\n                                        </header>\n                                        <section className=\"modal-card-body modalcolor\">\n                                      \n                                         <Encounter standalone=\"true\" />\n                                        </section> \n                                        {/* <footer className=\"modal-card-foot\">\n                                        <button className=\"button is-success\">Save changes</button>\n                                        <button className=\"button\">Cancel</button>\n                                        </footer>  */}\n                                   </div>\n        </div>        \n        </>\n    )\n   \n}\n\n"]},"metadata":{},"sourceType":"module"}