{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _slicedToArray from \"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"/home/mfybaby/Documents/HealthStack2/HS-frontend/src/components/facility/ModuleList.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useContext, useEffect, useRef } from 'react';\nimport client from '../../feathers';\nimport { DebounceInput } from 'react-debounce-input';\nimport { useForm } from \"react-hook-form\"; //import {DocumentClassList} from './DocumentClass'\n//import {useHistory} from 'react-router-dom'\n\nimport { UserContext, ObjectContext } from '../../context';\nimport { toast } from 'bulma-toast';\nexport default function ModuleList(_ref) {\n  _s();\n\n  var _this = this;\n\n  var handlecloseModal = _ref.handlecloseModal;\n\n  var _useForm = useForm(),\n      register = _useForm.register,\n      handleSubmit = _useForm.handleSubmit,\n      setValue = _useForm.setValue; //, watch, errors, reset \n\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      error = _useState2[0],\n      setError = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      success = _useState4[0],\n      setSuccess = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      message = _useState6[0],\n      setMessage = _useState6[1]; // eslint-disable-next-line\n\n\n  var _useState7 = useState(),\n      _useState8 = _slicedToArray(_useState7, 2),\n      facility = _useState8[0],\n      setFacility = _useState8[1];\n\n  var EmployeeServ = client.service('employee'); //const history = useHistory()\n\n  var _useContext = useContext(UserContext),\n      user = _useContext.user; //,setUser\n  // eslint-disable-next-line\n\n\n  var _useContext2 = useContext(ObjectContext),\n      state = _useContext2.state;\n\n  var draftDoc = {};\n  draftDoc = state.EmployeeModule.selectedEmployee; // console.log(draftDoc)\n\n  var mList = [\"Client\", \"Clinic\", \"Ward\", \"Laboratory\", \"Pharmacy\", \"Radiology\", \"Inventory\", \"Finance\", \"Managed Care\", \"Theatre\", \"Epidemiology\", \"Admin\", \"Bill Client\", \"Adjust Price\"]; //\"Frontdesk\",\n  //state.DocumentClassModule.selectedDocumentClass.name\n\n  useEffect(function () {\n    //  console.log(draftDoc.roles,\"loading\")\n    Object.entries(draftDoc).map(function (_ref2, i) {\n      var _ref3 = _slicedToArray(_ref2, 2),\n          keys = _ref3[0],\n          value = _ref3[1];\n\n      return setValue(keys, value, {\n        shouldValidate: true,\n        shouldDirty: true\n      });\n    });\n    return function () {};\n  });\n  useEffect(function () {\n    draftDoc = state.EmployeeModule.selectedEmployee;\n    return function () {};\n  }, [state.EmployeeModule.selectedEmployee]);\n\n  var onSubmit = function onSubmit(data, e) {\n    e.preventDefault();\n    setMessage(\"\");\n    setError(false);\n    setSuccess(false);\n    console.log(data);\n    var confirm = window.confirm(\"You are about to update roles for the employee ?\");\n\n    if (confirm) {\n      EmployeeServ.patch(draftDoc._id, data) // draftDoc._id\n      .then(function (res) {\n        //console.log(JSON.stringify(res))\n        e.target.reset();\n        /*  setMessage(\"Created Client successfully\") */\n\n        setSuccess(true);\n        toast({\n          message: 'Roles updated succesfully',\n          type: 'is-success',\n          dismissible: true,\n          pauseOnHover: true\n        });\n        setSuccess(false);\n        draftDoc = {};\n        handlecloseModal();\n      }).catch(function (err) {\n        console.log(err);\n        toast({\n          message: 'Error updating Roles' + err,\n          type: 'is-danger',\n          dismissible: true,\n          pauseOnHover: true\n        });\n      });\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card \",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-header\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"card-header-title\",\n          children: \"Choose Modules\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-content vscrollable remPad1\",\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleSubmit(onSubmit),\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"field is-horizontal\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"field ml-3 \",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"mr-2 \",\n                children: [\" \", /*#__PURE__*/_jsxDEV(\"b\", {\n                  children: \"Modules:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 115,\n                  columnNumber: 48\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 115,\n                columnNumber: 21\n              }, this), mList.map(function (c, i) {\n                return /*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \" is-small\",\n                  children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"checkbox\",\n                    value: c,\n                    name: \"roles\",\n                    ref: register\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 119,\n                    columnNumber: 37\n                  }, _this), c + \" \"]\n                }, c, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 118,\n                  columnNumber: 33\n                }, _this);\n              })]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 114,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"field  is-grouped mt-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"control\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"submit\",\n                className: \"button is-success is-small\",\n                children: \"Save\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 130,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 129,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"control\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"reset\",\n                className: \"button is-warning is-small\",\n                children: \"Cancel\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 135,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 134,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 9\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 9\n    }, this)\n  }, void 0, false);\n}\n\n_s(ModuleList, \"rwgJCjWURTplPL85xBIdt6Uzfhw=\", false, function () {\n  return [useForm];\n});\n\n_c = ModuleList;\n\nvar _c;\n\n$RefreshReg$(_c, \"ModuleList\");","map":{"version":3,"sources":["/home/mfybaby/Documents/HealthStack2/HS-frontend/src/components/facility/ModuleList.js"],"names":["React","useState","useContext","useEffect","useRef","client","DebounceInput","useForm","UserContext","ObjectContext","toast","ModuleList","handlecloseModal","register","handleSubmit","setValue","error","setError","success","setSuccess","message","setMessage","facility","setFacility","EmployeeServ","service","user","state","draftDoc","EmployeeModule","selectedEmployee","mList","Object","entries","map","i","keys","value","shouldValidate","shouldDirty","onSubmit","data","e","preventDefault","console","log","confirm","window","patch","_id","then","res","target","reset","type","dismissible","pauseOnHover","catch","err","c"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,IAAeC,QAAf,EAAwBC,UAAxB,EAAoCC,SAApC,EAA8CC,MAA9C,QAA2D,OAA3D;AACA,OAAOC,MAAP,MAAmB,gBAAnB;AACA,SAAQC,aAAR,QAA4B,sBAA5B;AACA,SAASC,OAAT,QAAwB,iBAAxB,C,CACA;AACA;;AACA,SAAQC,WAAR,EAAoBC,aAApB,QAAwC,eAAxC;AACA,SAAQC,KAAR,QAAoB,aAApB;AAEA,eAAe,SAASC,UAAT,OAAwC;AAAA;;AAAA;;AAAA,MAAnBC,gBAAmB,QAAnBA,gBAAmB;;AAAA,iBAERL,OAAO,EAFC;AAAA,MAE3CM,QAF2C,YAE3CA,QAF2C;AAAA,MAEjCC,YAFiC,YAEjCA,YAFiC;AAAA,MAEpBC,QAFoB,YAEpBA,QAFoB,EAEG;;;AAFH,kBAG1Bd,QAAQ,CAAC,KAAD,CAHkB;AAAA;AAAA,MAG5Ce,KAH4C;AAAA,MAGrCC,QAHqC;;AAAA,mBAItBhB,QAAQ,CAAC,KAAD,CAJc;AAAA;AAAA,MAI5CiB,OAJ4C;AAAA,MAInCC,UAJmC;;AAAA,mBAKtBlB,QAAQ,CAAC,EAAD,CALc;AAAA;AAAA,MAK5CmB,OAL4C;AAAA,MAKpCC,UALoC,kBAMnD;;;AANmD,mBAOpBpB,QAAQ,EAPY;AAAA;AAAA,MAO5CqB,QAP4C;AAAA,MAOnCC,WAPmC;;AAQnD,MAAMC,YAAY,GAACnB,MAAM,CAACoB,OAAP,CAAe,UAAf,CAAnB,CARmD,CASnD;;AATmD,oBAUpCvB,UAAU,CAACM,WAAD,CAV0B;AAAA,MAU5CkB,IAV4C,eAU5CA,IAV4C,EAUZ;AACvC;;;AAXmD,qBAarCxB,UAAU,CAACO,aAAD,CAb2B;AAAA,MAa5CkB,KAb4C,gBAa5CA,KAb4C;;AAenD,MAAIC,QAAQ,GAAC,EAAb;AACCA,EAAAA,QAAQ,GAACD,KAAK,CAACE,cAAN,CAAqBC,gBAA9B,CAhBkD,CAiBnD;;AAEC,MAAMC,KAAK,GAAC,CAAE,QAAF,EAAW,QAAX,EAAoB,MAApB,EAA4B,YAA5B,EAAyC,UAAzC,EAAoD,WAApD,EAAgE,WAAhE,EAA4E,SAA5E,EAAsF,cAAtF,EAAsG,SAAtG,EAAgH,cAAhH,EAA+H,OAA/H,EAAwI,aAAxI,EAAsJ,cAAtJ,CAAZ,CAnBkD,CAmBgI;AAClL;;AAEA5B,EAAAA,SAAS,CAAC,YAAM;AACX;AAEE6B,IAAAA,MAAM,CAACC,OAAP,CAAeL,QAAf,EAAyBM,GAAzB,CAA6B,iBAAcC,CAAd;AAAA;AAAA,UAAEC,IAAF;AAAA,UAAOC,KAAP;;AAAA,aACzBtB,QAAQ,CAACqB,IAAD,EAAOC,KAAP,EAAe;AACnBC,QAAAA,cAAc,EAAE,IADG;AAEnBC,QAAAA,WAAW,EAAE;AAFM,OAAf,CADiB;AAAA,KAA7B;AASH,WAAO,YAAM,CAEZ,CAFD;AAGH,GAfQ,CAAT;AAiBHpC,EAAAA,SAAS,CAAC,YAAM;AACdyB,IAAAA,QAAQ,GAACD,KAAK,CAACE,cAAN,CAAqBC,gBAA9B;AACE,WAAO,YAAM,CAEZ,CAFD;AAGH,GALQ,EAKN,CAACH,KAAK,CAACE,cAAN,CAAqBC,gBAAtB,CALM,CAAT;;AAOE,MAAMU,QAAQ,GAAG,SAAXA,QAAW,CAACC,IAAD,EAAMC,CAAN,EAAW;AACxBA,IAAAA,CAAC,CAACC,cAAF;AACAtB,IAAAA,UAAU,CAAC,EAAD,CAAV;AACAJ,IAAAA,QAAQ,CAAC,KAAD,CAAR;AACAE,IAAAA,UAAU,CAAC,KAAD,CAAV;AACAyB,IAAAA,OAAO,CAACC,GAAR,CAAYJ,IAAZ;AAIA,QAAIK,OAAO,GAAGC,MAAM,CAACD,OAAP,oDAAd;;AACA,QAAIA,OAAJ,EAAY;AACRtB,MAAAA,YAAY,CAACwB,KAAb,CAAmBpB,QAAQ,CAACqB,GAA5B,EAAiCR,IAAjC,EAAuC;AAAvC,OACCS,IADD,CACM,UAACC,GAAD,EAAO;AACL;AACAT,QAAAA,CAAC,CAACU,MAAF,CAASC,KAAT;AAED;;AACClC,QAAAA,UAAU,CAAC,IAAD,CAAV;AACAT,QAAAA,KAAK,CAAC;AACFU,UAAAA,OAAO,EAAE,2BADP;AAEFkC,UAAAA,IAAI,EAAE,YAFJ;AAGFC,UAAAA,WAAW,EAAE,IAHX;AAIFC,UAAAA,YAAY,EAAE;AAJZ,SAAD,CAAL;AAMErC,QAAAA,UAAU,CAAC,KAAD,CAAV;AACAS,QAAAA,QAAQ,GAAC,EAAT;AACAhB,QAAAA,gBAAgB;AACrB,OAhBL,EAiBK6C,KAjBL,CAiBW,UAACC,GAAD,EAAO;AACVd,QAAAA,OAAO,CAACC,GAAR,CAAYa,GAAZ;AACAhD,QAAAA,KAAK,CAAC;AACFU,UAAAA,OAAO,EAAE,yBAAyBsC,GADhC;AAEFJ,UAAAA,IAAI,EAAE,WAFJ;AAGFC,UAAAA,WAAW,EAAE,IAHX;AAIFC,UAAAA,YAAY,EAAE;AAJZ,SAAD,CAAL;AAMH,OAzBL;AA4BH;AAEJ,GAzCD;;AA2CA,sBACI;AAAA,2BACA;AAAK,MAAA,SAAS,EAAC,OAAf;AAAA,8BACI;AAAK,QAAA,SAAS,EAAC,aAAf;AAAA,+BACI;AAAG,UAAA,SAAS,EAAC,mBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,cADJ,eAMI;AAAK,QAAA,SAAS,EAAC,kCAAf;AAAA,+BAGA;AAAM,UAAA,QAAQ,EAAE1C,YAAY,CAAC0B,QAAD,CAA5B;AAAA,kCAEI;AAAK,YAAA,SAAS,EAAC,qBAAf;AAAA,mCAEI;AAAK,cAAA,SAAS,EAAC,aAAf;AAAA,sCACA;AAAO,gBAAA,SAAS,EAAE,OAAlB;AAAA,6CAA2B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAA3B;AAAA;AAAA;AAAA;AAAA;AAAA,sBADA,EAGQT,KAAK,CAACG,GAAN,CAAU,UAACyB,CAAD,EAAGxB,CAAH;AAAA,oCACN;AAAQ,kBAAA,SAAS,EAAC,WAAlB;AAAA,0CACI;AAAO,oBAAA,IAAI,EAAC,UAAZ;AAAuB,oBAAA,KAAK,EAAEwB,CAA9B;AAAiC,oBAAA,IAAI,EAAC,OAAtC;AAA8C,oBAAA,GAAG,EAAE9C;AAAnD;AAAA;AAAA;AAAA;AAAA,2BADJ,EACoE8C,CAAC,GAAG,GADxE;AAAA,mBAAmCA,CAAnC;AAAA;AAAA;AAAA;AAAA,yBADM;AAAA,eAAV,CAHR;AAAA;AAAA;AAAA;AAAA;AAAA;AAFJ;AAAA;AAAA;AAAA;AAAA,kBAFJ,eAkBJ;AAAK,YAAA,SAAS,EAAC,wBAAf;AAAA,oCACQ;AAAG,cAAA,SAAS,EAAC,SAAb;AAAA,qCACI;AAAQ,gBAAA,IAAI,EAAC,QAAb;AAAsB,gBAAA,SAAS,EAAC,4BAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,oBADR,eAMQ;AAAG,cAAA,SAAS,EAAC,SAAb;AAAA,qCACI;AAAQ,gBAAA,IAAI,EAAC,OAAb;AAAqB,gBAAA,SAAS,EAAC,4BAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,oBANR;AAAA;AAAA;AAAA;AAAA;AAAA,kBAlBI;AAAA;AAAA;AAAA;AAAA;AAAA;AAHA;AAAA;AAAA;AAAA;AAAA,cANJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADA,mBADJ;AAkDH;;GA3IuBhD,U;UAEuBJ,O;;;KAFvBI,U","sourcesContent":["import React, {useState,useContext, useEffect,useRef} from 'react'\nimport client from '../../feathers'\nimport {DebounceInput} from 'react-debounce-input';\nimport { useForm } from \"react-hook-form\";\n//import {DocumentClassList} from './DocumentClass'\n//import {useHistory} from 'react-router-dom'\nimport {UserContext,ObjectContext} from '../../context'\nimport {toast} from 'bulma-toast'\n\nexport default function ModuleList({handlecloseModal}) {\n\n    const { register, handleSubmit,setValue} = useForm(); //, watch, errors, reset \n    const [error, setError] =useState(false)\n    const [success, setSuccess] =useState(false)\n    const [message,setMessage] = useState(\"\")\n    // eslint-disable-next-line\n    const [facility,setFacility] = useState()\n    const EmployeeServ=client.service('employee')\n    //const history = useHistory()\n    const {user} = useContext(UserContext) //,setUser\n    // eslint-disable-next-line\n \n    const {state}=useContext(ObjectContext)\n\n    let draftDoc={}\n     draftDoc=state.EmployeeModule.selectedEmployee \n    // console.log(draftDoc)\n   \n     const mList=[ \"Client\",\"Clinic\",\"Ward\", \"Laboratory\",\"Pharmacy\",\"Radiology\",\"Inventory\",\"Finance\",\"Managed Care\", \"Theatre\",\"Epidemiology\",\"Admin\", \"Bill Client\",\"Adjust Price\"] //\"Frontdesk\",\n     //state.DocumentClassModule.selectedDocumentClass.name\n\n     useEffect(() => {\n          //  console.log(draftDoc.roles,\"loading\")\n\n            Object.entries(draftDoc).map(([keys,value],i)=>(\n                setValue(keys, value,  {\n                    shouldValidate: true,\n                    shouldDirty: true\n                })\n\n            ))\n          \n    \n         return () => {\n            \n         }\n     })\n\n  useEffect(() => {\n    draftDoc=state.EmployeeModule.selectedEmployee \n      return () => {\n        \n      }\n  }, [state.EmployeeModule.selectedEmployee])\n   \n    const onSubmit = (data,e) =>{\n        e.preventDefault();\n        setMessage(\"\")\n        setError(false)\n        setSuccess(false)\n        console.log(data)\n     \n         \n         \n        let confirm = window.confirm(`You are about to update roles for the employee ?`)\n        if (confirm){\n            EmployeeServ.patch(draftDoc._id, data) // draftDoc._id\n            .then((res)=>{\n                    //console.log(JSON.stringify(res))\n                    e.target.reset();\n                   \n                   /*  setMessage(\"Created Client successfully\") */\n                    setSuccess(true)\n                    toast({\n                        message: 'Roles updated succesfully',\n                        type: 'is-success',\n                        dismissible: true,\n                        pauseOnHover: true,\n                      })\n                      setSuccess(false)\n                      draftDoc={}\n                      handlecloseModal()\n                })\n                .catch((err)=>{\n                    console.log(err)\n                    toast({\n                        message: 'Error updating Roles' + err,\n                        type: 'is-danger',\n                        dismissible: true,\n                        pauseOnHover: true,\n                      })\n                })\n\n       \n        }\n      \n    }\n\n    return (\n        <>\n        <div className=\"card \">\n            <div className=\"card-header\">\n                <p className=\"card-header-title\">\n                Choose Modules\n                </p>\n            </div>\n            <div className=\"card-content vscrollable remPad1\">\n\n              \n            <form onSubmit={handleSubmit(onSubmit)}>\n                \n                <div className=\"field is-horizontal\">\n                       \n                    <div className=\"field ml-3 \">\n                    <label className= \"mr-2 \"> <b>Modules:</b></label>\n                        {\n                            mList.map((c,i) => \n                                <label  className=\" is-small\" key={c}>\n                                    <input type=\"checkbox\" value={c} name=\"roles\" ref={register} />{c + \" \"}\n                                </label>\n                            )\n                        }\n                    </div>  \n                    </div> \n                      \n                  \n              \n        <div className=\"field  is-grouped mt-2\" >\n                <p className=\"control\">\n                    <button type=\"submit\" className=\"button is-success is-small\" >\n                        Save\n                    </button>\n                </p>\n                <p className=\"control\">\n                    <button type=\"reset\" className=\"button is-warning is-small\" >\n                        Cancel\n                    </button>\n                </p>\n               \n            </div>\n     \n            </form>\n            </div>\n            </div>\n                 \n        </>\n    )\n   \n}\n"]},"metadata":{},"sourceType":"module"}