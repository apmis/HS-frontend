{"ast":null,"code":"import _defineProperty from \"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport _regeneratorRuntime from \"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _slicedToArray from \"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"/home/mfybaby/Documents/HealthStack2/HS-frontend/src/components/Accounts/Ledgers.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$();\n\n/* eslint-disable */\nimport React, { useState, useContext, useEffect, useRef } from 'react';\nimport client from '../../feathers';\nimport { DebounceInput } from 'react-debounce-input';\nimport { useForm } from \"react-hook-form\"; //import {useHistory} from 'react-router-dom'\n\nimport { UserContext, ObjectContext } from '../../context';\nimport { toast } from 'bulma-toast';\n/* import FacilityAccount from \"./FacilityAccount\" */\n// eslint-disable-next-line\n\nvar searchfacility = {};\nexport default function Ledgers() {\n  _s();\n\n  var _useContext = useContext(ObjectContext),\n      state = _useContext.state; //,setState\n  // eslint-disable-next-line\n\n\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      selectedInventory = _useState2[0],\n      setSelectedInventory = _useState2[1];\n\n  alert(\"ledger\"); //const [showState,setShowState]=useState() //create|modify|detail\n\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: \"section remPadTop\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"columns \",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"column is-5 \",\n        children: /*#__PURE__*/_jsxDEV(LedgerList, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 28,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 27,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"column is-7 \",\n        children: state.SelectedClient.show === 'detail' && /*#__PURE__*/_jsxDEV(LedgerAccount, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 32,\n          columnNumber: 62\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 30,\n        columnNumber: 12\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 26,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 22,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Ledgers, \"8eh4qvgXQzf5wYTXlctIut4W4WE=\");\n\n_c = Ledgers;\nexport function LedgerAccount() {\n  _s2();\n\n  var _facility$,\n      _this = this;\n\n  var _useForm = useForm(),\n      register = _useForm.register,\n      handleSubmit = _useForm.handleSubmit,\n      setValue = _useForm.setValue; //, watch, errors, reset \n\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      error = _useState4[0],\n      setError = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      success = _useState6[0],\n      setSuccess = _useState6[1];\n\n  var _useState7 = useState(\"\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      message = _useState8[0],\n      setMessage = _useState8[1]; // eslint-disable-next-line\n\n\n  var _useState9 = useState([]),\n      _useState10 = _slicedToArray(_useState9, 2),\n      facility = _useState10[0],\n      setFacility = _useState10[1];\n\n  var InventoryServ = client.service('subwallettransactions');\n  var SubwalletServ = client.service('subwallet'); //const history = useHistory()\n\n  var _useContext2 = useContext(UserContext),\n      user = _useContext2.user; //,setUser\n\n\n  var _useContext3 = useContext(ObjectContext),\n      state = _useContext3.state,\n      setState = _useContext3.setState; // eslint-disable-next-line\n\n\n  var _useState11 = useState(),\n      _useState12 = _slicedToArray(_useState11, 2),\n      currentUser = _useState12[0],\n      setCurrentUser = _useState12[1];\n\n  var _useState13 = useState(0),\n      _useState14 = _slicedToArray(_useState13, 2),\n      balance = _useState14[0],\n      setBalance = _useState14[1];\n\n  var clientSel = state.SelectedClient.client;\n\n  var getSearchfacility = function getSearchfacility(obj) {\n    /*   \n      setValue(\"facility\", obj._id,  {\n          shouldValidate: true,\n          shouldDirty: true\n      }) */\n  };\n\n  useEffect(function () {\n    setCurrentUser(user); //console.log(currentUser)\n\n    return function () {};\n  }, [user]); //check user for facility or get list of facility  \n\n  /*  useEffect(()=>{\n       //setFacility(user.activeInventory.FacilityId)//\n     if (!user.stacker){\n         console.log(currentUser)\n       setValue(\"facility\", user.currentEmployee.facilityDetail._id,  {\n           shouldValidate: true,\n           shouldDirty: true\n       }) \n     }\n   }) */\n\n  useEffect(function () {\n    getaccountdetails();\n    getBalance();\n    return function () {};\n  }, [clientSel]);\n\n  var getaccountdetails = function getaccountdetails() {\n    InventoryServ.find({\n      query: {\n        facility: user.currentEmployee.facilityDetail._id,\n        client: clientSel.client,\n        // storeId:state.StoreModule.selectedStore._id,\n        // category:\"credit\",\n        $sort: {\n          createdAt: -1\n        }\n      }\n    }).then(function (res) {\n      console.log(res);\n      setFacility(res.data); //e.target.reset();\n\n      /*  setMessage(\"Created Inventory successfully\") */\n      // setSuccess(true)\n\n      toast({\n        message: 'Account details succesful',\n        type: 'is-success',\n        dismissible: true,\n        pauseOnHover: true\n      }); // setSuccess(false)\n    }).catch(function (err) {\n      toast({\n        message: 'Error getting account details ' + err,\n        type: 'is-danger',\n        dismissible: true,\n        pauseOnHover: true\n      });\n    });\n  };\n\n  var getBalance = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var findProductEntry;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return SubwalletServ.find({\n                query: {\n                  client: clientSel.client,\n                  organization: user.currentEmployee.facilityDetail._id,\n                  //storeId:state.StoreModule.selectedStore._id,\n                  //clientId:state.ClientModule.selectedClient._id,\n                  $limit: 100,\n                  $sort: {\n                    createdAt: -1\n                  }\n                }\n              });\n\n            case 2:\n              findProductEntry = _context.sent;\n              console.log(findProductEntry); // console.log(\"balance\", findProductEntry.data[0].amount)\n\n              if (!(findProductEntry.data.length > 0)) {\n                _context.next = 9;\n                break;\n              }\n\n              _context.next = 7;\n              return setBalance(findProductEntry.data[0].amount);\n\n            case 7:\n              _context.next = 11;\n              break;\n\n            case 9:\n              _context.next = 11;\n              return setBalance(0);\n\n            case 11:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function getBalance() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var onSubmit = function onSubmit(data, e) {\n    e.preventDefault();\n    setMessage(\"\");\n    setError(false);\n    setSuccess(false); // data.createdby=user._id\n\n    console.log(data);\n\n    if (user.currentEmployee) {\n      data.facility = user.currentEmployee.facilityDetail._id; // or from facility dropdown\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card cardheight\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"card-header-title\",\n          children: [\"Account Details: \", (_facility$ = facility[0]) === null || _facility$ === void 0 ? void 0 : _facility$.fromName]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"button is-success is-small btnheight mt-2\",\n          children: [\"Current Balance: N \", balance]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-content \",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"columns \",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"column is-6 \",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card cardht80\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"card-header\",\n                children: /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"card-header-title\",\n                  children: \"Credit\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 198,\n                  columnNumber: 33\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 197,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"card-content vscrollable mx-0.5\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"table-container pullup \",\n                  children: /*#__PURE__*/_jsxDEV(\"table\", {\n                    className: \"table is-striped is-narrow is-hoverable is-fullwidth is-scrollable mx-0.5\",\n                    children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                      children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                        children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                          children: /*#__PURE__*/_jsxDEV(\"abbr\", {\n                            title: \"Serial No\",\n                            children: \"S/No\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 208,\n                            columnNumber: 45\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 208,\n                          columnNumber: 41\n                        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                          children: /*#__PURE__*/_jsxDEV(\"abbr\", {\n                            title: \"Cost Price\",\n                            children: \"Date\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 209,\n                            columnNumber: 45\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 209,\n                          columnNumber: 41\n                        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                          children: /*#__PURE__*/_jsxDEV(\"abbr\", {\n                            title: \"Quantity\",\n                            children: \"Amount\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 210,\n                            columnNumber: 45\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 210,\n                          columnNumber: 41\n                        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                          children: /*#__PURE__*/_jsxDEV(\"abbr\", {\n                            title: \"Base Unit\",\n                            children: \"Mode\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 211,\n                            columnNumber: 45\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 211,\n                          columnNumber: 41\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 207,\n                        columnNumber: 41\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 206,\n                      columnNumber: 37\n                    }, this), /*#__PURE__*/_jsxDEV(\"tfoot\", {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 220,\n                      columnNumber: 37\n                    }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                      children: facility.map(function (Inventory, i) {\n                        return /*#__PURE__*/_jsxDEV(_Fragment, {\n                          children: Inventory.category === \"credit\" && /*#__PURE__*/_jsxDEV(\"tr\", {\n                            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                              children: i + 1\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 228,\n                              columnNumber: 45\n                            }, _this), /*#__PURE__*/_jsxDEV(\"td\", {\n                              children: new Date(Inventory.createdAt).toLocaleString('en-GB')\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 229,\n                              columnNumber: 45\n                            }, _this), \" \", /*#__PURE__*/_jsxDEV(\"td\", {\n                              children: Inventory.amount\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 231,\n                              columnNumber: 45\n                            }, _this), /*#__PURE__*/_jsxDEV(\"td\", {\n                              children: Inventory.paymentmode\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 232,\n                              columnNumber: 45\n                            }, _this)]\n                          }, Inventory._id, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 227,\n                            columnNumber: 45\n                          }, _this)\n                        }, void 0, false);\n                      })\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 223,\n                      columnNumber: 37\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 205,\n                    columnNumber: 33\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 204,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 202,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 196,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 195,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"column is-6 \",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card cardht80\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"card-header\",\n                children: /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"card-header-title\",\n                  children: \"Debit\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 255,\n                  columnNumber: 33\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 254,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"card-content vscrollable mx-0.5\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"table-container pullup \",\n                  children: /*#__PURE__*/_jsxDEV(\"table\", {\n                    className: \"table is-striped is-narrow is-hoverable  is-scrollable mx-0.5\",\n                    children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                      children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                        children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                          children: /*#__PURE__*/_jsxDEV(\"abbr\", {\n                            title: \"Serial No\",\n                            children: \"S/No\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 265,\n                            columnNumber: 45\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 265,\n                          columnNumber: 41\n                        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                          children: /*#__PURE__*/_jsxDEV(\"abbr\", {\n                            title: \"Cost Price\",\n                            children: \"Date\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 266,\n                            columnNumber: 45\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 266,\n                          columnNumber: 41\n                        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                          children: /*#__PURE__*/_jsxDEV(\"abbr\", {\n                            title: \"Description\",\n                            children: \"Description\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 267,\n                            columnNumber: 46\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 267,\n                          columnNumber: 42\n                        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                          children: /*#__PURE__*/_jsxDEV(\"abbr\", {\n                            title: \"Quantity\",\n                            children: \"Amount\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 269,\n                            columnNumber: 45\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 269,\n                          columnNumber: 41\n                        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                          children: /*#__PURE__*/_jsxDEV(\"abbr\", {\n                            title: \"Base Unit\",\n                            children: \"Mode\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 270,\n                            columnNumber: 45\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 270,\n                          columnNumber: 41\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 264,\n                        columnNumber: 41\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 263,\n                      columnNumber: 37\n                    }, this), /*#__PURE__*/_jsxDEV(\"tfoot\", {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 279,\n                      columnNumber: 37\n                    }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                      children: facility.map(function (Inventory, i) {\n                        return /*#__PURE__*/_jsxDEV(_Fragment, {\n                          children: Inventory.category === \"debit\" && /*#__PURE__*/_jsxDEV(\"tr\", {\n                            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                              children: i + 1\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 286,\n                              columnNumber: 45\n                            }, _this), /*#__PURE__*/_jsxDEV(\"td\", {\n                              children: new Date(Inventory.createdAt).toLocaleString('en-GB')\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 287,\n                              columnNumber: 45\n                            }, _this), \" \", /*#__PURE__*/_jsxDEV(\"th\", {\n                              children: Inventory.description\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 288,\n                              columnNumber: 45\n                            }, _this), /*#__PURE__*/_jsxDEV(\"td\", {\n                              children: Inventory.amount\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 289,\n                              columnNumber: 45\n                            }, _this), /*#__PURE__*/_jsxDEV(\"td\", {\n                              children: Inventory.paymentmode\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 290,\n                              columnNumber: 45\n                            }, _this)]\n                          }, Inventory._id, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 285,\n                            columnNumber: 76\n                          }, _this)\n                        }, void 0, false);\n                      })\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 282,\n                      columnNumber: 37\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 262,\n                    columnNumber: 33\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 261,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 259,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 253,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 252,\n            columnNumber: 12\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 13\n    }, this)\n  }, void 0, false);\n}\n\n_s2(LedgerAccount, \"mu+orlf8kxAC+PDfz6qwf32nZuQ=\", false, function () {\n  return [useForm];\n});\n\n_c2 = LedgerAccount;\nexport function LedgerList() {\n  _s3();\n\n  var _this2 = this;\n\n  // const { register, handleSubmit, watch, errors } = useForm();\n  // eslint-disable-next-line\n  var _useState15 = useState(false),\n      _useState16 = _slicedToArray(_useState15, 2),\n      error = _useState16[0],\n      setError = _useState16[1]; // eslint-disable-next-line\n\n\n  var _useState17 = useState(false),\n      _useState18 = _slicedToArray(_useState17, 2),\n      success = _useState18[0],\n      setSuccess = _useState18[1]; // eslint-disable-next-line\n\n\n  var _useState19 = useState(\"\"),\n      _useState20 = _slicedToArray(_useState19, 2),\n      message = _useState20[0],\n      setMessage = _useState20[1];\n\n  var LocationServ = client.service('chartsofaccount'); //const history = useHistory()\n  // const {user,setUser} = useContext(UserContext)\n\n  var _useState21 = useState([]),\n      _useState22 = _slicedToArray(_useState21, 2),\n      facilities = _useState22[0],\n      setFacilities = _useState22[1]; // eslint-disable-next-line\n\n\n  var _useState23 = useState(),\n      _useState24 = _slicedToArray(_useState23, 2),\n      selectedLocation = _useState24[0],\n      setSelectedLocation = _useState24[1]; //\n  // eslint-disable-next-line\n\n\n  var _useContext4 = useContext(ObjectContext),\n      state = _useContext4.state,\n      setState = _useContext4.setState; // eslint-disable-next-line\n\n\n  var _useContext5 = useContext(UserContext),\n      user = _useContext5.user,\n      setUser = _useContext5.setUser;\n\n  var handleCreateNew = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var newLocationModule;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              newLocationModule = {\n                selectedAccount: {},\n                show: 'create'\n              };\n              _context2.next = 3;\n              return setState(function (prevstate) {\n                return _objectSpread(_objectSpread({}, prevstate), {}, {\n                  ChartAccountModule: newLocationModule\n                });\n              });\n\n            case 3:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function handleCreateNew() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var handleRow = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(Location) {\n      var newLocationModule;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return setSelectedLocation(Location);\n\n            case 2:\n              newLocationModule = {\n                selectedAccount: Location,\n                show: 'detail'\n              };\n              _context3.next = 5;\n              return setState(function (prevstate) {\n                return _objectSpread(_objectSpread({}, prevstate), {}, {\n                  ChartAccountModule: newLocationModule\n                });\n              });\n\n            case 5:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function handleRow(_x) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var handleSearch = function handleSearch(val) {\n    var _query;\n\n    var field = 'name';\n    console.log(val);\n    LocationServ.find({\n      query: (_query = {}, _defineProperty(_query, field, {\n        $regex: val,\n        $options: 'i'\n      }), _defineProperty(_query, \"facility\", user.currentEmployee.facilityDetail._id || \"\"), _defineProperty(_query, \"$limit\", 100), _defineProperty(_query, \"$sort\", {\n        accountType: 1\n      }), _query)\n    }).then(function (res) {\n      console.log(res);\n      setFacilities(res.data);\n      setMessage(\" Location  fetched successfully\");\n      setSuccess(true);\n    }).catch(function (err) {\n      console.log(err);\n      setMessage(\"Error fetching Location, probable network issues \" + err);\n      setError(true);\n    });\n  };\n\n  var getFacilities = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n      var findLocation, _findLocation;\n\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              if (!user.currentEmployee) {\n                _context4.next = 8;\n                break;\n              }\n\n              _context4.next = 3;\n              return LocationServ.find({\n                query: {\n                  /*  facility:user.currentEmployee.facilityDetail._id, */\n                  $limit: 2000,\n                  $sort: {\n                    accountType: 1\n                  }\n                }\n              });\n\n            case 3:\n              findLocation = _context4.sent;\n              _context4.next = 6;\n              return setFacilities(findLocation.data);\n\n            case 6:\n              _context4.next = 14;\n              break;\n\n            case 8:\n              if (!user.stacker) {\n                _context4.next = 14;\n                break;\n              }\n\n              _context4.next = 11;\n              return LocationServ.find({\n                query: {\n                  $limit: 2000,\n                  $sort: {\n                    accountType: 1\n                  }\n                }\n              });\n\n            case 11:\n              _findLocation = _context4.sent;\n              _context4.next = 14;\n              return setFacilities(_findLocation.data);\n\n            case 14:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n\n    return function getFacilities() {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    return function () {};\n  }, []);\n  useEffect(function () {\n    if (user) {\n      getFacilities();\n    } else {\n      /* const localUser= localStorage.getItem(\"user\")\n      const user1=JSON.parse(localUser)\n      console.log(localUser)\n      console.log(user1)\n      fetchUser(user1)\n      console.log(user)\n      getFacilities(user) */\n    }\n\n    LocationServ.on('created', function (obj) {\n      return getFacilities();\n    });\n    LocationServ.on('updated', function (obj) {\n      return getFacilities();\n    });\n    LocationServ.on('patched', function (obj) {\n      return getFacilities();\n    });\n    LocationServ.on('removed', function (obj) {\n      return getFacilities();\n    });\n    return function () {};\n  }, []); //todo: pagination and vertical scroll bar\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: user ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"level\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"level-left\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"level-item\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"field\",\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"control has-icons-left  \",\n                children: [/*#__PURE__*/_jsxDEV(DebounceInput, {\n                  className: \"input is-small \",\n                  type: \"text\",\n                  placeholder: \"Search Locations\",\n                  minLength: 3,\n                  debounceTimeout: 400,\n                  onChange: function onChange(e) {\n                    return handleSearch(e.target.value);\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 480,\n                  columnNumber: 38\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"icon is-small is-left\",\n                  children: /*#__PURE__*/_jsxDEV(\"i\", {\n                    className: \"fas fa-search\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 486,\n                    columnNumber: 42\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 485,\n                  columnNumber: 38\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 479,\n                columnNumber: 34\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 478,\n              columnNumber: 30\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 477,\n            columnNumber: 26\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 476,\n          columnNumber: 22\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"level-item\",\n          children: [\" \", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"is-size-6 has-text-weight-medium\",\n            children: \"List of Accounts \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 492,\n            columnNumber: 51\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 492,\n          columnNumber: 22\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"level-right\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"level-item\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"level-item\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"button is-success is-small\",\n                onClick: handleCreateNew,\n                children: \"New\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 495,\n                columnNumber: 58\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 495,\n              columnNumber: 30\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 494,\n            columnNumber: 26\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 493,\n          columnNumber: 22\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 475,\n        columnNumber: 18\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"table-container pullup  vscrola\",\n        children: /*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"table is-striped is-narrow is-hoverable is-fullwidth is-scrollable \",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                children: /*#__PURE__*/_jsxDEV(\"abbr\", {\n                  title: \"Serial No\",\n                  children: \"S/No\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 504,\n                  columnNumber: 46\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 504,\n                columnNumber: 42\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 505,\n                columnNumber: 42\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: /*#__PURE__*/_jsxDEV(\"abbr\", {\n                  title: \"Account Type\",\n                  children: \"Account Type\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 506,\n                  columnNumber: 46\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 506,\n                columnNumber: 42\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: /*#__PURE__*/_jsxDEV(\"abbr\", {\n                  title: \"Account Class\",\n                  children: \"Class\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 507,\n                  columnNumber: 45\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 507,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: /*#__PURE__*/_jsxDEV(\"abbr\", {\n                  title: \"Subclass\",\n                  children: \"Subclass\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 508,\n                  columnNumber: 47\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 508,\n                columnNumber: 43\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: /*#__PURE__*/_jsxDEV(\"abbr\", {\n                  title: \"Code\",\n                  children: \"Code\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 509,\n                  columnNumber: 47\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 509,\n                columnNumber: 43\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: /*#__PURE__*/_jsxDEV(\"abbr\", {\n                  title: \"Description\",\n                  children: \"Description\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 510,\n                  columnNumber: 46\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 510,\n                columnNumber: 42\n              }, this), user.stacker && /*#__PURE__*/_jsxDEV(\"th\", {\n                children: /*#__PURE__*/_jsxDEV(\"abbr\", {\n                  title: \"Facility\",\n                  children: \"Facility\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 513,\n                  columnNumber: 62\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 513,\n                columnNumber: 58\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 503,\n              columnNumber: 42\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 502,\n            columnNumber: 38\n          }, this), /*#__PURE__*/_jsxDEV(\"tfoot\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 517,\n            columnNumber: 38\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: facilities.map(function (Location, i) {\n              return /*#__PURE__*/_jsxDEV(\"tr\", {\n                onClick: function onClick() {\n                  return handleRow(Location);\n                },\n                className: Location._id === ((selectedLocation === null || selectedLocation === void 0 ? void 0 : selectedLocation._id) || null) ? \"is-selected\" : \"\",\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  children: i + 1\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 524,\n                  columnNumber: 46\n                }, _this2), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: Location.accountName\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 525,\n                  columnNumber: 46\n                }, _this2), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: Location.accountType\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 526,\n                  columnNumber: 46\n                }, _this2), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: Location.class\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 527,\n                  columnNumber: 46\n                }, _this2), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: Location.subclass\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 528,\n                  columnNumber: 46\n                }, _this2), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: Location.code\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 529,\n                  columnNumber: 46\n                }, _this2), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: Location.description\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 530,\n                  columnNumber: 46\n                }, _this2), user.stacker && /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: Location.facility\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 532,\n                  columnNumber: 63\n                }, _this2)]\n              }, Location._id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 523,\n                columnNumber: 46\n              }, _this2);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 520,\n            columnNumber: 38\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 501,\n          columnNumber: 34\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 500,\n        columnNumber: 18\n      }, this)]\n    }, void 0, true) : /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"loading\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 542,\n      columnNumber: 19\n    }, this)\n  }, void 0, false);\n}\n\n_s3(LedgerList, \"70jcNCCyNIOtlC3gmmlfpE1nbY8=\");\n\n_c3 = LedgerList;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"Ledgers\");\n$RefreshReg$(_c2, \"LedgerAccount\");\n$RefreshReg$(_c3, \"LedgerList\");","map":{"version":3,"sources":["/home/mfybaby/Documents/HealthStack2/HS-frontend/src/components/Accounts/Ledgers.js"],"names":["React","useState","useContext","useEffect","useRef","client","DebounceInput","useForm","UserContext","ObjectContext","toast","searchfacility","Ledgers","state","selectedInventory","setSelectedInventory","alert","SelectedClient","show","LedgerAccount","register","handleSubmit","setValue","error","setError","success","setSuccess","message","setMessage","facility","setFacility","InventoryServ","service","SubwalletServ","user","setState","currentUser","setCurrentUser","balance","setBalance","clientSel","getSearchfacility","obj","getaccountdetails","getBalance","find","query","currentEmployee","facilityDetail","_id","$sort","createdAt","then","res","console","log","data","type","dismissible","pauseOnHover","catch","err","organization","$limit","findProductEntry","length","amount","onSubmit","e","preventDefault","fromName","map","Inventory","i","category","Date","toLocaleString","paymentmode","description","LedgerList","LocationServ","facilities","setFacilities","selectedLocation","setSelectedLocation","setUser","handleCreateNew","newLocationModule","selectedAccount","prevstate","ChartAccountModule","handleRow","Location","handleSearch","val","field","$regex","$options","accountType","getFacilities","findLocation","stacker","on","target","value","accountName","class","subclass","code"],"mappings":"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","sourcesContent":["/* eslint-disable */\nimport React, {useState,useContext, useEffect,useRef} from 'react'\nimport client from '../../feathers'\nimport {DebounceInput} from 'react-debounce-input';\nimport { useForm } from \"react-hook-form\";\n//import {useHistory} from 'react-router-dom'\nimport {UserContext,ObjectContext} from '../../context'\nimport {toast} from 'bulma-toast'\n/* import FacilityAccount from \"./FacilityAccount\" */\n// eslint-disable-next-line\nconst searchfacility={};\n\n\nexport default function Ledgers() {\n    const {state}=useContext(ObjectContext) //,setState\n    // eslint-disable-next-line\n    const [selectedInventory,setSelectedInventory]=useState()\n    alert(\"ledger\")\n    //const [showState,setShowState]=useState() //create|modify|detail\n    \n    return(\n        <section className= \"section remPadTop\">\n           {/*  <div className=\"level\">\n            <div className=\"level-item\"> <span className=\"is-size-6 has-text-weight-medium\">Inventory  Module</span></div>\n            </div> */}\n            <div className=\"columns \">\n                <div className=\"column is-5 \">\n                    <LedgerList />\n                </div>\n           <div className=\"column is-7 \">\n          \n                { (state.SelectedClient.show ==='detail') && <LedgerAccount />}\n                {/*  {(state.InventoryModule.show ==='detail')&&<InventoryDetail  />}\n                {(state.InventoryModule.show ==='modify')&&<InventoryModify Inventory={selectedInventory} />}*/}\n               \n            </div> \n\n            </div>                            \n            </section>\n       \n    )\n    \n}\n\nexport function LedgerAccount(){\n    const { register, handleSubmit,setValue} = useForm(); //, watch, errors, reset \n    const [error, setError] =useState(false)\n    const [success, setSuccess] =useState(false)\n    const [message,setMessage] = useState(\"\")\n    // eslint-disable-next-line\n    const [facility,setFacility] = useState([])\n    const InventoryServ=client.service('subwallettransactions')\n    const SubwalletServ=client.service('subwallet')\n    //const history = useHistory()\n    const {user} = useContext(UserContext) //,setUser\n    const {state,setState}=useContext(ObjectContext)\n    // eslint-disable-next-line\n    const [currentUser,setCurrentUser] = useState()\n    const [balance, setBalance]=useState(0)\n\n\n    const clientSel= state.SelectedClient.client\n    const getSearchfacility=(obj)=>{\n      /*   \n        setValue(\"facility\", obj._id,  {\n            shouldValidate: true,\n            shouldDirty: true\n        }) */\n    }\n    \n    useEffect(() => {\n        setCurrentUser(user)\n        //console.log(currentUser)\n        return () => {\n        \n        }\n    }, [user])\n\n  //check user for facility or get list of facility  \n   /*  useEffect(()=>{\n        //setFacility(user.activeInventory.FacilityId)//\n      if (!user.stacker){\n          console.log(currentUser)\n        setValue(\"facility\", user.currentEmployee.facilityDetail._id,  {\n            shouldValidate: true,\n            shouldDirty: true\n        }) \n      }\n    }) */\n\n    useEffect(() => {\n        getaccountdetails()\n        getBalance()\n        return () => {\n           \n        }\n    }, [clientSel])\n\n\n\n    const getaccountdetails=()=>{\n        InventoryServ.find({query: {\n            facility:user.currentEmployee.facilityDetail._id,\n            client:clientSel.client,\n           // storeId:state.StoreModule.selectedStore._id,\n           // category:\"credit\",\n            \n            $sort: {\n                createdAt: -1\n            }\n            }})\n        .then((res)=>{\n                console.log(res)\n                setFacility(res.data)\n                //e.target.reset();\n               /*  setMessage(\"Created Inventory successfully\") */\n               // setSuccess(true)\n                toast({\n                    message: 'Account details succesful',\n                    type: 'is-success',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  })\n                 // setSuccess(false)\n            })\n            .catch((err)=>{\n                toast({\n                    message: 'Error getting account details ' + err,\n                    type: 'is-danger',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  })\n            })\n    }\n\n    const getBalance=async ()=>{\n        const findProductEntry= await SubwalletServ.find(\n            {query: {\n               \n                client:clientSel.client,\n                organization:user.currentEmployee.facilityDetail._id,\n                //storeId:state.StoreModule.selectedStore._id,\n                //clientId:state.ClientModule.selectedClient._id,\n                $limit:100,\n                $sort: {\n                    createdAt: -1\n                }\n                }})\n                 console.log(findProductEntry)\n    \n         // console.log(\"balance\", findProductEntry.data[0].amount)\n            if (findProductEntry.data.length>0){\n                await setBalance(findProductEntry.data[0].amount)\n            }else{\n                await setBalance(0) \n                \n            } \n    \n          //  await setState((prevstate)=>({...prevstate, currentClients:findProductEntry.groupedOrder}))\n            }   \n    \n\n    const onSubmit = (data,e) =>{\n        e.preventDefault();\n        setMessage(\"\")\n        setError(false)\n        setSuccess(false)\n         // data.createdby=user._id\n          console.log(data);\n          if (user.currentEmployee){\n         data.facility=user.currentEmployee.facilityDetail._id  // or from facility dropdown\n          }\n        \n\n      } \n    \n\n    return (\n        <>\n            <div className=\"card cardheight\">\n                <div className=\"card-header\">\n                    <p className=\"card-header-title\">\n                        Account Details: {facility[0]?.fromName}\n                    </p>\n                    <button className=\"button is-success is-small btnheight mt-2\" >\n                    Current Balance: N {balance}\n                 </button>\n                </div>\n                <div className=\"card-content \">\n                \n           {/*  <div className=\"level\"> vscrollable\n            <div className=\"level-item\"> <span className=\"is-size-6 has-text-weight-medium\">Inventory  Module</span></div>\n            </div> */}\n            <div className=\"columns \">\n                <div className=\"column is-6 \">\n                    <div className=\"card cardht80\">\n                            <div className=\"card-header\">\n                                <p className=\"card-header-title\">\n                                    Credit\n                                </p>\n                            </div>\n                            <div className=\"card-content vscrollable mx-0.5\">\n                                   \n                                    <div className=\"table-container pullup \">\n                                <table className=\"table is-striped is-narrow is-hoverable is-fullwidth is-scrollable mx-0.5\">\n                                    <thead>\n                                        <tr>\n                                        <th><abbr title=\"Serial No\">S/No</abbr></th>\n                                        <th><abbr title=\"Cost Price\">Date</abbr></th>\n                                        <th><abbr title=\"Quantity\">Amount</abbr></th>\n                                        <th><abbr title=\"Base Unit\">Mode</abbr></th>\n                                       {/*  <th><abbr title=\"Stock Value\">Stock Value</abbr></th>\n                                         \n                                        <th><abbr title=\"Selling Price\">Selling Price</abbr></th>\n                                        <th><abbr title=\"Re-Order Level\">Re-Order Level</abbr></th>\n                                        <th><abbr title=\"Expiry\">Expiry</abbr></th> \n                                        <th><abbr title=\"Actions\">Actions</abbr></th> */}\n                                        </tr>\n                                    </thead>\n                                    <tfoot>\n                                        \n                                    </tfoot>\n                                    <tbody>\n                                        {facility.map((Inventory, i)=>(\n                                        <>\n                                        {Inventory.category===\"credit\" && \n                                            <tr key={Inventory._id} >\n                                            <th>{i+1}</th>\n                                            <td>{new Date(Inventory.createdAt).toLocaleString('en-GB')}</td> {/*add time  */}\n                                            \n                                            <td>{Inventory.amount}</td>\n                                            <td>{Inventory.paymentmode}</td>\n                                            {/* <td>{Inventory.stockvalue}</td>\n                                            <td>{Inventory.costprice}</td>\n                                            <td>{Inventory.sellingprice}</td>\n                                            <td>{Inventory.reorder_level}</td> \n                                            <td>{Inventory.expiry}</td>\n                                            <td><span   className=\"showAction\"  >...</span></td> */}\n                                           \n                                            </tr>\n                                             }\n                                             </>\n                                        ))}\n                                    </tbody>\n                                    </table>\n                                    \n                </div>              \n                                   \n                            </div>\n                    </div>\n                </div>\n           <div className=\"column is-6 \">\n                <div className=\"card cardht80\">\n                            <div className=\"card-header\">\n                                <p className=\"card-header-title\">\n                                Debit\n                                </p>\n                            </div>\n                            <div className=\"card-content vscrollable mx-0.5\">\n                                   \n                                    <div className=\"table-container pullup \">\n                                <table className=\"table is-striped is-narrow is-hoverable  is-scrollable mx-0.5\">\n                                    <thead>\n                                        <tr>\n                                        <th><abbr title=\"Serial No\">S/No</abbr></th>\n                                        <th><abbr title=\"Cost Price\">Date</abbr></th>\n                                         <th><abbr title=\"Description\">Description</abbr></th> \n                                        \n                                        <th><abbr title=\"Quantity\">Amount</abbr></th>\n                                        <th><abbr title=\"Base Unit\">Mode</abbr></th>\n                                       {/*  <th><abbr title=\"Stock Value\">Stock Value</abbr></th>\n                                         \n                                        <th><abbr title=\"Selling Price\">Selling Price</abbr></th>\n                                        <th><abbr title=\"Re-Order Level\">Re-Order Level</abbr></th>\n                                        <th><abbr title=\"Expiry\">Expiry</abbr></th> \n                                        <th><abbr title=\"Actions\">Actions</abbr></th> */}\n                                        </tr>\n                                    </thead>\n                                    <tfoot>\n                                        \n                                    </tfoot>\n                                    <tbody>\n                                        {facility.map((Inventory, i)=>(\n                                        <>\n                                          {Inventory.category===\"debit\" && <tr key={Inventory._id} >\n                                            <th>{i+1}</th>\n                                            <td>{new Date(Inventory.createdAt).toLocaleString('en-GB')}</td> {/*add time  */}\n                                            <th>{Inventory.description}</th>\n                                            <td>{Inventory.amount}</td>\n                                            <td>{Inventory.paymentmode}</td>\n                                            {/* <td>{Inventory.stockvalue}</td>\n                                            <td>{Inventory.costprice}</td>\n                                            <td>{Inventory.sellingprice}</td>\n                                            <td>{Inventory.reorder_level}</td> \n                                            <td>{Inventory.expiry}</td>\n                                            <td><span   className=\"showAction\"  >...</span></td> */}\n                                           \n                                            </tr>\n\n                                            }\n                                        </>\n                                        ))}\n                                    </tbody>\n                                    </table>\n                                    \n                </div>              \n                                    \n                            </div>\n                    </div>\n               \n            </div> \n\n            </div>                            \n           \n            \n                </div>\n            </div>\n        </>\n    )\n   \n}\n\nexport function LedgerList(){\n    // const { register, handleSubmit, watch, errors } = useForm();\n     // eslint-disable-next-line\n     const [error, setError] =useState(false)\n      // eslint-disable-next-line\n     const [success, setSuccess] =useState(false)\n      // eslint-disable-next-line\n    const [message, setMessage] = useState(\"\") \n     const LocationServ=client.service('chartsofaccount')\n     //const history = useHistory()\n    // const {user,setUser} = useContext(UserContext)\n     const [facilities,setFacilities]=useState([])\n      // eslint-disable-next-line\n    const [selectedLocation, setSelectedLocation]=useState() //\n     // eslint-disable-next-line\n     const {state,setState}=useContext(ObjectContext)\n     // eslint-disable-next-line\n     const {user,setUser}=useContext(UserContext)\n \n \n \n     const handleCreateNew = async()=>{\n         const    newLocationModule={\n             selectedAccount:{},\n             show :'create'\n             }\n        await setState((prevstate)=>({...prevstate,  ChartAccountModule:newLocationModule}))\n        //console.log(state)\n         \n \n     }\n     const handleRow= async(Location)=>{\n         //console.log(\"b4\",state)\n \n         //console.log(\"handlerow\",Location)\n \n         await setSelectedLocation(Location)\n \n         const    newLocationModule={\n             selectedAccount:Location,\n             show :'detail'\n         }\n        await setState((prevstate)=>({...prevstate,  ChartAccountModule:newLocationModule}))\n        //console.log(state)\n \n     }\n \n    const handleSearch=(val)=>{\n        const field='name'\n        console.log(val)\n        LocationServ.find({query: {\n                 [field]: {\n                     $regex:val,\n                     $options:'i'\n                    \n                 },\n                facility:user.currentEmployee.facilityDetail._id || \"\",\n                 $limit:100,\n                 $sort: {\n                     accountType: 1\n                   }\n                     }}).then((res)=>{\n                 console.log(res)\n                setFacilities(res.data)\n                 setMessage(\" Location  fetched successfully\")\n                 setSuccess(true) \n             })\n             .catch((err)=>{\n                 console.log(err)\n                 setMessage(\"Error fetching Location, probable network issues \"+ err )\n                 setError(true)\n             })\n         }\n    \n         const getFacilities= async()=>{\n             if (user.currentEmployee){\n             \n         const findLocation= await LocationServ.find(\n                 {query: {\n                    /*  facility:user.currentEmployee.facilityDetail._id, */\n                     $limit:2000,\n                     $sort: {\n                         accountType: 1\n                     }\n                     }})\n \n          await setFacilities(findLocation.data)\n                 }\n                 else {\n                     if (user.stacker){\n                         const findLocation= await LocationServ.find(\n                             {query: {\n                                 \n                                 $limit:2000,\n                                 $sort: {\n                                     accountType: 1\n                                 }\n                                 }})\n             \n                     await setFacilities(findLocation.data)\n \n                     }\n                 }\n           /*   .then((res)=>{\n                 console.log(res)\n                     setFacilities(res.data)\n                     setMessage(\" Location  fetched successfully\")\n                     setSuccess(true)\n                 })\n                 .catch((err)=>{\n                     setMessage(\"Error creating Location, probable network issues \"+ err )\n                     setError(true)\n                 }) */\n             }\n             \n             useEffect(() => {\n              \n \n                 return () => {\n                     \n \n                 }\n             },[])\n \n             useEffect(() => {\n                \n                 if (user){\n                     getFacilities()\n                 }else{\n                     /* const localUser= localStorage.getItem(\"user\")\n                     const user1=JSON.parse(localUser)\n                     console.log(localUser)\n                     console.log(user1)\n                     fetchUser(user1)\n                     console.log(user)\n                     getFacilities(user) */\n                 }\n                 LocationServ.on('created', (obj)=>getFacilities())\n                 LocationServ.on('updated', (obj)=>getFacilities())\n                 LocationServ.on('patched', (obj)=>getFacilities())\n                 LocationServ.on('removed', (obj)=>getFacilities())\n                 return () => {\n                 \n                 }\n             },[])\n \n \n     //todo: pagination and vertical scroll bar\n \n     return(\n         <>\n            {user?( <>  \n                 <div className=\"level\">\n                     <div className=\"level-left\">\n                         <div className=\"level-item\">\n                             <div className=\"field\">\n                                 <p className=\"control has-icons-left  \">\n                                     <DebounceInput className=\"input is-small \" \n                                         type=\"text\" placeholder=\"Search Locations\"\n                                         minLength={3}\n                                         debounceTimeout={400}\n                                         onChange={(e)=>handleSearch(e.target.value)} />\n                                     <span className=\"icon is-small is-left\">\n                                         <i className=\"fas fa-search\"></i>\n                                     </span>\n                                 </p>\n                             </div>\n                         </div>\n                     </div>\n                     <div className=\"level-item\"> <span className=\"is-size-6 has-text-weight-medium\">List of Accounts </span></div>\n                     <div className=\"level-right\">\n                         <div className=\"level-item\"> \n                             <div className=\"level-item\"><div className=\"button is-success is-small\" onClick={handleCreateNew}>New</div></div>\n                         </div>\n                     </div>\n \n                 </div>\n                 <div className=\"table-container pullup  vscrola\">\n                                 <table className=\"table is-striped is-narrow is-hoverable is-fullwidth is-scrollable \">\n                                     <thead>\n                                         <tr>\n                                         <th><abbr title=\"Serial No\">S/No</abbr></th>\n                                         <th>Name</th>\n                                         <th><abbr title=\"Account Type\">Account Type</abbr></th>\n                                        <th><abbr title=\"Account Class\">Class</abbr></th>\n                                          <th><abbr title=\"Subclass\">Subclass</abbr></th>\n                                          <th><abbr title=\"Code\">Code</abbr></th>\n                                         <th><abbr title=\"Description\">Description</abbr></th>\n                                         \n                                        {/*  <th><abbr title=\"Departmental Unit\">Departmental Unit</abbr></th>  */}\n                                        {user.stacker && <th><abbr title=\"Facility\">Facility</abbr></th>}\n                                         {/* <th><abbr title=\"Actions\">Actions</abbr></th> */}\n                                         </tr>\n                                     </thead>\n                                     <tfoot>\n                                         \n                                     </tfoot>\n                                     <tbody>\n                                         {facilities.map((Location, i)=>(\n \n                                             <tr key={Location._id} onClick={()=>handleRow(Location)} className={Location._id===(selectedLocation?._id||null)?\"is-selected\":\"\"}>\n                                             <th>{i+1}</th>\n                                             <th>{Location.accountName}</th>\n                                             <td>{Location.accountType}</td>\n                                             <td>{Location.class}</td>\n                                             <td>{Location.subclass}</td>\n                                             <td>{Location.code}</td>\n                                             <td>{Location.description}</td>\n                                                {/*  <td>{Location.deptunit}</td>  */}\n                                            {user.stacker &&  <td>{Location.facility}</td>}\n                                            {/*  <td><span   className=\"showAction\"  >...</span></td> */}\n                                            \n                                             </tr>\n \n                                         ))}\n                                     </tbody>\n                                     </table>\n                                     \n                 </div>              \n             </>):<div>loading</div>}\n             </>\n               \n     )\n     }"]},"metadata":{},"sourceType":"module"}