{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _defineProperty from \"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _regeneratorRuntime from \"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"/home/mfybaby/Documents/HealthStack2/HS-frontend/src/components/ManagedCare/Checkin.js\",\n    _s = $RefreshSig$();\n\n/* eslint-disable */\nimport React, { useState, useContext, useEffect, useRef } from 'react';\nimport client from '../../feathers';\nimport { DebounceInput } from 'react-debounce-input';\nimport { useForm } from \"react-hook-form\"; //import {DocumentClassList} from './DocumentClass'\n//import {useHistory} from 'react-router-dom'\n\nimport { UserContext, ObjectContext } from '../../context';\nimport { toast } from 'bulma-toast';\nimport { format, formatDistanceToNowStrict } from 'date-fns';\nimport VideoConference from '../utils/VideoConference';\n/* import  Prescription, { PrescriptionCreate } from './Prescription'; */\n\nexport default function DispensaryMain() {\n  _s();\n\n  var _this = this;\n\n  // const { register, handleSubmit, watch, errors } = useForm();\n  // eslint-disable-next-line\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      error = _useState2[0],\n      setError = _useState2[1]; // eslint-disable-next-line\n\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      success = _useState4[0],\n      setSuccess = _useState4[1]; // eslint-disable-next-line\n\n\n  var _useState5 = useState(\"\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      message = _useState6[0],\n      setMessage = _useState6[1];\n\n  var ClinicServ = client.service('clinicaldocument'); //const history = useHistory()\n  // const {user,setUser} = useContext(UserContext)\n\n  var _useState7 = useState([]),\n      _useState8 = _slicedToArray(_useState7, 2),\n      facilities = _useState8[0],\n      setFacilities = _useState8[1]; // eslint-disable-next-line\n\n\n  var _useState9 = useState(),\n      _useState10 = _slicedToArray(_useState9, 2),\n      selectedClinic = _useState10[0],\n      setSelectedClinic = _useState10[1]; //\n  // eslint-disable-next-line\n\n\n  var _useContext = useContext(ObjectContext),\n      state = _useContext.state,\n      setState = _useContext.setState; // eslint-disable-next-line\n\n\n  var _useContext2 = useContext(UserContext),\n      user = _useContext2.user,\n      setUser = _useContext2.setUser;\n\n  var _useState11 = useState(false),\n      _useState12 = _slicedToArray(_useState11, 2),\n      showModal = _useState12[0],\n      setShowModal = _useState12[1];\n\n  var _useState13 = useState(false),\n      _useState14 = _slicedToArray(_useState13, 2),\n      showPrescriptionModal = _useState14[0],\n      setShowPrescriptionModal = _useState14[1]; // tracking on which page we currently are\n\n\n  var _useState15 = useState(0),\n      _useState16 = _slicedToArray(_useState15, 2),\n      page = _useState16[0],\n      setPage = _useState16[1]; // add loader refrence \n\n\n  var loader = useRef(null);\n  var standalone = false;\n\n  var handleNewDocument = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return setShowModal(true);\n\n            case 2:\n              console.log(showModal);\n\n            case 3:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function handleNewDocument() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var handleNewPrescription = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return setShowPrescriptionModal(true);\n\n            case 2:\n              console.log(showPrescriptionModal);\n\n            case 3:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function handleNewPrescription() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var handleCreateNew = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n      var newClinicModule;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              newClinicModule = {\n                selectedClinic: {},\n                show: 'create'\n              };\n              _context3.next = 3;\n              return setState(function (prevstate) {\n                return _objectSpread(_objectSpread({}, prevstate), {}, {\n                  ClinicModule: newClinicModule\n                });\n              });\n\n            case 3:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function handleCreateNew() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var handleRow = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(Clinic) {\n      var newClinicModule;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.next = 2;\n              return setSelectedClinic(Clinic);\n\n            case 2:\n              newClinicModule = {\n                selectedClinic: Clinic,\n                show: 'detail'\n              };\n              _context4.next = 5;\n              return setState(function (prevstate) {\n                return _objectSpread(_objectSpread({}, prevstate), {}, {\n                  ClinicModule: newClinicModule\n                });\n              });\n\n            case 5:\n              //console.log(state)\n              Clinic.show = !Clinic.show;\n\n            case 6:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n\n    return function handleRow(_x) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  var handleSearch = function handleSearch(val) {\n    var _query;\n\n    var field = 'documentname';\n    console.log(val);\n    ClinicServ.find({\n      query: (_query = {}, _defineProperty(_query, field, {\n        $regex: val,\n        $options: 'i'\n      }), _defineProperty(_query, \"client\", state.ClientModule.selectedClient._id), _defineProperty(_query, \"$limit\", 10), _defineProperty(_query, \"$sort\", {\n        name: 1\n      }), _query)\n    }).then(function (res) {\n      console.log(res);\n      setFacilities(res.data);\n      setMessage(\" Clinic  fetched successfully\");\n      setSuccess(true);\n    }).catch(function (err) {\n      console.log(err);\n      setMessage(\"Error fetching Clinic, probable network issues \" + err);\n      setError(true);\n    });\n  };\n\n  var getFacilities = /*#__PURE__*/function () {\n    var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5() {\n      var page,\n          findClinic,\n          total,\n          ulimit,\n          _findClinic,\n          _args5 = arguments;\n\n      return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              page = _args5.length > 0 && _args5[0] !== undefined ? _args5[0] : 0;\n\n              if (!user.currentEmployee) {\n                _context5.next = 12;\n                break;\n              }\n\n              _context5.next = 4;\n              return ClinicServ.find({\n                query: {\n                  //locationType:\"Clinic\",\n                  //facility:user.currentEmployee.facilityDetail._id,\n                  client: state.ClientModule.selectedClient._id,\n                  $limit: 20,\n\n                  /*  $skip:page*limit, */\n                  $sort: {\n                    createdAt: -1\n                  }\n                }\n              });\n\n            case 4:\n              findClinic = _context5.sent;\n              total = findClinic.total;\n              ulimit = total * page;\n              /*  if (total>(ulimit)){ //only load if we have not reached the total\n                   alert(\"skip:\",ulimit )\n                   console.log(\"skip:\",ulimit ) */\n\n              _context5.next = 9;\n              return setFacilities(findClinic.data);\n\n            case 9:\n              console.log(findClinic.data);\n              /*  } */\n\n              _context5.next = 18;\n              break;\n\n            case 12:\n              if (!user.stacker) {\n                _context5.next = 18;\n                break;\n              }\n\n              _context5.next = 15;\n              return ClinicServ.find({\n                query: {\n                  client: state.ClientModule.selectedClient._id,\n                  $limit: 20,\n                  $sort: {\n                    createdAt: -1\n                  }\n                }\n              });\n\n            case 15:\n              _findClinic = _context5.sent;\n              _context5.next = 18;\n              return setFacilities(_findClinic.data);\n\n            case 18:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5);\n    }));\n\n    return function getFacilities() {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    getFacilities();\n\n    if (user) {} else {\n      /* const localUser= localStorage.getItem(\"user\")\n      const user1=JSON.parse(localUser)\n      console.log(localUser)\n      console.log(user1)\n      fetchUser(user1)\n      console.log(user)\n      getFacilities(user) */\n    }\n\n    ClinicServ.on('created', function (obj) {\n      return getFacilities(page);\n    });\n    ClinicServ.on('updated', function (obj) {\n      return getFacilities(page);\n    });\n    ClinicServ.on('patched', function (obj) {\n      return getFacilities(page);\n    });\n    ClinicServ.on('removed', function (obj) {\n      return getFacilities(page);\n    });\n    /* var options = {\n        root: null,\n        rootMargin: \"20px\",\n        threshold: 1.0\n     }; */\n    // initialize IntersectionObserver\n    // and attaching to Load More div\n\n    /*  const observer = new IntersectionObserver(handleObserver, options);\n     if (loader.current) {\n        observer.observe(loader.current)\n     } */\n\n    return function () {};\n  }, []);\n  /*  useEffect(() => {\n       // here we simulate adding new posts to List\n       getFacilities()\n   }, [page]) */\n  // here we handle what happens when user scrolls to Load More div\n  // in this case we just update page variable\n\n  /* const handleObserver = (entities) => {\n      const target = entities[0];\n      if (target.isIntersecting) {   \n          setPage((page) => page + 1) //load more \n          \n      }\n  } */\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(VideoConference, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"level\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"level-left\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"level-item\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"field\",\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"control has-icons-left  \",\n              children: [/*#__PURE__*/_jsxDEV(DebounceInput, {\n                className: \"input is-small \",\n                type: \"text\",\n                placeholder: \"Search documentation\",\n                minLength: 3,\n                debounceTimeout: 400,\n                onChange: function onChange(e) {\n                  return handleSearch(e.target.value);\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 216,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"icon is-small is-left\",\n                children: /*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fas fa-search\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 222,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 221,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 215,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"level-right\",\n        children: !standalone && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"level-item\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"level-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"button is-danger is-small mr-2\",\n              onClick: handleNewPrescription,\n              children: \"Presciption\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 232,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"button is-success is-small\",\n              onClick: handleNewDocument,\n              children: \"New Document\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 233,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 231,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 36\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \" pullup \",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \" is-fullwidth vscrollable pr-1\",\n        children: facilities.map(function (Clinic, i) {\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            onClick: function onClick() {\n              return handleRow(Clinic);\n            },\n            className: Clinic._id === ((selectedClinic === null || selectedClinic === void 0 ? void 0 : selectedClinic._id) || null) ? \"is-selected\" : \"\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card mt-1 hovercard\",\n              children: [/*#__PURE__*/_jsxDEV(\"header\", {\n                className: \"card-header\",\n                onClick: function onClick(Clinic) {\n                  return Clinic.show = !Clinic.show;\n                },\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"card-header-title\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"docdate\",\n                    children: [formatDistanceToNowStrict(new Date(Clinic.createdAt), {\n                      addSuffix: true\n                    }), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 249,\n                      columnNumber: 156\n                    }, _this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: format(new Date(Clinic.createdAt), 'dd-MM-yy')\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 249,\n                      columnNumber: 161\n                    }, _this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 249,\n                    columnNumber: 57\n                  }, _this), \" \", Clinic.documentname, \" by \", Clinic.createdByname, \" at \", Clinic.location, \",\", Clinic.facilityname, /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"right ml-2 mr-0\",\n                    children: [Clinic.status, \" \"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 250,\n                    columnNumber: 57\n                  }, _this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 248,\n                  columnNumber: 57\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 247,\n                columnNumber: 53\n              }, _this), Clinic.documentname !== \"Prescription\" && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: Clinic.show ? \"card-content p-1\" : \"card-content p-1 is-hidden\",\n                children: Object.entries(Clinic.documentdetail).map(function (_ref6, i) {\n                  var _ref7 = _slicedToArray(_ref6, 2),\n                      keys = _ref7[0],\n                      value = _ref7[1];\n\n                  return /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"field is-horizontal\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"field-label\",\n                      children: /*#__PURE__*/_jsxDEV(\"label\", {\n                        className: \"label is-size-7\",\n                        children: [keys, \":\"]\n                      }, i, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 262,\n                        columnNumber: 73\n                      }, _this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 261,\n                      columnNumber: 69\n                    }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"field-body\",\n                      children: /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"field\",\n                        children: value\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 267,\n                        columnNumber: 73\n                      }, _this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 266,\n                      columnNumber: 69\n                    }, _this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 260,\n                    columnNumber: 61\n                  }, _this);\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 258,\n                columnNumber: 93\n              }, _this), Clinic.documentname === \"Prescription\" && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: Clinic.show ? \"card-content p-1\" : \"card-content p-1 is-hidden\",\n                children: Clinic.documentdetail.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    children: \"Medications:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 279,\n                    columnNumber: 61\n                  }, _this), /*#__PURE__*/_jsxDEV(\"table\", {\n                    className: \"table is-striped  is-hoverable is-fullwidth is-scrollable mr-2\",\n                    children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                      children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                        children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                          children: /*#__PURE__*/_jsxDEV(\"abbr\", {\n                            title: \"Serial No\",\n                            children: \"S/No\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 283,\n                            columnNumber: 73\n                          }, _this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 283,\n                          columnNumber: 69\n                        }, _this), /*#__PURE__*/_jsxDEV(\"th\", {\n                          children: /*#__PURE__*/_jsxDEV(\"abbr\", {\n                            title: \"Type\",\n                            children: \"Medication\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 285,\n                            columnNumber: 73\n                          }, _this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 285,\n                          columnNumber: 69\n                        }, _this), /*#__PURE__*/_jsxDEV(\"th\", {\n                          children: /*#__PURE__*/_jsxDEV(\"abbr\", {\n                            title: \"Destination\",\n                            children: \"Destination\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 286,\n                            columnNumber: 73\n                          }, _this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 286,\n                          columnNumber: 69\n                        }, _this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 282,\n                        columnNumber: 69\n                      }, _this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 281,\n                      columnNumber: 65\n                    }, _this), /*#__PURE__*/_jsxDEV(\"tfoot\", {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 289,\n                      columnNumber: 65\n                    }, _this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                      children: Clinic.documentdetail.map(function (ProductEntry, i) {\n                        return /*#__PURE__*/_jsxDEV(\"tr\", {\n                          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                            children: i + 1\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 296,\n                            columnNumber: 73\n                          }, _this), /*#__PURE__*/_jsxDEV(\"td\", {\n                            children: [ProductEntry.medication, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 298,\n                              columnNumber: 102\n                            }, _this), /*#__PURE__*/_jsxDEV(\"span\", {\n                              className: \"help is-size-7\",\n                              children: ProductEntry.instruction\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 299,\n                              columnNumber: 73\n                            }, _this)]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 298,\n                            columnNumber: 73\n                          }, _this), /*#__PURE__*/_jsxDEV(\"td\", {\n                            children: ProductEntry.destination\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 300,\n                            columnNumber: 73\n                          }, _this)]\n                        }, i, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 295,\n                          columnNumber: 73\n                        }, _this);\n                      })\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 292,\n                      columnNumber: 65\n                    }, _this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 280,\n                    columnNumber: 57\n                  }, _this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 278,\n                  columnNumber: 94\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 276,\n                columnNumber: 49\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 246,\n              columnNumber: 48\n            }, _this)\n          }, Clinic._id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 245,\n            columnNumber: 45\n          }, _this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 33\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal  \".concat(showModal ? \"is-active\" : \"\"),\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-background\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 320,\n        columnNumber: 37\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-card \",\n        children: [/*#__PURE__*/_jsxDEV(\"header\", {\n          className: \"modal-card-head\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"modal-card-title\",\n            children: \"Choose Document Class\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 323,\n            columnNumber: 41\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"delete\",\n            \"aria-label\": \"close\",\n            onClick: function onClick() {\n              return setShowModal(false);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 324,\n            columnNumber: 41\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 322,\n          columnNumber: 41\n        }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n          className: \"modal-card-body\",\n          children: /*#__PURE__*/_jsxDEV(DocumentClassList, {\n            standalone: \"true\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 327,\n            columnNumber: 41\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 326,\n          columnNumber: 41\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 321,\n        columnNumber: 37\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 319,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal \".concat(showPrescriptionModal ? \"is-active\" : \"\"),\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-background\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 336,\n        columnNumber: 37\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-card larger\",\n        children: [/*#__PURE__*/_jsxDEV(\"header\", {\n          className: \"modal-card-head\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"modal-card-title\",\n            children: \"Prescription\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 339,\n            columnNumber: 41\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"delete\",\n            \"aria-label\": \"close\",\n            onClick: function onClick() {\n              return setShowPrescriptionModal(false);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 340,\n            columnNumber: 41\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 338,\n          columnNumber: 41\n        }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n          className: \"modal-card-body\",\n          children: /*#__PURE__*/_jsxDEV(Prescription, {\n            standalone: \"true\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 343,\n            columnNumber: 41\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 342,\n          columnNumber: 41\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 337,\n        columnNumber: 37\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 335,\n      columnNumber: 33\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 209,\n    columnNumber: 9\n  }, this);\n}\n\n_s(DispensaryMain, \"kUArm7pfEFvEhRVM6eeh9oSmLWA=\");\n\n_c = DispensaryMain;\n\nvar _c;\n\n$RefreshReg$(_c, \"DispensaryMain\");","map":{"version":3,"sources":["/home/mfybaby/Documents/HealthStack2/HS-frontend/src/components/ManagedCare/Checkin.js"],"names":["React","useState","useContext","useEffect","useRef","client","DebounceInput","useForm","UserContext","ObjectContext","toast","format","formatDistanceToNowStrict","VideoConference","DispensaryMain","error","setError","success","setSuccess","message","setMessage","ClinicServ","service","facilities","setFacilities","selectedClinic","setSelectedClinic","state","setState","user","setUser","showModal","setShowModal","showPrescriptionModal","setShowPrescriptionModal","page","setPage","loader","standalone","handleNewDocument","console","log","handleNewPrescription","handleCreateNew","newClinicModule","show","prevstate","ClinicModule","handleRow","Clinic","handleSearch","val","field","find","query","$regex","$options","ClientModule","selectedClient","_id","name","then","res","data","catch","err","getFacilities","currentEmployee","$limit","$sort","createdAt","findClinic","total","ulimit","stacker","on","obj","e","target","value","map","i","Date","addSuffix","documentname","createdByname","location","facilityname","status","Object","entries","documentdetail","keys","length","ProductEntry","medication","instruction","destination"],"mappings":"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","sourcesContent":["/* eslint-disable */\nimport React, {useState,useContext, useEffect,useRef} from 'react'\nimport client from '../../feathers'\nimport {DebounceInput} from 'react-debounce-input';\nimport { useForm } from \"react-hook-form\";\n//import {DocumentClassList} from './DocumentClass'\n//import {useHistory} from 'react-router-dom'\nimport {UserContext,ObjectContext} from '../../context'\nimport {toast} from 'bulma-toast'\nimport {format, formatDistanceToNowStrict } from 'date-fns'\nimport  VideoConference  from '../utils/VideoConference';\n/* import  Prescription, { PrescriptionCreate } from './Prescription'; */\n\nexport default function DispensaryMain() {\n // const { register, handleSubmit, watch, errors } = useForm();\n    // eslint-disable-next-line\n    const [error, setError] =useState(false)\n     // eslint-disable-next-line\n    const [success, setSuccess] =useState(false)\n     // eslint-disable-next-line\n   const [message, setMessage] = useState(\"\") \n    const ClinicServ=client.service('clinicaldocument')\n    //const history = useHistory()\n   // const {user,setUser} = useContext(UserContext)\n    const [facilities,setFacilities]=useState([])\n     // eslint-disable-next-line\n   const [selectedClinic, setSelectedClinic]=useState() //\n    // eslint-disable-next-line\n    const {state,setState}=useContext(ObjectContext)\n    // eslint-disable-next-line\n    const {user,setUser}=useContext(UserContext)\n    const [showModal,setShowModal]=useState(false)\n    const [showPrescriptionModal,setShowPrescriptionModal]=useState(false)\n    // tracking on which page we currently are\n    const [page, setPage] = useState(0);\n    // add loader refrence \n    const loader = useRef(null);\n    \n    const standalone=false\n\n    const handleNewDocument= async()=>{\n        await setShowModal(true)                                                                                                                                                        \n        console.log( showModal)\n    }\n    const handleNewPrescription= async()=>{\n        await setShowPrescriptionModal(true)                                                                                                                                                        \n        console.log( showPrescriptionModal)\n    }\n\n\n    const handleCreateNew = async()=>{\n        const    newClinicModule={\n            selectedClinic:{},\n            show :'create'\n            }\n       await setState((prevstate)=>({...prevstate, ClinicModule:newClinicModule}))\n       //console.log(state)\n        \n\n    }\n    const handleRow= async(Clinic)=>{\n        //console.log(\"b4\",state)\n\n        //console.log(\"handlerow\",Clinic)\n\n        await setSelectedClinic(Clinic)\n\n        const    newClinicModule={\n            selectedClinic:Clinic,\n            show :'detail'\n        }\n       await setState((prevstate)=>({...prevstate, ClinicModule:newClinicModule}))\n       //console.log(state)\n       Clinic.show=!Clinic.show\n\n    }\n\n   const handleSearch=(val)=>{\n       const field='documentname'\n       console.log(val)\n       ClinicServ.find({query: {\n                [field]: {\n                    $regex:val,\n                    $options:'i'\n                   \n                },\n              // facility:user.currentEmployee.facilityDetail._id || \"\",\n               // locationType:\"Clinic\",\n               client:state.ClientModule.selectedClient._id,\n               $limit:10,\n                $sort: {\n                    name: 1\n                  }\n                    }}).then((res)=>{\n                console.log(res)\n               setFacilities(res.data)\n                setMessage(\" Clinic  fetched successfully\")\n                setSuccess(true) \n            })\n            .catch((err)=>{\n                console.log(err)\n                setMessage(\"Error fetching Clinic, probable network issues \"+ err )\n                setError(true)\n            })\n        }\n   \n    const getFacilities= async(page=0)=>{\n            /* const limit=20\n            alert(page) */\n            if (user.currentEmployee){\n            \n        const findClinic= await ClinicServ.find(\n                {query: {\n                    //locationType:\"Clinic\",\n                    //facility:user.currentEmployee.facilityDetail._id,\n                    client:state.ClientModule.selectedClient._id,\n                    $limit:20,\n                   /*  $skip:page*limit, */\n                    $sort: {\n                        createdAt: -1\n                    }\n                    }})\n            const total= findClinic.total\n            const ulimit=total*page\n           /*  if (total>(ulimit)){ //only load if we have not reached the total\n                alert(\"skip:\",ulimit )\n                console.log(\"skip:\",ulimit ) */\n            await setFacilities(findClinic.data)\n            console.log(findClinic.data)\n           /*  } */\n                }\n                else {\n                    if (user.stacker){\n                        const findClinic= await ClinicServ.find(\n                            {query: {\n                                client:state.ClientModule.selectedClient._id,\n                                    $limit:20,\n                                    $sort: {\n                                        createdAt: -1\n                                    }\n                                }})\n            \n                    await setFacilities(findClinic.data)\n\n                    }\n                }\n          /*   .then((res)=>{\n                console.log(res)\n                    setFacilities(res.data)\n                    setMessage(\" Clinic  fetched successfully\")\n                    setSuccess(true)\n                })\n                .catch((err)=>{\n                    setMessage(\"Error creating Clinic, probable network issues \"+ err )\n                    setError(true)\n                }) */\n            }\n          \n\n            useEffect(() => {\n                getFacilities()\n                if (user){\n                    \n                }else{\n                    /* const localUser= localStorage.getItem(\"user\")\n                    const user1=JSON.parse(localUser)\n                    console.log(localUser)\n                    console.log(user1)\n                    fetchUser(user1)\n                    console.log(user)\n                    getFacilities(user) */\n                }\n                ClinicServ.on('created', (obj)=>getFacilities(page))\n                ClinicServ.on('updated', (obj)=>getFacilities(page))\n                ClinicServ.on('patched', (obj)=>getFacilities(page))\n                ClinicServ.on('removed', (obj)=>getFacilities(page))\n\n                /* var options = {\n                    root: null,\n                    rootMargin: \"20px\",\n                    threshold: 1.0\n                 }; */\n                // initialize IntersectionObserver\n                // and attaching to Load More div\n                /*  const observer = new IntersectionObserver(handleObserver, options);\n                 if (loader.current) {\n                    observer.observe(loader.current)\n                 } */\n                return () => {\n                \n                }\n            },[])\n           /*  useEffect(() => {\n                // here we simulate adding new posts to List\n                getFacilities()\n            }, [page]) */\n\n             // here we handle what happens when user scrolls to Load More div\n            // in this case we just update page variable\n                /* const handleObserver = (entities) => {\n                    const target = entities[0];\n                    if (target.isIntersecting) {   \n                        setPage((page) => page + 1) //load more \n                        \n                    }\n                } */\n\n    return (\n        <div>\n            <VideoConference/>\n            <div className=\"level\">\n                    <div className=\"level-left\">\n                        <div className=\"level-item\">\n                            <div className=\"field\">\n                                <p className=\"control has-icons-left  \">\n                                    <DebounceInput className=\"input is-small \" \n                                        type=\"text\" placeholder=\"Search documentation\"\n                                        minLength={3}\n                                        debounceTimeout={400}\n                                        onChange={(e)=>handleSearch(e.target.value)} />\n                                    <span className=\"icon is-small is-left\">\n                                        <i className=\"fas fa-search\"></i>\n                                    </span>\n                                </p>\n                            </div>\n                        </div>\n                    </div>\n                   {/*  <div className=\"level-item\"> <span className=\"is-size-6 has-text-weight-medium\">List of Clinics</span></div> */}\n                    <div className=\"level-right\">\n                { !standalone &&   <div className=\"level-item\"> \n                            <div className=\"level-item\">\n                            <div className=\"button is-danger is-small mr-2\" onClick={handleNewPrescription}>Presciption</div>\n                                <div className=\"button is-success is-small\" onClick={handleNewDocument}>New Document</div>\n                                </div>\n                        </div>}\n                    </div>\n\n                </div>\n                \n                <div className=\" pullup \">\n                                <div className=\" is-fullwidth vscrollable pr-1\">\n                                   \n                                        {facilities.map((Clinic, i)=>(\n\n                                            <div key={Clinic._id}  onClick={()=>handleRow(Clinic)}   className={Clinic._id===(selectedClinic?._id||null)?\"is-selected\":\"\"}>\n                                               <div className=\"card mt-1 hovercard\">\n                                                    <header className=\"card-header\" onClick={(Clinic)=>Clinic.show=!Clinic.show}>\n                                                        <div className=\"card-header-title\">\n                                                        <div className=\"docdate\">{formatDistanceToNowStrict(new Date(Clinic.createdAt),{addSuffix: true})} <br/><span>{format(new Date(Clinic.createdAt),'dd-MM-yy')}</span></div> {Clinic.documentname} by {Clinic.createdByname} at {Clinic.location},{Clinic.facilityname} \n                                                        <p className=\"right ml-2 mr-0\">{Clinic.status} </p> \n                                                        </div>\n                                                       {/*  <button className=\"card-header-icon\" aria-label=\"more options\">\n                                                        <span className=\"icon\">\n                                                            <i className=\"fas fa-angle-down\" aria-hidden=\"true\"></i>\n                                                        </span>\n                                                        </button> */}\n                                                    </header>\n                                                  {Clinic.documentname!==\"Prescription\" &&  <div className={Clinic.show?\"card-content p-1\":\"card-content p-1 is-hidden\"}>\n                                                        { Object.entries(Clinic.documentdetail).map(([keys,value],i)=>(\n                                                            <div className=\"field is-horizontal\"> \n                                                                    <div className=\"field-label\"> \n                                                                        <label className=\"label is-size-7\" key={i}>\n                                                                            {keys}:\n                                                                            </label>\n                                                                    </div>\n                                                                    <div className=\"field-body\"> \n                                                                        <div className=\"field\" >\n                                                                            {value}   \n                                                                        </div>  \n                                                                    </div>                                                 \n                                                            </div>\n                                                            ))\n                                                        }\n                                                </div>}\n                                                {Clinic.documentname===\"Prescription\" &&  \n                                                <div className={Clinic.show?\"card-content p-1\":\"card-content p-1 is-hidden\"}>\n                                                        \n                                                        {(Clinic.documentdetail.length>0) && <div>\n                                                            <label>Medications:</label>\n                                                        <table className=\"table is-striped  is-hoverable is-fullwidth is-scrollable mr-2\">\n                                                                <thead>\n                                                                    <tr>\n                                                                    <th><abbr title=\"Serial No\">S/No</abbr></th>\n                                                                \n                                                                    <th><abbr title=\"Type\">Medication</abbr></th>\n                                                                    <th><abbr title=\"Destination\">Destination</abbr></th>\n                                                                    </tr>\n                                                                </thead>\n                                                                <tfoot>\n                                                                    \n                                                                </tfoot>\n                                                                <tbody>\n                                                                { Clinic.documentdetail.map((ProductEntry, i)=>(\n\n                                                                        <tr key={i}>\n                                                                        <th>{i+1}</th>\n                                                                        {/* <td>{ProductEntry.name}</td> */}\n                                                                        <td>{ProductEntry.medication}<br/>\n                                                                        <span className=\"help is-size-7\">{ProductEntry.instruction}</span></td> \n                                                                        <td>{ProductEntry.destination}</td>                                                                     \n                                                                        </tr>\n\n                                                                    ))}\n                                                                </tbody>\n                                                                </table>\n                                                                </div>}                                                   \n                                                            </div>}\n                                                    </div>                                           \n                                            </div>\n\n                                        ))}\n                                      {/* <!-- Add Ref to Load More div --> */}\n                                       {/*  <div className=\"loading\" ref={loader}>\n                                                <h2>Load More</h2>\n                                    </div> */}\n                                </div>\n                                    \n                </div> \n                <div className={`modal  ${showModal?\"is-active\":\"\"}` }>\n                                    <div className=\"modal-background\"></div>\n                                    <div className=\"modal-card \">\n                                        <header className=\"modal-card-head\">\n                                        <p className=\"modal-card-title\">Choose Document Class</p>\n                                        <button className=\"delete\" aria-label=\"close\"  onClick={()=>setShowModal(false)}></button>\n                                        </header>\n                                        <section className=\"modal-card-body\">\n                                        <DocumentClassList standalone=\"true\" />\n                                        </section>\n                                        {/* <footer className=\"modal-card-foot\">\n                                        <button className=\"button is-success\">Save changes</button>\n                                        <button className=\"button\">Cancel</button>\n                                        </footer> */}\n                                    </div>\n                                </div>\n                                <div className={`modal ${showPrescriptionModal?\"is-active\":\"\"}` }>\n                                    <div className=\"modal-background\"></div>\n                                    <div className=\"modal-card larger\">\n                                        <header className=\"modal-card-head\">\n                                        <p className=\"modal-card-title\">Prescription</p>\n                                        <button className=\"delete\" aria-label=\"close\"  onClick={()=>setShowPrescriptionModal(false)}></button>\n                                        </header>\n                                        <section className=\"modal-card-body\">\n                                        <Prescription standalone=\"true\" />\n                                        </section>\n                                        {/* <footer className=\"modal-card-foot\">\n                                        <button className=\"button is-success\">Save changes</button>\n                                        <button className=\"button\">Cancel</button>\n                                        </footer> */}\n                                    </div>\n                                </div>                            \n        </div>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}