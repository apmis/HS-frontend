{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _regeneratorRuntime from \"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"/home/mfybaby/Documents/HealthStack2/HS-frontend/src/components/Login.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useContext } from 'react';\nimport client from '../feathers';\nimport { useForm } from \"react-hook-form\";\nimport { useHistory } from 'react-router-dom';\nimport { UserContext } from '../context';\nimport { toast } from 'bulma-toast';\nexport default function Login() {\n  _s();\n\n  var _useForm = useForm(),\n      register = _useForm.register,\n      handleSubmit = _useForm.handleSubmit,\n      watch = _useForm.watch,\n      errors = _useForm.errors;\n\n  var _useState = useState(true),\n      _useState2 = _slicedToArray(_useState, 2),\n      error = _useState2[0],\n      setError = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      errorMessage = _useState4[0],\n      setErrorMessage = _useState4[1]; // const userServ=client.service('/users')\n\n\n  var history = useHistory();\n\n  var _useContext = useContext(UserContext),\n      setUser = _useContext.setUser;\n\n  var onSubmit = function onSubmit(data, e) {\n    e.preventDefault();\n    /* setErrorMessage(\"\")\n    setError(false) */\n\n    var email = data.email;\n    var password = data.password;\n    client.authenticate({\n      strategy: 'local',\n      email: email,\n      password: password\n    }).then( /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(res) {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                // console.log(JSON.stringify(res.user))\n                e.target.reset();\n                _context.next = 3;\n                return setUser(res.user);\n\n              case 3:\n                //console.log(user)\n                localStorage.setItem(\"user\", JSON.stringify(res.user));\n                history.push(\"/app\");\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }()).catch(function (err) {\n      //setErrorMessage(\"Error loggin in User, probable network issues \"+ err )\n      toast({\n        message: 'Error loggin in User, probable network issues ' + err,\n        type: 'is-danger',\n        dismissible: true,\n        pauseOnHover: true\n      });\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: \"section\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"columns is-centered\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"column is-4 \",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card v-centered\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card-header\",\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"card-header-title\",\n                children: \"Health Stack\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 57,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 56,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card-content\",\n              children: /*#__PURE__*/_jsxDEV(\"form\", {\n                onSubmit: handleSubmit(onSubmit),\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"field\",\n                  children: /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"control has-icons-left has-icons-right\",\n                    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                      className: \"input\",\n                      ref: register({\n                        required: true\n                      }),\n                      name: \"email\",\n                      type: \"email\",\n                      placeholder: \"Email\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 65,\n                      columnNumber: 17\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"icon is-small is-left\",\n                      children: /*#__PURE__*/_jsxDEV(\"i\", {\n                        className: \"fas fa-envelope\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 67,\n                        columnNumber: 22\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 66,\n                      columnNumber: 19\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 64,\n                    columnNumber: 13\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 63,\n                  columnNumber: 12\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"field\",\n                  children: /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"control has-icons-left\",\n                    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                      className: \"input\",\n                      ref: register({\n                        required: true\n                      }),\n                      name: \"password\",\n                      type: \"password\",\n                      placeholder: \"Password\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 74,\n                      columnNumber: 17\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"icon is-small is-left\",\n                      children: /*#__PURE__*/_jsxDEV(\"i\", {\n                        className: \"fas fa-lock\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 76,\n                        columnNumber: 17\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 75,\n                      columnNumber: 17\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 73,\n                    columnNumber: 13\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 72,\n                  columnNumber: 9\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"field\",\n                  children: /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"control\",\n                    children: /*#__PURE__*/_jsxDEV(\"button\", {\n                      className: \"button is-success is-small\",\n                      children: \"Login\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 82,\n                      columnNumber: 17\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 81,\n                    columnNumber: 13\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 80,\n                  columnNumber: 9\n                }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"message\",\n                  children: [\" \", errorMessage]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 87,\n                  columnNumber: 20\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 62,\n                columnNumber: 13\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 61,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 55,\n            columnNumber: 9\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Login, \"/bZIpLqYx4Oy6MQCA+cMnHwrDVs=\", false, function () {\n  return [useForm, useHistory];\n});\n\n_c = Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["/home/mfybaby/Documents/HealthStack2/HS-frontend/src/components/Login.js"],"names":["React","useState","useContext","client","useForm","useHistory","UserContext","toast","Login","register","handleSubmit","watch","errors","error","setError","errorMessage","setErrorMessage","history","setUser","onSubmit","data","e","preventDefault","email","password","authenticate","strategy","then","res","target","reset","user","localStorage","setItem","JSON","stringify","push","catch","err","message","type","dismissible","pauseOnHover","required"],"mappings":"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","sourcesContent":["import React, {useState,useContext} from 'react'\nimport client from '../feathers'\nimport { useForm } from \"react-hook-form\";\nimport {useHistory} from 'react-router-dom'\nimport {UserContext} from '../context'\nimport {toast} from 'bulma-toast'\n\nexport default function Login() {\n    const { register, handleSubmit, watch, errors } = useForm();\n    const [error, setError] =useState(true)\n    const [errorMessage,setErrorMessage] = useState(\"\")\n   // const userServ=client.service('/users')\n    const history = useHistory()\n    const {/* user, */setUser} = useContext(UserContext)\n\n   \nconst onSubmit = (data,e) =>{\n        e.preventDefault();\n        /* setErrorMessage(\"\")\n        setError(false) */\n           const  email=data.email\n           const password=data.password\n         \n          \n          client.authenticate({\n            strategy:'local',\n            email,\n            password\n        }).then(async (res)=>{\n               // console.log(JSON.stringify(res.user))\n                e.target.reset();\n               await setUser(res.user)\n              //console.log(user)\n               localStorage.setItem(\"user\",JSON.stringify(res.user))\n               history.push(\"/app\")\n\n            })\n            .catch((err)=>{\n                //setErrorMessage(\"Error loggin in User, probable network issues \"+ err )\n                toast({\n                    message: 'Error loggin in User, probable network issues ' + err,\n                    type: 'is-danger',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  })\n            })\n\n      } \n\n    return (\n        <section className=\"section\">\n        <div className=\"container\">\n        <div className=\"columns is-centered\">\n        <div className=\"column is-4 \">\n        <div className=\"card v-centered\">\n            <div className=\"card-header\">\n                <p className=\"card-header-title\">\n                    Health Stack\n                </p>\n            </div>\n            <div className=\"card-content\">\n            <form onSubmit={handleSubmit(onSubmit)}>\n           <div className=\"field\">\n            <p className=\"control has-icons-left has-icons-right\">\n                <input className=\"input\" ref={register({ required: true })}  name=\"email\" type=\"email\" placeholder=\"Email\" />\n                  <span className=\"icon is-small is-left\">\n                     <i className=\"fas fa-envelope\"></i>\n                </span>\n                \n            </p>\n        </div>\n        <div className=\"field\">\n            <p className=\"control has-icons-left\">\n                <input className=\"input\" ref={register({ required: true })} name=\"password\" type=\"password\" placeholder=\"Password\"/>\n                <span className=\"icon is-small is-left\">\n                <i className=\"fas fa-lock\"></i>\n                </span>\n            </p>\n        </div>\n        <div className=\"field\">\n            <p className=\"control\">\n                <button className=\"button is-success is-small\">\n                    Login\n                </button>\n            </p>\n        </div>\n        { error && <div className=\"message\"> {errorMessage}</div>}\n        </form>\n    </div>\n    </div>\n    </div>\n    </div>\n    </div>\n    </section>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}