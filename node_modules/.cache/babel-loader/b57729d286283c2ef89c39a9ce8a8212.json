{"ast":null,"code":"import _objectSpread from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import _regeneratorRuntime from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _slicedToArray from\"/home/mfybaby/Documents/HealthStack2/HS-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";/* eslint-disable */import React,{useState,useContext,useEffect,useRef}from'react';import{Route,Switch,useRouteMatch,Link,NavLink,useHistory}from'react-router-dom';import client from'../../feathers';import{DebounceInput}from'react-debounce-input';import{useForm}from\"react-hook-form\";//import {useHistory} from 'react-router-dom'\nimport{UserContext,ObjectContext}from'../../context';import{toast}from'bulma-toast';import{formatDistanceToNowStrict,format,subDays,addDays}from'date-fns';import DatePicker from\"react-datepicker\";import LocationSearch from\"../helpers/LocationSearch\";import EmployeeSearch from\"../helpers/EmployeeSearch\";import BillServiceCreate from'../Finance/BillServiceCreate';import\"react-datepicker/dist/react-datepicker.css\";// eslint-disable-next-line\nvar searchfacility={};export default function Appointments(){var _useContext=useContext(ObjectContext),state=_useContext.state;//,setState\n// eslint-disable-next-line\nvar _useState=useState(),_useState2=_slicedToArray(_useState,2),selectedClient=_useState2[0],setSelectedClient=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),selectedAppointment=_useState4[0],setSelectedAppointment=_useState4[1];//const [showState,setShowState]=useState() //create|modify|detail\nreturn/*#__PURE__*/_jsx(\"section\",{className:\"section remPadTop\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"columns \",children:[/*#__PURE__*/_jsx(\"div\",{className:\"column is-8 \",children:/*#__PURE__*/_jsx(ClientList,{})}),/*#__PURE__*/_jsxs(\"div\",{className:\"column is-4 \",children:[state.AppointmentModule.show==='create'&&/*#__PURE__*/_jsx(AppointmentCreate,{}),state.AppointmentModule.show==='detail'&&/*#__PURE__*/_jsx(ClientDetail,{}),state.AppointmentModule.show==='modify'&&/*#__PURE__*/_jsx(ClientModify,{Client:selectedClient})]})]})});}export function AppointmentCreate(){var _useContext2=useContext(ObjectContext),state=_useContext2.state,setState=_useContext2.setState;var _useForm=useForm(),register=_useForm.register,handleSubmit=_useForm.handleSubmit,setValue=_useForm.setValue;//, watch, errors, reset \nvar _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),success=_useState8[0],setSuccess=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),success1=_useState10[0],setSuccess1=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),success2=_useState12[0],setSuccess2=_useState12[1];var _useState13=useState(\"\"),_useState14=_slicedToArray(_useState13,2),message=_useState14[0],setMessage=_useState14[1];var _useState15=useState(),_useState16=_slicedToArray(_useState15,2),clientId=_useState16[0],setClientId=_useState16[1];var _useState17=useState(),_useState18=_slicedToArray(_useState17,2),locationId=_useState18[0],setLocationId=_useState18[1];var _useState19=useState(),_useState20=_slicedToArray(_useState19,2),practionerId=_useState20[0],setPractionerId=_useState20[1];var _useState21=useState(),_useState22=_slicedToArray(_useState21,2),type=_useState22[0],setType=_useState22[1];// eslint-disable-next-line\nvar _useState23=useState(),_useState24=_slicedToArray(_useState23,2),facility=_useState24[0],setFacility=_useState24[1];var ClientServ=client.service('appointments');//const history = useHistory()\nvar _useContext3=useContext(UserContext),user=_useContext3.user;//,setUser\n// eslint-disable-next-line\nvar _useState25=useState(),_useState26=_slicedToArray(_useState25,2),currentUser=_useState26[0],setCurrentUser=_useState26[1];var _useState27=useState(),_useState28=_slicedToArray(_useState27,2),selectedClient=_useState28[0],setSelectedClient=_useState28[1];var _useState29=useState(),_useState30=_slicedToArray(_useState29,2),selectedAppointment=_useState30[0],setSelectedAppointment=_useState30[1];// const [appointment_reason,setAppointment_reason]= useState()\nvar _useState31=useState(\"\"),_useState32=_slicedToArray(_useState31,2),appointment_status=_useState32[0],setAppointment_status=_useState32[1];var _useState33=useState(\"\"),_useState34=_slicedToArray(_useState33,2),appointment_type=_useState34[0],setAppointment_type=_useState34[1];var _useState35=useState(false),_useState36=_slicedToArray(_useState35,2),billingModal=_useState36[0],setBillingModal=_useState36[1];var _useState37=useState(),_useState38=_slicedToArray(_useState37,2),chosen=_useState38[0],setChosen=_useState38[1];var _useState39=useState(),_useState40=_slicedToArray(_useState39,2),chosen1=_useState40[0],setChosen1=_useState40[1];var _useState41=useState(),_useState42=_slicedToArray(_useState41,2),chosen2=_useState42[0],setChosen2=_useState42[1];var appClass=[\"On-site\",\"Teleconsultation\",\"Home Visit\"];var appointee;//  =state.ClientModule.selectedClient \n/*  const getSearchfacility=(obj)=>{\n        setValue(\"facility\", obj._id,  {\n            shouldValidate: true,\n            shouldDirty: true\n        })\n    } */var handleChangeType=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return setAppointment_type(e.target.value);case 2:case\"end\":return _context.stop();}}},_callee);}));return function handleChangeType(_x){return _ref.apply(this,arguments);};}();var handleChangeStatus=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return setAppointment_status(e.target.value);case 2:case\"end\":return _context2.stop();}}},_callee2);}));return function handleChangeStatus(_x2){return _ref2.apply(this,arguments);};}();var getSearchfacility=function getSearchfacility(obj){setClientId(obj._id);setChosen(obj);//handleRow(obj)\nif(!obj){//\"clear stuff\"\nsetClientId();setChosen();}/*  setValue(\"facility\", obj._id,  {\n            shouldValidate: true,\n            shouldDirty: true\n        }) */};var getSearchfacility1=function getSearchfacility1(obj){setLocationId(obj._id);setChosen1(obj);if(!obj){//\"clear stuff\"\nsetLocationId();setChosen1();}};var getSearchfacility2=function getSearchfacility2(obj){setPractionerId(obj._id);setChosen2(obj);if(!obj){//\"clear stuff\"\nsetPractionerId();setChosen2();}};useEffect(function(){setCurrentUser(user);//console.log(currentUser)\nreturn function(){};},[user]);//check user for facility or get list of facility  \nuseEffect(function(){//setFacility(user.activeClient.FacilityId)//\nif(!user.stacker){/*    console.log(currentUser)\n        setValue(\"facility\", user.currentEmployee.facilityDetail._id,  {\n            shouldValidate: true,\n            shouldDirty: true\n        })  */}});var onSubmit=function onSubmit(data,e){e.preventDefault();setMessage(\"\");setError(false);setSuccess(false);// data.createdby=user._id\nconsole.log(data);if(user.currentEmployee){data.facility=user.currentEmployee.facilityDetail._id;// or from facility dropdown\n}data.locationId=locationId;//state.ClinicModule.selectedClinic._id\ndata.practitionerId=practionerId;data.appointment_type=appointment_type;// data.appointment_reason=appointment_reason\ndata.appointment_status=appointment_status;data.clientId=clientId;data.firstname=chosen.firstname;data.middlename=chosen.middlename;data.lastname=chosen.lastname;data.dob=chosen.dob;data.gender=chosen.gender;data.phone=chosen.phone;data.email=chosen.email;data.practitioner_name=chosen2.firstname+\" \"+chosen2.lastname;data.practitioner_profession=chosen2.profession;data.practitioner_department=chosen2.department;data.location_name=chosen1.name;data.location_type=chosen1.locationType;data.actions=[{action:appointment_status,actor:user.currentEmployee._id}];console.log(data);ClientServ.create(data).then(function(res){//console.log(JSON.stringify(res))\ne.target.reset();setAppointment_type(\"\");setAppointment_status(\"\");setClientId(\"\");setLocationId(\"\");/*  setMessage(\"Created Client successfully\") */setSuccess(true);setSuccess1(true);setSuccess2(true);toast({message:'Appointment created succesfully, Kindly bill patient if required',type:'is-success',dismissible:true,pauseOnHover:true});setSuccess(false);setSuccess1(false);setSuccess2(false);// showBilling()\n}).catch(function(err){toast({message:'Error creating Appointment '+err,type:'is-danger',dismissible:true,pauseOnHover:true});});};useEffect(function(){getSearchfacility(state.ClientModule.selectedClient);/* appointee=state.ClientModule.selectedClient \n        console.log(appointee.firstname) */return function(){};},[state.ClientModule.selectedClient]);/*   const showBilling = () =>{\n        setBillingModal(true)\n       //history.push('/app/finance/billservice')\n        }\n        const  handlecloseModal1 = () =>{\n            setBillingModal(false)\n            }\n\n\n            const handleRow= async(Client)=>{\n              //  await setSelectedClient(Client)\n                const    newClientModule={\n                    selectedClient:Client,\n                    show :'detail'\n                }\n               await setState((prevstate)=>({...prevstate, ClientModule:newClientModule}))\n            } */return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"card \",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsx(\"p\",{className:\"card-header-title\",children:\"Create Appointment\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-content vscrollable remPad1\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsx(\"div\",{className:\"field-body\",children:state.ClientModule.selectedClient.firstname!==undefined?/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"label\",{className:\"label is-size-7\",children:[\" \",state.ClientModule.selectedClient.firstname,\" \",state.ClientModule.selectedClient.lastname]})}):/*#__PURE__*/_jsxs(\"div\",{className:\"field is-expanded\"/* style={ !user.stacker?{display:\"none\"}:{}} */,children:[/*#__PURE__*/_jsx(ClientSearch,{getSearchfacility:getSearchfacility,clear:success}),/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left \",style:{display:\"none\"},children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\"/* ref={register ({ required: true }) } */ /* add array no */,value:clientId,name:\"ClientId\",type:\"text\",onChange:function onChange(e){return setClientId(e.target.value);},placeholder:\"Product Id\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas  fa-map-marker-alt\"})})]})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsx(\"div\",{className:\"field-body\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field is-expanded\"/* style={ !user.stacker?{display:\"none\"}:{}} */,children:[/*#__PURE__*/_jsx(LocationSearch,{getSearchfacility:getSearchfacility1,clear:success1}),/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left \",style:{display:\"none\"},children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\"/* ref={register ({ required: true }) } */ /* add array no */,value:locationId,name:\"locationId\",type:\"text\",onChange:function onChange(e){return setLocationId(e.target.value);},placeholder:\"Product Id\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas  fa-map-marker-alt\"})})]})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsx(\"div\",{className:\"field-body\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field is-expanded\"/* style={ !user.stacker?{display:\"none\"}:{}} */,children:[/*#__PURE__*/_jsx(EmployeeSearch,{getSearchfacility:getSearchfacility2,clear:success2}),/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left \",style:{display:\"none\"},children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\"/* ref={register ({ required: true }) } */ /* add array no */,value:practionerId,name:\"practionerId\",type:\"text\",onChange:function onChange(e){return setPractionerId(e.target.value);},placeholder:\"Product Id\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas  fa-map-marker-alt\"})})]})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsx(\"div\",{className:\"field ml-3 \",children:appClass.map(function(c,i){return/*#__PURE__*/_jsxs(\"label\",{className:\" is-small\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",value:c,name:\"appointmentClass\",ref:register}),c+\" \"]},c);})})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsx(\"input\",{name:\"start_time\",ref:register({required:true}),type:\"datetime-local\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsx(\"div\",{className:\"control\",children:/*#__PURE__*/_jsx(\"div\",{className:\"select is-small\",children:/*#__PURE__*/_jsxs(\"select\",{name:\"type\",value:type,onChange:handleChangeType,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Choose Appointment Type  \"}),/*#__PURE__*/_jsx(\"option\",{value:\"New\",children:\"New\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Followup\",children:\"Followup\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Readmission with 24hrs\",children:\"Readmission with 24hrs\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Annual Checkup\",children:\"Annual Checkup\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Walk in\",children:\"Walk-in\"})]})})})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsx(\"div\",{className:\"control\",children:/*#__PURE__*/_jsx(\"div\",{className:\"select is-small\",children:/*#__PURE__*/_jsxs(\"select\",{name:\"appointment_status\",value:appointment_status,onChange:handleChangeStatus,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Appointment Status  \"}),/*#__PURE__*/_jsx(\"option\",{value:\"Scheduled\",children:\"Scheduled\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Confirmed\",children:\"Confirmed\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Checked In\",children:\"Checked In\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Vitals Taken\",children:\"Vitals Taken\"}),/*#__PURE__*/_jsx(\"option\",{value:\"With Nurse\",children:\"With Nurse\"}),/*#__PURE__*/_jsx(\"option\",{value:\"With Doctor\",children:\"With Doctor\"}),/*#__PURE__*/_jsx(\"option\",{value:\"No Show\",children:\"No Show\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Cancelled\",children:\"Cancelled\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Billed\",children:\"Billed\"})]})})})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left has-icons-right\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register(),name:\"appointment_reason\",type:\"text\",placeholder:\"Reason For Appointment\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-hospital\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field \",style:{display:\"none\"},children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left has-icons-right\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register(),name:\"billingservice\",type:\"text\",placeholder:\"Billing service\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-hospital\"})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"field  is-grouped mt-2\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"control\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"button is-success is-small\",children:\"Save\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"control\",children:/*#__PURE__*/_jsx(\"button\",{className:\"button is-warning is-small\",onClick:function onClick(e){return e.target.reset();},children:\"Cancel\"})})]})]})})]})});}export function ClientList(){// const { register, handleSubmit, watch, errors } = useForm();\n// eslint-disable-next-line\nvar _useState43=useState(false),_useState44=_slicedToArray(_useState43,2),error=_useState44[0],setError=_useState44[1];// eslint-disable-next-line\nvar _useState45=useState(false),_useState46=_slicedToArray(_useState45,2),success=_useState46[0],setSuccess=_useState46[1];// eslint-disable-next-line\nvar _useState47=useState(\"\"),_useState48=_slicedToArray(_useState47,2),message=_useState48[0],setMessage=_useState48[1];var ClientServ=client.service('appointments');//const history = useHistory()\n// const {user,setUser} = useContext(UserContext)\nvar _useState49=useState([]),_useState50=_slicedToArray(_useState49,2),facilities=_useState50[0],setFacilities=_useState50[1];// eslint-disable-next-line\nvar _useState51=useState(),_useState52=_slicedToArray(_useState51,2),selectedClient=_useState52[0],setSelectedClient=_useState52[1];//\n// eslint-disable-next-line\nvar _useContext4=useContext(ObjectContext),state=_useContext4.state,setState=_useContext4.setState;// eslint-disable-next-line\nvar _useContext5=useContext(UserContext),user=_useContext5.user,setUser=_useContext5.setUser;var _useState53=useState(new Date()),_useState54=_slicedToArray(_useState53,2),startDate=_useState54[0],setStartDate=_useState54[1];var _useState55=useState(),_useState56=_slicedToArray(_useState55,2),selectedAppointment=_useState56[0],setSelectedAppointment=_useState56[1];var handleCreateNew=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var newClientModule,newClient;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:newClientModule={selectedAppointment:{},show:'create'};_context3.next=3;return setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{AppointmentModule:newClientModule});});case 3://console.log(state)\nnewClient={selectedClient:{},show:'create'};_context3.next=6;return setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{ClientModule:newClient});});case 6:case\"end\":return _context3.stop();}}},_callee3);}));return function handleCreateNew(){return _ref3.apply(this,arguments);};}();var handleRow=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(Client){var newClientModule;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return setSelectedAppointment(Client);case 2:newClientModule={selectedAppointment:Client,show:'detail'};_context4.next=5;return setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{AppointmentModule:newClientModule});});case 5:case\"end\":return _context4.stop();}}},_callee4);}));return function handleRow(_x3){return _ref4.apply(this,arguments);};}();//console.log(state.employeeLocation)\nvar handleSearch=function handleSearch(val){var field='firstname';//  console.log(val)\nvar query={$or:[{firstname:{$regex:val,$options:'i'}},{lastname:{$regex:val,$options:'i'}},{middlename:{$regex:val,$options:'i'}},{phone:{$regex:val,$options:'i'}},{appointment_type:{$regex:val,$options:'i'}},{appointment_status:{$regex:val,$options:'i'}},{appointment_reason:{$regex:val,$options:'i'}},{location_type:{$regex:val,$options:'i'}},{location_name:{$regex:val,$options:'i'}},{practitioner_department:{$regex:val,$options:'i'}},{practitioner_profession:{$regex:val,$options:'i'}},{practitioner_name:{$regex:val,$options:'i'}}],facility:user.currentEmployee.facilityDetail._id,// || \"\",\n$limit:20,$sort:{createdAt:-1}};if(state.employeeLocation.locationType!==\"Front Desk\"){query.locationId=state.employeeLocation.locationId;}ClientServ.find({query:query}).then(function(res){console.log(res);setFacilities(res.data);setMessage(\" Client  fetched successfully\");setSuccess(true);}).catch(function(err){console.log(err);setMessage(\"Error fetching Client, probable network issues \"+err);setError(true);});};var getFacilities=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){var stuff,findClient,_findClient;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:if(!user.currentEmployee){_context5.next=10;break;}stuff={facility:user.currentEmployee.facilityDetail._id,// locationId:state.employeeLocation.locationId,\n$limit:100,$sort:{createdAt:-1}};if(state.employeeLocation.locationType!==\"Front Desk\"){stuff.locationId=state.employeeLocation.locationId;}_context5.next=5;return ClientServ.find({query:stuff});case 5:findClient=_context5.sent;_context5.next=8;return setFacilities(findClient.data);case 8:_context5.next=16;break;case 10:if(!user.stacker){_context5.next=16;break;}_context5.next=13;return ClientServ.find({query:{$limit:100,$sort:{createdAt:-1}}});case 13:_findClient=_context5.sent;_context5.next=16;return setFacilities(_findClient.data);case 16:case\"end\":return _context5.stop();}}},_callee5);}));return function getFacilities(){return _ref5.apply(this,arguments);};}();useEffect(function(){if(user){handleCalendarClose();}else{/* const localUser= localStorage.getItem(\"user\")\n                    const user1=JSON.parse(localUser)\n                    console.log(localUser)\n                    console.log(user1)\n                    fetchUser(user1)\n                    console.log(user)\n                    getFacilities(user) */}ClientServ.on('created',function(obj){return handleCalendarClose();});ClientServ.on('updated',function(obj){return handleCalendarClose();});ClientServ.on('patched',function(obj){return handleCalendarClose();});ClientServ.on('removed',function(obj){return handleCalendarClose();});var newClient={selectedClient:{},show:'create'};setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{ClientModule:newClient});});return function(){};},[]);var handleCalendarClose=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(){var query,findClient;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:query={start_time:{$gt:subDays(startDate,1),$lt:addDays(startDate,1)},facility:user.currentEmployee.facilityDetail._id,$limit:100,$sort:{createdAt:-1}};if(state.employeeLocation.locationType!==\"Front Desk\"){query.locationId=state.employeeLocation.locationId;}_context6.next=4;return ClientServ.find({query:query});case 4:findClient=_context6.sent;_context6.next=7;return setFacilities(findClient.data);case 7:case\"end\":return _context6.stop();}}},_callee6);}));return function handleCalendarClose(){return _ref6.apply(this,arguments);};}();var handleDate=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(date){return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:setStartDate(date);case 1:case\"end\":return _context7.stop();}}},_callee7);}));return function handleDate(_x4){return _ref7.apply(this,arguments);};}();useEffect(function(){if(!!startDate){handleCalendarClose();}else{getFacilities();}return function(){};},[startDate]);//todo: pagination and vertical scroll bar\nreturn/*#__PURE__*/_jsx(_Fragment,{children:user?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"level\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"level-left\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"level-item\",children:/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left  \",children:[/*#__PURE__*/_jsx(DebounceInput,{className:\"input is-small \",type:\"text\",placeholder:\"Search Appointments\",minLength:3,debounceTimeout:400,onChange:function onChange(e){return handleSearch(e.target.value);}}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-search\"})})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"level-item\",children:/*#__PURE__*/_jsx(DatePicker,{selected:startDate,onChange:function onChange(date){return handleDate(date);},dateFormat:\"dd/MM/yyyy\",placeholderText:\"Filter By Date\",isClearable:true})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"level-item\",children:[\" \",/*#__PURE__*/_jsx(\"span\",{className:\"is-size-6 has-text-weight-medium\",children:\"Appointments \"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"level-right\",children:/*#__PURE__*/_jsx(\"div\",{className:\"level-item\",children:/*#__PURE__*/_jsx(\"div\",{className:\"level-item\",children:/*#__PURE__*/_jsx(\"div\",{className:\"button is-success is-small\",onClick:handleCreateNew,children:\"New\"})})})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"table-container pullup \",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table is-striped is-narrow is-hoverable is-fullwidth is-scrollable \",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Serial No\",children:\"S/No\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Time\",children:\"Date/Time\"})}),/*#__PURE__*/_jsx(\"th\",{children:\"First Name\"}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Last Name\",children:\"Last Name\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Class\",children:\"Classification\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Location\",children:\"Location\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Type\",children:\"Type\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Status\",children:\"Status\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Reason\",children:\"Reason\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\"Practitioner\",children:\"Practitioner\"})})]})}),/*#__PURE__*/_jsx(\"tfoot\",{}),/*#__PURE__*/_jsx(\"tbody\",{children:facilities.map(function(Client,i){return/*#__PURE__*/_jsxs(\"tr\",{onClick:function onClick(){return handleRow(Client);},className:Client._id===((selectedAppointment===null||selectedAppointment===void 0?void 0:selectedAppointment._id)||null)?\"is-selected\":\"\",children:[/*#__PURE__*/_jsx(\"th\",{children:i+1}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"strong\",{children:format(new Date(Client.start_time),\"dd-MM-yy HH:mm:ss\")})}),/*#__PURE__*/_jsx(\"th\",{children:Client.firstname}),/*#__PURE__*/_jsx(\"td\",{children:Client.lastname}),/*#__PURE__*/_jsx(\"td\",{children:Client.appointmentClass}),/*#__PURE__*/_jsxs(\"td\",{children:[Client.location_name,\" \",Client.location_type]}),/*#__PURE__*/_jsx(\"td\",{children:Client.appointment_type}),/*#__PURE__*/_jsx(\"td\",{children:Client.appointment_status}),/*#__PURE__*/_jsx(\"td\",{children:Client.appointment_reason}),/*#__PURE__*/_jsx(\"td\",{children:Client.practitioner_name})]},Client._id);})})]})})]}):/*#__PURE__*/_jsx(\"div\",{children:\"loading\"})});}export function ClientDetail(){//const { register, handleSubmit, watch, setValue } = useForm(); //errors,\n// eslint-disable-next-line\nvar history=useHistory();var _useRouteMatch=useRouteMatch(),path=_useRouteMatch.path,url=_useRouteMatch.url;var _useState57=useState(false),_useState58=_slicedToArray(_useState57,2),error=_useState58[0],setError=_useState58[1];//, \n//const [success, setSuccess] =useState(false)\n// eslint-disable-next-line\nvar _useState59=useState(\"\"),_useState60=_slicedToArray(_useState59,2),message=_useState60[0],setMessage=_useState60[1];//,\n//const ClientServ=client.service('/Client')\n//const history = useHistory()\n//const {user,setUser} = useContext(UserContext)\nvar _useContext6=useContext(ObjectContext),state=_useContext6.state,setState=_useContext6.setState;var _useState61=useState(),_useState62=_slicedToArray(_useState61,2),selectedClient=_useState62[0],setSelectedClient=_useState62[1];var _useState63=useState(),_useState64=_slicedToArray(_useState63,2),selectedAppointment=_useState64[0],setSelectedAppointment=_useState64[1];var Client=state.AppointmentModule.selectedAppointment;//const client=Client\nvar handleEdit=/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(){var newClientModule;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:newClientModule={selectedAppointment:Client,show:'modify'};_context8.next=3;return setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{AppointmentModule:newClientModule});});case 3:case\"end\":return _context8.stop();}}},_callee8);}));return function handleEdit(){return _ref8.apply(this,arguments);};}();var handleAttend=/*#__PURE__*/function(){var _ref9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(){var patient,newClientModule;return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:_context9.next=2;return client.service('client').get(Client.clientId);case 2:patient=_context9.sent;_context9.next=5;return setSelectedClient(patient);case 5:newClientModule={selectedClient:patient,show:'detail'};_context9.next=8;return setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{ClientModule:newClientModule});});case 8://modify appointment\nhistory.push('/app/clinic/encounter');case 9:case\"end\":return _context9.stop();}}},_callee9);}));return function handleAttend(){return _ref9.apply(this,arguments);};}();return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"card \",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsx(\"p\",{className:\"card-header-title\",children:\"Client Details\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-content vscrollable\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field-body\",children:[Client.firstname&&/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left has-icons-right\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0 \",name:\"firstname\",type:\"text\",children:\"First Name \"}),/*#__PURE__*/_jsx(\"label\",{className:\"is-size-7 my-0 \",children:Client.firstname}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-hospital\"})})]})}),Client.middlename&&/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left has-icons-right\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",name:\"middlename\",type:\"text\",children:\" Middle Name \"}),/*#__PURE__*/_jsx(\"label\",{className:\"is-size-7 my-0\",children:Client.middlename}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-map-signs\"})})]})}),Client.lastname&&/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",name:\"lastname\",type:\"text\",children:\"Last Name\"}),/*#__PURE__*/_jsx(\"label\",{className:\"is-size-7 my-0\",children:Client.lastname}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\" nop-user-md \"})})]})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field-body\",children:[Client.dob&&/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",name:\"dob\",type:\"text\",children:\"Date of Birth \"}),/*#__PURE__*/_jsx(\"label\",{className:\"is-size-7 my-0\",children:new Date(Client.dob).toLocaleDateString('en-GB')}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-envelope\"})})]})}),Client.gender&&/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",name:\"gender\",type:\"text\",children:\"Gender \"}),/*#__PURE__*/_jsx(\"label\",{className:\"is-size-7 my-0\",children:Client.gender}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-envelope\"})})]})}),Client.maritalstatus&&/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",name:\"maritalstatus\",type:\"text\",children:\"Marital Status \"}),/*#__PURE__*/_jsx(\"label\",{className:\"is-size-7 my-0\",children:Client.maritalstatus}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-envelope\"})})]})}),Client.mrn&&/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",name:\"mrn\",type:\"text\",children:\"Medical Records Number  \"}),/*#__PURE__*/_jsx(\"label\",{className:\"is-size-7 my-0\",children:Client.mrn}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-envelope\"})})]})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field-body\",children:[Client.religion&&/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",name:\"religion\",type:\"text\",children:\"Religion  \"}),/*#__PURE__*/_jsx(\"label\",{className:\"is-size-7 my-0\",children:Client.religion}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-envelope\"})})]})}),Client.profession&&/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",name:\"profession\",type:\"text\",children:\"Profession  \"}),/*#__PURE__*/_jsx(\"label\",{className:\"is-size-7 my-0\",children:Client.profession}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-envelope\"})})]})}),Client.phone&&/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",name:\"phone\",type:\"text\",children:\" Phone No\"}),/*#__PURE__*/_jsx(\"label\",{className:\"is-size-7 my-0\",children:Client.phone}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-phone-alt\"})})]})}),Client.email&&/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",name:\"email\",type:\"email\",children:\"Email  \"}),/*#__PURE__*/_jsx(\"label\",{className:\"is-size-7 my-0\",children:Client.email}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-envelope\"})})]})})]})}),Client.address&&/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",name:\"address\",type:\"text\",children:\"Residential Address  \"}),/*#__PURE__*/_jsx(\"label\",{className:\"is-size-7 my-0\",children:Client.address}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-envelope\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field-body\",children:[Client.city&&/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",name:\"city\",type:\"text\",children:\"Town/City  \"}),/*#__PURE__*/_jsx(\"label\",{className:\"is-size-7 my-0\",children:Client.city}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-envelope\"})})]})}),Client.lga&&/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",name:\"lga\",type:\"text\",children:\"Local Govt Area  \"}),/*#__PURE__*/_jsx(\"label\",{className:\"is-size-7 my-0\",children:Client.lga}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-envelope\"})})]})}),Client.state&&/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",name:\"state\",type:\"text\",children:\"State  \"}),/*#__PURE__*/_jsx(\"label\",{className:\"is-size-7 my-0\",children:Client.state}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-envelope\"})})]})}),Client.country&&/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",name:\"country\",type:\"text\",children:\"Country  \"}),/*#__PURE__*/_jsx(\"label\",{className:\"is-size-7 my-0\",children:Client.country}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-envelope\"})})]})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field-body\",children:[Client.bloodgroup&&/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",name:\"bloodgroup\",type:\"text\",children:\"Blood Group \"}),/*#__PURE__*/_jsx(\"label\",{className:\"is-size-7 my-0\",children:Client.bloodgroup}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-envelope\"})})]})}),Client.genotype&&/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",name:\"genotype\",type:\"text\",children:\"Genotype  \"}),/*#__PURE__*/_jsx(\"label\",{className:\"is-size-7 my-0\",children:Client.genotype}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-envelope\"})})]})}),Client.disabilities&&/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",name:\"disabilities\",type:\"text\",children:\"Disabilities  \"}),/*#__PURE__*/_jsx(\"label\",{className:\"is-size-7 my-0\",children:Client.disabilities}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-envelope\"})})]})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field-body\",children:[Client.allergies&&/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",name:\"allergies\",type:\"text\",children:\"Allergies  \"}),/*#__PURE__*/_jsx(\"label\",{className:\"is-size-7 my-0\",children:Client.allergies}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-envelope\"})})]})}),Client.comorbidities&&/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",name:\"comorbidities\",type:\"text\",children:\"Co-mobidities  \"}),/*#__PURE__*/_jsx(\"label\",{className:\"is-size-7 my-0\",children:Client.comorbidities}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-envelope\"})})]})})]})}),Client.clientTags&&/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",name:\"clientTags\",type:\"text\",children:\"Tags \"}),/*#__PURE__*/_jsx(\"label\",{className:\"is-size-7 my-0\",children:Client.clientTags}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-envelope\"})})]})}),Client.specificDetails&&/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",name:\"specificDetails\",type:\"text\",children:\"Specific Details about Client \"}),/*#__PURE__*/_jsx(\"label\",{className:\"is-size-7 my-0\",children:Client.specificDetails}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-envelope\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field-body\",children:[Client.nok_name&&/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",name:\"nok_name\",type:\"text\",children:\"Next of Kin Full Name\"}),/*#__PURE__*/_jsx(\"label\",{className:\"is-size-7 my-0\",children:Client.nok_name}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-clinic-medical\"})})]})}),Client.nok_phoneno&&/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",name:\"nok_phoneno\",type:\"text\",children:\"Next of Kin Phone Number\"}),/*#__PURE__*/_jsx(\"label\",{className:\"is-size-7 my-0\",children:Client.nok_phoneno}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-clinic-medical\"})})]})}),Client.nok_email&&/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",name:\"nok_email\",type:\"email\",children:\"Next of Kin Email \"}),/*#__PURE__*/_jsx(\"label\",{className:\"is-size-7 my-0\",children:Client.nok_email}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-envelope\"})})]})}),Client.nok_relationship&&/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label is-size-7 my-0\",name:\"nok_relationship\",type:\"text\",children:\"Next of Kin Relationship\\\"  \"}),/*#__PURE__*/_jsx(\"label\",{className:\"is-size-7 my-0\",children:Client.nok_relationship}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"nop-envelope\"})})]})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"field is-grouped  mt-2\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"control\",children:/*#__PURE__*/_jsx(\"button\",{className:\"button is-success is-small\",onClick:handleEdit,children:\"Edit Appointment Details\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"control\",children:/*#__PURE__*/_jsx(\"button\",{className:\"button is-link is-small\",onClick:function onClick(){return handleAttend();},children:\"Attend to Client\"})})]})]})]})});}export function ClientModify(){var _useForm2=useForm(),register=_useForm2.register,handleSubmit=_useForm2.handleSubmit,setValue=_useForm2.setValue,reset=_useForm2.reset,errors=_useForm2.errors;//watch, errors,\n// eslint-disable-next-line \nvar _useState65=useState(false),_useState66=_slicedToArray(_useState65,2),error=_useState66[0],setError=_useState66[1];// eslint-disable-next-line \nvar _useState67=useState(false),_useState68=_slicedToArray(_useState67,2),success=_useState68[0],setSuccess=_useState68[1];// eslint-disable-next-line \nvar _useState69=useState(\"\"),_useState70=_slicedToArray(_useState69,2),message=_useState70[0],setMessage=_useState70[1];// eslint-disable-next-line \nvar ClientServ=client.service('appointments');//const history = useHistory()\n// eslint-disable-next-line\nvar _useContext7=useContext(UserContext),user=_useContext7.user;var _useContext8=useContext(ObjectContext),state=_useContext8.state,setState=_useContext8.setState;var _useState71=useState(),_useState72=_slicedToArray(_useState71,2),selectedClient=_useState72[0],setSelectedClient=_useState72[1];var _useState73=useState(),_useState74=_slicedToArray(_useState73,2),selectedAppointment=_useState74[0],setSelectedAppointment=_useState74[1];var _useState75=useState(\"\"),_useState76=_slicedToArray(_useState75,2),appointment_status=_useState76[0],setAppointment_status=_useState76[1];var _useState77=useState(\"\"),_useState78=_slicedToArray(_useState77,2),appointment_type=_useState78[0],setAppointment_type=_useState78[1];var appClass=[\"On-site\",\"Teleconsultation\"];var _useState79=useState(),_useState80=_slicedToArray(_useState79,2),locationId=_useState80[0],setLocationId=_useState80[1];var _useState81=useState(),_useState82=_slicedToArray(_useState81,2),practionerId=_useState82[0],setPractionerId=_useState82[1];var _useState83=useState(false),_useState84=_slicedToArray(_useState83,2),success1=_useState84[0],setSuccess1=_useState84[1];var _useState85=useState(false),_useState86=_slicedToArray(_useState85,2),success2=_useState86[0],setSuccess2=_useState86[1];var _useState87=useState(),_useState88=_slicedToArray(_useState87,2),chosen1=_useState88[0],setChosen1=_useState88[1];var _useState89=useState(),_useState90=_slicedToArray(_useState89,2),chosen2=_useState90[0],setChosen2=_useState90[1];var Client=state.AppointmentModule.selectedAppointment;//console.log(Client)\nvar getSearchfacility1=function getSearchfacility1(obj){setLocationId(obj._id);setChosen1(obj);if(!obj){//\"clear stuff\"\nsetLocationId();setChosen1();}};var getSearchfacility2=function getSearchfacility2(obj){setPractionerId(obj._id);setChosen2(obj);if(!obj){//\"clear stuff\"\nsetPractionerId();setChosen2();}};useEffect(function(){setValue(\"firstname\",Client.firstname,{shouldValidate:true,shouldDirty:true});setValue(\"middlename\",Client.middlename,{shouldValidate:true,shouldDirty:true});setValue(\"lastname\",Client.lastname,{shouldValidate:true,shouldDirty:true});setValue(\"phone\",Client.phone,{shouldValidate:true,shouldDirty:true});setValue(\"email\",Client.email,{shouldValidate:true,shouldDirty:true});setValue(\"dob\",Client.dob,{shouldValidate:true,shouldDirty:true});setValue(\"gender\",Client.gender,{shouldValidate:true,shouldDirty:true});setValue(\"ClientId\",Client.clientId,{shouldValidate:true,shouldDirty:true});setValue(\"appointment_reason\",Client.appointment_reason,{shouldValidate:true,shouldDirty:true});setValue(\"appointment_status\",Client.appointment_status,{shouldValidate:true,shouldDirty:true});setValue(\"appointment_type\",Client.appointment_type,{shouldValidate:true,shouldDirty:true});setValue(\"start_time\",format(new Date(Client.start_time),\"yyyy-MM-dd'T'HH:mm:ss\"),{shouldValidate:true,shouldDirty:true});setValue(\"appointmentClass\",Client.appointmentClass,{shouldValidate:true,shouldDirty:true});return function(){};});var handleChangeType=/*#__PURE__*/function(){var _ref10=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee10(e){return _regeneratorRuntime.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:// await setAppointment_type(e.target.value)\nsetValue(\"appointment_type\",e.target.value,{shouldValidate:true,shouldDirty:true});case 1:case\"end\":return _context10.stop();}}},_callee10);}));return function handleChangeType(_x5){return _ref10.apply(this,arguments);};}();var handleChangeStatus=/*#__PURE__*/function(){var _ref11=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee11(e){return _regeneratorRuntime.wrap(function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:// await setAppointment_status(e.target.value)\nsetValue(\"appointment_status\",e.target.value,{shouldValidate:true,shouldDirty:true});case 1:case\"end\":return _context11.stop();}}},_callee11);}));return function handleChangeStatus(_x6){return _ref11.apply(this,arguments);};}();var handleCancel=/*#__PURE__*/function(){var _ref12=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee12(){var newClientModule;return _regeneratorRuntime.wrap(function _callee12$(_context12){while(1){switch(_context12.prev=_context12.next){case 0:newClientModule={selectedAppointment:{},show:'create'};_context12.next=3;return setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{AppointmentModule:newClientModule});});case 3:case\"end\":return _context12.stop();}}},_callee12);}));return function handleCancel(){return _ref12.apply(this,arguments);};}();var changeState=function changeState(){var newClientModule={selectedAppointment:{},show:'create'};setState(function(prevstate){return _objectSpread(_objectSpread({},prevstate),{},{AppointmentModule:newClientModule});});};var handleDelete=/*#__PURE__*/function(){var _ref13=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee13(){var conf,dleteId;return _regeneratorRuntime.wrap(function _callee13$(_context13){while(1){switch(_context13.prev=_context13.next){case 0:conf=window.confirm(\"Are you sure you want to delete this data?\");dleteId=Client._id;if(conf){ClientServ.remove(dleteId).then(function(res){//console.log(JSON.stringify(res))\nreset();/*  setMessage(\"Deleted Client successfully\")\n                setSuccess(true)\n                changeState()\n               setTimeout(() => {\n                setSuccess(false)\n                }, 200); */toast({message:'Client deleted succesfully',type:'is-success',dismissible:true,pauseOnHover:true});changeState();}).catch(function(err){// setMessage(\"Error deleting Client, probable network issues \"+ err )\n// setError(true)\ntoast({message:\"Error deleting Client, probable network issues or \"+err,type:'is-danger',dismissible:true,pauseOnHover:true});});}case 3:case\"end\":return _context13.stop();}}},_callee13);}));return function handleDelete(){return _ref13.apply(this,arguments);};}();var onSubmit=function onSubmit(data,e){e.preventDefault();setSuccess(false);// console.log(data)\n//  data.facility=Client.facility\n//console.log(data);\ndata.practitioner_name=chosen2.firstname+\" \"+chosen2.lastname;data.practitioner_profession=chosen2.profession;data.practitioner_department=chosen2.department;data.practitionerId=chosen2._id;data.locationId=chosen1._id;data.location_name=chosen1.name;data.location_type=chosen1.locationType;//data.actions\nif(Client.appointment_status!==data.appointment_status){Client.actions.push({status:data.appointment_status,actor:user.currentEmployee._id});}data.actions=Client.actions;ClientServ.patch(Client._id,data).then(function(res){//console.log(JSON.stringify(res))\n// e.target.reset();\n// setMessage(\"updated Client successfully\")\ntoast({message:'Client updated succesfully',type:'is-success',dismissible:true,pauseOnHover:true});changeState();}).catch(function(err){//setMessage(\"Error creating Client, probable network issues \"+ err )\n// setError(true)\ntoast({message:\"Error updating Client, probable network issues or \"+err,type:'is-danger',dismissible:true,pauseOnHover:true});});};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"card \",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsx(\"p\",{className:\"card-header-title\",children:\"Client Details-Modify\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-content vscrollable remPad1\",children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"label\",{className:\"label is-size-7\",children:[\" \",Client.firstname,\" \",Client.lastname]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsx(\"div\",{className:\"field-body\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field is-expanded\"/* style={ !user.stacker?{display:\"none\"}:{}} */,children:[/*#__PURE__*/_jsx(LocationSearch,{id:Client.locationId,getSearchfacility:getSearchfacility1,clear:success1}),/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left \",style:{display:\"none\"},children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\"/* ref={register ({ required: true }) } */ /* add array no */,value:locationId,name:\"locationId\",type:\"text\",onChange:function onChange(e){return setLocationId(e.target.value);},placeholder:\"Product Id\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas  fa-map-marker-alt\"})})]})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsx(\"div\",{className:\"field-body\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field is-expanded\"/* style={ !user.stacker?{display:\"none\"}:{}} */,children:[/*#__PURE__*/_jsx(EmployeeSearch,{id:Client.practitionerId,getSearchfacility:getSearchfacility2,clear:success2}),/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left \",style:{display:\"none\"},children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\"/* ref={register ({ required: true }) } */ /* add array no */,value:practionerId,name:\"practionerId\",type:\"text\",onChange:function onChange(e){return setPractionerId(e.target.value);},placeholder:\"Product Id\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas  fa-map-marker-alt\"})})]})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"field is-horizontal\",children:/*#__PURE__*/_jsx(\"div\",{className:\"field ml-3 \",children:appClass.map(function(c,i){return/*#__PURE__*/_jsxs(\"label\",{className:\" is-small\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",value:c,name:\"appointmentClass\",ref:register}),c+\" \"]},c);})})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsx(\"input\",{name:\"start_time\",ref:register({required:true}),type:\"datetime-local\",defaultValue:format(new Date(Client.start_time),\"yyyy-MM-dd'T'HH:mm:ss\")})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsx(\"div\",{className:\"control\",children:/*#__PURE__*/_jsx(\"div\",{className:\"select is-small\",children:/*#__PURE__*/_jsxs(\"select\",{/* name=\"type\" */ /* value={appointment_type} */name:\"appointment_type\",ref:register({required:true}),onChange:handleChangeType,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Choose Appointment Type  \"}),/*#__PURE__*/_jsx(\"option\",{value:\"New\",children:\"New\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Followup\",children:\"Followup\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Readmission with 24hrs\",children:\"Readmission with 24hrs\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Annual Checkup\",children:\"Annual Checkup\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Walk in\",children:\"Walk-in\"})]})})})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsx(\"div\",{className:\"control\",children:/*#__PURE__*/_jsx(\"div\",{className:\"select is-small\",children:/*#__PURE__*/_jsxs(\"select\",{name:\"appointment_status\",ref:register({required:true})/* value={appointment_status} */,onChange:handleChangeStatus,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Appointment Status  \"}),/*#__PURE__*/_jsx(\"option\",{value:\"Scheduled\",children:\"Scheduled\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Confirmed\",children:\"Confirmed\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Checked In\",children:\"Checked In\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Vitals Taken\",children:\"Vitals Taken\"}),/*#__PURE__*/_jsx(\"option\",{value:\"With Nurse\",children:\"With Nurse\"}),/*#__PURE__*/_jsx(\"option\",{value:\"With Doctor\",children:\"With Doctor\"}),/*#__PURE__*/_jsx(\"option\",{value:\"No Show\",children:\"No Show\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Cancelled\",children:\"Cancelled\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Billed\",children:\"Billed\"})]})})})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left has-icons-right\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register(),name:\"appointment_reason\",type:\"text\",placeholder:\"Reason For Appointment\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-hospital\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field \",style:{display:\"none\"},children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left has-icons-right\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input is-small\",ref:register(),name:\"billingservice\",type:\"text\",placeholder:\"Billing service\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-hospital\"})})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field  is-grouped mt-2\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"control\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"button is-success is-small\",onClick:handleSubmit(onSubmit),children:\"Save\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"control\",children:/*#__PURE__*/_jsx(\"button\",{className:\"button is-warning is-small\",onClick:handleCancel,children:\"Cancel\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"control\",children:/*#__PURE__*/_jsx(\"button\",{className:\"button is-danger is-small\",onClick:function onClick(){return handleDelete();},type:\"delete\",children:\"Delete\"})})]})]})]})});}export function ClientSearch(_ref14){var getSearchfacility=_ref14.getSearchfacility,clear=_ref14.clear;var ClientServ=client.service('client');var _useState91=useState([]),_useState92=_slicedToArray(_useState91,2),facilities=_useState92[0],setFacilities=_useState92[1];// eslint-disable-next-line\nvar _useState93=useState(false),_useState94=_slicedToArray(_useState93,2),searchError=_useState94[0],setSearchError=_useState94[1];// eslint-disable-next-line\nvar _useState95=useState(false),_useState96=_slicedToArray(_useState95,2),showPanel=_useState96[0],setShowPanel=_useState96[1];// eslint-disable-next-line\nvar _useState97=useState(\"\"),_useState98=_slicedToArray(_useState97,2),searchMessage=_useState98[0],setSearchMessage=_useState98[1];// eslint-disable-next-line \nvar _useState99=useState(\"\"),_useState100=_slicedToArray(_useState99,2),simpa=_useState100[0],setSimpa=_useState100[1];// eslint-disable-next-line \nvar _useState101=useState(false),_useState102=_slicedToArray(_useState101,2),chosen=_useState102[0],setChosen=_useState102[1];// eslint-disable-next-line \nvar _useState103=useState(0),_useState104=_slicedToArray(_useState103,2),count=_useState104[0],setCount=_useState104[1];var inputEl=useRef(null);var _useState105=useState(\"\"),_useState106=_slicedToArray(_useState105,2),val=_useState106[0],setVal=_useState106[1];var _useContext9=useContext(UserContext),user=_useContext9.user;var _useContext10=useContext(ObjectContext),state=_useContext10.state;var _useState107=useState(false),_useState108=_slicedToArray(_useState107,2),productModal=_useState108[0],setProductModal=_useState108[1];var handleRow=/*#__PURE__*/function(){var _ref15=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee14(obj){return _regeneratorRuntime.wrap(function _callee14$(_context14){while(1){switch(_context14.prev=_context14.next){case 0:_context14.next=2;return setChosen(true);case 2://alert(\"something is chaning\")\ngetSearchfacility(obj);_context14.next=5;return setSimpa(obj.firstname+\" \"+obj.middlename+\" \"+obj.lastname+\" \"+obj.gender+\" \"+obj.phone);case 5:// setSelectedFacility(obj)\nsetShowPanel(false);_context14.next=8;return setCount(2);case 8:case\"end\":return _context14.stop();}}},_callee14);}));return function handleRow(_x7){return _ref15.apply(this,arguments);};}();var handleBlur=/*#__PURE__*/function(){var _ref16=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee15(e){return _regeneratorRuntime.wrap(function _callee15$(_context15){while(1){switch(_context15.prev=_context15.next){case 0:if(count===2){console.log(\"stuff was chosen\");}/*  console.log(\"blur\")\n         setShowPanel(false)\n        console.log(JSON.stringify(simpa))\n        if (simpa===\"\"){\n            console.log(facilities.length)\n            setSimpa(\"abc\")\n            setSimpa(\"\")\n            setFacilities([])\n            inputEl.current.setValue=\"\"\n        }\n        console.log(facilities.length)\n        console.log(inputEl.current) */case 1:case\"end\":return _context15.stop();}}},_callee15);}));return function handleBlur(_x8){return _ref16.apply(this,arguments);};}();var handleSearch=/*#__PURE__*/function(){var _ref17=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee16(val){var field;return _regeneratorRuntime.wrap(function _callee16$(_context16){while(1){switch(_context16.prev=_context16.next){case 0:setVal(val);if(!(val===\"\")){_context16.next=5;break;}setShowPanel(false);getSearchfacility(false);return _context16.abrupt(\"return\");case 5:field='name';//field variable\nif(!(val.length>=3)){_context16.next=10;break;}ClientServ.find({query:{$or:[{firstname:{$regex:val,$options:'i'}},{lastname:{$regex:val,$options:'i'}},{middlename:{$regex:val,$options:'i'}},{phone:{$regex:val,$options:'i'}},{clientTags:{$regex:val,$options:'i'}},{mrn:{$regex:val,$options:'i'}},{specificDetails:{$regex:val,$options:'i'}}],facility:user.currentEmployee.facilityDetail._id,//storeId: state.StoreModule.selectedStore._id,\n$limit:10,$sort:{createdAt:-1}}}).then(function(res){console.log(\"product  fetched successfully\");console.log(res.data);setFacilities(res.data);setSearchMessage(\" product  fetched successfully\");setShowPanel(true);}).catch(function(err){toast({message:'Error creating ProductEntry '+err,type:'is-danger',dismissible:true,pauseOnHover:true});});_context16.next=16;break;case 10:console.log(\"less than 3 \");console.log(val);setShowPanel(false);_context16.next=15;return setFacilities([]);case 15:console.log(facilities);case 16:case\"end\":return _context16.stop();}}},_callee16);}));return function handleSearch(_x9){return _ref17.apply(this,arguments);};}();var handleAddproduct=function handleAddproduct(){setProductModal(true);};var handlecloseModal=function handlecloseModal(){setProductModal(false);handleSearch(val);};useEffect(function(){if(clear){console.log(\"success has changed\",clear);setSimpa(\"\");}return function(){};},[clear]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsx(\"div\",{className:\"control has-icons-left  \",children:/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown \".concat(showPanel?\"is-active\":\"\"),style:{width:\"100%\"},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown-trigger\",style:{width:\"100%\"},children:[/*#__PURE__*/_jsx(DebounceInput,{className:\"input is-small  is-expanded mb-0\",type:\"text\",placeholder:\"Search for Client\",value:simpa,minLength:3,debounceTimeout:400,onBlur:function onBlur(e){return handleBlur(e);},onChange:function onChange(e){return handleSearch(e.target.value);},inputRef:inputEl}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-search\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"dropdown-menu expanded\",style:{width:\"100%\"},children:/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown-content\",children:[facilities.length>0?\"\":/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown-item\"/* onClick={handleAddproduct} */,children:[\" \",/*#__PURE__*/_jsxs(\"span\",{children:[\" \",val,\" is not yet your client\"]}),\" \"]}),facilities.map(function(facility,i){return/*#__PURE__*/_jsx(\"div\",{className:\"dropdown-item\",onClick:function onClick(){return handleRow(facility);},children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{children:facility.firstname}),/*#__PURE__*/_jsx(\"span\",{className:\"padleft\",children:facility.middlename}),/*#__PURE__*/_jsx(\"span\",{className:\"padleft\",children:facility.lastname}),/*#__PURE__*/_jsxs(\"span\",{className:\"padleft\",children:[\" \",formatDistanceToNowStrict(new Date(facility.dob))]}),/*#__PURE__*/_jsx(\"span\",{className:\"padleft\",children:facility.gender}),/*#__PURE__*/_jsx(\"span\",{className:\"padleft\",children:facility.profession}),/*#__PURE__*/_jsx(\"span\",{className:\"padleft\",children:facility.phone}),/*#__PURE__*/_jsx(\"span\",{className:\"padleft\",children:facility.email})]})},facility._id);})]})})]})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal \".concat(productModal?\"is-active\":\"\"),children:[/*#__PURE__*/_jsx(\"div\",{className:\"modal-background\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-card\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"modal-card-head\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"modal-card-title\",children:\"Choose Store\"}),/*#__PURE__*/_jsx(\"button\",{className:\"delete\",\"aria-label\":\"close\",onClick:handlecloseModal})]}),/*#__PURE__*/_jsx(\"section\",{className:\"modal-card-body\"})]})]})]});}","map":{"version":3,"sources":["/home/mfybaby/Documents/HealthStack2/HS-frontend/src/components/Clinic/Appointments.js"],"names":["React","useState","useContext","useEffect","useRef","Route","Switch","useRouteMatch","Link","NavLink","useHistory","client","DebounceInput","useForm","UserContext","ObjectContext","toast","formatDistanceToNowStrict","format","subDays","addDays","DatePicker","LocationSearch","EmployeeSearch","BillServiceCreate","searchfacility","Appointments","state","selectedClient","setSelectedClient","selectedAppointment","setSelectedAppointment","AppointmentModule","show","AppointmentCreate","setState","register","handleSubmit","setValue","error","setError","success","setSuccess","success1","setSuccess1","success2","setSuccess2","message","setMessage","clientId","setClientId","locationId","setLocationId","practionerId","setPractionerId","type","setType","facility","setFacility","ClientServ","service","user","currentUser","setCurrentUser","appointment_status","setAppointment_status","appointment_type","setAppointment_type","billingModal","setBillingModal","chosen","setChosen","chosen1","setChosen1","chosen2","setChosen2","appClass","appointee","handleChangeType","e","target","value","handleChangeStatus","getSearchfacility","obj","_id","getSearchfacility1","getSearchfacility2","stacker","onSubmit","data","preventDefault","console","log","currentEmployee","facilityDetail","practitionerId","firstname","middlename","lastname","dob","gender","phone","email","practitioner_name","practitioner_profession","profession","practitioner_department","department","location_name","name","location_type","locationType","actions","action","actor","create","then","res","reset","dismissible","pauseOnHover","catch","err","ClientModule","undefined","display","map","c","i","required","ClientList","facilities","setFacilities","setUser","Date","startDate","setStartDate","handleCreateNew","newClientModule","prevstate","newClient","handleRow","Client","handleSearch","val","field","query","$or","$regex","$options","appointment_reason","$limit","$sort","createdAt","employeeLocation","find","getFacilities","stuff","findClient","handleCalendarClose","on","start_time","$gt","$lt","handleDate","date","appointmentClass","ClientDetail","history","path","url","handleEdit","handleAttend","get","patient","push","toLocaleDateString","maritalstatus","mrn","religion","address","city","lga","country","bloodgroup","genotype","disabilities","allergies","comorbidities","clientTags","specificDetails","nok_name","nok_phoneno","nok_email","nok_relationship","ClientModify","errors","shouldValidate","shouldDirty","handleCancel","changeState","handleDelete","conf","window","confirm","dleteId","remove","status","patch","ClientSearch","clear","searchError","setSearchError","showPanel","setShowPanel","searchMessage","setSearchMessage","simpa","setSimpa","count","setCount","inputEl","setVal","productModal","setProductModal","handleBlur","length","handleAddproduct","handlecloseModal","width"],"mappings":"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","sourcesContent":["/* eslint-disable */\nimport React, {useState,useContext, useEffect,useRef} from 'react'\nimport {Route, Switch,  useRouteMatch, Link, NavLink, useHistory} from 'react-router-dom'\nimport client from '../../feathers'\nimport {DebounceInput} from 'react-debounce-input';\nimport { useForm } from \"react-hook-form\";\n//import {useHistory} from 'react-router-dom'\nimport {UserContext,ObjectContext} from '../../context'\nimport {toast} from 'bulma-toast'\nimport { formatDistanceToNowStrict, format, subDays,addDays } from 'date-fns'\nimport DatePicker from \"react-datepicker\";\nimport LocationSearch from \"../helpers/LocationSearch\"\nimport EmployeeSearch from \"../helpers/EmployeeSearch\"\nimport BillServiceCreate from '../Finance/BillServiceCreate'\nimport \"react-datepicker/dist/react-datepicker.css\";\n// eslint-disable-next-line\nconst searchfacility={};\n\n\nexport default function Appointments() {\n    const {state}=useContext(ObjectContext) //,setState\n    // eslint-disable-next-line\n    const [selectedClient,setSelectedClient]=useState()\n    const [selectedAppointment,setSelectedAppointment]=useState()\n    //const [showState,setShowState]=useState() //create|modify|detail\n    \n    return(\n        <section className= \"section remPadTop\">\n            <div className=\"columns \">\n           \n            <div className=\"column is-8 \">\n                <ClientList />\n                </div>\n            <div className=\"column is-4 \">\n                {(state.AppointmentModule.show ==='create')&&<AppointmentCreate />}\n                {(state.AppointmentModule.show ==='detail')&&<ClientDetail  />}\n                {(state.AppointmentModule.show ==='modify')&&<ClientModify Client={selectedClient} />}\n               \n            </div>\n\n            </div>                            \n            </section>\n       \n    )\n    \n}\n\nexport function AppointmentCreate(){\n    const {state,setState}=useContext(ObjectContext) \n    const { register, handleSubmit,setValue} = useForm(); //, watch, errors, reset \n    const [error, setError] =useState(false)\n    const [success, setSuccess] =useState(false)\n    const [success1, setSuccess1] =useState(false)\n    const [success2, setSuccess2] =useState(false)\n    const [message,setMessage] = useState(\"\")\n    const [clientId,setClientId] = useState()\n    const [locationId,setLocationId] = useState()\n    const [practionerId,setPractionerId] = useState()\n    const [type,setType] = useState()\n    // eslint-disable-next-line\n    const [facility,setFacility] = useState()\n    const ClientServ=client.service('appointments')\n    //const history = useHistory()\n    const {user} = useContext(UserContext) //,setUser\n    // eslint-disable-next-line\n    const [currentUser,setCurrentUser] = useState()\n    const [selectedClient,setSelectedClient]=useState()\n    const [selectedAppointment,setSelectedAppointment]=useState()\n   // const [appointment_reason,setAppointment_reason]= useState()\n    const [appointment_status,setAppointment_status]=useState(\"\")\n    const [appointment_type, setAppointment_type]=useState(\"\")\n    const [billingModal, setBillingModal] =useState(false)\n\n    const [chosen, setChosen]=useState()\n    const [chosen1, setChosen1]=useState()\n    const [chosen2, setChosen2]=useState()\n    const appClass=[ \"On-site\",\"Teleconsultation\",\"Home Visit\"]\n\n    let appointee  //  =state.ClientModule.selectedClient \n   /*  const getSearchfacility=(obj)=>{\n        setValue(\"facility\", obj._id,  {\n            shouldValidate: true,\n            shouldDirty: true\n        })\n    } */\n    const handleChangeType=async (e)=>{\n        await setAppointment_type(e.target.value)\n    }\n\n    const handleChangeStatus=async (e)=>{\n        await setAppointment_status(e.target.value)\n    }\n\n   \n    const getSearchfacility=(obj)=>{\n\n       setClientId(obj._id)\n       setChosen(obj)\n       //handleRow(obj)\n        if (!obj){\n            //\"clear stuff\"\n            setClientId()\n            setChosen()\n           \n        }\n    \n        \n       /*  setValue(\"facility\", obj._id,  {\n            shouldValidate: true,\n            shouldDirty: true\n        }) */\n    }\n    const getSearchfacility1=(obj)=>{\n\n        setLocationId(obj._id)\n        setChosen1(obj)\n        \n         if (!obj){\n             //\"clear stuff\"\n             setLocationId()\n             setChosen1()\n            \n         }\n     }\n     const getSearchfacility2=(obj)=>{\n\n        setPractionerId(obj._id)\n        setChosen2(obj)\n        \n         if (!obj){\n             //\"clear stuff\"\n             setPractionerId()\n             setChosen2()\n            \n         }\n     }\n\n    useEffect(() => {\n        setCurrentUser(user)\n        //console.log(currentUser)\n        return () => {\n        \n        }\n    }, [user])\n\n  //check user for facility or get list of facility  \n    useEffect(()=>{\n        //setFacility(user.activeClient.FacilityId)//\n      if (!user.stacker){\n       /*    console.log(currentUser)\n        setValue(\"facility\", user.currentEmployee.facilityDetail._id,  {\n            shouldValidate: true,\n            shouldDirty: true\n        })  */\n      }\n    })\n\n    const onSubmit = (data,e) =>{\n        e.preventDefault();\n        setMessage(\"\")\n        setError(false)\n        setSuccess(false)\n         // data.createdby=user._id\n          console.log(data);\n          if (user.currentEmployee){\n          data.facility=user.currentEmployee.facilityDetail._id  // or from facility dropdown\n          }\n          data.locationId=locationId //state.ClinicModule.selectedClinic._id\n          data.practitionerId=practionerId\n          data.appointment_type=appointment_type\n         // data.appointment_reason=appointment_reason\n          data.appointment_status=appointment_status\n          data.clientId=clientId\n          data.firstname=chosen.firstname\n            data.middlename=chosen.middlename\n            data.lastname=chosen.lastname\n            data.dob=chosen.dob\n            data.gender=chosen.gender\n            data.phone=chosen.phone\n            data.email=chosen.email\n            data.practitioner_name=chosen2.firstname+\" \"+chosen2.lastname\n            data.practitioner_profession=chosen2.profession\n            data.practitioner_department=chosen2.department\n            data.location_name=chosen1.name\n            data.location_type=chosen1.locationType\n          data.actions=[{\n              action:appointment_status,\n              actor:user.currentEmployee._id\n          }]\n          console.log(data);\n          \n\n        ClientServ.create(data)\n        .then((res)=>{\n                //console.log(JSON.stringify(res))\n                e.target.reset();\n               setAppointment_type(\"\")\n               setAppointment_status(\"\")\n               setClientId(\"\")\n               setLocationId(\"\")\n               /*  setMessage(\"Created Client successfully\") */\n                setSuccess(true)\n                setSuccess1(true)\n                setSuccess2(true)\n                toast({\n                    message: 'Appointment created succesfully, Kindly bill patient if required',\n                    type: 'is-success',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  })\n                  setSuccess(false)\n                  setSuccess1(false)\n                  setSuccess2(false)\n                 // showBilling()\n            })\n            .catch((err)=>{\n                toast({\n                    message: 'Error creating Appointment ' + err,\n                    type: 'is-danger',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  })\n            })\n\n      } \n\n    useEffect(() => {\n        getSearchfacility(state.ClientModule.selectedClient )\n        \n        /* appointee=state.ClientModule.selectedClient \n        console.log(appointee.firstname) */\n        return () => {\n           \n        }\n    }, [state.ClientModule.selectedClient ])\n\n  /*   const showBilling = () =>{\n        setBillingModal(true)\n       //history.push('/app/finance/billservice')\n        }\n        const  handlecloseModal1 = () =>{\n            setBillingModal(false)\n            }\n\n\n            const handleRow= async(Client)=>{\n              //  await setSelectedClient(Client)\n                const    newClientModule={\n                    selectedClient:Client,\n                    show :'detail'\n                }\n               await setState((prevstate)=>({...prevstate, ClientModule:newClientModule}))\n            } */\n\n    return (\n        <>\n            \n            <div className=\"card \">\n            <div className=\"card-header\">\n                <p className=\"card-header-title\">\n                    Create Appointment\n                </p>\n            </div>\n            <div className=\"card-content vscrollable remPad1\">\n          \n            <form onSubmit={handleSubmit(onSubmit)}>\n            <div className=\"field is-horizontal\">\n            <div className=\"field-body\">\n           {/*  <label className=\"label is-small mr-2\">Client:</label> */}\n         \n          {state.ClientModule.selectedClient.firstname !==undefined ? <> \n              <label className=\"label is-size-7\" > {state.ClientModule.selectedClient.firstname} {state.ClientModule.selectedClient .lastname}</label>\n               </> \n               : <div className=\"field is-expanded\"  /* style={ !user.stacker?{display:\"none\"}:{}} */ >\n                    <ClientSearch  getSearchfacility={getSearchfacility} clear={success} /> \n                    <p className=\"control has-icons-left \" style={{display:\"none\"}}>\n                        <input className=\"input is-small\"  /* ref={register ({ required: true }) } */  /* add array no */  value={clientId} name=\"ClientId\" type=\"text\" onChange={e=>setClientId(e.target.value)} placeholder=\"Product Id\" />\n                        <span className=\"icon is-small is-left\">\n                        <i className=\"fas  fa-map-marker-alt\"></i>\n                        </span>\n                    </p>\n                 {/* {sellingprice &&   \"N\"}{sellingprice} {sellingprice &&   \"per\"}  {baseunit} {invquantity} {sellingprice &&   \"remaining\"}  */}\n                </div>}\n            </div>\n        </div>\n        <div className=\"field is-horizontal\">\n            <div className=\"field-body\">\n                <div className=\"field is-expanded\"  /* style={ !user.stacker?{display:\"none\"}:{}} */ >\n                    <LocationSearch  getSearchfacility={getSearchfacility1} clear={success1} /> \n                    <p className=\"control has-icons-left \" style={{display:\"none\"}}>\n                        <input className=\"input is-small\"  /* ref={register ({ required: true }) } */  /* add array no */  value={locationId} name=\"locationId\" type=\"text\" onChange={e=>setLocationId(e.target.value)} placeholder=\"Product Id\" />\n                        <span className=\"icon is-small is-left\">\n                        <i className=\"fas  fa-map-marker-alt\"></i>\n                        </span>\n                    </p>\n                </div>\n            </div>\n        </div>\n        <div className=\"field is-horizontal\">\n            <div className=\"field-body\">\n                <div className=\"field is-expanded\"  /* style={ !user.stacker?{display:\"none\"}:{}} */ >\n                    <EmployeeSearch  getSearchfacility={getSearchfacility2} clear={success2} /> \n                    <p className=\"control has-icons-left \" style={{display:\"none\"}}>\n                        <input className=\"input is-small\"  /* ref={register ({ required: true }) } */  /* add array no */  value={practionerId} name=\"practionerId\" type=\"text\" onChange={e=>setPractionerId(e.target.value)} placeholder=\"Product Id\" />\n                        <span className=\"icon is-small is-left\">\n                        <i className=\"fas  fa-map-marker-alt\"></i>\n                        </span>\n                    </p>\n                </div>\n             \n            </div>\n        </div>\n        <div className=\"field is-horizontal\">\n                       \n                       <div className=\"field ml-3 \">\n                       {/* <label className= \"mr-2 \"> <b>Modules:</b></label> */}\n                           {\n                               appClass.map((c,i) => \n                                   <label  className=\" is-small\" key={c}>\n                                       <input type=\"radio\" value={c} name=\"appointmentClass\" ref={register} />{c + \" \"}\n                                   </label>\n                               )\n                           }\n                       </div>  \n                       </div>\n        <div className=\"field\">\n            <input name=\"start_time\" ref={register ({ required: true })} type=\"datetime-local\" />\n        </div>\n           \n        <div className=\"field\">    \n                <div className=\"control\">\n                    <div className=\"select is-small\">\n                        <select name=\"type\" value={type} onChange={handleChangeType}>\n                           <option value=\"\">Choose Appointment Type  </option>\n                            <option value=\"New\">New</option>\n                            <option value=\"Followup\">Followup</option>\n                            <option value=\"Readmission with 24hrs\">Readmission with 24hrs</option>\n                            <option value=\"Annual Checkup\">Annual Checkup</option>\n                            <option value=\"Walk in\">Walk-in</option>\n                        </select>\n                    </div>\n                </div>\n            </div>\n        <div className=\"field\">    \n                <div className=\"control\">\n                    <div className=\"select is-small\">\n                        <select name=\"appointment_status\" value={appointment_status} onChange={handleChangeStatus}>\n                           <option value=\"\">Appointment Status  </option>\n                            <option value=\"Scheduled\">Scheduled</option>\n                            <option value=\"Confirmed\">Confirmed</option>\n                            <option value=\"Checked In\">Checked In</option>\n                            <option value=\"Vitals Taken\">Vitals Taken</option>\n                            <option value=\"With Nurse\">With Nurse</option>\n                            <option value=\"With Doctor\">With Doctor</option>\n                            <option value=\"No Show\">No Show</option>\n                            <option value=\"Cancelled\">Cancelled</option>\n                            <option value=\"Billed\">Billed</option>\n                        </select>\n                    </div>\n                </div>\n        </div>\n        <div className=\"field\">\n            <p className=\"control has-icons-left has-icons-right\">\n                <input className=\"input is-small\" ref={register()}  name=\"appointment_reason\" type=\"text\" placeholder=\"Reason For Appointment\" />\n                <span className=\"icon is-small is-left\">\n                    <i className=\"fas fa-hospital\"></i>\n                </span>                    \n            </p>\n        </div>\n        <div className=\"field \" style={{display:\"none\"}} >\n            <p className=\"control has-icons-left has-icons-right\">\n                <input className=\"input is-small\" ref={register()}  name=\"billingservice\" type=\"text\" placeholder=\"Billing service\" />\n                <span className=\"icon is-small is-left\">\n                    <i className=\"fas fa-hospital\"></i>\n                </span>                    \n            </p>\n        </div>\n        \n           \n        <div className=\"field  is-grouped mt-2\" >\n                <p className=\"control\">\n                    <button type=\"submit\" className=\"button is-success is-small\" >\n                        Save\n                    </button>\n                </p>\n                <p className=\"control\">\n                    <button className=\"button is-warning is-small\" onClick={(e)=>e.target.reset()}>\n                        Cancel\n                    </button>\n                </p>\n                 {/* <p className=\"control\">\n                    <button className=\"button is-danger is-small\" onClick={()=>handleDelete()} type=\"delete\">\n                       Delete\n                    </button>\n                </p> */}\n            </div>\n     \n            </form>\n            </div>\n            </div>\n            {/* <div className={`modal ${billingModal?\"is-active\":\"\"}` }>\n                <div className=\"modal-background\"></div>\n                <div className=\"modal-card\">\n                    <header className=\"modal-card-head\">\n                    <p className=\"modal-card-title\">Bill Client</p>\n                    <button className=\"delete\" aria-label=\"close\"  onClick={handlecloseModal1}></button>\n                    </header>\n                    <section className=\"modal-card-body\">\n                   \n                    < BillServiceCreate closeModal={handlecloseModal1}/>\n                    </section>\n                  \n                </div>\n            </div>  */}      \n        </>\n    )\n   \n}\n\nexport function ClientList(){\n   // const { register, handleSubmit, watch, errors } = useForm();\n    // eslint-disable-next-line\n    const [error, setError] =useState(false)\n     // eslint-disable-next-line\n    const [success, setSuccess] =useState(false)\n     // eslint-disable-next-line\n   const [message, setMessage] = useState(\"\") \n    const ClientServ=client.service('appointments')\n    //const history = useHistory()\n   // const {user,setUser} = useContext(UserContext)\n    const [facilities,setFacilities]=useState([])\n     // eslint-disable-next-line\n   const [selectedClient, setSelectedClient]=useState() //\n    // eslint-disable-next-line\n    const {state,setState}=useContext(ObjectContext)\n    // eslint-disable-next-line\n    const {user,setUser}=useContext(UserContext)\n    const [startDate, setStartDate] = useState(new Date())\n    const [selectedAppointment,setSelectedAppointment]=useState()\n\n\n\n    const handleCreateNew = async()=>{\n        const newClientModule={\n            selectedAppointment:{},\n            show :'create'\n            }\n        await setState((prevstate)=>({...prevstate, AppointmentModule:newClientModule}))\n       //console.log(state)\n       const newClient={\n        selectedClient:{},\n        show :'create'\n        }\n        await setState((prevstate)=>({...prevstate, ClientModule:newClient}))\n        } \n\n    \n    const handleRow= async(Client)=>{\n        await setSelectedAppointment(Client)\n        const    newClientModule={\n            selectedAppointment:Client,\n            show :'detail'\n        }\n       await setState((prevstate)=>({...prevstate, AppointmentModule:newClientModule}))\n    }\n    //console.log(state.employeeLocation)\n\n   const handleSearch=(val)=>{\n       const field='firstname'\n     //  console.log(val)\n\n     let query={\n        $or:[\n            { firstname: {\n                $regex:val,\n                $options:'i' \n            }},\n            { lastname: {\n                $regex:val,\n                $options:'i' \n            }},\n            { middlename: {\n                $regex:val,\n                $options:'i' \n            }}, \n            { phone: {\n                $regex:val,\n                $options:'i' \n            }},\n            { appointment_type: {\n                $regex:val,\n                $options:'i' \n            }},\n            { appointment_status: {\n                $regex:val,\n                $options:'i' \n            }},\n            {appointment_reason: {\n                $regex:val,\n                $options:'i' \n            }},\n            {location_type: {\n                $regex:val,\n                $options:'i' \n            }},\n            {location_name: {\n                $regex:val,\n                $options:'i' \n            }},\n            {practitioner_department: {\n                $regex:val,\n                $options:'i' \n            }},\n            {practitioner_profession: {\n                $regex:val,\n                $options:'i' \n            }},\n            {practitioner_name: {\n                $regex:val,\n                $options:'i' \n            }},\n          \n        ],\n      facility:user.currentEmployee.facilityDetail._id, // || \"\",\n        $limit:20,\n        $sort: {\n            createdAt: -1\n          }\n            }\n          if (state.employeeLocation.locationType!==\"Front Desk\"){\n              query.locationId=state.employeeLocation.locationId}  \n     \n       ClientServ.find({query: query\n          }).then((res)=>{\n                  console.log(res)\n               setFacilities(res.data)\n                setMessage(\" Client  fetched successfully\")\n                setSuccess(true) \n            })\n            .catch((err)=>{\n                console.log(err)\n                setMessage(\"Error fetching Client, probable network issues \"+ err )\n                setError(true)\n            })\n        }\n   \n    const getFacilities= async()=>{\n            if (user.currentEmployee){   \n                let stuff={\n                    facility:user.currentEmployee.facilityDetail._id,\n                   // locationId:state.employeeLocation.locationId,\n                    $limit:100,\n                    $sort: {\n                        createdAt: -1\n                    }\n                }\n                if (state.employeeLocation.locationType!==\"Front Desk\"){\n                    stuff.locationId=state.employeeLocation.locationId}  \n\n            const findClient= await ClientServ.find(\n                {query: stuff})\n\n         await setFacilities(findClient.data)\n                }\n                else {\n                    if (user.stacker){\n                        const findClient= await ClientServ.find(\n                            {query: {\n                                $limit:100,\n                                $sort: {\n                                    createdAt: -1\n                                }\n                                }})\n            \n                    await setFacilities(findClient.data)\n\n                    }\n                }\n            }\n            \n\n    useEffect(() => {\n               \n                if (user){\n                    handleCalendarClose()\n                }else{\n                    /* const localUser= localStorage.getItem(\"user\")\n                    const user1=JSON.parse(localUser)\n                    console.log(localUser)\n                    console.log(user1)\n                    fetchUser(user1)\n                    console.log(user)\n                    getFacilities(user) */\n                }\n                ClientServ.on('created', (obj)=>handleCalendarClose())\n                ClientServ.on('updated', (obj)=>handleCalendarClose())\n                ClientServ.on('patched', (obj)=>handleCalendarClose())\n                ClientServ.on('removed', (obj)=>handleCalendarClose())\n                const newClient={\n                    selectedClient:{},\n                    show :'create'\n                    }\n                 setState((prevstate)=>({...prevstate, ClientModule:newClient}))\n                return () => {\n                \n                }\n            },[])\nconst handleCalendarClose = async ()=>{\n    let query= {\n        start_time:{\n            $gt:subDays(startDate,1),\n            $lt:addDays(startDate,1)\n        },\n        facility:user.currentEmployee.facilityDetail._id,\n       \n        $limit:100,\n        $sort: {\n            createdAt: -1\n        }\n        }\n        if (state.employeeLocation.locationType!==\"Front Desk\"){\n            query.locationId=state.employeeLocation.locationId}  \n\n    const findClient= await ClientServ.find(\n        {query:query})\n\n        await setFacilities(findClient.data)\n}\n\nconst handleDate=async (date)=>{\n    setStartDate(date)\n    \n}\n\n    useEffect(() => {\n        if (!!startDate){\n        \n            handleCalendarClose()\n        }else{\n            getFacilities()\n        }\n        \n        return () => {\n            \n        }\n    }, [startDate])\n    //todo: pagination and vertical scroll bar\n\n    return(\n        <>\n           {user?( <>  \n                <div className=\"level\">\n                    <div className=\"level-left\">\n                        <div className=\"level-item\">\n                            <div className=\"field\">\n                                <p className=\"control has-icons-left  \">\n                                    <DebounceInput className=\"input is-small \" \n                                        type=\"text\" placeholder=\"Search Appointments\"\n                                        minLength={3}\n                                        debounceTimeout={400}\n                                        onChange={(e)=>handleSearch(e.target.value)} />\n                                    <span className=\"icon is-small is-left\">\n                                        <i className=\"fas fa-search\"></i>\n                                    </span>\n                                </p>\n                            </div>\n                        </div>\n                   \n                    <div className=\"level-item\">\n                        <DatePicker \n                            selected={startDate} \n                            onChange={date => handleDate(date)} \n                            dateFormat=\"dd/MM/yyyy\"\n                            placeholderText=\"Filter By Date\"\n                            isClearable\n                            />\n                        {/* <input name=\"filter_time\"  ref={register ({ required: true })}  type=\"datetime-local\" /> */}\n                    </div>\n                    </div>\n                    <div className=\"level-item\"> <span className=\"is-size-6 has-text-weight-medium\">Appointments </span></div>\n                    <div className=\"level-right\">\n                        <div className=\"level-item\"> \n                            <div className=\"level-item\"><div className=\"button is-success is-small\" onClick={handleCreateNew}>New</div></div>\n                        </div>\n                    </div>\n\n                </div>\n                <div className=\"table-container pullup \">\n                                <table className=\"table is-striped is-narrow is-hoverable is-fullwidth is-scrollable \">\n                                    <thead>\n                                        <tr>\n                                        <th><abbr title=\"Serial No\">S/No</abbr></th>\n                                        <th><abbr title=\"Time\">Date/Time</abbr></th>\n                                        <th>First Name</th>\n                                       <th><abbr title=\"Last Name\">Last Name</abbr></th>\n                                       <th><abbr title=\"Class\">Classification</abbr></th>\n                                        <th><abbr title=\"Location\">Location</abbr></th> \n                                        {/* <th><abbr title=\"Phone\">Phone</abbr></th>\n                                         */}\n                                        <th><abbr title=\"Type\">Type</abbr></th>\n                                        <th><abbr title=\"Status\">Status</abbr></th>\n                                        <th><abbr title=\"Reason\">Reason</abbr></th>\n                                        <th><abbr title=\"Practitioner\">Practitioner</abbr></th>\n                                        {/* <th><abbr title=\"Actions\">Actions</abbr></th> */}\n                                        </tr>\n                                    </thead>\n                                    <tfoot>                                      \n                                    </tfoot>\n                                    <tbody>\n                                        {facilities.map((Client, i)=>(\n\n                                            <tr key={Client._id} onClick={()=>handleRow(Client)}  className={Client._id===(selectedAppointment?._id||null)?\"is-selected\":\"\"}>\n                                            <th>{i+1}</th>\n                                            <td><strong>{format(new Date(Client.start_time),\"dd-MM-yy HH:mm:ss\")}</strong></td>\n                                            <th>{Client.firstname}</th>\n                                            {/* <td>{Client.middlename}</td> */}\n                                           < td>{Client.lastname}</td>\n                                          {/*  < td>{formatDistanceToNowStrict(new Date(Client.dob))}</td> */}\n                                           {/*  <td>{Client.gender}</td> */}\n                                            {/*  <td>{Client.phone}</td> */}\n                                            <td>{Client.appointmentClass}</td>\n                                            <td>{Client.location_name} {Client.location_type}</td> \n                                            <td>{Client.appointment_type}</td>\n                                            <td>{Client.appointment_status}</td>\n                                            <td>{Client.appointment_reason}</td>\n                                            <td>{Client.practitioner_name}</td>\n                                            {/* <td><span   className=\"showAction\"  >...</span></td> */}\n                                           \n                                            </tr>\n\n                                        ))}\n                                    </tbody>\n                                    </table>\n                                    \n                </div>              \n            </>):<div>loading</div>}\n            </>\n              \n    )\n    }\n\nexport function ClientDetail(){\n    //const { register, handleSubmit, watch, setValue } = useForm(); //errors,\n     // eslint-disable-next-line\n    const history =useHistory()\n    let { path, url } = useRouteMatch();\n    const [error, setError] =useState(false) //, \n    //const [success, setSuccess] =useState(false)\n     // eslint-disable-next-line\n    const [message, setMessage] = useState(\"\") //,\n    //const ClientServ=client.service('/Client')\n    //const history = useHistory()\n    //const {user,setUser} = useContext(UserContext)\n    const {state,setState} = useContext(ObjectContext)\n    const [selectedClient,setSelectedClient]=useState()\n    const [selectedAppointment,setSelectedAppointment]=useState()\n\n   \n\n   const Client =state.AppointmentModule.selectedAppointment \n    //const client=Client\n    const handleEdit= async()=>{\n        const    newClientModule={\n            selectedAppointment:Client,\n            show :'modify'\n        }\n       await setState((prevstate)=>({...prevstate, AppointmentModule:newClientModule}))\n       //console.log(state)\n       \n    }\n    const handleAttend=async()=>{\n        \n        const patient = await client.service('client').get(Client.clientId)\n        await setSelectedClient(patient)\n        const    newClientModule={\n            selectedClient:patient, \n            show :'detail'\n        }\n       await setState((prevstate)=>({...prevstate, ClientModule:newClientModule}))\n       //modify appointment\n        history.push('/app/clinic/encounter')\n    }\n \n    return (\n        <>\n        <div className=\"card \">\n            <div className=\"card-header\">\n                <p className=\"card-header-title\">\n                    Client Details\n                </p>\n            </div>\n            <div className=\"card-content vscrollable\">\n           \n            <div className=\"field is-horizontal\">\n                <div className=\"field-body\">\n                {Client.firstname &&  <div className=\"field\">\n                        <p className=\"control has-icons-left has-icons-right\">\n                            <label className=\"label is-size-7 my-0 \"   name=\"firstname\" type=\"text\">First Name </label><label className=\"is-size-7 my-0 \">{Client.firstname }</label>\n                            <span className=\"icon is-small is-left\">\n                                <i className=\"nop-hospital\"></i>\n                            </span>                    \n                        </p>\n                    </div>}\n\n\n                    {Client.middlename &&  <div className=\"field\">\n                        <p className=\"control has-icons-left has-icons-right\">\n                        <label className=\"label is-size-7 my-0\"   name=\"middlename\" type=\"text\"> Middle Name </label><label className=\"is-size-7 my-0\">{Client.middlename }</label>\n                        <span className=\"icon is-small is-left\">\n                            <i className=\"nop-map-signs\"></i>\n                        </span>\n                        \n                        </p>\n                    </div>}\n             {Client.lastname &&\n                <div className=\"field\">\n                    <p className=\"control has-icons-left\">\n                        <label className=\"label is-size-7 my-0\"  name=\"lastname\" type=\"text\">Last Name</label><label className=\"is-size-7 my-0\">{Client.lastname }</label>\n                        <span className=\"icon is-small is-left\">\n                        <i className=\" nop-user-md \"></i>\n                        </span>\n                    </p>\n                </div>}\n                </div>  \n                </div>\n                <div className=\"field is-horizontal\">\n                <div className=\"field-body\">\n                {Client.dob &&<div className=\"field\">\n                    <p className=\"control has-icons-left\">\n                    \n                        <label className=\"label is-size-7 my-0\"  name=\"dob\" type=\"text\">Date of Birth </label><label className=\"is-size-7 my-0\">{ new Date(Client.dob).toLocaleDateString('en-GB')}</label>\n                        <span className=\"icon is-small is-left\">\n                        <i className=\"nop-envelope\"></i>\n                        </span>\n                    </p>\n                </div> }\n                {Client.gender &&<div className=\"field\">\n                    <p className=\"control has-icons-left\">\n                    \n                        <label className=\"label is-size-7 my-0\"  name=\"gender\" type=\"text\">Gender </label><label className=\"is-size-7 my-0\">{Client.gender }</label>\n                        <span className=\"icon is-small is-left\">\n                        <i className=\"nop-envelope\"></i>\n                        </span>\n                    </p>\n                </div> }\n                {Client.maritalstatus && <div className=\"field\">\n                    <p className=\"control has-icons-left\">\n                    \n                        <label className=\"label is-size-7 my-0\"  name=\"maritalstatus\" type=\"text\">Marital Status </label><label className=\"is-size-7 my-0\">{Client.maritalstatus }</label>\n                        <span className=\"icon is-small is-left\">\n                        <i className=\"nop-envelope\"></i>\n                        </span>\n                    </p>\n                </div> }\n                {Client.mrn && <div className=\"field\">\n                    <p className=\"control has-icons-left\">\n                    \n                        <label className=\"label is-size-7 my-0\"  name=\"mrn\" type=\"text\">Medical Records Number  </label><label className=\"is-size-7 my-0\">{Client.mrn }</label>\n                        <span className=\"icon is-small is-left\">\n                        <i className=\"nop-envelope\"></i>\n                        </span>\n                    </p>\n                </div> }\n                </div>\n                </div>\n                <div className=\"field is-horizontal\">\n                    <div className=\"field-body\">\n                    {Client.religion && <div className=\"field\">\n                        <p className=\"control has-icons-left\">\n                        \n                            <label className=\"label is-size-7 my-0\"  name=\"religion\" type=\"text\">Religion  </label><label className=\"is-size-7 my-0\">{Client.religion }</label>\n                            <span className=\"icon is-small is-left\">\n                            <i className=\"nop-envelope\"></i>\n                            </span>\n                        </p>\n                    </div> }\n                    {Client.profession &&  <div className=\"field\">\n                        <p className=\"control has-icons-left\">\n                        \n                            <label className=\"label is-size-7 my-0\"  name=\"profession\" type=\"text\">Profession  </label><label className=\"is-size-7 my-0\">{Client.profession }</label>\n                            <span className=\"icon is-small is-left\">\n                            <i className=\"nop-envelope\"></i>\n                            </span>\n                        </p>\n                    </div> }\n                    {Client.phone &&<div className=\"field\">\n                        <p className=\"control has-icons-left\">\n                            <label className=\"label is-size-7 my-0\"  name=\"phone\" type=\"text\"> Phone No</label><label className=\"is-size-7 my-0\">{Client.phone }</label>\n                            <span className=\"icon is-small is-left\">\n                            <i className=\"nop-phone-alt\"></i>\n                            </span>\n                        </p>\n                    </div>}\n\n                    {Client.email && <div className=\"field\">\n                        <p className=\"control has-icons-left\">\n                        \n                            <label className=\"label is-size-7 my-0\"  name=\"email\" type=\"email\">Email  </label><label className=\"is-size-7 my-0\">{Client.email }</label>\n                            <span className=\"icon is-small is-left\">\n                            <i className=\"nop-envelope\"></i>\n                            </span>\n                        </p>\n                    </div> }\n                    </div>\n                </div>\n\n                {Client.address &&<div className=\"field\">\n                <p className=\"control has-icons-left\">\n\n                    <label className=\"label is-size-7 my-0\"  name=\"address\" type=\"text\">Residential Address  </label><label className=\"is-size-7 my-0\">{Client.address }</label>\n                    <span className=\"icon is-small is-left\">\n                    <i className=\"nop-envelope\"></i>\n                    </span>\n                </p>\n                </div>} \n                <div className=\"field is-horizontal\">\n                    <div className=\"field-body\">\n                        {Client.city && <div className=\"field\">\n                            <p className=\"control has-icons-left\">\n                            \n                                <label className=\"label is-size-7 my-0\"  name=\"city\" type=\"text\">Town/City  </label><label className=\"is-size-7 my-0\">{Client.city }</label>\n                                <span className=\"icon is-small is-left\">\n                                <i className=\"nop-envelope\"></i>\n                                </span>\n                            </p>\n                        </div> }\n                        {Client.lga && <div className=\"field\">\n                            <p className=\"control has-icons-left\">\n                            \n                                <label className=\"label is-size-7 my-0\"  name=\"lga\" type=\"text\">Local Govt Area  </label><label className=\"is-size-7 my-0\">{Client.lga }</label>\n                                <span className=\"icon is-small is-left\">\n                                <i className=\"nop-envelope\"></i>\n                                </span>\n                            </p>\n                        </div> }\n                        {Client.state && <div className=\"field\">\n                            <p className=\"control has-icons-left\">\n                                <label className=\"label is-size-7 my-0\"  name=\"state\" type=\"text\">State  </label><label className=\"is-size-7 my-0\">{Client.state }</label>\n                                <span className=\"icon is-small is-left\">\n                                <i className=\"nop-envelope\"></i>\n                                </span>\n                            </p>\n                        </div> }\n                        {Client.country &&<div className=\"field\">\n                        <p className=\"control has-icons-left\">\n                        \n                            <label className=\"label is-size-7 my-0\"  name=\"country\" type=\"text\">Country  </label><label className=\"is-size-7 my-0\">{Client.country }</label>\n                            <span className=\"icon is-small is-left\">\n                            <i className=\"nop-envelope\"></i>\n                            </span>\n                        </p>\n                    </div>}\n                    </div>\n                </div> \n                <div className=\"field is-horizontal\">\n                <div className=\"field-body\">\n                     {Client.bloodgroup &&  <div className=\"field\">\n                        <p className=\"control has-icons-left\">\n                        \n                            <label className=\"label is-size-7 my-0\"  name=\"bloodgroup\" type=\"text\">Blood Group </label><label className=\"is-size-7 my-0\">{Client.bloodgroup }</label>\n                            <span className=\"icon is-small is-left\">\n                            <i className=\"nop-envelope\"></i>\n                            </span>\n                        </p>\n                    </div>}\n                   \n                    {Client.genotype && <div className=\"field\">\n                        <p className=\"control has-icons-left\">\n                        \n                            <label className=\"label is-size-7 my-0\"  name=\"genotype\" type=\"text\">Genotype  </label><label className=\"is-size-7 my-0\">{Client.genotype }</label>\n                            <span className=\"icon is-small is-left\">\n                            <i className=\"nop-envelope\"></i>\n                            </span>\n                        </p>\n                    </div> }\n                    {Client.disabilities && <div className=\"field\">\n                        <p className=\"control has-icons-left\">\n                        \n                            <label className=\"label is-size-7 my-0\"  name=\"disabilities\" type=\"text\">Disabilities  </label><label className=\"is-size-7 my-0\">{Client.disabilities }</label>\n                            <span className=\"icon is-small is-left\">\n                            <i className=\"nop-envelope\"></i>\n                            </span>\n                        </p>\n                    </div> }\n                </div> \n                </div>  \n\n                <div className=\"field is-horizontal\">\n                <div className=\"field-body\">\n\n                {Client.allergies && <div className=\"field\">\n                    <p className=\"control has-icons-left\">\n                    \n                        <label className=\"label is-size-7 my-0\"  name=\"allergies\" type=\"text\">Allergies  </label><label className=\"is-size-7 my-0\">{Client.allergies }</label>\n                        <span className=\"icon is-small is-left\">\n                        <i className=\"nop-envelope\"></i>\n                        </span>\n                    </p>\n                </div> }\n                {Client.comorbidities && <div className=\"field\">\n                    <p className=\"control has-icons-left\">\n                    \n                        <label className=\"label is-size-7 my-0\"  name=\"comorbidities\" type=\"text\">Co-mobidities  </label><label className=\"is-size-7 my-0\">{Client.comorbidities }</label>\n                        <span className=\"icon is-small is-left\">\n                        <i className=\"nop-envelope\"></i>\n                        </span>\n                    </p>\n                </div> }\n                </div>\n                </div>\n               {Client.clientTags && <div className=\"field\">\n                <p className=\"control has-icons-left\">\n\n                    <label className=\"label is-size-7 my-0\"  name=\"clientTags\" type=\"text\">Tags </label><label className=\"is-size-7 my-0\">{Client.clientTags }</label>\n                    <span className=\"icon is-small is-left\">\n                    <i className=\"nop-envelope\"></i>\n                    </span>\n                </p>\n                </div> }\n                {Client.specificDetails && <div className=\"field\">\n                <p className=\"control has-icons-left\">\n                    <label className=\"label is-size-7 my-0\"  name=\"specificDetails\" type=\"text\">Specific Details about Client </label><label className=\"is-size-7 my-0\">{Client.specificDetails }</label>\n                    <span className=\"icon is-small is-left\">\n                    <i className=\"nop-envelope\"></i>\n                    </span>\n                </p>\n                </div> }\n                <div className=\"field is-horizontal\">\n                <div className=\"field-body\">\n                {Client.nok_name && <div className=\"field\">\n                    <p className=\"control has-icons-left\">\n                        <label className=\"label is-size-7 my-0\"  name=\"nok_name\" type=\"text\">Next of Kin Full Name</label><label className=\"is-size-7 my-0\">{Client.nok_name }</label>\n                        <span className=\"icon is-small is-left\">\n                        <i className=\"nop-clinic-medical\"></i>\n                        </span>\n                    </p>\n                </div>}\n                {Client.nok_phoneno && <div className=\"field\">\n                    <p className=\"control has-icons-left\">\n                        <label className=\"label is-size-7 my-0\"  name=\"nok_phoneno\" type=\"text\">Next of Kin Phone Number</label><label className=\"is-size-7 my-0\">{Client.nok_phoneno }</label>\n                        <span className=\"icon is-small is-left\">\n                        <i className=\"nop-clinic-medical\"></i>\n                        </span>\n                    </p>\n                </div> }\n                {Client.nok_email && <div className=\"field\">\n                    <p className=\"control has-icons-left\">\n                    \n                        <label className=\"label is-size-7 my-0\"  name=\"nok_email\" type=\"email\">Next of Kin Email </label><label className=\"is-size-7 my-0\">{Client.nok_email }</label>\n                        <span className=\"icon is-small is-left\">\n                        <i className=\"nop-envelope\"></i>\n                        </span>\n                    </p>\n                </div>}\n                {Client.nok_relationship && <div className=\"field\">\n                    <p className=\"control has-icons-left\">\n                    \n                        <label className=\"label is-size-7 my-0\"  name=\"nok_relationship\" type=\"text\">Next of Kin Relationship\"  </label><label className=\"is-size-7 my-0\">{Client.nok_relationship }</label>\n                        <span className=\"icon is-small is-left\">\n                        <i className=\"nop-envelope\"></i>\n                        </span>\n                    </p>\n                </div>}\n                </div>\n                </div> \n            <div className=\"field is-grouped  mt-2\">\n                <p className=\"control\">\n                    <button className=\"button is-success is-small\" onClick={handleEdit}>\n                        Edit Appointment Details\n                    </button>\n                </p>\n             \n                <p className=\"control\">\n                    <button className=\"button is-link is-small\" onClick={()=>handleAttend()} >\n                        Attend to Client\n                    </button>\n                </p>\n\n            </div>\n            \n           \n        </div>\n        </div>\n        </>\n    )\n   \n   \n}\n\nexport function ClientModify(){\n    const { register, handleSubmit, setValue,reset, errors } = useForm(); //watch, errors,\n    // eslint-disable-next-line \n    const [error, setError] =useState(false)\n    // eslint-disable-next-line \n    const [success, setSuccess] =useState(false)\n    // eslint-disable-next-line \n    const [message,setMessage] = useState(\"\")\n    // eslint-disable-next-line \n    const ClientServ=client.service('appointments')\n    //const history = useHistory()\n     // eslint-disable-next-line\n    const {user} = useContext(UserContext)\n    const {state,setState} = useContext(ObjectContext)\n    const [selectedClient,setSelectedClient]=useState()\n    const [selectedAppointment,setSelectedAppointment]=useState()\n    const [appointment_status,setAppointment_status]=useState(\"\")\n    const [appointment_type, setAppointment_type]=useState(\"\")\n    const appClass=[ \"On-site\",\"Teleconsultation\"]\n    const [locationId,setLocationId] = useState()\n    const [practionerId,setPractionerId] = useState()\n    const [success1, setSuccess1] =useState(false)\n    const [success2, setSuccess2] =useState(false)\n    const [chosen1, setChosen1]=useState()\n    const [chosen2, setChosen2]=useState()\n\n    const Client =state.AppointmentModule.selectedAppointment\n    //console.log(Client)\n\n    const getSearchfacility1=(obj)=>{\n\n        setLocationId(obj._id)\n        setChosen1(obj)\n        \n         if (!obj){\n             //\"clear stuff\"\n             setLocationId()\n             setChosen1()\n            \n         }\n     }\n\n    const getSearchfacility2=(obj)=>{\n     \n        \n        setPractionerId(obj._id)\n        setChosen2(obj)\n        \n         if (!obj){\n             //\"clear stuff\"\n             setPractionerId()\n             setChosen2()\n            \n         }\n     }\n\n    useEffect(() => {\n        setValue(\"firstname\", Client.firstname,  {\n            shouldValidate: true,\n            shouldDirty: true\n        })\n        setValue(\"middlename\", Client.middlename,  {\n            shouldValidate: true,\n            shouldDirty: true\n        })\n            setValue(\"lastname\", Client.lastname,  {\n            shouldValidate: true,\n            shouldDirty: true\n        })\n        setValue(\"phone\", Client.phone,  {\n            shouldValidate: true,\n            shouldDirty: true\n        })\n        setValue(\"email\", Client.email,  {\n            shouldValidate: true,\n            shouldDirty: true\n        })\n        setValue(\"dob\", Client.dob,  {\n            shouldValidate: true,\n            shouldDirty: true\n        })\n        setValue(\"gender\", Client.gender,  {\n            shouldValidate: true,\n            shouldDirty: true\n        }) \n            setValue(\"ClientId\", Client.clientId,  {\n            shouldValidate: true,\n            shouldDirty: true\n        }) \n        setValue(\"appointment_reason\", Client.appointment_reason,  {\n            shouldValidate: true,\n            shouldDirty: true\n        })\n        setValue(\"appointment_status\", Client.appointment_status,  {\n            shouldValidate: true,\n            shouldDirty: true\n        })\n            setValue(\"appointment_type\", Client.appointment_type,  {\n            shouldValidate: true,\n            shouldDirty: true\n        })\n        setValue(\"start_time\", format(new Date(Client.start_time),\"yyyy-MM-dd'T'HH:mm:ss\"),  {\n            shouldValidate: true,\n            shouldDirty: true\n        })\n        setValue(\"appointmentClass\", Client.appointmentClass,  {\n            shouldValidate: true,\n            shouldDirty: true\n        })\n        \n       \n        return () => {\n            \n        }\n    })\n    const handleChangeType=async (e)=>{\n       // await setAppointment_type(e.target.value)\n        setValue(\"appointment_type\", e.target.value,  {\n            shouldValidate: true,\n            shouldDirty: true\n        })\n        \n    }\n\n    const handleChangeStatus=async (e)=>{\n       // await setAppointment_status(e.target.value)\n        setValue(\"appointment_status\", e.target.value,  {\n            shouldValidate: true,\n            shouldDirty: true\n        })\n    }\n\n   const handleCancel=async()=>{\n    const    newClientModule={\n        selectedAppointment:{},\n        show :'create'\n      }\n         await setState((prevstate)=>({...prevstate, AppointmentModule:newClientModule}))\n            //console.log(state)\n           }\n\n\n    const changeState =()=>{\n        const    newClientModule={\n            selectedAppointment:{},\n            show :'create'\n        }\n        setState((prevstate)=>({...prevstate, AppointmentModule:newClientModule}))\n\n        }\n    const handleDelete=async()=>{\n        let conf=window.confirm(\"Are you sure you want to delete this data?\")\n        \n        const dleteId=Client._id\n        if (conf){\n             \n        ClientServ.remove(dleteId)\n        .then((res)=>{\n                //console.log(JSON.stringify(res))\n                reset();\n               /*  setMessage(\"Deleted Client successfully\")\n                setSuccess(true)\n                changeState()\n               setTimeout(() => {\n                setSuccess(false)\n                }, 200); */\n                toast({\n                    message: 'Client deleted succesfully',\n                    type: 'is-success',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  })\n                changeState()\n            })\n            .catch((err)=>{\n               // setMessage(\"Error deleting Client, probable network issues \"+ err )\n               // setError(true)\n                toast({\n                    message: \"Error deleting Client, probable network issues or \"+ err,\n                    type: 'is-danger',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  })\n            })\n        }\n    }\n        \n\n    const onSubmit = (data,e) =>{\n        e.preventDefault();\n        \n        setSuccess(false)\n       // console.log(data)\n      //  data.facility=Client.facility\n          //console.log(data);\n           data.practitioner_name=chosen2.firstname+\" \"+chosen2.lastname\n            data.practitioner_profession=chosen2.profession\n            data.practitioner_department=chosen2.department\n            data.practitionerId=chosen2._id\n          data.locationId=chosen1._id\n          data.location_name=chosen1.name\n          data.location_type=chosen1.locationType\n          \n           //data.actions\n           if (Client.appointment_status!== data.appointment_status){\n                Client.actions.push({\n                    status:data.appointment_status,\n                    actor:user.currentEmployee._id,\n                })\n           }\n           data.actions=Client.actions\n        ClientServ.patch(Client._id,data)\n        .then((res)=>{\n                //console.log(JSON.stringify(res))\n               // e.target.reset();\n               // setMessage(\"updated Client successfully\")\n                 toast({\n                    message: 'Client updated succesfully',\n                    type: 'is-success',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  })\n                  \n                changeState()\n\n            })\n            .catch((err)=>{\n                //setMessage(\"Error creating Client, probable network issues \"+ err )\n               // setError(true)\n                toast({\n                    message: \"Error updating Client, probable network issues or \"+ err,\n                    type: 'is-danger',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  })\n            })\n\n      } \n     \n      \n    return (\n        \n        <>\n        <div className=\"card \">\n            <div className=\"card-header\">\n                <p className=\"card-header-title\">\n                    Client Details-Modify\n                </p>\n            </div>\n            <div className=\"card-content vscrollable remPad1\">\n           \n            <form onSubmit={handleSubmit(onSubmit)}>\n       {/* ===================================================== */}\n      {/*  <label className=\"label is-small\">Client:</label> */}\n         \n            <div className=\"field\">\n              <label className=\"label is-size-7\" > {Client.firstname} {Client.lastname}</label>\n            </div>\n            <div className=\"field is-horizontal\">\n            <div className=\"field-body\">\n                <div className=\"field is-expanded\"  /* style={ !user.stacker?{display:\"none\"}:{}} */ >\n                    <LocationSearch id={Client.locationId} getSearchfacility={getSearchfacility1} clear={success1} /> \n                    <p className=\"control has-icons-left \" style={{display:\"none\"}}>\n                        <input className=\"input is-small\"  /* ref={register ({ required: true }) } */  /* add array no */  value={locationId} name=\"locationId\" type=\"text\" onChange={e=>setLocationId(e.target.value)} placeholder=\"Product Id\" />\n                        <span className=\"icon is-small is-left\">\n                        <i className=\"fas  fa-map-marker-alt\"></i>\n                        </span>\n                    </p>\n                </div>\n            </div>\n        </div>\n        <div className=\"field is-horizontal\">\n            <div className=\"field-body\">\n                <div className=\"field is-expanded\"  /* style={ !user.stacker?{display:\"none\"}:{}} */ >\n                    <EmployeeSearch id={Client.practitionerId}  getSearchfacility={getSearchfacility2} clear={success2} /> \n                    <p className=\"control has-icons-left \" style={{display:\"none\"}}>\n                        <input className=\"input is-small\"  /* ref={register ({ required: true }) } */  /* add array no */  value={practionerId} name=\"practionerId\" type=\"text\" onChange={e=>setPractionerId(e.target.value)} placeholder=\"Product Id\" />\n                        <span className=\"icon is-small is-left\">\n                        <i className=\"fas  fa-map-marker-alt\"></i>\n                        </span>\n                    </p>\n                </div>\n             \n            </div>\n        </div>\n            <div className=\"field is-horizontal\">\n                       \n                       <div className=\"field ml-3 \">\n                       {/* <label className= \"mr-2 \"> <b>Modules:</b></label> */}\n                           {\n                               appClass.map((c,i) => \n                                   <label  className=\" is-small\" key={c}>\n                                       <input type=\"radio\" value={c} name=\"appointmentClass\" ref={register} />{c + \" \"}\n                                   </label>\n                               )\n                           }\n                       </div>  \n                       </div>\n        <div className=\"field\">\n            <input name=\"start_time\" ref={register ({ required: true })} type=\"datetime-local\" defaultValue={format(new Date(Client.start_time),\"yyyy-MM-dd'T'HH:mm:ss\")} />\n        </div>\n           \n        <div className=\"field\">    \n                <div className=\"control\">\n                    <div className=\"select is-small\">\n                        <select /* name=\"type\" */ /* value={appointment_type} */  name = \"appointment_type\" ref={register ({ required: true })}  onChange={handleChangeType}>\n                           <option value=\"\">Choose Appointment Type  </option>\n                            <option value=\"New\">New</option>\n                            <option value=\"Followup\">Followup</option>\n                            <option value=\"Readmission with 24hrs\">Readmission with 24hrs</option>\n                            <option value=\"Annual Checkup\">Annual Checkup</option>\n                            <option value=\"Walk in\">Walk-in</option>\n                        </select>\n                    </div>\n                </div>\n            </div>\n        <div className=\"field\">    \n                <div className=\"control\">\n                    <div className=\"select is-small\">\n                        <select name=\"appointment_status\" ref={register ({ required: true })} /* value={appointment_status} */ onChange={handleChangeStatus}>\n                           <option value=\"\">Appointment Status  </option>\n                            <option value=\"Scheduled\">Scheduled</option>\n                            <option value=\"Confirmed\">Confirmed</option>\n                            <option value=\"Checked In\">Checked In</option>\n                            <option value=\"Vitals Taken\">Vitals Taken</option>\n                            <option value=\"With Nurse\">With Nurse</option>\n                            <option value=\"With Doctor\">With Doctor</option>\n                            <option value=\"No Show\">No Show</option>\n                            <option value=\"Cancelled\">Cancelled</option>\n                            <option value=\"Billed\">Billed</option>\n                        </select>\n                    </div>\n                </div>\n        </div>\n        <div className=\"field\">\n            <p className=\"control has-icons-left has-icons-right\">\n                <input className=\"input is-small\" ref={register()}  name=\"appointment_reason\" type=\"text\" placeholder=\"Reason For Appointment\" />\n                <span className=\"icon is-small is-left\">\n                    <i className=\"fas fa-hospital\"></i>\n                </span>                    \n            </p>\n        </div>\n        <div className=\"field \" style={{display:\"none\"}} >\n            <p className=\"control has-icons-left has-icons-right\">\n                <input className=\"input is-small\" ref={register()}  name=\"billingservice\" type=\"text\" placeholder=\"Billing service\" />\n                <span className=\"icon is-small is-left\">\n                    <i className=\"fas fa-hospital\"></i>\n                </span>                    \n            </p>\n        </div>\n        {/* ======================================= */}\n\n           \n            </form>\n            \n            <div className=\"field  is-grouped mt-2\" >\n                <p className=\"control\">\n                    <button type=\"submit\" className=\"button is-success is-small\" onClick={handleSubmit(onSubmit)}>\n                        Save\n                    </button>\n                </p>\n                <p className=\"control\">\n                    <button className=\"button is-warning is-small\" onClick={handleCancel}>\n                        Cancel\n                    </button>\n                </p>\n               <p className=\"control\">\n                    <button className=\"button is-danger is-small\" onClick={()=>handleDelete()} type=\"delete\">\n                       Delete\n                    </button>\n                </p> \n            </div>\n        </div>\n        </div>\n        </>\n    )\n   \n   \n                \n}   \n\nexport  function ClientSearch({getSearchfacility,clear}) {\n    \n    const ClientServ=client.service('client')\n    const [facilities,setFacilities]=useState([])\n     // eslint-disable-next-line\n     const [searchError, setSearchError] =useState(false)\n     // eslint-disable-next-line\n    const [showPanel, setShowPanel] =useState(false)\n     // eslint-disable-next-line\n   const [searchMessage, setSearchMessage] = useState(\"\") \n   // eslint-disable-next-line \n   const [simpa,setSimpa]=useState(\"\")\n   // eslint-disable-next-line \n   const [chosen,setChosen]=useState(false)\n   // eslint-disable-next-line \n   const [count,setCount]=useState(0)\n   const inputEl=useRef(null)\n   const [val,setVal]=useState(\"\")\n   const {user} = useContext(UserContext) \n   const {state}=useContext(ObjectContext)\n    const [productModal,setProductModal]=useState(false)\n\n   const handleRow= async(obj)=>{\n        await setChosen(true)\n        //alert(\"something is chaning\")\n       getSearchfacility(obj)\n       \n       await setSimpa(obj.firstname + \" \"+ obj.middlename+ \" \"+obj.lastname + \" \"+obj.gender+\" \"+obj.phone )\n       \n        // setSelectedFacility(obj)\n        setShowPanel(false)\n        await setCount(2)\n        /* const    newfacilityModule={\n            selectedFacility:facility,\n            show :'detail'\n        }\n   await setState((prevstate)=>({...prevstate, facilityModule:newfacilityModule})) */\n   //console.log(state)\n    }\n    const handleBlur=async(e)=>{\n         if (count===2){\n             console.log(\"stuff was chosen\")\n         }\n       \n       /*  console.log(\"blur\")\n         setShowPanel(false)\n        console.log(JSON.stringify(simpa))\n        if (simpa===\"\"){\n            console.log(facilities.length)\n            setSimpa(\"abc\")\n            setSimpa(\"\")\n            setFacilities([])\n            inputEl.current.setValue=\"\"\n        }\n        console.log(facilities.length)\n        console.log(inputEl.current) */\n    }\n    const handleSearch=async(val)=>{\n        setVal(val)\n        if (val===\"\"){\n            setShowPanel(false)\n            getSearchfacility(false)\n            return\n        }\n        const field='name' //field variable\n\n       \n        if (val.length>=3 ){\n            ClientServ.find({query: {\n                $or:[\n                    { firstname: {\n                        $regex:val,\n                        $options:'i' \n                    }},\n                    { lastname: {\n                        $regex:val,\n                        $options:'i' \n                    }},\n                    { middlename: {\n                        $regex:val,\n                        $options:'i' \n                    }},\n                    { phone: {\n                        $regex:val,\n                        $options:'i' \n                    }},\n                    { clientTags: {\n                        $regex:val,\n                        $options:'i' \n                    }},\n                    { mrn: {\n                        $regex:val,\n                        $options:'i' \n                    }},\n                    { specificDetails: {\n                        $regex:val,\n                        $options:'i' \n                    }},\n                ],\n              \n                 facility: user.currentEmployee.facilityDetail._id,\n                 //storeId: state.StoreModule.selectedStore._id,\n                 $limit:10,\n                 $sort: {\n                     createdAt: -1\n                   }\n                     }}).then((res)=>{\n              console.log(\"product  fetched successfully\") \n              console.log(res.data) \n                setFacilities(res.data)\n                 setSearchMessage(\" product  fetched successfully\")\n                 setShowPanel(true)\n             })\n             .catch((err)=>{\n                toast({\n                    message: 'Error creating ProductEntry ' + err,\n                    type: 'is-danger',\n                    dismissible: true,\n                    pauseOnHover: true,\n                  })\n             })\n         }\n        else{\n            console.log(\"less than 3 \")\n            console.log(val)\n            setShowPanel(false)\n            await setFacilities([])\n            console.log(facilities)\n        }\n    }\n\n    const handleAddproduct =()=>{\n        setProductModal(true) \n    }\n    const handlecloseModal =()=>{\n        setProductModal(false)\n        handleSearch(val)\n    }\n    useEffect(() => {\n       if (clear){\n           console.log(\"success has changed\",clear)\n           setSimpa(\"\")\n       }\n        return () => {\n            \n        }\n    }, [clear] )\n    return (\n        <div>\n            <div className=\"field\">\n                <div className=\"control has-icons-left  \">\n                    <div className={`dropdown ${showPanel?\"is-active\":\"\"}`} style={{width:\"100%\"}}>\n                        <div className=\"dropdown-trigger\" style={{width:\"100%\"}}>\n                            <DebounceInput className=\"input is-small  is-expanded mb-0\" \n                                type=\"text\" placeholder=\"Search for Client\"\n                                value={simpa}\n                                minLength={3}\n                                debounceTimeout={400}\n                                onBlur={(e)=>handleBlur(e)}\n                                onChange={(e)=>handleSearch(e.target.value)}\n                                inputRef={inputEl}\n                                  />\n                            <span className=\"icon is-small is-left\">\n                                <i className=\"fas fa-search\"></i>\n                            </span>\n                        </div>\n                        <div className=\"dropdown-menu expanded\" style={{width:\"100%\"}}>\n                            <div className=\"dropdown-content\">\n                          { facilities.length>0?\"\":<div className=\"dropdown-item\" /* onClick={handleAddproduct} */> <span> {val} is not yet your client</span> </div>}\n\n                              {facilities.map((facility, i)=>(\n                                    \n                                    <div className=\"dropdown-item\" key={facility._id} onClick={()=>handleRow(facility)}>\n                                        \n                                        <div><span>{facility.firstname}</span>\n                                        <span className=\"padleft\">{facility.middlename}</span>\n                                        <span className=\"padleft\">{facility.lastname}</span>\n                                        <span className=\"padleft\"> {formatDistanceToNowStrict(new Date(facility.dob))}</span>\n                                        <span className=\"padleft\">{facility.gender}</span>\n                                        <span className=\"padleft\">{facility.profession}</span>\n                                        <span className=\"padleft\">{facility.phone}</span>\n                                        <span className=\"padleft\">{facility.email}</span>\n                                        </div>\n                                       \n                                    </div>\n                                    \n                                    ))}\n                                    \n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div className={`modal ${productModal?\"is-active\":\"\"}` }>\n                                    <div className=\"modal-background\"></div>\n                                    <div className=\"modal-card\">\n                                        <header className=\"modal-card-head\">\n                                        <p className=\"modal-card-title\">Choose Store</p>\n                                        <button className=\"delete\" aria-label=\"close\"  onClick={handlecloseModal}></button>\n                                        </header>\n                                        <section className=\"modal-card-body\">\n                                        {/* <StoreList standalone=\"true\" /> */}\n                                        {/* <ProductCreate /> */}\n                                        </section>\n                                        {/* <footer className=\"modal-card-foot\">\n                                        <button className=\"button is-success\">Save changes</button>\n                                        <button className=\"button\">Cancel</button>\n                                        </footer> */}\n                                    </div>\n                                </div>       \n        </div>\n    )\n}"]},"metadata":{},"sourceType":"module"}