[{"C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\Finance\\Payment.js":"1","C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\Finance\\PaymentCreate.js":"2","C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\index.js":"3","C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\context.js":"4","C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\feathers.js":"5","C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\Home.js":"6","C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\Login.js":"7","C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\SignUp.js":"8","C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\InventoryModule.js":"9","C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\ClinicModule.js":"10","C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\facility\\CareTeam.js":"11","C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\facility\\Workspace.js":"12","C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\facility\\Department.js":"13","C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\facility\\FacilityHome.js":"14","C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\inventory\\InventorySetup.js":"15","C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\facility\\Employee.js":"16","C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\inventory\\InventoryStore.js":"17","C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\Finance\\FinanceStore.js":"18","C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\Finance\\ProductEntry.js":"19","C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\Finance\\ProductExit.js":"20","C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\Clinic\\ClinicStore.js":"21","C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\Clinic\\Clinic.js":"22","C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\Finance\\ClientBill.js":"23","C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\inventory\\BillDispenseCreate.js":"24","C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\EncounterMgt\\EncounterMain.js":"25","C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\helpers\\FacilityPopup.js":"26","C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\inventory\\BillPrescriptionCreate.js":"27","C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\inventory\\Dispensary.js":"28","C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\inventory\\ProductExit.js":"29","C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\App.js":"30","C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\LandingPage.js":"31","C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\Clinic\\ClinicReport.js":"32","C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\facility\\DeptUnits.js":"33","C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\ClientMgt\\Patient.js":"34","C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\inventory\\ProductEntry.js":"35","C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\Finance\\FinanceHome.js":"36","C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\Finance\\BillPrescription.js":"37","C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\EncounterMgt\\DocumentClass.js":"38","C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\EncounterMgt\\Prescription.js":"39","C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\inventory\\DispenseExit.js":"40","C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\FacilityModule.js":"41","C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\facility\\Facility.js":"42","C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\facility\\Location.js":"43","C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\Finance\\FinanceSetup.js":"44","C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\Finance\\Products.js":"45","C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\Clinic\\ClinicHome.js":"46","C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\Clinic\\Appointments.js":"47","C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\FinanceModule.js":"48","C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\Finance\\Store.js":"49","C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\inventory\\Store.js":"50"},{"size":22006,"mtime":1614691966786,"results":"51","hashOfConfig":"52"},{"size":45233,"mtime":1614692129934,"results":"53","hashOfConfig":"52"},{"size":500,"mtime":1606167681327,"results":"54","hashOfConfig":"52"},{"size":958,"mtime":1611095384833,"results":"55","hashOfConfig":"52"},{"size":640,"mtime":1614767900385,"results":"56","hashOfConfig":"52"},{"size":8388,"mtime":1614165644970,"results":"57","hashOfConfig":"52"},{"size":3070,"mtime":1611089651447,"results":"58","hashOfConfig":"52"},{"size":9542,"mtime":1610481859369,"results":"59","hashOfConfig":"52"},{"size":8649,"mtime":1614767651339,"results":"60","hashOfConfig":"52"},{"size":7992,"mtime":1614759140359,"results":"61","hashOfConfig":"52"},{"size":144,"mtime":1610340849334,"results":"62","hashOfConfig":"52"},{"size":146,"mtime":1610340786924,"results":"63","hashOfConfig":"52"},{"size":148,"mtime":1610340754492,"results":"64","hashOfConfig":"52"},{"size":597,"mtime":1612953434041,"results":"65","hashOfConfig":"52"},{"size":9318,"mtime":1610307391617,"results":"66","hashOfConfig":"52"},{"size":40586,"mtime":1611144169606,"results":"67","hashOfConfig":"52"},{"size":38911,"mtime":1614766106761,"results":"68","hashOfConfig":"52"},{"size":38844,"mtime":1614165763658,"results":"69","hashOfConfig":"52"},{"size":52276,"mtime":1614163882289,"results":"70","hashOfConfig":"52"},{"size":57661,"mtime":1614163882292,"results":"71","hashOfConfig":"52"},{"size":38856,"mtime":1612264335426,"results":"72","hashOfConfig":"52"},{"size":40695,"mtime":1614055518190,"results":"73","hashOfConfig":"52"},{"size":11238,"mtime":1614245676414,"results":"74","hashOfConfig":"52"},{"size":26832,"mtime":1614161732800,"results":"75","hashOfConfig":"52"},{"size":19335,"mtime":1614084118420,"results":"76","hashOfConfig":"52"},{"size":15112,"mtime":1613312865451,"results":"77","hashOfConfig":"52"},{"size":38779,"mtime":1614613902735,"results":"78","hashOfConfig":"52"},{"size":22607,"mtime":1614765250298,"results":"79","hashOfConfig":"52"},{"size":57958,"mtime":1614692889255,"results":"80","hashOfConfig":"52"},{"size":3846,"mtime":1614260288819,"results":"81","hashOfConfig":"52"},{"size":602,"mtime":1610166221216,"results":"82","hashOfConfig":"52"},{"size":8924,"mtime":1612264316226,"results":"83","hashOfConfig":"52"},{"size":153,"mtime":1610341642391,"results":"84","hashOfConfig":"52"},{"size":76419,"mtime":1614765110959,"results":"85","hashOfConfig":"52"},{"size":52276,"mtime":1611792286916,"results":"86","hashOfConfig":"52"},{"size":1292,"mtime":1614692318437,"results":"87","hashOfConfig":"52"},{"size":19896,"mtime":1614245775231,"results":"88","hashOfConfig":"52"},{"size":37609,"mtime":1612483185115,"results":"89","hashOfConfig":"52"},{"size":50631,"mtime":1614074820289,"results":"90","hashOfConfig":"52"},{"size":60143,"mtime":1614693038875,"results":"91","hashOfConfig":"52"},{"size":6746,"mtime":1614766424318,"results":"92","hashOfConfig":"52"},{"size":29287,"mtime":1610499792755,"results":"93","hashOfConfig":"52"},{"size":40707,"mtime":1613142325364,"results":"94","hashOfConfig":"52"},{"size":9318,"mtime":1614165749514,"results":"95","hashOfConfig":"52"},{"size":40739,"mtime":1614163882309,"results":"96","hashOfConfig":"52"},{"size":1452,"mtime":1612953370729,"results":"97","hashOfConfig":"52"},{"size":73610,"mtime":1612987406080,"results":"98","hashOfConfig":"52"},{"size":8653,"mtime":1614767844625,"results":"99","hashOfConfig":"52"},{"size":51100,"mtime":1614767771116,"results":"100","hashOfConfig":"52"},{"size":51075,"mtime":1614767616856,"results":"101","hashOfConfig":"52"},{"filePath":"102","messages":"103","errorCount":0,"warningCount":24,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},"vuhkqw",{"filePath":"104","messages":"105","errorCount":0,"warningCount":28,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"106","messages":"107","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"108"},{"filePath":"109","messages":"110","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"108"},{"filePath":"111","messages":"112","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"113","messages":"114","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"115","usedDeprecatedRules":"108"},{"filePath":"116","messages":"117","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"118","messages":"119","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"120","usedDeprecatedRules":"108"},{"filePath":"121","messages":"122","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"123","messages":"124","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"125","messages":"126","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"127","messages":"128","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"129","messages":"130","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"131","messages":"132","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"133"},{"filePath":"134","messages":"135","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"133"},{"filePath":"136","messages":"137","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"138","messages":"139","errorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"140","messages":"141","errorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"142","usedDeprecatedRules":"108"},{"filePath":"143","messages":"144","errorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"145","usedDeprecatedRules":"133"},{"filePath":"146","messages":"147","errorCount":0,"warningCount":13,"fixableErrorCount":0,"fixableWarningCount":0,"source":"148","usedDeprecatedRules":"108"},{"filePath":"149","messages":"150","errorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"151","usedDeprecatedRules":"108"},{"filePath":"152","messages":"153","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"154","messages":"155","errorCount":0,"warningCount":13,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"156","messages":"157","errorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"158","messages":"159","errorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"160","usedDeprecatedRules":"108"},{"filePath":"161","messages":"162","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"163"},{"filePath":"164","messages":"165","errorCount":0,"warningCount":17,"fixableErrorCount":0,"fixableWarningCount":0,"source":"166","usedDeprecatedRules":"133"},{"filePath":"167","messages":"168","errorCount":0,"warningCount":24,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"169","messages":"170","errorCount":0,"warningCount":13,"fixableErrorCount":0,"fixableWarningCount":0,"source":"171","usedDeprecatedRules":"108"},{"filePath":"172","messages":"173","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"174","messages":"175","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"176","messages":"177","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"178","messages":"179","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"108"},{"filePath":"180","messages":"181","errorCount":0,"warningCount":17,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"182","messages":"183","errorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"184","messages":"185","errorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"186","messages":"187","errorCount":0,"warningCount":18,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"188","messages":"189","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"190","messages":"191","errorCount":0,"warningCount":21,"fixableErrorCount":0,"fixableWarningCount":0,"source":"192","usedDeprecatedRules":"108"},{"filePath":"193","messages":"194","errorCount":0,"warningCount":15,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"195","messages":"196","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"197","messages":"198","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"199","messages":"200","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"201","messages":"202","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"203","messages":"204","errorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"205","messages":"206","errorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"207","messages":"208","errorCount":0,"warningCount":34,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"209","messages":"210","errorCount":0,"warningCount":12,"fixableErrorCount":0,"fixableWarningCount":0,"source":"211"},{"filePath":"212","messages":"213","errorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"214","messages":"215","errorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},"C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\Finance\\Payment.js",["216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239"],"C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\Finance\\PaymentCreate.js",["240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255","256","257","258","259","260","261","262","263","264","265","266","267"],"C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\index.js",[],["268","269"],"C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\context.js",[],"C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\feathers.js",["270"],"C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\Home.js",["271","272","273","274","275"],"import React, {useContext, useEffect, useState} from 'react'\r\nimport {Route, Switch,  useRouteMatch, Link, NavLink, useHistory} from 'react-router-dom'\r\nimport FacilityModule from './FacilityModule'\r\nimport InventoryModule from './InventoryModule'\r\nimport ClinicModule from './ClinicModule'\r\nimport FinanceModule from './FinanceModule'\r\n/* import NavBar from './NavBar' */\r\nimport LandingPage from './LandingPage'\r\nimport {UserContext} from '../context'\r\nimport client from '../feathers'\r\n\r\nexport default function Home() {\r\n    let { path, url } = useRouteMatch();\r\n    const {user,setUser} = useContext(UserContext)\r\n\r\n    \r\n    //console.log(path)\r\n\r\n    return (\r\n        <div>\r\n            <NavBar url={url}/>\r\n                     \r\n            <Switch>\r\n            <Route path={path} exact>\r\n                    <LandingPage />\r\n                </Route>\r\n                <Route path={`${path}/inventory`} >\r\n                    <InventoryModule />\r\n                </Route>\r\n                <Route path={`${path}/facility`} >\r\n                    <FacilityModule />\r\n                </Route>\r\n                <Route path={`${path}/clinic`} >\r\n                    <ClinicModule />\r\n                </Route>\r\n                <Route path={`${path}/finance`} >\r\n                    <FinanceModule />\r\n                </Route>\r\n            </Switch>\r\n        </div>\r\n    )\r\n} \r\n\r\nfunction NavBar({url}){\r\n    const [fullname, setFullname]=useState(\"\")\r\n    const [userFacility, setUserFacility]=useState()\r\n    const {user,setUser} = useContext(UserContext)\r\n    const history =useHistory()\r\n    \r\n    const reAuth =  async() =>{\r\n        try{\r\n            const resp = await client.reAuthenticate();\r\n            //console.log(resp)\r\n            await setUser(resp.user)\r\n            /* console.log(\"lastname:\",  user.lastname)\r\n            console.log(\"reauth tried\")\r\n            */\r\n           console.log(user)\r\n            return\r\n            }\r\n        catch(error){\r\n            console.log(error)\r\n           history.push(\"/\")\r\n        }  \r\n    }\r\n\r\n    /* useEffect(() => {\r\n        const localUser= JSON.parse(localStorage.getItem(\"user\"))\r\n        setUser(localUser)\r\n        console.log(user)\r\n        return () => {\r\n           \r\n        }\r\n    }, []) */\r\n\r\n\r\n    useEffect( () => {\r\n        if(!user){\r\n           console.log(\"No user\")\r\n            reAuth()\r\n          \r\n            //history.push(\"/\")    \r\n             return\r\n        }\r\n\r\n        async function getFullname(){\r\n            const zed= user.firstname+\" \"+user.lastname\r\n         const resp =   await setFullname(zed)\r\n        // console.log(zed)\r\n         if (user.employeeData.length){\r\n            user.currentEmployee= user.employeeData[0] //choose the first facilty\r\n            const fac=  user.currentEmployee.facilityDetail.facilityName\r\n           // await set\r\n           await setUserFacility(fac)\r\n         }else{\r\n            user.currentEmployee= null\r\n           \r\n         }\r\n        \r\n         await setUser(user)\r\n         localStorage.setItem(\"user\",JSON.stringify(user))\r\n         \r\n         \r\n         \r\n        }\r\n        getFullname()\r\n        console.log(user)\r\n       /*  console.log(user.lastname)\r\n      console.log(user) */\r\n        return () => {\r\n            \r\n        }\r\n    },[] )\r\n\r\n    const handleFacilityClick=()=>{ //need to implement changing facility\r\n        const availableFacilities=[]\r\n        if (Array.isArray(user.employeeData)&& user.employeeData.length){\r\n            user.employeeData.map((emp)=>{\r\n             return   availableFacilities.push(emp.facilityDetail)\r\n            })\r\n        }\r\n        console.log(availableFacilities)\r\n    }\r\n    if (!user) return 'Loading...'\r\n    return(\r\n        <div>\r\n           <nav className=\"navbar is-small minHt has-background-info\" role=\"navigation\" aria-label=\"main navigation\">\r\n                <div className=\"navbar-brand minHt\">\r\n                    <div className=\"navbar-item is-size-5 minHt\" onClick={handleFacilityClick}> <strong>{userFacility ||\"\"} </strong> </div>\r\n                    {/* <div className=\"navbar-item\" href=\"https://bulma.io\">\r\n                    <img src=\"https://bulma.io/images/bulma-logo.png\" width=\"112\" height=\"28\" />\r\n                    </div> */}\r\n\r\n                    <div role=\"button\" className=\"navbar-burger\" aria-label=\"menu\" aria-expanded=\"false\" data-target=\"navbarBasicExample\">\r\n                    <div className=\"navbar-item\">\r\n                        <NavLink to={`${url}`}>Landing Page</NavLink> \r\n                    </div>\r\n                    <div className=\"navbar-item\">\r\n                        <NavLink to={`${url}/clinic`}>Clinic</NavLink>\r\n                    </div>\r\n                    <div className=\"navbar-item\">\r\n                        <NavLink to={`${url}/inventory`}>Inventory</NavLink>\r\n                    </div>\r\n                    <div className=\"navbar-item\">\r\n                        <NavLink to={`${url}/facility`}>Admin</NavLink>\r\n                    </div>\r\n                    <div className=\"navbar-item\">\r\n                        <NavLink to={`${url}/finance`}>Finance</NavLink>\r\n                    </div>\r\n                    <div className=\"navbar-item\">\r\n                        Front Desk\r\n                    </div>\r\n                    <hr className=\"navbar-divider\" />\r\n                    <div className=\"navbar-item\">\r\n                        Sign Out\r\n                    </div>\r\n                    \r\n                  {/*   <span aria-hidden=\"true\"></span>\r\n                    <span aria-hidden=\"true\"></span>\r\n                    <span aria-hidden=\"true\"></span> */}\r\n                    </div>\r\n                </div>\r\n\r\n                <div id=\"navbarBasicExample\" className=\"navbar-menu minHt\">\r\n                    <div className=\"navbar-start\">\r\n                    {/* <div className=\"navbar-item\">\r\n                        Home\r\n                    </div>\r\n\r\n                    <div className=\"navbar-item\">\r\n                        Documentation\r\n                    </div> */}\r\n\r\n                    \r\n                    </div>\r\n\r\n                    <div className=\"navbar-end\">\r\n                    <div className=\"navbar-item has-dropdown is-hoverable\">\r\n                        <div className=\"navbar-link\">\r\n                        \r\n                            <div className=\"button is-info is-inverted minHt\">\r\n                                <span className=\"icon\">\r\n                                <i className=\"fa fa-user-md\"></i>\r\n                                </span>\r\n                                <span>{fullname}</span>\r\n                                \r\n                                {/* <span>{user.firstname}</span> */}\r\n                            </div>\r\n                           \r\n                        </div>\r\n\r\n                            <div className=\"navbar-dropdown bckcolor\">\r\n                                <div className=\"navbar-item\">\r\n                                    <NavLink to={`${url}`}>Landing Page</NavLink> \r\n                                </div>\r\n                                <div className=\"navbar-item\">\r\n                                    <NavLink to={`${url}/clinic`}>Clinic</NavLink>\r\n                                </div>\r\n                                <div className=\"navbar-item\">\r\n                                    <NavLink to={`${url}/inventory`}>Inventory</NavLink>\r\n                                </div>\r\n                                <div className=\"navbar-item\">\r\n                                    <NavLink to={`${url}/facility`}>Admin</NavLink>\r\n                                </div>\r\n                                <div className=\"navbar-item\">\r\n                                    <NavLink to={`${url}/finance`}>Finance</NavLink>\r\n                                </div>\r\n                                <div className=\"navbar-item\">\r\n                                    Front Desk\r\n                                </div>\r\n                                <hr className=\"navbar-divider\" />\r\n                                <div className=\"navbar-item\">\r\n                                   Sign Out\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </nav>\r\n        </div>\r\n    )\r\n}\r\n \r\n  ","C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\Login.js",["276","277","278"],"C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\SignUp.js",["279","280"],"import React, {useState} from 'react'\r\nimport client from '../feathers'\r\nimport { useForm } from \"react-hook-form\";\r\nimport {useHistory} from 'react-router-dom'\r\n\r\nexport default function SignUp() {\r\n    const { register, handleSubmit, watch, errors } = useForm();\r\n    const [error, setError] =useState(true)\r\n    const [errorMessage,setErrorMessage] = useState(\"\")\r\n    const userServ=client.service('/users')\r\n    const history = useHistory()\r\n\r\n   \r\n      const onSubmit = (data,e) =>{\r\n        e.preventDefault();\r\n        setErrorMessage(\"\")\r\n        setError(false)\r\n          if (data.password !==data.password2){\r\n              setErrorMessage(\"Passwords not identical\")\r\n              setError(true)\r\n              return\r\n          }\r\n        \r\n          delete data.password2\r\n          console.log(data);\r\n          userServ.create(data)\r\n            .then((res)=>{\r\n                console.log(JSON.stringify(res))\r\n                alert(\"User Created Successfully\")\r\n                e.target.reset();\r\n                history.push(\"/\")\r\n\r\n            })\r\n            .catch((err)=>{\r\n                setErrorMessage(\"Error with creating User, probable network issues \"+ err )\r\n                setError(true)\r\n            })\r\n        \r\n        \r\n\r\n\r\n      } \r\n\r\n    return (\r\n        <section className=\"section\">\r\n            <div className=\"container signupcenter\">\r\n                <div className=\"columns\">\r\n                    <div className=\"column is-4 is-offset-4\">\r\n                        <div className=\"card \">\r\n                            <header className=\"card-header\"> \r\n                                <p className=\"card-header-title\">HealthStack: Sign Up</p>\r\n                            </header>\r\n                        <div className=\"card-content\">\r\n                            <form onSubmit={handleSubmit(onSubmit)}>\r\n                            <div className=\"field is-small\">\r\n                                <label className=\"label is-small\">First Name\r\n                                    <div className=\"control \">\r\n                                        <input className=\"input is-small\"  ref={register({ required: true })}  type=\"text\" placeholder=\"Enter Full Name\" name=\"firstname\"/>\r\n                                    </div>\r\n                                </label>\r\n                            </div>\r\n                            <div className=\"field is-small\">\r\n                                <label className=\"label is-small\">Last Name\r\n                                    <div className=\"control \">\r\n                                        <input className=\"input is-small\"  ref={register({ required: true })}  type=\"text\" placeholder=\"Enter Full Name\" name=\"lastname\"/>\r\n                                    </div>\r\n                                </label>\r\n                            </div>\r\n                            <div className=\"field is-small\">\r\n                                <label className=\"label is-small  \">Phone Number\r\n                                    <div className=\"control \">\r\n                                        <input className=\"input is-small\" ref={register({ required: true })} type=\"text\" placeholder=\"Enter Phone Number\" name=\"phone\"/>\r\n                                    </div>\r\n                                </label>\r\n                            </div>\r\n                            <div className=\"field is-small\">\r\n                                <label className=\"label is-small  \">Email\r\n                                    <div className=\"control \">\r\n                                        <input className=\"input is-small\" ref={register({ required: true })} type=\"text\" placeholder=\"Enter email\" name=\"email\"/>\r\n                                    </div>\r\n                                </label>\r\n                            </div>\r\n                            \r\n                            <div className=\"field is-small\">\r\n                                <label className=\"label is-small  \">Password\r\n                                    <div className=\"control \">\r\n                                        <input className=\"input is-small\" ref={register({ required: true })} type=\"password\" placeholder=\"Password\" name=\"password\"/>\r\n                                    </div>\r\n                                </label>\r\n                            </div>\r\n                            <div className=\"field is-small\">\r\n                                <label className=\"label is-small  \">Repeat Password\r\n                                    <div className=\"control \">\r\n                                        <input className=\"input is-small\" ref={register({ required: true })} type=\"password\" placeholder=\"Password\" name=\"password2\"/>\r\n                                    </div>\r\n                                </label>\r\n                            </div>\r\n                    \r\n                        {/* <div className=\"field\">\r\n                            <label className=\"label is-small\">Username\r\n                            <div className=\"control has-icons-left has-icons-right\">\r\n                                <input className=\"input is-success  is-small\" type=\"text\" placeholder=\"Text input\" value={\"bulma\"} />\r\n                                <span className=\"icon is-small is-left\">\r\n                                <i className=\"fas fa-user\"></i>\r\n                                </span>\r\n                                <span className=\"icon is-small is-right\">\r\n                                <i className=\"fas fa-check\"></i>\r\n                                </span>\r\n                            </div>\r\n                            </label>\r\n                            <p className=\"help is-success\">This username is available</p>\r\n                        </div>\r\n\r\n                        <div className=\"field\">\r\n                            <label className=\"label is-small\">Email</label>\r\n                            <div className=\"control has-icons-left has-icons-right\">\r\n                                <input className=\"input is-danger is-small\" type=\"email\" placeholder=\"Email input\" value=\"hello@\" />\r\n                                <span className=\"icon is-small is-left\">\r\n                                <i className=\"fas fa-envelope\"></i>\r\n                                </span>\r\n                                <span className=\"icon is-small is-right\">\r\n                                <i className=\"fas fa-exclamation-triangle\"></i>\r\n                                </span>\r\n                            </div>\r\n                            <p className=\"help is-danger\">This email is invalid</p>\r\n                        </div>\r\n\r\n                        <div className=\"field\">\r\n                        <label className=\"label is-small\">Subject</label>\r\n                        <div className=\"control is-small\">\r\n                            <div className=\"select\">\r\n                            <select>\r\n                                <option>Select dropdown</option>\r\n                                <option>With options</option>\r\n                            </select>\r\n                            </div>\r\n                        </div>\r\n                        </div> */}\r\n\r\n                    {/*  <div className=\"field\">\r\n                            <label className=\"label\">Message</label>\r\n                            <div className=\"control\">\r\n                                <textarea className=\"textarea is-small\" placeholder=\"Textarea\"></textarea>\r\n                            </div>\r\n                        </div> */}\r\n\r\n                    {/*  <div className=\"field\">\r\n                            <div className=\"control is-small\">\r\n                                <label className=\"checkbox\">\r\n                                <input type=\"checkbox\"/>\r\n                                I agree to the <a href=\"./terms\">terms and conditions</a>\r\n                                </label>\r\n                            </div>\r\n                        </div> */}\r\n\r\n                    {/*  <div className=\"field\">\r\n                            <div className=\"control\">\r\n                                <label className=\"radio is-small\">\r\n                                <input type=\"radio\" name=\"question\"/>\r\n                                Yes\r\n                                </label>\r\n                                <label className=\"radio is-small\">\r\n                                <input type=\"radio\" name=\"question\" />\r\n                                No\r\n                                </label>\r\n                            </div>\r\n                        </div> */}\r\n\r\n                        <div className=\"field is-grouped\">\r\n                            <div className=\"control\">\r\n                                <button type=\"submit\" className=\"button is-link is-small\">Submit</button>\r\n                            </div>\r\n                           {/*  <div className=\"control\">\r\n                                <button className=\"button is-link is-light is-small\" >Cancel</button>\r\n                            </div> */}\r\n                        </div>\r\n                        { error && \r\n                        <div className=\"message\"> {errorMessage}                            \r\n                        </div>\r\n                        }\r\n                        </form>\r\n\r\n                        </div>\r\n                        </div>\r\n                        </div>\r\n                \r\n                </div>\r\n            </div>\r\n        </section>\r\n    )\r\n}\r\n","C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\InventoryModule.js",["281","282","283","284","285"],"C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\ClinicModule.js",["286","287","288","289"],"C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\facility\\CareTeam.js",[],"C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\facility\\Workspace.js",[],"C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\facility\\Department.js",[],"C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\facility\\FacilityHome.js",[],["290","291"],"C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\inventory\\InventorySetup.js",[],"C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\facility\\Employee.js",["292","293"],"C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\inventory\\InventoryStore.js",["294","295","296","297","298","299","300","301"],"C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\Finance\\FinanceStore.js",["302","303","304","305","306","307","308","309"],"import React, {useState,useContext, useEffect,useRef} from 'react'\r\nimport client from '../../feathers'\r\nimport {DebounceInput} from 'react-debounce-input';\r\nimport { useForm } from \"react-hook-form\";\r\n//import {useHistory} from 'react-router-dom'\r\nimport {UserContext,ObjectContext} from '../../context'\r\nimport {toast} from 'bulma-toast'\r\n// eslint-disable-next-line\r\nconst searchfacility={};\r\n\r\n\r\nexport default function Inventory() {\r\n    const {state}=useContext(ObjectContext) //,setState\r\n    // eslint-disable-next-line\r\n    const [selectedInventory,setSelectedInventory]=useState()\r\n    //const [showState,setShowState]=useState() //create|modify|detail\r\n    \r\n    return(\r\n        <section className= \"section remPadTop\">\r\n           {/*  <div className=\"level\">\r\n            <div className=\"level-item\"> <span className=\"is-size-6 has-text-weight-medium\">Inventory  Module</span></div>\r\n            </div> */}\r\n            <div className=\"columns \">\r\n            <div className=\"column is-8 \">\r\n                <InventoryList />\r\n                </div>\r\n            <div className=\"column is-4 \">\r\n                {(state.InventoryModule.show ==='create')&&<InventoryCreate />}\r\n                {(state.InventoryModule.show ==='detail')&&<InventoryDetail  />}\r\n                {(state.InventoryModule.show ==='modify')&&<InventoryModify Inventory={selectedInventory} />}\r\n               \r\n            </div>\r\n\r\n            </div>                            \r\n            </section>\r\n       \r\n    )\r\n    \r\n}\r\n\r\nexport function InventoryCreate(){\r\n    const { register, handleSubmit,setValue} = useForm(); //, watch, errors, reset \r\n    const [error, setError] =useState(false)\r\n    const [success, setSuccess] =useState(false)\r\n    const [message,setMessage] = useState(\"\")\r\n    // eslint-disable-next-line\r\n    const [facility,setFacility] = useState()\r\n    const InventoryServ=client.service('inventory')\r\n    //const history = useHistory()\r\n    const {user} = useContext(UserContext) //,setUser\r\n    // eslint-disable-next-line\r\n    const [currentUser,setCurrentUser] = useState()\r\n\r\n\r\n\r\n    const getSearchfacility=(obj)=>{\r\n        \r\n        setValue(\"facility\", obj._id,  {\r\n            shouldValidate: true,\r\n            shouldDirty: true\r\n        })\r\n    }\r\n    \r\n    useEffect(() => {\r\n        setCurrentUser(user)\r\n        //console.log(currentUser)\r\n        return () => {\r\n        \r\n        }\r\n    }, [user])\r\n\r\n  //check user for facility or get list of facility  \r\n    useEffect(()=>{\r\n        //setFacility(user.activeInventory.FacilityId)//\r\n      if (!user.stacker){\r\n          console.log(currentUser)\r\n        setValue(\"facility\", user.currentEmployee.facilityDetail._id,  {\r\n            shouldValidate: true,\r\n            shouldDirty: true\r\n        }) \r\n      }\r\n    })\r\n\r\n    const onSubmit = (data,e) =>{\r\n        e.preventDefault();\r\n        setMessage(\"\")\r\n        setError(false)\r\n        setSuccess(false)\r\n         // data.createdby=user._id\r\n          console.log(data);\r\n          if (user.currentEmployee){\r\n         data.facility=user.currentEmployee.facilityDetail._id  // or from facility dropdown\r\n          }\r\n        InventoryServ.create(data)\r\n        .then((res)=>{\r\n                //console.log(JSON.stringify(res))\r\n                e.target.reset();\r\n               /*  setMessage(\"Created Inventory successfully\") */\r\n                setSuccess(true)\r\n                toast({\r\n                    message: 'Inventory created succesfully',\r\n                    type: 'is-success',\r\n                    dismissible: true,\r\n                    pauseOnHover: true,\r\n                  })\r\n                  setSuccess(false)\r\n            })\r\n            .catch((err)=>{\r\n                toast({\r\n                    message: 'Error creating Inventory ' + err,\r\n                    type: 'is-danger',\r\n                    dismissible: true,\r\n                    pauseOnHover: true,\r\n                  })\r\n            })\r\n\r\n      } \r\n\r\n    return (\r\n        <>\r\n            <div className=\"card \">\r\n            <div className=\"card-header\">\r\n                <p className=\"card-header-title\">\r\n                    Create Inventory: Product Entry- Initialization, Purchase Invoice, Audit\r\n                </p>\r\n            </div>\r\n            <div className=\"card-content vscrollable\">\r\n   \r\n            <form onSubmit={handleSubmit(onSubmit)}>\r\n            <div className=\"field\">    \r\n                <div class=\"control\">\r\n                    <div class=\"select is-small\">\r\n                        <select>\r\n                            <option>Purchase Invoice </option>\r\n                            <option>Initialization</option>\r\n                            <option>Audit</option>\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div className=\"field\">\r\n                <p className=\"control has-icons-left\"> {/* Audit/initialization/Purchase Invoice */}\r\n                    <input className=\"input is-small\" ref={register({ required: true })} name=\"type\" type=\"text\" placeholder=\"Type of Product Entry\"/>\r\n                    <span className=\"icon is-small is-left\">\r\n                    <i className=\" fas fa-user-md \"></i>\r\n                    </span>\r\n                </p>\r\n            </div>\r\n                <div className=\"field\">\r\n                    <p className=\"control has-icons-left has-icons-right\">\r\n                        <input className=\"input is-small\" ref={register({ required: true })}  name=\"supplier\" type=\"text\" placeholder=\"Supplier\" />\r\n                        <span className=\"icon is-small is-left\">\r\n                            <i className=\"fas fa-hospital\"></i>\r\n                        </span>                    \r\n                    </p>\r\n                </div>\r\n                <div className=\"field\">\r\n                    <p className=\"control has-icons-left has-icons-right\">\r\n                    <input className=\"input is-small\" ref={register({ required: true })}  name=\"date\" type=\"text\" placeholder=\"Date\" />\r\n                    <span className=\"icon is-small is-left\">\r\n                        <i className=\"fas fa-map-signs\"></i>\r\n                    </span>\r\n                    \r\n                </p>\r\n            </div>\r\n            \r\n            <div className=\"field\">\r\n                <p className=\"control has-icons-left\">\r\n                    <input className=\"input is-small\" ref={register({ required: true })} name=\"totalamount\" type=\"text\" placeholder=\" Total Amount\"/>\r\n                    <span className=\"icon is-small is-left\">\r\n                    <i className=\"fas fa-phone-alt\"></i>\r\n                    </span>\r\n                </p>\r\n            </div>\r\n           \r\n         {/* array of inventory items */}\r\n         <p className=\"control\">\r\n                    <button className=\"button is-info is-small  is-pulled-right\">\r\n                      <span className=\"is-small\"> +</span>\r\n                    </button>\r\n                </p>\r\n           <div className=\"field\"  /* style={ !user.stacker?{display:\"none\"}:{}} */ >\r\n                <ProductSearch  getSearchfacility={getSearchfacility} clear={success} /> \r\n                <p className=\"control has-icons-left \" style={{display:\"none\"}}>\r\n                    <input className=\"input is-small\" ref={register ({ required: true }) } /* add array no */ name=\"productId\" type=\"text\" placeholder=\"Product Id\" />\r\n                    <span className=\"icon is-small is-left\">\r\n                    <i className=\"fas  fa-map-marker-alt\"></i>\r\n                    </span>\r\n                </p>\r\n            </div>\r\n           \r\n               <div className=\"field\">\r\n                <p className=\"control has-icons-left\">\r\n                    <input className=\"input is-small\" ref={register({ required: true })} name=\"quantity\" type=\"text\" placeholder=\"Quantity\"  />\r\n                    <span className=\"icon is-small is-left\">\r\n                    <i className=\"fas fa-envelope\"></i>\r\n                    </span>\r\n                </p>\r\n                <label className=\"label is-small\">Base Unit</label>\r\n            </div> \r\n            <div className=\"field\">\r\n                <p className=\"control has-icons-left\">\r\n                    <input className=\"input is-small\" ref={register({ required: true })} name=\"costprice\" type=\"text\" placeholder=\"Cost Price\"  />\r\n                    <span className=\"icon is-small is-left\">\r\n                    <i className=\"fas fa-envelope\"></i>\r\n                    </span>\r\n                </p>\r\n            </div> \r\n           {/*  <div className=\"field\">\r\n                <div className=\"control has-icons-left\">\r\n                    <div className=\"dropdown \">\r\n                        <div className=\"dropdown-trigger\">\r\n                            <input className=\"input is-small\" ref={register({ required: true })} name=\"department\" type=\"text\" placeholder=\"Department\"/>\r\n                            <span className=\"icon is-small is-left\">\r\n                            <i className=\"fas fa-hospital-symbol\"></i>\r\n                            </span>\r\n                        </div>\r\n                        <div className=\"dropdown-menu\">\r\n                            <div className=\"dropdown-content\">\r\n                                <div className=\"dropdown-item\">\r\n                                    simpa\r\n                                </div>\r\n                                <div className=\"dropdown-item is-active\">\r\n                                    simpa 2\r\n                                </div>\r\n                                <div className=\"dropdown-item\">\r\n                                    simpa 3\r\n                                </div>\r\n                                <div className=\"dropdown-item\">\r\n                                    simpa 4\r\n                                </div>\r\n                            </div>\r\n                        </div>   \r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div className=\"field\">\r\n                <p className=\"control has-icons-left\">\r\n                    <input className=\"input is-small\" ref={register({ required: true })} name=\"deptunit\" type=\"text\" placeholder=\"Department Unit\"/>\r\n                    <span className=\"icon is-small is-left\">\r\n                    <i className=\"fas fa-clinic-medical\"></i>\r\n                    </span>\r\n                </p>\r\n            </div>\r\n            <div className=\"field\">\r\n                <p className=\"control has-icons-left\">\r\n                    <input className=\"input is-small\" ref={register({ required: true })} name=\"password\" type=\"text\" placeholder=\"password\"/>\r\n                    <span className=\"icon is-small is-left\">\r\n                    <i className=\"fas fa-clinic-medical\"></i>\r\n                    </span>\r\n                </p>\r\n            </div> */}\r\n            <div className=\"field\">\r\n                <p className=\"control\">\r\n                    <button className=\"button is-success is-small\">\r\n                        Create\r\n                    </button>\r\n                </p>\r\n            </div>\r\n            \r\n            </form>\r\n            </div>\r\n            </div>\r\n        </>\r\n    )\r\n   \r\n}\r\n\r\nexport function InventoryList(){\r\n   // const { register, handleSubmit, watch, errors } = useForm();\r\n    // eslint-disable-next-line\r\n    const [error, setError] =useState(false)\r\n     // eslint-disable-next-line\r\n    const [success, setSuccess] =useState(false)\r\n     // eslint-disable-next-line\r\n   const [message, setMessage] = useState(\"\") \r\n    const InventoryServ=client.service('inventory')\r\n    //const history = useHistory()\r\n   // const {user,setUser} = useContext(UserContext)\r\n    const [facilities,setFacilities]=useState([])\r\n     // eslint-disable-next-line\r\n   const [selectedInventory, setSelectedInventory]=useState() //\r\n    // eslint-disable-next-line\r\n    const {state,setState}=useContext(ObjectContext)\r\n    // eslint-disable-next-line\r\n    const {user,setUser}=useContext(UserContext)\r\n\r\n\r\n\r\n    const handleCreateNew = async()=>{\r\n        const    newInventoryModule={\r\n            selectedInventory:{},\r\n            show :'create'\r\n            }\r\n       await setState((prevstate)=>({...prevstate, InventoryModule:newInventoryModule}))\r\n       //console.log(state)\r\n    }\r\n\r\n    const handleRow= async(Inventory)=>{\r\n        //console.log(\"b4\",state)\r\n\r\n        //console.log(\"handlerow\",Inventory)\r\n\r\n        await setSelectedInventory(Inventory)\r\n\r\n        const    newInventoryModule={\r\n            selectedInventory:Inventory,\r\n            show :'detail'\r\n        }\r\n       await setState((prevstate)=>({...prevstate, InventoryModule:newInventoryModule}))\r\n       //console.log(state)\r\n\r\n    }\r\n\r\n   const handleSearch=(val)=>{\r\n       const field='name'\r\n       console.log(val)\r\n       InventoryServ.find({query: {\r\n                [field]: {\r\n                    $regex:val,\r\n                    $options:'i'\r\n                   \r\n                },\r\n               facility:user.currentEmployee.facilityDetail._id || \"\",\r\n                $limit:10,\r\n                $sort: {\r\n                    createdAt: -1\r\n                  }\r\n                    }}).then((res)=>{\r\n                console.log(res)\r\n               setFacilities(res.data)\r\n                setMessage(\" Inventory  fetched successfully\")\r\n                setSuccess(true) \r\n            })\r\n            .catch((err)=>{\r\n                console.log(err)\r\n                setMessage(\"Error fetching Inventory, probable network issues \"+ err )\r\n                setError(true)\r\n            })\r\n        }\r\n   \r\n        const getFacilities= async()=>{\r\n            if (user.currentEmployee){\r\n            \r\n        const findInventory= await InventoryServ.find(\r\n                {query: {\r\n                    facility:user.currentEmployee.facilityDetail._id,\r\n                    storeId:state.StoreModule.selectedStore._id,\r\n                    $limit:20,\r\n                    $sort: {\r\n                        createdAt: -1\r\n                    }\r\n                    }})\r\n\r\n         await setFacilities(findInventory.data)\r\n                }\r\n                else {\r\n                    if (user.stacker){\r\n                        const findInventory= await InventoryServ.find(\r\n                            {query: {\r\n                                \r\n                                $limit:20,\r\n                                $sort: {\r\n                                    createdAt: -1\r\n                                }\r\n                                }})\r\n            \r\n                    await setFacilities(findInventory.data)\r\n\r\n                    }\r\n                }\r\n          /*   .then((res)=>{\r\n                console.log(res)\r\n                    setFacilities(res.data)\r\n                    setMessage(\" Inventory  fetched successfully\")\r\n                    setSuccess(true)\r\n                })\r\n                .catch((err)=>{\r\n                    setMessage(\"Error creating Inventory, probable network issues \"+ err )\r\n                    setError(true)\r\n                }) */\r\n            }\r\n            \r\n            useEffect(() => {\r\n                setTimeout(() => {\r\n                    console.log(\"happy birthday\")\r\n                    //getFacilities(user)\r\n                }, 200);\r\n\r\n                return () => {\r\n                    \r\n\r\n                }\r\n            },[])\r\n\r\n            useEffect(() => {\r\n               \r\n                if (user){\r\n                    getFacilities()\r\n                }else{\r\n                    /* const localUser= localStorage.getItem(\"user\")\r\n                    const user1=JSON.parse(localUser)\r\n                    console.log(localUser)\r\n                    console.log(user1)\r\n                    fetchUser(user1)\r\n                    console.log(user)\r\n                    getFacilities(user) */\r\n                }\r\n                InventoryServ.on('created', (obj)=>getFacilities())\r\n                InventoryServ.on('updated', (obj)=>getFacilities())\r\n                InventoryServ.on('patched', (obj)=>getFacilities())\r\n                InventoryServ.on('removed', (obj)=>getFacilities())\r\n                return () => {\r\n                \r\n                }\r\n            },[])\r\n        \r\n        useEffect(() => {\r\n            getFacilities()\r\n            return () => {\r\n               \r\n            }\r\n        }, [state.StoreModule.selectedStore])\r\n\r\n    //todo: pagination and vertical scroll bar\r\n\r\n    return(\r\n        <>\r\n           {user?( <>  \r\n                <div className=\"level\">\r\n                    <div className=\"level-left\">\r\n                        <div className=\"level-item\">\r\n                            <div className=\"field\">\r\n                                <p className=\"control has-icons-left  \">\r\n                                    <DebounceInput className=\"input is-small \" \r\n                                        type=\"text\" placeholder=\"Search Inventory\"\r\n                                        minLength={3}\r\n                                        debounceTimeout={400}\r\n                                        onChange={(e)=>handleSearch(e.target.value)} />\r\n                                    <span className=\"icon is-small is-left\">\r\n                                        <i className=\"fas fa-search\"></i>\r\n                                    </span>\r\n                                </p>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"level-item\"> <span className=\"is-size-6 has-text-weight-medium\">List of Inventories </span></div>\r\n                    <div className=\"level-right\">\r\n                        <div className=\"level-item\"> \r\n                            <div className=\"level-item\"><div className=\"button is-success is-small\" onClick={handleCreateNew}>New</div></div>\r\n                        </div>\r\n                    </div>\r\n\r\n                </div>\r\n                <div className=\"table-container pullup \">\r\n                                <table className=\"table is-striped is-narrow is-hoverable is-fullwidth is-scrollable \">\r\n                                    <thead>\r\n                                        <tr>\r\n                                        <th><abbr title=\"Serial No\">S/No</abbr></th>\r\n                                        {/* <th><abbr title=\"Category\">Category</abbr></th> */}\r\n                                        <th>Product</th>\r\n                                        <th><abbr title=\"Quantity\">Quantity</abbr></th>\r\n                                        <th><abbr title=\"Base Unit\">Base Unit</abbr></th>\r\n                                        <th><abbr title=\"Stock Value\">Stock Value</abbr></th>\r\n                                         <th><abbr title=\"Cost Price\">Cost Price</abbr></th>\r\n                                        <th><abbr title=\"Selling Price\">Selling Price</abbr></th>\r\n                                        <th><abbr title=\"Re-Order Level\">Re-Order Level</abbr></th>\r\n                                        <th><abbr title=\"Expiry\">Expiry</abbr></th> \r\n                                        <th><abbr title=\"Actions\">Actions</abbr></th>\r\n                                        </tr>\r\n                                    </thead>\r\n                                    <tfoot>\r\n                                        \r\n                                    </tfoot>\r\n                                    <tbody>\r\n                                        {facilities.map((Inventory, i)=>(\r\n\r\n                                            <tr key={Inventory._id} onClick={()=>handleRow(Inventory)}>\r\n                                            <th>{i+1}</th>\r\n                                            {/* <td>{Inventory.productDetail.category}</td> */}\r\n                                            <th>{Inventory.name}</th>\r\n                                            <td>{Inventory.quantity}</td>\r\n                                            <td>{Inventory.baseunit}</td>\r\n                                            <td>{Inventory.stockvalue}</td>\r\n                                            <td>{Inventory.costprice}</td>\r\n                                            <td>{Inventory.sellingprice}</td>\r\n                                            <td>{Inventory.reorder_level}</td> \r\n                                            <td>{Inventory.expiry}</td>\r\n                                            <td><span   className=\"showAction\"  >...</span></td>\r\n                                           \r\n                                            </tr>\r\n\r\n                                        ))}\r\n                                    </tbody>\r\n                                    </table>\r\n                                    \r\n                </div>              \r\n            </>):<div>loading</div>}\r\n            </>\r\n              \r\n    )\r\n    }\r\n\r\n\r\nexport function InventoryDetail(){\r\n    //const { register, handleSubmit, watch, setValue } = useForm(); //errors,\r\n     // eslint-disable-next-line\r\n    const [error, setError] =useState(false) //, \r\n    //const [success, setSuccess] =useState(false)\r\n     // eslint-disable-next-line\r\n    const [message, setMessage] = useState(\"\") //,\r\n    //const InventoryServ=client.service('/Inventory')\r\n    //const history = useHistory()\r\n    //const {user,setUser} = useContext(UserContext)\r\n    const {state,setState} = useContext(ObjectContext)\r\n    const {user} = useContext(UserContext) //,setUser\r\n    \r\n   \r\n\r\n   const Inventory =state.InventoryModule.selectedInventory \r\n   console.log(\"selected\",Inventory)\r\n\r\n   \r\n  const getFacilities= async()=>{\r\n     const findProductEntry= await client.service('productentry').find(\r\n        {query: {\r\n            'productitems.productId':Inventory.productId,\r\n            facility:user.currentEmployee.facilityDetail._id,\r\n            storeId:state.StoreModule.selectedStore._id,\r\n            $limit:20,\r\n            $sort: {\r\n                createdAt: -1\r\n            }\r\n            }})\r\n\r\n        console.log(findProductEntry)\r\n       }\r\n    \r\n       useEffect(() => {\r\n        getFacilities()\r\n           return () => {\r\n               \r\n           }\r\n       }, [Inventory])\r\n /* await setFacilities(findProductEntry.data)\r\n        }\r\n        else {\r\n            if (user.stacker){ */\r\n                /* toast({\r\n                    message: 'You do not qualify to view this',\r\n                    type: 'is-danger',\r\n                    dismissible: true,\r\n                    pauseOnHover: true,\r\n                  }) \r\n                  return */\r\n               /*  const findProductEntry= await ProductEntryServ.find(\r\n                    {query: {\r\n                        \r\n                        $limit:20,\r\n                        $sort: {\r\n                            createdAt: -1\r\n                        }\r\n                        }})\r\n    \r\n            await setFacilities(findProductEntry.data)\r\n\r\n            }\r\n        }  */\r\n  /*   .then((res)=>{\r\n        console.log(res)\r\n            setFacilities(res.data)\r\n            setMessage(\" ProductEntry  fetched successfully\")\r\n            setSuccess(true)\r\n        })\r\n        .catch((err)=>{\r\n            setMessage(\"Error creating ProductEntry, probable network issues \"+ err )\r\n            setError(true)\r\n        }) */\r\n    \r\n    \r\n\r\n\r\n\r\n    const handleEdit= async()=>{\r\n        const    newInventoryModule={\r\n            selectedInventory:Inventory,\r\n            show :'modify'\r\n        }\r\n       await setState((prevstate)=>({...prevstate, InventoryModule:newInventoryModule}))\r\n       //console.log(state)\r\n       \r\n    }\r\n \r\n    return (\r\n        <>\r\n        <div className=\"card \">\r\n            <div className=\"card-header\">\r\n                <p className=\"card-header-title\">\r\n                    Inventory Details\r\n                </p>\r\n            </div>\r\n            <div className=\"card-content vscrollable\">\r\n           \r\n                <table> \r\n                <tbody>         \r\n                <tr>\r\n                    <td>\r\n                \r\n                    <label className=\"label is-small\"> <span className=\"icon is-small is-left\">\r\n                            <i className=\"fas fa-hospital\"></i>\r\n                        </span>                    \r\n                        Product Name: \r\n                        </label>\r\n                        </td>\r\n                        <td>\r\n                        <span className=\"is-size-7 padleft\"   name=\"name\"><strong> {Inventory.name} </strong></span>\r\n                        </td>\r\n                    </tr>\r\n                   {/*  <tr>\r\n                    <td>\r\n                <label className=\"label is-small\"><span className=\"icon is-small is-left\">\r\n                        <i className=\"fas fa-map-signs\"></i>\r\n                    </span>Inventory Type:\r\n                    </label></td>\r\n                    <td>\r\n                    <span className=\"is-size-7 padleft\"   name=\"InventoryType\">{Inventory.InventoryType} </span> \r\n                    </td>\r\n                </tr> */}\r\n\r\n            </tbody> \r\n            </table> \r\n           \r\n            <div className=\"field mt-2 is-grouped\">\r\n                <p className=\"control\">\r\n                    <button className=\"button is-success is-small\" onClick={handleEdit}>\r\n                        Set Price\r\n                    </button>\r\n                </p>\r\n                <p className=\"control\">\r\n                    <button className=\"button is-danger is-small\"  /*  onClick={handleSetPrice} */>\r\n                        Audit\r\n                    </button>\r\n                </p>\r\n                <p className=\"control\">\r\n                    <button className=\"button is-info is-small\" /* onClick={handleEdit} */>\r\n                        Transaction History\r\n                    </button>\r\n                </p>\r\n                <p className=\"control\">\r\n                    <button className=\"button is-warning is-small\" /* onClick={handleEdit} */>\r\n                        Reorder Level\r\n                    </button>\r\n                </p>\r\n            </div>\r\n            { error && <div className=\"message\"> {message}</div>}\r\n           \r\n        </div>\r\n        </div>\r\n        </>\r\n    )\r\n   \r\n   \r\n}\r\n\r\nexport function InventoryModify(){\r\n    const { register, handleSubmit, setValue,reset, errors } = useForm(); //watch, errors,\r\n    // eslint-disable-next-line \r\n    const [error, setError] =useState(false)\r\n    // eslint-disable-next-line \r\n    const [success, setSuccess] =useState(false)\r\n    // eslint-disable-next-line \r\n    const [message,setMessage] = useState(\"\")\r\n    const [billservice,setBillService] = useState()\r\n    // eslint-disable-next-line \r\n    const InventoryServ=client.service('inventory')\r\n    //const history = useHistory()\r\n     // eslint-disable-next-line\r\n    const {user} = useContext(UserContext)\r\n    const {state,setState} = useContext(ObjectContext)\r\n    const billServ=client.service('billing')\r\n\r\n    const Inventory =state.InventoryModule.selectedInventory // set inventory\r\n    const handleSetPrice = async()=>{\r\n    \r\n        const service = await  billServ.get(Inventory.billingId) // get the service\r\n            const contractSel= service.contracts.filter(element=>(element.source_org===Inventory.facility && element.dest_org===Inventory.facility))\r\n            \r\n            setValue(\"price\", contractSel[0].price,  {\r\n                shouldValidate: true,\r\n                shouldDirty: true\r\n            })\r\n            setValue(\"oldprice\", contractSel[0].price,  {\r\n                shouldValidate: true,\r\n                shouldDirty: true\r\n            })\r\n            await setBillService(service)\r\n            console.log(contractSel,service)\r\n    }\r\n \r\n        useEffect(() => {\r\n            handleSetPrice()\r\n     \r\n            return () => {\r\n                \r\n            }\r\n        },[])\r\n\r\n   const handleCancel=async()=>{\r\n   \r\n    const    newInventoryModule={\r\n        selectedInventory:{},\r\n        show :'detail'\r\n      }\r\n        await setState((prevstate)=>({...prevstate, InventoryModule:newInventoryModule}))\r\n   //console.log(state)\r\n           }\r\n\r\n\r\n        const changeState =()=>{\r\n            const    newInventoryModule={\r\n                selectedInventory:{},\r\n                show :'detail'\r\n            }\r\n        setState((prevstate)=>({...prevstate, InventoryModule:newInventoryModule}))\r\n\r\n        }\r\n\r\n\r\n    const handleDelete=async()=>{\r\n        let conf=window.confirm(\"Are you sure you want to delete this data?\")\r\n        \r\n        const dleteId=Inventory._id\r\n        if (conf){\r\n             \r\n        InventoryServ.remove(dleteId)\r\n        .then((res)=>{\r\n                //console.log(JSON.stringify(res))\r\n                reset();\r\n               /*  setMessage(\"Deleted Inventory successfully\")\r\n                setSuccess(true)\r\n                changeState()\r\n               setTimeout(() => {\r\n                setSuccess(false)\r\n                }, 200); */\r\n                toast({\r\n                    message: 'Inventory deleted succesfully',\r\n                    type: 'is-success',\r\n                    dismissible: true,\r\n                    pauseOnHover: true,\r\n                  })\r\n                changeState()\r\n            })\r\n            .catch((err)=>{\r\n               // setMessage(\"Error deleting Inventory, probable network issues \"+ err )\r\n               // setError(true)\r\n                toast({\r\n                    message: \"Error deleting Inventory, probable network issues or \"+ err,\r\n                    type: 'is-danger',\r\n                    dismissible: true,\r\n                    pauseOnHover: true,\r\n                  })\r\n            })\r\n        }\r\n    }\r\n        \r\n\r\n   /* ()=> setValue(\"firstName\", \"Bill\", , {\r\n            shouldValidate: true,\r\n            shouldDirty: true\r\n          })) */\r\n    const onSubmit = (data,e) =>{\r\n        e.preventDefault();\r\n        \r\n        setSuccess(false)\r\n        console.log(data)\r\n       // data.facility=Inventory.facility\r\n          //console.log(data);\r\n          const contractSel= billservice.contracts.filter(element=>(element.source_org===Inventory.facility && element.dest_org===Inventory.facility))\r\n          contractSel[0].price=data.price \r\n          billServ.patch(billservice._id,billservice)\r\n        .then((res)=>{\r\n                //console.log(JSON.stringify(res))\r\n               // e.target.reset();\r\n               // setMessage(\"updated Inventory successfully\")\r\n                 toast({\r\n                    message: 'Price updated succesfully',\r\n                    type: 'is-success',\r\n                    dismissible: true,\r\n                    pauseOnHover: true,\r\n                  })\r\n                  \r\n                changeState()\r\n\r\n            })\r\n            .catch((err)=>{\r\n                //setMessage(\"Error creating Inventory, probable network issues \"+ err )\r\n               // setError(true)\r\n                toast({\r\n                    message: \"Error updating Price, probable network issues or \"+ err,\r\n                    type: 'is-danger',\r\n                    dismissible: true,\r\n                    pauseOnHover: true,\r\n                  })\r\n            }) \r\n\r\n      } \r\n     \r\n      \r\n    return (\r\n        \r\n        <>\r\n        <div className=\"card \">\r\n            <div className=\"card-header\">\r\n                <p className=\"card-header-title\">\r\n                    Set Price for {Inventory.name} per {Inventory.baseunit}\r\n                </p>\r\n            </div>\r\n            <div className=\"card-content vscrollable\">\r\n           \r\n            <form onSubmit={handleSubmit(onSubmit)}>\r\n                <div className=\"field\">\r\n                    <label className=\"label is-small\"> New Selling Price\r\n                    <p className=\"control has-icons-left has-icons-right\">\r\n                        <input className=\"input  is-small\" ref={register({ required: true })}  name=\"price\" type=\"text\" placeholder=\"Name\" />\r\n                        <span className=\"icon is-small is-left\">\r\n                            <i className=\"fas fa-hospital\"></i>\r\n                        </span>                    \r\n                    </p>\r\n                    </label>\r\n                    </div>\r\n                <div className=\"field\">\r\n                <label className=\"label is-small\">Old Price\r\n                    <p className=\"control has-icons-left has-icons-right\">\r\n                    <input className=\"input is-small \" ref={register({ required: true })} disabled name=\"oldprice\" type=\"text\" placeholder=\"Inventory Type\" />\r\n                    <span className=\"icon is-small is-left\">\r\n                        <i className=\"fas fa-map-signs\"></i>\r\n                    </span>\r\n                    \r\n                </p>\r\n                </label>\r\n                </div>\r\n           \r\n           \r\n           \r\n            </form>\r\n            \r\n            <div className=\"field  is-grouped mt-2\" >\r\n                <p className=\"control\">\r\n                    <button type=\"submit\" className=\"button is-success is-small\" onClick={handleSubmit(onSubmit)}>\r\n                        Save\r\n                    </button>\r\n                </p>\r\n                <p className=\"control\">\r\n                    <button className=\"button is-warning is-small\" onClick={handleCancel}>\r\n                        Cancel\r\n                    </button>\r\n                </p>\r\n               {/*  <p className=\"control\">\r\n                    <button className=\"button is-danger is-small\" onClick={()=>handleDelete()} type=\"delete\">\r\n                       Delete\r\n                    </button>\r\n                </p> */}\r\n            </div>\r\n        </div>\r\n        </div>\r\n        </>\r\n    )\r\n   \r\n   \r\n                \r\n}   \r\n\r\nexport  function ProductSearch({getSearchfacility,clear}) {\r\n    \r\n    const facilityServ=client.service('products')\r\n    const [facilities,setFacilities]=useState([])\r\n     // eslint-disable-next-line\r\n     const [searchError, setSearchError] =useState(false)\r\n     // eslint-disable-next-line\r\n    const [showPanel, setShowPanel] =useState(false)\r\n     // eslint-disable-next-line\r\n   const [searchMessage, setSearchMessage] = useState(\"\") \r\n   // eslint-disable-next-line \r\n   const [simpa,setSimpa]=useState(\"\")\r\n   // eslint-disable-next-line \r\n   const [chosen,setChosen]=useState(false)\r\n   // eslint-disable-next-line \r\n   const [count,setCount]=useState(0)\r\n   const inputEl=useRef(null)\r\n\r\n\r\n   const handleRow= async(obj)=>{\r\n        await setChosen(true)\r\n        //alert(\"something is chaning\")\r\n       getSearchfacility(obj)\r\n       \r\n       await setSimpa(obj.facilityName)\r\n       \r\n        // setSelectedFacility(obj)\r\n        setShowPanel(false)\r\n        await setCount(2)\r\n        /* const    newfacilityModule={\r\n            selectedFacility:facility,\r\n            show :'detail'\r\n        }\r\n   await setState((prevstate)=>({...prevstate, facilityModule:newfacilityModule})) */\r\n   //console.log(state)\r\n}\r\n    const handleBlur=async(e)=>{\r\n         if (count===2){\r\n             console.log(\"stuff was chosen\")\r\n         }\r\n       \r\n       /*  console.log(\"blur\")\r\n         setShowPanel(false)\r\n        console.log(JSON.stringify(simpa))\r\n        if (simpa===\"\"){\r\n            console.log(facilities.length)\r\n            setSimpa(\"abc\")\r\n            setSimpa(\"\")\r\n            setFacilities([])\r\n            inputEl.current.setValue=\"\"\r\n        }\r\n        console.log(facilities.length)\r\n        console.log(inputEl.current) */\r\n    }\r\n    const handleSearch=async(val)=>{\r\n        \r\n        const field='name' //field variable\r\n       \r\n        if (val.length>=3){\r\n            facilityServ.find({query: {     //service\r\n                 [field]: {\r\n                     $regex:val,\r\n                     $options:'i'\r\n                    \r\n                 },\r\n                 $limit:10,\r\n                 $sort: {\r\n                     createdAt: -1\r\n                   }\r\n                     }}).then((res)=>{\r\n              console.log(\"facility  fetched successfully\") \r\n                setFacilities(res.data)\r\n                 setSearchMessage(\" facility  fetched successfully\")\r\n                 setShowPanel(true)\r\n             })\r\n             .catch((err)=>{\r\n                 console.log(err)\r\n                 setSearchMessage(\"Error searching facility, probable network issues \"+ err )\r\n                 setSearchError(true)\r\n             })\r\n         }\r\n        else{\r\n            console.log(\"less than 3 \")\r\n            console.log(val)\r\n            setShowPanel(false)\r\n            await setFacilities([])\r\n            console.log(facilities)\r\n        }\r\n    }\r\n    useEffect(() => {\r\n       if (clear){\r\n           setSimpa(\"\")\r\n       }\r\n        return () => {\r\n            \r\n        }\r\n    }, [clear] )\r\n    return (\r\n        <div>\r\n            <div className=\"field\">\r\n                <div className=\"control has-icons-left  \">\r\n                    <div className={`dropdown ${showPanel?\"is-active\":\"\"}`}>\r\n                        <div className=\"dropdown-trigger\">\r\n                            <DebounceInput className=\"input is-small \" \r\n                                type=\"text\" placeholder=\"Search Product\"\r\n                                value={simpa}\r\n                                minLength={1}\r\n                                debounceTimeout={400}\r\n                                onBlur={(e)=>handleBlur(e)}\r\n                                onChange={(e)=>handleSearch(e.target.value)}\r\n                                inputRef={inputEl}\r\n                                  />\r\n                            <span className=\"icon is-small is-left\">\r\n                                <i className=\"fas fa-search\"></i>\r\n                            </span>\r\n                        </div>\r\n                        {searchError&&<div>{searchMessage}</div>}\r\n                        <div className=\"dropdown-menu\" >\r\n                            <div className=\"dropdown-content\">\r\n                            {facilities.map((facility, i)=>(\r\n                                    \r\n                                    <div className=\"dropdown-item\" key={facility._id} onClick={()=>handleRow(facility)}>\r\n                                        \r\n                                        <span>{facility.facilityName}</span>\r\n                                        \r\n                                    </div>\r\n                                    \r\n                                    ))}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n          \r\n        </div>\r\n    )\r\n}","C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\Finance\\ProductEntry.js",["310","311","312","313","314","315","316"],"import React, {useState,useContext, useEffect,useRef} from 'react'\r\nimport client from '../../feathers'\r\nimport {DebounceInput} from 'react-debounce-input';\r\nimport { useForm } from \"react-hook-form\";\r\n//import {useHistory} from 'react-router-dom'\r\nimport {UserContext,ObjectContext} from '../../context'\r\nimport {toast} from 'bulma-toast'\r\nimport {ProductCreate} from './Products'\r\n// eslint-disable-next-line\r\nconst searchfacility={};\r\n\r\n\r\nexport default function ProductEntry() {\r\n    const {state}=useContext(ObjectContext) //,setState\r\n    // eslint-disable-next-line\r\n    const [selectedProductEntry,setSelectedProductEntry]=useState()\r\n    //const [showState,setShowState]=useState() //create|modify|detail\r\n    \r\n    return(\r\n        <section className= \"section remPadTop\">\r\n           {/*  <div className=\"level\">\r\n            <div className=\"level-item\"> <span className=\"is-size-6 has-text-weight-medium\">ProductEntry  Module</span></div>\r\n            </div> */}\r\n            <div className=\"columns \">\r\n            <div className=\"column is-6 \">\r\n                <ProductEntryList />\r\n                </div>\r\n            <div className=\"column is-6 \">\r\n                {(state.ProductEntryModule.show ==='create')&&<ProductEntryCreate />}\r\n                {(state.ProductEntryModule.show ==='detail')&&<ProductEntryDetail  />}\r\n                {(state.ProductEntryModule.show ==='modify')&&<ProductEntryModify ProductEntry={selectedProductEntry} />}\r\n               \r\n            </div>\r\n\r\n            </div>                            \r\n            </section>\r\n       \r\n    )\r\n    \r\n}\r\n\r\nexport function ProductEntryCreate(){\r\n   // const { register, handleSubmit,setValue} = useForm(); //, watch, errors, reset \r\n    const [error, setError] =useState(false)\r\n    const [success, setSuccess] =useState(false)\r\n    const [message,setMessage] = useState(\"\")\r\n    // eslint-disable-next-line\r\n    const [facility,setFacility] = useState()\r\n    const ProductEntryServ=client.service('productentry')\r\n    //const history = useHistory()\r\n    const {user} = useContext(UserContext) //,setUser\r\n    // eslint-disable-next-line\r\n    const [currentUser,setCurrentUser] = useState()\r\n    const [type,setType] = useState(\"Purchase Invoice\")\r\n    const [documentNo,setDocumentNo] = useState(\"\")\r\n    const [totalamount,setTotalamount] = useState(\"\")\r\n    const [productId,setProductId] = useState(\"\")\r\n    const [source,setSource] = useState(\"\")\r\n    const [date,setDate] = useState(\"\")\r\n    const [name,setName] = useState(\"\")\r\n    const [baseunit,setBaseunit] = useState(\"\")\r\n    const [quantity,setQuantity] = useState()\r\n    const [costprice,setCostprice] = useState()\r\n    const [productItem,setProductItem] = useState([])\r\n    const {state}=useContext(ObjectContext)\r\n    \r\n    const [productEntry,setProductEntry]=useState({\r\n        productitems:[],\r\n        date,\r\n        documentNo,\r\n        type,\r\n        totalamount,\r\n        source,\r\n\r\n    })\r\n \r\n    const productItemI={\r\n        productId,\r\n        name,\r\n        quantity,\r\n        costprice,\r\n        amount:quantity*costprice,\r\n        baseunit\r\n\r\n    }\r\n    // consider batchformat{batchno,expirydate,qtty,baseunit}\r\n    //consider baseunoit conversions\r\n    const getSearchfacility=(obj)=>{\r\n\r\n        setProductId(obj._id)\r\n        setName(obj.name)\r\n        setBaseunit(obj.baseunit)\r\n        \r\n       /*  setValue(\"facility\", obj._id,  {\r\n            shouldValidate: true,\r\n            shouldDirty: true\r\n        }) */\r\n    }\r\n    \r\n    useEffect(() => {\r\n        setCurrentUser(user)\r\n        //console.log(currentUser)\r\n        return () => {\r\n        \r\n        }\r\n    }, [user])\r\n\r\n    const handleChangeType=async (e)=>{\r\n        await setType(e.target.value)\r\n    }\r\n    const handleClickProd=async()=>{\r\n        await setSuccess(false)\r\n        setProductItem(\r\n            prevProd=>prevProd.concat(productItemI)\r\n        )\r\n        setName(\"\")\r\n        setBaseunit(\"\")\r\n        setQuantity(\"\")\r\n        setCostprice(\"\")\r\n       await setSuccess(true)\r\n       console.log(success)\r\n       console.log(productItem)\r\n    }\r\n  //check user for facility or get list of facility  \r\n   /*  useEffect(()=>{\r\n        //setFacility(user.activeProductEntry.FacilityId)//\r\n      if (!user.stacker){\r\n          console.log(currentUser)\r\n           /* setValue(\"facility\", user.currentEmployee.facilityDetail._id,  {\r\n            shouldValidate: true,\r\n            shouldDirty: true\r\n        })  \r\n\r\n      }\r\n    }) */\r\n\r\n    const resetform=()=>{\r\n     setType(\"Purchase Invoice\")\r\n    setDocumentNo(\"\")\r\n    setTotalamount(\"\")\r\n    setProductId(\"\")\r\n    setSource(\"\")\r\n    setDate(\"\")\r\n    setName(\"\")\r\n    setBaseunit()\r\n    setCostprice()\r\n    setProductItem([])\r\n    }\r\n\r\n    const onSubmit = async(e) =>{\r\n        e.preventDefault();\r\n        setMessage(\"\")\r\n        setError(false)\r\n        setSuccess(false)\r\n        await setProductEntry({\r\n            \r\n            date,\r\n            documentNo,\r\n            type,\r\n            totalamount,\r\n            source,\r\n        })\r\n        productEntry.productitems=productItem\r\n        productEntry.createdby=user._id\r\n        productEntry.transactioncategory=\"credit\"\r\n\r\n          console.log(\"b4 facility\",productEntry);\r\n          if (user.currentEmployee){\r\n         productEntry.facility=user.currentEmployee.facilityDetail._id  // or from facility dropdown\r\n          }else{\r\n            toast({\r\n                message: 'You can not add inventory to any organization',\r\n                type: 'is-danger',\r\n                dismissible: true,\r\n                pauseOnHover: true,\r\n              }) \r\n              return\r\n          }\r\n          if (state.StoreModule.selectedStore._id){\r\n            productEntry.storeId=state.StoreModule.selectedStore._id\r\n          }else{\r\n            toast({\r\n                message: 'You need to select a store before adding inventory',\r\n                type: 'is-danger',\r\n                dismissible: true,\r\n                pauseOnHover: true,\r\n              }) \r\n              return\r\n\r\n          }\r\n          console.log(\"b4 create\",productEntry);\r\n        ProductEntryServ.create(productEntry)\r\n        .then((res)=>{\r\n                //console.log(JSON.stringify(res))\r\n                resetform()\r\n               /*  setMessage(\"Created ProductEntry successfully\") */\r\n                setSuccess(true)\r\n                toast({\r\n                    message: 'ProductEntry created succesfully',\r\n                    type: 'is-success',\r\n                    dismissible: true,\r\n                    pauseOnHover: true,\r\n                  })\r\n                  setSuccess(false)\r\n                  setProductItem([])\r\n            })\r\n            .catch((err)=>{\r\n                toast({\r\n                    message: 'Error creating ProductEntry ' + err,\r\n                    type: 'is-danger',\r\n                    dismissible: true,\r\n                    pauseOnHover: true,\r\n                  })\r\n            })\r\n\r\n      } \r\n\r\n    \r\n\r\n    return (\r\n        <>\r\n            <div className=\"card card-overflow\">\r\n            <div className=\"card-header\">\r\n                <p className=\"card-header-title\">\r\n                    Create ProductEntry: Product Entry- Initialization, Purchase Invoice, Audit\r\n                </p>\r\n            </div>\r\n            <div className=\"card-content \">\r\n   \r\n            <form onSubmit={onSubmit}> {/* handleSubmit(onSubmit) */}\r\n            <div className=\"field is-horizontal\">\r\n            <div className=\"field-body\">\r\n            <div className=\"field\">    \r\n                <div className=\"control\">\r\n                    <div className=\"select is-small\">\r\n                        <select name=\"type\" value={type} onChange={handleChangeType}>\r\n                           <option value=\"\">Choose Type </option>\r\n                            <option value=\"Purchase Invoice\">Purchase Invoice </option>\r\n                            <option value=\"Initialization\">Initialization</option>\r\n                            <option value=\"Audit\">Audit</option>\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div className=\"field\">\r\n                    <p className=\"control has-icons-left has-icons-right\">\r\n                        <input className=\"input is-small\" /* ref={register({ required: true })} */ value={source} name=\"supplier\" type=\"text\" onChange={e=>setSource(e.target.value)} placeholder=\"Supplier\" />\r\n                        <span className=\"icon is-small is-left\">\r\n                            <i className=\"fas fa-hospital\"></i>\r\n                        </span>                    \r\n                    </p>\r\n                </div>\r\n           \r\n            </div>\r\n            </div> {/* horizontal end */}\r\n           {/*  <div className=\"field\">\r\n                <p className=\"control has-icons-left\"> // Audit/initialization/Purchase Invoice \r\n                    <input className=\"input is-small\"  ref={register({ required: true })} name=\"type\" type=\"text\" placeholder=\"Type of Product Entry\"/>\r\n                    <span className=\"icon is-small is-left\">\r\n                    <i className=\" fas fa-user-md \"></i>\r\n                    </span>\r\n                </p>\r\n            </div> */}\r\n               <div className=\"field is-horizontal\">\r\n               <div className=\"field-body\">\r\n               <div className=\"field\">\r\n                <p className=\"control has-icons-left has-icons-right\">\r\n                    <input className=\"input is-small\"  /* ref={register({ required: true })} */ value={date}  name=\"date\" type=\"text\" onChange={e=>setDate(e.target.value)} placeholder=\"Date\" />\r\n                    <span className=\"icon is-small is-left\">\r\n                        <i className=\"fas fa-map-signs\"></i>\r\n                    </span>\r\n                </p>\r\n            </div>\r\n            <div className=\"field\">\r\n                <p className=\"control has-icons-left\">\r\n                    <input className=\"input is-small\" /* ref={register} */ name=\"documentNo\" value={documentNo} type=\"text\" onChange={e=>setDocumentNo(e.target.value)} placeholder=\" Invoice Number\"/>\r\n                    <span className=\"icon is-small is-left\">\r\n                    <i className=\"fas fa-phone-alt\"></i>\r\n                    </span>\r\n                </p>\r\n            </div>\r\n            <div className=\"field\">\r\n                <p className=\"control has-icons-left\">\r\n                    <input className=\"input is-small\" /* ref={register({ required: true })} */ value={totalamount} name=\"totalamount\" type=\"text\" onChange={async e=> await setTotalamount(e.target.value)} placeholder=\" Total Amount\"/>\r\n                    <span className=\"icon is-small is-left\">\r\n                    <i className=\"fas fa-coins\"></i>\r\n                    </span>\r\n                </p>\r\n            </div>\r\n\r\n                </div> \r\n                </div> \r\n               \r\n                </form>   \r\n               \r\n           \r\n         {/* array of ProductEntry items */}\r\n        \r\n        <label className=\"label is-small\">Add Product Items:</label>\r\n         <div className=\"field is-horizontal\">\r\n            <div className=\"field-body\">\r\n            <div className=\"field is-expanded\"  /* style={ !user.stacker?{display:\"none\"}:{}} */ >\r\n                    <ProductSearch  getSearchfacility={getSearchfacility} clear={success} /> \r\n                    <p className=\"control has-icons-left \" style={{display:\"none\"}}>\r\n                        <input className=\"input is-small\" /* ref={register ({ required: true }) }  *//* add array no */  value={productId} name=\"productId\" type=\"text\" onChange={e=>setProductId(e.target.value)} placeholder=\"Product Id\" />\r\n                        <span className=\"icon is-small is-left\">\r\n                        <i className=\"fas  fa-map-marker-alt\"></i>\r\n                        </span>\r\n                    </p>\r\n                </div>\r\n                <div className=\"field\">\r\n                <p className=\"control has-icons-left\">\r\n                    <input className=\"input is-small\" /* ref={register({ required: true })} */ name=\"quantity\" value={quantity} type=\"text\" onChange={e=>setQuantity(e.target.value)} placeholder=\"Quantity\"  />\r\n                    <span className=\"icon is-small is-left\">\r\n                    <i className=\"fas fa-envelope\"></i>\r\n                    </span>\r\n                </p>\r\n        <label >{baseunit}</label>\r\n            </div> \r\n            <div className=\"field\">\r\n                <p className=\"control has-icons-left\">\r\n                    <input className=\"input is-small\" /* ref={register({ required: true })} */ name=\"costprice\" value={costprice} type=\"text\" onChange={e=>setCostprice(e.target.value)} placeholder=\"Cost Price\"  />\r\n                    <span className=\"icon is-small is-left\">\r\n                    <i className=\"fas fa-dollar-sign\"></i>\r\n                    </span>\r\n                </p>\r\n            </div> \r\n            <div className=\"field\">\r\n            <p className=\"control\">\r\n                    <button className=\"button is-info is-small  is-pulled-right\">\r\n                      <span className=\"is-small\" onClick={handleClickProd}> +</span>\r\n                    </button>\r\n                </p>\r\n            </div>\r\n            </div>\r\n         </div>\r\n            \r\n       {(productItem.length>0) && <div>\r\n            <label>Product Items:</label>\r\n         <table className=\"table is-striped  is-hoverable is-fullwidth is-scrollable \">\r\n                <thead>\r\n                    <tr>\r\n                    <th><abbr title=\"Serial No\">S/No</abbr></th>\r\n                    <th><abbr title=\"Type\">Name</abbr></th>\r\n                    <th><abbr title=\"Type\">Quanitity</abbr></th>\r\n                    <th><abbr title=\"Document No\">Unit</abbr></th>\r\n                    <th><abbr title=\"Cost Price\">Cost Price</abbr></th>\r\n                    <th><abbr title=\"Cost Price\">Amount</abbr></th>\r\n                    <th><abbr title=\"Actions\">Actions</abbr></th>\r\n                    </tr>\r\n                </thead>\r\n                <tfoot>\r\n                    \r\n                </tfoot>\r\n                <tbody>\r\n                   { productItem.map((ProductEntry, i)=>(\r\n\r\n                        <tr key={i}>\r\n                        <th>{i+1}</th>\r\n                        <td>{ProductEntry.name}</td>\r\n                        <th>{ProductEntry.quantity}</th>\r\n                        <td>{ProductEntry.baseunit}</td>\r\n                        <td>{ProductEntry.costprice}</td>\r\n                        <td>{ProductEntry.amount}</td>\r\n                        <td><span className=\"showAction\"  >x</span></td>\r\n                        \r\n                        </tr>\r\n\r\n                    ))}\r\n                </tbody>\r\n                </table>\r\n                <div className=\"field mt-2\">\r\n                <p className=\"control\">\r\n                    <button className=\"button is-success is-small\" disabled={!productItem.length>0} onClick={onSubmit}>\r\n                        Create\r\n                    </button>\r\n                </p>\r\n                </div>\r\n                </div>\r\n           \r\n            }\r\n            \r\n            \r\n            </div>\r\n            </div>\r\n        </>\r\n    )\r\n   \r\n}\r\n\r\nexport function ProductEntryList(){\r\n   // const { register, handleSubmit, watch, errors } = useForm();\r\n    // eslint-disable-next-line\r\n    const [error, setError] =useState(false)\r\n     // eslint-disable-next-line\r\n    const [success, setSuccess] =useState(false)\r\n     // eslint-disable-next-line\r\n   const [message, setMessage] = useState(\"\") \r\n    const ProductEntryServ=client.service('productentry')\r\n    //const history = useHistory()\r\n   // const {user,setUser} = useContext(UserContext)\r\n    const [facilities,setFacilities]=useState([])\r\n     // eslint-disable-next-line\r\n   const [selectedProductEntry, setSelectedProductEntry]=useState() //\r\n    // eslint-disable-next-line\r\n    const {state,setState}=useContext(ObjectContext)\r\n    // eslint-disable-next-line\r\n    const {user,setUser}=useContext(UserContext)\r\n\r\n\r\n\r\n    const handleCreateNew = async()=>{\r\n        const    newProductEntryModule={\r\n            selectedProductEntry:{},\r\n            show :'create'\r\n            }\r\n       await setState((prevstate)=>({...prevstate, ProductEntryModule:newProductEntryModule}))\r\n       //console.log(state)\r\n        \r\n\r\n    }\r\n    const handleRow= async(ProductEntry)=>{\r\n        //console.log(\"b4\",state)\r\n\r\n        //console.log(\"handlerow\",ProductEntry)\r\n\r\n        await setSelectedProductEntry(ProductEntry)\r\n\r\n        const    newProductEntryModule={\r\n            selectedProductEntry:ProductEntry,\r\n            show :'detail'\r\n        }\r\n       await setState((prevstate)=>({...prevstate, ProductEntryModule:newProductEntryModule}))\r\n       //console.log(state)\r\n\r\n    }\r\n\r\n   const handleSearch=(val)=>{\r\n       const field='name'\r\n       console.log(val)\r\n       ProductEntryServ.find({query: {\r\n                [field]: {\r\n                    $regex:val,\r\n                    $options:'i'\r\n                   \r\n                },\r\n                storeId:state.StoreModule.selectedStore._id,\r\n               facility:user.currentEmployee.facilityDetail._id || \"\",\r\n                $limit:10,\r\n                $sort: {\r\n                    createdAt: -1\r\n                  }\r\n                    }}).then((res)=>{\r\n                console.log(res)\r\n               setFacilities(res.data)\r\n                setMessage(\" ProductEntry  fetched successfully\")\r\n                setSuccess(true) \r\n            })\r\n            .catch((err)=>{\r\n                console.log(err)\r\n                setMessage(\"Error fetching ProductEntry, probable network issues \"+ err )\r\n                setError(true)\r\n            })\r\n        }\r\n   \r\n        const getFacilities= async()=>{\r\n            if (user.currentEmployee){\r\n            \r\n        const findProductEntry= await ProductEntryServ.find(\r\n                {query: {\r\n                    facility:user.currentEmployee.facilityDetail._id,\r\n                    storeId:state.StoreModule.selectedStore._id,\r\n                    $limit:20,\r\n                    $sort: {\r\n                        createdAt: -1\r\n                    }\r\n                    }})\r\n\r\n         await setFacilities(findProductEntry.data)\r\n                }\r\n                else {\r\n                    if (user.stacker){\r\n                        /* toast({\r\n                            message: 'You do not qualify to view this',\r\n                            type: 'is-danger',\r\n                            dismissible: true,\r\n                            pauseOnHover: true,\r\n                          }) \r\n                          return */\r\n                        const findProductEntry= await ProductEntryServ.find(\r\n                            {query: {\r\n                                \r\n                                $limit:20,\r\n                                $sort: {\r\n                                    createdAt: -1\r\n                                }\r\n                                }})\r\n            \r\n                    await setFacilities(findProductEntry.data)\r\n\r\n                    }\r\n                }\r\n          /*   .then((res)=>{\r\n                console.log(res)\r\n                    setFacilities(res.data)\r\n                    setMessage(\" ProductEntry  fetched successfully\")\r\n                    setSuccess(true)\r\n                })\r\n                .catch((err)=>{\r\n                    setMessage(\"Error creating ProductEntry, probable network issues \"+ err )\r\n                    setError(true)\r\n                }) */\r\n            }\r\n            \r\n            useEffect(() => {\r\n                setTimeout(() => {\r\n                    console.log(\"happy birthday\")\r\n                    //getFacilities(user)\r\n                }, 200);\r\n\r\n                return () => {\r\n                    \r\n\r\n                }\r\n            },[])\r\n\r\n            useEffect(() => {\r\n               \r\n                if (!state.StoreModule.selectedStore){\r\n                    toast({\r\n                        message: 'kindly select a store',\r\n                        type: 'is-danger',\r\n                        dismissible: true,\r\n                        pauseOnHover: true,\r\n                      }) \r\n                      return\r\n                    getFacilities()\r\n\r\n                }else{\r\n                    /* const localUser= localStorage.getItem(\"user\")\r\n                    const user1=JSON.parse(localUser)\r\n                    console.log(localUser)\r\n                    console.log(user1)\r\n                    fetchUser(user1)\r\n                    console.log(user)\r\n                    getFacilities(user) */\r\n                }\r\n                ProductEntryServ.on('created', (obj)=>getFacilities())\r\n                ProductEntryServ.on('updated', (obj)=>getFacilities())\r\n                ProductEntryServ.on('patched', (obj)=>getFacilities())\r\n                ProductEntryServ.on('removed', (obj)=>getFacilities())\r\n                return () => {\r\n                \r\n                }\r\n            },[])\r\n\r\n            useEffect(() => {\r\n                getFacilities()\r\n                console.log(\"store changed\")\r\n                return () => {\r\n                   \r\n                }\r\n            }, [state.StoreModule.selectedStore])\r\n    //todo: pagination and vertical scroll bar\r\n\r\n    return(\r\n        <>\r\n           {state.StoreModule.selectedStore?( <>  \r\n                <div className=\"level\">\r\n                    <div className=\"level-left\">\r\n                        <div className=\"level-item\">\r\n                            <div className=\"field\">\r\n                                <p className=\"control has-icons-left  \">\r\n                                    <DebounceInput className=\"input is-small \" \r\n                                        type=\"text\" placeholder=\"Search ProductEntry\"\r\n                                        minLength={3}\r\n                                        debounceTimeout={400}\r\n                                        onChange={(e)=>handleSearch(e.target.value)} />\r\n                                    <span className=\"icon is-small is-left\">\r\n                                        <i className=\"fas fa-search\"></i>\r\n                                    </span>\r\n                                </p>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"level-item\"> <span className=\"is-size-6 has-text-weight-medium\">List of Product Additions to Inventory </span></div>\r\n                    <div className=\"level-right\">\r\n                        <div className=\"level-item\"> \r\n                            <div className=\"level-item\"><div className=\"button is-success is-small\" onClick={handleCreateNew}>New</div></div>\r\n                        </div>\r\n                    </div>\r\n\r\n                </div>\r\n                <div className=\"table-container pullup \">\r\n                                <table className=\"table is-striped is-narrow is-hoverable is-fullwidth is-scrollable \">\r\n                                    <thead>\r\n                                        <tr>\r\n                                        <th><abbr title=\"Serial No\">S/No</abbr></th>\r\n                                        <th><abbr title=\"Date\">Date</abbr></th>\r\n                                        <th><abbr title=\"Type\">Type</abbr></th>\r\n                                        <th>Source</th>\r\n                                        <th><abbr title=\"Document No\">Document No</abbr></th>\r\n                                        <th><abbr title=\"Total Amount\">Total Amount</abbr></th>\r\n                                        <th><abbr title=\"Enteredby\">Entered By</abbr></th>\r\n                                        <th><abbr title=\"Actions\">Actions</abbr></th>\r\n                                        </tr>\r\n                                    </thead>\r\n                                    <tfoot>\r\n                                        \r\n                                    </tfoot>\r\n                                    <tbody>\r\n                                        {facilities.map((ProductEntry, i)=>(\r\n\r\n                                            <tr key={ProductEntry._id} onClick={()=>handleRow(ProductEntry)}>\r\n                                            <th>{i+1}</th>\r\n                                            <td>{ProductEntry.date}</td>\r\n                                            <th>{ProductEntry.type}</th>\r\n                                            <td>{ProductEntry.source}</td>\r\n                                            <td>{ProductEntry.documentNo}</td>\r\n                                            <td>{ProductEntry.totalamount}</td>\r\n                                            <td>{ProductEntry.enteredby}</td>\r\n                                            <td><span className=\"showAction\"  >...</span></td>\r\n                                           \r\n                                            </tr>\r\n\r\n                                        ))}\r\n                                    </tbody>\r\n                                    </table>\r\n                                    \r\n                </div>              \r\n            </>):<div>loading... Choose a Store</div>}\r\n            </>\r\n              \r\n    )\r\n    }\r\n\r\n\r\nexport function ProductEntryDetail(){\r\n    //const { register, handleSubmit, watch, setValue } = useForm(); //errors,\r\n     // eslint-disable-next-line\r\n    const [error, setError] =useState(false) //, \r\n    //const [success, setSuccess] =useState(false)\r\n     // eslint-disable-next-line\r\n    const [message, setMessage] = useState(\"\") //,\r\n    //const ProductEntryServ=client.service('/ProductEntry')\r\n    //const history = useHistory()\r\n    //const {user,setUser} = useContext(UserContext)\r\n    const {state,setState} = useContext(ObjectContext)\r\n\r\n   \r\n\r\n   const ProductEntry =state.ProductEntryModule.selectedProductEntry \r\n\r\n    const handleEdit= async()=>{\r\n        const    newProductEntryModule={\r\n            selectedProductEntry:ProductEntry,\r\n            show :'modify'\r\n        }\r\n       await setState((prevstate)=>({...prevstate, ProductEntryModule:newProductEntryModule}))\r\n       //console.log(state)\r\n       \r\n    }\r\n \r\n    return (\r\n        <>\r\n        <div className=\"card \">\r\n            <div className=\"card-header\">\r\n                <p className=\"card-header-title\">\r\n                    ProductEntry Details\r\n                </p>\r\n            </div>\r\n            <div className=\"card-content vscrollable\">\r\n           \r\n                <table> \r\n                <tbody>         \r\n                <tr>\r\n                    <td>\r\n                      <label className=\"label is-small\"> <span className=\"icon is-small is-left\">\r\n                            <i className=\"fas fa-hospital\"></i>\r\n                        </span>                    \r\n                        Type\r\n                        </label>\r\n                    </td>\r\n                    <td>\r\n                        <span className=\"is-size-7 padleft\"   name=\"name\"> {ProductEntry.type} </span>\r\n                    </td>\r\n                    <td>\r\n\r\n                    </td>\r\n                    <td>\r\n                        <label className=\"label is-small padleft\"><span className=\"icon is-small is-left\">\r\n                            <i className=\"fas fa-map-signs\"></i>\r\n                        </span>Supplier:\r\n                        </label>\r\n                    </td>\r\n                    <td>\r\n                        <span className=\"is-size-7 padleft\"   name=\"ProductEntryType\">{ProductEntry.source} </span> \r\n                    </td>\r\n                </tr>\r\n                <tr>\r\n                    <td>\r\n                        <label className=\"label is-small\"> <span className=\"icon is-small is-left\">\r\n                        <i className=\"fas fa-hospital\"></i>\r\n                        </span>                    \r\n                        Date:\r\n                        </label>\r\n                    </td>\r\n                    <td>\r\n                        <span className=\"is-size-7 padleft\"   name=\"name\"> {ProductEntry.date} </span>\r\n                    </td>\r\n                    <td>\r\n                                \r\n                    </td>\r\n                    <td>\r\n                        <label className=\"label is-small padleft\"><span className=\"icon is-small is-left\">\r\n                            <i className=\"fas fa-map-signs\"></i>\r\n                        </span>Invoice No:\r\n                        </label>\r\n                    </td>\r\n                    \r\n                    <td>\r\n                         <span className=\"is-size-7 padleft\"   name=\"ProductEntryType\">{ProductEntry.documentNo} </span> \r\n                    </td>\r\n                </tr>\r\n                <tr>\r\n                    <td>\r\n                \r\n                        <label className=\"label is-small\"> <span className=\"icon is-small is-left\">\r\n                        <i className=\"fas fa-hospital\"></i>\r\n                    </span>            \r\n                        Total Amount:\r\n                    </label>\r\n                    </td>\r\n                    <td>\r\n                        <span className=\"is-size-7 padleft\"   name=\"name\"> {ProductEntry.totalamount} </span>\r\n                    </td>\r\n                </tr>\r\n\r\n                </tbody> \r\n            </table> \r\n            <label className=\"label is-size-7 mt-2\">Product Items:</label>\r\n         <table className=\"table is-striped  is-hoverable is-fullwidth is-scrollable \">\r\n                <thead>\r\n                    <tr>\r\n                    <th><abbr title=\"Serial No\">S/No</abbr></th>\r\n                    <th><abbr title=\"Type\">Name</abbr></th>\r\n                    <th><abbr title=\"Type\">Quanitity</abbr></th>\r\n                    <th><abbr title=\"Document No\">Unit</abbr></th>\r\n                    <th><abbr title=\"Cost Price\">Cost Price</abbr></th>\r\n                    <th><abbr title=\"Cost Price\">Amount</abbr></th>\r\n                   \r\n                    </tr>\r\n                </thead>\r\n                <tfoot>\r\n                    \r\n                </tfoot>\r\n                <tbody>\r\n                   { ProductEntry.productitems.map((ProductEntry, i)=>(\r\n\r\n                        <tr key={i}>\r\n                        <th>{i+1}</th>\r\n                        <td>{ProductEntry.name}</td>\r\n                        <th>{ProductEntry.quantity}</th>\r\n                        <td>{ProductEntry.baseunit}</td>\r\n                        <td>{ProductEntry.costprice}</td>\r\n                        <td>{ProductEntry.amount}</td>\r\n                        \r\n                        \r\n                        </tr>\r\n\r\n                    ))}\r\n                </tbody>\r\n                </table>\r\n                  {/*   <tr>\r\n                    <td>\r\n            <label className=\"label is-small\"><span className=\"icon is-small is-left\">\r\n                    <i className=\"fas fa-map-marker-alt\"></i>\r\n                    </span>Profession: \r\n                \r\n                    \r\n                    </label>\r\n                    </td>\r\n                <td>\r\n                <span className=\"is-size-7 padleft \"  name=\"ProductEntryCity\">{ProductEntry.profession}</span> \r\n                </td>\r\n                </tr>\r\n                    <tr>\r\n            <td>\r\n            <label className=\"label is-small\"><span className=\"icon is-small is-left\">\r\n                    <i className=\"fas fa-phone-alt\"></i>\r\n                    </span>Phone:           \r\n                    \r\n                        </label>\r\n                        </td>\r\n                        <td>\r\n                        <span className=\"is-size-7 padleft \"  name=\"ProductEntryContactPhone\" >{ProductEntry.phone}</span>\r\n                        </td>\r\n                  </tr>\r\n                    <tr><td>\r\n            \r\n            <label className=\"label is-small\"><span className=\"icon is-small is-left\">\r\n                    <i className=\"fas fa-envelope\"></i>\r\n                    </span>Email:                     \r\n                    \r\n                         </label></td><td>\r\n                         <span className=\"is-size-7 padleft \"  name=\"ProductEntryEmail\" >{ProductEntry.email}</span>\r\n                         </td>\r\n             \r\n                </tr>\r\n                    <tr>\r\n            <td>\r\n            <label className=\"label is-small\"> <span className=\"icon is-small is-left\">\r\n                    <i className=\"fas fa-user-md\"></i></span>Department:\r\n                    \r\n                    </label></td>\r\n                    <td>\r\n                    <span className=\"is-size-7 padleft \"  name=\"ProductEntryOwner\">{ProductEntry.department}</span>\r\n                    </td>\r\n               \r\n                </tr>\r\n                    <tr>\r\n            <td>\r\n            <label className=\"label is-small\"> <span className=\"icon is-small is-left\">\r\n                    <i className=\"fas fa-hospital-symbol\"></i>\r\n                    </span>Departmental Unit:              \r\n                    \r\n                </label></td>\r\n                <td>\r\n                <span className=\"is-size-7 padleft \"  name=\"ProductEntryType\">{ProductEntry.deptunit}</span>\r\n                </td>\r\n              \r\n                </tr> */}\r\n                    \r\n          {/*   <div className=\"field\">\r\n             <label className=\"label is-small\"><span className=\"icon is-small is-left\">\r\n                    <i className=\"fas fa-clinic-medical\"></i>\r\n                    </span>Category:              \r\n                    <span className=\"is-size-7 padleft \"  name= \"ProductEntryCategory\">{ProductEntry.ProductEntryCategory}</span>\r\n                </label>\r\n                 </div> */}\r\n\r\n            \r\n           \r\n           {/*  <div className=\"field mt-2\">\r\n                <p className=\"control\">\r\n                    <button className=\"button is-success is-small\" onClick={handleEdit}>\r\n                        Edit\r\n                    </button>\r\n                </p>\r\n            </div>\r\n            { error && <div className=\"message\"> {message}</div>} */}\r\n           \r\n        </div>\r\n        </div>\r\n        </>\r\n    )\r\n   \r\n   \r\n}\r\n\r\nexport function ProductEntryModify(){\r\n    const { register, handleSubmit, setValue,reset, errors } = useForm(); //watch, errors,\r\n    // eslint-disable-next-line \r\n    const [error, setError] =useState(false)\r\n    // eslint-disable-next-line \r\n    const [success, setSuccess] =useState(false)\r\n    // eslint-disable-next-line \r\n    const [message,setMessage] = useState(\"\")\r\n    // eslint-disable-next-line \r\n    const ProductEntryServ=client.service('productentry')\r\n    //const history = useHistory()\r\n     // eslint-disable-next-line\r\n    const {user} = useContext(UserContext)\r\n    const {state,setState} = useContext(ObjectContext)\r\n\r\n    const ProductEntry =state.ProductEntryModule.selectedProductEntry \r\n\r\n        useEffect(() => {\r\n            setValue(\"name\", ProductEntry.name,  {\r\n                shouldValidate: true,\r\n                shouldDirty: true\r\n            })\r\n            setValue(\"ProductEntryType\", ProductEntry.ProductEntryType,  {\r\n                shouldValidate: true,\r\n                shouldDirty: true\r\n            })\r\n           /*  setValue(\"profession\", ProductEntry.profession,  {\r\n                shouldValidate: true,\r\n                shouldDirty: true\r\n            })\r\n            setValue(\"phone\", ProductEntry.phone,  {\r\n                shouldValidate: true,\r\n                shouldDirty: true\r\n            })\r\n            setValue(\"email\", ProductEntry.email,  {\r\n                shouldValidate: true,\r\n                shouldDirty: true\r\n            })\r\n            setValue(\"department\", ProductEntry.department,  {\r\n                shouldValidate: true,\r\n                shouldDirty: true\r\n            })\r\n            setValue(\"deptunit\", ProductEntry.deptunit,  {\r\n                shouldValidate: true,\r\n                shouldDirty: true\r\n            }) */\r\n          /*   setValue(\"ProductEntryCategory\", ProductEntry.ProductEntryCategory,  {\r\n                shouldValidate: true,\r\n                shouldDirty: true\r\n            }) */\r\n            \r\n            return () => {\r\n                \r\n            }\r\n        })\r\n\r\n   const handleCancel=async()=>{\r\n    const    newProductEntryModule={\r\n        selectedProductEntry:{},\r\n        show :'create'\r\n      }\r\n   await setState((prevstate)=>({...prevstate, ProductEntryModule:newProductEntryModule}))\r\n   //console.log(state)\r\n           }\r\n\r\n\r\n        const changeState =()=>{\r\n        const    newProductEntryModule={\r\n            selectedProductEntry:{},\r\n            show :'create'\r\n        }\r\n        setState((prevstate)=>({...prevstate, ProductEntryModule:newProductEntryModule}))\r\n\r\n        }\r\n    const handleDelete=async()=>{\r\n        let conf=window.confirm(\"Are you sure you want to delete this data?\")\r\n        \r\n        const dleteId=ProductEntry._id\r\n        if (conf){\r\n             \r\n        ProductEntryServ.remove(dleteId)\r\n        .then((res)=>{\r\n                //console.log(JSON.stringify(res))\r\n                reset();\r\n               /*  setMessage(\"Deleted ProductEntry successfully\")\r\n                setSuccess(true)\r\n                changeState()\r\n               setTimeout(() => {\r\n                setSuccess(false)\r\n                }, 200); */\r\n                toast({\r\n                    message: 'ProductEntry deleted succesfully',\r\n                    type: 'is-success',\r\n                    dismissible: true,\r\n                    pauseOnHover: true,\r\n                  })\r\n                changeState()\r\n            })\r\n            .catch((err)=>{\r\n               // setMessage(\"Error deleting ProductEntry, probable network issues \"+ err )\r\n               // setError(true)\r\n                toast({\r\n                    message: \"Error deleting ProductEntry, probable network issues or \"+ err,\r\n                    type: 'is-danger',\r\n                    dismissible: true,\r\n                    pauseOnHover: true,\r\n                  })\r\n            })\r\n        }\r\n    }\r\n        \r\n\r\n   /* ()=> setValue(\"firstName\", \"Bill\", , {\r\n            shouldValidate: true,\r\n            shouldDirty: true\r\n          })) */\r\n    const onSubmit = (data,e) =>{\r\n        e.preventDefault();\r\n        \r\n        setSuccess(false)\r\n        console.log(data)\r\n        data.facility=ProductEntry.facility\r\n          //console.log(data);\r\n          \r\n        ProductEntryServ.patch(ProductEntry._id,data)\r\n        .then((res)=>{\r\n                //console.log(JSON.stringify(res))\r\n               // e.target.reset();\r\n               // setMessage(\"updated ProductEntry successfully\")\r\n                 toast({\r\n                    message: 'ProductEntry updated succesfully',\r\n                    type: 'is-success',\r\n                    dismissible: true,\r\n                    pauseOnHover: true,\r\n                  })\r\n                  \r\n                changeState()\r\n\r\n            })\r\n            .catch((err)=>{\r\n                //setMessage(\"Error creating ProductEntry, probable network issues \"+ err )\r\n               // setError(true)\r\n                toast({\r\n                    message: \"Error updating ProductEntry, probable network issues or \"+ err,\r\n                    type: 'is-danger',\r\n                    dismissible: true,\r\n                    pauseOnHover: true,\r\n                  })\r\n            })\r\n\r\n      } \r\n     \r\n      \r\n    return (\r\n        \r\n        <>\r\n        <div className=\"card \">\r\n            <div className=\"card-header\">\r\n                <p className=\"card-header-title\">\r\n                    ProductEntry Details-Modify\r\n                </p>\r\n            </div>\r\n            <div className=\"card-content vscrollable\">\r\n           \r\n            <form onSubmit={handleSubmit(onSubmit)}>\r\n                <div className=\"field\">\r\n                    <label className=\"label is-small\"> Name\r\n                    <p className=\"control has-icons-left has-icons-right\">\r\n                        <input className=\"input  is-small\" ref={register({ required: true })}  name=\"name\" type=\"text\" placeholder=\"Name\" />\r\n                        <span className=\"icon is-small is-left\">\r\n                            <i className=\"fas fa-hospital\"></i>\r\n                        </span>                    \r\n                    </p>\r\n                    </label>\r\n                    </div>\r\n                <div className=\"field\">\r\n                <label className=\"label is-small\">ProductEntry Type\r\n                    <p className=\"control has-icons-left has-icons-right\">\r\n                    <input className=\"input is-small \" ref={register({ required: true })} disabled name=\"ProductEntryType\" type=\"text\" placeholder=\"ProductEntry Type\" />\r\n                    <span className=\"icon is-small is-left\">\r\n                        <i className=\"fas fa-map-signs\"></i>\r\n                    </span>\r\n                    \r\n                </p>\r\n                </label>\r\n                </div>\r\n            {/* <div className=\"field\">\r\n            <label className=\"label is-small\">Profession\r\n                <p className=\"control has-icons-left\">\r\n                    <input className=\"input is-small\" ref={register({ required: true })} name=\"profession\" type=\"text\" placeholder=\"Profession\"/>\r\n                    <span className=\"icon is-small is-left\">\r\n                    <i className=\"fas fa-map-marker-alt\"></i>\r\n                    </span>\r\n                </p>\r\n                </label>\r\n                </div>\r\n            <div className=\"field\">\r\n            <label className=\"label is-small\">Phone\r\n                <p className=\"control has-icons-left\">\r\n                    <input className=\"input is-small\" ref={register({ required: true })} name=\"phone\" type=\"text\" placeholder=\"Phone No\"/>\r\n                    <span className=\"icon is-small is-left\">\r\n                    <i className=\"fas fa-phone-alt\"></i>\r\n                    </span>\r\n                </p>\r\n                </label>\r\n                 </div>\r\n            <div className=\"field\">\r\n            <label className=\"label is-small\">Email\r\n                <p className=\"control has-icons-left\">\r\n                    <input className=\"input is-small\" ref={register({ required: true })} name=\"email\" type=\"email\" placeholder=\"ProductEntry Email\"/>\r\n                    <span className=\"icon is-small is-left\">\r\n                    <i className=\"fas fa-envelope\"></i>\r\n                    </span>\r\n                </p>\r\n                </label>\r\n                </div>\r\n            <div className=\"field\">\r\n            <label className=\"label is-small\">Department\r\n                <p className=\"control has-icons-left\">\r\n                    <input className=\"input is-small\" ref={register({ required: true })} name=\"department\" type=\"text\" placeholder=\"Department\"/>\r\n                    <span className=\"icon is-small is-left\">\r\n                    <i className=\"fas fa-user-md\"></i>\r\n                    </span>\r\n                </p>\r\n                </label>\r\n                {errors.department && <span>This field is required</span>}\r\n                </div>\r\n            <div className=\"field\">\r\n            <label className=\"label is-small\">Departmental Unit\r\n                <p className=\"control has-icons-left\">\r\n                    <input className=\"input is-small\" ref={register({ required: true })} name=\"deptunit\" type=\"text\" placeholder=\"Departmental Unit\"/>\r\n                    <span className=\"icon is-small is-left\">\r\n                    <i className=\"fas fa-hospital-symbol\"></i>\r\n                    </span>\r\n                </p>\r\n                </label>\r\n                </div> */}\r\n           {/*  <div className=\"field\">\r\n            <label className=\"label is-small\">Category\r\n                <p className=\"control has-icons-left\">\r\n                    <input className=\"input is-small\" ref={register({ required: true })} name=\"ProductEntryCategory\" type=\"text\" placeholder=\"ProductEntry Category\"/>\r\n                    <span className=\"icon is-small is-left\">\r\n                    <i className=\"fas fa-clinic-medical\"></i>\r\n                    </span>\r\n                </p>\r\n                </label>\r\n            </div> */}\r\n           \r\n           \r\n            </form>\r\n            \r\n            <div className=\"field  is-grouped mt-2\" >\r\n                <p className=\"control\">\r\n                    <button type=\"submit\" className=\"button is-success is-small\" onClick={handleSubmit(onSubmit)}>\r\n                        Save\r\n                    </button>\r\n                </p>\r\n                <p className=\"control\">\r\n                    <button className=\"button is-warning is-small\" onClick={handleCancel}>\r\n                        Cancel\r\n                    </button>\r\n                </p>\r\n                <p className=\"control\">\r\n                    <button className=\"button is-danger is-small\" onClick={()=>handleDelete()} type=\"delete\">\r\n                       Delete\r\n                    </button>\r\n                </p>\r\n            </div>\r\n        </div>\r\n        </div>\r\n        </>\r\n    )\r\n   \r\n   \r\n                \r\n}   \r\n\r\nexport  function ProductSearch({getSearchfacility,clear}) {\r\n    \r\n    const productServ=client.service('products')\r\n    const [facilities,setFacilities]=useState([])\r\n     // eslint-disable-next-line\r\n     const [searchError, setSearchError] =useState(false)\r\n     // eslint-disable-next-line\r\n    const [showPanel, setShowPanel] =useState(false)\r\n     // eslint-disable-next-line\r\n   const [searchMessage, setSearchMessage] = useState(\"\") \r\n   // eslint-disable-next-line \r\n   const [simpa,setSimpa]=useState(\"\")\r\n   // eslint-disable-next-line \r\n   const [chosen,setChosen]=useState(false)\r\n   // eslint-disable-next-line \r\n   const [count,setCount]=useState(0)\r\n   const inputEl=useRef(null)\r\n   const [val,setVal]=useState(\"\")\r\n    const [productModal,setProductModal]=useState(false)\r\n\r\n   const handleRow= async(obj)=>{\r\n        await setChosen(true)\r\n        //alert(\"something is chaning\")\r\n       getSearchfacility(obj)\r\n       \r\n       await setSimpa(obj.name)\r\n       \r\n        // setSelectedFacility(obj)\r\n        setShowPanel(false)\r\n        await setCount(2)\r\n        /* const    newfacilityModule={\r\n            selectedFacility:facility,\r\n            show :'detail'\r\n        }\r\n   await setState((prevstate)=>({...prevstate, facilityModule:newfacilityModule})) */\r\n   //console.log(state)\r\n}\r\n    const handleBlur=async(e)=>{\r\n         if (count===2){\r\n             console.log(\"stuff was chosen\")\r\n         }\r\n       \r\n       /*  console.log(\"blur\")\r\n         setShowPanel(false)\r\n        console.log(JSON.stringify(simpa))\r\n        if (simpa===\"\"){\r\n            console.log(facilities.length)\r\n            setSimpa(\"abc\")\r\n            setSimpa(\"\")\r\n            setFacilities([])\r\n            inputEl.current.setValue=\"\"\r\n        }\r\n        console.log(facilities.length)\r\n        console.log(inputEl.current) */\r\n    }\r\n    const handleSearch=async(value)=>{\r\n        setVal(value)\r\n        if (value===\"\"){\r\n            setShowPanel(false)\r\n            return\r\n        }\r\n        const field='name' //field variable\r\n\r\n       \r\n        if (value.length>=3 ){\r\n            productServ.find({query: {     //service\r\n                 [field]: {\r\n                     $regex:value,\r\n                     $options:'i'\r\n                    \r\n                 },\r\n                 $limit:10,\r\n                 $sort: {\r\n                     createdAt: -1\r\n                   }\r\n                     }}).then((res)=>{\r\n              console.log(\"product  fetched successfully\") \r\n              console.log(res.data) \r\n                setFacilities(res.data)\r\n                 setSearchMessage(\" product  fetched successfully\")\r\n                 setShowPanel(true)\r\n             })\r\n             .catch((err)=>{\r\n                toast({\r\n                    message: 'Error creating ProductEntry ' + err,\r\n                    type: 'is-danger',\r\n                    dismissible: true,\r\n                    pauseOnHover: true,\r\n                  })\r\n             })\r\n         }\r\n        else{\r\n            console.log(\"less than 3 \")\r\n            console.log(val)\r\n            setShowPanel(false)\r\n            await setFacilities([])\r\n            console.log(facilities)\r\n        }\r\n    }\r\n\r\n    const handleAddproduct =()=>{\r\n        setProductModal(true) \r\n    }\r\n    const handlecloseModal =()=>{\r\n        setProductModal(false)\r\n        handleSearch(val)\r\n    }\r\n    useEffect(() => {\r\n       if (clear){\r\n           console.log(\"success has changed\",clear)\r\n           setSimpa(\"\")\r\n       }\r\n        return () => {\r\n            \r\n        }\r\n    }, [clear] )\r\n    return (\r\n        <div>\r\n            <div className=\"field\">\r\n                <div className=\"control has-icons-left  \">\r\n                    <div className={`dropdown ${showPanel?\"is-active\":\"\"}`}>\r\n                        <div className=\"dropdown-trigger\">\r\n                            <DebounceInput className=\"input is-small \" \r\n                                type=\"text\" placeholder=\"Search Product\"\r\n                                value={simpa}\r\n                                minLength={3}\r\n                                debounceTimeout={400}\r\n                                onBlur={(e)=>handleBlur(e)}\r\n                                onChange={(e)=>handleSearch(e.target.value)}\r\n                                inputRef={inputEl}\r\n                                  />\r\n                            <span className=\"icon is-small is-left\">\r\n                                <i className=\"fas fa-search\"></i>\r\n                            </span>\r\n                        </div>\r\n                        {/* {searchError&&<div>{searchMessage}</div>} */}\r\n                        <div className=\"dropdown-menu\" >\r\n                            <div className=\"dropdown-content\">\r\n                          { facilities.length>0?\"\":<div className=\"dropdown-item\" onClick={handleAddproduct}> <span>Add {val} to product list</span> </div>}\r\n\r\n                              {facilities.map((facility, i)=>(\r\n                                    \r\n                                    <div className=\"dropdown-item\" key={facility._id} onClick={()=>handleRow(facility)}>\r\n                                        \r\n                                        <span>{facility.name}</span>\r\n                                        \r\n                                    </div>\r\n                                    \r\n                                    ))}\r\n                                    \r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div className={`modal ${productModal?\"is-active\":\"\"}` }>\r\n                                    <div className=\"modal-background\"></div>\r\n                                    <div className=\"modal-card\">\r\n                                        <header className=\"modal-card-head\">\r\n                                        <p className=\"modal-card-title\">Choose Store</p>\r\n                                        <button className=\"delete\" aria-label=\"close\"  onClick={handlecloseModal}></button>\r\n                                        </header>\r\n                                        <section className=\"modal-card-body\">\r\n                                        {/* <StoreList standalone=\"true\" /> */}\r\n                                        <ProductCreate />\r\n                                        </section>\r\n                                        {/* <footer className=\"modal-card-foot\">\r\n                                        <button className=\"button is-success\">Save changes</button>\r\n                                        <button className=\"button\">Cancel</button>\r\n                                        </footer> */}\r\n                                    </div>\r\n                                </div>       \r\n        </div>\r\n    )\r\n}","C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\Finance\\ProductExit.js",["317","318","319","320","321","322","323","324","325","326","327","328","329"],"import React, {useState,useContext, useEffect,useRef} from 'react'\r\nimport client from '../../feathers'\r\nimport {DebounceInput} from 'react-debounce-input';\r\nimport { useForm } from \"react-hook-form\";\r\n//import {useHistory} from 'react-router-dom'\r\nimport {UserContext,ObjectContext} from '../../context'\r\nimport {toast} from 'bulma-toast'\r\nimport {ProductCreate} from './Products'\r\nvar random = require('random-string-generator');\r\n// eslint-disable-next-line\r\nconst searchfacility={};\r\n\r\n\r\nexport default function ProductEntry() {\r\n    const {state}=useContext(ObjectContext) //,setState\r\n    // eslint-disable-next-line\r\n    const [selectedProductEntry,setSelectedProductEntry]=useState()\r\n    //const [showState,setShowState]=useState() //create|modify|detail\r\n    \r\n    return(\r\n        <section className= \"section remPadTop\">\r\n           {/*  <div className=\"level\">\r\n            <div className=\"level-item\"> <span className=\"is-size-6 has-text-weight-medium\">ProductEntry  Module</span></div>\r\n            </div> */}\r\n            <div className=\"columns \">\r\n            <div className=\"column is-6 \">\r\n                <ProductExitList />\r\n                </div>\r\n            <div className=\"column is-6 \">\r\n                {(state.ProductExitModule.show ==='create')&&<ProductExitCreate />}\r\n                {(state.ProductExitModule.show ==='detail')&&<ProductExitDetail  />}\r\n                {(state.ProductExitModule.show ==='modify')&&<ProductExitModify ProductEntry={selectedProductEntry} />}\r\n               \r\n            </div>\r\n\r\n            </div>                            \r\n            </section>\r\n       \r\n    )\r\n    \r\n}\r\n\r\nexport function ProductExitCreate(){\r\n   // const { register, handleSubmit,setValue} = useForm(); //, watch, errors, reset \r\n    const [error, setError] =useState(false)\r\n    const [success, setSuccess] =useState(false)\r\n    const [message,setMessage] = useState(\"\")\r\n    // eslint-disable-next-line\r\n    const [facility,setFacility] = useState()\r\n    const ProductEntryServ=client.service('productentry')\r\n    //const history = useHistory()\r\n    const {user} = useContext(UserContext) //,setUser\r\n    // eslint-disable-next-line\r\n    const [currentUser,setCurrentUser] = useState()\r\n    const [type,setType] = useState(\"Sales\")\r\n    const [documentNo,setDocumentNo] = useState(\"\")\r\n    const [totalamount,setTotalamount] = useState(0)\r\n    const [qamount,setQAmount] = useState(null)\r\n    const [productId,setProductId] = useState(\"\")\r\n    const [source,setSource] = useState(\"\")\r\n    const [date,setDate] = useState(\"\")\r\n    const [name,setName] = useState(\"\")\r\n    const [inventoryId,setInventoryId] = useState(\"\")\r\n    const [baseunit,setBaseunit] = useState(\"\")\r\n    const [quantity,setQuantity] = useState(\"\")\r\n    const [sellingprice,setSellingPrice] = useState(\"\")\r\n    const [costprice,setCostprice] = useState(0)\r\n    const [invquantity,setInvQuantity] = useState(\"\")\r\n    const [calcamount,setCalcAmount] = useState(0)\r\n    const [productItem,setProductItem] = useState([])\r\n    const [billingId,setBilllingId]=useState(\"\")  \r\n    const [changeAmount, setChangeAmount] = useState(true)\r\n    const {state}=useContext(ObjectContext)\r\n    const inputEl = useRef(0);\r\n    let calcamount1\r\n    let hidestatus\r\n    const [productEntry,setProductEntry]=useState({\r\n        productitems:[],\r\n        date,\r\n        documentNo,\r\n        type,\r\n        totalamount,\r\n        source,\r\n\r\n    })\r\n \r\n    const productItemI={\r\n        productId,\r\n        name,\r\n        quantity,\r\n        sellingprice,\r\n        amount:calcamount, //qamount||\r\n        baseunit,\r\n        costprice,\r\n        billingId\r\n\r\n    }\r\n    // consider batchformat{batchno,expirydate,qtty,baseunit}\r\n    //consider baseunoit conversions\r\n    const getSearchfacility=(obj)=>{\r\n\r\n        setProductId(obj.productId)\r\n        setName(obj.name)\r\n        setBaseunit(obj.baseunit)\r\n        setInventoryId(obj.inventoryId)\r\n        setSellingPrice(obj.sellingprice)\r\n        setInvQuantity(obj.quantity)\r\n        setCostprice(obj.costprice)\r\n        setBilllingId(obj.billingId)\r\n        if (!obj){\r\n            //\"clear stuff\"\r\n            setProductId(\"\")\r\n            setName(\"\")\r\n            setBaseunit(\"\")\r\n            setInventoryId(\"\")\r\n            setSellingPrice(\"\")\r\n            setInvQuantity(\"\")\r\n            setQAmount(null)\r\n            setCostprice(\"\")\r\n           // setCalcAmount(null)\r\n\r\n        }\r\n        \r\n       /*  setValue(\"facility\", obj._id,  {\r\n            shouldValidate: true,\r\n            shouldDirty: true\r\n        }) */\r\n    }\r\n    \r\n    useEffect(() => {\r\n        setCurrentUser(user)\r\n        //console.log(currentUser)\r\n        return () => {\r\n        \r\n        }\r\n    }, [user])\r\n\r\n    const handleUpdateTotal=()=>{\r\n\r\n        \r\n        setTotalamount(prevtotal=>Number(prevtotal) + Number(calcamount))\r\n    }\r\n\r\n    const handleChangeType=async (e)=>{\r\n        await setType(e.target.value)\r\n    }\r\n\r\n    const handleAmount= async()=>{\r\n        await setQAmount(null)\r\n       // alert(\"Iam chaning qamount\")\r\n    }\r\n    const handleClickProd=async()=>{\r\n        console.log(\"amount: \",productItemI.amount)\r\n        console.log(\"qamount: \",qamount)\r\n        console.log(\"calcamount: \",calcamount)\r\n\r\n        if ( quantity===0||quantity===\"\"|| productId===\"\"){\r\n            toast({\r\n                message: 'You need to choose a product and quantity to proceed',\r\n                type: 'is-danger',\r\n                dismissible: true,\r\n                pauseOnHover: true,\r\n              }) \r\n              return \r\n        }\r\n\r\n        await setSuccess(false)\r\n        await setProductItem(\r\n            prevProd=>prevProd.concat(productItemI)\r\n        )\r\n       handleUpdateTotal()\r\n        setName(\"\")\r\n        setBaseunit(\"\")\r\n        setQuantity(\"\")\r\n        setInventoryId(\"\")\r\n        setSellingPrice(\"\")\r\n        setInvQuantity(\"\")\r\n            handleAmount()\r\n       // setCalcAmount(null)\r\n       await setSuccess(true)\r\n      /*  console.log(success)\r\n       console.log(qamount)\r\n       console.log(productItem) */\r\n       setChangeAmount(true)\r\n    }\r\n  //check user for facility or get list of facility  \r\n   /*  useEffect(()=>{\r\n        //setFacility(user.activeProductEntry.FacilityId)//\r\n      if (!user.stacker){\r\n          console.log(currentUser)\r\n           /* setValue(\"facility\", user.currentEmployee.facilityDetail._id,  {\r\n            shouldValidate: true,\r\n            shouldDirty: true\r\n        })  \r\n\r\n      }\r\n    }) */\r\n\r\n    const handleQtty=async(e)=>{\r\n        if (invquantity<e.target.value){\r\n            toast({\r\n                message: 'You can not sell more quantity than exist in inventory ' ,\r\n                type: 'is-danger',\r\n                dismissible: true,\r\n                pauseOnHover: true,\r\n              })\r\n            return\r\n        }\r\n        setQuantity(e.target.value)\r\n        calcamount1=quantity*sellingprice\r\n        await setCalcAmount(calcamount1)\r\n        console.log(calcamount)\r\n\r\n       \r\n\r\n    }\r\n\r\n    useEffect( () => {\r\n         setProductEntry({\r\n            \r\n            date,\r\n            documentNo,\r\n            type,\r\n            totalamount,\r\n            source,\r\n        })\r\n       setCalcAmount(quantity*sellingprice) \r\n        return () => {\r\n            \r\n        }\r\n    },[date])\r\n\r\n    const resetform=()=>{\r\n     setType(\"Sales\")\r\n    setDocumentNo(\"\")\r\n    setTotalamount(\"\")\r\n    setProductId(\"\")\r\n    setSource(\"\")\r\n    setDate(\"\")\r\n    setName(\"\")\r\n    setBaseunit()\r\n    setCostprice()\r\n    setProductItem([])\r\n    }\r\n\r\n    const onSubmit = async(e) =>{\r\n        e.preventDefault();\r\n        setMessage(\"\")\r\n        setError(false)\r\n        setSuccess(false)\r\n        await setProductEntry({\r\n            \r\n            date,\r\n            documentNo,\r\n            type,\r\n            totalamount,\r\n            source,\r\n        })\r\n        productEntry.productitems=productItem\r\n        productEntry.createdby=user._id\r\n        productEntry.transactioncategory=\"debit\"\r\n       \r\n          console.log(\"b4 facility\",productEntry);\r\n          if (user.currentEmployee){\r\n         productEntry.facility=user.currentEmployee.facilityDetail._id  // or from facility dropdown\r\n          }else{\r\n            toast({\r\n                message: 'You can not remove inventory from any organization',\r\n                type: 'is-danger',\r\n                dismissible: true,\r\n                pauseOnHover: true,\r\n              }) \r\n              return\r\n          }\r\n          if (state.StoreModule.selectedStore._id){\r\n            productEntry.storeId=state.StoreModule.selectedStore._id\r\n          }else{\r\n            toast({\r\n                message: 'You need to select a store before removing inventory',\r\n                type: 'is-danger',\r\n                dismissible: true,\r\n                pauseOnHover: true,\r\n              }) \r\n              return\r\n\r\n          }\r\n          console.log(\"b4 create\",productEntry);\r\n        ProductEntryServ.create(productEntry)\r\n        .then((res)=>{\r\n                //console.log(JSON.stringify(res))\r\n                resetform()\r\n               /*  setMessage(\"Created ProductEntry successfully\") */\r\n                setSuccess(true)\r\n                toast({\r\n                    message: 'ProductExit created succesfully',\r\n                    type: 'is-success',\r\n                    dismissible: true,\r\n                    pauseOnHover: true,\r\n                  })\r\n                  setSuccess(false)\r\n                  setProductItem([])\r\n                  const today=new Date().toLocaleString()\r\n      \r\n                  setDate(today)\r\n                  const invoiceNo=random(6,'uppernumeric')\r\n                setDocumentNo(invoiceNo)\r\n                setType(\"Sales\")\r\n            })\r\n            .catch((err)=>{\r\n                toast({\r\n                    message: 'Error creating ProductExit ' + err,\r\n                    type: 'is-danger',\r\n                    dismissible: true,\r\n                    pauseOnHover: true,\r\n                  })\r\n            })\r\n\r\n      } \r\n\r\n      const handleChangeAmount=()=>{\r\n        setChangeAmount((rev)=>(!rev))\r\n        \r\n    }\r\n   // console.log(\"i am rendering\")\r\n\r\n    useEffect(() => {\r\n        const today=new Date().toLocaleString()\r\n        console.log(today)\r\n        setDate(today)\r\n        const invoiceNo=random(6,'uppernumeric')\r\n        setDocumentNo(invoiceNo)\r\n        return () => {\r\n            \r\n        }\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        calcamount1=quantity*sellingprice\r\n         setCalcAmount(calcamount1)\r\n         console.log(calcamount)\r\n         setChangeAmount(true)\r\n        return () => {\r\n            \r\n        }\r\n    }, [quantity])\r\n\r\n    return (\r\n        <>\r\n            <div className=\"card card-overflow\">\r\n            <div className=\"card-header\">\r\n                <p className=\"card-header-title\">\r\n                    Create Product Exit: Product Exit- Sales, Dispense, Audit, Transfer out\r\n                </p>\r\n            </div>\r\n            <div className=\"card-content \">\r\n   \r\n            <form onSubmit={onSubmit}> {/* handleSubmit(onSubmit) */}\r\n            <div className=\"field is-horizontal\">\r\n            <div className=\"field-body\">\r\n            <div className=\"field\">    \r\n                <div className=\"control\">\r\n                    <div className=\"select is-small\">\r\n                        <select name=\"type\" value={type} onChange={handleChangeType} className=\"selectadd\">\r\n                           <option value=\"\">Choose Type </option>\r\n                            <option value=\"Sales\">Sales </option>\r\n                            <option value=\"In-house\">In-House </option>\r\n                            <option value=\"Dispense\">Dispense</option>\r\n                            <option value=\"Audit\">Audit</option>\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div className=\"field\">\r\n                    <p className=\"control has-icons-left has-icons-right\">\r\n                        <input className=\"input is-small\" /* ref={register({ required: true })} */ value={source} name=\"client\" type=\"text\" onChange={e=>setSource(e.target.value)} placeholder=\"Client\" />\r\n                        <span className=\"icon is-small is-left\">\r\n                            <i className=\"fas fa-hospital\"></i>\r\n                        </span>                    \r\n                    </p>\r\n                </div>\r\n           \r\n            </div>\r\n            </div> {/* horizontal end */}\r\n           {/*  <div className=\"field\">\r\n                <p className=\"control has-icons-left\"> // Audit/initialization/Purchase Invoice \r\n                    <input className=\"input is-small\"  ref={register({ required: true })} name=\"type\" type=\"text\" placeholder=\"Type of Product Entry\"/>\r\n                    <span className=\"icon is-small is-left\">\r\n                    <i className=\" fas fa-user-md \"></i>\r\n                    </span>\r\n                </p>\r\n            </div> */}\r\n               <div className=\"field is-horizontal\">\r\n               <div className=\"field-body\">\r\n               <div className=\"field\">\r\n                <p className=\"control has-icons-left has-icons-right\">\r\n                    <input className=\"input is-small\"  /* ref={register({ required: true })} */ value={date}  name=\"date\" type=\"text\" onChange={e=>setDate(e.target.value)} placeholder=\"Date\" />\r\n                    <span className=\"icon is-small is-left\">\r\n                        <i className=\"fas fa-map-signs\"></i>\r\n                    </span>\r\n                </p>\r\n            </div>\r\n            <div className=\"field\">\r\n                <p className=\"control has-icons-left\">\r\n                    <input className=\"input is-small\" /* ref={register} */ name=\"documentNo\" value={documentNo} type=\"text\" onChange={e=>setDocumentNo(e.target.value)} placeholder=\" Invoice Number\"/>\r\n                    <span className=\"icon is-small is-left\">\r\n                    <i className=\"fas fa-phone-alt\"></i>\r\n                    </span>\r\n                </p>\r\n            </div>\r\n            <div className=\"field\">\r\n                <p className=\"control has-icons-left\">\r\n                    <input className=\"input is-small\" /* ref={register({ required: true })} */ value={totalamount} name=\"totalamount\" type=\"text\" onChange={e=>setTotalamount(e.target.value)} placeholder=\" Total Amount\"/>\r\n                    <span className=\"icon is-small is-left\">\r\n                    <i className=\"fas fa-coins\"></i>\r\n                    </span>\r\n                </p>\r\n            </div>\r\n\r\n                </div> \r\n                </div> \r\n               \r\n                </form>   \r\n               \r\n           \r\n         {/* array of ProductEntry items */}\r\n        \r\n        <label className=\"label is-small\">Add Product Items:</label>\r\n         <div className=\"field is-horizontal\">\r\n            <div className=\"field-body\">\r\n            <div className=\"field is-expanded\"  /* style={ !user.stacker?{display:\"none\"}:{}} */ >\r\n                    <InventorySearch  getSearchfacility={getSearchfacility} clear={success} /> \r\n                    <p className=\"control has-icons-left \" style={{display:\"none\"}}>\r\n                        <input className=\"input is-small\" /* ref={register ({ required: true }) }  *//* add array no */  value={productId} name=\"productId\" type=\"text\" onChange={e=>setProductId(e.target.value)} placeholder=\"Product Id\" />\r\n                        <span className=\"icon is-small is-left\">\r\n                        <i className=\"fas  fa-map-marker-alt\"></i>\r\n                        </span>\r\n                    </p>\r\n                 {sellingprice &&   \"N\"}{sellingprice} {sellingprice &&   \"per\"}  {baseunit} {invquantity} {sellingprice &&   \"remaining\"} \r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div className=\"field is-horizontal\">\r\n            <div className=\"field-body\" >\r\n                <div className=\"field\" style={{width:\"40%\"}}>\r\n                <p className=\"control has-icons-left\" >\r\n                    <input className=\"input is-small\"  /* ref={register({ required: true })} */ name=\"quantity\" value={quantity} type=\"text\" onChange={ e=> handleQtty(e)} placeholder=\"Quantity\"  />\r\n                    <span className=\"icon is-small is-left\">\r\n                    <i className=\"fas fa-hashtag\"></i>\r\n                    </span>\r\n                   \r\n                </p>\r\n        <label >{baseunit}</label>\r\n            </div> \r\n            <div className=\"field\">\r\n            <label>Amount:</label>{/* <p>{quantity*sellingprice}</p> */}\r\n            </div>\r\n            <div className=\"field\" style={{width:\"40%\"}}>\r\n                <p className=\"control has-icons-left \" /* style={{display:\"none\"}} */>\r\n                    <input className=\"input is-small\" name=\"qamount\" disabled={changeAmount} value={calcamount} type=\"text\"  onChange={async e=> await setCalcAmount(e.target.value)}  placeholder=\"Amount\"   />\r\n                    <span className=\"icon is-small is-left\">\r\n                    <i className=\"fas fa-dollar-sign\"></i>\r\n                    </span>\r\n                </p>\r\n                <button className=\"button is-small is-success btnheight\" onClick={handleChangeAmount}>Adjust</button>\r\n            </div> \r\n            <div className=\"field\">\r\n            <p className=\"control\">\r\n                    <button className=\"button is-info is-small  is-pulled-right\">\r\n                      <span className=\"is-small\" onClick={handleClickProd}> +</span>\r\n                    </button>\r\n                </p>\r\n            </div>\r\n            </div>\r\n         </div>\r\n            \r\n       {(productItem.length>0) && <div>\r\n            <label>Product Items:</label>\r\n         <table className=\"table is-striped  is-hoverable is-fullwidth is-scrollable \">\r\n                <thead>\r\n                    <tr>\r\n                    <th><abbr title=\"Serial No\">S/No</abbr></th>\r\n                    <th><abbr title=\"Type\">Name</abbr></th>\r\n                    <th><abbr title=\"Type\">Quanitity</abbr></th>\r\n                    <th><abbr title=\"Document No\">Unit</abbr></th>\r\n                    <th><abbr title=\"Cost Price\">Selling Price</abbr></th>\r\n                    <th><abbr title=\"Cost Price\">Amount</abbr></th>\r\n                    <th><abbr title=\"Actions\">Actions</abbr></th>\r\n                    </tr>\r\n                </thead>\r\n                <tfoot>\r\n                    \r\n                </tfoot>\r\n                <tbody>\r\n                   { productItem.map((ProductEntry, i)=>(\r\n\r\n                        <tr key={i}>\r\n                        <th>{i+1}</th>\r\n                        <td>{ProductEntry.name}</td>\r\n                        <th>{ProductEntry.quantity}</th>\r\n                        <td>{ProductEntry.baseunit}</td>\r\n                        <td>{ProductEntry.sellingprice}</td>\r\n                        <td>{ProductEntry.amount}</td>\r\n                        <td><span className=\"showAction\"  >x</span></td>\r\n                        \r\n                        </tr>\r\n\r\n                    ))}\r\n                </tbody>\r\n                </table>\r\n                <div className=\"field mt-2 is-grouped\">\r\n                <p className=\"control\">\r\n                    <button className=\"button is-success is-small\" disabled={!productItem.length>0} onClick={onSubmit}>\r\n                        Sell\r\n                    </button>\r\n                </p>\r\n                <p className=\"control\">\r\n                    <button className=\"button is-warning is-small\" disabled={!productItem.length>0} /* onClick={onSubmit} */>\r\n                        Clear\r\n                    </button>\r\n                </p>\r\n                </div>\r\n                </div>\r\n           \r\n            }\r\n            \r\n            \r\n            </div>\r\n            </div>\r\n        </>\r\n    )\r\n   \r\n}\r\n\r\nexport function ProductExitList(){\r\n   // const { register, handleSubmit, watch, errors } = useForm();\r\n    // eslint-disable-next-line\r\n    const [error, setError] =useState(false)\r\n     // eslint-disable-next-line\r\n    const [success, setSuccess] =useState(false)\r\n     // eslint-disable-next-line\r\n   const [message, setMessage] = useState(\"\") \r\n    const ProductEntryServ=client.service('productentry')\r\n    //const history = useHistory()\r\n   // const {user,setUser} = useContext(UserContext)\r\n    const [facilities,setFacilities]=useState([])\r\n     // eslint-disable-next-line\r\n   const [selectedProductEntry, setSelectedProductEntry]=useState() //\r\n    // eslint-disable-next-line\r\n    const {state,setState}=useContext(ObjectContext)\r\n    // eslint-disable-next-line\r\n    const {user,setUser}=useContext(UserContext)\r\n\r\n\r\n\r\n    const handleCreateNew = async()=>{\r\n        const    newProductExitModule={\r\n            selectedProductEntry:{},\r\n            show :'create'\r\n            }\r\n       await setState((prevstate)=>({...prevstate, ProductExitModule:newProductExitModule}))\r\n       //console.log(state)\r\n        \r\n\r\n    }\r\n    const handleRow= async(ProductEntry)=>{\r\n        //console.log(\"b4\",state)\r\n\r\n        //console.log(\"handlerow\",ProductEntry)\r\n\r\n        await setSelectedProductEntry(ProductEntry)\r\n\r\n        const    newProductExitModule={\r\n            selectedProductEntry:ProductEntry,\r\n            show :'detail'\r\n        }\r\n       await setState((prevstate)=>({...prevstate, ProductExitModule:newProductExitModule}))\r\n       //console.log(state)\r\n\r\n    }\r\n\r\n   const handleSearch=(val)=>{\r\n       const field='name'\r\n       console.log(val)\r\n       ProductEntryServ.find({query: {\r\n                [field]: {\r\n                    $regex:val,\r\n                    $options:'i'\r\n                   \r\n                },\r\n                transactioncategory:\"debit\",\r\n                storeId:state.StoreModule.selectedStore._id,\r\n               facility:user.currentEmployee.facilityDetail._id || \"\",\r\n                $limit:10,\r\n                $sort: {\r\n                    createdAt: -1\r\n                  }\r\n                    }}).then((res)=>{\r\n                console.log(res)\r\n               setFacilities(res.data)\r\n                setMessage(\" ProductEntry  fetched successfully\")\r\n                setSuccess(true) \r\n            })\r\n            .catch((err)=>{\r\n                console.log(err)\r\n                setMessage(\"Error fetching ProductEntry, probable network issues \"+ err )\r\n                setError(true)\r\n            })\r\n        }\r\n   \r\n        const getFacilities= async()=>{\r\n            if (user.currentEmployee){\r\n            \r\n        const findProductEntry= await ProductEntryServ.find(\r\n                {query: {\r\n                    transactioncategory:\"debit\",\r\n                    facility:user.currentEmployee.facilityDetail._id,\r\n                    storeId:state.StoreModule.selectedStore._id,\r\n                    $limit:20,\r\n                    $sort: {\r\n                        createdAt: -1\r\n                    }\r\n                    }})\r\n\r\n         await setFacilities(findProductEntry.data)\r\n                }\r\n                else {\r\n                    if (user.stacker){\r\n                        /* toast({\r\n                            message: 'You do not qualify to view this',\r\n                            type: 'is-danger',\r\n                            dismissible: true,\r\n                            pauseOnHover: true,\r\n                          }) \r\n                          return */\r\n                        const findProductEntry= await ProductEntryServ.find(\r\n                            {query: {\r\n                                transactioncategory:\"debit\",\r\n                                $limit:20,\r\n                                $sort: {\r\n                                    createdAt: -1\r\n                                }\r\n                                }})\r\n            \r\n                    await setFacilities(findProductEntry.data)\r\n\r\n                    }\r\n                }\r\n          /*   .then((res)=>{\r\n                console.log(res)\r\n                    setFacilities(res.data)\r\n                    setMessage(\" ProductEntry  fetched successfully\")\r\n                    setSuccess(true)\r\n                })\r\n                .catch((err)=>{\r\n                    setMessage(\"Error creating ProductEntry, probable network issues \"+ err )\r\n                    setError(true)\r\n                }) */\r\n            }\r\n            \r\n         /*    useEffect(() => {\r\n                setTimeout(() => {\r\n                    console.log(\"happy birthday\")\r\n                    //getFacilities(user)\r\n                }, 200);\r\n\r\n                return () => {\r\n                    \r\n\r\n                }\r\n            },[]) */\r\n\r\n            useEffect(() => {\r\n               \r\n                if (!state.StoreModule.selectedStore){\r\n                    toast({\r\n                        message: 'kindly select a store',\r\n                        type: 'is-danger',\r\n                        dismissible: true,\r\n                        pauseOnHover: true,\r\n                      }) \r\n                      return\r\n                    getFacilities()\r\n\r\n                }else{\r\n                    /* const localUser= localStorage.getItem(\"user\")\r\n                    const user1=JSON.parse(localUser)\r\n                    console.log(localUser)\r\n                    console.log(user1)\r\n                    fetchUser(user1)\r\n                    console.log(user)\r\n                    getFacilities(user) */\r\n                }\r\n                ProductEntryServ.on('created', (obj)=>getFacilities())\r\n                ProductEntryServ.on('updated', (obj)=>getFacilities())\r\n                ProductEntryServ.on('patched', (obj)=>getFacilities())\r\n                ProductEntryServ.on('removed', (obj)=>getFacilities())\r\n                return () => {\r\n                \r\n                }\r\n            },[])\r\n\r\n            useEffect(() => {\r\n                getFacilities()\r\n                console.log(\"store changed\")\r\n                return () => {\r\n                   \r\n                }\r\n            }, [state.StoreModule.selectedStore])\r\n    //todo: pagination and vertical scroll bar\r\n\r\n    return(\r\n        <>\r\n           {state.StoreModule.selectedStore?( <>  \r\n                <div className=\"level\">\r\n                    <div className=\"level-left\">\r\n                        <div className=\"level-item\">\r\n                            <div className=\"field\">\r\n                                <p className=\"control has-icons-left  \">\r\n                                    <DebounceInput className=\"input is-small \" \r\n                                        type=\"text\" placeholder=\"Search ProductEntry\"\r\n                                        minLength={3}\r\n                                        debounceTimeout={400}\r\n                                        onChange={(e)=>handleSearch(e.target.value)} />\r\n                                    <span className=\"icon is-small is-left\">\r\n                                        <i className=\"fas fa-search\"></i>\r\n                                    </span>\r\n                                </p>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"level-item\"> <span className=\"is-size-6 has-text-weight-medium\">Product Exits </span></div>\r\n                    <div className=\"level-right\">\r\n                        <div className=\"level-item\"> \r\n                            <div className=\"level-item\"><div className=\"button is-success is-small\" onClick={handleCreateNew}>New</div></div>\r\n                        </div>\r\n                    </div>\r\n\r\n                </div>\r\n                <div className=\"table-container pullup \">\r\n                                <table className=\"table is-striped is-narrow is-hoverable is-fullwidth is-scrollable \">\r\n                                    <thead>\r\n                                        <tr>\r\n                                        <th><abbr title=\"Serial No\">S/No</abbr></th>\r\n                                        <th><abbr title=\"Date\">Date</abbr></th>\r\n                                        <th><abbr title=\"Type\">Type</abbr></th>\r\n                                        <th>Client</th>\r\n                                        <th><abbr title=\"Document No\">Document No</abbr></th>\r\n                                        <th><abbr title=\"Total Amount\">Total Amount</abbr></th>\r\n                                        <th><abbr title=\"Enteredby\">Entered By</abbr></th>\r\n                                        <th><abbr title=\"Actions\">Actions</abbr></th>\r\n                                        </tr>\r\n                                    </thead>\r\n                                    <tfoot>\r\n                                        \r\n                                    </tfoot>\r\n                                    <tbody>\r\n                                        {facilities.map((ProductEntry, i)=>(\r\n\r\n                                            <tr key={ProductEntry._id} onClick={()=>handleRow(ProductEntry)}>\r\n                                            <th>{i+1}</th>\r\n                                            <td>{ProductEntry.date}</td>\r\n                                            <th>{ProductEntry.type}</th>\r\n                                            <td>{ProductEntry.source}</td>\r\n                                            <td>{ProductEntry.documentNo}</td>\r\n                                            <td>{ProductEntry.totalamount}</td>\r\n                                            <td>{ProductEntry.enteredby}</td>\r\n                                            <td><span className=\"showAction\"  >...</span></td>\r\n                                           \r\n                                            </tr>\r\n\r\n                                        ))}\r\n                                    </tbody>\r\n                                    </table>\r\n                                    \r\n                </div>              \r\n            </>):<div>loading... Choose a Store</div>}\r\n            </>\r\n              \r\n    )\r\n    }\r\n\r\n\r\nexport function ProductExitDetail(){\r\n    //const { register, handleSubmit, watch, setValue } = useForm(); //errors,\r\n     // eslint-disable-next-line\r\n    const [error, setError] =useState(false) //, \r\n    //const [success, setSuccess] =useState(false)\r\n     // eslint-disable-next-line\r\n    const [message, setMessage] = useState(\"\") //,\r\n    //const ProductEntryServ=client.service('/ProductEntry')\r\n    //const history = useHistory()\r\n    //const {user,setUser} = useContext(UserContext)\r\n    const {state,setState} = useContext(ObjectContext)\r\n\r\n   \r\n\r\n   const ProductEntry =state.ProductExitModule.selectedProductEntry \r\n\r\n    const handleEdit= async()=>{\r\n        const    newProductExitModule={\r\n            selectedProductEntry:ProductEntry,\r\n            show :'modify'\r\n        }\r\n       await setState((prevstate)=>({...prevstate, ProductExitModule:newProductExitModule}))\r\n       //console.log(state)\r\n       \r\n    }\r\n \r\n    return (\r\n        <>\r\n        <div className=\"card \">\r\n            <div className=\"card-header\">\r\n                <p className=\"card-header-title\">\r\n                    ProductEntry Details\r\n                </p>\r\n            </div>\r\n            <div className=\"card-content vscrollable\">\r\n           \r\n                <table> \r\n                <tbody>         \r\n                <tr>\r\n                    <td>\r\n                      <label className=\"label is-small\"> <span className=\"icon is-small is-left\">\r\n                            <i className=\"fas fa-hospital\"></i>\r\n                        </span>                    \r\n                        Type\r\n                        </label>\r\n                    </td>\r\n                    <td>\r\n                        <span className=\"is-size-7 padleft\"   name=\"name\"> {ProductEntry.type} </span>\r\n                    </td>\r\n                    <td>\r\n\r\n                    </td>\r\n                    <td>\r\n                        <label className=\"label is-small padleft\"><span className=\"icon is-small is-left\">\r\n                            <i className=\"fas fa-map-signs\"></i>\r\n                        </span>Supplier:\r\n                        </label>\r\n                    </td>\r\n                    <td>\r\n                        <span className=\"is-size-7 padleft\"   name=\"ProductEntryType\">{ProductEntry.source} </span> \r\n                    </td>\r\n                </tr>\r\n                <tr>\r\n                    <td>\r\n                        <label className=\"label is-small\"> <span className=\"icon is-small is-left\">\r\n                        <i className=\"fas fa-hospital\"></i>\r\n                        </span>                    \r\n                        Date:\r\n                        </label>\r\n                    </td>\r\n                    <td>\r\n                        <span className=\"is-size-7 padleft\"   name=\"name\"> {ProductEntry.date} </span>\r\n                    </td>\r\n                    <td>\r\n                                \r\n                    </td>\r\n                    <td>\r\n                        <label className=\"label is-small padleft\"><span className=\"icon is-small is-left\">\r\n                            <i className=\"fas fa-map-signs\"></i>\r\n                        </span>Invoice No:\r\n                        </label>\r\n                    </td>\r\n                    \r\n                    <td>\r\n                         <span className=\"is-size-7 padleft\"   name=\"ProductEntryType\">{ProductEntry.documentNo} </span> \r\n                    </td>\r\n                </tr>\r\n                <tr>\r\n                    <td>\r\n                \r\n                        <label className=\"label is-small\"> <span className=\"icon is-small is-left\">\r\n                        <i className=\"fas fa-hospital\"></i>\r\n                    </span>            \r\n                        Total Amount:\r\n                    </label>\r\n                    </td>\r\n                    <td>\r\n                        <span className=\"is-size-7 padleft\"   name=\"name\"> {ProductEntry.totalamount} </span>\r\n                    </td>\r\n                </tr>\r\n\r\n                </tbody> \r\n            </table> \r\n            <label className=\"label is-size-7 mt-2\">Product Items:</label>\r\n         <table className=\"table is-striped  is-hoverable is-fullwidth is-scrollable \">\r\n                <thead>\r\n                    <tr>\r\n                    <th><abbr title=\"Serial No\">S/No</abbr></th>\r\n                    <th><abbr title=\"Type\">Name</abbr></th>\r\n                    <th><abbr title=\"Type\">Quanitity</abbr></th>\r\n                    <th><abbr title=\"Document No\">Unit</abbr></th>\r\n                    <th><abbr title=\"Selling Price\">Selling Price</abbr></th>\r\n                    <th><abbr title=\"Amount\">Amount</abbr></th>\r\n                   \r\n                    </tr>\r\n                </thead>\r\n                <tfoot>\r\n                    \r\n                </tfoot>\r\n                <tbody>\r\n                   { ProductEntry.productitems.map((ProductEntry, i)=>(\r\n\r\n                        <tr key={i}>\r\n                        <th>{i+1}</th>\r\n                        <td>{ProductEntry.name}</td>\r\n                        <th>{ProductEntry.quantity}</th>\r\n                        <td>{ProductEntry.baseunit}</td>\r\n                        <td>{ProductEntry.sellingprice}</td>\r\n                        <td>{ProductEntry.amount}</td>\r\n                        \r\n                        \r\n                        </tr>\r\n\r\n                    ))}\r\n                </tbody>\r\n                </table>\r\n                  {/*   <tr>\r\n                    <td>\r\n            <label className=\"label is-small\"><span className=\"icon is-small is-left\">\r\n                    <i className=\"fas fa-map-marker-alt\"></i>\r\n                    </span>Profession: \r\n                \r\n                    \r\n                    </label>\r\n                    </td>\r\n                <td>\r\n                <span className=\"is-size-7 padleft \"  name=\"ProductEntryCity\">{ProductEntry.profession}</span> \r\n                </td>\r\n                </tr>\r\n                    <tr>\r\n            <td>\r\n            <label className=\"label is-small\"><span className=\"icon is-small is-left\">\r\n                    <i className=\"fas fa-phone-alt\"></i>\r\n                    </span>Phone:           \r\n                    \r\n                        </label>\r\n                        </td>\r\n                        <td>\r\n                        <span className=\"is-size-7 padleft \"  name=\"ProductEntryContactPhone\" >{ProductEntry.phone}</span>\r\n                        </td>\r\n                  </tr>\r\n                    <tr><td>\r\n            \r\n            <label className=\"label is-small\"><span className=\"icon is-small is-left\">\r\n                    <i className=\"fas fa-envelope\"></i>\r\n                    </span>Email:                     \r\n                    \r\n                         </label></td><td>\r\n                         <span className=\"is-size-7 padleft \"  name=\"ProductEntryEmail\" >{ProductEntry.email}</span>\r\n                         </td>\r\n             \r\n                </tr>\r\n                    <tr>\r\n            <td>\r\n            <label className=\"label is-small\"> <span className=\"icon is-small is-left\">\r\n                    <i className=\"fas fa-user-md\"></i></span>Department:\r\n                    \r\n                    </label></td>\r\n                    <td>\r\n                    <span className=\"is-size-7 padleft \"  name=\"ProductEntryOwner\">{ProductEntry.department}</span>\r\n                    </td>\r\n               \r\n                </tr>\r\n                    <tr>\r\n            <td>\r\n            <label className=\"label is-small\"> <span className=\"icon is-small is-left\">\r\n                    <i className=\"fas fa-hospital-symbol\"></i>\r\n                    </span>Departmental Unit:              \r\n                    \r\n                </label></td>\r\n                <td>\r\n                <span className=\"is-size-7 padleft \"  name=\"ProductEntryType\">{ProductEntry.deptunit}</span>\r\n                </td>\r\n              \r\n                </tr> */}\r\n                    \r\n          {/*   <div className=\"field\">\r\n             <label className=\"label is-small\"><span className=\"icon is-small is-left\">\r\n                    <i className=\"fas fa-clinic-medical\"></i>\r\n                    </span>Category:              \r\n                    <span className=\"is-size-7 padleft \"  name= \"ProductEntryCategory\">{ProductEntry.ProductEntryCategory}</span>\r\n                </label>\r\n                 </div> */}\r\n\r\n            \r\n           \r\n           {/*  <div className=\"field mt-2\">\r\n                <p className=\"control\">\r\n                    <button className=\"button is-success is-small\" onClick={handleEdit}>\r\n                        Edit\r\n                    </button>\r\n                </p>\r\n            </div>\r\n            { error && <div className=\"message\"> {message}</div>} */}\r\n           \r\n        </div>\r\n        </div>\r\n        </>\r\n    )\r\n   \r\n   \r\n}\r\n\r\nexport function ProductExitModify(){\r\n    const { register, handleSubmit, setValue,reset, errors } = useForm(); //watch, errors,\r\n    // eslint-disable-next-line \r\n    const [error, setError] =useState(false)\r\n    // eslint-disable-next-line \r\n    const [success, setSuccess] =useState(false)\r\n    // eslint-disable-next-line \r\n    const [message,setMessage] = useState(\"\")\r\n    // eslint-disable-next-line \r\n    const ProductEntryServ=client.service('productentry')\r\n    //const history = useHistory()\r\n     // eslint-disable-next-line\r\n    const {user} = useContext(UserContext)\r\n    const {state,setState} = useContext(ObjectContext)\r\n\r\n    const ProductEntry =state.ProductExitModule.selectedProductEntry \r\n\r\n        useEffect(() => {\r\n            setValue(\"name\", ProductEntry.name,  {\r\n                shouldValidate: true,\r\n                shouldDirty: true\r\n            })\r\n            setValue(\"ProductEntryType\", ProductEntry.ProductEntryType,  {\r\n                shouldValidate: true,\r\n                shouldDirty: true\r\n            })\r\n           /*  setValue(\"profession\", ProductEntry.profession,  {\r\n                shouldValidate: true,\r\n                shouldDirty: true\r\n            })\r\n            setValue(\"phone\", ProductEntry.phone,  {\r\n                shouldValidate: true,\r\n                shouldDirty: true\r\n            })\r\n            setValue(\"email\", ProductEntry.email,  {\r\n                shouldValidate: true,\r\n                shouldDirty: true\r\n            })\r\n            setValue(\"department\", ProductEntry.department,  {\r\n                shouldValidate: true,\r\n                shouldDirty: true\r\n            })\r\n            setValue(\"deptunit\", ProductEntry.deptunit,  {\r\n                shouldValidate: true,\r\n                shouldDirty: true\r\n            }) */\r\n          /*   setValue(\"ProductEntryCategory\", ProductEntry.ProductEntryCategory,  {\r\n                shouldValidate: true,\r\n                shouldDirty: true\r\n            }) */\r\n            \r\n            return () => {\r\n                \r\n            }\r\n        })\r\n\r\n   const handleCancel=async()=>{\r\n    const    newProductExitModule={\r\n        selectedProductEntry:{},\r\n        show :'create'\r\n      }\r\n   await setState((prevstate)=>({...prevstate, ProductExitModule:newProductExitModule}))\r\n   //console.log(state)\r\n           }\r\n\r\n\r\n        const changeState =()=>{\r\n        const    newProductExitModule={\r\n            selectedProductEntry:{},\r\n            show :'create'\r\n        }\r\n        setState((prevstate)=>({...prevstate, ProductExitModule:newProductExitModule}))\r\n\r\n        }\r\n    const handleDelete=async()=>{\r\n        let conf=window.confirm(\"Are you sure you want to delete this data?\")\r\n        \r\n        const dleteId=ProductEntry._id\r\n        if (conf){\r\n             \r\n        ProductEntryServ.remove(dleteId)\r\n        .then((res)=>{\r\n                //console.log(JSON.stringify(res))\r\n                reset();\r\n               /*  setMessage(\"Deleted ProductEntry successfully\")\r\n                setSuccess(true)\r\n                changeState()\r\n               setTimeout(() => {\r\n                setSuccess(false)\r\n                }, 200); */\r\n                toast({\r\n                    message: 'ProductEntry deleted succesfully',\r\n                    type: 'is-success',\r\n                    dismissible: true,\r\n                    pauseOnHover: true,\r\n                  })\r\n                changeState()\r\n            })\r\n            .catch((err)=>{\r\n               // setMessage(\"Error deleting ProductEntry, probable network issues \"+ err )\r\n               // setError(true)\r\n                toast({\r\n                    message: \"Error deleting ProductEntry, probable network issues or \"+ err,\r\n                    type: 'is-danger',\r\n                    dismissible: true,\r\n                    pauseOnHover: true,\r\n                  })\r\n            })\r\n        }\r\n    }\r\n        \r\n\r\n   /* ()=> setValue(\"firstName\", \"Bill\", , {\r\n            shouldValidate: true,\r\n            shouldDirty: true\r\n          })) */\r\n    const onSubmit = (data,e) =>{\r\n        e.preventDefault();\r\n        \r\n        setSuccess(false)\r\n        console.log(data)\r\n        data.facility=ProductEntry.facility\r\n          //console.log(data);\r\n          \r\n        ProductEntryServ.patch(ProductEntry._id,data)\r\n        .then((res)=>{\r\n                //console.log(JSON.stringify(res))\r\n               // e.target.reset();\r\n               // setMessage(\"updated ProductEntry successfully\")\r\n                 toast({\r\n                    message: 'ProductEntry updated succesfully',\r\n                    type: 'is-success',\r\n                    dismissible: true,\r\n                    pauseOnHover: true,\r\n                  })\r\n                  \r\n                changeState()\r\n\r\n            })\r\n            .catch((err)=>{\r\n                //setMessage(\"Error creating ProductEntry, probable network issues \"+ err )\r\n               // setError(true)\r\n                toast({\r\n                    message: \"Error updating ProductEntry, probable network issues or \"+ err,\r\n                    type: 'is-danger',\r\n                    dismissible: true,\r\n                    pauseOnHover: true,\r\n                  })\r\n            })\r\n\r\n      } \r\n     \r\n      \r\n    return (\r\n        \r\n        <>\r\n        <div className=\"card \">\r\n            <div className=\"card-header\">\r\n                <p className=\"card-header-title\">\r\n                    ProductEntry Details-Modify\r\n                </p>\r\n            </div>\r\n            <div className=\"card-content vscrollable\">\r\n           \r\n            <form onSubmit={handleSubmit(onSubmit)}>\r\n                <div className=\"field\">\r\n                    <label className=\"label is-small\"> Name\r\n                    <p className=\"control has-icons-left has-icons-right\">\r\n                        <input className=\"input  is-small\" ref={register({ required: true })}  name=\"name\" type=\"text\" placeholder=\"Name\" />\r\n                        <span className=\"icon is-small is-left\">\r\n                            <i className=\"fas fa-hospital\"></i>\r\n                        </span>                    \r\n                    </p>\r\n                    </label>\r\n                    </div>\r\n                <div className=\"field\">\r\n                <label className=\"label is-small\">ProductEntry Type\r\n                    <p className=\"control has-icons-left has-icons-right\">\r\n                    <input className=\"input is-small \" ref={register({ required: true })} disabled name=\"ProductEntryType\" type=\"text\" placeholder=\"ProductEntry Type\" />\r\n                    <span className=\"icon is-small is-left\">\r\n                        <i className=\"fas fa-map-signs\"></i>\r\n                    </span>\r\n                    \r\n                </p>\r\n                </label>\r\n                </div>\r\n            {/* <div className=\"field\">\r\n            <label className=\"label is-small\">Profession\r\n                <p className=\"control has-icons-left\">\r\n                    <input className=\"input is-small\" ref={register({ required: true })} name=\"profession\" type=\"text\" placeholder=\"Profession\"/>\r\n                    <span className=\"icon is-small is-left\">\r\n                    <i className=\"fas fa-map-marker-alt\"></i>\r\n                    </span>\r\n                </p>\r\n                </label>\r\n                </div>\r\n            <div className=\"field\">\r\n            <label className=\"label is-small\">Phone\r\n                <p className=\"control has-icons-left\">\r\n                    <input className=\"input is-small\" ref={register({ required: true })} name=\"phone\" type=\"text\" placeholder=\"Phone No\"/>\r\n                    <span className=\"icon is-small is-left\">\r\n                    <i className=\"fas fa-phone-alt\"></i>\r\n                    </span>\r\n                </p>\r\n                </label>\r\n                 </div>\r\n            <div className=\"field\">\r\n            <label className=\"label is-small\">Email\r\n                <p className=\"control has-icons-left\">\r\n                    <input className=\"input is-small\" ref={register({ required: true })} name=\"email\" type=\"email\" placeholder=\"ProductEntry Email\"/>\r\n                    <span className=\"icon is-small is-left\">\r\n                    <i className=\"fas fa-envelope\"></i>\r\n                    </span>\r\n                </p>\r\n                </label>\r\n                </div>\r\n            <div className=\"field\">\r\n            <label className=\"label is-small\">Department\r\n                <p className=\"control has-icons-left\">\r\n                    <input className=\"input is-small\" ref={register({ required: true })} name=\"department\" type=\"text\" placeholder=\"Department\"/>\r\n                    <span className=\"icon is-small is-left\">\r\n                    <i className=\"fas fa-user-md\"></i>\r\n                    </span>\r\n                </p>\r\n                </label>\r\n                {errors.department && <span>This field is required</span>}\r\n                </div>\r\n            <div className=\"field\">\r\n            <label className=\"label is-small\">Departmental Unit\r\n                <p className=\"control has-icons-left\">\r\n                    <input className=\"input is-small\" ref={register({ required: true })} name=\"deptunit\" type=\"text\" placeholder=\"Departmental Unit\"/>\r\n                    <span className=\"icon is-small is-left\">\r\n                    <i className=\"fas fa-hospital-symbol\"></i>\r\n                    </span>\r\n                </p>\r\n                </label>\r\n                </div> */}\r\n           {/*  <div className=\"field\">\r\n            <label className=\"label is-small\">Category\r\n                <p className=\"control has-icons-left\">\r\n                    <input className=\"input is-small\" ref={register({ required: true })} name=\"ProductEntryCategory\" type=\"text\" placeholder=\"ProductEntry Category\"/>\r\n                    <span className=\"icon is-small is-left\">\r\n                    <i className=\"fas fa-clinic-medical\"></i>\r\n                    </span>\r\n                </p>\r\n                </label>\r\n            </div> */}\r\n           \r\n           \r\n            </form>\r\n            \r\n            <div className=\"field  is-grouped mt-2\" >\r\n                <p className=\"control\">\r\n                    <button type=\"submit\" className=\"button is-success is-small\" onClick={handleSubmit(onSubmit)}>\r\n                        Save\r\n                    </button>\r\n                </p>\r\n                <p className=\"control\">\r\n                    <button className=\"button is-warning is-small\" onClick={handleCancel}>\r\n                        Cancel\r\n                    </button>\r\n                </p>\r\n                <p className=\"control\">\r\n                    <button className=\"button is-danger is-small\" onClick={()=>handleDelete()} type=\"delete\">\r\n                       Delete\r\n                    </button>\r\n                </p>\r\n            </div>\r\n        </div>\r\n        </div>\r\n        </>\r\n    )\r\n   \r\n   \r\n                \r\n}   \r\n\r\nexport  function InventorySearch({getSearchfacility,clear}) {\r\n    \r\n    const productServ=client.service('inventory')\r\n    const [facilities,setFacilities]=useState([])\r\n     // eslint-disable-next-line\r\n     const [searchError, setSearchError] =useState(false)\r\n     // eslint-disable-next-line\r\n    const [showPanel, setShowPanel] =useState(false)\r\n     // eslint-disable-next-line\r\n   const [searchMessage, setSearchMessage] = useState(\"\") \r\n   // eslint-disable-next-line \r\n   const [simpa,setSimpa]=useState(\"\")\r\n   // eslint-disable-next-line \r\n   const [chosen,setChosen]=useState(false)\r\n   // eslint-disable-next-line \r\n   const [count,setCount]=useState(0)\r\n   const inputEl=useRef(null)\r\n   const [val,setVal]=useState(\"\")\r\n   const {user} = useContext(UserContext) \r\n   const {state}=useContext(ObjectContext)\r\n    const [productModal,setProductModal]=useState(false)\r\n\r\n   const handleRow= async(obj)=>{\r\n        await setChosen(true)\r\n        //alert(\"something is chaning\")\r\n       getSearchfacility(obj)\r\n       \r\n       await setSimpa(obj.name)\r\n       \r\n        // setSelectedFacility(obj)\r\n        setShowPanel(false)\r\n        await setCount(2)\r\n        /* const    newfacilityModule={\r\n            selectedFacility:facility,\r\n            show :'detail'\r\n        }\r\n   await setState((prevstate)=>({...prevstate, facilityModule:newfacilityModule})) */\r\n   //console.log(state)\r\n    }\r\n    const handleBlur=async(e)=>{\r\n         if (count===2){\r\n             console.log(\"stuff was chosen\")\r\n         }\r\n       \r\n       /*  console.log(\"blur\")\r\n         setShowPanel(false)\r\n        console.log(JSON.stringify(simpa))\r\n        if (simpa===\"\"){\r\n            console.log(facilities.length)\r\n            setSimpa(\"abc\")\r\n            setSimpa(\"\")\r\n            setFacilities([])\r\n            inputEl.current.setValue=\"\"\r\n        }\r\n        console.log(facilities.length)\r\n        console.log(inputEl.current) */\r\n    }\r\n    const handleSearch=async(value)=>{\r\n        setVal(value)\r\n        if (value===\"\"){\r\n            setShowPanel(false)\r\n            getSearchfacility(false)\r\n            return\r\n        }\r\n        const field='name' //field variable\r\n\r\n       \r\n        if (value.length>=3 ){\r\n            productServ.find({query: {     //service\r\n                 [field]: {\r\n                     $regex:value,\r\n                     $options:'i'\r\n                    \r\n                 },\r\n                 facility: user.currentEmployee.facilityDetail._id,\r\n                 storeId: state.StoreModule.selectedStore._id,\r\n                 $limit:10,\r\n                 $sort: {\r\n                     createdAt: -1\r\n                   }\r\n                     }}).then((res)=>{\r\n              console.log(\"product  fetched successfully\") \r\n              console.log(res.data) \r\n                setFacilities(res.data)\r\n                 setSearchMessage(\" product  fetched successfully\")\r\n                 setShowPanel(true)\r\n             })\r\n             .catch((err)=>{\r\n                toast({\r\n                    message: 'Error creating ProductEntry ' + err,\r\n                    type: 'is-danger',\r\n                    dismissible: true,\r\n                    pauseOnHover: true,\r\n                  })\r\n             })\r\n         }\r\n        else{\r\n            console.log(\"less than 3 \")\r\n            console.log(val)\r\n            setShowPanel(false)\r\n            await setFacilities([])\r\n            console.log(facilities)\r\n        }\r\n    }\r\n\r\n    const handleAddproduct =()=>{\r\n        setProductModal(true) \r\n    }\r\n    const handlecloseModal =()=>{\r\n        setProductModal(false)\r\n        handleSearch(val)\r\n    }\r\n    useEffect(() => {\r\n       if (clear){\r\n           console.log(\"success has changed\",clear)\r\n           setSimpa(\"\")\r\n       }\r\n        return () => {\r\n            \r\n        }\r\n    }, [clear] )\r\n    return (\r\n        <div>\r\n            <div className=\"field\">\r\n                <div className=\"control has-icons-left  \">\r\n                    <div className={`dropdown ${showPanel?\"is-active\":\"\"}`} style={{width:\"100%\"}}>\r\n                        <div className=\"dropdown-trigger\" style={{width:\"100%\"}}>\r\n                            <DebounceInput className=\"input is-small  is-expanded\" \r\n                                type=\"text\" placeholder=\"Search Product\"\r\n                                value={simpa}\r\n                                minLength={3}\r\n                                debounceTimeout={400}\r\n                                onBlur={(e)=>handleBlur(e)}\r\n                                onChange={(e)=>handleSearch(e.target.value)}\r\n                                inputRef={inputEl}\r\n                                  />\r\n                            <span className=\"icon is-small is-left\">\r\n                                <i className=\"fas fa-search\"></i>\r\n                            </span>\r\n                        </div>\r\n                        {/* {searchError&&<div>{searchMessage}</div>} */}\r\n                        <div className=\"dropdown-menu expanded\" style={{width:\"100%\"}}>\r\n                            <div className=\"dropdown-content\">\r\n                          { facilities.length>0?\"\":<div className=\"dropdown-item\" /* onClick={handleAddproduct} */> <span> {val} is not in your inventory</span> </div>}\r\n\r\n                              {facilities.map((facility, i)=>(\r\n                                    \r\n                                    <div className=\"dropdown-item\" key={facility._id} onClick={()=>handleRow(facility)}>\r\n                                        \r\n                                        <div><span>{facility.name}</span></div>\r\n                                        <div><span><strong>{facility.quantity}</strong></span>\r\n                                        <span>{facility.baseunit}(s) remaining</span>\r\n                                        <span className=\"padleft\"><strong>Price:</strong> N{facility.sellingprice}</span></div>\r\n                                        \r\n                                    </div>\r\n                                    \r\n                                    ))}\r\n                                    \r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div className={`modal ${productModal?\"is-active\":\"\"}` }>\r\n                                    <div className=\"modal-background\"></div>\r\n                                    <div className=\"modal-card\">\r\n                                        <header className=\"modal-card-head\">\r\n                                        <p className=\"modal-card-title\">Choose Store</p>\r\n                                        <button className=\"delete\" aria-label=\"close\"  onClick={handlecloseModal}></button>\r\n                                        </header>\r\n                                        <section className=\"modal-card-body\">\r\n                                        {/* <StoreList standalone=\"true\" /> */}\r\n                                        <ProductCreate />\r\n                                        </section>\r\n                                        {/* <footer className=\"modal-card-foot\">\r\n                                        <button className=\"button is-success\">Save changes</button>\r\n                                        <button className=\"button\">Cancel</button>\r\n                                        </footer> */}\r\n                                    </div>\r\n                                </div>       \r\n        </div>\r\n    )\r\n}","C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\Clinic\\ClinicStore.js",["330","331","332","333","334","335","336","337"],"import React, {useState,useContext, useEffect,useRef} from 'react'\r\nimport client from '../../feathers'\r\nimport {DebounceInput} from 'react-debounce-input';\r\nimport { useForm } from \"react-hook-form\";\r\n//import {useHistory} from 'react-router-dom'\r\nimport {UserContext,ObjectContext} from '../../context'\r\nimport {toast} from 'bulma-toast'\r\n// eslint-disable-next-line\r\nconst searchfacility={};\r\n\r\n\r\nexport default function Inventory() {\r\n    const {state}=useContext(ObjectContext) //,setState\r\n    // eslint-disable-next-line\r\n    const [selectedInventory,setSelectedInventory]=useState()\r\n    //const [showState,setShowState]=useState() //create|modify|detail\r\n    \r\n    return(\r\n        <section className= \"section remPadTop\">\r\n           {/*  <div className=\"level\">\r\n            <div className=\"level-item\"> <span className=\"is-size-6 has-text-weight-medium\">Inventory  Module</span></div>\r\n            </div> */}\r\n            <div className=\"columns \">\r\n            <div className=\"column is-8 \">\r\n                <InventoryList />\r\n                </div>\r\n            <div className=\"column is-4 \">\r\n                {(state.InventoryModule.show ==='create')&&<InventoryCreate />}\r\n                {(state.InventoryModule.show ==='detail')&&<InventoryDetail  />}\r\n                {(state.InventoryModule.show ==='modify')&&<InventoryModify Inventory={selectedInventory} />}\r\n               \r\n            </div>\r\n\r\n            </div>                            \r\n            </section>\r\n       \r\n    )\r\n    \r\n}\r\n\r\nexport function InventoryCreate(){\r\n    const { register, handleSubmit,setValue} = useForm(); //, watch, errors, reset \r\n    const [error, setError] =useState(false)\r\n    const [success, setSuccess] =useState(false)\r\n    const [message,setMessage] = useState(\"\")\r\n    // eslint-disable-next-line\r\n    const [facility,setFacility] = useState()\r\n    const InventoryServ=client.service('inventory')\r\n    //const history = useHistory()\r\n    const {user} = useContext(UserContext) //,setUser\r\n    // eslint-disable-next-line\r\n    const [currentUser,setCurrentUser] = useState()\r\n\r\n\r\n\r\n    const getSearchfacility=(obj)=>{\r\n        \r\n        setValue(\"facility\", obj._id,  {\r\n            shouldValidate: true,\r\n            shouldDirty: true\r\n        })\r\n    }\r\n    \r\n    useEffect(() => {\r\n        setCurrentUser(user)\r\n        //console.log(currentUser)\r\n        return () => {\r\n        \r\n        }\r\n    }, [user])\r\n\r\n  //check user for facility or get list of facility  \r\n    useEffect(()=>{\r\n        //setFacility(user.activeInventory.FacilityId)//\r\n      if (!user.stacker){\r\n          console.log(currentUser)\r\n        setValue(\"facility\", user.currentEmployee.facilityDetail._id,  {\r\n            shouldValidate: true,\r\n            shouldDirty: true\r\n        }) \r\n      }\r\n    })\r\n\r\n    const onSubmit = (data,e) =>{\r\n        e.preventDefault();\r\n        setMessage(\"\")\r\n        setError(false)\r\n        setSuccess(false)\r\n         // data.createdby=user._id\r\n          console.log(data);\r\n          if (user.currentEmployee){\r\n         data.facility=user.currentEmployee.facilityDetail._id  // or from facility dropdown\r\n          }\r\n        InventoryServ.create(data)\r\n        .then((res)=>{\r\n                //console.log(JSON.stringify(res))\r\n                e.target.reset();\r\n               /*  setMessage(\"Created Inventory successfully\") */\r\n                setSuccess(true)\r\n                toast({\r\n                    message: 'Inventory created succesfully',\r\n                    type: 'is-success',\r\n                    dismissible: true,\r\n                    pauseOnHover: true,\r\n                  })\r\n                  setSuccess(false)\r\n            })\r\n            .catch((err)=>{\r\n                toast({\r\n                    message: 'Error creating Inventory ' + err,\r\n                    type: 'is-danger',\r\n                    dismissible: true,\r\n                    pauseOnHover: true,\r\n                  })\r\n            })\r\n\r\n      } \r\n\r\n    return (\r\n        <>\r\n            <div className=\"card \">\r\n            <div className=\"card-header\">\r\n                <p className=\"card-header-title\">\r\n                    Create Inventory: Product Entry- Initialization, Purchase Invoice, Audit\r\n                </p>\r\n            </div>\r\n            <div className=\"card-content vscrollable\">\r\n   \r\n            <form onSubmit={handleSubmit(onSubmit)}>\r\n            <div className=\"field\">    \r\n                <div class=\"control\">\r\n                    <div class=\"select is-small\">\r\n                        <select>\r\n                            <option>Purchase Invoice </option>\r\n                            <option>Initialization</option>\r\n                            <option>Audit</option>\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div className=\"field\">\r\n                <p className=\"control has-icons-left\"> {/* Audit/initialization/Purchase Invoice */}\r\n                    <input className=\"input is-small\" ref={register({ required: true })} name=\"type\" type=\"text\" placeholder=\"Type of Product Entry\"/>\r\n                    <span className=\"icon is-small is-left\">\r\n                    <i className=\" fas fa-user-md \"></i>\r\n                    </span>\r\n                </p>\r\n            </div>\r\n                <div className=\"field\">\r\n                    <p className=\"control has-icons-left has-icons-right\">\r\n                        <input className=\"input is-small\" ref={register({ required: true })}  name=\"supplier\" type=\"text\" placeholder=\"Supplier\" />\r\n                        <span className=\"icon is-small is-left\">\r\n                            <i className=\"fas fa-hospital\"></i>\r\n                        </span>                    \r\n                    </p>\r\n                </div>\r\n                <div className=\"field\">\r\n                    <p className=\"control has-icons-left has-icons-right\">\r\n                    <input className=\"input is-small\" ref={register({ required: true })}  name=\"date\" type=\"text\" placeholder=\"Date\" />\r\n                    <span className=\"icon is-small is-left\">\r\n                        <i className=\"fas fa-map-signs\"></i>\r\n                    </span>\r\n                    \r\n                </p>\r\n            </div>\r\n            \r\n            <div className=\"field\">\r\n                <p className=\"control has-icons-left\">\r\n                    <input className=\"input is-small\" ref={register({ required: true })} name=\"totalamount\" type=\"text\" placeholder=\" Total Amount\"/>\r\n                    <span className=\"icon is-small is-left\">\r\n                    <i className=\"fas fa-phone-alt\"></i>\r\n                    </span>\r\n                </p>\r\n            </div>\r\n           \r\n         {/* array of inventory items */}\r\n         <p className=\"control\">\r\n                    <button className=\"button is-info is-small  is-pulled-right\">\r\n                      <span className=\"is-small\"> +</span>\r\n                    </button>\r\n                </p>\r\n           <div className=\"field\"  /* style={ !user.stacker?{display:\"none\"}:{}} */ >\r\n                <ProductSearch  getSearchfacility={getSearchfacility} clear={success} /> \r\n                <p className=\"control has-icons-left \" style={{display:\"none\"}}>\r\n                    <input className=\"input is-small\" ref={register ({ required: true }) } /* add array no */ name=\"productId\" type=\"text\" placeholder=\"Product Id\" />\r\n                    <span className=\"icon is-small is-left\">\r\n                    <i className=\"fas  fa-map-marker-alt\"></i>\r\n                    </span>\r\n                </p>\r\n            </div>\r\n           \r\n               <div className=\"field\">\r\n                <p className=\"control has-icons-left\">\r\n                    <input className=\"input is-small\" ref={register({ required: true })} name=\"quantity\" type=\"text\" placeholder=\"Quantity\"  />\r\n                    <span className=\"icon is-small is-left\">\r\n                    <i className=\"fas fa-envelope\"></i>\r\n                    </span>\r\n                </p>\r\n                <label className=\"label is-small\">Base Unit</label>\r\n            </div> \r\n            <div className=\"field\">\r\n                <p className=\"control has-icons-left\">\r\n                    <input className=\"input is-small\" ref={register({ required: true })} name=\"costprice\" type=\"text\" placeholder=\"Cost Price\"  />\r\n                    <span className=\"icon is-small is-left\">\r\n                    <i className=\"fas fa-envelope\"></i>\r\n                    </span>\r\n                </p>\r\n            </div> \r\n           {/*  <div className=\"field\">\r\n                <div className=\"control has-icons-left\">\r\n                    <div className=\"dropdown \">\r\n                        <div className=\"dropdown-trigger\">\r\n                            <input className=\"input is-small\" ref={register({ required: true })} name=\"department\" type=\"text\" placeholder=\"Department\"/>\r\n                            <span className=\"icon is-small is-left\">\r\n                            <i className=\"fas fa-hospital-symbol\"></i>\r\n                            </span>\r\n                        </div>\r\n                        <div className=\"dropdown-menu\">\r\n                            <div className=\"dropdown-content\">\r\n                                <div className=\"dropdown-item\">\r\n                                    simpa\r\n                                </div>\r\n                                <div className=\"dropdown-item is-active\">\r\n                                    simpa 2\r\n                                </div>\r\n                                <div className=\"dropdown-item\">\r\n                                    simpa 3\r\n                                </div>\r\n                                <div className=\"dropdown-item\">\r\n                                    simpa 4\r\n                                </div>\r\n                            </div>\r\n                        </div>   \r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div className=\"field\">\r\n                <p className=\"control has-icons-left\">\r\n                    <input className=\"input is-small\" ref={register({ required: true })} name=\"deptunit\" type=\"text\" placeholder=\"Department Unit\"/>\r\n                    <span className=\"icon is-small is-left\">\r\n                    <i className=\"fas fa-clinic-medical\"></i>\r\n                    </span>\r\n                </p>\r\n            </div>\r\n            <div className=\"field\">\r\n                <p className=\"control has-icons-left\">\r\n                    <input className=\"input is-small\" ref={register({ required: true })} name=\"password\" type=\"text\" placeholder=\"password\"/>\r\n                    <span className=\"icon is-small is-left\">\r\n                    <i className=\"fas fa-clinic-medical\"></i>\r\n                    </span>\r\n                </p>\r\n            </div> */}\r\n            <div className=\"field\">\r\n                <p className=\"control\">\r\n                    <button className=\"button is-success is-small\">\r\n                        Create\r\n                    </button>\r\n                </p>\r\n            </div>\r\n            \r\n            </form>\r\n            </div>\r\n            </div>\r\n        </>\r\n    )\r\n   \r\n}\r\n\r\nexport function InventoryList(){\r\n   // const { register, handleSubmit, watch, errors } = useForm();\r\n    // eslint-disable-next-line\r\n    const [error, setError] =useState(false)\r\n     // eslint-disable-next-line\r\n    const [success, setSuccess] =useState(false)\r\n     // eslint-disable-next-line\r\n   const [message, setMessage] = useState(\"\") \r\n    const InventoryServ=client.service('inventory')\r\n    //const history = useHistory()\r\n   // const {user,setUser} = useContext(UserContext)\r\n    const [facilities,setFacilities]=useState([])\r\n     // eslint-disable-next-line\r\n   const [selectedInventory, setSelectedInventory]=useState() //\r\n    // eslint-disable-next-line\r\n    const {state,setState}=useContext(ObjectContext)\r\n    // eslint-disable-next-line\r\n    const {user,setUser}=useContext(UserContext)\r\n\r\n\r\n\r\n    const handleCreateNew = async()=>{\r\n        const    newInventoryModule={\r\n            selectedInventory:{},\r\n            show :'create'\r\n            }\r\n       await setState((prevstate)=>({...prevstate, InventoryModule:newInventoryModule}))\r\n       //console.log(state)\r\n    }\r\n\r\n    const handleRow= async(Inventory)=>{\r\n        //console.log(\"b4\",state)\r\n\r\n        //console.log(\"handlerow\",Inventory)\r\n\r\n        await setSelectedInventory(Inventory)\r\n\r\n        const    newInventoryModule={\r\n            selectedInventory:Inventory,\r\n            show :'detail'\r\n        }\r\n       await setState((prevstate)=>({...prevstate, InventoryModule:newInventoryModule}))\r\n       //console.log(state)\r\n\r\n    }\r\n\r\n   const handleSearch=(val)=>{\r\n       const field='name'\r\n       console.log(val)\r\n       InventoryServ.find({query: {\r\n                [field]: {\r\n                    $regex:val,\r\n                    $options:'i'\r\n                   \r\n                },\r\n               facility:user.currentEmployee.facilityDetail._id || \"\",\r\n                $limit:10,\r\n                $sort: {\r\n                    createdAt: -1\r\n                  }\r\n                    }}).then((res)=>{\r\n                console.log(res)\r\n               setFacilities(res.data)\r\n                setMessage(\" Inventory  fetched successfully\")\r\n                setSuccess(true) \r\n            })\r\n            .catch((err)=>{\r\n                console.log(err)\r\n                setMessage(\"Error fetching Inventory, probable network issues \"+ err )\r\n                setError(true)\r\n            })\r\n        }\r\n   \r\n        const getFacilities= async()=>{\r\n            if (user.currentEmployee){\r\n            \r\n        const findInventory= await InventoryServ.find(\r\n                {query: {\r\n                    facility:user.currentEmployee.facilityDetail._id,\r\n                    storeId:state.StoreModule.selectedStore._id,\r\n                    $limit:20,\r\n                    $sort: {\r\n                        createdAt: -1\r\n                    }\r\n                    }})\r\n\r\n         await setFacilities(findInventory.data)\r\n                }\r\n                else {\r\n                    if (user.stacker){\r\n                        const findInventory= await InventoryServ.find(\r\n                            {query: {\r\n                                \r\n                                $limit:20,\r\n                                $sort: {\r\n                                    createdAt: -1\r\n                                }\r\n                                }})\r\n            \r\n                    await setFacilities(findInventory.data)\r\n\r\n                    }\r\n                }\r\n          /*   .then((res)=>{\r\n                console.log(res)\r\n                    setFacilities(res.data)\r\n                    setMessage(\" Inventory  fetched successfully\")\r\n                    setSuccess(true)\r\n                })\r\n                .catch((err)=>{\r\n                    setMessage(\"Error creating Inventory, probable network issues \"+ err )\r\n                    setError(true)\r\n                }) */\r\n            }\r\n            \r\n            useEffect(() => {\r\n                setTimeout(() => {\r\n                    console.log(\"happy birthday\")\r\n                    //getFacilities(user)\r\n                }, 200);\r\n\r\n                return () => {\r\n                    \r\n\r\n                }\r\n            },[])\r\n\r\n            useEffect(() => {\r\n               \r\n                if (user){\r\n                    getFacilities()\r\n                }else{\r\n                    /* const localUser= localStorage.getItem(\"user\")\r\n                    const user1=JSON.parse(localUser)\r\n                    console.log(localUser)\r\n                    console.log(user1)\r\n                    fetchUser(user1)\r\n                    console.log(user)\r\n                    getFacilities(user) */\r\n                }\r\n                InventoryServ.on('created', (obj)=>getFacilities())\r\n                InventoryServ.on('updated', (obj)=>getFacilities())\r\n                InventoryServ.on('patched', (obj)=>getFacilities())\r\n                InventoryServ.on('removed', (obj)=>getFacilities())\r\n                return () => {\r\n                \r\n                }\r\n            },[])\r\n        \r\n        useEffect(() => {\r\n            getFacilities()\r\n            return () => {\r\n               \r\n            }\r\n        }, [state.StoreModule.selectedStore])\r\n\r\n    //todo: pagination and vertical scroll bar\r\n\r\n    return(\r\n        <>\r\n           {user?( <>  \r\n                <div className=\"level\">\r\n                    <div className=\"level-left\">\r\n                        <div className=\"level-item\">\r\n                            <div className=\"field\">\r\n                                <p className=\"control has-icons-left  \">\r\n                                    <DebounceInput className=\"input is-small \" \r\n                                        type=\"text\" placeholder=\"Search Inventory\"\r\n                                        minLength={3}\r\n                                        debounceTimeout={400}\r\n                                        onChange={(e)=>handleSearch(e.target.value)} />\r\n                                    <span className=\"icon is-small is-left\">\r\n                                        <i className=\"fas fa-search\"></i>\r\n                                    </span>\r\n                                </p>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"level-item\"> <span className=\"is-size-6 has-text-weight-medium\">List of Inventories </span></div>\r\n                    <div className=\"level-right\">\r\n                        <div className=\"level-item\"> \r\n                            <div className=\"level-item\"><div className=\"button is-success is-small\" onClick={handleCreateNew}>New</div></div>\r\n                        </div>\r\n                    </div>\r\n\r\n                </div>\r\n                <div className=\"table-container pullup \">\r\n                                <table className=\"table is-striped is-narrow is-hoverable is-fullwidth is-scrollable \">\r\n                                    <thead>\r\n                                        <tr>\r\n                                        <th><abbr title=\"Serial No\">S/No</abbr></th>\r\n                                        {/* <th><abbr title=\"Category\">Category</abbr></th> */}\r\n                                        <th>Product</th>\r\n                                        <th><abbr title=\"Quantity\">Quantity</abbr></th>\r\n                                        <th><abbr title=\"Base Unit\">Base Unit</abbr></th>\r\n                                        <th><abbr title=\"Stock Value\">Stock Value</abbr></th>\r\n                                         <th><abbr title=\"Cost Price\">Cost Price</abbr></th>\r\n                                        <th><abbr title=\"Selling Price\">Selling Price</abbr></th>\r\n                                        <th><abbr title=\"Re-Order Level\">Re-Order Level</abbr></th>\r\n                                        <th><abbr title=\"Expiry\">Expiry</abbr></th> \r\n                                        <th><abbr title=\"Actions\">Actions</abbr></th>\r\n                                        </tr>\r\n                                    </thead>\r\n                                    <tfoot>\r\n                                        \r\n                                    </tfoot>\r\n                                    <tbody>\r\n                                        {facilities.map((Inventory, i)=>(\r\n\r\n                                            <tr key={Inventory._id} onClick={()=>handleRow(Inventory)}>\r\n                                            <th>{i+1}</th>\r\n                                            {/* <td>{Inventory.productDetail.category}</td> */}\r\n                                            <th>{Inventory.name}</th>\r\n                                            <td>{Inventory.quantity}</td>\r\n                                            <td>{Inventory.baseunit}</td>\r\n                                            <td>{Inventory.stockvalue}</td>\r\n                                            <td>{Inventory.costprice}</td>\r\n                                            <td>{Inventory.sellingprice}</td>\r\n                                            <td>{Inventory.reorder_level}</td> \r\n                                            <td>{Inventory.expiry}</td>\r\n                                            <td><span   className=\"showAction\"  >...</span></td>\r\n                                           \r\n                                            </tr>\r\n\r\n                                        ))}\r\n                                    </tbody>\r\n                                    </table>\r\n                                    \r\n                </div>              \r\n            </>):<div>loading</div>}\r\n            </>\r\n              \r\n    )\r\n    }\r\n\r\n\r\nexport function InventoryDetail(){\r\n    //const { register, handleSubmit, watch, setValue } = useForm(); //errors,\r\n     // eslint-disable-next-line\r\n    const [error, setError] =useState(false) //, \r\n    //const [success, setSuccess] =useState(false)\r\n     // eslint-disable-next-line\r\n    const [message, setMessage] = useState(\"\") //,\r\n    //const InventoryServ=client.service('/Inventory')\r\n    //const history = useHistory()\r\n    //const {user,setUser} = useContext(UserContext)\r\n    const {state,setState} = useContext(ObjectContext)\r\n    const {user} = useContext(UserContext) //,setUser\r\n    \r\n   \r\n\r\n   const Inventory =state.InventoryModule.selectedInventory \r\n   console.log(\"selected\",Inventory)\r\n\r\n   \r\n  const getFacilities= async()=>{\r\n    \r\n    \r\n     const findProductEntry= await client.service('productentry').find(\r\n        {query: {\r\n            'productitems.productId':Inventory.productId,\r\n            facility:user.currentEmployee.facilityDetail._id,\r\n            storeId:state.StoreModule.selectedStore._id,\r\n            $limit:20,\r\n            $sort: {\r\n                createdAt: -1\r\n            }\r\n            }})\r\n\r\n        console.log(findProductEntry)\r\n       }\r\n    \r\n       useEffect(() => {\r\n        getFacilities()\r\n           return () => {\r\n               \r\n           }\r\n       }, [Inventory])\r\n /* await setFacilities(findProductEntry.data)\r\n        }\r\n        else {\r\n            if (user.stacker){ */\r\n                /* toast({\r\n                    message: 'You do not qualify to view this',\r\n                    type: 'is-danger',\r\n                    dismissible: true,\r\n                    pauseOnHover: true,\r\n                  }) \r\n                  return */\r\n               /*  const findProductEntry= await ProductEntryServ.find(\r\n                    {query: {\r\n                        \r\n                        $limit:20,\r\n                        $sort: {\r\n                            createdAt: -1\r\n                        }\r\n                        }})\r\n    \r\n            await setFacilities(findProductEntry.data)\r\n\r\n            }\r\n        }  */\r\n  /*   .then((res)=>{\r\n        console.log(res)\r\n            setFacilities(res.data)\r\n            setMessage(\" ProductEntry  fetched successfully\")\r\n            setSuccess(true)\r\n        })\r\n        .catch((err)=>{\r\n            setMessage(\"Error creating ProductEntry, probable network issues \"+ err )\r\n            setError(true)\r\n        }) */\r\n    \r\n    \r\n\r\n\r\n\r\n    const handleEdit= async()=>{\r\n        const    newInventoryModule={\r\n            selectedInventory:Inventory,\r\n            show :'modify'\r\n        }\r\n       await setState((prevstate)=>({...prevstate, InventoryModule:newInventoryModule}))\r\n       //console.log(state)\r\n       \r\n    }\r\n \r\n    return (\r\n        <>\r\n        <div className=\"card \">\r\n            <div className=\"card-header\">\r\n                <p className=\"card-header-title\">\r\n                    Inventory Details\r\n                </p>\r\n            </div>\r\n            <div className=\"card-content vscrollable\">\r\n           \r\n                <table> \r\n                <tbody>         \r\n                <tr>\r\n                    <td>\r\n                \r\n                    <label className=\"label is-small\"> <span className=\"icon is-small is-left\">\r\n                            <i className=\"fas fa-hospital\"></i>\r\n                        </span>                    \r\n                        Product Name: \r\n                        </label>\r\n                        </td>\r\n                        <td>\r\n                        <span className=\"is-size-7 padleft\"   name=\"name\"><strong> {Inventory.name} </strong></span>\r\n                        </td>\r\n                    </tr>\r\n                   {/*  <tr>\r\n                    <td>\r\n                <label className=\"label is-small\"><span className=\"icon is-small is-left\">\r\n                        <i className=\"fas fa-map-signs\"></i>\r\n                    </span>Inventory Type:\r\n                    </label></td>\r\n                    <td>\r\n                    <span className=\"is-size-7 padleft\"   name=\"InventoryType\">{Inventory.InventoryType} </span> \r\n                    </td>\r\n                </tr> */}\r\n\r\n            </tbody> \r\n            </table> \r\n           \r\n            <div className=\"field mt-2 is-grouped\">\r\n                <p className=\"control\">\r\n                    <button className=\"button is-success is-small\" onClick={handleEdit}>\r\n                        Set Price\r\n                    </button>\r\n                </p>\r\n                <p className=\"control\">\r\n                    <button className=\"button is-danger is-small\"  /*  onClick={handleSetPrice} */>\r\n                        Audit\r\n                    </button>\r\n                </p>\r\n                <p className=\"control\">\r\n                    <button className=\"button is-info is-small\" /* onClick={handleEdit} */>\r\n                        Transaction History\r\n                    </button>\r\n                </p>\r\n                <p className=\"control\">\r\n                    <button className=\"button is-warning is-small\" /* onClick={handleEdit} */>\r\n                        Reorder Level\r\n                    </button>\r\n                </p>\r\n            </div>\r\n            { error && <div className=\"message\"> {message}</div>}\r\n           \r\n        </div>\r\n        </div>\r\n        </>\r\n    )\r\n   \r\n   \r\n}\r\n\r\nexport function InventoryModify(){\r\n    const { register, handleSubmit, setValue,reset, errors } = useForm(); //watch, errors,\r\n    // eslint-disable-next-line \r\n    const [error, setError] =useState(false)\r\n    // eslint-disable-next-line \r\n    const [success, setSuccess] =useState(false)\r\n    // eslint-disable-next-line \r\n    const [message,setMessage] = useState(\"\")\r\n    const [billservice,setBillService] = useState()\r\n    // eslint-disable-next-line \r\n    const InventoryServ=client.service('inventory')\r\n    //const history = useHistory()\r\n     // eslint-disable-next-line\r\n    const {user} = useContext(UserContext)\r\n    const {state,setState} = useContext(ObjectContext)\r\n    const billServ=client.service('billing')\r\n\r\n    const Inventory =state.InventoryModule.selectedInventory // set inventory\r\n    const handleSetPrice = async()=>{\r\n    \r\n        const service = await  billServ.get(Inventory.billingId) // get the service\r\n            const contractSel= service.contracts.filter(element=>(element.source_org===Inventory.facility && element.dest_org===Inventory.facility))\r\n            \r\n            setValue(\"price\", contractSel[0].price,  {\r\n                shouldValidate: true,\r\n                shouldDirty: true\r\n            })\r\n            setValue(\"oldprice\", contractSel[0].price,  {\r\n                shouldValidate: true,\r\n                shouldDirty: true\r\n            })\r\n            await setBillService(service)\r\n            console.log(contractSel,service)\r\n    }\r\n \r\n        useEffect(() => {\r\n            handleSetPrice()\r\n     \r\n            return () => {\r\n                \r\n            }\r\n        },[])\r\n\r\n   const handleCancel=async()=>{\r\n   \r\n    const    newInventoryModule={\r\n        selectedInventory:{},\r\n        show :'detail'\r\n      }\r\n        await setState((prevstate)=>({...prevstate, InventoryModule:newInventoryModule}))\r\n   //console.log(state)\r\n           }\r\n\r\n\r\n        const changeState =()=>{\r\n            const    newInventoryModule={\r\n                selectedInventory:{},\r\n                show :'detail'\r\n            }\r\n        setState((prevstate)=>({...prevstate, InventoryModule:newInventoryModule}))\r\n\r\n        }\r\n\r\n\r\n    const handleDelete=async()=>{\r\n        let conf=window.confirm(\"Are you sure you want to delete this data?\")\r\n        \r\n        const dleteId=Inventory._id\r\n        if (conf){\r\n             \r\n        InventoryServ.remove(dleteId)\r\n        .then((res)=>{\r\n                //console.log(JSON.stringify(res))\r\n                reset();\r\n               /*  setMessage(\"Deleted Inventory successfully\")\r\n                setSuccess(true)\r\n                changeState()\r\n               setTimeout(() => {\r\n                setSuccess(false)\r\n                }, 200); */\r\n                toast({\r\n                    message: 'Inventory deleted succesfully',\r\n                    type: 'is-success',\r\n                    dismissible: true,\r\n                    pauseOnHover: true,\r\n                  })\r\n                changeState()\r\n            })\r\n            .catch((err)=>{\r\n               // setMessage(\"Error deleting Inventory, probable network issues \"+ err )\r\n               // setError(true)\r\n                toast({\r\n                    message: \"Error deleting Inventory, probable network issues or \"+ err,\r\n                    type: 'is-danger',\r\n                    dismissible: true,\r\n                    pauseOnHover: true,\r\n                  })\r\n            })\r\n        }\r\n    }\r\n        \r\n\r\n   /* ()=> setValue(\"firstName\", \"Bill\", , {\r\n            shouldValidate: true,\r\n            shouldDirty: true\r\n          })) */\r\n    const onSubmit = (data,e) =>{\r\n        e.preventDefault();\r\n        \r\n        setSuccess(false)\r\n        console.log(data)\r\n       // data.facility=Inventory.facility\r\n          //console.log(data);\r\n          const contractSel= billservice.contracts.filter(element=>(element.source_org===Inventory.facility && element.dest_org===Inventory.facility))\r\n          contractSel[0].price=data.price \r\n          billServ.patch(billservice._id,billservice)\r\n        .then((res)=>{\r\n                //console.log(JSON.stringify(res))\r\n               // e.target.reset();\r\n               // setMessage(\"updated Inventory successfully\")\r\n                 toast({\r\n                    message: 'Price updated succesfully',\r\n                    type: 'is-success',\r\n                    dismissible: true,\r\n                    pauseOnHover: true,\r\n                  })\r\n                  \r\n                changeState()\r\n\r\n            })\r\n            .catch((err)=>{\r\n                //setMessage(\"Error creating Inventory, probable network issues \"+ err )\r\n               // setError(true)\r\n                toast({\r\n                    message: \"Error updating Price, probable network issues or \"+ err,\r\n                    type: 'is-danger',\r\n                    dismissible: true,\r\n                    pauseOnHover: true,\r\n                  })\r\n            }) \r\n\r\n      } \r\n     \r\n      \r\n    return (\r\n        \r\n        <>\r\n        <div className=\"card \">\r\n            <div className=\"card-header\">\r\n                <p className=\"card-header-title\">\r\n                    Set Price for {Inventory.name} per {Inventory.baseunit}\r\n                </p>\r\n            </div>\r\n            <div className=\"card-content vscrollable\">\r\n           \r\n            <form onSubmit={handleSubmit(onSubmit)}>\r\n                <div className=\"field\">\r\n                    <label className=\"label is-small\"> New Selling Price\r\n                    <p className=\"control has-icons-left has-icons-right\">\r\n                        <input className=\"input  is-small\" ref={register({ required: true })}  name=\"price\" type=\"text\" placeholder=\"Name\" />\r\n                        <span className=\"icon is-small is-left\">\r\n                            <i className=\"fas fa-hospital\"></i>\r\n                        </span>                    \r\n                    </p>\r\n                    </label>\r\n                    </div>\r\n                <div className=\"field\">\r\n                <label className=\"label is-small\">Old Price\r\n                    <p className=\"control has-icons-left has-icons-right\">\r\n                    <input className=\"input is-small \" ref={register({ required: true })} disabled name=\"oldprice\" type=\"text\" placeholder=\"Inventory Type\" />\r\n                    <span className=\"icon is-small is-left\">\r\n                        <i className=\"fas fa-map-signs\"></i>\r\n                    </span>\r\n                    \r\n                </p>\r\n                </label>\r\n                </div>\r\n           \r\n           \r\n           \r\n            </form>\r\n            \r\n            <div className=\"field  is-grouped mt-2\" >\r\n                <p className=\"control\">\r\n                    <button type=\"submit\" className=\"button is-success is-small\" onClick={handleSubmit(onSubmit)}>\r\n                        Save\r\n                    </button>\r\n                </p>\r\n                <p className=\"control\">\r\n                    <button className=\"button is-warning is-small\" onClick={handleCancel}>\r\n                        Cancel\r\n                    </button>\r\n                </p>\r\n               {/*  <p className=\"control\">\r\n                    <button className=\"button is-danger is-small\" onClick={()=>handleDelete()} type=\"delete\">\r\n                       Delete\r\n                    </button>\r\n                </p> */}\r\n            </div>\r\n        </div>\r\n        </div>\r\n        </>\r\n    )\r\n   \r\n   \r\n                \r\n}   \r\n\r\nexport  function ProductSearch({getSearchfacility,clear}) {\r\n    \r\n    const facilityServ=client.service('products')\r\n    const [facilities,setFacilities]=useState([])\r\n     // eslint-disable-next-line\r\n     const [searchError, setSearchError] =useState(false)\r\n     // eslint-disable-next-line\r\n    const [showPanel, setShowPanel] =useState(false)\r\n     // eslint-disable-next-line\r\n   const [searchMessage, setSearchMessage] = useState(\"\") \r\n   // eslint-disable-next-line \r\n   const [simpa,setSimpa]=useState(\"\")\r\n   // eslint-disable-next-line \r\n   const [chosen,setChosen]=useState(false)\r\n   // eslint-disable-next-line \r\n   const [count,setCount]=useState(0)\r\n   const inputEl=useRef(null)\r\n\r\n\r\n   const handleRow= async(obj)=>{\r\n        await setChosen(true)\r\n        //alert(\"something is chaning\")\r\n       getSearchfacility(obj)\r\n       \r\n       await setSimpa(obj.facilityName)\r\n       \r\n        // setSelectedFacility(obj)\r\n        setShowPanel(false)\r\n        await setCount(2)\r\n        /* const    newfacilityModule={\r\n            selectedFacility:facility,\r\n            show :'detail'\r\n        }\r\n   await setState((prevstate)=>({...prevstate, facilityModule:newfacilityModule})) */\r\n   //console.log(state)\r\n}\r\n    const handleBlur=async(e)=>{\r\n         if (count===2){\r\n             console.log(\"stuff was chosen\")\r\n         }\r\n       \r\n       /*  console.log(\"blur\")\r\n         setShowPanel(false)\r\n        console.log(JSON.stringify(simpa))\r\n        if (simpa===\"\"){\r\n            console.log(facilities.length)\r\n            setSimpa(\"abc\")\r\n            setSimpa(\"\")\r\n            setFacilities([])\r\n            inputEl.current.setValue=\"\"\r\n        }\r\n        console.log(facilities.length)\r\n        console.log(inputEl.current) */\r\n    }\r\n    const handleSearch=async(val)=>{\r\n        \r\n        const field='name' //field variable\r\n       \r\n        if (val.length>=3){\r\n            facilityServ.find({query: {     //service\r\n                 [field]: {\r\n                     $regex:val,\r\n                     $options:'i'\r\n                    \r\n                 },\r\n                 $limit:10,\r\n                 $sort: {\r\n                     createdAt: -1\r\n                   }\r\n                     }}).then((res)=>{\r\n              console.log(\"facility  fetched successfully\") \r\n                setFacilities(res.data)\r\n                 setSearchMessage(\" facility  fetched successfully\")\r\n                 setShowPanel(true)\r\n             })\r\n             .catch((err)=>{\r\n                 console.log(err)\r\n                 setSearchMessage(\"Error searching facility, probable network issues \"+ err )\r\n                 setSearchError(true)\r\n             })\r\n         }\r\n        else{\r\n            console.log(\"less than 3 \")\r\n            console.log(val)\r\n            setShowPanel(false)\r\n            await setFacilities([])\r\n            console.log(facilities)\r\n        }\r\n    }\r\n    useEffect(() => {\r\n       if (clear){\r\n           setSimpa(\"\")\r\n       }\r\n        return () => {\r\n            \r\n        }\r\n    }, [clear] )\r\n    return (\r\n        <div>\r\n            <div className=\"field\">\r\n                <div className=\"control has-icons-left  \">\r\n                    <div className={`dropdown ${showPanel?\"is-active\":\"\"}`}>\r\n                        <div className=\"dropdown-trigger\">\r\n                            <DebounceInput className=\"input is-small \" \r\n                                type=\"text\" placeholder=\"Search Product\"\r\n                                value={simpa}\r\n                                minLength={1}\r\n                                debounceTimeout={400}\r\n                                onBlur={(e)=>handleBlur(e)}\r\n                                onChange={(e)=>handleSearch(e.target.value)}\r\n                                inputRef={inputEl}\r\n                                  />\r\n                            <span className=\"icon is-small is-left\">\r\n                                <i className=\"fas fa-search\"></i>\r\n                            </span>\r\n                        </div>\r\n                        {searchError&&<div>{searchMessage}</div>}\r\n                        <div className=\"dropdown-menu\" >\r\n                            <div className=\"dropdown-content\">\r\n                            {facilities.map((facility, i)=>(\r\n                                    \r\n                                    <div className=\"dropdown-item\" key={facility._id} onClick={()=>handleRow(facility)}>\r\n                                        \r\n                                        <span>{facility.facilityName}</span>\r\n                                        \r\n                                    </div>\r\n                                    \r\n                                    ))}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n          \r\n        </div>\r\n    )\r\n}","C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\Clinic\\Clinic.js",["338","339","340","341","342"],"C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\Finance\\ClientBill.js",["343","344","345","346","347","348","349","350","351","352","353","354","355"],"C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\inventory\\BillDispenseCreate.js",["356","357","358","359","360","361","362","363","364"],"C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\EncounterMgt\\EncounterMain.js",["365","366","367","368","369","370","371","372"],"import React, {useState,useContext, useEffect,useRef} from 'react'\r\nimport client from '../../feathers'\r\nimport {DebounceInput} from 'react-debounce-input';\r\nimport { useForm } from \"react-hook-form\";\r\nimport {DocumentClassList} from './DocumentClass'\r\n//import {useHistory} from 'react-router-dom'\r\nimport {UserContext,ObjectContext} from '../../context'\r\nimport {toast} from 'bulma-toast'\r\nimport {format, formatDistanceToNowStrict } from 'date-fns'\r\nimport  VideoConference  from '../utils/VideoConference';\r\nimport  Prescription, { PrescriptionCreate } from './Prescription';\r\n\r\nexport default function EncounterMain({nopresc}) {\r\n // const { register, handleSubmit, watch, errors } = useForm();\r\n    // eslint-disable-next-line\r\n    const [error, setError] =useState(false)\r\n     // eslint-disable-next-line\r\n    const [success, setSuccess] =useState(false)\r\n     // eslint-disable-next-line\r\n   const [message, setMessage] = useState(\"\") \r\n    const ClinicServ=client.service('clinicaldocument')\r\n    //const history = useHistory()\r\n   // const {user,setUser} = useContext(UserContext)\r\n    const [facilities,setFacilities]=useState([])\r\n     // eslint-disable-next-line\r\n   const [selectedClinic, setSelectedClinic]=useState() //\r\n    // eslint-disable-next-line\r\n    const {state,setState}=useContext(ObjectContext)\r\n    // eslint-disable-next-line\r\n    const {user,setUser}=useContext(UserContext)\r\n    const [showModal,setShowModal]=useState(false)\r\n    const [showPrescriptionModal,setShowPrescriptionModal]=useState(false)\r\n    // tracking on which page we currently are\r\n    const [page, setPage] = useState(0);\r\n    // add loader refrence \r\n    const loader = useRef(null);\r\n    \r\n    const standalone=false\r\n    \r\n\r\n    const handleNewDocument= async()=>{\r\n        await setShowModal(true)                                                                                                                                                        \r\n        console.log( showModal)\r\n    }\r\n    const handleNewPrescription= async()=>{\r\n        await setShowPrescriptionModal(true)                                                                                                                                                        \r\n        console.log( showPrescriptionModal)\r\n    }\r\n\r\n\r\n    const handleCreateNew = async()=>{\r\n        const    newClinicModule={\r\n            selectedClinic:{},\r\n            show :'create'\r\n            }\r\n       await setState((prevstate)=>({...prevstate, ClinicModule:newClinicModule}))\r\n       //console.log(state)\r\n        \r\n\r\n    }\r\n    const handleRow= async(Clinic)=>{\r\n        //console.log(\"b4\",state)\r\n\r\n        //console.log(\"handlerow\",Clinic)\r\n\r\n        await setSelectedClinic(Clinic)\r\n\r\n        const    newClinicModule={\r\n            selectedClinic:Clinic,\r\n            show :'detail'\r\n        }\r\n       await setState((prevstate)=>({...prevstate, ClinicModule:newClinicModule}))\r\n       //console.log(state)\r\n       Clinic.show=!Clinic.show\r\n\r\n    }\r\n\r\n   const handleSearch=(val)=>{\r\n       const field='documentname'\r\n       console.log(val)\r\n       ClinicServ.find({query: {\r\n                [field]: {\r\n                    $regex:val,\r\n                    $options:'i'\r\n                   \r\n                },\r\n              // facility:user.currentEmployee.facilityDetail._id || \"\",\r\n               // locationType:\"Clinic\",\r\n               client:state.ClientModule.selectedClient._id,\r\n               $limit:10,\r\n                $sort: {\r\n                    name: 1\r\n                  }\r\n                    }}).then((res)=>{\r\n                console.log(res)\r\n               setFacilities(res.data)\r\n                setMessage(\" Clinic  fetched successfully\")\r\n                setSuccess(true) \r\n            })\r\n            .catch((err)=>{\r\n                console.log(err)\r\n                setMessage(\"Error fetching Clinic, probable network issues \"+ err )\r\n                setError(true)\r\n            })\r\n        }\r\n   \r\n    const getFacilities= async(page=0)=>{\r\n            /* const limit=20\r\n            alert(page) */\r\n            if (user.currentEmployee){\r\n            \r\n        const findClinic= await ClinicServ.find(\r\n                {query: {\r\n                    //locationType:\"Clinic\",\r\n                    //facility:user.currentEmployee.facilityDetail._id,\r\n                    client:state.ClientModule.selectedClient._id,\r\n                    $limit:20,\r\n                   /*  $skip:page*limit, */\r\n                    $sort: {\r\n                        createdAt: -1\r\n                    }\r\n                    }})\r\n            const total= findClinic.total\r\n            const ulimit=total*page\r\n           /*  if (total>(ulimit)){ //only load if we have not reached the total\r\n                alert(\"skip:\",ulimit )\r\n                console.log(\"skip:\",ulimit ) */\r\n            await setFacilities(findClinic.data)\r\n            console.log(findClinic.data)\r\n           /*  } */\r\n                }\r\n                else {\r\n                    if (user.stacker){\r\n                        const findClinic= await ClinicServ.find(\r\n                            {query: {\r\n                                client:state.ClientModule.selectedClient._id,\r\n                                    $limit:20,\r\n                                    $sort: {\r\n                                        createdAt: -1\r\n                                    }\r\n                                }})\r\n            \r\n                    await setFacilities(findClinic.data)\r\n\r\n                    }\r\n                }\r\n          /*   .then((res)=>{\r\n                console.log(res)\r\n                    setFacilities(res.data)\r\n                    setMessage(\" Clinic  fetched successfully\")\r\n                    setSuccess(true)\r\n                })\r\n                .catch((err)=>{\r\n                    setMessage(\"Error creating Clinic, probable network issues \"+ err )\r\n                    setError(true)\r\n                }) */\r\n            }\r\n            \r\n           /*  useEffect(() => {\r\n                setTimeout(() => {\r\n                    console.log(\"happy birthday\")\r\n                    //getFacilities(user)\r\n                }, 200);\r\n\r\n                return () => {\r\n                    \r\n\r\n                }\r\n            },[]) */\r\n\r\n            useEffect(() => {\r\n                getFacilities()\r\n                if (user){\r\n                    \r\n                }else{\r\n                    /* const localUser= localStorage.getItem(\"user\")\r\n                    const user1=JSON.parse(localUser)\r\n                    console.log(localUser)\r\n                    console.log(user1)\r\n                    fetchUser(user1)\r\n                    console.log(user)\r\n                    getFacilities(user) */\r\n                }\r\n                ClinicServ.on('created', (obj)=>getFacilities(page))\r\n                ClinicServ.on('updated', (obj)=>getFacilities(page))\r\n                ClinicServ.on('patched', (obj)=>getFacilities(page))\r\n                ClinicServ.on('removed', (obj)=>getFacilities(page))\r\n\r\n                /* var options = {\r\n                    root: null,\r\n                    rootMargin: \"20px\",\r\n                    threshold: 1.0\r\n                 }; */\r\n                // initialize IntersectionObserver\r\n                // and attaching to Load More div\r\n                /*  const observer = new IntersectionObserver(handleObserver, options);\r\n                 if (loader.current) {\r\n                    observer.observe(loader.current)\r\n                 } */\r\n                return () => {\r\n                \r\n                }\r\n            },[])\r\n           /*  useEffect(() => {\r\n                // here we simulate adding new posts to List\r\n                getFacilities()\r\n            }, [page]) */\r\n\r\n             // here we handle what happens when user scrolls to Load More div\r\n            // in this case we just update page variable\r\n                /* const handleObserver = (entities) => {\r\n                    const target = entities[0];\r\n                    if (target.isIntersecting) {   \r\n                        setPage((page) => page + 1) //load more \r\n                        \r\n                    }\r\n                } */\r\n\r\n    return (\r\n        <div>\r\n            <VideoConference/>\r\n            <div className=\"level\">\r\n                    <div className=\"level-left\">\r\n                        <div className=\"level-item\">\r\n                            <div className=\"field\">\r\n                                <p className=\"control has-icons-left  \">\r\n                                    <DebounceInput className=\"input is-small \" \r\n                                        type=\"text\" placeholder=\"Search documentation\"\r\n                                        minLength={3}\r\n                                        debounceTimeout={400}\r\n                                        onChange={(e)=>handleSearch(e.target.value)} />\r\n                                    <span className=\"icon is-small is-left\">\r\n                                        <i className=\"fas fa-search\"></i>\r\n                                    </span>\r\n                                </p>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                   {/*  <div className=\"level-item\"> <span className=\"is-size-6 has-text-weight-medium\">List of Clinics</span></div> */}\r\n                    <div className=\"level-right\">\r\n                { !standalone &&   <div className=\"level-item\"> \r\n                            <div className=\"level-item\">\r\n                           {!nopresc && <div className=\"button is-danger is-small mr-2\" onClick={handleNewPrescription}>Presciption</div>}\r\n                                <div className=\"button is-success is-small\" onClick={handleNewDocument}>New Document</div>\r\n                                </div>\r\n                        </div>}\r\n                    </div>\r\n\r\n                </div>\r\n                \r\n                <div className=\" pullup \">\r\n                                <div className=\" is-fullwidth vscrollable pr-1\">\r\n                                   \r\n                                        {facilities.map((Clinic, i)=>(\r\n\r\n                                            <div key={Clinic._id}  onClick={()=>handleRow(Clinic)}   className={Clinic._id===(selectedClinic?._id||null)?\"is-selected\":\"\"}>\r\n                                               <div className=\"card mt-1 hovercard\">\r\n                                                    <header className=\"card-header\" onClick={(Clinic)=>Clinic.show=!Clinic.show}>\r\n                                                        <div className=\"card-header-title\">\r\n                                                        <div className=\"docdate\">{formatDistanceToNowStrict(new Date(Clinic.createdAt),{addSuffix: true})} <br/><span>{format(new Date(Clinic.createdAt),'dd-MM-yy')}</span></div> {Clinic.documentname} by {Clinic.createdByname} at {Clinic.location},{Clinic.facilityname} \r\n                                                        <p className=\"right ml-2 mr-0\">{Clinic.status} </p> \r\n                                                        </div>\r\n                                                       {/*  <button className=\"card-header-icon\" aria-label=\"more options\">\r\n                                                        <span className=\"icon\">\r\n                                                            <i className=\"fas fa-angle-down\" aria-hidden=\"true\"></i>\r\n                                                        </span>\r\n                                                        </button> */}\r\n                                                    </header>\r\n                                                  {Clinic.documentname!==\"Prescription\" &&  <div className={Clinic.show?\"card-content p-1\":\"card-content p-1 is-hidden\"}>\r\n                                                        { Object.entries(Clinic.documentdetail).map(([keys,value],i)=>(\r\n                                                            <div className=\"field is-horizontal\"> \r\n                                                                    <div className=\"field-label\"> \r\n                                                                        <label className=\"label is-size-7\" key={i}>\r\n                                                                            {keys}:\r\n                                                                            </label>\r\n                                                                    </div>\r\n                                                                    <div className=\"field-body\"> \r\n                                                                        <div className=\"field\" >\r\n                                                                            {value}   \r\n                                                                        </div>  \r\n                                                                    </div>                                                 \r\n                                                            </div>\r\n                                                            ))\r\n                                                        }\r\n                                                </div>}\r\n                                                {Clinic.documentname===\"Prescription\" &&  \r\n                                                <div className={Clinic.show?\"card-content p-1\":\"card-content p-1 is-hidden\"}>\r\n                                                        \r\n                                                        {(Clinic.documentdetail.length>0) && <div>\r\n                                                            <label>Medications:</label>\r\n                                                        <table className=\"table is-striped  is-hoverable is-fullwidth is-scrollable mr-2\">\r\n                                                                <thead>\r\n                                                                    <tr>\r\n                                                                    <th><abbr title=\"Serial No\">S/No</abbr></th>\r\n                                                                \r\n                                                                    <th><abbr title=\"Type\">Medication</abbr></th>\r\n                                                                    <th><abbr title=\"Destination\">Destination</abbr></th>\r\n                                                                    </tr>\r\n                                                                </thead>\r\n                                                                <tfoot>\r\n                                                                    \r\n                                                                </tfoot>\r\n                                                                <tbody>\r\n                                                                { Clinic.documentdetail.map((ProductEntry, i)=>(\r\n\r\n                                                                        <tr key={i}>\r\n                                                                        <th>{i+1}</th>\r\n                                                                        {/* <td>{ProductEntry.name}</td> */}\r\n                                                                        <td>{ProductEntry.medication}<br/>\r\n                                                                        <span className=\"help is-size-7\">{ProductEntry.instruction}</span></td> \r\n                                                                        <td>{ProductEntry.destination}</td>                                                                     \r\n                                                                        </tr>\r\n\r\n                                                                    ))}\r\n                                                                </tbody>\r\n                                                                </table>\r\n                                                                </div>}                                                   \r\n                                                            </div>}\r\n                                                    </div>                                           \r\n                                            </div>\r\n\r\n                                        ))}\r\n                                      {/* <!-- Add Ref to Load More div --> */}\r\n                                       {/*  <div className=\"loading\" ref={loader}>\r\n                                                <h2>Load More</h2>\r\n                                    </div> */}\r\n                                </div>\r\n                                    \r\n                </div> \r\n                <div className={`modal  ${showModal?\"is-active\":\"\"}` }>\r\n                                    <div className=\"modal-background\"></div>\r\n                                    <div className=\"modal-card \">\r\n                                        <header className=\"modal-card-head\">\r\n                                        <p className=\"modal-card-title\">Choose Document Class</p>\r\n                                        <button className=\"delete\" aria-label=\"close\"  onClick={()=>setShowModal(false)}></button>\r\n                                        </header>\r\n                                        <section className=\"modal-card-body\">\r\n                                        <DocumentClassList standalone=\"true\" />\r\n                                        </section>\r\n                                        {/* <footer className=\"modal-card-foot\">\r\n                                        <button className=\"button is-success\">Save changes</button>\r\n                                        <button className=\"button\">Cancel</button>\r\n                                        </footer> */}\r\n                                    </div>\r\n                                </div>\r\n                                <div className={`modal ${showPrescriptionModal?\"is-active\":\"\"}` }>\r\n                                    <div className=\"modal-background\"></div>\r\n                                    <div className=\"modal-card larger\">\r\n                                        <header className=\"modal-card-head\">\r\n                                        <p className=\"modal-card-title\">Prescription</p>\r\n                                        <button className=\"delete\" aria-label=\"close\"  onClick={()=>setShowPrescriptionModal(false)}></button>\r\n                                        </header>\r\n                                        <section className=\"modal-card-body\">\r\n                                        <Prescription standalone=\"true\" />\r\n                                        </section>\r\n                                        {/* <footer className=\"modal-card-foot\">\r\n                                        <button className=\"button is-success\">Save changes</button>\r\n                                        <button className=\"button\">Cancel</button>\r\n                                        </footer> */}\r\n                                    </div>\r\n                                </div>                            \r\n        </div>\r\n    )\r\n}\r\n","C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\helpers\\FacilityPopup.js",["373","374"],"import React, {useState,useContext, useEffect} from 'react'\r\nimport client from '../../feathers'\r\nimport {DebounceInput} from 'react-debounce-input';\r\nimport { useForm } from \"react-hook-form\";\r\n//import {useHistory} from 'react-router-dom'\r\nimport {UserContext,ObjectContext} from '../../context'\r\n\r\n\r\nexport function Facility() {\r\n    const {state}=useContext(ObjectContext) //,setState\r\n    // eslint-disable-next-line\r\n    const [selectedFacility,setSelectedFacility]=useState()\r\n    //const [showState,setShowState]=useState() //create|modify|detail\r\n    \r\n    //console.log(\"facility parent\", state)\r\n    \r\n\r\n    return(\r\n        <section className= \"section remPadTop\">\r\n           {/*  <div className=\"level\">\r\n            <div className=\"level-item\"> <span className=\"is-size-6 has-text-weight-medium\">Facility  Module</span></div>\r\n            </div> */}\r\n            <div className=\"columns \">\r\n            <div className=\"column is-8 \">\r\n              {/*   <FacilityList /> */}\r\n                </div>\r\n            <div className=\"column is-4 \">\r\n               {/*  {(state.facilityModule.show ==='create')&&<FacilityCreate />}\r\n                {(state.facilityModule.show ==='detail')&&<FacilityDetail  />}\r\n                {(state.facilityModule.show ==='modify')&&<FacilityModify facility={selectedFacility} />} */}\r\n               \r\n            </div>\r\n\r\n            </div>                            \r\n            </section>\r\n       \r\n    )\r\n    \r\n}\r\n\r\nexport function FacilityCreate(){\r\n    const { register, handleSubmit} = useForm(); //, watch, errors, reset \r\n    const [error, setError] =useState(false)\r\n    const [success, setSuccess] =useState(false)\r\n    const [message,setMessage] = useState(\"\")\r\n    const facilityServ=client.service('/facility')\r\n    //const history = useHistory()\r\n    const {user} = useContext(UserContext) //,setUser\r\n\r\n    \r\n    const onSubmit = (data,e) =>{\r\n        e.preventDefault();\r\n        setMessage(\"\")\r\n        setError(false)\r\n        setSuccess(false)\r\n          data.createdby=user._id\r\n          //console.log(data);\r\n          \r\n        facilityServ.create(data)\r\n        .then((res)=>{\r\n                //console.log(JSON.stringify(res))\r\n                e.target.reset();\r\n                setMessage(\"Created facility successfully\")\r\n                setSuccess(true)\r\n            })\r\n            .catch((err)=>{\r\n                setMessage(\"Error creating facility, probable network issues \"+ err )\r\n                setError(true)\r\n            })\r\n\r\n      } \r\n\r\n    return (\r\n        <>\r\n        <section className= \"section remPadTop\">\r\n        <div className=\"columns \">\r\n        <div /* className=\"column is-4 \" */>\r\n        <div className=\"card \">\r\n            <div className=\"card-header\">\r\n                <p className=\"card-header-title\">\r\n                    Create Facility\r\n                </p>\r\n            </div>\r\n            <div className=\"card-content vscrollable\">\r\n            { success && <div className=\"message\"> {message}</div>}\r\n            <form onSubmit={handleSubmit(onSubmit)}>\r\n                <div className=\"field\">\r\n                    <p className=\"control has-icons-left has-icons-right\">\r\n                        <input className=\"input is-small\" ref={register({ required: true })}  name=\"facilityName\" type=\"text\" placeholder=\"Name of Facility\" />\r\n                        <span className=\"icon is-small is-left\">\r\n                            <i className=\"fas fa-hospital\"></i>\r\n                        </span>                    \r\n                    </p>\r\n                </div>\r\n                <div className=\"field\">\r\n                    <p className=\"control has-icons-left has-icons-right\">\r\n                    <input className=\"input is-small\" ref={register({ required: true })}  name=\"facilityAddress\" type=\"text\" placeholder=\"Address of Facility\" />\r\n                    <span className=\"icon is-small is-left\">\r\n                        <i className=\"fas fa-map-signs\"></i>\r\n                    </span>\r\n                    \r\n                </p>\r\n            </div>\r\n            <div className=\"field\">\r\n                <p className=\"control has-icons-left\">\r\n                    <input className=\"input is-small\" ref={register({ required: true })} name=\"facilityCity\" type=\"text\" placeholder=\"City/Town\"/>\r\n                    <span className=\"icon is-small is-left\">\r\n                    <i className=\"fas fa-map-marker-alt\"></i>\r\n                    </span>\r\n                </p>\r\n            </div>\r\n            <div className=\"field\">\r\n                <p className=\"control has-icons-left\">\r\n                    <input className=\"input is-small\" ref={register({ required: true })} name=\"facilityContactPhone\" type=\"text\" placeholder=\"Contact Phone No\"/>\r\n                    <span className=\"icon is-small is-left\">\r\n                    <i className=\"fas fa-phone-alt\"></i>\r\n                    </span>\r\n                </p>\r\n            </div>\r\n           \r\n            <div className=\"field\">\r\n                <p className=\"control has-icons-left\">\r\n                    <input className=\"input is-small\" ref={register({ required: true })} name=\"facilityEmail\" type=\"email\" placeholder=\"Facility Email\"/>\r\n                    <span className=\"icon is-small is-left\">\r\n                    <i className=\"fas fa-envelope\"></i>\r\n                    </span>\r\n                </p>\r\n            </div>\r\n            <div className=\"field\">\r\n                <p className=\"control has-icons-left\">\r\n                    <input className=\"input is-small\" ref={register({ required: true })} name=\"facilityOwner\" type=\"text\" placeholder=\"Facility Owner\"/>\r\n                    <span className=\"icon is-small is-left\">\r\n                    <i className=\"fas fa-user-md\"></i>\r\n                    </span>\r\n                </p>\r\n            </div>\r\n            <div className=\"field\">\r\n                <p className=\"control has-icons-left\">\r\n                    <input className=\"input is-small\" ref={register({ required: true })} name=\"facilityType\" type=\"text\" placeholder=\"Facility Type\"/>\r\n                    <span className=\"icon is-small is-left\">\r\n                    <i className=\"fas fa-hospital-symbol\"></i>\r\n                    </span>\r\n                </p>\r\n            </div>\r\n            <div className=\"field\">\r\n                <p className=\"control has-icons-left\">\r\n                    <input className=\"input is-small\" ref={register({ required: true })} name=\"facilityCategory\" type=\"text\" placeholder=\"Facility Category\"/>\r\n                    <span className=\"icon is-small is-left\">\r\n                    <i className=\"fas fa-clinic-medical\"></i>\r\n                    </span>\r\n                </p>\r\n            </div>\r\n            <div className=\"field\">\r\n                <p className=\"control\">\r\n                    <button className=\"button is-success is-small\">\r\n                        Create\r\n                    </button>\r\n                </p>\r\n            </div>\r\n            { error && <div className=\"message\"> {message}</div>}\r\n            </form>\r\n        </div>\r\n        </div>\r\n        </div>\r\n        </div>\r\n        </section>\r\n        </>\r\n    )\r\n   \r\n}\r\n\r\nexport default function FacilityPopup({facilityType,closeModal}){\r\n   // const { register, handleSubmit, watch, errors } = useForm();\r\n    // eslint-disable-next-line\r\n    const [error, setError] =useState(false)\r\n     // eslint-disable-next-line\r\n    const [success, setSuccess] =useState(false)\r\n     // eslint-disable-next-line\r\n   const [message, setMessage] = useState(\"\") \r\n    const facilityServ=client.service('facility')\r\n    //const history = useHistory()\r\n   // const {user,setUser} = useContext(UserContext)\r\n    const [facilities,setFacilities]=useState([])\r\n     // eslint-disable-next-line\r\n   const [selectedFacility, setSelectedFacility]=useState() //\r\n    // eslint-disable-next-line\r\n    const {state,setState}=useContext(ObjectContext)\r\n\r\n   \r\n\r\n  /*   const handleCreateNew = async()=>{\r\n        const    newfacilityModule={\r\n            selectedFacility:{},\r\n            show :'create'\r\n            }\r\n       await setState((prevstate)=>({...prevstate, facilityModule:newfacilityModule}))\r\n       //console.log(state)\r\n        \r\n\r\n    } */\r\n    const handleRow= async(facility)=>{\r\n        //console.log(\"b4\",state)\r\n\r\n        //console.log(\"handlerow\",facility)\r\n\r\n        await setSelectedFacility(facility)\r\n\r\n        const    newfacilityModule={\r\n            selectedDestination:facility,\r\n            show :'detail'\r\n        }\r\n       await setState((prevstate)=>({...prevstate, DestinationModule:newfacilityModule}))\r\n       //console.log(state)\r\n       closeModal()\r\n\r\n    }\r\n\r\n   const handleSearch=(val)=>{\r\n       const field='facilityName'\r\n       console.log(val)\r\n       facilityServ.find({query: {\r\n                [field]: {\r\n                    $regex:val,\r\n                    $options:'i'\r\n                   \r\n                },\r\n                facilityType,\r\n                $limit:10,\r\n                $sort: {\r\n                    facilityName: 1\r\n                  }\r\n                    }}).then((res)=>{\r\n                console.log(res)\r\n               setFacilities(res.data)\r\n                setMessage(\" facility  fetched successfully\")\r\n                setSuccess(true) \r\n            })\r\n            .catch((err)=>{\r\n                console.log(err)\r\n                setMessage(\"Error creating facility, probable network issues \"+ err )\r\n                setError(true)\r\n            })\r\n        }\r\n\r\n           /*  if (val.length>2){\r\n                console.log(\"in\")\r\n               \r\n            }\r\n\r\n        }\r\n     */\r\n        const getFacilities=()=>{\r\n            facilityServ.find({query: {\r\n                facilityType,\r\n                $limit:20,\r\n                $sort: {\r\n                    facilityName: 1\r\n                  }\r\n                    }})\r\n            .then((res)=>{\r\n                console.log(res)\r\n                    setFacilities(res.data)\r\n                    setMessage(\" facility  fetched successfully\")\r\n                    setSuccess(true)\r\n                })\r\n                .catch((err)=>{\r\n                    setMessage(\"Error creating facility, probable network issues \"+ err )\r\n                    setError(true)\r\n                })\r\n\r\n        }\r\n\r\n    useEffect(() => {\r\n        getFacilities()\r\n\r\n        facilityServ.on('created', (obj)=>getFacilities())\r\n        facilityServ.on('updated', (obj)=>getFacilities())\r\n        facilityServ.on('patched', (obj)=>getFacilities())\r\n        facilityServ.on('removed', (obj)=>getFacilities())\r\n        return () => {\r\n           \r\n        }\r\n    },[])\r\n\r\n    //todo: pagination and vertical scroll bar\r\n\r\n    return(\r\n            <>  \r\n            <section className= \"section remPadTop\">\r\n            <div /* className=\"columns \" */>\r\n            <div /* className=\"column is-4 \" */>  \r\n                <div className=\"level\">\r\n                    <div className=\"level-left\">\r\n                        <div className=\"level-item\">\r\n                            <div className=\"field\">\r\n                                <p className=\"control has-icons-left  \">\r\n                                    <DebounceInput className=\"input is-small \" \r\n                                        type=\"text\" placeholder=\"Search Facilities\"\r\n                                        minLength={3}\r\n                                        debounceTimeout={400}\r\n                                        onChange={(e)=>handleSearch(e.target.value)} />\r\n                                    <span className=\"icon is-small is-left\">\r\n                                        <i className=\"fas fa-search\"></i>\r\n                                    </span>\r\n                                </p>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"level-item\"> <span className=\"is-size-6 has-text-weight-medium\">List of Facilities </span></div>\r\n                    {/* <div className=\"level-right\">\r\n                        <div className=\"level-item\"> \r\n                            <div className=\"level-item\"><div className=\"button is-success is-small\" onClick={handleCreateNew}>New</div></div>\r\n                        </div>\r\n                    </div> */}\r\n\r\n                </div>\r\n                <div className=\"table-container pullup \">\r\n                                <table className=\"table is-striped is-narrow is-hoverable is-fullwidth is-scrollable \">\r\n                                    <thead>\r\n                                        <tr>\r\n                                        <th><abbr title=\"S/No\">S/No</abbr></th>\r\n                                        <th>Facility Name</th>\r\n                                        <th><abbr title=\"Address\"> Address</abbr></th>\r\n                                        <th><abbr title=\"City\">City</abbr></th>\r\n                                        <th><abbr title=\"Phone\">Phone</abbr></th>\r\n                                        <th><abbr title=\"Email\">Email</abbr></th>\r\n                                        <th><abbr title=\"Type\">Type</abbr></th>\r\n                                        <th><abbr title=\"Category\">Category</abbr></th>\r\n                                        <th><abbr title=\"Actions\">Actions</abbr></th>\r\n                                        </tr>\r\n                                    </thead>\r\n                                    <tfoot>\r\n                                        \r\n                                    </tfoot>\r\n                                    <tbody>\r\n                                        {facilities.map((facility, i)=>(\r\n\r\n                                            <tr key={facility._id} onClick={()=>handleRow(facility)} className={facility._id===(selectedFacility?._id||null)?\"is-selected\":\"\"}>\r\n                                            <th>{i+1}</th>\r\n                                            <th>{facility.facilityName}</th>\r\n                                            <td>{facility.facilityAddress}</td>\r\n                                            <td>{facility.facilityCity}</td>\r\n                                            <td>{facility.facilityContactPhone}</td>\r\n                                            <td>{facility.facilityEmail}</td>\r\n                                            <td>{facility.facilityType}</td>\r\n                                            <td>{facility.facilityCategory}</td>\r\n                                           \r\n                                            <td><span   className=\"showAction\"  >...</span></td>\r\n                                           \r\n                                            </tr>\r\n\r\n                                        ))}\r\n                                    </tbody>\r\n                                    </table>\r\n                                    \r\n                </div> \r\n                </div> \r\n                </div> \r\n                </section>              \r\n            </>\r\n              \r\n    )\r\n}","C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\inventory\\BillPrescriptionCreate.js",["375","376","377","378","379","380","381","382","383","384","385","386","387","388","389","390","391"],"import React, {useState,useContext, useEffect,useRef} from 'react'\r\nimport client from '../../feathers'\r\nimport {DebounceInput} from 'react-debounce-input';\r\nimport { useForm } from \"react-hook-form\";\r\n//import {useHistory} from 'react-router-dom'\r\nimport {UserContext,ObjectContext} from '../../context'\r\nimport {toast} from 'bulma-toast'\r\nimport {ProductCreate} from './Products'\r\nimport Encounter from '../EncounterMgt/Encounter';\r\nvar random = require('random-string-generator');\r\n// eslint-disable-next-line\r\nconst searchfacility={};\r\n\r\nexport default function BillPrescriptionCreate(){\r\n    // const { register, handleSubmit,setValue} = useForm(); //, watch, errors, reset \r\n     //const [error, setError] =useState(false)\r\n     const [success, setSuccess] =useState(false)\r\n     const [message,setMessage] = useState(\"\")\r\n     // eslint-disable-next-line\r\n     const [facility,setFacility] = useState()\r\n     const ProductEntryServ=client.service('productentry')\r\n     const OrderServ=client.service('order')\r\n     //const history = useHistory()\r\n     const {user} = useContext(UserContext) //,setUser\r\n     // eslint-disable-next-line\r\n     const [currentUser,setCurrentUser] = useState()\r\n     const [type,setType] = useState(\"Bill\")\r\n     const [documentNo,setDocumentNo] = useState(\"\")\r\n     const [totalamount,setTotalamount] = useState(0)\r\n     const [qamount,setQAmount] = useState(null)\r\n     const [productId,setProductId] = useState(\"\")\r\n     const [source,setSource] = useState(\"\")\r\n     const [date,setDate] = useState(\"\")\r\n     const [name,setName] = useState(\"\")\r\n     const [inventoryId,setInventoryId] = useState(\"\")\r\n     const [baseunit,setBaseunit] = useState(\"\")\r\n     const [quantity,setQuantity] = useState(\"\")\r\n     const [sellingprice,setSellingPrice] = useState(\"\")\r\n     const [costprice,setCostprice] = useState(0)\r\n     const [invquantity,setInvQuantity] = useState(\"\")\r\n     const [calcamount,setCalcAmount] = useState(0)\r\n     const [productItem,setProductItem] = useState([])\r\n      const [billingId,setBilllingId]=useState(\"\")  \r\n      const [changeAmount, setChangeAmount] = useState(true)\r\n      const [paymentmode, setPaymentMode] = useState(\"\")\r\n      const [paymentOptions, setPaymentOptions]=useState([])\r\n      const [billMode, setBillMode]=useState(\"\")\r\n      const [productModal, setProductModal]=useState(false)\r\n      const [obj, setObj]=useState(\"\")\r\n     \r\n     const {state,setState}=useContext(ObjectContext)\r\n     const inputEl = useRef(0);\r\n     let calcamount1\r\n     let hidestatus\r\n  \r\n\r\n    \r\n  let medication =state.medicationModule.selectedMedication\r\n\r\n\r\n  const showDocumentation = async (value)=>{\r\n    setProductModal(true)\r\n  }\r\n  const handlecloseModal =()=>{\r\n    setProductModal(false)\r\n   // handleSearch(val)\r\n    }\r\n\r\n\r\n    const handleChangeMode= async(value)=>{\r\n        console.log(value)\r\n       await setPaymentMode(value)\r\n        console.log(paymentOptions)\r\n       let billm= paymentOptions.filter(el=>el.name===value)\r\n       await setBillMode(billm)\r\n        console.log(billm)\r\n        // at startup\r\n        // check payment mode options from patient financial info\r\n        // load that to select options\r\n        // default to HMO-->company-->family-->cash\r\n        //when chosen\r\n        //append payment mode to order\r\n        //check service contract for pricing info\r\n        // calculate pricing \r\n        // pricing\r\n\r\n\r\n    }\r\n\r\n    const handleRow= async(ProductEntry)=>{\r\n    //console.log(\"b4\",state)\r\n\r\n    //console.log(\"handlerow\",ProductEntry)\r\n\r\n    //await setMedication(ProductEntry)\r\n\r\n    const    newProductEntryModule={\r\n        selectedMedication:ProductEntry,\r\n        show :'detail'\r\n    }\r\n  await setState((prevstate)=>({...prevstate, medicationModule:newProductEntryModule}))\r\n   //console.log(state)\r\n  // ProductEntry.show=!ProductEntry.show\r\n\r\n        } \r\n \r\n     const [productEntry,setProductEntry]=useState({\r\n         productitems:[],\r\n         date,\r\n         documentNo,\r\n         type,\r\n         totalamount,\r\n         source,\r\n \r\n     })\r\n  \r\n     const productItemI={\r\n         productId,\r\n         name,\r\n         quantity,\r\n         sellingprice,\r\n         amount:calcamount, //||qamount\r\n         baseunit,\r\n         costprice,\r\n         billingId\r\n \r\n     }\r\n     // consider batchformat{batchno,expirydate,qtty,baseunit}\r\n     //consider baseunoit conversions\r\n     const getSearchfacility=async (obj)=>{\r\n       await setObj(obj)\r\n        if (!obj){\r\n            //\"clear stuff\"\r\n            setProductId(\"\")\r\n            setName(\"\")\r\n            setBaseunit(\"\")\r\n            setInventoryId(\"\")\r\n            setSellingPrice(\"\")\r\n            setInvQuantity(\"\")\r\n            setQAmount(null)\r\n            setCostprice(\"\")\r\n           // setCalcAmount(null)\r\n            return\r\n        }\r\n \r\n         setProductId(obj.productId)\r\n         setName(obj.name)\r\n         setBaseunit(obj.baseunit)\r\n         setInventoryId(obj.inventoryId)\r\n         setSellingPrice(obj.sellingprice) //modify this based on billing mode\r\n         setInvQuantity(obj.quantity)\r\n         setCostprice(obj.costprice)\r\n         setBilllingId(obj.billingId)\r\n\r\n         const contracts=obj.billingDetails.contracts\r\n         //const billingserv=client.service('billing')\r\n        if( billMode.type===\"HMO Cover\"){ //paymentmode\r\n         let contract=contracts.filter(el=>el.source_org===billMode.detail.hmo)\r\n         if (contract.length){\r\n            console.log(contract[0].price)\r\n            setSellingPrice(contract[0].price)\r\n            console.log(sellingprice)\r\n         }else{\r\n            toast({\r\n                message: 'Please HMO does not have cover/price for this drug. Either set drug price for HMO or try another drug or bill using cash',\r\n                type: 'is-danger',\r\n                dismissible: true,\r\n                pauseOnHover: true,\r\n              })\r\n              setSellingPrice(0)\r\n         }\r\n        \r\n        \r\n        }\r\n        if( billMode.type===\"Company Cover\"){ //paymentmode\r\n            let contract=contracts.filter(el=>el.source_org===billMode.detail.company)\r\n            if (contract.length){\r\n            console.log(contract[0].price)\r\n            setSellingPrice(contract[0].price)\r\n            console.log(sellingprice)\r\n           \r\n           }else{\r\n\r\n            toast({\r\n                message: 'Please company does not have cover/price for this drug. Either set drug price for Company or try another drug or bill using cash',\r\n                type: 'is-danger',\r\n                dismissible: true,\r\n                pauseOnHover: true,\r\n              })\r\n              setSellingPrice(0)   \r\n         }\r\n          \r\n        /*  setValue(\"facility\", obj._id,  {\r\n             shouldValidate: true,\r\n             shouldDirty: true\r\n         }) */\r\n     }\r\n    }\r\n     useEffect(() => {\r\n       /*  console.log(obj)\r\n        console.log(billMode)\r\n        if( paymentmode!==\"Cash\" && obj){\r\n            const contracts=obj.billingDetails.contracts\r\n            let contract=contracts.filter(el=>el.source_org===billMode.detail.hmo)\r\n           console.log(contract[0].price)\r\n           setSellingPrice(contract[0].price)\r\n           console.log(sellingprice)\r\n       }\r\n         return () => {\r\n            \r\n         } */\r\n     }, [obj])\r\n\r\n     useEffect(() => {\r\n         setCurrentUser(user)\r\n         //console.log(currentUser)\r\n         return () => {\r\n         \r\n         }\r\n     }, [user])\r\n \r\n     const handleUpdateTotal=async ()=>{\r\n        await setTotalamount(prevtotal=>Number(prevtotal) + Number(calcamount))\r\n     }\r\n \r\n     const handleChangeType=async (e)=>{\r\n         console.log(e.target.value)\r\n         await setType(e.target.value)\r\n     }\r\n \r\n     const handleAmount= async()=>{\r\n         await setQAmount(null)\r\n        // alert(\"Iam chaning qamount\")\r\n     }\r\n\r\n     const handleClickProd=async()=>{\r\n       /*   console.log(\"amount: \",productItemI.amount)\r\n         console.log(\"qamount: \",qamount)\r\n         console.log(\"calcamount: \",calcamount) */\r\n        if ( quantity===0||quantity===\"\"|| productId===\"\"){\r\n            toast({\r\n                message: 'You need to choose a product and quantity to proceed',\r\n                type: 'is-danger',\r\n                dismissible: true,\r\n                pauseOnHover: true,\r\n              }) \r\n              return \r\n        }\r\n\r\n         await setSuccess(false)\r\n         await setProductItem(\r\n             prevProd=>prevProd.concat(productItemI)\r\n         )\r\n        handleUpdateTotal()\r\n            // generate billing info\r\n            const billInfo={\r\n                orderInfo:{\r\n                    orderId:medication._id,\r\n                    orderObj:medication,\r\n                  },\r\n                  serviceInfo:{            \r\n                    price: productItemI.sellingprice,\r\n                    quantity: productItemI.quantity,\r\n                    productId: productItemI.productId,\r\n                    name: productItemI.name,\r\n                    baseunit: productItemI.baseunit,\r\n                    amount:productItemI.amount,\r\n                    billingId:productItemI.billingId,\r\n                    createdby:user._id,\r\n                  },\r\n                  paymentInfo:{\r\n                    amountDue:productItemI.amount,\r\n                    paidup:0,\r\n                    balance:productItemI.amount,\r\n                    paymentDetails:[]\r\n              \r\n                  },\r\n                  participantInfo:{\r\n                    billingFacility:medication.destination,\r\n                    billingFacilityName:medication.destination_name,\r\n                    locationId:state.StoreModule.selectedStore._id, //selected location,\r\n                    clientId:medication.clientId,\r\n                    client:medication.client,\r\n                    paymentmode:billMode\r\n                  },\r\n                  createdBy:user.id,\r\n                  billing_status:\"Unpaid\"\r\n                }\r\n\r\n        //update order\r\n        \r\n        OrderServ.patch(medication._id,{\r\n            order_status:\"Billed\", //Billed\r\n            billInfo,\r\n        }).then((resp)=>{\r\n           // medication=resp\r\n           // console.log(resp)\r\n             handleRow(resp) \r\n            //update dispense\r\n\r\n        })\r\n        .catch((err)=>{\r\n            console.log(err)\r\n        })\r\n        \r\n        //update status(billed) + action()\r\n        //?attached chosen product to medication\r\n        //dispense helper?\r\n         setName(\"\")\r\n         setBaseunit(\"\")\r\n         setQuantity(\"\")\r\n         setInventoryId(\"\")\r\n         setSellingPrice(\"\")\r\n         setInvQuantity(\"\")\r\n             handleAmount()\r\n        // setCalcAmount(null)\r\n        await setSuccess(true)\r\n        /* console.log(success)\r\n        console.log(qamount)\r\n        console.log(productItem) */\r\n        setChangeAmount(true)\r\n     }\r\n   //check user for facility or get list of facility  \r\n    /*  useEffect(()=>{\r\n         //setFacility(user.activeProductEntry.FacilityId)//\r\n       if (!user.stacker){\r\n           console.log(currentUser)\r\n            /* setValue(\"facility\", user.currentEmployee.facilityDetail._id,  {\r\n             shouldValidate: true,\r\n             shouldDirty: true\r\n         })  \r\n \r\n       }\r\n     }) */\r\n \r\n     const handleQtty=async(e)=>{\r\n         if (invquantity<e.target.value){\r\n             toast({\r\n                 message: 'You can not sell more quantity than exist in inventory ' ,\r\n                 type: 'is-danger',\r\n                 dismissible: true,\r\n                 pauseOnHover: true,\r\n               })\r\n             return\r\n         }\r\n         setQuantity(e.target.value)\r\n         calcamount1=quantity*sellingprice\r\n         await setCalcAmount(calcamount1)\r\n         console.log(calcamount)\r\n     }\r\n \r\n     useEffect( () => {\r\n          setProductEntry({\r\n             \r\n             date,\r\n             documentNo,\r\n             type,\r\n             totalamount,\r\n             source,\r\n         })\r\n        setCalcAmount(quantity*sellingprice) \r\n         return () => {\r\n             \r\n         }\r\n     },[date])\r\n \r\n     const resetform=()=>{\r\n      setType(\"Sales\")\r\n     setDocumentNo(\"\")\r\n     setTotalamount(\"\")\r\n     setProductId(\"\")\r\n     setSource(\"\")\r\n     setDate(\"\")\r\n     setName(\"\")\r\n     setBaseunit()\r\n     setCostprice()\r\n     setProductItem([])\r\n     }\r\n\r\n\r\n     const handleMedicationDone= async()=>{ //handle selected single order\r\n        //console.log(\"b4\",state)\r\n    \r\n        //console.log(\"handlerow\",ProductEntry)\r\n    \r\n       // await setSelectedMedication(\"\")\r\n    \r\n        const    newProductEntryModule={\r\n            selectedMedication:{},\r\n            show :'create'\r\n        }\r\n      await setState((prevstate)=>({...prevstate, medicationModule:newProductEntryModule}))\r\n       //console.log(state)\r\n      // ProductEntry.show=!ProductEntry.show\r\n    \r\n    }\r\n \r\n     const onSubmit = async(e) =>{\r\n         e.preventDefault();\r\n         setMessage(\"\")\r\n         //setError(false)\r\n         setSuccess(false)\r\n         await setProductEntry({\r\n             \r\n             date,\r\n             documentNo,\r\n             type,\r\n             totalamount,\r\n             source,\r\n         })\r\n         productEntry.productitems=productItem\r\n         productEntry.createdby=user._id\r\n         productEntry.transactioncategory=\"debit\"\r\n        \r\n          // console.log(\"b4 facility\",productEntry);\r\n           if (user.currentEmployee){\r\n          productEntry.facility=user.currentEmployee.facilityDetail._id  // or from facility dropdown\r\n           }else{\r\n             toast({\r\n                 message: 'You can not remove inventory from any organization',\r\n                 type: 'is-danger',\r\n                 dismissible: true,\r\n                 pauseOnHover: true,\r\n               }) \r\n               return\r\n           }\r\n           \r\n           if (state.StoreModule.selectedStore._id){\r\n             productEntry.storeId=state.StoreModule.selectedStore._id\r\n           }else{\r\n             toast({\r\n                 message: 'You need to select a store before removing inventory',\r\n                 type: 'is-danger',\r\n                 dismissible: true,\r\n                 pauseOnHover: true,\r\n               }) \r\n               return\r\n \r\n           }\r\n           //console.log(\"b4 create\",productEntry);\r\n        // ProductEntryServ.create(productEntry)\r\n         //.then((res)=>{\r\n                 //console.log(JSON.stringify(res))\r\n           //      resetform()\r\n                /*  setMessage(\"Created ProductEntry successfully\") */\r\n             //    setSuccess(true)\r\n               //  toast({\r\n                  /*    message: 'ProductExit created succesfully',\r\n                     type: 'is-success',\r\n                     dismissible: true,\r\n                     pauseOnHover: true,\r\n                   })\r\n                   setSuccess(false)\r\n                   setProductItem([])\r\n                   const today=new Date().toLocaleString()\r\n       \r\n                   setDate(today)\r\n                   const invoiceNo=random(6,'uppernumeric')\r\n                 setDocumentNo(invoiceNo)\r\n                 setType(\"Sales\")\r\n             })\r\n             .catch((err)=>{\r\n                 toast({\r\n                     message: 'Error creating ProductExit ' + err,\r\n                     type: 'is-danger',\r\n                     dismissible: true,\r\n                     pauseOnHover: true,\r\n                   })\r\n             }) */\r\n \r\n       } \r\n \r\n    // console.log(\"i am rendering\")\r\n   /*   useEffect(() => {\r\n         setMedication(state.medicationModule.selectedMedication)\r\n        // console.log(medication)\r\n         return () => {\r\n             \r\n         }\r\n     }, [state])\r\n  */\r\n    const handleChangeAmount=()=>{\r\n        setChangeAmount((rev)=>(!rev))\r\n        \r\n    }\r\n\r\n    const newclient=async ()=>{\r\n        await  setProductItem([])\r\n    }\r\n\r\n    useEffect(() => {\r\n        const oldname=medication.clientname\r\n        console.log(\"oldname\",oldname)\r\n        setSource(medication.clientname)\r\n\r\n        const newname=source\r\n        console.log(\"newname\",newname)\r\n        if (oldname!==newname){\r\n            //newdispense\r\n        \r\n        setProductItem([])\r\n        setTotalamount(0)\r\n\r\n        }\r\n       \r\n\r\n        const paymentoptions= []\r\n        const info = medication.client.paymentinfo\r\n        let billme={}\r\n       \r\n        if( medication.client.paymentinfo.cash===true){\r\n            const details={}\r\n            details.detail=  info.cashDetails\r\n            details.type=\"Cash\"\r\n            const obj={\r\n                name:\"Cash\",\r\n                value:\"Cash\",\r\n                detail:details,\r\n                type:\"Cash\"\r\n            }\r\n            paymentoptions.push(obj)\r\n            setPaymentMode(\"Cash\")\r\n            billme=obj\r\n        }\r\n        if( medication.client.paymentinfo.familyCover===true){\r\n            const details={}\r\n            details.detail=  info.familyDetails\r\n            details.type=\"Family Cover\"\r\n            const obj={\r\n                name:\"Family Cover\",\r\n                value:\"familyCover\",\r\n                detail:details,\r\n                type:\"Family Cover\"\r\n            }\r\n            paymentoptions.push(obj)\r\n            setPaymentMode(\"Family Cover\")\r\n            billme=obj\r\n            \r\n        }\r\n        if( medication.client.paymentinfo.companyCover===true){\r\n            const details={}\r\n            details.type=\"Company Cover\"\r\n            details.detail=  info.companyDetails.filter(el=>el.active===true)\r\n            details.detail.forEach(el=>{\r\n                const obj={\r\n                    name:\"Company: \" +el.companyName +\"(\"+el.companyPlan+\")\",\r\n                    value:\"companyCover\",\r\n                    detail:el,\r\n                    type:\"Company Cover\" \r\n                }\r\n                paymentoptions.push(obj)\r\n                setPaymentMode(\"Company: \" +el.companyName +\"(\"+el.companyPlan+\")\")\r\n               // console.log(\"Company: \" +el.companyName +\"(\"+el.companyPlan+\")\")\r\n               billme=obj\r\n            })\r\n        }\r\n\r\n        if( medication.client.paymentinfo.hmoCover===true){\r\n            \r\n            const details={}\r\n            details.type=\"HMO Cover\"\r\n            details.detail=  info.hmoDetails.filter(el=>el.active===true)\r\n            details.detail.forEach(el=>{\r\n                const obj={\r\n                    name:\"HMO: \" +el.hmoName +\"(\"+el.hmoPlan+\")\",\r\n                    value:\"hmoCover\",\r\n                    detail:el,\r\n                    type:\"HMO Cover\"\r\n                }\r\n                paymentoptions.push(obj)\r\n                setPaymentMode(\"HMO: \" +el.hmoName +\"(\"+el.hmoPlan+\")\")\r\n                //console.log(\"HMO: \" +el.hmoName +\"(\"+el.hmoPlan+\")\")\r\n                billme=obj\r\n            })\r\n         \r\n        }\r\n        setPaymentOptions(paymentoptions)\r\n        setBillMode(billme)\r\n       console.log(paymentoptions)\r\n        console.log(billMode)\r\n        return () => {\r\n           \r\n        }\r\n    }, [medication])\r\n\r\n     useEffect(() => {\r\n       // const medication =state.medicationModule.selectedMedication\r\n         const today=new Date().toLocaleString()\r\n         console.log(today)\r\n         setDate(today)\r\n         const invoiceNo=random(6,'uppernumeric')\r\n         setDocumentNo(invoiceNo)\r\n         return () => {\r\n             \r\n         }\r\n     }, [])\r\n\r\n     useEffect(() => {\r\n        calcamount1=quantity*sellingprice\r\n         setCalcAmount(calcamount1)\r\n         console.log(calcamount)\r\n         setChangeAmount(true)\r\n        return () => {\r\n            \r\n        }\r\n    }, [quantity])\r\n\r\n// console.log(\"simpa\")\r\n     return (\r\n         <>\r\n             <div className=\"card card-overflow\">\r\n             <div className=\"card-header\">\r\n                 <p className=\"card-header-title\">\r\n                     Bill Product\r\n                 </p>\r\n                 <button className=\"button is-success is-small btnheight mt-2\" onClick={showDocumentation}>Documentation</button>\r\n             </div>\r\n             <div className=\"card-content \">\r\n    \r\n             <form onSubmit={onSubmit}> {/* handleSubmit(onSubmit) */}\r\n             <div className=\"field is-horizontal\">\r\n             <div className=\"field-body\">\r\n            {/*  <div className=\"field\">    \r\n                 <div className=\"control\">\r\n                     <div className=\"select is-small\">\r\n                         <select name=\"type\" value={type} onChange={handleChangeType} className=\"selectadd\">\r\n                            <option value=\"\">Choose Type </option>\r\n                             <option value=\"Dispense\">Dispense</option>\r\n                             <option value=\"Bill\">Bill </option> */}\r\n                             {/* <option value=\"Dispense\">Dispense</option>\r\n                             <option value=\"Audit\">Audit</option> */}\r\n                 {/*         </select>\r\n                     </div>\r\n                 </div>\r\n             </div>\r\n */}\r\n             <div className=\"field\">\r\n                     <p className=\"control has-icons-left has-icons-right\">\r\n                         <input className=\"input is-small\" /* ref={register({ required: true })} */ value={source} name=\"client\" type=\"text\" onChange={e=>setSource(e.target.value)} placeholder=\"Client\" />\r\n                         <span className=\"icon is-small is-left\">\r\n                             <i className=\"fas fa-hospital\"></i>\r\n                         </span>                    \r\n                     </p>\r\n                 </div>\r\n                 <div className=\"field\">    \r\n                 <div className=\"control\">\r\n                     <div className=\"select is-small \">\r\n                         <select name=\"paymentmode\" value={paymentmode} onChange={(e)=>handleChangeMode(e.target.value)} className=\"selectadd\" >\r\n                         <option value=\"\">Billing Mode </option>\r\n                           {paymentOptions.map((option,i)=>(\r\n                               <option key={i} value={option.details}> {option.name}</option>\r\n                           ))}\r\n                           \r\n                            \r\n                            {/*  <option value=\"Cash\">Cash</option>\r\n                             <option value=\"Family\">Family </option>\r\n                            <option value=\"Company Cover\">Company Cover</option>\r\n                             <option value=\"HMO\">HMO</option> */}\r\n                         </select>\r\n                     </div>\r\n                 </div>\r\n             </div>\r\n            \r\n             </div>\r\n             </div> {/* horizontal end */}\r\n            {/*  <div className=\"field\">\r\n                 <p className=\"control has-icons-left\"> // Audit/initialization/Purchase Invoice \r\n                     <input className=\"input is-small\"  ref={register({ required: true })} name=\"type\" type=\"text\" placeholder=\"Type of Product Entry\"/>\r\n                     <span className=\"icon is-small is-left\">\r\n                     <i className=\" fas fa-user-md \"></i>\r\n                     </span>\r\n                 </p>\r\n             </div> */}\r\n                <div className=\"field is-horizontal\">\r\n                <div className=\"field-body\">\r\n                <div className=\"field\">\r\n                 <p className=\"control has-icons-left has-icons-right\">\r\n                     <input className=\"input is-small\"  /* ref={register({ required: true })} */ value={date}  name=\"date\" type=\"text\" onChange={e=>setDate(e.target.value)} placeholder=\"Date\" />\r\n                     <span className=\"icon is-small is-left\">\r\n                         <i className=\"fas fa-map-signs\"></i>\r\n                     </span>\r\n                 </p>\r\n             </div>\r\n             <div className=\"field\">\r\n                 <p className=\"control has-icons-left\">\r\n                     <input className=\"input is-small\" /* ref={register} */ name=\"documentNo\" value={documentNo} type=\"text\" onChange={e=>setDocumentNo(e.target.value)} placeholder=\" Invoice Number\"/>\r\n                     <span className=\"icon is-small is-left\">\r\n                     <i className=\"fas fa-phone-alt\"></i>\r\n                     </span>\r\n                 </p>\r\n             </div>\r\n             <div className=\"field\">\r\n                 <p className=\"control has-icons-left\">\r\n                     <input className=\"input is-small\" /* ref={register({ required: true })} */ value={totalamount} name=\"totalamount\" type=\"text\" onChange={e=>setTotalamount(e.target.value)} placeholder=\" Total Amount\"/>\r\n                     <span className=\"icon is-small is-left\">\r\n                     <i className=\"fas fa-coins\"></i>\r\n                     </span>\r\n                 </p>\r\n             </div>\r\n \r\n                 </div> \r\n                 </div> \r\n                \r\n                 </form>   \r\n                \r\n            \r\n          {/* array of ProductEntry items */}\r\n         \r\n         <label className=\"label is-small\">Medication:</label>\r\n         <div className=\"field is-horizontal\">\r\n             <div className=\"field-body\">\r\n             <div className=\"field\" style={{width:\"40%\"}}>\r\n                 <p className=\"control has-icons-left\" >\r\n                     <input className=\"input is-small\"  /* ref={register({ required: true })} */ disabled  name=\"order\" value={medication.order} type=\"text\" onChange={ e=> handleQtty(e)} placeholder=\"Quantity\"  />\r\n                     <span className=\"icon is-small is-left\">\r\n                     <i className=\"fas fa-hashtag\"></i>\r\n                     </span>\r\n                     <span className=\"helper is-size-7\"><strong>Instruction: </strong>{medication.instruction}</span>\r\n                    \r\n                 </p>\r\n                 <span className=\"helper is-size-7\"><strong>Billing Status: </strong>{medication.order_status}</span>\r\n             </div> \r\n            \r\n             </div>\r\n             </div>\r\n             <label className=\"label is-small\">Choose Product Item:</label>\r\n          <div className=\"field is-horizontal\">\r\n             <div className=\"field-body\">\r\n             <div className=\"field is-expanded\"  /* style={ !user.stacker?{display:\"none\"}:{}} */ >\r\n                     <InventorySearch  getSearchfacility={getSearchfacility} clear={success} /> \r\n                     <p className=\"control has-icons-left \" style={{display:\"none\"}}>\r\n                         <input className=\"input is-small\" /* ref={register ({ required: true }) }  *//* add array no */  value={productId} name=\"productId\" type=\"text\" onChange={e=>setProductId(e.target.value)} placeholder=\"Product Id\" />\r\n                         <span className=\"icon is-small is-left\">\r\n                         <i className=\"fas  fa-map-marker-alt\"></i>\r\n                         </span>\r\n                     </p>\r\n                  {sellingprice &&   \"N\"}{sellingprice} {sellingprice &&   \"per\"}  {baseunit} {invquantity} {sellingprice &&   \"remaining\"} \r\n                 </div>\r\n             </div>\r\n         </div>\r\n         <div className=\"field is-horizontal\">\r\n             <div className=\"field-body\" >\r\n                 <div className=\"field\" style={{width:\"40%\"}}>\r\n                 <p className=\"control has-icons-left\" >\r\n                     <input className=\"input is-small\"  /* ref={register({ required: true })} */ name=\"quantity\" value={quantity} type=\"text\" onChange={ e=> handleQtty(e)} placeholder=\"Quantity\"  />\r\n                     <span className=\"icon is-small is-left\">\r\n                     <i className=\"fas fa-hashtag\"></i>\r\n                     </span>\r\n                    \r\n                 </p>\r\n         <label >{baseunit}</label>\r\n             </div> \r\n             <div className=\"field\">\r\n             <label>Amount:</label>{/* <p>{quantity*sellingprice}</p> */}\r\n             </div>\r\n             <div className=\"field\" style={{width:\"40%\"}}>\r\n                 <p className=\"control has-icons-left \" /* style={{display:\"none\"}} */>\r\n                     <input className=\"input is-small\"  name=\"qamount\" disabled={changeAmount} value={calcamount} type=\"text\"  onChange={async e=> await setCalcAmount(e.target.value)}  placeholder=\"Amount\"  />\r\n                     <span className=\"icon is-small is-left\">\r\n                     <i className=\"fas fa-dollar-sign\"></i>\r\n                     </span>\r\n                 </p>\r\n                 <button className=\"button is-small is-success btnheight\" onClick={handleChangeAmount}>Adjust</button>\r\n \r\n             </div> \r\n             <div className=\"field\">\r\n             <p className=\"control\">\r\n                     <button className=\"button is-info is-small  is-pulled-right\">\r\n                       <span className=\"is-small\" onClick={handleClickProd}> +</span>\r\n                     </button>\r\n                 </p>\r\n             </div>\r\n             </div>\r\n          </div>\r\n             \r\n        {(productItem.length>0) && <div>\r\n             <label>Product Items:</label>\r\n          <table className=\"table is-striped  is-hoverable is-fullwidth is-scrollable \">\r\n                 <thead>\r\n                     <tr>\r\n                     <th><abbr title=\"Serial No\">S/No</abbr></th>\r\n                     <th><abbr title=\"Type\">Name</abbr></th>\r\n                     <th><abbr title=\"Type\">Quanitity</abbr></th>\r\n                     <th><abbr title=\"Document No\">Unit</abbr></th>\r\n                     <th><abbr title=\"Cost Price\">Selling Price</abbr></th>\r\n                     <th><abbr title=\"Cost Price\">Amount</abbr></th>\r\n                     <th><abbr title=\"Actions\">Actions</abbr></th>\r\n                     </tr>\r\n                 </thead>\r\n                 <tfoot>\r\n                     \r\n                 </tfoot>\r\n                 <tbody>\r\n                    { productItem.map((ProductEntry, i)=>(\r\n                          <tr key={i}>\r\n                         <th>{i+1}</th>\r\n                         <td>{ProductEntry.name}</td>\r\n                         <th>{ProductEntry.quantity}</th>\r\n                         <td>{ProductEntry.baseunit}</td>\r\n                         <td>{ProductEntry.sellingprice}</td>\r\n                         <td>{ProductEntry.amount}</td>\r\n                         <td><span className=\"showAction\"  >x</span></td>\r\n                         </tr>\r\n                     ))}\r\n                 </tbody>\r\n                 </table>\r\n                 <div className=\"field mt-2 is-grouped\">\r\n                 <p className=\"control\">\r\n                     <button className=\"button is-success is-small\" disabled={!productItem.length>0} onClick={handleMedicationDone}>\r\n                        Done\r\n                     </button>\r\n                 </p>\r\n                {/*  <p className=\"control\">\r\n                     <button className=\"button is-warning is-small\" disabled={!productItem.length>0} onClick={onSubmit} >\r\n                         Clear\r\n                     </button>\r\n                 </p> */}\r\n                 </div>\r\n                 </div>\r\n            \r\n             }\r\n             \r\n             \r\n             </div>\r\n             </div>\r\n             <div className={`modal ${productModal?\"is-active\":\"\"}` }>\r\n                                    <div className=\"modal-background\"></div>\r\n                                    <div className=\"modal-card  modalbkgrnd\">\r\n                                        <header className=\"modal-card-head  btnheight\">\r\n                                        <p className=\"modal-card-title\">Documentation</p>\r\n                                        <button className=\"delete\" aria-label=\"close\"  onClick={handlecloseModal}></button>\r\n                                        </header>\r\n                                        <section className=\"modal-card-body modalcolor\">\r\n                                      \r\n                                         <Encounter standalone=\"true\" />\r\n                                        </section> \r\n                                        {/* <footer className=\"modal-card-foot\">\r\n                                        <button className=\"button is-success\">Save changes</button>\r\n                                        <button className=\"button\">Cancel</button>\r\n                                        </footer>  */}\r\n                                   </div>\r\n                                </div>      \r\n         </>\r\n     )\r\n    \r\n }\r\n\r\n export  function InventorySearch({getSearchfacility,clear}) {\r\n    \r\n    const productServ=client.service('inventory')\r\n    const [facilities,setFacilities]=useState([])\r\n     // eslint-disable-next-line\r\n     const [searchError, setSearchError] =useState(false)\r\n     // eslint-disable-next-line\r\n    const [showPanel, setShowPanel] =useState(false)\r\n     // eslint-disable-next-line\r\n   const [searchMessage, setSearchMessage] = useState(\"\") \r\n   // eslint-disable-next-line \r\n   const [simpa,setSimpa]=useState(\"\")\r\n   // eslint-disable-next-line \r\n   const [chosen,setChosen]=useState(false)\r\n   // eslint-disable-next-line \r\n   const [count,setCount]=useState(0)\r\n   const inputEl=useRef(null)\r\n   const [val,setVal]=useState(\"\")\r\n   const {user} = useContext(UserContext) \r\n   const {state}=useContext(ObjectContext)\r\n    const [productModal,setProductModal]=useState(false)\r\n\r\n   const handleRow= async(obj)=>{\r\n        await setChosen(true)\r\n        //alert(\"something is chaning\")\r\n       getSearchfacility(obj)\r\n       \r\n       await setSimpa(obj.name)\r\n       \r\n        // setSelectedFacility(obj)\r\n        setShowPanel(false)\r\n        await setCount(2)\r\n        /* const    newfacilityModule={\r\n            selectedFacility:facility,\r\n            show :'detail'\r\n        }\r\n   await setState((prevstate)=>({...prevstate, facilityModule:newfacilityModule})) */\r\n   //console.log(state)\r\n    }\r\n    const handleBlur=async(e)=>{\r\n         if (count===2){\r\n             console.log(\"stuff was chosen\")\r\n         }\r\n       \r\n       /*  console.log(\"blur\")\r\n         setShowPanel(false)\r\n        console.log(JSON.stringify(simpa))\r\n        if (simpa===\"\"){\r\n            console.log(facilities.length)\r\n            setSimpa(\"abc\")\r\n            setSimpa(\"\")\r\n            setFacilities([])\r\n            inputEl.current.setValue=\"\"\r\n        }\r\n        console.log(facilities.length)\r\n        console.log(inputEl.current) */\r\n    }\r\n    const handleSearch=async(value)=>{\r\n        setVal(value)\r\n        if (value===\"\"){\r\n            setShowPanel(false)\r\n            getSearchfacility(false)\r\n            return\r\n        }\r\n        const field='name' //field variable\r\n\r\n       \r\n        if (value.length>=3 ){\r\n            productServ.find({query: {     //service\r\n                 [field]: {\r\n                     $regex:value,\r\n                     $options:'i'\r\n                    \r\n                 },\r\n                 facility: user.currentEmployee.facilityDetail._id,\r\n                 storeId: state.StoreModule.selectedStore._id,\r\n                 $limit:10,\r\n                 $sort: {\r\n                     createdAt: -1\r\n                   }\r\n                     }}).then((res)=>{\r\n              console.log(\"product  fetched successfully\") \r\n              console.log(res.data) \r\n                setFacilities(res.data)\r\n                 setSearchMessage(\" product  fetched successfully\")\r\n                 setShowPanel(true)\r\n             })\r\n             .catch((err)=>{\r\n                toast({\r\n                    message: 'Error creating ProductEntry ' + err,\r\n                    type: 'is-danger',\r\n                    dismissible: true,\r\n                    pauseOnHover: true,\r\n                  })\r\n             })\r\n         }\r\n        else{\r\n            console.log(\"less than 3 \")\r\n            console.log(val)\r\n            setShowPanel(false)\r\n            await setFacilities([])\r\n            console.log(facilities)\r\n        }\r\n    }\r\n\r\n    const handleAddproduct =()=>{\r\n        setProductModal(true) \r\n    }\r\n    const handlecloseModal =()=>{\r\n        setProductModal(false)\r\n        handleSearch(val)\r\n    }\r\n    useEffect(() => {\r\n       if (clear){\r\n           console.log(\"success has changed\",clear)\r\n           setSimpa(\"\")\r\n       }\r\n        return () => {\r\n            \r\n        }\r\n    }, [clear] )\r\n    return (\r\n        <div>\r\n            <div className=\"field\">\r\n                <div className=\"control has-icons-left  \">\r\n                    <div className={`dropdown ${showPanel?\"is-active\":\"\"}`} style={{width:\"100%\"}}>\r\n                        <div className=\"dropdown-trigger\" style={{width:\"100%\"}}>\r\n                            <DebounceInput className=\"input is-small  is-expanded\" \r\n                                type=\"text\" placeholder=\"Search Product\"\r\n                                value={simpa}\r\n                                minLength={3}\r\n                                debounceTimeout={400}\r\n                                onBlur={(e)=>handleBlur(e)}\r\n                                onChange={(e)=>handleSearch(e.target.value)}\r\n                                inputRef={inputEl}\r\n                                  />\r\n                            <span className=\"icon is-small is-left\">\r\n                                <i className=\"fas fa-search\"></i>\r\n                            </span>\r\n                        </div>\r\n                        {/* {searchError&&<div>{searchMessage}</div>} */}\r\n                        <div className=\"dropdown-menu expanded\" style={{width:\"100%\"}}>\r\n                            <div className=\"dropdown-content\">\r\n                          { facilities.length>0?\"\":<div className=\"dropdown-item\" /* onClick={handleAddproduct} */> <span> {val} is not in your inventory</span> </div>}\r\n\r\n                              {facilities.map((facility, i)=>(\r\n                                    \r\n                                    <div className=\"dropdown-item\" key={facility._id} onClick={()=>handleRow(facility)}>\r\n                                        \r\n                                        <div><span>{facility.name}</span></div>\r\n                                        <div><span><strong>{facility.quantity}</strong></span>\r\n                                        <span>{facility.baseunit}(s) remaining</span>\r\n                                        <span className=\"padleft\"><strong>Price:</strong> N{facility.sellingprice}</span></div>\r\n                                        \r\n                                    </div>\r\n                                    \r\n                                    ))}\r\n                                    \r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            \r\n        </div>\r\n    )\r\n}","C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\inventory\\Dispensary.js",["392","393","394","395","396","397","398","399","400","401","402","403","404","405","406","407","408","409","410","411","412","413","414","415"],"C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\inventory\\ProductExit.js",["416","417","418","419","420","421","422","423","424","425","426","427","428"],"import React, {useState,useContext, useEffect,useRef} from 'react'\r\nimport client from '../../feathers'\r\nimport {DebounceInput} from 'react-debounce-input';\r\nimport { useForm } from \"react-hook-form\";\r\n//import {useHistory} from 'react-router-dom'\r\nimport {UserContext,ObjectContext} from '../../context'\r\nimport {toast} from 'bulma-toast'\r\nimport {ProductCreate} from './Products'\r\nvar random = require('random-string-generator');\r\n// eslint-disable-next-line\r\nconst searchfacility={};\r\n\r\n\r\nexport default function ProductEntry() {\r\n    const {state}=useContext(ObjectContext) //,setState\r\n    // eslint-disable-next-line\r\n    const [selectedProductEntry,setSelectedProductEntry]=useState()\r\n    //const [showState,setShowState]=useState() //create|modify|detail\r\n    \r\n    return(\r\n        <section className= \"section remPadTop\">\r\n           {/*  <div className=\"level\">\r\n            <div className=\"level-item\"> <span className=\"is-size-6 has-text-weight-medium\">ProductEntry  Module</span></div>\r\n            </div> */}\r\n            <div className=\"columns \">\r\n            <div className=\"column is-6 \">\r\n                <ProductExitList />\r\n                </div>\r\n            <div className=\"column is-6 \">\r\n                {(state.ProductExitModule.show ==='create')&&<ProductExitCreate />}\r\n                {(state.ProductExitModule.show ==='detail')&&<ProductExitDetail  />}\r\n                {(state.ProductExitModule.show ==='modify')&&<ProductExitModify ProductEntry={selectedProductEntry} />}\r\n               \r\n            </div>\r\n\r\n            </div>                            \r\n            </section>\r\n       \r\n    )\r\n    \r\n}\r\n\r\nexport function ProductExitCreate(){\r\n   // const { register, handleSubmit,setValue} = useForm(); //, watch, errors, reset \r\n    const [error, setError] =useState(false)\r\n    const [success, setSuccess] =useState(false)\r\n    const [message,setMessage] = useState(\"\")\r\n    // eslint-disable-next-line\r\n    const [facility,setFacility] = useState()\r\n    const ProductEntryServ=client.service('productentry')\r\n    //const history = useHistory()\r\n    const {user} = useContext(UserContext) //,setUser\r\n    // eslint-disable-next-line\r\n    const [currentUser,setCurrentUser] = useState()\r\n    const [type,setType] = useState(\"Sales\")\r\n    const [documentNo,setDocumentNo] = useState(\"\")\r\n    const [totalamount,setTotalamount] = useState(0)\r\n    const [qamount,setQAmount] = useState(null)\r\n    const [productId,setProductId] = useState(\"\")\r\n    const [source,setSource] = useState(\"\")\r\n    const [date,setDate] = useState(\"\")\r\n    const [name,setName] = useState(\"\")\r\n    const [inventoryId,setInventoryId] = useState(\"\")\r\n    const [baseunit,setBaseunit] = useState(\"\")\r\n    const [quantity,setQuantity] = useState(\"\")\r\n    const [sellingprice,setSellingPrice] = useState(\"\")\r\n    const [costprice,setCostprice] = useState(0)\r\n    const [invquantity,setInvQuantity] = useState(\"\")\r\n    const [calcamount,setCalcAmount] = useState(0)\r\n    const [productItem,setProductItem] = useState([])\r\n    const [billingId,setBilllingId]=useState(\"\")  \r\n    const [changeAmount, setChangeAmount] = useState(true)\r\n    const {state}=useContext(ObjectContext)\r\n    const inputEl = useRef(0);\r\n    let calcamount1\r\n    let hidestatus\r\n\r\n    let medication =state.financeModule.selectedFinance\r\n    console.log(\"medication\", medication)\r\n\r\n    const [productEntry,setProductEntry]=useState({\r\n        productitems:[],\r\n        date,\r\n        documentNo,\r\n        type,\r\n        totalamount,\r\n        source,\r\n\r\n    })\r\n \r\n    const productItemI={\r\n        productId,\r\n        name,\r\n        quantity,\r\n        sellingprice,\r\n        amount:calcamount, //qamount||\r\n        baseunit,\r\n        costprice,\r\n        billingId\r\n\r\n    }\r\n    // consider batchformat{batchno,expirydate,qtty,baseunit}\r\n    //consider baseunoit conversions\r\n    const getSearchfacility=(obj)=>{\r\n\r\n        setProductId(obj.productId)\r\n        setName(obj.name)\r\n        setBaseunit(obj.baseunit)\r\n        setInventoryId(obj.inventoryId)\r\n        setSellingPrice(obj.sellingprice)\r\n        setInvQuantity(obj.quantity)\r\n        setCostprice(obj.costprice)\r\n        setBilllingId(obj.billingId)\r\n        if (!obj){\r\n            //\"clear stuff\"\r\n            setProductId(\"\")\r\n            setName(\"\")\r\n            setBaseunit(\"\")\r\n            setInventoryId(\"\")\r\n            setSellingPrice(\"\")\r\n            setInvQuantity(\"\")\r\n            setQAmount(null)\r\n            setCostprice(\"\")\r\n           // setCalcAmount(null)\r\n\r\n        }\r\n        \r\n       /*  setValue(\"facility\", obj._id,  {\r\n            shouldValidate: true,\r\n            shouldDirty: true\r\n        }) */\r\n    }\r\n    \r\n    useEffect(() => {\r\n        setCurrentUser(user)\r\n        //console.log(currentUser)\r\n        return () => {\r\n        \r\n        }\r\n    }, [user])\r\n\r\n    const handleUpdateTotal=()=>{\r\n\r\n        \r\n        setTotalamount(prevtotal=>Number(prevtotal) + Number(calcamount))\r\n    }\r\n\r\n    const handleChangeType=async (e)=>{\r\n        await setType(e.target.value)\r\n    }\r\n\r\n    const handleAmount= async()=>{\r\n        await setQAmount(null)\r\n       // alert(\"Iam chaning qamount\")\r\n    }\r\n    const handleClickProd=async()=>{\r\n        console.log(\"amount: \",productItemI.amount)\r\n        console.log(\"qamount: \",qamount)\r\n        console.log(\"calcamount: \",calcamount)\r\n\r\n        if ( quantity===0||quantity===\"\"|| productId===\"\"){\r\n            toast({\r\n                message: 'You need to choose a product and quantity to proceed',\r\n                type: 'is-danger',\r\n                dismissible: true,\r\n                pauseOnHover: true,\r\n              }) \r\n              return \r\n        }\r\n\r\n        await setSuccess(false)\r\n        await setProductItem(\r\n            prevProd=>prevProd.concat(productItemI)\r\n        )\r\n       handleUpdateTotal()\r\n        setName(\"\")\r\n        setBaseunit(\"\")\r\n        setQuantity(\"\")\r\n        setInventoryId(\"\")\r\n        setSellingPrice(\"\")\r\n        setInvQuantity(\"\")\r\n            handleAmount()\r\n       // setCalcAmount(null)\r\n       await setSuccess(true)\r\n      /*  console.log(success)\r\n       console.log(qamount)\r\n       console.log(productItem) */\r\n       setChangeAmount(true)\r\n    }\r\n  //check user for facility or get list of facility  \r\n   /*  useEffect(()=>{\r\n        //setFacility(user.activeProductEntry.FacilityId)//\r\n      if (!user.stacker){\r\n          console.log(currentUser)\r\n           /* setValue(\"facility\", user.currentEmployee.facilityDetail._id,  {\r\n            shouldValidate: true,\r\n            shouldDirty: true\r\n        })  \r\n\r\n      }\r\n    }) */\r\n\r\n    const handleQtty=async(e)=>{\r\n        if (invquantity<e.target.value){\r\n            toast({\r\n                message: 'You can not sell more quantity than exist in inventory ' ,\r\n                type: 'is-danger',\r\n                dismissible: true,\r\n                pauseOnHover: true,\r\n              })\r\n            return\r\n        }\r\n        setQuantity(e.target.value)\r\n        calcamount1=quantity*sellingprice\r\n        await setCalcAmount(calcamount1)\r\n        console.log(calcamount)\r\n\r\n       \r\n\r\n    }\r\n\r\n    useEffect( () => {\r\n         setProductEntry({\r\n            \r\n            date,\r\n            documentNo,\r\n            type,\r\n            totalamount,\r\n            source,\r\n        })\r\n       setCalcAmount(quantity*sellingprice) \r\n        return () => {\r\n            \r\n        }\r\n    },[date])\r\n\r\n    const resetform=()=>{\r\n     setType(\"Sales\")\r\n    setDocumentNo(\"\")\r\n    setTotalamount(\"\")\r\n    setProductId(\"\")\r\n    setSource(\"\")\r\n    setDate(\"\")\r\n    setName(\"\")\r\n    setBaseunit()\r\n    setCostprice()\r\n    setProductItem([])\r\n    }\r\n\r\n    const onSubmit = async(e) =>{\r\n        e.preventDefault();\r\n        setMessage(\"\")\r\n        setError(false)\r\n        setSuccess(false)\r\n        /* await setProductEntry({\r\n            \r\n            date,\r\n            documentNo,\r\n            type,\r\n            totalamount,\r\n            source,\r\n        }) */\r\n        productEntry.date = date\r\n        productEntry.documentNo= documentNo\r\n        productEntry.type=type\r\n        productEntry.totalamount= totalamount\r\n        productEntry.source=source\r\n        productEntry.productitems=productItem\r\n        productEntry.createdby=user._id\r\n        productEntry.transactioncategory=\"debit\"\r\n       \r\n          console.log(\"b4 facility\",productEntry);\r\n          if (user.currentEmployee){\r\n         productEntry.facility=user.currentEmployee.facilityDetail._id  // or from facility dropdown\r\n          }else{\r\n            toast({\r\n                message: 'You can not remove inventory from any organization',\r\n                type: 'is-danger',\r\n                dismissible: true,\r\n                pauseOnHover: true,\r\n              }) \r\n              return\r\n          }\r\n          if (state.StoreModule.selectedStore._id){\r\n            productEntry.storeId=state.StoreModule.selectedStore._id\r\n          }else{\r\n            toast({\r\n                message: 'You need to select a store before removing inventory',\r\n                type: 'is-danger',\r\n                dismissible: true,\r\n                pauseOnHover: true,\r\n              }) \r\n              return\r\n\r\n          }\r\n          console.log(\"b4 create\",productEntry);\r\n        ProductEntryServ.create(productEntry)\r\n        .then((res)=>{\r\n                //console.log(JSON.stringify(res))\r\n                resetform()\r\n               /*  setMessage(\"Created ProductEntry successfully\") */\r\n                setSuccess(true)\r\n                toast({\r\n                    message: 'ProductExit created succesfully',\r\n                    type: 'is-success',\r\n                    dismissible: true,\r\n                    pauseOnHover: true,\r\n                  })\r\n                  setSuccess(false)\r\n                  setProductItem([])\r\n                  const today=new Date().toLocaleString()\r\n      \r\n                  setDate(today)\r\n                  const invoiceNo=random(6,'uppernumeric')\r\n                setDocumentNo(invoiceNo)\r\n                setType(\"Sales\")\r\n            })\r\n            .catch((err)=>{\r\n                toast({\r\n                    message: 'Error creating ProductExit ' + err,\r\n                    type: 'is-danger',\r\n                    dismissible: true,\r\n                    pauseOnHover: true,\r\n                  })\r\n            })\r\n\r\n      } \r\n\r\n      const handleChangeAmount=()=>{\r\n        setChangeAmount((rev)=>(!rev))\r\n        \r\n    }\r\n   // console.log(\"i am rendering\")\r\n\r\n    useEffect(() => {\r\n        const today=new Date().toLocaleString()\r\n        //console.log(today)\r\n        setDate(today)\r\n        const invoiceNo=random(6,'uppernumeric')\r\n        setDocumentNo(invoiceNo)\r\n        return () => {\r\n            \r\n        }\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        calcamount1=quantity*sellingprice\r\n         setCalcAmount(calcamount1)\r\n         console.log(calcamount)\r\n         setChangeAmount(true)\r\n        return () => {\r\n            \r\n        }\r\n    }, [quantity])\r\n\r\n  \r\n    \r\n\r\n    return (\r\n        <>\r\n            <div className=\"card card-overflow\">\r\n            <div className=\"card-header\">\r\n                <p className=\"card-header-title\">\r\n                   Point of Sale: Sales, Dispense, Audit, Transfer out\r\n                </p>\r\n            </div>\r\n            <div className=\"card-content \">\r\n   \r\n            <form onSubmit={onSubmit}> {/* handleSubmit(onSubmit) */}\r\n            <div className=\"field is-horizontal\">\r\n            <div className=\"field-body\">\r\n            <div className=\"field\">    \r\n                <div className=\"control\">\r\n                    <div className=\"select is-small\">\r\n                        <select name=\"type\" value={type} onChange={handleChangeType} className=\"selectadd\">\r\n                           <option value=\"\">Choose Type </option>\r\n                            <option value=\"Sales\">Sales </option>\r\n                            <option value=\"In-house\">In-House </option>\r\n                            <option value=\"Dispense\">Dispense</option>\r\n                            <option value=\"Audit\">Audit</option>\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div className=\"field\">\r\n                    <p className=\"control has-icons-left has-icons-right\">\r\n                        <input className=\"input is-small\" /* ref={register({ required: true })} */ value={source} name=\"client\" type=\"text\" onChange={e=>setSource(e.target.value)} placeholder=\"Client\" />\r\n                        <span className=\"icon is-small is-left\">\r\n                            <i className=\"fas fa-hospital\"></i>\r\n                        </span>                    \r\n                    </p>\r\n                </div>\r\n           \r\n            </div>\r\n            </div> {/* horizontal end */}\r\n           {/*  <div className=\"field\">\r\n                <p className=\"control has-icons-left\"> // Audit/initialization/Purchase Invoice \r\n                    <input className=\"input is-small\"  ref={register({ required: true })} name=\"type\" type=\"text\" placeholder=\"Type of Product Entry\"/>\r\n                    <span className=\"icon is-small is-left\">\r\n                    <i className=\" fas fa-user-md \"></i>\r\n                    </span>\r\n                </p>\r\n            </div> */}\r\n               <div className=\"field is-horizontal\">\r\n               <div className=\"field-body\">\r\n               <div className=\"field\">\r\n                <p className=\"control has-icons-left has-icons-right\">\r\n                    <input className=\"input is-small\"  /* ref={register({ required: true })} */ value={date}  name=\"date\" type=\"text\" onChange={e=>setDate(e.target.value)} placeholder=\"Date\" />\r\n                    <span className=\"icon is-small is-left\">\r\n                        <i className=\"fas fa-map-signs\"></i>\r\n                    </span>\r\n                </p>\r\n            </div>\r\n            <div className=\"field\">\r\n                <p className=\"control has-icons-left\">\r\n                    <input className=\"input is-small\" /* ref={register} */ name=\"documentNo\" value={documentNo} type=\"text\" onChange={e=>setDocumentNo(e.target.value)} placeholder=\" Invoice Number\"/>\r\n                    <span className=\"icon is-small is-left\">\r\n                    <i className=\"fas fa-phone-alt\"></i>\r\n                    </span>\r\n                </p>\r\n            </div>\r\n            <div className=\"field\">\r\n                <p className=\"control has-icons-left\">\r\n                    <input className=\"input is-small\" /* ref={register({ required: true })} */ value={totalamount} name=\"totalamount\" type=\"text\" onChange={e=>setTotalamount(e.target.value)} placeholder=\" Total Amount\"/>\r\n                    <span className=\"icon is-small is-left\">\r\n                    <i className=\"fas fa-coins\"></i>\r\n                    </span>\r\n                </p>\r\n            </div>\r\n\r\n                </div> \r\n                </div> \r\n               \r\n                </form>   \r\n               \r\n           \r\n         {/* array of ProductEntry items */}\r\n        \r\n        <label className=\"label is-small\">Add Product Items:</label>\r\n         <div className=\"field is-horizontal\">\r\n            <div className=\"field-body\">\r\n            <div className=\"field is-expanded\"  /* style={ !user.stacker?{display:\"none\"}:{}} */ >\r\n                    <InventorySearch  getSearchfacility={getSearchfacility} clear={success} /> \r\n                    <p className=\"control has-icons-left \" style={{display:\"none\"}}>\r\n                        <input className=\"input is-small\" /* ref={register ({ required: true }) }  *//* add array no */  value={productId} name=\"productId\" type=\"text\" onChange={e=>setProductId(e.target.value)} placeholder=\"Product Id\" />\r\n                        <span className=\"icon is-small is-left\">\r\n                        <i className=\"fas  fa-map-marker-alt\"></i>\r\n                        </span>\r\n                    </p>\r\n                 {sellingprice &&   \"N\"}{sellingprice} {sellingprice &&   \"per\"}  {baseunit} {invquantity} {sellingprice &&   \"remaining\"} \r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div className=\"field is-horizontal\">\r\n            <div className=\"field-body\" >\r\n                <div className=\"field\" style={{width:\"40%\"}}>\r\n                <p className=\"control has-icons-left\" >\r\n                    <input className=\"input is-small\"  /* ref={register({ required: true })} */ name=\"quantity\" value={quantity} type=\"text\" onChange={ e=> handleQtty(e)} placeholder=\"Quantity\"  />\r\n                    <span className=\"icon is-small is-left\">\r\n                    <i className=\"fas fa-hashtag\"></i>\r\n                    </span>\r\n                   \r\n                </p>\r\n        <label >{baseunit}</label>\r\n            </div> \r\n            <div className=\"field\">\r\n            <label>Amount:</label>{/* <p>{quantity*sellingprice}</p> */}\r\n            </div>\r\n            <div className=\"field\" style={{width:\"40%\"}}>\r\n                <p className=\"control has-icons-left \" /* style={{display:\"none\"}} */>\r\n                    <input className=\"input is-small\" name=\"qamount\" disabled={changeAmount} value={calcamount} type=\"text\"  onChange={async e=> await setCalcAmount(e.target.value)}  placeholder=\"Amount\"   />\r\n                    <span className=\"icon is-small is-left\">\r\n                    <i className=\"fas fa-dollar-sign\"></i>\r\n                    </span>\r\n                </p>\r\n                <button className=\"button is-small is-success btnheight\" onClick={handleChangeAmount}>Adjust</button>\r\n            </div> \r\n            <div className=\"field\">\r\n            <p className=\"control\">\r\n                    <button className=\"button is-info is-small  is-pulled-right\">\r\n                      <span className=\"is-small\" onClick={handleClickProd}> +</span>\r\n                    </button>\r\n                </p>\r\n            </div>\r\n            </div>\r\n         </div>\r\n            \r\n       {(productItem.length>0) && <div>\r\n            <label>Product Items:</label>\r\n         <table className=\"table is-striped  is-hoverable is-fullwidth is-scrollable \">\r\n                <thead>\r\n                    <tr>\r\n                    <th><abbr title=\"Serial No\">S/No</abbr></th>\r\n                    <th><abbr title=\"Type\">Name</abbr></th>\r\n                    <th><abbr title=\"Type\">Quanitity</abbr></th>\r\n                    <th><abbr title=\"Document No\">Unit</abbr></th>\r\n                    <th><abbr title=\"Cost Price\">Selling Price</abbr></th>\r\n                    <th><abbr title=\"Cost Price\">Amount</abbr></th>\r\n                    <th><abbr title=\"Actions\">Actions</abbr></th>\r\n                    </tr>\r\n                </thead>\r\n                <tfoot>\r\n                    \r\n                </tfoot>\r\n                <tbody>\r\n                   { productItem.map((ProductEntry, i)=>(\r\n\r\n                        <tr key={i}>\r\n                        <th>{i+1}</th>\r\n                        <td>{ProductEntry.name}</td>\r\n                        <th>{ProductEntry.quantity}</th>\r\n                        <td>{ProductEntry.baseunit}</td>\r\n                        <td>{ProductEntry.sellingprice}</td>\r\n                        <td>{ProductEntry.amount}</td>\r\n                        <td><span className=\"showAction\"  >x</span></td>\r\n                        \r\n                        </tr>\r\n\r\n                    ))}\r\n                </tbody>\r\n                </table>\r\n                <div className=\"field mt-2 is-grouped\">\r\n                <p className=\"control\">\r\n                    <button className=\"button is-success is-small\" disabled={!productItem.length>0} onClick={onSubmit}>\r\n                        Sell\r\n                    </button>\r\n                </p>\r\n                <p className=\"control\">\r\n                    <button className=\"button is-warning is-small\" disabled={!productItem.length>0} /* onClick={onSubmit} */>\r\n                        Clear\r\n                    </button>\r\n                </p>\r\n                </div>\r\n                </div>\r\n           \r\n            }\r\n            \r\n            \r\n            </div>\r\n            </div>\r\n        </>\r\n    )\r\n   \r\n}\r\n\r\nexport function ProductExitList(){\r\n   // const { register, handleSubmit, watch, errors } = useForm();\r\n    // eslint-disable-next-line\r\n    const [error, setError] =useState(false)\r\n     // eslint-disable-next-line\r\n    const [success, setSuccess] =useState(false)\r\n     // eslint-disable-next-line\r\n   const [message, setMessage] = useState(\"\") \r\n    const ProductEntryServ=client.service('productentry')\r\n    //const history = useHistory()\r\n   // const {user,setUser} = useContext(UserContext)\r\n    const [facilities,setFacilities]=useState([])\r\n     // eslint-disable-next-line\r\n   const [selectedProductEntry, setSelectedProductEntry]=useState() //\r\n    // eslint-disable-next-line\r\n    const {state,setState}=useContext(ObjectContext)\r\n    // eslint-disable-next-line\r\n    const {user,setUser}=useContext(UserContext)\r\n\r\n\r\n\r\n    const handleCreateNew = async()=>{\r\n        const    newProductExitModule={\r\n            selectedProductEntry:{},\r\n            show :'create'\r\n            }\r\n       await setState((prevstate)=>({...prevstate, ProductExitModule:newProductExitModule}))\r\n       //console.log(state)\r\n        \r\n\r\n    }\r\n    const handleRow= async(ProductEntry)=>{\r\n        //console.log(\"b4\",state)\r\n\r\n        //console.log(\"handlerow\",ProductEntry)\r\n\r\n        await setSelectedProductEntry(ProductEntry)\r\n\r\n        const    newProductExitModule={\r\n            selectedProductEntry:ProductEntry,\r\n            show :'detail'\r\n        }\r\n       await setState((prevstate)=>({...prevstate, ProductExitModule:newProductExitModule}))\r\n       //console.log(state)\r\n\r\n    }\r\n\r\n   const handleSearch=(val)=>{\r\n       const field='name'\r\n       console.log(val)\r\n       ProductEntryServ.find({query: {\r\n                [field]: {\r\n                    $regex:val,\r\n                    $options:'i'\r\n                   \r\n                },\r\n                transactioncategory:\"debit\",\r\n                storeId:state.StoreModule.selectedStore._id,\r\n               facility:user.currentEmployee.facilityDetail._id || \"\",\r\n                $limit:10,\r\n                $sort: {\r\n                    createdAt: -1\r\n                  }\r\n                    }}).then((res)=>{\r\n                console.log(res)\r\n               setFacilities(res.data)\r\n                setMessage(\" ProductEntry  fetched successfully\")\r\n                setSuccess(true) \r\n            })\r\n            .catch((err)=>{\r\n                console.log(err)\r\n                setMessage(\"Error fetching ProductEntry, probable network issues \"+ err )\r\n                setError(true)\r\n            })\r\n        }\r\n   \r\n        const getFacilities= async()=>{\r\n            if (user.currentEmployee){\r\n            \r\n        const findProductEntry= await ProductEntryServ.find(\r\n                {query: {\r\n                    transactioncategory:\"debit\",\r\n                    facility:user.currentEmployee.facilityDetail._id,\r\n                    storeId:state.StoreModule.selectedStore._id,\r\n                    $limit:20,\r\n                    $sort: {\r\n                        createdAt: -1\r\n                    }\r\n                    }})\r\n\r\n         await setFacilities(findProductEntry.data)\r\n                }\r\n                else {\r\n                    if (user.stacker){\r\n                        /* toast({\r\n                            message: 'You do not qualify to view this',\r\n                            type: 'is-danger',\r\n                            dismissible: true,\r\n                            pauseOnHover: true,\r\n                          }) \r\n                          return */\r\n                        const findProductEntry= await ProductEntryServ.find(\r\n                            {query: {\r\n                                transactioncategory:\"debit\",\r\n                                $limit:20,\r\n                                $sort: {\r\n                                    createdAt: -1\r\n                                }\r\n                                }})\r\n            \r\n                    await setFacilities(findProductEntry.data)\r\n\r\n                    }\r\n                }\r\n          /*   .then((res)=>{\r\n                console.log(res)\r\n                    setFacilities(res.data)\r\n                    setMessage(\" ProductEntry  fetched successfully\")\r\n                    setSuccess(true)\r\n                })\r\n                .catch((err)=>{\r\n                    setMessage(\"Error creating ProductEntry, probable network issues \"+ err )\r\n                    setError(true)\r\n                }) */\r\n            }\r\n            \r\n         /*    useEffect(() => {\r\n                setTimeout(() => {\r\n                    console.log(\"happy birthday\")\r\n                    //getFacilities(user)\r\n                }, 200);\r\n\r\n                return () => {\r\n                    \r\n\r\n                }\r\n            },[]) */\r\n\r\n            useEffect(() => {\r\n               \r\n                if (!state.StoreModule.selectedStore){\r\n                    toast({\r\n                        message: 'kindly select a store',\r\n                        type: 'is-danger',\r\n                        dismissible: true,\r\n                        pauseOnHover: true,\r\n                      }) \r\n                      return\r\n                    getFacilities()\r\n\r\n                }else{\r\n                    /* const localUser= localStorage.getItem(\"user\")\r\n                    const user1=JSON.parse(localUser)\r\n                    console.log(localUser)\r\n                    console.log(user1)\r\n                    fetchUser(user1)\r\n                    console.log(user)\r\n                    getFacilities(user) */\r\n                }\r\n                ProductEntryServ.on('created', (obj)=>getFacilities())\r\n                ProductEntryServ.on('updated', (obj)=>getFacilities())\r\n                ProductEntryServ.on('patched', (obj)=>getFacilities())\r\n                ProductEntryServ.on('removed', (obj)=>getFacilities())\r\n                return () => {\r\n                \r\n                }\r\n            },[])\r\n\r\n            useEffect(() => {\r\n                getFacilities()\r\n                console.log(\"store changed\")\r\n                return () => {\r\n                   \r\n                }\r\n            }, [state.StoreModule.selectedStore])\r\n    //todo: pagination and vertical scroll bar\r\n\r\n    return(\r\n        <>\r\n           {state.StoreModule.selectedStore?( <>  \r\n                <div className=\"level\">\r\n                    <div className=\"level-left\">\r\n                        <div className=\"level-item\">\r\n                            <div className=\"field\">\r\n                                <p className=\"control has-icons-left  \">\r\n                                    <DebounceInput className=\"input is-small \" \r\n                                        type=\"text\" placeholder=\"Search ProductEntry\"\r\n                                        minLength={3}\r\n                                        debounceTimeout={400}\r\n                                        onChange={(e)=>handleSearch(e.target.value)} />\r\n                                    <span className=\"icon is-small is-left\">\r\n                                        <i className=\"fas fa-search\"></i>\r\n                                    </span>\r\n                                </p>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"level-item\"> <span className=\"is-size-6 has-text-weight-medium\">Product Exits </span></div>\r\n                    <div className=\"level-right\">\r\n                        <div className=\"level-item\"> \r\n                            <div className=\"level-item\"><div className=\"button is-success is-small\" onClick={handleCreateNew}>New</div></div>\r\n                        </div>\r\n                    </div>\r\n\r\n                </div>\r\n                <div className=\"table-container pullup \">\r\n                                <table className=\"table is-striped is-narrow is-hoverable is-fullwidth is-scrollable \">\r\n                                    <thead>\r\n                                        <tr>\r\n                                        <th><abbr title=\"Serial No\">S/No</abbr></th>\r\n                                        <th><abbr title=\"Date\">Date</abbr></th>\r\n                                        <th><abbr title=\"Type\">Type</abbr></th>\r\n                                        <th>Client</th>\r\n                                        <th><abbr title=\"Document No\">Document No</abbr></th>\r\n                                        <th><abbr title=\"Total Amount\">Total Amount</abbr></th>\r\n                                        <th><abbr title=\"Enteredby\">Entered By</abbr></th>\r\n                                        <th><abbr title=\"Actions\">Actions</abbr></th>\r\n                                        </tr>\r\n                                    </thead>\r\n                                    <tfoot>\r\n                                        \r\n                                    </tfoot>\r\n                                    <tbody>\r\n                                        {facilities.map((ProductEntry, i)=>(\r\n\r\n                                            <tr key={ProductEntry._id} onClick={()=>handleRow(ProductEntry)}>\r\n                                            <th>{i+1}</th>\r\n                                            <td>{ProductEntry.date}</td>\r\n                                            <th>{ProductEntry.type}</th>\r\n                                            <td>{ProductEntry.source}</td>\r\n                                            <td>{ProductEntry.documentNo}</td>\r\n                                            <td>{ProductEntry.totalamount}</td>\r\n                                            <td>{ProductEntry.enteredby}</td>\r\n                                            <td><span className=\"showAction\"  >...</span></td>\r\n                                           \r\n                                            </tr>\r\n\r\n                                        ))}\r\n                                    </tbody>\r\n                                    </table>\r\n                                    \r\n                </div>              \r\n            </>):<div>loading... Choose a Store</div>}\r\n            </>\r\n              \r\n    )\r\n    }\r\n\r\n\r\nexport function ProductExitDetail(){\r\n    //const { register, handleSubmit, watch, setValue } = useForm(); //errors,\r\n     // eslint-disable-next-line\r\n    const [error, setError] =useState(false) //, \r\n    //const [success, setSuccess] =useState(false)\r\n     // eslint-disable-next-line\r\n    const [message, setMessage] = useState(\"\") //,\r\n    //const ProductEntryServ=client.service('/ProductEntry')\r\n    //const history = useHistory()\r\n    //const {user,setUser} = useContext(UserContext)\r\n    const {state,setState} = useContext(ObjectContext)\r\n\r\n   \r\n\r\n   const ProductEntry =state.ProductExitModule.selectedProductEntry \r\n\r\n    const handleEdit= async()=>{\r\n        const    newProductExitModule={\r\n            selectedProductEntry:ProductEntry,\r\n            show :'modify'\r\n        }\r\n       await setState((prevstate)=>({...prevstate, ProductExitModule:newProductExitModule}))\r\n       //console.log(state)\r\n       \r\n    }\r\n \r\n    return (\r\n        <>\r\n        <div className=\"card \">\r\n            <div className=\"card-header\">\r\n                <p className=\"card-header-title\">\r\n                    ProductEntry Details\r\n                </p>\r\n            </div>\r\n            <div className=\"card-content vscrollable\">\r\n           \r\n                <table> \r\n                <tbody>         \r\n                <tr>\r\n                    <td>\r\n                      <label className=\"label is-small\"> <span className=\"icon is-small is-left\">\r\n                            <i className=\"fas fa-hospital\"></i>\r\n                        </span>                    \r\n                        Type\r\n                        </label>\r\n                    </td>\r\n                    <td>\r\n                        <span className=\"is-size-7 padleft\"   name=\"name\"> {ProductEntry.type} </span>\r\n                    </td>\r\n                    <td>\r\n\r\n                    </td>\r\n                    <td>\r\n                        <label className=\"label is-small padleft\"><span className=\"icon is-small is-left\">\r\n                            <i className=\"fas fa-map-signs\"></i>\r\n                        </span>Supplier:\r\n                        </label>\r\n                    </td>\r\n                    <td>\r\n                        <span className=\"is-size-7 padleft\"   name=\"ProductEntryType\">{ProductEntry.source} </span> \r\n                    </td>\r\n                </tr>\r\n                <tr>\r\n                    <td>\r\n                        <label className=\"label is-small\"> <span className=\"icon is-small is-left\">\r\n                        <i className=\"fas fa-hospital\"></i>\r\n                        </span>                    \r\n                        Date:\r\n                        </label>\r\n                    </td>\r\n                    <td>\r\n                        <span className=\"is-size-7 padleft\"   name=\"name\"> {ProductEntry.date} </span>\r\n                    </td>\r\n                    <td>\r\n                                \r\n                    </td>\r\n                    <td>\r\n                        <label className=\"label is-small padleft\"><span className=\"icon is-small is-left\">\r\n                            <i className=\"fas fa-map-signs\"></i>\r\n                        </span>Invoice No:\r\n                        </label>\r\n                    </td>\r\n                    \r\n                    <td>\r\n                         <span className=\"is-size-7 padleft\"   name=\"ProductEntryType\">{ProductEntry.documentNo} </span> \r\n                    </td>\r\n                </tr>\r\n                <tr>\r\n                    <td>\r\n                \r\n                        <label className=\"label is-small\"> <span className=\"icon is-small is-left\">\r\n                        <i className=\"fas fa-hospital\"></i>\r\n                    </span>            \r\n                        Total Amount:\r\n                    </label>\r\n                    </td>\r\n                    <td>\r\n                        <span className=\"is-size-7 padleft\"   name=\"name\"> {ProductEntry.totalamount} </span>\r\n                    </td>\r\n                </tr>\r\n\r\n                </tbody> \r\n            </table> \r\n            <label className=\"label is-size-7 mt-2\">Product Items:</label>\r\n         <table className=\"table is-striped  is-hoverable is-fullwidth is-scrollable \">\r\n                <thead>\r\n                    <tr>\r\n                    <th><abbr title=\"Serial No\">S/No</abbr></th>\r\n                    <th><abbr title=\"Type\">Name</abbr></th>\r\n                    <th><abbr title=\"Type\">Quanitity</abbr></th>\r\n                    <th><abbr title=\"Document No\">Unit</abbr></th>\r\n                    <th><abbr title=\"Selling Price\">Selling Price</abbr></th>\r\n                    <th><abbr title=\"Amount\">Amount</abbr></th>\r\n                   \r\n                    </tr>\r\n                </thead>\r\n                <tfoot>\r\n                    \r\n                </tfoot>\r\n                <tbody>\r\n                   { ProductEntry.productitems.map((ProductEntry, i)=>(\r\n\r\n                        <tr key={i}>\r\n                        <th>{i+1}</th>\r\n                        <td>{ProductEntry.name}</td>\r\n                        <th>{ProductEntry.quantity}</th>\r\n                        <td>{ProductEntry.baseunit}</td>\r\n                        <td>{ProductEntry.sellingprice}</td>\r\n                        <td>{ProductEntry.amount}</td>\r\n                        \r\n                        \r\n                        </tr>\r\n\r\n                    ))}\r\n                </tbody>\r\n                </table>\r\n                  {/*   <tr>\r\n                    <td>\r\n            <label className=\"label is-small\"><span className=\"icon is-small is-left\">\r\n                    <i className=\"fas fa-map-marker-alt\"></i>\r\n                    </span>Profession: \r\n                \r\n                    \r\n                    </label>\r\n                    </td>\r\n                <td>\r\n                <span className=\"is-size-7 padleft \"  name=\"ProductEntryCity\">{ProductEntry.profession}</span> \r\n                </td>\r\n                </tr>\r\n                    <tr>\r\n            <td>\r\n            <label className=\"label is-small\"><span className=\"icon is-small is-left\">\r\n                    <i className=\"fas fa-phone-alt\"></i>\r\n                    </span>Phone:           \r\n                    \r\n                        </label>\r\n                        </td>\r\n                        <td>\r\n                        <span className=\"is-size-7 padleft \"  name=\"ProductEntryContactPhone\" >{ProductEntry.phone}</span>\r\n                        </td>\r\n                  </tr>\r\n                    <tr><td>\r\n            \r\n            <label className=\"label is-small\"><span className=\"icon is-small is-left\">\r\n                    <i className=\"fas fa-envelope\"></i>\r\n                    </span>Email:                     \r\n                    \r\n                         </label></td><td>\r\n                         <span className=\"is-size-7 padleft \"  name=\"ProductEntryEmail\" >{ProductEntry.email}</span>\r\n                         </td>\r\n             \r\n                </tr>\r\n                    <tr>\r\n            <td>\r\n            <label className=\"label is-small\"> <span className=\"icon is-small is-left\">\r\n                    <i className=\"fas fa-user-md\"></i></span>Department:\r\n                    \r\n                    </label></td>\r\n                    <td>\r\n                    <span className=\"is-size-7 padleft \"  name=\"ProductEntryOwner\">{ProductEntry.department}</span>\r\n                    </td>\r\n               \r\n                </tr>\r\n                    <tr>\r\n            <td>\r\n            <label className=\"label is-small\"> <span className=\"icon is-small is-left\">\r\n                    <i className=\"fas fa-hospital-symbol\"></i>\r\n                    </span>Departmental Unit:              \r\n                    \r\n                </label></td>\r\n                <td>\r\n                <span className=\"is-size-7 padleft \"  name=\"ProductEntryType\">{ProductEntry.deptunit}</span>\r\n                </td>\r\n              \r\n                </tr> */}\r\n                    \r\n          {/*   <div className=\"field\">\r\n             <label className=\"label is-small\"><span className=\"icon is-small is-left\">\r\n                    <i className=\"fas fa-clinic-medical\"></i>\r\n                    </span>Category:              \r\n                    <span className=\"is-size-7 padleft \"  name= \"ProductEntryCategory\">{ProductEntry.ProductEntryCategory}</span>\r\n                </label>\r\n                 </div> */}\r\n\r\n            \r\n           \r\n           {/*  <div className=\"field mt-2\">\r\n                <p className=\"control\">\r\n                    <button className=\"button is-success is-small\" onClick={handleEdit}>\r\n                        Edit\r\n                    </button>\r\n                </p>\r\n            </div>\r\n            { error && <div className=\"message\"> {message}</div>} */}\r\n           \r\n        </div>\r\n        </div>\r\n        </>\r\n    )\r\n   \r\n   \r\n}\r\n\r\nexport function ProductExitModify(){\r\n    const { register, handleSubmit, setValue,reset, errors } = useForm(); //watch, errors,\r\n    // eslint-disable-next-line \r\n    const [error, setError] =useState(false)\r\n    // eslint-disable-next-line \r\n    const [success, setSuccess] =useState(false)\r\n    // eslint-disable-next-line \r\n    const [message,setMessage] = useState(\"\")\r\n    // eslint-disable-next-line \r\n    const ProductEntryServ=client.service('productentry')\r\n    //const history = useHistory()\r\n     // eslint-disable-next-line\r\n    const {user} = useContext(UserContext)\r\n    const {state,setState} = useContext(ObjectContext)\r\n\r\n    const ProductEntry =state.ProductExitModule.selectedProductEntry \r\n\r\n        useEffect(() => {\r\n            setValue(\"name\", ProductEntry.name,  {\r\n                shouldValidate: true,\r\n                shouldDirty: true\r\n            })\r\n            setValue(\"ProductEntryType\", ProductEntry.ProductEntryType,  {\r\n                shouldValidate: true,\r\n                shouldDirty: true\r\n            })\r\n           /*  setValue(\"profession\", ProductEntry.profession,  {\r\n                shouldValidate: true,\r\n                shouldDirty: true\r\n            })\r\n            setValue(\"phone\", ProductEntry.phone,  {\r\n                shouldValidate: true,\r\n                shouldDirty: true\r\n            })\r\n            setValue(\"email\", ProductEntry.email,  {\r\n                shouldValidate: true,\r\n                shouldDirty: true\r\n            })\r\n            setValue(\"department\", ProductEntry.department,  {\r\n                shouldValidate: true,\r\n                shouldDirty: true\r\n            })\r\n            setValue(\"deptunit\", ProductEntry.deptunit,  {\r\n                shouldValidate: true,\r\n                shouldDirty: true\r\n            }) */\r\n          /*   setValue(\"ProductEntryCategory\", ProductEntry.ProductEntryCategory,  {\r\n                shouldValidate: true,\r\n                shouldDirty: true\r\n            }) */\r\n            \r\n            return () => {\r\n                \r\n            }\r\n        })\r\n\r\n   const handleCancel=async()=>{\r\n    const    newProductExitModule={\r\n        selectedProductEntry:{},\r\n        show :'create'\r\n      }\r\n   await setState((prevstate)=>({...prevstate, ProductExitModule:newProductExitModule}))\r\n   //console.log(state)\r\n           }\r\n\r\n\r\n        const changeState =()=>{\r\n        const    newProductExitModule={\r\n            selectedProductEntry:{},\r\n            show :'create'\r\n        }\r\n        setState((prevstate)=>({...prevstate, ProductExitModule:newProductExitModule}))\r\n\r\n        }\r\n    const handleDelete=async()=>{\r\n        let conf=window.confirm(\"Are you sure you want to delete this data?\")\r\n        \r\n        const dleteId=ProductEntry._id\r\n        if (conf){\r\n             \r\n        ProductEntryServ.remove(dleteId)\r\n        .then((res)=>{\r\n                //console.log(JSON.stringify(res))\r\n                reset();\r\n               /*  setMessage(\"Deleted ProductEntry successfully\")\r\n                setSuccess(true)\r\n                changeState()\r\n               setTimeout(() => {\r\n                setSuccess(false)\r\n                }, 200); */\r\n                toast({\r\n                    message: 'ProductEntry deleted succesfully',\r\n                    type: 'is-success',\r\n                    dismissible: true,\r\n                    pauseOnHover: true,\r\n                  })\r\n                changeState()\r\n            })\r\n            .catch((err)=>{\r\n               // setMessage(\"Error deleting ProductEntry, probable network issues \"+ err )\r\n               // setError(true)\r\n                toast({\r\n                    message: \"Error deleting ProductEntry, probable network issues or \"+ err,\r\n                    type: 'is-danger',\r\n                    dismissible: true,\r\n                    pauseOnHover: true,\r\n                  })\r\n            })\r\n        }\r\n    }\r\n        \r\n\r\n   /* ()=> setValue(\"firstName\", \"Bill\", , {\r\n            shouldValidate: true,\r\n            shouldDirty: true\r\n          })) */\r\n    const onSubmit = (data,e) =>{\r\n        e.preventDefault();\r\n        \r\n        setSuccess(false)\r\n        console.log(data)\r\n        data.facility=ProductEntry.facility\r\n          //console.log(data);\r\n          \r\n        ProductEntryServ.patch(ProductEntry._id,data)\r\n        .then((res)=>{\r\n                //console.log(JSON.stringify(res))\r\n               // e.target.reset();\r\n               // setMessage(\"updated ProductEntry successfully\")\r\n                 toast({\r\n                    message: 'ProductEntry updated succesfully',\r\n                    type: 'is-success',\r\n                    dismissible: true,\r\n                    pauseOnHover: true,\r\n                  })\r\n                  \r\n                changeState()\r\n\r\n            })\r\n            .catch((err)=>{\r\n                //setMessage(\"Error creating ProductEntry, probable network issues \"+ err )\r\n               // setError(true)\r\n                toast({\r\n                    message: \"Error updating ProductEntry, probable network issues or \"+ err,\r\n                    type: 'is-danger',\r\n                    dismissible: true,\r\n                    pauseOnHover: true,\r\n                  })\r\n            })\r\n\r\n      } \r\n     \r\n      \r\n    return (\r\n        \r\n        <>\r\n        <div className=\"card \">\r\n            <div className=\"card-header\">\r\n                <p className=\"card-header-title\">\r\n                    ProductEntry Details-Modify\r\n                </p>\r\n            </div>\r\n            <div className=\"card-content vscrollable\">\r\n           \r\n            <form onSubmit={handleSubmit(onSubmit)}>\r\n                <div className=\"field\">\r\n                    <label className=\"label is-small\"> Name\r\n                    <p className=\"control has-icons-left has-icons-right\">\r\n                        <input className=\"input  is-small\" ref={register({ required: true })}  name=\"name\" type=\"text\" placeholder=\"Name\" />\r\n                        <span className=\"icon is-small is-left\">\r\n                            <i className=\"fas fa-hospital\"></i>\r\n                        </span>                    \r\n                    </p>\r\n                    </label>\r\n                    </div>\r\n                <div className=\"field\">\r\n                <label className=\"label is-small\">ProductEntry Type\r\n                    <p className=\"control has-icons-left has-icons-right\">\r\n                    <input className=\"input is-small \" ref={register({ required: true })} disabled name=\"ProductEntryType\" type=\"text\" placeholder=\"ProductEntry Type\" />\r\n                    <span className=\"icon is-small is-left\">\r\n                        <i className=\"fas fa-map-signs\"></i>\r\n                    </span>\r\n                    \r\n                </p>\r\n                </label>\r\n                </div>\r\n            {/* <div className=\"field\">\r\n            <label className=\"label is-small\">Profession\r\n                <p className=\"control has-icons-left\">\r\n                    <input className=\"input is-small\" ref={register({ required: true })} name=\"profession\" type=\"text\" placeholder=\"Profession\"/>\r\n                    <span className=\"icon is-small is-left\">\r\n                    <i className=\"fas fa-map-marker-alt\"></i>\r\n                    </span>\r\n                </p>\r\n                </label>\r\n                </div>\r\n            <div className=\"field\">\r\n            <label className=\"label is-small\">Phone\r\n                <p className=\"control has-icons-left\">\r\n                    <input className=\"input is-small\" ref={register({ required: true })} name=\"phone\" type=\"text\" placeholder=\"Phone No\"/>\r\n                    <span className=\"icon is-small is-left\">\r\n                    <i className=\"fas fa-phone-alt\"></i>\r\n                    </span>\r\n                </p>\r\n                </label>\r\n                 </div>\r\n            <div className=\"field\">\r\n            <label className=\"label is-small\">Email\r\n                <p className=\"control has-icons-left\">\r\n                    <input className=\"input is-small\" ref={register({ required: true })} name=\"email\" type=\"email\" placeholder=\"ProductEntry Email\"/>\r\n                    <span className=\"icon is-small is-left\">\r\n                    <i className=\"fas fa-envelope\"></i>\r\n                    </span>\r\n                </p>\r\n                </label>\r\n                </div>\r\n            <div className=\"field\">\r\n            <label className=\"label is-small\">Department\r\n                <p className=\"control has-icons-left\">\r\n                    <input className=\"input is-small\" ref={register({ required: true })} name=\"department\" type=\"text\" placeholder=\"Department\"/>\r\n                    <span className=\"icon is-small is-left\">\r\n                    <i className=\"fas fa-user-md\"></i>\r\n                    </span>\r\n                </p>\r\n                </label>\r\n                {errors.department && <span>This field is required</span>}\r\n                </div>\r\n            <div className=\"field\">\r\n            <label className=\"label is-small\">Departmental Unit\r\n                <p className=\"control has-icons-left\">\r\n                    <input className=\"input is-small\" ref={register({ required: true })} name=\"deptunit\" type=\"text\" placeholder=\"Departmental Unit\"/>\r\n                    <span className=\"icon is-small is-left\">\r\n                    <i className=\"fas fa-hospital-symbol\"></i>\r\n                    </span>\r\n                </p>\r\n                </label>\r\n                </div> */}\r\n           {/*  <div className=\"field\">\r\n            <label className=\"label is-small\">Category\r\n                <p className=\"control has-icons-left\">\r\n                    <input className=\"input is-small\" ref={register({ required: true })} name=\"ProductEntryCategory\" type=\"text\" placeholder=\"ProductEntry Category\"/>\r\n                    <span className=\"icon is-small is-left\">\r\n                    <i className=\"fas fa-clinic-medical\"></i>\r\n                    </span>\r\n                </p>\r\n                </label>\r\n            </div> */}\r\n           \r\n           \r\n            </form>\r\n            \r\n            <div className=\"field  is-grouped mt-2\" >\r\n                <p className=\"control\">\r\n                    <button type=\"submit\" className=\"button is-success is-small\" onClick={handleSubmit(onSubmit)}>\r\n                        Save\r\n                    </button>\r\n                </p>\r\n                <p className=\"control\">\r\n                    <button className=\"button is-warning is-small\" onClick={handleCancel}>\r\n                        Cancel\r\n                    </button>\r\n                </p>\r\n                <p className=\"control\">\r\n                    <button className=\"button is-danger is-small\" onClick={()=>handleDelete()} type=\"delete\">\r\n                       Delete\r\n                    </button>\r\n                </p>\r\n            </div>\r\n        </div>\r\n        </div>\r\n        </>\r\n    )\r\n   \r\n   \r\n                \r\n}   \r\n\r\nexport  function InventorySearch({getSearchfacility,clear}) {\r\n    \r\n    const productServ=client.service('inventory')\r\n    const [facilities,setFacilities]=useState([])\r\n     // eslint-disable-next-line\r\n     const [searchError, setSearchError] =useState(false)\r\n     // eslint-disable-next-line\r\n    const [showPanel, setShowPanel] =useState(false)\r\n     // eslint-disable-next-line\r\n   const [searchMessage, setSearchMessage] = useState(\"\") \r\n   // eslint-disable-next-line \r\n   const [simpa,setSimpa]=useState(\"\")\r\n   // eslint-disable-next-line \r\n   const [chosen,setChosen]=useState(false)\r\n   // eslint-disable-next-line \r\n   const [count,setCount]=useState(0)\r\n   const inputEl=useRef(null)\r\n   const [val,setVal]=useState(\"\")\r\n   const {user} = useContext(UserContext) \r\n   const {state}=useContext(ObjectContext)\r\n    const [productModal,setProductModal]=useState(false)\r\n\r\n   const handleRow= async(obj)=>{\r\n        await setChosen(true)\r\n        //alert(\"something is chaning\")\r\n       getSearchfacility(obj)\r\n       \r\n       await setSimpa(obj.name)\r\n       \r\n        // setSelectedFacility(obj)\r\n        setShowPanel(false)\r\n        await setCount(2)\r\n        /* const    newfacilityModule={\r\n            selectedFacility:facility,\r\n            show :'detail'\r\n        }\r\n   await setState((prevstate)=>({...prevstate, facilityModule:newfacilityModule})) */\r\n   //console.log(state)\r\n    }\r\n    const handleBlur=async(e)=>{\r\n         if (count===2){\r\n             console.log(\"stuff was chosen\")\r\n         }\r\n       \r\n       /*  console.log(\"blur\")\r\n         setShowPanel(false)\r\n        console.log(JSON.stringify(simpa))\r\n        if (simpa===\"\"){\r\n            console.log(facilities.length)\r\n            setSimpa(\"abc\")\r\n            setSimpa(\"\")\r\n            setFacilities([])\r\n            inputEl.current.setValue=\"\"\r\n        }\r\n        console.log(facilities.length)\r\n        console.log(inputEl.current) */\r\n    }\r\n    const handleSearch=async(value)=>{\r\n        setVal(value)\r\n        if (value===\"\"){\r\n            setShowPanel(false)\r\n            getSearchfacility(false)\r\n            return\r\n        }\r\n        const field='name' //field variable\r\n\r\n       \r\n        if (value.length>=3 ){\r\n            productServ.find({query: {     //service\r\n                 [field]: {\r\n                     $regex:value,\r\n                     $options:'i'\r\n                    \r\n                 },\r\n                 facility: user.currentEmployee.facilityDetail._id,\r\n                 storeId: state.StoreModule.selectedStore._id,\r\n                 $limit:10,\r\n                 $sort: {\r\n                     createdAt: -1\r\n                   }\r\n                     }}).then((res)=>{\r\n              console.log(\"product  fetched successfully\") \r\n              console.log(res.data) \r\n                setFacilities(res.data)\r\n                 setSearchMessage(\" product  fetched successfully\")\r\n                 setShowPanel(true)\r\n             })\r\n             .catch((err)=>{\r\n                toast({\r\n                    message: 'Error creating ProductEntry ' + err,\r\n                    type: 'is-danger',\r\n                    dismissible: true,\r\n                    pauseOnHover: true,\r\n                  })\r\n             })\r\n         }\r\n        else{\r\n            console.log(\"less than 3 \")\r\n            console.log(val)\r\n            setShowPanel(false)\r\n            await setFacilities([])\r\n            console.log(facilities)\r\n        }\r\n    }\r\n\r\n    const handleAddproduct =()=>{\r\n        setProductModal(true) \r\n    }\r\n    const handlecloseModal =()=>{\r\n        setProductModal(false)\r\n        handleSearch(val)\r\n    }\r\n    useEffect(() => {\r\n       if (clear){\r\n           console.log(\"success has changed\",clear)\r\n           setSimpa(\"\")\r\n       }\r\n        return () => {\r\n            \r\n        }\r\n    }, [clear] )\r\n    return (\r\n        <div>\r\n            <div className=\"field\">\r\n                <div className=\"control has-icons-left  \">\r\n                    <div className={`dropdown ${showPanel?\"is-active\":\"\"}`} style={{width:\"100%\"}}>\r\n                        <div className=\"dropdown-trigger\" style={{width:\"100%\"}}>\r\n                            <DebounceInput className=\"input is-small  is-expanded\" \r\n                                type=\"text\" placeholder=\"Search Product\"\r\n                                value={simpa}\r\n                                minLength={3}\r\n                                debounceTimeout={400}\r\n                                onBlur={(e)=>handleBlur(e)}\r\n                                onChange={(e)=>handleSearch(e.target.value)}\r\n                                inputRef={inputEl}\r\n                                  />\r\n                            <span className=\"icon is-small is-left\">\r\n                                <i className=\"fas fa-search\"></i>\r\n                            </span>\r\n                        </div>\r\n                        {/* {searchError&&<div>{searchMessage}</div>} */}\r\n                        <div className=\"dropdown-menu expanded\" style={{width:\"100%\"}}>\r\n                            <div className=\"dropdown-content\">\r\n                          { facilities.length>0?\"\":<div className=\"dropdown-item\" /* onClick={handleAddproduct} */> <span> {val} is not in your inventory</span> </div>}\r\n\r\n                              {facilities.map((facility, i)=>(\r\n                                    \r\n                                    <div className=\"dropdown-item\" key={facility._id} onClick={()=>handleRow(facility)}>\r\n                                        \r\n                                        <div><span>{facility.name}</span></div>\r\n                                        <div><span><strong>{facility.quantity}</strong></span>\r\n                                        <span>{facility.baseunit}(s) remaining</span>\r\n                                        <span className=\"padleft\"><strong>Price:</strong> N{facility.sellingprice}</span></div>\r\n                                        \r\n                                    </div>\r\n                                    \r\n                                    ))}\r\n                                    \r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div className={`modal ${productModal?\"is-active\":\"\"}` }>\r\n                                    <div className=\"modal-background\"></div>\r\n                                    <div className=\"modal-card\">\r\n                                        <header className=\"modal-card-head\">\r\n                                        <p className=\"modal-card-title\">Choose Store</p>\r\n                                        <button className=\"delete\" aria-label=\"close\"  onClick={handlecloseModal}></button>\r\n                                        </header>\r\n                                        <section className=\"modal-card-body\">\r\n                                        {/* <StoreList standalone=\"true\" /> */}\r\n                                        <ProductCreate />\r\n                                        </section>\r\n                                        {/* <footer className=\"modal-card-foot\">\r\n                                        <button className=\"button is-success\">Save changes</button>\r\n                                        <button className=\"button\">Cancel</button>\r\n                                        </footer> */}\r\n                                    </div>\r\n                                </div>       \r\n        </div>\r\n    )\r\n}","C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\App.js",["429","430"],"C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\LandingPage.js",[],"C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\Clinic\\ClinicReport.js",[],"C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\facility\\DeptUnits.js",[],"C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\ClientMgt\\Patient.js",["431","432","433","434","435","436","437","438","439","440","441","442","443","444","445","446","447"],"C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\inventory\\ProductEntry.js",["448","449","450","451","452","453","454"],"C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\Finance\\FinanceHome.js",["455","456","457","458","459","460"],"C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\Finance\\BillPrescription.js",["461","462","463","464","465","466","467","468","469","470","471","472","473","474","475","476","477","478"],"C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\EncounterMgt\\DocumentClass.js",["479","480","481","482","483"],"C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\EncounterMgt\\Prescription.js",["484","485","486","487","488","489","490","491","492","493","494","495","496","497","498","499","500","501","502","503","504"],"import React, {useState,useContext, useEffect,useRef} from 'react'\r\nimport client from '../../feathers'\r\nimport {DebounceInput} from 'react-debounce-input';\r\nimport { useForm } from \"react-hook-form\";\r\n//import {useHistory} from 'react-router-dom'\r\nimport {UserContext,ObjectContext} from '../../context'\r\nimport FacilityPopup from '../helpers/FacilityPopup'\r\nimport {toast} from 'bulma-toast'\r\nimport {format, formatDistanceToNowStrict } from 'date-fns'\r\n/* import {ProductCreate} from './Products' */\r\n// eslint-disable-next-line\r\nconst searchfacility={};\r\n\r\n\r\nexport default function Prescription() {\r\n    const {state}=useContext(ObjectContext) //,setState\r\n    // eslint-disable-next-line\r\n    const [selectedProductEntry,setSelectedProductEntry]=useState()\r\n    //const [showState,setShowState]=useState() //create|modify|detail\r\n    \r\n    return(\r\n        <section className= \"section remPadTop\">\r\n           {/*  <div className=\"level\">\r\n            <div className=\"level-item\"> <span className=\"is-size-6 has-text-weight-medium\">ProductEntry  Module</span></div>\r\n            </div> */}\r\n            <div className=\"columns \">\r\n            <div className=\"column is-6 \">\r\n                <PrescriptionList />\r\n                </div>\r\n            <div className=\"column is-6 \">\r\n                {(state.OrderModule.show ==='create')&&<PrescriptionCreate />}\r\n                {(state.OrderModule.show ==='detail')&&<ProductEntryDetail  />}\r\n                {(state.OrderModule.show ==='modify')&&<ProductEntryModify ProductEntry={selectedProductEntry} />}\r\n               \r\n            </div>\r\n\r\n            </div>                            \r\n            </section>\r\n       \r\n    )\r\n    \r\n}\r\n\r\nexport function PrescriptionCreate(){\r\n   // const { register, handleSubmit,setValue} = useForm(); //, watch, errors, reset \r\n    const [error, setError] =useState(false)\r\n    const [success, setSuccess] =useState(false)\r\n    const [message,setMessage] = useState(\"\")\r\n    // eslint-disable-next-line\r\n    const [facility,setFacility] = useState()\r\n    const ProductEntryServ=client.service('productentry')\r\n    //const history = useHistory()\r\n    const {user} = useContext(UserContext) //,setUser\r\n    // eslint-disable-next-line\r\n    const [currentUser,setCurrentUser] = useState()\r\n    const [type,setType] = useState(\"Purchase Invoice\")\r\n    const [documentNo,setDocumentNo] = useState(\"\")\r\n    const [totalamount,setTotalamount] = useState(\"\")\r\n    const [productId,setProductId] = useState(\"\")\r\n    const [source,setSource] = useState(\"\")\r\n    const [date,setDate] = useState(\"\")\r\n    const [name,setName] = useState(\"\")\r\n    const [destination,setDestination] = useState('')\r\n    const [destinationId,setDestinationId] = useState('')\r\n    const [destinationModal,setDestinationModal] = useState(false)\r\n    const [medication,setMedication] = useState()\r\n    const [instruction,setInstruction] = useState()\r\n    const [productItem,setProductItem] = useState([])\r\n    const {state}=useContext(ObjectContext)\r\n    const ClientServ=client.service('clinicaldocument')\r\n    \r\n    const [productEntry,setProductEntry]=useState({\r\n        productitems:[],\r\n        date,\r\n        documentNo,\r\n        type,\r\n        totalamount,\r\n        source,\r\n\r\n    })\r\n \r\n    const handlecloseModal =()=>{\r\n        setDestinationModal(false)\r\n        //handleSearch(val)\r\n    }\r\n    const productItemI={\r\n      /*   productId,\r\n        name, */\r\n        medication,\r\n        destination,\r\n        instruction,\r\n        destinationId\r\n        /* costprice,\r\n        amount:quantity*costprice,\r\n        baseunit */\r\n\r\n    }\r\n    // consider batchformat{batchno,expirydate,qtty,baseunit}\r\n    //consider baseunoit conversions\r\n    const getSearchfacility=(obj)=>{\r\n\r\n        setInstruction(obj.instruction)\r\n        setMedication(obj.medication)\r\n\r\n        if (!obj){\r\n            //\"clear stuff\"\r\n            setInstruction(\"\")\r\n            setMedication(\"\")\r\n           \r\n        }\r\n       // setBaseunit(obj.baseunit)\r\n        \r\n       /*  setValue(\"facility\", obj._id,  {\r\n            shouldValidate: true,\r\n            shouldDirty: true\r\n        }) */\r\n    }\r\n    \r\n    useEffect(() => {\r\n        setCurrentUser(user)\r\n        //console.log(currentUser)\r\n        return () => {\r\n        \r\n        }\r\n    }, [user])\r\n   /*  useEffect(() => {\r\n        setProductItem(\r\n            prevProd=>prevProd.concat(productItemI)\r\n        )\r\n        console.log(productItem)\r\n        return () => {\r\n            \r\n        }\r\n    },[productItemI])\r\n */\r\n    useEffect(() => {\r\n        \r\n        setDestination(state.DestinationModule.selectedDestination.facilityName)\r\n        setDestinationId(state.DestinationModule.selectedDestination._id)\r\n        return () => {\r\n           \r\n        }\r\n    }, [state.DestinationModule.selectedDestination])\r\n\r\n    const handleChangeType=async (e)=>{\r\n        await setType(e.target.value)\r\n    }\r\n    const handleClickProd=async()=>{\r\n        await setSuccess(false)\r\n        if (!(productItemI.medication && productItemI.medication.length>0 )){\r\n            toast({\r\n                message: 'medication can not be empty ' ,\r\n                type: 'is-danger',\r\n                dismissible: true,\r\n                pauseOnHover: true,\r\n              })\r\n              return\r\n        }\r\n        await setProductItem(\r\n            prevProd=>prevProd.concat(productItemI)\r\n        )\r\n        setName(\"\")\r\n        setMedication(\"\")\r\n        setInstruction(\"\")\r\n        setDestination( user.currentEmployee.facilityDetail.facilityName)\r\n        setDestinationId( user.currentEmployee.facilityDetail._id)\r\n       // setDestination(\"\")\r\n       await setSuccess(true)\r\n       console.log(success)\r\n       console.log(productItem)\r\n    }\r\n  //check user for facility or get list of facility  \r\n   /*  useEffect(()=>{\r\n        //setFacility(user.activeProductEntry.FacilityId)//\r\n      if (!user.stacker){\r\n          console.log(currentUser)\r\n           /* setValue(\"facility\", user.currentEmployee.facilityDetail._id,  {\r\n            shouldValidate: true,\r\n            shouldDirty: true\r\n        })  \r\n\r\n      }\r\n    }) */\r\n\r\n    const handleChangeDestination=()=>{\r\n        setDestinationModal(true)\r\n    }\r\n\r\n    const resetform=()=>{\r\n     setType(\"Purchase Invoice\")\r\n    setDocumentNo(\"\")\r\n    setTotalamount(\"\")\r\n    setProductId(\"\")\r\n    setSource(\"\")\r\n    setDate(\"\")\r\n    setName(\"\")\r\n    setMedication(\"\")\r\n    setInstruction(\"\")\r\n    setProductItem([])\r\n    }\r\n    const onSubmit = () =>{\r\n        //data,e\r\n       // e.preventDefault();\r\n        setMessage(\"\")\r\n        setError(false)\r\n        setSuccess(false)\r\n        //write document\r\n        let document={}\r\n         // data.createdby=user._id\r\n         // console.log(data);\r\n          if (user.currentEmployee){\r\n          document.facility=user.currentEmployee.facilityDetail._id \r\n          document.facilityname=user.currentEmployee.facilityDetail.facilityName // or from facility dropdown\r\n          }\r\n         document.documentdetail=productItem\r\n         console.log(document.documentdetail)\r\n          document.documentname=\"Prescription\" //state.DocumentClassModule.selectedDocumentClass.name\r\n         // document.documentClassId=state.DocumentClassModule.selectedDocumentClass._id\r\n          document.location=state.ClinicModule.selectedClinic.name+\" \"+state.ClinicModule.selectedClinic.locationType\r\n          document.locationId=state.ClinicModule.selectedClinic._id\r\n          document.client=state.ClientModule.selectedClient._id\r\n          document.clientname=state.ClientModule.selectedClient.firstname+ \" \"+state.ClientModule.selectedClient.middlename+\" \"+state.ClientModule.selectedClient.lastname\r\n          document.clientobj=state.ClientModule.selectedClient\r\n          document.createdBy=user._id\r\n          document.createdByname=user.firstname+ \" \"+user.lastname\r\n          document.status=\"completed\"\r\n          console.log(document)\r\n        ClientServ.create(document)\r\n        .then((res)=>{\r\n                //console.log(JSON.stringify(res))\r\n               // e.target.reset();\r\n               /*  setMessage(\"Created Client successfully\") */\r\n                setSuccess(true)\r\n                toast({\r\n                    message: 'Presciption created succesfully',\r\n                    type: 'is-success',\r\n                    dismissible: true,\r\n                    pauseOnHover: true,\r\n                  })\r\n                  setSuccess(false)\r\n                  setProductItem([])\r\n            })\r\n            .catch((err)=>{\r\n                toast({\r\n                    message: 'Error creating Prescription ' + err,\r\n                    type: 'is-danger',\r\n                    dismissible: true,\r\n                    pauseOnHover: true,\r\n                  })\r\n            })\r\n\r\n      } \r\n\r\n    useEffect(() => {\r\n        setDestination( user.currentEmployee.facilityDetail.facilityName)\r\n        setDestinationId( user.currentEmployee.facilityDetail._id)\r\n        return () => {\r\n            \r\n        }\r\n    }, [])\r\n\r\n    return (\r\n        <>\r\n            <div className=\"card card-overflow\">\r\n            <div className=\"card-header\">\r\n                <p className=\"card-header-title\">\r\n                    Create Prescription\r\n                </p>\r\n            </div>\r\n            <div className=\"card-content \">\r\n   \r\n           {/*  <form onSubmit={onSubmit}> {/* handleSubmit(onSubmit)  </form>  */}\r\n           \r\n               \r\n           \r\n         {/* array of ProductEntry items */}\r\n        \r\n        <label className=\"label is-small\">Add Medication:</label>\r\n         <div className=\"field is-horizontal\">\r\n            <div className=\"field-body\">\r\n             <div className=\"field is-expanded\"  /* style={ !user.stacker?{display:\"none\"}:{}} */  > \r\n                    <MedicationHelperSearch  getSearchfacility={getSearchfacility} clear={success} />  \r\n                  <p className=\"control has-icons-left \" style={{display:\"none\"}}>\r\n                        <input className=\"input is-small\"  /* ref={register ({ required: true }) }  */   value={medication} name=\"medication\" type=\"text\" onChange={e=>setMedication(e.target.value)} placeholder=\"medication\" />\r\n                        <span className=\"icon is-small is-left\">\r\n                        <i className=\"fas  fa-map-marker-alt\"></i>\r\n                        </span>\r\n                    </p> \r\n                </div>\r\n               {/*  <div className=\"field\">\r\n                <p className=\"control has-icons-left\">\r\n                    <input className=\"input is-small\" ref={register({ required: true })} name=\"medication\" value={medication} type=\"text\" onChange={e=>setMedication(e.target.value)} placeholder=\"medication\"  />\r\n                    <span className=\"icon is-small is-left\">\r\n                    <i className=\"fas fa-envelope\"></i>\r\n                    </span>\r\n                </p>\r\n       \r\n            </div>  */}\r\n            \r\n          \r\n            <div className=\"field\">\r\n            <p className=\"control\">\r\n                    <button className=\"button is-info is-small  is-pulled-right\">\r\n                      <span className=\"is-small\" onClick={handleClickProd}> +</span>\r\n                    </button>\r\n                </p>\r\n            </div>\r\n            </div>\r\n         </div>\r\n         <div className=\"field is-horizontal\">\r\n            <div className=\"field-body\">\r\n         <div className=\"field\">\r\n                <p className=\"control has-icons-left\">\r\n                    <input className=\"input is-small\" /* ref={register({ required: true })} */ name=\"instruction\" value={instruction} type=\"text\" onChange={e=>setInstruction(e.target.value)} placeholder=\"Instructions/Note\"  />\r\n                    <span className=\"icon is-small is-left\">\r\n                    <i className=\"fas fa-envelope\"></i>\r\n                    </span>\r\n                </p>\r\n       \r\n            </div>  \r\n            <div className=\"field\">\r\n                <p className=\"control has-icons-left\">\r\n                    <input className=\"input is-small \" disabled /* ref={register({ required: true })} */ name=\"destination\" value={destination===user.currentEmployee.facilityDetail.facilityName?\"In-house\":destination} type=\"text\" onChange={e=>setDestination(e.target.value)} placeholder=\"Destination Pharmacy\"  />\r\n                    <span className=\"icon is-small is-left\">\r\n                    <i className=\"fas fa-envelope\"></i>\r\n                    </span>\r\n                </p>\r\n                <button className=\"button is-small is-success btnheight\" onClick={handleChangeDestination}>Change</button>\r\n       \r\n            </div>  \r\n            </div> \r\n            </div> \r\n\r\n       {(productItem.length>0) && <div>\r\n            <label className=\"label is-size-7\">Medications:</label>\r\n         <table className=\"table is-striped  is-hoverable is-fullwidth is-scrollable \">\r\n                <thead>\r\n                    <tr>\r\n                    <th><abbr title=\"Serial No\">S/No</abbr></th>\r\n                   {/*  <th><abbr title=\"Type\">Name</abbr></th> */}\r\n                    <th><abbr title=\"Medication\">Medication</abbr></th>\r\n                    <th><abbr title=\"Destination\">Destination</abbr></th>\r\n                     {/*<th><abbr title=\"Cost Price\">Cost Price</abbr></th>\r\n                    <th><abbr title=\"Cost Price\">Amount</abbr></th> */}\r\n                    <th><abbr title=\"Actions\">Actions</abbr></th>\r\n                    </tr>\r\n                </thead>\r\n                <tfoot>\r\n                    \r\n                </tfoot>\r\n                <tbody>\r\n                   { productItem.map((ProductEntry, i)=>(\r\n\r\n                        <tr key={i}>\r\n                        <th>{i+1}</th>\r\n                        {/* <td>{ProductEntry.name}</td> */}\r\n                        <td>{ProductEntry.medication}<br/>\r\n                        <span className=\"help\">{ProductEntry.instruction}</span></td>\r\n                       <td>{ProductEntry.destination===user.currentEmployee.facilityDetail.facilityName?\"In-house\":ProductEntry.destination}</td>\r\n                         {/* <td>{ProductEntry.costprice}</td>\r\n                        <td>{ProductEntry.amount}</td> */}\r\n                        <td><span className=\"showAction\"  >x</span></td>\r\n                        \r\n                        </tr>\r\n\r\n                    ))}\r\n                </tbody>\r\n                </table>\r\n                <div className=\"field mt-2\">\r\n                <p className=\"control\">\r\n                    <button className=\"button is-success is-small\" disabled={!productItem.length>0} onClick={onSubmit}>\r\n                        Create\r\n                    </button>\r\n                </p>\r\n                </div>\r\n                </div>\r\n           \r\n            }\r\n            \r\n            \r\n            </div>\r\n            </div>\r\n            <div className={`modal ${destinationModal?\"is-active\":\"\"}` }>\r\n                                    <div className=\"modal-background\"></div>\r\n                                    <div className=\"modal-card\">\r\n                                        <header className=\"modal-card-head\">\r\n                                        <p className=\"modal-card-title\">Choose Destination</p>\r\n                                        <button className=\"delete\" aria-label=\"close\"  onClick={handlecloseModal}></button>\r\n                                        </header>\r\n                                        <section className=\"modal-card-body\">\r\n                                            <FacilityPopup facilityType=\"Pharmacy\"  closeModal={handlecloseModal}/>\r\n                                        {/* <StoreList standalone=\"true\" /> */}\r\n                                       {/*  <ProductCreate /> */}\r\n                                        </section>\r\n                                        {/* <footer className=\"modal-card-foot\">\r\n                                        <button className=\"button is-success\">Save changes</button>\r\n                                        <button className=\"button\">Cancel</button>\r\n                                        </footer> */}\r\n                                    </div>\r\n                                </div>       \r\n        </>\r\n    )\r\n   \r\n}\r\n\r\nexport function PrescriptionList({standalone}){\r\n   // const { register, handleSubmit, watch, errors } = useForm();\r\n    // eslint-disable-next-line\r\n    const [error, setError] =useState(false)\r\n     // eslint-disable-next-line\r\n    const [success, setSuccess] =useState(false)\r\n     // eslint-disable-next-line\r\n   const [message, setMessage] = useState(\"\") \r\n    const OrderServ=client.service('order')\r\n    //const history = useHistory()\r\n   // const {user,setUser} = useContext(UserContext)\r\n    const [facilities,setFacilities]=useState([])\r\n     // eslint-disable-next-line\r\n   const [selectedOrder, setSelectedOrder]=useState() //\r\n    // eslint-disable-next-line\r\n    const {state,setState}=useContext(ObjectContext)\r\n    // eslint-disable-next-line\r\n    const {user,setUser}=useContext(UserContext)\r\n\r\n\r\n\r\n    const handleCreateNew = async()=>{\r\n        const    newProductEntryModule={\r\n            selectedOrder:{},\r\n            show :'create'\r\n            }\r\n       await setState((prevstate)=>({...prevstate, OrderModule:newProductEntryModule}))\r\n       //console.log(state)\r\n        \r\n\r\n    }\r\n    const handleRow= async(ProductEntry)=>{\r\n        //console.log(\"b4\",state)\r\n\r\n        //console.log(\"handlerow\",ProductEntry)\r\n\r\n        await setSelectedOrder(ProductEntry)\r\n\r\n        const    newProductEntryModule={\r\n            selectedOrder:ProductEntry,\r\n            show :'detail'\r\n        }\r\n       await setState((prevstate)=>({...prevstate, OrderModule:newProductEntryModule}))\r\n       //console.log(state)\r\n\r\n    }\r\n\r\n   const handleSearch=(val)=>{\r\n       const field='name'\r\n       console.log(val)\r\n       OrderServ.find({query: {\r\n              $or:[ { order: {\r\n                    $regex:val,\r\n                    $options:'i'\r\n                   \r\n                }},\r\n                {order_status: {\r\n                    $regex:val,\r\n                    $options:'i'\r\n                   \r\n                }}],\r\n                order_category:\"Prescription\",\r\n               // storeId:state.StoreModule.selectedStore._id,\r\n               //facility:user.currentEmployee.facilityDetail._id || \"\",\r\n                $limit:10,\r\n                $sort: {\r\n                    createdAt: -1\r\n                  }\r\n                    }}).then((res)=>{\r\n                console.log(res)\r\n               setFacilities(res.data)\r\n                setMessage(\" ProductEntry  fetched successfully\")\r\n                setSuccess(true) \r\n            })\r\n            .catch((err)=>{\r\n                console.log(err)\r\n                setMessage(\"Error fetching ProductEntry, probable network issues \"+ err )\r\n                setError(true)\r\n            })\r\n        }\r\n   \r\n const getFacilities= async()=>{\r\n       \r\n            console.log(\"here b4 server\")\r\n            console.log(state.ClientModule.selectedClient._id)\r\n             const findProductEntry= await OrderServ.find(\r\n                {query: {\r\n                    order_category:\"Prescription\",\r\n                    //destination: user.currentEmployee.facilityDetail._id,\r\n                   \r\n                    //storeId:state.StoreModule.selectedStore._id,\r\n                    clientId:state.ClientModule.selectedClient._id,\r\n                    $limit:20,\r\n                    $sort: {\r\n                        createdAt: -1\r\n                    }\r\n                    }})\r\n         await setFacilities(findProductEntry.data)\r\n         }   \r\n\r\n            useEffect(() => {\r\n                console.log(\"started\")\r\n                getFacilities()\r\n              \r\n               \r\n               OrderServ.on('created', (obj)=>getFacilities())\r\n                OrderServ.on('updated', (obj)=>getFacilities())\r\n                OrderServ.on('patched', (obj)=>getFacilities())\r\n                OrderServ.on('removed', (obj)=>getFacilities())\r\n                return () => {\r\n                \r\n                }\r\n            },[])\r\n\r\n            \r\n    return(\r\n        \r\n            <>  \r\n                <div className=\"level\">\r\n                    <div className=\"level-left\">\r\n                        <div className=\"level-item\">\r\n                            <div className=\"field\">\r\n                                <p className=\"control has-icons-left  \">\r\n                                    <DebounceInput className=\"input is-small \" \r\n                                        type=\"text\" placeholder=\"Search Medications\"\r\n                                        minLength={3}\r\n                                        debounceTimeout={400}\r\n                                        onChange={(e)=>handleSearch(e.target.value)} />\r\n                                    <span className=\"icon is-small is-left\">\r\n                                        <i className=\"fas fa-search\"></i>\r\n                                    </span>\r\n                                </p>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                   {!standalone && (<><div className=\"level-item\"> <span className=\"is-size-6 has-text-weight-medium\">List of Prescriptions </span></div>\r\n                    <div className=\"level-right\">\r\n                        <div className=\"level-item\"> \r\n                            <div className=\"level-item\"><div className=\"button is-success is-small\" onClick={handleCreateNew}>New</div></div>\r\n                        </div>\r\n                    </div></>)}\r\n\r\n                </div>\r\n                <div className=\"table-container pullup \">\r\n                                <table className=\"table is-striped is-narrow is-hoverable is-fullwidth is-scrollable \">\r\n                                    <thead>\r\n                                        <tr>\r\n                                        <th><abbr title=\"Serial No\">S/No</abbr></th>\r\n                                        <th><abbr title=\"Date\">Date</abbr></th>\r\n                                        <th><abbr title=\"Order\">Medication</abbr></th>\r\n                                        <th>Fulfilled</th>\r\n                                        <th><abbr title=\"Status\">Status</abbr></th>\r\n                                        <th><abbr title=\"Requesting Physician\">Requesting Physician</abbr></th>\r\n                                        {/* <th><abbr title=\"Client Name\">Client Name</abbr></th> */}\r\n                                        {!standalone &&     <th><abbr title=\"Actions\">Actions</abbr></th>}\r\n                                        </tr>\r\n                                    </thead>\r\n                                    <tfoot>\r\n                                        \r\n                                    </tfoot>\r\n                                    <tbody>\r\n                                        {facilities.map((ProductEntry, i)=>(\r\n\r\n                                            <tr key={ProductEntry._id} onClick={()=>handleRow(ProductEntry)} className={ProductEntry._id===(selectedOrder?._id||null)?\"is-selected\":\"\"}>\r\n                                            <th>{i+1}</th>\r\n                                            <td>{/* {formatDistanceToNowStrict(new Date(ProductEntry.createdAt),{addSuffix: true})} <br/> */}<span>{format(new Date(ProductEntry.createdAt),'dd-MM-yy')}</span></td>\r\n                                            <th>{ProductEntry.order}</th>\r\n                                            <td>{ProductEntry.fulfilled?\"Yes\":\"No\"}</td>\r\n                                            <td>{ProductEntry.order_status}</td>\r\n                                            <td>{ProductEntry.requestingdoctor_Name}</td>\r\n                                            {/* <td>{ProductEntry.clientId}</td> */}\r\n                                          {!standalone &&  <td><span className=\"showAction\"  >...</span></td>}\r\n                                           \r\n                                            </tr>\r\n\r\n                                        ))}\r\n                                    </tbody>\r\n                                    </table>\r\n                                    \r\n                </div>              \r\n            </>\r\n              \r\n    )\r\n    }\r\n\r\n\r\nexport function ProductEntryDetail(){\r\n    //const { register, handleSubmit, watch, setValue } = useForm(); //errors,\r\n     // eslint-disable-next-line\r\n    const [error, setError] =useState(false) //, \r\n    //const [success, setSuccess] =useState(false)\r\n     // eslint-disable-next-line\r\n    const [message, setMessage] = useState(\"\") //,\r\n    //const ProductEntryServ=client.service('/ProductEntry')\r\n    //const history = useHistory()\r\n    //const {user,setUser} = useContext(UserContext)\r\n    const {state,setState} = useContext(ObjectContext)\r\n\r\n   \r\n\r\n   const ProductEntry =state.ProductEntryModule.selectedProductEntry \r\n\r\n    const handleEdit= async()=>{\r\n        const    newProductEntryModule={\r\n            selectedProductEntry:ProductEntry,\r\n            show :'modify'\r\n        }\r\n       await setState((prevstate)=>({...prevstate, ProductEntryModule:newProductEntryModule}))\r\n       //console.log(state)\r\n       \r\n    }\r\n \r\n    return (\r\n        <>\r\n        <div className=\"card \">\r\n            <div className=\"card-header\">\r\n                <p className=\"card-header-title\">\r\n                    ProductEntry Details\r\n                </p>\r\n            </div>\r\n            <div className=\"card-content vscrollable\">\r\n           \r\n                <table> \r\n                <tbody>         \r\n                <tr>\r\n                    <td>\r\n                      <label className=\"label is-small\"> <span className=\"icon is-small is-left\">\r\n                            <i className=\"fas fa-hospital\"></i>\r\n                        </span>                    \r\n                        Type\r\n                        </label>\r\n                    </td>\r\n                    <td>\r\n                        <span className=\"is-size-7 padleft\"   name=\"name\"> {ProductEntry.type} </span>\r\n                    </td>\r\n                    <td>\r\n\r\n                    </td>\r\n                    <td>\r\n                        <label className=\"label is-small padleft\"><span className=\"icon is-small is-left\">\r\n                            <i className=\"fas fa-map-signs\"></i>\r\n                        </span>Supplier:\r\n                        </label>\r\n                    </td>\r\n                    <td>\r\n                        <span className=\"is-size-7 padleft\"   name=\"ProductEntryType\">{ProductEntry.source} </span> \r\n                    </td>\r\n                </tr>\r\n                <tr>\r\n                    <td>\r\n                        <label className=\"label is-small\"> <span className=\"icon is-small is-left\">\r\n                        <i className=\"fas fa-hospital\"></i>\r\n                        </span>                    \r\n                        Date:\r\n                        </label>\r\n                    </td>\r\n                    <td>\r\n                        <span className=\"is-size-7 padleft\"   name=\"name\"> {ProductEntry.date} </span>\r\n                    </td>\r\n                    <td>\r\n                                \r\n                    </td>\r\n                    <td>\r\n                        <label className=\"label is-small padleft\"><span className=\"icon is-small is-left\">\r\n                            <i className=\"fas fa-map-signs\"></i>\r\n                        </span>Invoice No:\r\n                        </label>\r\n                    </td>\r\n                    \r\n                    <td>\r\n                         <span className=\"is-size-7 padleft\"   name=\"ProductEntryType\">{ProductEntry.documentNo} </span> \r\n                    </td>\r\n                </tr>\r\n                <tr>\r\n                    <td>\r\n                \r\n                        <label className=\"label is-small\"> <span className=\"icon is-small is-left\">\r\n                        <i className=\"fas fa-hospital\"></i>\r\n                    </span>            \r\n                        Total Amount:\r\n                    </label>\r\n                    </td>\r\n                    <td>\r\n                        <span className=\"is-size-7 padleft\"   name=\"name\"> {ProductEntry.totalamount} </span>\r\n                    </td>\r\n                </tr>\r\n\r\n                </tbody> \r\n            </table> \r\n            <label className=\"label is-size-7 mt-2\">Product Items:</label>\r\n         <table className=\"table is-striped  is-hoverable is-fullwidth is-scrollable \">\r\n                <thead>\r\n                    <tr>\r\n                    <th><abbr title=\"Serial No\">S/No</abbr></th>\r\n                    <th><abbr title=\"Type\">Name</abbr></th>\r\n                    <th><abbr title=\"Type\">Quanitity</abbr></th>\r\n                    <th><abbr title=\"Document No\">Unit</abbr></th>\r\n                    <th><abbr title=\"Cost Price\">Cost Price</abbr></th>\r\n                    <th><abbr title=\"Cost Price\">Amount</abbr></th>\r\n                   \r\n                    </tr>\r\n                </thead>\r\n                <tfoot>\r\n                    \r\n                </tfoot>\r\n                <tbody>\r\n                   { ProductEntry.productitems.map((ProductEntry, i)=>(\r\n\r\n                        <tr key={i}>\r\n                        <th>{i+1}</th>\r\n                        <td>{ProductEntry.name}</td>\r\n                        <th>{ProductEntry.quantity}</th>\r\n                        <td>{ProductEntry.baseunit}</td>\r\n                        <td>{ProductEntry.costprice}</td>\r\n                        <td>{ProductEntry.amount}</td>\r\n                        \r\n                        \r\n                        </tr>\r\n\r\n                    ))}\r\n                </tbody>\r\n                </table>\r\n                  {/*   <tr>\r\n                    <td>\r\n            <label className=\"label is-small\"><span className=\"icon is-small is-left\">\r\n                    <i className=\"fas fa-map-marker-alt\"></i>\r\n                    </span>Profession: \r\n                \r\n                    \r\n                    </label>\r\n                    </td>\r\n                <td>\r\n                <span className=\"is-size-7 padleft \"  name=\"ProductEntryCity\">{ProductEntry.profession}</span> \r\n                </td>\r\n                </tr>\r\n                    <tr>\r\n            <td>\r\n            <label className=\"label is-small\"><span className=\"icon is-small is-left\">\r\n                    <i className=\"fas fa-phone-alt\"></i>\r\n                    </span>Phone:           \r\n                    \r\n                        </label>\r\n                        </td>\r\n                        <td>\r\n                        <span className=\"is-size-7 padleft \"  name=\"ProductEntryContactPhone\" >{ProductEntry.phone}</span>\r\n                        </td>\r\n                  </tr>\r\n                    <tr><td>\r\n            \r\n            <label className=\"label is-small\"><span className=\"icon is-small is-left\">\r\n                    <i className=\"fas fa-envelope\"></i>\r\n                    </span>Email:                     \r\n                    \r\n                         </label></td><td>\r\n                         <span className=\"is-size-7 padleft \"  name=\"ProductEntryEmail\" >{ProductEntry.email}</span>\r\n                         </td>\r\n             \r\n                </tr>\r\n                    <tr>\r\n            <td>\r\n            <label className=\"label is-small\"> <span className=\"icon is-small is-left\">\r\n                    <i className=\"fas fa-user-md\"></i></span>Department:\r\n                    \r\n                    </label></td>\r\n                    <td>\r\n                    <span className=\"is-size-7 padleft \"  name=\"ProductEntryOwner\">{ProductEntry.department}</span>\r\n                    </td>\r\n               \r\n                </tr>\r\n                    <tr>\r\n            <td>\r\n            <label className=\"label is-small\"> <span className=\"icon is-small is-left\">\r\n                    <i className=\"fas fa-hospital-symbol\"></i>\r\n                    </span>Departmental Unit:              \r\n                    \r\n                </label></td>\r\n                <td>\r\n                <span className=\"is-size-7 padleft \"  name=\"ProductEntryType\">{ProductEntry.deptunit}</span>\r\n                </td>\r\n              \r\n                </tr> */}\r\n                    \r\n          {/*   <div className=\"field\">\r\n             <label className=\"label is-small\"><span className=\"icon is-small is-left\">\r\n                    <i className=\"fas fa-clinic-medical\"></i>\r\n                    </span>Category:              \r\n                    <span className=\"is-size-7 padleft \"  name= \"ProductEntryCategory\">{ProductEntry.ProductEntryCategory}</span>\r\n                </label>\r\n                 </div> */}\r\n\r\n            \r\n           \r\n           {/*  <div className=\"field mt-2\">\r\n                <p className=\"control\">\r\n                    <button className=\"button is-success is-small\" onClick={handleEdit}>\r\n                        Edit\r\n                    </button>\r\n                </p>\r\n            </div>\r\n            { error && <div className=\"message\"> {message}</div>} */}\r\n           \r\n        </div>\r\n        </div>\r\n        </>\r\n    )\r\n   \r\n   \r\n}\r\n\r\nexport function ProductEntryModify(){\r\n    const { register, handleSubmit, setValue,reset, errors } = useForm(); //watch, errors,\r\n    // eslint-disable-next-line \r\n    const [error, setError] =useState(false)\r\n    // eslint-disable-next-line \r\n    const [success, setSuccess] =useState(false)\r\n    // eslint-disable-next-line \r\n    const [message,setMessage] = useState(\"\")\r\n    // eslint-disable-next-line \r\n    const ProductEntryServ=client.service('productentry')\r\n    //const history = useHistory()\r\n     // eslint-disable-next-line\r\n    const {user} = useContext(UserContext)\r\n    const {state,setState} = useContext(ObjectContext)\r\n\r\n    const ProductEntry =state.ProductEntryModule.selectedProductEntry \r\n\r\n        useEffect(() => {\r\n            setValue(\"name\", ProductEntry.name,  {\r\n                shouldValidate: true,\r\n                shouldDirty: true\r\n            })\r\n            setValue(\"ProductEntryType\", ProductEntry.ProductEntryType,  {\r\n                shouldValidate: true,\r\n                shouldDirty: true\r\n            })\r\n           /*  setValue(\"profession\", ProductEntry.profession,  {\r\n                shouldValidate: true,\r\n                shouldDirty: true\r\n            })\r\n            setValue(\"phone\", ProductEntry.phone,  {\r\n                shouldValidate: true,\r\n                shouldDirty: true\r\n            })\r\n            setValue(\"email\", ProductEntry.email,  {\r\n                shouldValidate: true,\r\n                shouldDirty: true\r\n            })\r\n            setValue(\"department\", ProductEntry.department,  {\r\n                shouldValidate: true,\r\n                shouldDirty: true\r\n            })\r\n            setValue(\"deptunit\", ProductEntry.deptunit,  {\r\n                shouldValidate: true,\r\n                shouldDirty: true\r\n            }) */\r\n          /*   setValue(\"ProductEntryCategory\", ProductEntry.ProductEntryCategory,  {\r\n                shouldValidate: true,\r\n                shouldDirty: true\r\n            }) */\r\n            \r\n            return () => {\r\n                \r\n            }\r\n        })\r\n\r\n   const handleCancel=async()=>{\r\n    const    newProductEntryModule={\r\n        selectedProductEntry:{},\r\n        show :'create'\r\n      }\r\n   await setState((prevstate)=>({...prevstate, ProductEntryModule:newProductEntryModule}))\r\n   //console.log(state)\r\n           }\r\n\r\n\r\n        const changeState =()=>{\r\n        const    newProductEntryModule={\r\n            selectedProductEntry:{},\r\n            show :'create'\r\n        }\r\n        setState((prevstate)=>({...prevstate, ProductEntryModule:newProductEntryModule}))\r\n\r\n        }\r\n    const handleDelete=async()=>{\r\n        let conf=window.confirm(\"Are you sure you want to delete this data?\")\r\n        \r\n        const dleteId=ProductEntry._id\r\n        if (conf){\r\n             \r\n        ProductEntryServ.remove(dleteId)\r\n        .then((res)=>{\r\n                //console.log(JSON.stringify(res))\r\n                reset();\r\n               /*  setMessage(\"Deleted ProductEntry successfully\")\r\n                setSuccess(true)\r\n                changeState()\r\n               setTimeout(() => {\r\n                setSuccess(false)\r\n                }, 200); */\r\n                toast({\r\n                    message: 'ProductEntry deleted succesfully',\r\n                    type: 'is-success',\r\n                    dismissible: true,\r\n                    pauseOnHover: true,\r\n                  })\r\n                changeState()\r\n            })\r\n            .catch((err)=>{\r\n               // setMessage(\"Error deleting ProductEntry, probable network issues \"+ err )\r\n               // setError(true)\r\n                toast({\r\n                    message: \"Error deleting ProductEntry, probable network issues or \"+ err,\r\n                    type: 'is-danger',\r\n                    dismissible: true,\r\n                    pauseOnHover: true,\r\n                  })\r\n            })\r\n        }\r\n    }\r\n        \r\n\r\n   /* ()=> setValue(\"firstName\", \"Bill\", , {\r\n            shouldValidate: true,\r\n            shouldDirty: true\r\n          })) */\r\n    const onSubmit = (data,e) =>{\r\n        e.preventDefault();\r\n        \r\n        setSuccess(false)\r\n        console.log(data)\r\n        data.facility=ProductEntry.facility\r\n          //console.log(data);\r\n          \r\n        ProductEntryServ.patch(ProductEntry._id,data)\r\n        .then((res)=>{\r\n                //console.log(JSON.stringify(res))\r\n               // e.target.reset();\r\n               // setMessage(\"updated ProductEntry successfully\")\r\n                 toast({\r\n                    message: 'ProductEntry updated succesfully',\r\n                    type: 'is-success',\r\n                    dismissible: true,\r\n                    pauseOnHover: true,\r\n                  })\r\n                  \r\n                changeState()\r\n\r\n            })\r\n            .catch((err)=>{\r\n                //setMessage(\"Error creating ProductEntry, probable network issues \"+ err )\r\n               // setError(true)\r\n                toast({\r\n                    message: \"Error updating ProductEntry, probable network issues or \"+ err,\r\n                    type: 'is-danger',\r\n                    dismissible: true,\r\n                    pauseOnHover: true,\r\n                  })\r\n            })\r\n\r\n      } \r\n     \r\n      \r\n    return (\r\n        \r\n        <>\r\n        <div className=\"card \">\r\n            <div className=\"card-header\">\r\n                <p className=\"card-header-title\">\r\n                    ProductEntry Details-Modify\r\n                </p>\r\n            </div>\r\n            <div className=\"card-content vscrollable\">\r\n           \r\n            <form onSubmit={handleSubmit(onSubmit)}>\r\n                <div className=\"field\">\r\n                    <label className=\"label is-small\"> Name\r\n                    <p className=\"control has-icons-left has-icons-right\">\r\n                        <input className=\"input  is-small\" ref={register({ required: true })}  name=\"name\" type=\"text\" placeholder=\"Name\" />\r\n                        <span className=\"icon is-small is-left\">\r\n                            <i className=\"fas fa-hospital\"></i>\r\n                        </span>                    \r\n                    </p>\r\n                    </label>\r\n                    </div>\r\n                <div className=\"field\">\r\n                <label className=\"label is-small\">ProductEntry Type\r\n                    <p className=\"control has-icons-left has-icons-right\">\r\n                    <input className=\"input is-small \" ref={register({ required: true })} disabled name=\"ProductEntryType\" type=\"text\" placeholder=\"ProductEntry Type\" />\r\n                    <span className=\"icon is-small is-left\">\r\n                        <i className=\"fas fa-map-signs\"></i>\r\n                    </span>\r\n                    \r\n                </p>\r\n                </label>\r\n                </div>\r\n            {/* <div className=\"field\">\r\n            <label className=\"label is-small\">Profession\r\n                <p className=\"control has-icons-left\">\r\n                    <input className=\"input is-small\" ref={register({ required: true })} name=\"profession\" type=\"text\" placeholder=\"Profession\"/>\r\n                    <span className=\"icon is-small is-left\">\r\n                    <i className=\"fas fa-map-marker-alt\"></i>\r\n                    </span>\r\n                </p>\r\n                </label>\r\n                </div>\r\n            <div className=\"field\">\r\n            <label className=\"label is-small\">Phone\r\n                <p className=\"control has-icons-left\">\r\n                    <input className=\"input is-small\" ref={register({ required: true })} name=\"phone\" type=\"text\" placeholder=\"Phone No\"/>\r\n                    <span className=\"icon is-small is-left\">\r\n                    <i className=\"fas fa-phone-alt\"></i>\r\n                    </span>\r\n                </p>\r\n                </label>\r\n                 </div>\r\n            <div className=\"field\">\r\n            <label className=\"label is-small\">Email\r\n                <p className=\"control has-icons-left\">\r\n                    <input className=\"input is-small\" ref={register({ required: true })} name=\"email\" type=\"email\" placeholder=\"ProductEntry Email\"/>\r\n                    <span className=\"icon is-small is-left\">\r\n                    <i className=\"fas fa-envelope\"></i>\r\n                    </span>\r\n                </p>\r\n                </label>\r\n                </div>\r\n            <div className=\"field\">\r\n            <label className=\"label is-small\">Department\r\n                <p className=\"control has-icons-left\">\r\n                    <input className=\"input is-small\" ref={register({ required: true })} name=\"department\" type=\"text\" placeholder=\"Department\"/>\r\n                    <span className=\"icon is-small is-left\">\r\n                    <i className=\"fas fa-user-md\"></i>\r\n                    </span>\r\n                </p>\r\n                </label>\r\n                {errors.department && <span>This field is required</span>}\r\n                </div>\r\n            <div className=\"field\">\r\n            <label className=\"label is-small\">Departmental Unit\r\n                <p className=\"control has-icons-left\">\r\n                    <input className=\"input is-small\" ref={register({ required: true })} name=\"deptunit\" type=\"text\" placeholder=\"Departmental Unit\"/>\r\n                    <span className=\"icon is-small is-left\">\r\n                    <i className=\"fas fa-hospital-symbol\"></i>\r\n                    </span>\r\n                </p>\r\n                </label>\r\n                </div> */}\r\n           {/*  <div className=\"field\">\r\n            <label className=\"label is-small\">Category\r\n                <p className=\"control has-icons-left\">\r\n                    <input className=\"input is-small\" ref={register({ required: true })} name=\"ProductEntryCategory\" type=\"text\" placeholder=\"ProductEntry Category\"/>\r\n                    <span className=\"icon is-small is-left\">\r\n                    <i className=\"fas fa-clinic-medical\"></i>\r\n                    </span>\r\n                </p>\r\n                </label>\r\n            </div> */}\r\n           \r\n           \r\n            </form>\r\n            \r\n            <div className=\"field  is-grouped mt-2\" >\r\n                <p className=\"control\">\r\n                    <button type=\"submit\" className=\"button is-success is-small\" onClick={handleSubmit(onSubmit)}>\r\n                        Save\r\n                    </button>\r\n                </p>\r\n                <p className=\"control\">\r\n                    <button className=\"button is-warning is-small\" onClick={handleCancel}>\r\n                        Cancel\r\n                    </button>\r\n                </p>\r\n                <p className=\"control\">\r\n                    <button className=\"button is-danger is-small\" onClick={()=>handleDelete()} type=\"delete\">\r\n                       Delete\r\n                    </button>\r\n                </p>\r\n            </div>\r\n        </div>\r\n        </div>\r\n        </>\r\n    )\r\n   \r\n   \r\n                \r\n}   \r\n\r\nexport  function MedicationHelperSearch({getSearchfacility,clear}) {\r\n    \r\n    const productServ=client.service('medicationhelper')\r\n    const [facilities,setFacilities]=useState([])\r\n     // eslint-disable-next-line\r\n     const [searchError, setSearchError] =useState(false)\r\n     // eslint-disable-next-line\r\n    const [showPanel, setShowPanel] =useState(false)\r\n     // eslint-disable-next-line\r\n   const [searchMessage, setSearchMessage] = useState(\"\") \r\n   // eslint-disable-next-line \r\n   const [simpa,setSimpa]=useState(\"\")\r\n   // eslint-disable-next-line \r\n   const [chosen,setChosen]=useState(false)\r\n   // eslint-disable-next-line \r\n   const [count,setCount]=useState(0)\r\n   const inputEl=useRef(null)\r\n   const [val,setVal]=useState(\"\")\r\n    const [productModal,setProductModal]=useState(false)\r\n   let value\r\n\r\n   const handleRow= async(obj)=>{\r\n        await setChosen(true)\r\n        //alert(\"something is chaning\")\r\n       getSearchfacility(obj)\r\n  \r\n       \r\n       await  setSimpa(obj.medication)\r\n      \r\n        // setSelectedFacility(obj)\r\n        setShowPanel(false)\r\n        await setCount(2)\r\n        /* const    newfacilityModule={\r\n            selectedFacility:facility,\r\n            show :'detail'\r\n        }\r\n   await setState((prevstate)=>({...prevstate, facilityModule:newfacilityModule})) */\r\n   //console.log(state)\r\n}\r\n    const handleBlur=async(e)=>{\r\n         if (count===2){\r\n             console.log(\"stuff was chosen\")\r\n         }\r\n       \r\n       /*  console.log(\"blur\")\r\n         setShowPanel(false)\r\n        console.log(JSON.stringify(simpa))\r\n        if (simpa===\"\"){\r\n            console.log(facilities.length)\r\n            setSimpa(\"abc\")\r\n            setSimpa(\"\")\r\n            setFacilities([])\r\n            inputEl.current.setValue=\"\"\r\n        }\r\n        console.log(facilities.length)\r\n        console.log(inputEl.current) */\r\n    }\r\n    const handleSearch=async(value)=>{\r\n        setVal(value)\r\n        if (value===\"\"){\r\n            setShowPanel(false)\r\n            getSearchfacility(false)\r\n            return\r\n        }\r\n        const field='medication' //field variable\r\n\r\n       \r\n        if (value.length>=3 ){\r\n            productServ.find({query: {     //service\r\n                 [field]: {\r\n                     $regex:value,\r\n                     $options:'i'\r\n                    \r\n                 },\r\n                 $limit:10,\r\n                 $sort: {\r\n                     createdAt: -1\r\n                   }\r\n                     }}).then((res)=>{\r\n              console.log(\"product  fetched successfully\") \r\n              console.log(res) \r\n                    if(res.total>0){\r\n                        setFacilities(res.data)\r\n                        setSearchMessage(\" product  fetched successfully\")\r\n                        setShowPanel(true)\r\n                    }else{\r\n                        setShowPanel(false)\r\n                        getSearchfacility({\r\n                            medication:value,\r\n                            instruction:\"\"\r\n                        })\r\n                    }\r\n               \r\n             })\r\n             .catch((err)=>{\r\n                toast({\r\n                    message: 'Error fetching medication ' + err,\r\n                    type: 'is-danger',\r\n                    dismissible: true,\r\n                    pauseOnHover: true,\r\n                  })\r\n             })\r\n         }\r\n        else{\r\n            console.log(\"less than 3 \")\r\n            console.log(val)\r\n            setShowPanel(false)\r\n            await setFacilities([])\r\n            console.log(facilities)\r\n        }\r\n    }\r\n\r\n    const handleAddproduct =()=>{\r\n        setProductModal(true) \r\n    }\r\n    const handlecloseModal =()=>{\r\n       // setDestinationModal(false)\r\n        //handleSearch(val)\r\n    }\r\n    useEffect(() => {\r\n        setSimpa(value)\r\n        return () => {\r\n            \r\n        }\r\n    }, [simpa])\r\n    useEffect(() => {\r\n       if (clear){\r\n           console.log(\"success has changed\",clear)\r\n           setSimpa(\"\")\r\n       }\r\n        return () => {\r\n            \r\n        }\r\n    }, [clear] )\r\n    return (\r\n        <div>\r\n            <div className=\"field\">\r\n                <div className=\"control has-icons-left  \">\r\n                    <div className={`dropdown ${showPanel?\"is-active\":\"\"}`} style={{width:\"100%\"}}>\r\n                        <div className=\"dropdown-trigger\" style={{width:\"100%\"}}>\r\n                            <DebounceInput className=\"input is-small \" \r\n                                type=\"text\" placeholder=\"Search Product\"\r\n                                value={simpa}\r\n                                minLength={3}\r\n                                debounceTimeout={400}\r\n                               /*  onBlur={(e)=>handleBlur(e)} */\r\n                                onChange={(e)=>handleSearch(e.target.value)}\r\n                                inputRef={inputEl}\r\n                                  />\r\n                            <span className=\"icon is-small is-left\">\r\n                                <i className=\"fas fa-search\"></i>\r\n                            </span>\r\n                        </div>\r\n                        {/* {searchError&&<div>{searchMessage}</div>} */}\r\n                        <div className=\"dropdown-menu\" style={{width:\"100%\"}} >\r\n                            <div className=\"dropdown-content\">\r\n                         {/*  { facilities.length>0?\"\":<div className=\"dropdown-item\" onClick={handleAddproduct}> <span>Add {val} to product list</span> </div>} */}\r\n\r\n                              {facilities.map((facility, i)=>(\r\n                                    \r\n                                    <div className=\"dropdown-item\" key={facility._id} onClick={()=>handleRow(facility)}>\r\n                                        \r\n                                        <span>{facility.medication}</span> // <span>{facility.instruction}</span>\r\n                                    </div>\r\n                                    \r\n                                    ))}\r\n                                    \r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n           \r\n        </div>\r\n    )\r\n}","C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\inventory\\DispenseExit.js",["505","506","507","508","509","510","511","512","513","514","515","516","517","518","519"],"C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\FacilityModule.js",["520"],"C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\facility\\Facility.js",["521"],"C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\facility\\Location.js",["522","523","524","525"],"C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\Finance\\FinanceSetup.js",[],"C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\Finance\\Products.js",["526","527","528","529","530","531","532"],"C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\Clinic\\ClinicHome.js",["533","534","535","536","537","538"],"C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\Clinic\\Appointments.js",["539","540","541","542","543","544","545","546","547","548","549","550","551","552","553","554","555","556","557","558","559","560","561","562","563","564","565","566","567","568","569","570","571","572"],"C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\FinanceModule.js",["573","574","575","576","577","578","579","580","581","582","583","584"],"import React,{useState,useContext,useEffect} from 'react'\r\nimport {Route, Switch,  useRouteMatch, Link, NavLink} from 'react-router-dom'\r\nimport FinanceReport from './Finance/FinanceReport'\r\nimport FinanceSetup from './Finance/FinanceSetup'\r\nimport FinanceStore from './Finance/FinanceStore'\r\nimport FinanceHome from './Finance/FinanceHome'\r\nimport ProductEntry from './Finance/ProductEntry'\r\nimport ProductExit from './Finance/ProductExit'\r\nimport Payment from './Finance/Payment'\r\nimport Products from './Finance/Products'\r\nimport Store, { StoreList, StoreListStandalone } from './Finance/Store'\r\nimport {UserContext,ObjectContext} from '../context'\r\nimport BillPrescription from './Finance/BillPrescription'\r\n\r\nexport default function FinanceModule() {\r\n    const {state,setState}=useContext(ObjectContext) //,setState\r\n    // eslint-disable-next-line\r\n    const [selectedStore,setSelectedStore]=useState()\r\n    const [showModal,setShowModal]=useState(false)\r\n\r\n    let { path, url } = useRouteMatch();\r\n    \r\n    useEffect(() => {\r\n       \r\n        console.log(\"starting up Finance module\")\r\n        if (!selectedStore){\r\n            handleChangeStore()\r\n\r\n            }\r\n         return () => {       \r\n            }\r\n        }, [])\r\n   \r\n    useEffect(()=>{\r\n     setSelectedStore(state.StoreModule.selectedStore)\r\n\r\n    },[state.StoreModule])\r\n\r\n    const handleChangeStore= async()=>{\r\n        await setShowModal(true)                                                                                                                                                        \r\n        console.log( showModal)\r\n    }\r\n\r\n    return (\r\n            <section className=\"section has-background-info remPad\">\r\n               \r\n               {/*  <div className=\"\"> */}\r\n                    <nav className=\"navbar minHt z10 has-background-info\">\r\n                        <div className=\"container minHt \">\r\n                            <div className=\"navbar-brand minHt\">\r\n                                <div className=\"navbar-item \">\r\n                                    <span className=\"is-size-6 has-text-weight-medium\">\r\n                                        Health Stack::Finance::{selectedStore?selectedStore.name:\"\"}</span>\r\n                                        <button className=\"button is-small is-info selectadd\" onClick={()=>handleChangeStore()}>Change Location</button> \r\n                                </div>\r\n                                \r\n                            {/* <div className=\"navbar-item\">\r\n                                <img src=\"https://bulma.io/images/bulma-type-white.png\" alt=\"Logo\" />\r\n                            </div> */}\r\n                                <span className=\"navbar-burger\" data-target=\"navbarMenuHeroB\">\r\n                                    <span></span>\r\n                                    <span></span>\r\n                                    <span></span>\r\n                                </span>\r\n                            </div>\r\n                            <div id=\"navbarMenuHeroB\" className=\"navbar-menu\">\r\n                                <div className=\"navbar-end\">\r\n                                    <div className=\"navbar-item\">\r\n                                        <NavLink to={`${url}/payment`}>Payment</NavLink>\r\n                                    </div>\r\n                                    <div className=\"navbar-item\">\r\n                                        <NavLink to={`${url}/location`}>Finance Locations</NavLink>\r\n                                    </div>\r\n                                    <div className=\"navbar-item\">\r\n                                        <NavLink to={`${url}`}>Home Page</NavLink> \r\n                                    </div>\r\n                                    \r\n                                    {/* <div className=\"navbar-item\">\r\n                                        <NavLink to={`${url}/inv-bill`}>Bill Prescription</NavLink>\r\n                                    </div>\r\n                                    <div className=\"navbar-item\">\r\n                                        <NavLink to={`${url}/inv-Finance`}>Store Finance</NavLink>\r\n                                    </div>\r\n                                    <div className=\"navbar-item\">\r\n                                        <NavLink to={`${url}/inv-entry`}>Product Entry</NavLink>\r\n                                    </div>\r\n                                    <div className=\"navbar-item\">\r\n                                        <NavLink to={`${url}/inv-exit`}>Product Exit</NavLink>\r\n                                    </div>\r\n                                    <div className=\"navbar-item\">\r\n                                        <NavLink to={`${url}/inv-products`}>Products</NavLink>\r\n                                    </div>\r\n                                    <div className=\"navbar-item\">\r\n                                        <NavLink to={`${url}/inv-reports`}>Reports</NavLink>\r\n                                    </div> */}\r\n                                {/* <span className=\"navbar-item\">\r\n                                <div className=\"button is-info is-inverted\">\r\n                                    <span className=\"icon\">\r\n                                    <i className=\"fab fa-github\"></i>\r\n                                    </span>\r\n                                    <span>Download</span>\r\n                                </div>\r\n                                </span> */}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </nav>\r\n                    \r\n               {/*  </div> */}\r\n                \r\n                {/* <div className=\"section\"> */}\r\n                {/* <div className=\"container mvUp \" > */}\r\n                       \r\n                    <Switch>\r\n                        <Route path={path} exact>\r\n                            <FinanceHome />\r\n                        </Route>\r\n                        <Route path={`${path}/payment`} exact >\r\n                            <Payment />\r\n                        </Route>\r\n                        {/* <Route path={`${path}/inv-bill`} exact >\r\n                            <BillPrescription />\r\n                        </Route>\r\n                        <Route path={`${path}/inv-admin`} exact >\r\n                            <FinanceSetup />\r\n                        </Route>\r\n                        <Route path={`${path}/inv-Finance`} exact>\r\n                            <FinanceStore />\r\n                        </Route>\r\n                        <Route path={`${path}/inv-entry`} exact>\r\n                            <ProductEntry />\r\n                        </Route>\r\n                        <Route path={`${path}/inv-exit`} exact>\r\n                            <ProductExit/>\r\n                        </Route>\r\n                        <Route path={`${path}/inv-products`} exact>\r\n                            <Products />\r\n                        </Route>\r\n                        <Route path={`${path}/inv-reports`} exact>\r\n                            <FinanceReport />\r\n                        </Route> */}\r\n                        <Route path={`${path}/location`} exact>\r\n                            <Store />\r\n                        </Route>\r\n\r\n                    </Switch>\r\n                  \r\n\r\n                    <div className={`modal ${showModal?\"is-active\":\"\"}` }>\r\n                                    <div className=\"modal-background\"></div>\r\n                                    <div className=\"modal-card\">\r\n                                        <header className=\"modal-card-head\">\r\n                                        <p className=\"modal-card-title\">Choose Location</p>\r\n                                        <button className=\"delete\" aria-label=\"close\"  onClick={()=>setShowModal(false)}></button>\r\n                                        </header>\r\n                                        <section className=\"modal-card-body\">\r\n                                        <StoreListStandalone standalone=\"true\" closeModal={()=>setShowModal(false)} />\r\n                                        </section>\r\n                                        {/* <footer className=\"modal-card-foot\">\r\n                                        <button className=\"button is-success\">Save changes</button>\r\n                                        <button className=\"button\">Cancel</button>\r\n                                        </footer> */}\r\n                                    </div>\r\n                                </div>        \r\n            </section>\r\n    )\r\n}\r\n","C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\Finance\\Store.js",["585","586","587","588","589","590"],"C:\\Users\\simpa\\Documents\\healthstack\\frontend\\frontend\\src\\components\\inventory\\Store.js",["591","592","593","594","595","596"],{"ruleId":"597","severity":1,"message":"598","line":1,"column":47,"nodeType":"599","messageId":"600","endLine":1,"endColumn":53},{"ruleId":"597","severity":1,"message":"601","line":4,"column":10,"nodeType":"599","messageId":"600","endLine":4,"endColumn":17},{"ruleId":"597","severity":1,"message":"602","line":7,"column":9,"nodeType":"599","messageId":"600","endLine":7,"endColumn":14},{"ruleId":"597","severity":1,"message":"603","line":8,"column":17,"nodeType":"599","messageId":"600","endLine":8,"endColumn":42},{"ruleId":"597","severity":1,"message":"604","line":10,"column":8,"nodeType":"599","messageId":"600","endLine":10,"endColumn":22},{"ruleId":"597","severity":1,"message":"605","line":18,"column":5,"nodeType":"599","messageId":"600","endLine":18,"endColumn":23},{"ruleId":"597","severity":1,"message":"606","line":34,"column":12,"nodeType":"599","messageId":"600","endLine":34,"endColumn":17},{"ruleId":"597","severity":1,"message":"607","line":34,"column":19,"nodeType":"599","messageId":"600","endLine":34,"endColumn":27},{"ruleId":"597","severity":1,"message":"608","line":39,"column":10,"nodeType":"599","messageId":"600","endLine":39,"endColumn":18},{"ruleId":"597","severity":1,"message":"609","line":42,"column":11,"nodeType":"599","messageId":"600","endLine":42,"endColumn":21},{"ruleId":"597","severity":1,"message":"610","line":42,"column":22,"nodeType":"599","messageId":"600","endLine":42,"endColumn":35},{"ruleId":"597","severity":1,"message":"611","line":96,"column":12,"nodeType":"599","messageId":"600","endLine":96,"endColumn":20},{"ruleId":"597","severity":1,"message":"612","line":96,"column":22,"nodeType":"599","messageId":"600","endLine":96,"endColumn":33},{"ruleId":"597","severity":1,"message":"613","line":137,"column":11,"nodeType":"599","messageId":"600","endLine":137,"endColumn":30},{"ruleId":"597","severity":1,"message":"614","line":158,"column":11,"nodeType":"599","messageId":"600","endLine":158,"endColumn":26},{"ruleId":"597","severity":1,"message":"615","line":171,"column":14,"nodeType":"599","messageId":"600","endLine":171,"endColumn":19},{"ruleId":"597","severity":1,"message":"616","line":223,"column":11,"nodeType":"599","messageId":"600","endLine":223,"endColumn":20},{"ruleId":"617","severity":1,"message":"618","line":238,"column":15,"nodeType":"619","endLine":238,"endColumn":17,"suggestions":"620"},{"ruleId":"617","severity":1,"message":"621","line":258,"column":8,"nodeType":"619","endLine":258,"endColumn":34,"suggestions":"622"},{"ruleId":"597","severity":1,"message":"623","line":359,"column":12,"nodeType":"599","messageId":"600","endLine":359,"endColumn":24},{"ruleId":"597","severity":1,"message":"624","line":370,"column":6,"nodeType":"599","messageId":"600","endLine":370,"endColumn":18},{"ruleId":"597","severity":1,"message":"625","line":390,"column":11,"nodeType":"599","messageId":"600","endLine":390,"endColumn":21},{"ruleId":"617","severity":1,"message":"626","line":412,"column":8,"nodeType":"619","endLine":412,"endColumn":10,"suggestions":"627"},{"ruleId":"617","severity":1,"message":"628","line":437,"column":7,"nodeType":"619","endLine":437,"endColumn":9,"suggestions":"629"},{"ruleId":"597","severity":1,"message":"601","line":4,"column":10,"nodeType":"599","messageId":"600","endLine":4,"endColumn":17},{"ruleId":"597","severity":1,"message":"630","line":8,"column":9,"nodeType":"599","messageId":"600","endLine":8,"endColumn":22},{"ruleId":"597","severity":1,"message":"631","line":17,"column":13,"nodeType":"599","messageId":"600","endLine":17,"endColumn":20},{"ruleId":"597","severity":1,"message":"632","line":18,"column":13,"nodeType":"599","messageId":"600","endLine":18,"endColumn":20},{"ruleId":"597","severity":1,"message":"633","line":37,"column":13,"nodeType":"599","messageId":"600","endLine":37,"endColumn":24},{"ruleId":"597","severity":1,"message":"634","line":48,"column":14,"nodeType":"599","messageId":"600","endLine":48,"endColumn":28},{"ruleId":"597","severity":1,"message":"635","line":48,"column":30,"nodeType":"599","messageId":"600","endLine":48,"endColumn":47},{"ruleId":"597","severity":1,"message":"636","line":49,"column":24,"nodeType":"599","messageId":"600","endLine":49,"endColumn":35},{"ruleId":"597","severity":1,"message":"637","line":55,"column":14,"nodeType":"599","messageId":"600","endLine":55,"endColumn":21},{"ruleId":"597","severity":1,"message":"638","line":58,"column":12,"nodeType":"599","messageId":"600","endLine":58,"endColumn":19},{"ruleId":"597","severity":1,"message":"639","line":60,"column":10,"nodeType":"599","messageId":"600","endLine":60,"endColumn":20},{"ruleId":"597","severity":1,"message":"640","line":67,"column":9,"nodeType":"599","messageId":"600","endLine":67,"endColumn":26},{"ruleId":"597","severity":1,"message":"641","line":135,"column":9,"nodeType":"599","messageId":"600","endLine":135,"endColumn":26},{"ruleId":"597","severity":1,"message":"642","line":210,"column":12,"nodeType":"599","messageId":"600","endLine":210,"endColumn":28},{"ruleId":"597","severity":1,"message":"643","line":220,"column":12,"nodeType":"599","messageId":"600","endLine":220,"endColumn":27},{"ruleId":"597","severity":1,"message":"644","line":314,"column":12,"nodeType":"599","messageId":"600","endLine":314,"endColumn":22},{"ruleId":"617","severity":1,"message":"645","line":344,"column":8,"nodeType":"619","endLine":344,"endColumn":14,"suggestions":"646"},{"ruleId":"597","severity":1,"message":"647","line":346,"column":12,"nodeType":"599","messageId":"600","endLine":346,"endColumn":21},{"ruleId":"597","severity":1,"message":"648","line":360,"column":12,"nodeType":"599","messageId":"600","endLine":360,"endColumn":32},{"ruleId":"597","severity":1,"message":"649","line":377,"column":12,"nodeType":"599","messageId":"600","endLine":377,"endColumn":20},{"ruleId":"597","severity":1,"message":"650","line":420,"column":11,"nodeType":"599","messageId":"600","endLine":420,"endColumn":29},{"ruleId":"597","severity":1,"message":"651","line":425,"column":11,"nodeType":"599","messageId":"600","endLine":425,"endColumn":20},{"ruleId":"617","severity":1,"message":"652","line":529,"column":8,"nodeType":"619","endLine":529,"endColumn":29,"suggestions":"653"},{"ruleId":"617","severity":1,"message":"654","line":551,"column":8,"nodeType":"619","endLine":551,"endColumn":21,"suggestions":"655"},{"ruleId":"617","severity":1,"message":"656","line":605,"column":9,"nodeType":"619","endLine":605,"endColumn":11,"suggestions":"657"},{"ruleId":"597","severity":1,"message":"658","line":1094,"column":12,"nodeType":"599","messageId":"600","endLine":1094,"endColumn":24},{"ruleId":"597","severity":1,"message":"659","line":1179,"column":11,"nodeType":"599","messageId":"600","endLine":1179,"endColumn":27},{"ruleId":"597","severity":1,"message":"660","line":1182,"column":11,"nodeType":"599","messageId":"600","endLine":1182,"endColumn":27},{"ruleId":"661","replacedBy":"662"},{"ruleId":"663","replacedBy":"664"},{"ruleId":"597","severity":1,"message":"665","line":8,"column":7,"nodeType":"599","messageId":"600","endLine":8,"endColumn":10},{"ruleId":"597","severity":1,"message":"666","line":2,"column":40,"nodeType":"599","messageId":"600","endLine":2,"endColumn":44},{"ruleId":"597","severity":1,"message":"667","line":14,"column":12,"nodeType":"599","messageId":"600","endLine":14,"endColumn":16},{"ruleId":"597","severity":1,"message":"668","line":14,"column":17,"nodeType":"599","messageId":"600","endLine":14,"endColumn":24},{"ruleId":"597","severity":1,"message":"669","line":88,"column":16,"nodeType":"599","messageId":"600","endLine":88,"endColumn":20},{"ruleId":"617","severity":1,"message":"670","line":113,"column":7,"nodeType":"619","endLine":113,"endColumn":9,"suggestions":"671"},{"ruleId":"597","severity":1,"message":"672","line":8,"column":37,"nodeType":"599","messageId":"600","endLine":8,"endColumn":42},{"ruleId":"597","severity":1,"message":"673","line":8,"column":44,"nodeType":"599","messageId":"600","endLine":8,"endColumn":50},{"ruleId":"597","severity":1,"message":"674","line":11,"column":11,"nodeType":"599","messageId":"600","endLine":11,"endColumn":19},{"ruleId":"597","severity":1,"message":"672","line":7,"column":37,"nodeType":"599","messageId":"600","endLine":7,"endColumn":42},{"ruleId":"597","severity":1,"message":"673","line":7,"column":44,"nodeType":"599","messageId":"600","endLine":7,"endColumn":50},{"ruleId":"597","severity":1,"message":"666","line":2,"column":40,"nodeType":"599","messageId":"600","endLine":2,"endColumn":44},{"ruleId":"597","severity":1,"message":"675","line":11,"column":17,"nodeType":"599","messageId":"600","endLine":11,"endColumn":26},{"ruleId":"597","severity":1,"message":"676","line":12,"column":9,"nodeType":"599","messageId":"600","endLine":12,"endColumn":20},{"ruleId":"597","severity":1,"message":"677","line":16,"column":18,"nodeType":"599","messageId":"600","endLine":16,"endColumn":26},{"ruleId":"617","severity":1,"message":"678","line":32,"column":12,"nodeType":"619","endLine":32,"endColumn":14,"suggestions":"679"},{"ruleId":"597","severity":1,"message":"666","line":2,"column":40,"nodeType":"599","messageId":"600","endLine":2,"endColumn":44},{"ruleId":"597","severity":1,"message":"676","line":11,"column":9,"nodeType":"599","messageId":"600","endLine":11,"endColumn":20},{"ruleId":"597","severity":1,"message":"677","line":14,"column":18,"nodeType":"599","messageId":"600","endLine":14,"endColumn":26},{"ruleId":"617","severity":1,"message":"680","line":30,"column":12,"nodeType":"619","endLine":30,"endColumn":14,"suggestions":"681"},{"ruleId":"661","replacedBy":"682"},{"ruleId":"663","replacedBy":"683"},{"ruleId":"617","severity":1,"message":"684","line":81,"column":7,"nodeType":"619","endLine":81,"endColumn":13,"suggestions":"685"},{"ruleId":"617","severity":1,"message":"686","line":389,"column":15,"nodeType":"619","endLine":389,"endColumn":17,"suggestions":"687"},{"ruleId":"597","severity":1,"message":"606","line":43,"column":12,"nodeType":"599","messageId":"600","endLine":43,"endColumn":17},{"ruleId":"597","severity":1,"message":"632","line":45,"column":12,"nodeType":"599","messageId":"600","endLine":45,"endColumn":19},{"ruleId":"617","severity":1,"message":"688","line":416,"column":15,"nodeType":"619","endLine":416,"endColumn":17,"suggestions":"689"},{"ruleId":"617","severity":1,"message":"690","line":423,"column":12,"nodeType":"619","endLine":423,"endColumn":45,"suggestions":"691"},{"ruleId":"617","severity":1,"message":"690","line":544,"column":11,"nodeType":"619","endLine":544,"endColumn":22,"suggestions":"692"},{"ruleId":"597","severity":1,"message":"673","line":666,"column":53,"nodeType":"599","messageId":"600","endLine":666,"endColumn":59},{"ruleId":"617","severity":1,"message":"693","line":706,"column":11,"nodeType":"619","endLine":706,"endColumn":13,"suggestions":"694"},{"ruleId":"597","severity":1,"message":"695","line":729,"column":11,"nodeType":"599","messageId":"600","endLine":729,"endColumn":23},{"ruleId":"597","severity":1,"message":"606","line":43,"column":12,"nodeType":"599","messageId":"600","endLine":43,"endColumn":17},{"ruleId":"597","severity":1,"message":"632","line":45,"column":12,"nodeType":"599","messageId":"600","endLine":45,"endColumn":19},{"ruleId":"617","severity":1,"message":"688","line":416,"column":15,"nodeType":"619","endLine":416,"endColumn":17,"suggestions":"696"},{"ruleId":"617","severity":1,"message":"690","line":423,"column":12,"nodeType":"619","endLine":423,"endColumn":45,"suggestions":"697"},{"ruleId":"617","severity":1,"message":"690","line":544,"column":11,"nodeType":"619","endLine":544,"endColumn":22,"suggestions":"698"},{"ruleId":"597","severity":1,"message":"673","line":666,"column":53,"nodeType":"599","messageId":"600","endLine":666,"endColumn":59},{"ruleId":"617","severity":1,"message":"693","line":706,"column":11,"nodeType":"619","endLine":706,"endColumn":13,"suggestions":"699"},{"ruleId":"597","severity":1,"message":"695","line":729,"column":11,"nodeType":"599","messageId":"600","endLine":729,"endColumn":23},{"ruleId":"597","severity":1,"message":"606","line":44,"column":12,"nodeType":"599","messageId":"600","endLine":44,"endColumn":17},{"ruleId":"597","severity":1,"message":"632","line":46,"column":12,"nodeType":"599","messageId":"600","endLine":46,"endColumn":19},{"ruleId":"700","severity":1,"message":"701","line":537,"column":21,"nodeType":"702","messageId":"703","endLine":537,"endColumn":36},{"ruleId":"617","severity":1,"message":"704","line":555,"column":15,"nodeType":"619","endLine":555,"endColumn":17,"suggestions":"705"},{"ruleId":"617","severity":1,"message":"690","line":563,"column":16,"nodeType":"619","endLine":563,"endColumn":49,"suggestions":"706"},{"ruleId":"597","severity":1,"message":"625","line":654,"column":11,"nodeType":"599","messageId":"600","endLine":654,"endColumn":21},{"ruleId":"597","severity":1,"message":"673","line":862,"column":53,"nodeType":"599","messageId":"600","endLine":862,"endColumn":59},{"ruleId":"597","severity":1,"message":"606","line":45,"column":12,"nodeType":"599","messageId":"600","endLine":45,"endColumn":17},{"ruleId":"597","severity":1,"message":"632","line":47,"column":12,"nodeType":"599","messageId":"600","endLine":47,"endColumn":19},{"ruleId":"597","severity":1,"message":"633","line":63,"column":12,"nodeType":"599","messageId":"600","endLine":63,"endColumn":23},{"ruleId":"597","severity":1,"message":"638","line":74,"column":11,"nodeType":"599","messageId":"600","endLine":74,"endColumn":18},{"ruleId":"597","severity":1,"message":"639","line":76,"column":9,"nodeType":"599","messageId":"600","endLine":76,"endColumn":19},{"ruleId":"617","severity":1,"message":"645","line":231,"column":7,"nodeType":"619","endLine":231,"endColumn":13,"suggestions":"707"},{"ruleId":"617","severity":1,"message":"708","line":338,"column":21,"nodeType":"709","endLine":338,"endColumn":42},{"ruleId":"700","severity":1,"message":"701","line":682,"column":21,"nodeType":"702","messageId":"703","endLine":682,"endColumn":36},{"ruleId":"617","severity":1,"message":"704","line":700,"column":15,"nodeType":"619","endLine":700,"endColumn":17,"suggestions":"710"},{"ruleId":"617","severity":1,"message":"690","line":708,"column":16,"nodeType":"619","endLine":708,"endColumn":49,"suggestions":"711"},{"ruleId":"597","severity":1,"message":"625","line":799,"column":11,"nodeType":"599","messageId":"600","endLine":799,"endColumn":21},{"ruleId":"597","severity":1,"message":"673","line":1007,"column":53,"nodeType":"599","messageId":"600","endLine":1007,"endColumn":59},{"ruleId":"597","severity":1,"message":"659","line":1388,"column":11,"nodeType":"599","messageId":"600","endLine":1388,"endColumn":27},{"ruleId":"597","severity":1,"message":"606","line":43,"column":12,"nodeType":"599","messageId":"600","endLine":43,"endColumn":17},{"ruleId":"597","severity":1,"message":"632","line":45,"column":12,"nodeType":"599","messageId":"600","endLine":45,"endColumn":19},{"ruleId":"617","severity":1,"message":"688","line":416,"column":15,"nodeType":"619","endLine":416,"endColumn":17,"suggestions":"712"},{"ruleId":"617","severity":1,"message":"690","line":423,"column":12,"nodeType":"619","endLine":423,"endColumn":45,"suggestions":"713"},{"ruleId":"617","severity":1,"message":"690","line":546,"column":11,"nodeType":"619","endLine":546,"endColumn":22,"suggestions":"714"},{"ruleId":"597","severity":1,"message":"673","line":668,"column":53,"nodeType":"599","messageId":"600","endLine":668,"endColumn":59},{"ruleId":"617","severity":1,"message":"693","line":708,"column":11,"nodeType":"619","endLine":708,"endColumn":13,"suggestions":"715"},{"ruleId":"597","severity":1,"message":"695","line":731,"column":11,"nodeType":"599","messageId":"600","endLine":731,"endColumn":23},{"ruleId":"597","severity":1,"message":"606","line":43,"column":12,"nodeType":"599","messageId":"600","endLine":43,"endColumn":17},{"ruleId":"597","severity":1,"message":"632","line":45,"column":12,"nodeType":"599","messageId":"600","endLine":45,"endColumn":19},{"ruleId":"617","severity":1,"message":"716","line":392,"column":15,"nodeType":"619","endLine":392,"endColumn":17,"suggestions":"717"},{"ruleId":"597","severity":1,"message":"673","line":623,"column":53,"nodeType":"599","messageId":"600","endLine":623,"endColumn":59},{"ruleId":"597","severity":1,"message":"695","line":696,"column":11,"nodeType":"599","messageId":"600","endLine":696,"endColumn":23},{"ruleId":"597","severity":1,"message":"598","line":1,"column":47,"nodeType":"599","messageId":"600","endLine":1,"endColumn":53},{"ruleId":"597","severity":1,"message":"718","line":3,"column":9,"nodeType":"599","messageId":"600","endLine":3,"endColumn":22},{"ruleId":"597","severity":1,"message":"601","line":4,"column":10,"nodeType":"599","messageId":"600","endLine":4,"endColumn":17},{"ruleId":"597","severity":1,"message":"602","line":7,"column":9,"nodeType":"599","messageId":"600","endLine":7,"endColumn":14},{"ruleId":"597","severity":1,"message":"603","line":8,"column":17,"nodeType":"599","messageId":"600","endLine":8,"endColumn":42},{"ruleId":"597","severity":1,"message":"604","line":10,"column":8,"nodeType":"599","messageId":"600","endLine":10,"endColumn":22},{"ruleId":"597","severity":1,"message":"613","line":57,"column":12,"nodeType":"599","messageId":"600","endLine":57,"endColumn":31},{"ruleId":"597","severity":1,"message":"614","line":76,"column":12,"nodeType":"599","messageId":"600","endLine":76,"endColumn":27},{"ruleId":"597","severity":1,"message":"719","line":88,"column":12,"nodeType":"599","messageId":"600","endLine":88,"endColumn":24},{"ruleId":"597","severity":1,"message":"615","line":89,"column":15,"nodeType":"599","messageId":"600","endLine":89,"endColumn":20},{"ruleId":"720","severity":1,"message":"721","line":102,"column":18,"nodeType":"722","messageId":"723","endLine":102,"endColumn":30},{"ruleId":"617","severity":1,"message":"724","line":158,"column":16,"nodeType":"619","endLine":158,"endColumn":18,"suggestions":"725"},{"ruleId":"597","severity":1,"message":"616","line":160,"column":16,"nodeType":"599","messageId":"600","endLine":160,"endColumn":25},{"ruleId":"597","severity":1,"message":"601","line":4,"column":10,"nodeType":"599","messageId":"600","endLine":4,"endColumn":17},{"ruleId":"597","severity":1,"message":"606","line":15,"column":13,"nodeType":"599","messageId":"600","endLine":15,"endColumn":18},{"ruleId":"597","severity":1,"message":"632","line":17,"column":13,"nodeType":"599","messageId":"600","endLine":17,"endColumn":20},{"ruleId":"597","severity":1,"message":"633","line":33,"column":13,"nodeType":"599","messageId":"600","endLine":33,"endColumn":24},{"ruleId":"597","severity":1,"message":"638","line":44,"column":12,"nodeType":"599","messageId":"600","endLine":44,"endColumn":19},{"ruleId":"597","severity":1,"message":"639","line":46,"column":10,"nodeType":"599","messageId":"600","endLine":46,"endColumn":20},{"ruleId":"617","severity":1,"message":"645","line":201,"column":8,"nodeType":"619","endLine":201,"endColumn":14,"suggestions":"726"},{"ruleId":"617","severity":1,"message":"708","line":308,"column":22,"nodeType":"709","endLine":308,"endColumn":43},{"ruleId":"597","severity":1,"message":"659","line":609,"column":11,"nodeType":"599","messageId":"600","endLine":609,"endColumn":27},{"ruleId":"597","severity":1,"message":"601","line":4,"column":10,"nodeType":"599","messageId":"600","endLine":4,"endColumn":17},{"ruleId":"597","severity":1,"message":"602","line":8,"column":9,"nodeType":"599","messageId":"600","endLine":8,"endColumn":14},{"ruleId":"597","severity":1,"message":"727","line":11,"column":25,"nodeType":"599","messageId":"600","endLine":11,"endColumn":43},{"ruleId":"597","severity":1,"message":"728","line":34,"column":18,"nodeType":"599","messageId":"600","endLine":34,"endColumn":25},{"ruleId":"597","severity":1,"message":"729","line":36,"column":11,"nodeType":"599","messageId":"600","endLine":36,"endColumn":17},{"ruleId":"597","severity":1,"message":"614","line":51,"column":11,"nodeType":"599","messageId":"600","endLine":51,"endColumn":26},{"ruleId":"597","severity":1,"message":"730","line":124,"column":19,"nodeType":"599","messageId":"600","endLine":124,"endColumn":25},{"ruleId":"617","severity":1,"message":"731","line":203,"column":15,"nodeType":"619","endLine":203,"endColumn":17,"suggestions":"732"},{"ruleId":"597","severity":1,"message":"733","line":10,"column":12,"nodeType":"599","messageId":"600","endLine":10,"endColumn":17},{"ruleId":"617","severity":1,"message":"734","line":283,"column":7,"nodeType":"619","endLine":283,"endColumn":9,"suggestions":"735"},{"ruleId":"597","severity":1,"message":"601","line":4,"column":10,"nodeType":"599","messageId":"600","endLine":4,"endColumn":17},{"ruleId":"597","severity":1,"message":"630","line":8,"column":9,"nodeType":"599","messageId":"600","endLine":8,"endColumn":22},{"ruleId":"597","severity":1,"message":"632","line":18,"column":13,"nodeType":"599","messageId":"600","endLine":18,"endColumn":20},{"ruleId":"597","severity":1,"message":"736","line":21,"column":12,"nodeType":"599","messageId":"600","endLine":21,"endColumn":28},{"ruleId":"597","severity":1,"message":"737","line":30,"column":13,"nodeType":"599","messageId":"600","endLine":30,"endColumn":20},{"ruleId":"597","severity":1,"message":"633","line":35,"column":13,"nodeType":"599","messageId":"600","endLine":35,"endColumn":24},{"ruleId":"597","severity":1,"message":"638","line":52,"column":12,"nodeType":"599","messageId":"600","endLine":52,"endColumn":19},{"ruleId":"597","severity":1,"message":"639","line":54,"column":10,"nodeType":"599","messageId":"600","endLine":54,"endColumn":20},{"ruleId":"597","severity":1,"message":"642","line":226,"column":12,"nodeType":"599","messageId":"600","endLine":226,"endColumn":28},{"ruleId":"617","severity":1,"message":"645","line":365,"column":8,"nodeType":"619","endLine":365,"endColumn":14,"suggestions":"738"},{"ruleId":"597","severity":1,"message":"647","line":367,"column":12,"nodeType":"599","messageId":"600","endLine":367,"endColumn":21},{"ruleId":"597","severity":1,"message":"651","line":487,"column":11,"nodeType":"599","messageId":"600","endLine":487,"endColumn":20},{"ruleId":"617","severity":1,"message":"739","line":584,"column":8,"nodeType":"619","endLine":584,"endColumn":20,"suggestions":"740"},{"ruleId":"617","severity":1,"message":"708","line":599,"column":21,"nodeType":"709","endLine":599,"endColumn":42},{"ruleId":"597","severity":1,"message":"658","line":868,"column":12,"nodeType":"599","messageId":"600","endLine":868,"endColumn":24},{"ruleId":"597","severity":1,"message":"659","line":953,"column":11,"nodeType":"599","messageId":"600","endLine":953,"endColumn":27},{"ruleId":"597","severity":1,"message":"660","line":956,"column":11,"nodeType":"599","messageId":"600","endLine":956,"endColumn":27},{"ruleId":"597","severity":1,"message":"598","line":1,"column":47,"nodeType":"599","messageId":"600","endLine":1,"endColumn":53},{"ruleId":"597","severity":1,"message":"601","line":4,"column":10,"nodeType":"599","messageId":"600","endLine":4,"endColumn":17},{"ruleId":"597","severity":1,"message":"602","line":7,"column":9,"nodeType":"599","messageId":"600","endLine":7,"endColumn":14},{"ruleId":"597","severity":1,"message":"603","line":8,"column":17,"nodeType":"599","messageId":"600","endLine":8,"endColumn":42},{"ruleId":"597","severity":1,"message":"604","line":10,"column":8,"nodeType":"599","messageId":"600","endLine":10,"endColumn":22},{"ruleId":"597","severity":1,"message":"605","line":18,"column":5,"nodeType":"599","messageId":"600","endLine":18,"endColumn":23},{"ruleId":"597","severity":1,"message":"606","line":35,"column":12,"nodeType":"599","messageId":"600","endLine":35,"endColumn":17},{"ruleId":"597","severity":1,"message":"607","line":35,"column":19,"nodeType":"599","messageId":"600","endLine":35,"endColumn":27},{"ruleId":"597","severity":1,"message":"608","line":40,"column":10,"nodeType":"599","messageId":"600","endLine":40,"endColumn":18},{"ruleId":"597","severity":1,"message":"609","line":43,"column":11,"nodeType":"599","messageId":"600","endLine":43,"endColumn":21},{"ruleId":"597","severity":1,"message":"610","line":43,"column":22,"nodeType":"599","messageId":"600","endLine":43,"endColumn":35},{"ruleId":"597","severity":1,"message":"611","line":97,"column":12,"nodeType":"599","messageId":"600","endLine":97,"endColumn":20},{"ruleId":"597","severity":1,"message":"612","line":97,"column":22,"nodeType":"599","messageId":"600","endLine":97,"endColumn":33},{"ruleId":"597","severity":1,"message":"613","line":138,"column":11,"nodeType":"599","messageId":"600","endLine":138,"endColumn":30},{"ruleId":"597","severity":1,"message":"614","line":159,"column":11,"nodeType":"599","messageId":"600","endLine":159,"endColumn":26},{"ruleId":"597","severity":1,"message":"615","line":172,"column":14,"nodeType":"599","messageId":"600","endLine":172,"endColumn":19},{"ruleId":"597","severity":1,"message":"616","line":229,"column":11,"nodeType":"599","messageId":"600","endLine":229,"endColumn":20},{"ruleId":"617","severity":1,"message":"741","line":245,"column":15,"nodeType":"619","endLine":245,"endColumn":17,"suggestions":"742"},{"ruleId":"617","severity":1,"message":"621","line":282,"column":8,"nodeType":"619","endLine":282,"endColumn":34,"suggestions":"743"},{"ruleId":"597","severity":1,"message":"623","line":383,"column":12,"nodeType":"599","messageId":"600","endLine":383,"endColumn":24},{"ruleId":"597","severity":1,"message":"624","line":394,"column":6,"nodeType":"599","messageId":"600","endLine":394,"endColumn":18},{"ruleId":"597","severity":1,"message":"625","line":414,"column":11,"nodeType":"599","messageId":"600","endLine":414,"endColumn":21},{"ruleId":"617","severity":1,"message":"626","line":436,"column":8,"nodeType":"619","endLine":436,"endColumn":10,"suggestions":"744"},{"ruleId":"617","severity":1,"message":"628","line":461,"column":7,"nodeType":"619","endLine":461,"endColumn":9,"suggestions":"745"},{"ruleId":"597","severity":1,"message":"606","line":45,"column":12,"nodeType":"599","messageId":"600","endLine":45,"endColumn":17},{"ruleId":"597","severity":1,"message":"632","line":47,"column":12,"nodeType":"599","messageId":"600","endLine":47,"endColumn":19},{"ruleId":"597","severity":1,"message":"633","line":63,"column":12,"nodeType":"599","messageId":"600","endLine":63,"endColumn":23},{"ruleId":"597","severity":1,"message":"638","line":74,"column":11,"nodeType":"599","messageId":"600","endLine":74,"endColumn":18},{"ruleId":"597","severity":1,"message":"639","line":76,"column":9,"nodeType":"599","messageId":"600","endLine":76,"endColumn":19},{"ruleId":"617","severity":1,"message":"645","line":235,"column":7,"nodeType":"619","endLine":235,"endColumn":13,"suggestions":"746"},{"ruleId":"617","severity":1,"message":"708","line":347,"column":21,"nodeType":"709","endLine":347,"endColumn":42},{"ruleId":"700","severity":1,"message":"701","line":694,"column":21,"nodeType":"702","messageId":"703","endLine":694,"endColumn":36},{"ruleId":"617","severity":1,"message":"704","line":712,"column":15,"nodeType":"619","endLine":712,"endColumn":17,"suggestions":"747"},{"ruleId":"617","severity":1,"message":"690","line":720,"column":16,"nodeType":"619","endLine":720,"endColumn":49,"suggestions":"748"},{"ruleId":"597","severity":1,"message":"625","line":811,"column":11,"nodeType":"599","messageId":"600","endLine":811,"endColumn":21},{"ruleId":"597","severity":1,"message":"673","line":1019,"column":53,"nodeType":"599","messageId":"600","endLine":1019,"endColumn":59},{"ruleId":"597","severity":1,"message":"659","line":1400,"column":11,"nodeType":"599","messageId":"600","endLine":1400,"endColumn":27},{"ruleId":"597","severity":1,"message":"749","line":138,"column":18,"nodeType":"599","messageId":"600","endLine":138,"endColumn":23},{"ruleId":"617","severity":1,"message":"750","line":159,"column":4,"nodeType":"619","endLine":159,"endColumn":6,"suggestions":"751"},{"ruleId":"597","severity":1,"message":"752","line":2,"column":9,"nodeType":"599","messageId":"600","endLine":2,"endColumn":14},{"ruleId":"597","severity":1,"message":"753","line":2,"column":16,"nodeType":"599","messageId":"600","endLine":2,"endColumn":22},{"ruleId":"597","severity":1,"message":"666","line":2,"column":40,"nodeType":"599","messageId":"600","endLine":2,"endColumn":44},{"ruleId":"597","severity":1,"message":"754","line":2,"column":46,"nodeType":"599","messageId":"600","endLine":2,"endColumn":53},{"ruleId":"597","severity":1,"message":"606","line":42,"column":12,"nodeType":"599","messageId":"600","endLine":42,"endColumn":17},{"ruleId":"597","severity":1,"message":"631","line":43,"column":12,"nodeType":"599","messageId":"600","endLine":43,"endColumn":19},{"ruleId":"597","severity":1,"message":"632","line":44,"column":12,"nodeType":"599","messageId":"600","endLine":44,"endColumn":19},{"ruleId":"597","severity":1,"message":"641","line":55,"column":11,"nodeType":"599","messageId":"600","endLine":55,"endColumn":28},{"ruleId":"597","severity":1,"message":"615","line":511,"column":14,"nodeType":"599","messageId":"600","endLine":511,"endColumn":19},{"ruleId":"617","severity":1,"message":"755","line":635,"column":15,"nodeType":"619","endLine":635,"endColumn":17,"suggestions":"756"},{"ruleId":"597","severity":1,"message":"757","line":721,"column":11,"nodeType":"599","messageId":"600","endLine":721,"endColumn":15},{"ruleId":"597","severity":1,"message":"758","line":721,"column":17,"nodeType":"599","messageId":"600","endLine":721,"endColumn":20},{"ruleId":"597","severity":1,"message":"606","line":722,"column":12,"nodeType":"599","messageId":"600","endLine":722,"endColumn":17},{"ruleId":"597","severity":1,"message":"607","line":722,"column":19,"nodeType":"599","messageId":"600","endLine":722,"endColumn":27},{"ruleId":"597","severity":1,"message":"759","line":734,"column":11,"nodeType":"599","messageId":"600","endLine":734,"endColumn":17},{"ruleId":"597","severity":1,"message":"673","line":1066,"column":53,"nodeType":"599","messageId":"600","endLine":1066,"endColumn":59},{"ruleId":"597","severity":1,"message":"695","line":1204,"column":11,"nodeType":"599","messageId":"600","endLine":1204,"endColumn":23},{"ruleId":"597","severity":1,"message":"606","line":44,"column":12,"nodeType":"599","messageId":"600","endLine":44,"endColumn":17},{"ruleId":"597","severity":1,"message":"632","line":46,"column":12,"nodeType":"599","messageId":"600","endLine":46,"endColumn":19},{"ruleId":"700","severity":1,"message":"701","line":537,"column":21,"nodeType":"702","messageId":"703","endLine":537,"endColumn":36},{"ruleId":"617","severity":1,"message":"704","line":555,"column":15,"nodeType":"619","endLine":555,"endColumn":17,"suggestions":"760"},{"ruleId":"617","severity":1,"message":"690","line":563,"column":16,"nodeType":"619","endLine":563,"endColumn":49,"suggestions":"761"},{"ruleId":"597","severity":1,"message":"625","line":654,"column":11,"nodeType":"599","messageId":"600","endLine":654,"endColumn":21},{"ruleId":"597","severity":1,"message":"673","line":862,"column":53,"nodeType":"599","messageId":"600","endLine":862,"endColumn":59},{"ruleId":"597","severity":1,"message":"762","line":1,"column":16,"nodeType":"599","messageId":"600","endLine":1,"endColumn":24},{"ruleId":"597","severity":1,"message":"763","line":1,"column":25,"nodeType":"599","messageId":"600","endLine":1,"endColumn":34},{"ruleId":"597","severity":1,"message":"764","line":2,"column":8,"nodeType":"599","messageId":"600","endLine":2,"endColumn":13},{"ruleId":"597","severity":1,"message":"675","line":2,"column":17,"nodeType":"599","messageId":"600","endLine":2,"endColumn":26},{"ruleId":"597","severity":1,"message":"676","line":3,"column":9,"nodeType":"599","messageId":"600","endLine":3,"endColumn":20},{"ruleId":"597","severity":1,"message":"765","line":8,"column":11,"nodeType":"599","messageId":"600","endLine":8,"endColumn":27},{"ruleId":"597","severity":1,"message":"598","line":1,"column":47,"nodeType":"599","messageId":"600","endLine":1,"endColumn":53},{"ruleId":"597","severity":1,"message":"601","line":4,"column":10,"nodeType":"599","messageId":"600","endLine":4,"endColumn":17},{"ruleId":"597","severity":1,"message":"602","line":7,"column":9,"nodeType":"599","messageId":"600","endLine":7,"endColumn":14},{"ruleId":"597","severity":1,"message":"603","line":8,"column":17,"nodeType":"599","messageId":"600","endLine":8,"endColumn":42},{"ruleId":"597","severity":1,"message":"606","line":33,"column":12,"nodeType":"599","messageId":"600","endLine":33,"endColumn":17},{"ruleId":"597","severity":1,"message":"607","line":33,"column":19,"nodeType":"599","messageId":"600","endLine":33,"endColumn":27},{"ruleId":"597","severity":1,"message":"766","line":38,"column":10,"nodeType":"599","messageId":"600","endLine":38,"endColumn":19},{"ruleId":"597","severity":1,"message":"609","line":41,"column":11,"nodeType":"599","messageId":"600","endLine":41,"endColumn":21},{"ruleId":"597","severity":1,"message":"610","line":41,"column":22,"nodeType":"599","messageId":"600","endLine":41,"endColumn":35},{"ruleId":"597","severity":1,"message":"614","line":136,"column":11,"nodeType":"599","messageId":"600","endLine":136,"endColumn":26},{"ruleId":"597","severity":1,"message":"615","line":149,"column":14,"nodeType":"599","messageId":"600","endLine":149,"endColumn":19},{"ruleId":"617","severity":1,"message":"724","line":225,"column":15,"nodeType":"619","endLine":225,"endColumn":17,"suggestions":"767"},{"ruleId":"597","severity":1,"message":"616","line":227,"column":15,"nodeType":"599","messageId":"600","endLine":227,"endColumn":24},{"ruleId":"597","severity":1,"message":"623","line":325,"column":12,"nodeType":"599","messageId":"600","endLine":325,"endColumn":24},{"ruleId":"597","severity":1,"message":"624","line":336,"column":6,"nodeType":"599","messageId":"600","endLine":336,"endColumn":18},{"ruleId":"597","severity":1,"message":"625","line":356,"column":11,"nodeType":"599","messageId":"600","endLine":356,"endColumn":21},{"ruleId":"617","severity":1,"message":"626","line":378,"column":8,"nodeType":"619","endLine":378,"endColumn":10,"suggestions":"768"},{"ruleId":"617","severity":1,"message":"769","line":403,"column":7,"nodeType":"619","endLine":403,"endColumn":9,"suggestions":"770"},{"ruleId":"597","severity":1,"message":"606","line":43,"column":12,"nodeType":"599","messageId":"600","endLine":43,"endColumn":17},{"ruleId":"597","severity":1,"message":"632","line":45,"column":12,"nodeType":"599","messageId":"600","endLine":45,"endColumn":19},{"ruleId":"617","severity":1,"message":"771","line":317,"column":15,"nodeType":"619","endLine":317,"endColumn":17,"suggestions":"772"},{"ruleId":"597","severity":1,"message":"673","line":548,"column":53,"nodeType":"599","messageId":"600","endLine":548,"endColumn":59},{"ruleId":"597","severity":1,"message":"695","line":621,"column":11,"nodeType":"599","messageId":"600","endLine":621,"endColumn":23},{"ruleId":"597","severity":1,"message":"603","line":9,"column":17,"nodeType":"599","messageId":"600","endLine":9,"endColumn":42},{"ruleId":"597","severity":1,"message":"606","line":46,"column":12,"nodeType":"599","messageId":"600","endLine":46,"endColumn":17},{"ruleId":"597","severity":1,"message":"632","line":48,"column":12,"nodeType":"599","messageId":"600","endLine":48,"endColumn":19},{"ruleId":"597","severity":1,"message":"736","line":51,"column":11,"nodeType":"599","messageId":"600","endLine":51,"endColumn":27},{"ruleId":"597","severity":1,"message":"773","line":59,"column":12,"nodeType":"599","messageId":"600","endLine":59,"endColumn":21},{"ruleId":"597","severity":1,"message":"774","line":62,"column":12,"nodeType":"599","messageId":"600","endLine":62,"endColumn":16},{"ruleId":"597","severity":1,"message":"775","line":72,"column":12,"nodeType":"599","messageId":"600","endLine":72,"endColumn":24},{"ruleId":"597","severity":1,"message":"776","line":72,"column":25,"nodeType":"599","messageId":"600","endLine":72,"endColumn":40},{"ruleId":"597","severity":1,"message":"642","line":145,"column":11,"nodeType":"599","messageId":"600","endLine":145,"endColumn":27},{"ruleId":"597","severity":1,"message":"647","line":189,"column":11,"nodeType":"599","messageId":"600","endLine":189,"endColumn":20},{"ruleId":"617","severity":1,"message":"777","line":260,"column":8,"nodeType":"619","endLine":260,"endColumn":10,"suggestions":"778"},{"ruleId":"597","severity":1,"message":"615","line":454,"column":14,"nodeType":"599","messageId":"600","endLine":454,"endColumn":19},{"ruleId":"617","severity":1,"message":"724","line":518,"column":15,"nodeType":"619","endLine":518,"endColumn":17,"suggestions":"779"},{"ruleId":"597","severity":1,"message":"625","line":608,"column":11,"nodeType":"599","messageId":"600","endLine":608,"endColumn":21},{"ruleId":"597","severity":1,"message":"673","line":816,"column":53,"nodeType":"599","messageId":"600","endLine":816,"endColumn":59},{"ruleId":"597","severity":1,"message":"658","line":1110,"column":12,"nodeType":"599","messageId":"600","endLine":1110,"endColumn":24},{"ruleId":"597","severity":1,"message":"780","line":1131,"column":11,"nodeType":"599","messageId":"600","endLine":1131,"endColumn":21},{"ruleId":"597","severity":1,"message":"659","line":1204,"column":11,"nodeType":"599","messageId":"600","endLine":1204,"endColumn":27},{"ruleId":"597","severity":1,"message":"660","line":1207,"column":11,"nodeType":"599","messageId":"600","endLine":1207,"endColumn":27},{"ruleId":"617","severity":1,"message":"781","line":1216,"column":8,"nodeType":"619","endLine":1216,"endColumn":15,"suggestions":"782"},{"ruleId":"783","severity":1,"message":"784","line":1254,"column":75,"nodeType":"785","endLine":1254,"endColumn":79},{"ruleId":"597","severity":1,"message":"606","line":45,"column":12,"nodeType":"599","messageId":"600","endLine":45,"endColumn":17},{"ruleId":"597","severity":1,"message":"632","line":47,"column":12,"nodeType":"599","messageId":"600","endLine":47,"endColumn":19},{"ruleId":"597","severity":1,"message":"633","line":63,"column":12,"nodeType":"599","messageId":"600","endLine":63,"endColumn":23},{"ruleId":"597","severity":1,"message":"638","line":74,"column":11,"nodeType":"599","messageId":"600","endLine":74,"endColumn":18},{"ruleId":"597","severity":1,"message":"639","line":76,"column":9,"nodeType":"599","messageId":"600","endLine":76,"endColumn":19},{"ruleId":"617","severity":1,"message":"645","line":235,"column":7,"nodeType":"619","endLine":235,"endColumn":13,"suggestions":"786"},{"ruleId":"617","severity":1,"message":"708","line":347,"column":21,"nodeType":"709","endLine":347,"endColumn":42},{"ruleId":"617","severity":1,"message":"787","line":410,"column":8,"nodeType":"619","endLine":410,"endColumn":29,"suggestions":"788"},{"ruleId":"617","severity":1,"message":"789","line":425,"column":8,"nodeType":"619","endLine":425,"endColumn":21,"suggestions":"790"},{"ruleId":"700","severity":1,"message":"701","line":763,"column":21,"nodeType":"702","messageId":"703","endLine":763,"endColumn":36},{"ruleId":"617","severity":1,"message":"704","line":781,"column":15,"nodeType":"619","endLine":781,"endColumn":17,"suggestions":"791"},{"ruleId":"617","severity":1,"message":"690","line":789,"column":16,"nodeType":"619","endLine":789,"endColumn":49,"suggestions":"792"},{"ruleId":"597","severity":1,"message":"625","line":880,"column":11,"nodeType":"599","messageId":"600","endLine":880,"endColumn":21},{"ruleId":"597","severity":1,"message":"673","line":1088,"column":53,"nodeType":"599","messageId":"600","endLine":1088,"endColumn":59},{"ruleId":"597","severity":1,"message":"659","line":1469,"column":11,"nodeType":"599","messageId":"600","endLine":1469,"endColumn":27},{"ruleId":"597","severity":1,"message":"666","line":2,"column":40,"nodeType":"599","messageId":"600","endLine":2,"endColumn":44},{"ruleId":"617","severity":1,"message":"734","line":275,"column":7,"nodeType":"619","endLine":275,"endColumn":9,"suggestions":"793"},{"ruleId":"597","severity":1,"message":"606","line":43,"column":12,"nodeType":"599","messageId":"600","endLine":43,"endColumn":17},{"ruleId":"597","severity":1,"message":"632","line":45,"column":12,"nodeType":"599","messageId":"600","endLine":45,"endColumn":19},{"ruleId":"617","severity":1,"message":"794","line":389,"column":15,"nodeType":"619","endLine":389,"endColumn":17,"suggestions":"795"},{"ruleId":"597","severity":1,"message":"673","line":620,"column":53,"nodeType":"599","messageId":"600","endLine":620,"endColumn":59},{"ruleId":"597","severity":1,"message":"606","line":43,"column":12,"nodeType":"599","messageId":"600","endLine":43,"endColumn":17},{"ruleId":"597","severity":1,"message":"631","line":44,"column":12,"nodeType":"599","messageId":"600","endLine":44,"endColumn":19},{"ruleId":"597","severity":1,"message":"632","line":45,"column":12,"nodeType":"599","messageId":"600","endLine":45,"endColumn":19},{"ruleId":"597","severity":1,"message":"641","line":56,"column":11,"nodeType":"599","messageId":"600","endLine":56,"endColumn":28},{"ruleId":"617","severity":1,"message":"796","line":392,"column":15,"nodeType":"619","endLine":392,"endColumn":17,"suggestions":"797"},{"ruleId":"597","severity":1,"message":"673","line":624,"column":53,"nodeType":"599","messageId":"600","endLine":624,"endColumn":59},{"ruleId":"597","severity":1,"message":"695","line":697,"column":11,"nodeType":"599","messageId":"600","endLine":697,"endColumn":23},{"ruleId":"597","severity":1,"message":"762","line":1,"column":16,"nodeType":"599","messageId":"600","endLine":1,"endColumn":24},{"ruleId":"597","severity":1,"message":"763","line":1,"column":25,"nodeType":"599","messageId":"600","endLine":1,"endColumn":34},{"ruleId":"597","severity":1,"message":"764","line":2,"column":8,"nodeType":"599","messageId":"600","endLine":2,"endColumn":13},{"ruleId":"597","severity":1,"message":"675","line":2,"column":17,"nodeType":"599","messageId":"600","endLine":2,"endColumn":26},{"ruleId":"597","severity":1,"message":"676","line":3,"column":9,"nodeType":"599","messageId":"600","endLine":3,"endColumn":20},{"ruleId":"597","severity":1,"message":"765","line":8,"column":11,"nodeType":"599","messageId":"600","endLine":8,"endColumn":27},{"ruleId":"597","severity":1,"message":"752","line":2,"column":9,"nodeType":"599","messageId":"600","endLine":2,"endColumn":14},{"ruleId":"597","severity":1,"message":"753","line":2,"column":16,"nodeType":"599","messageId":"600","endLine":2,"endColumn":22},{"ruleId":"597","severity":1,"message":"666","line":2,"column":40,"nodeType":"599","messageId":"600","endLine":2,"endColumn":44},{"ruleId":"597","severity":1,"message":"754","line":2,"column":46,"nodeType":"599","messageId":"600","endLine":2,"endColumn":53},{"ruleId":"597","severity":1,"message":"798","line":18,"column":12,"nodeType":"599","messageId":"600","endLine":18,"endColumn":31},{"ruleId":"597","severity":1,"message":"799","line":18,"column":32,"nodeType":"599","messageId":"600","endLine":18,"endColumn":54},{"ruleId":"597","severity":1,"message":"677","line":43,"column":18,"nodeType":"599","messageId":"600","endLine":43,"endColumn":26},{"ruleId":"597","severity":1,"message":"800","line":44,"column":36,"nodeType":"599","messageId":"600","endLine":44,"endColumn":44},{"ruleId":"597","severity":1,"message":"606","line":45,"column":12,"nodeType":"599","messageId":"600","endLine":45,"endColumn":17},{"ruleId":"597","severity":1,"message":"632","line":47,"column":12,"nodeType":"599","messageId":"600","endLine":47,"endColumn":19},{"ruleId":"597","severity":1,"message":"801","line":49,"column":17,"nodeType":"599","messageId":"600","endLine":49,"endColumn":24},{"ruleId":"597","severity":1,"message":"802","line":57,"column":12,"nodeType":"599","messageId":"600","endLine":57,"endColumn":26},{"ruleId":"597","severity":1,"message":"803","line":57,"column":27,"nodeType":"599","messageId":"600","endLine":57,"endColumn":44},{"ruleId":"597","severity":1,"message":"798","line":58,"column":12,"nodeType":"599","messageId":"600","endLine":58,"endColumn":31},{"ruleId":"597","severity":1,"message":"799","line":58,"column":32,"nodeType":"599","messageId":"600","endLine":58,"endColumn":54},{"ruleId":"597","severity":1,"message":"615","line":359,"column":14,"nodeType":"599","messageId":"600","endLine":359,"endColumn":19},{"ruleId":"617","severity":1,"message":"755","line":483,"column":15,"nodeType":"619","endLine":483,"endColumn":17,"suggestions":"804"},{"ruleId":"597","severity":1,"message":"757","line":575,"column":11,"nodeType":"599","messageId":"600","endLine":575,"endColumn":15},{"ruleId":"597","severity":1,"message":"758","line":575,"column":17,"nodeType":"599","messageId":"600","endLine":575,"endColumn":20},{"ruleId":"597","severity":1,"message":"606","line":576,"column":12,"nodeType":"599","messageId":"600","endLine":576,"endColumn":17},{"ruleId":"597","severity":1,"message":"607","line":576,"column":19,"nodeType":"599","messageId":"600","endLine":576,"endColumn":27},{"ruleId":"597","severity":1,"message":"802","line":584,"column":12,"nodeType":"599","messageId":"600","endLine":584,"endColumn":26},{"ruleId":"597","severity":1,"message":"798","line":585,"column":12,"nodeType":"599","messageId":"600","endLine":585,"endColumn":31},{"ruleId":"597","severity":1,"message":"799","line":585,"column":32,"nodeType":"599","messageId":"600","endLine":585,"endColumn":54},{"ruleId":"597","severity":1,"message":"673","line":933,"column":53,"nodeType":"599","messageId":"600","endLine":933,"endColumn":59},{"ruleId":"597","severity":1,"message":"802","line":946,"column":12,"nodeType":"599","messageId":"600","endLine":946,"endColumn":26},{"ruleId":"597","severity":1,"message":"803","line":946,"column":27,"nodeType":"599","messageId":"600","endLine":946,"endColumn":44},{"ruleId":"597","severity":1,"message":"798","line":947,"column":12,"nodeType":"599","messageId":"600","endLine":947,"endColumn":31},{"ruleId":"597","severity":1,"message":"799","line":947,"column":32,"nodeType":"599","messageId":"600","endLine":947,"endColumn":54},{"ruleId":"597","severity":1,"message":"695","line":1073,"column":11,"nodeType":"599","messageId":"600","endLine":1073,"endColumn":23},{"ruleId":"597","severity":1,"message":"667","line":1485,"column":11,"nodeType":"599","messageId":"600","endLine":1485,"endColumn":15},{"ruleId":"597","severity":1,"message":"733","line":1486,"column":11,"nodeType":"599","messageId":"600","endLine":1486,"endColumn":16},{"ruleId":"597","severity":1,"message":"615","line":1531,"column":15,"nodeType":"599","messageId":"600","endLine":1531,"endColumn":20},{"ruleId":"597","severity":1,"message":"659","line":1598,"column":11,"nodeType":"599","messageId":"600","endLine":1598,"endColumn":27},{"ruleId":"597","severity":1,"message":"666","line":2,"column":40,"nodeType":"599","messageId":"600","endLine":2,"endColumn":44},{"ruleId":"597","severity":1,"message":"805","line":3,"column":8,"nodeType":"599","messageId":"600","endLine":3,"endColumn":21},{"ruleId":"597","severity":1,"message":"806","line":4,"column":8,"nodeType":"599","messageId":"600","endLine":4,"endColumn":20},{"ruleId":"597","severity":1,"message":"807","line":5,"column":8,"nodeType":"599","messageId":"600","endLine":5,"endColumn":20},{"ruleId":"597","severity":1,"message":"808","line":7,"column":8,"nodeType":"599","messageId":"600","endLine":7,"endColumn":20},{"ruleId":"597","severity":1,"message":"809","line":8,"column":8,"nodeType":"599","messageId":"600","endLine":8,"endColumn":19},{"ruleId":"597","severity":1,"message":"810","line":10,"column":8,"nodeType":"599","messageId":"600","endLine":10,"endColumn":16},{"ruleId":"597","severity":1,"message":"675","line":11,"column":17,"nodeType":"599","messageId":"600","endLine":11,"endColumn":26},{"ruleId":"597","severity":1,"message":"676","line":12,"column":9,"nodeType":"599","messageId":"600","endLine":12,"endColumn":20},{"ruleId":"597","severity":1,"message":"811","line":13,"column":8,"nodeType":"599","messageId":"600","endLine":13,"endColumn":24},{"ruleId":"597","severity":1,"message":"677","line":16,"column":18,"nodeType":"599","messageId":"600","endLine":16,"endColumn":26},{"ruleId":"617","severity":1,"message":"678","line":32,"column":12,"nodeType":"619","endLine":32,"endColumn":14,"suggestions":"812"},{"ruleId":"597","severity":1,"message":"606","line":43,"column":12,"nodeType":"599","messageId":"600","endLine":43,"endColumn":17},{"ruleId":"597","severity":1,"message":"632","line":45,"column":12,"nodeType":"599","messageId":"600","endLine":45,"endColumn":19},{"ruleId":"617","severity":1,"message":"813","line":393,"column":15,"nodeType":"619","endLine":393,"endColumn":17,"suggestions":"814"},{"ruleId":"617","severity":1,"message":"813","line":624,"column":20,"nodeType":"619","endLine":624,"endColumn":22,"suggestions":"815"},{"ruleId":"597","severity":1,"message":"673","line":854,"column":53,"nodeType":"599","messageId":"600","endLine":854,"endColumn":59},{"ruleId":"597","severity":1,"message":"695","line":927,"column":11,"nodeType":"599","messageId":"600","endLine":927,"endColumn":23},{"ruleId":"597","severity":1,"message":"606","line":43,"column":12,"nodeType":"599","messageId":"600","endLine":43,"endColumn":17},{"ruleId":"597","severity":1,"message":"632","line":45,"column":12,"nodeType":"599","messageId":"600","endLine":45,"endColumn":19},{"ruleId":"617","severity":1,"message":"813","line":393,"column":15,"nodeType":"619","endLine":393,"endColumn":17,"suggestions":"816"},{"ruleId":"617","severity":1,"message":"813","line":623,"column":20,"nodeType":"619","endLine":623,"endColumn":22,"suggestions":"817"},{"ruleId":"597","severity":1,"message":"673","line":852,"column":53,"nodeType":"599","messageId":"600","endLine":852,"endColumn":59},{"ruleId":"597","severity":1,"message":"695","line":925,"column":11,"nodeType":"599","messageId":"600","endLine":925,"endColumn":23},"no-unused-vars","'useRef' is defined but never used.","Identifier","unusedVar","'useForm' is defined but never used.","'toast' is defined but never used.","'formatDistanceToNowStrict' is defined but never used.","'PatientProfile' is defined but never used.","'AccordionItemState' is defined but never used.","'error' is assigned a value but never used.","'setError' is assigned a value but never used.","'BillServ' is assigned a value but never used.","'facilities' is assigned a value but never used.","'setFacilities' is assigned a value but never used.","'expanded' is assigned a value but never used.","'setExpanded' is assigned a value but never used.","'handleMedicationRow' is assigned a value but never used.","'handleCreateNew' is assigned a value but never used.","'field' is assigned a value but never used.","'handleRow' is assigned a value but never used.","react-hooks/exhaustive-deps","React Hook useEffect has missing dependencies: 'BillServ' and 'getFacilities'. Either include them or remove the dependency array.","ArrayExpression",["818"],"React Hook useEffect has a missing dependency: 'selectedOrders'. Either include it or remove the dependency array.",["819"],"'currentOrder' is assigned a value but never used.","'ProductEntry' is assigned a value but never used.","'handleEdit' is assigned a value but never used.","React Hook useEffect has missing dependencies: 'state.DispenseModule.selectedDispense' and 'state.currentClients'. Either include them or remove the dependency array.",["820"],"React Hook useEffect has missing dependencies: 'BillServ' and 'state.currentClients'. Either include them or remove the dependency array.",["821"],"'ProductCreate' is defined but never used.","'success' is assigned a value but never used.","'message' is assigned a value but never used.","'inventoryId' is assigned a value but never used.","'paymentOptions' is assigned a value but never used.","'setPaymentOptions' is assigned a value but never used.","'setBillMode' is assigned a value but never used.","'partPay' is assigned a value but never used.","'inputEl' is assigned a value but never used.","'hidestatus' is defined but never used.","'showDocumentation' is assigned a value but never used.","'getSearchfacility' is assigned a value but never used.","'handleChangeType' is assigned a value but never used.","'handleClickProd' is assigned a value but never used.","'handleQtty' is assigned a value but never used.","React Hook useEffect has missing dependencies: 'documentNo', 'quantity', 'sellingprice', 'source', 'totalamount', and 'type'. Either include them or remove the dependency array. You can also replace multiple useState variables with useReducer if 'setProductEntry' needs the current value of 'documentNo'.",["822"],"'resetform' is assigned a value but never used.","'handleMedicationDone' is assigned a value but never used.","'onSubmit' is assigned a value but never used.","'handleChangeAmount' is assigned a value but never used.","'newclient' is assigned a value but never used.","React Hook useEffect has missing dependencies: 'getFacilities', 'medication', 'productItem.length', and 'source'. Either include them or remove the dependency array.",["823"],"React Hook useEffect has a missing dependency: 'getTotal'. Either include it or remove the dependency array.",["824"],"React Hook useEffect has missing dependencies: 'SubwalletServ', 'getFacilities', and 'setState'. Either include them or remove the dependency array.",["825"],"'productModal' is assigned a value but never used.","'handleAddproduct' is assigned a value but never used.","'handlecloseModal' is assigned a value but never used.","no-native-reassign",["826"],"no-negated-in-lhs",["827"],"'API' is assigned a value but never used.","'Link' is defined but never used.","'user' is assigned a value but never used.","'setUser' is assigned a value but never used.","'resp' is assigned a value but never used.","React Hook useEffect has missing dependencies: 'reAuth', 'setUser', and 'user'. Either include them or remove the dependency array.",["828"],"'watch' is assigned a value but never used.","'errors' is assigned a value but never used.","'userServ' is assigned a value but never used.","'StoreList' is defined but never used.","'UserContext' is defined but never used.","'setState' is assigned a value but never used.","React Hook useEffect has missing dependencies: 'handleChangeStore' and 'selectedStore'. Either include them or remove the dependency array.",["829"],"React Hook useEffect has a missing dependency: 'selectedClinic'. Either include it or remove the dependency array.",["830"],["826"],["827"],"React Hook useEffect has a missing dependency: 'setValue'. Either include it or remove the dependency array.",["831"],"React Hook useEffect has missing dependencies: 'EmployeeServ', 'getFacilities', and 'user'. Either include them or remove the dependency array.",["832"],"React Hook useEffect has missing dependencies: 'InventoryServ', 'getFacilities', and 'user'. Either include them or remove the dependency array.",["833"],"React Hook useEffect has a missing dependency: 'getFacilities'. Either include it or remove the dependency array.",["834"],["835"],"React Hook useEffect has a missing dependency: 'handleSetPrice'. Either include it or remove the dependency array.",["836"],"'handleDelete' is assigned a value but never used.",["837"],["838"],["839"],["840"],"no-unreachable","Unreachable code.","ExpressionStatement","unreachableCode","React Hook useEffect has missing dependencies: 'ProductEntryServ', 'getFacilities', and 'state.StoreModule.selectedStore'. Either include them or remove the dependency array.",["841"],["842"],["843"],"Assignments to the 'calcamount1' variable from inside React Hook useEffect will be lost after each render. To preserve the value over time, store it in a useRef Hook and keep the mutable value in the '.current' property. Otherwise, you can move this variable directly inside useEffect.","BinaryExpression",["844"],["845"],["846"],["847"],["848"],["849"],"React Hook useEffect has missing dependencies: 'ClinicServ', 'getFacilities', and 'user'. Either include them or remove the dependency array.",["850"],"'DebounceInput' is defined but never used.","'handleSearch' is assigned a value but never used.","no-dupe-keys","Duplicate key 'order_status'.","ObjectExpression","unexpected","React Hook useEffect has missing dependencies: 'OrderServ' and 'getFacilities'. Either include them or remove the dependency array.",["851"],["852"],"'PrescriptionCreate' is defined but never used.","'setPage' is assigned a value but never used.","'loader' is assigned a value but never used.","'ulimit' is assigned a value but never used.","React Hook useEffect has missing dependencies: 'ClinicServ', 'getFacilities', 'page', and 'user'. Either include them or remove the dependency array.",["853"],"'state' is assigned a value but never used.","React Hook useEffect has missing dependencies: 'facilityServ' and 'getFacilities'. Either include them or remove the dependency array.",["854"],"'ProductEntryServ' is assigned a value but never used.","'qamount' is assigned a value but never used.",["855"],"React Hook useEffect has missing dependencies: 'billMode' and 'source'. Either include them or remove the dependency array.",["856"],"React Hook useEffect has missing dependencies: 'BillServ', 'cleanup', and 'getFacilities'. Either include them or remove the dependency array.",["857"],["858"],["859"],["860"],["861"],["862"],["863"],"'user1' is assigned a value but never used.","React Hook useEffect has missing dependencies: 'setUser' and 'user'. Either include them or remove the dependency array.",["864"],"'Route' is defined but never used.","'Switch' is defined but never used.","'NavLink' is defined but never used.","React Hook useEffect has missing dependencies: 'ClientServ', 'getFacilities', and 'user'. Either include them or remove the dependency array.",["865"],"'path' is assigned a value but never used.","'url' is assigned a value but never used.","'client' is assigned a value but never used.",["866"],["867"],"'useState' is defined but never used.","'useEffect' is defined but never used.","'Store' is defined but never used.","'handleCloseModal' is assigned a value but never used.","'OrderServ' is assigned a value but never used.",["868"],["869"],"React Hook useEffect has missing dependencies: 'OrderServ' and 'state.currentClients'. Either include them or remove the dependency array.",["870"],"React Hook useEffect has missing dependencies: 'DocumentClassServ' and 'getFacilities'. Either include them or remove the dependency array.",["871"],"'productId' is assigned a value but never used.","'name' is assigned a value but never used.","'productEntry' is assigned a value but never used.","'setProductEntry' is assigned a value but never used.","React Hook useEffect has missing dependencies: 'user.currentEmployee.facilityDetail._id' and 'user.currentEmployee.facilityDetail.facilityName'. Either include them or remove the dependency array.",["872"],["873"],"'handleBlur' is assigned a value but never used.","React Hook useEffect has a missing dependency: 'value'. Either include it or remove the dependency array.",["874"],"react/jsx-no-comment-textnodes","Comments inside children section of tag should be placed inside braces","Literal",["875"],"React Hook useEffect has missing dependencies: 'getTotal', 'medication', 'productItem.length', and 'source'. Either include them or remove the dependency array.",["876"],"React Hook useEffect has missing dependencies: 'getTotal' and 'totalamount'. Either include them or remove the dependency array.",["877"],["878"],["879"],["880"],"React Hook useEffect has missing dependencies: 'LocationServ', 'getFacilities', and 'user'. Either include them or remove the dependency array.",["881"],"React Hook useEffect has missing dependencies: 'ProductServ', 'getFacilities', and 'user'. Either include them or remove the dependency array.",["882"],"'selectedAppointment' is assigned a value but never used.","'setSelectedAppointment' is assigned a value but never used.","'setValue' is assigned a value but never used.","'setType' is assigned a value but never used.","'selectedClient' is assigned a value but never used.","'setSelectedClient' is assigned a value but never used.",["883"],"'FinanceReport' is defined but never used.","'FinanceSetup' is defined but never used.","'FinanceStore' is defined but never used.","'ProductEntry' is defined but never used.","'ProductExit' is defined but never used.","'Products' is defined but never used.","'BillPrescription' is defined but never used.",["884"],"React Hook useEffect has missing dependencies: 'StoreServ', 'getFacilities', and 'user'. Either include them or remove the dependency array.",["885"],["886"],["887"],["888"],{"desc":"889","fix":"890"},{"desc":"891","fix":"892"},{"desc":"893","fix":"894"},{"desc":"895","fix":"896"},{"desc":"897","fix":"898"},{"desc":"899","fix":"900"},{"desc":"901","fix":"902"},{"desc":"903","fix":"904"},"no-global-assign","no-unsafe-negation",{"desc":"905","fix":"906"},{"desc":"907","fix":"908"},{"desc":"909","fix":"910"},{"desc":"911","fix":"912"},{"desc":"913","fix":"914"},{"desc":"915","fix":"916"},{"desc":"917","fix":"918"},{"desc":"919","fix":"920"},{"desc":"921","fix":"922"},{"desc":"915","fix":"923"},{"desc":"917","fix":"924"},{"desc":"919","fix":"925"},{"desc":"921","fix":"926"},{"desc":"927","fix":"928"},{"desc":"917","fix":"929"},{"desc":"897","fix":"930"},{"desc":"927","fix":"931"},{"desc":"917","fix":"932"},{"desc":"915","fix":"933"},{"desc":"917","fix":"934"},{"desc":"919","fix":"935"},{"desc":"921","fix":"936"},{"desc":"937","fix":"938"},{"desc":"939","fix":"940"},{"desc":"897","fix":"941"},{"desc":"942","fix":"943"},{"desc":"944","fix":"945"},{"desc":"897","fix":"946"},{"desc":"947","fix":"948"},{"desc":"949","fix":"950"},{"desc":"891","fix":"951"},{"desc":"893","fix":"952"},{"desc":"895","fix":"953"},{"desc":"897","fix":"954"},{"desc":"927","fix":"955"},{"desc":"917","fix":"956"},{"desc":"957","fix":"958"},{"desc":"959","fix":"960"},{"desc":"927","fix":"961"},{"desc":"917","fix":"962"},{"desc":"939","fix":"963"},{"desc":"893","fix":"964"},{"desc":"965","fix":"966"},{"desc":"967","fix":"968"},{"desc":"969","fix":"970"},{"desc":"939","fix":"971"},{"desc":"972","fix":"973"},{"desc":"897","fix":"974"},{"desc":"975","fix":"976"},{"desc":"977","fix":"978"},{"desc":"927","fix":"979"},{"desc":"917","fix":"980"},{"desc":"944","fix":"981"},{"desc":"982","fix":"983"},{"desc":"984","fix":"985"},{"desc":"959","fix":"986"},{"desc":"907","fix":"987"},{"desc":"988","fix":"989"},{"desc":"988","fix":"990"},{"desc":"988","fix":"991"},{"desc":"988","fix":"992"},"Update the dependencies array to be: [BillServ, getFacilities]",{"range":"993","text":"994"},"Update the dependencies array to be: [selectedOrders, state.financeModule.show]",{"range":"995","text":"996"},"Update the dependencies array to be: [state.DispenseModule.selectedDispense, state.currentClients]",{"range":"997","text":"998"},"Update the dependencies array to be: [BillServ, state.currentClients]",{"range":"999","text":"1000"},"Update the dependencies array to be: [date, documentNo, quantity, sellingprice, source, totalamount, type]",{"range":"1001","text":"1002"},"Update the dependencies array to be: [getFacilities, medication, productItem.length, source, state.financeModule]",{"range":"1003","text":"1004"},"Update the dependencies array to be: [getTotal, productItem]",{"range":"1005","text":"1006"},"Update the dependencies array to be: [SubwalletServ, getFacilities, setState]",{"range":"1007","text":"1008"},"Update the dependencies array to be: [reAuth, setUser, user]",{"range":"1009","text":"1010"},"Update the dependencies array to be: [handleChangeStore, selectedStore]",{"range":"1011","text":"1012"},"Update the dependencies array to be: [selectedClinic]",{"range":"1013","text":"1014"},"Update the dependencies array to be: [setValue, user]",{"range":"1015","text":"1016"},"Update the dependencies array to be: [EmployeeServ, getFacilities, user]",{"range":"1017","text":"1018"},"Update the dependencies array to be: [InventoryServ, getFacilities, user]",{"range":"1019","text":"1020"},"Update the dependencies array to be: [getFacilities, state.StoreModule.selectedStore]",{"range":"1021","text":"1022"},"Update the dependencies array to be: [Inventory, getFacilities]",{"range":"1023","text":"1024"},"Update the dependencies array to be: [handleSetPrice]",{"range":"1025","text":"1026"},{"range":"1027","text":"1020"},{"range":"1028","text":"1022"},{"range":"1029","text":"1024"},{"range":"1030","text":"1026"},"Update the dependencies array to be: [ProductEntryServ, getFacilities, state.StoreModule.selectedStore]",{"range":"1031","text":"1032"},{"range":"1033","text":"1022"},{"range":"1034","text":"1002"},{"range":"1035","text":"1032"},{"range":"1036","text":"1022"},{"range":"1037","text":"1020"},{"range":"1038","text":"1022"},{"range":"1039","text":"1024"},{"range":"1040","text":"1026"},"Update the dependencies array to be: [ClinicServ, getFacilities, user]",{"range":"1041","text":"1042"},"Update the dependencies array to be: [OrderServ, getFacilities]",{"range":"1043","text":"1044"},{"range":"1045","text":"1002"},"Update the dependencies array to be: [ClinicServ, getFacilities, page, user]",{"range":"1046","text":"1047"},"Update the dependencies array to be: [facilityServ, getFacilities]",{"range":"1048","text":"1049"},{"range":"1050","text":"1002"},"Update the dependencies array to be: [billMode, medication, source]",{"range":"1051","text":"1052"},"Update the dependencies array to be: [BillServ, cleanup, getFacilities]",{"range":"1053","text":"1054"},{"range":"1055","text":"996"},{"range":"1056","text":"998"},{"range":"1057","text":"1000"},{"range":"1058","text":"1002"},{"range":"1059","text":"1032"},{"range":"1060","text":"1022"},"Update the dependencies array to be: [setUser, user]",{"range":"1061","text":"1062"},"Update the dependencies array to be: [ClientServ, getFacilities, user]",{"range":"1063","text":"1064"},{"range":"1065","text":"1032"},{"range":"1066","text":"1022"},{"range":"1067","text":"1044"},{"range":"1068","text":"998"},"Update the dependencies array to be: [OrderServ, state.currentClients]",{"range":"1069","text":"1070"},"Update the dependencies array to be: [DocumentClassServ, getFacilities]",{"range":"1071","text":"1072"},"Update the dependencies array to be: [user.currentEmployee.facilityDetail._id, user.currentEmployee.facilityDetail.facilityName]",{"range":"1073","text":"1074"},{"range":"1075","text":"1044"},"Update the dependencies array to be: [simpa, value]",{"range":"1076","text":"1077"},{"range":"1078","text":"1002"},"Update the dependencies array to be: [getTotal, medication, productItem.length, source, state.financeModule]",{"range":"1079","text":"1080"},"Update the dependencies array to be: [getTotal, productItem, totalamount]",{"range":"1081","text":"1082"},{"range":"1083","text":"1032"},{"range":"1084","text":"1022"},{"range":"1085","text":"1049"},"Update the dependencies array to be: [LocationServ, getFacilities, user]",{"range":"1086","text":"1087"},"Update the dependencies array to be: [ProductServ, getFacilities, user]",{"range":"1088","text":"1089"},{"range":"1090","text":"1064"},{"range":"1091","text":"1012"},"Update the dependencies array to be: [StoreServ, getFacilities, user]",{"range":"1092","text":"1093"},{"range":"1094","text":"1093"},{"range":"1095","text":"1093"},{"range":"1096","text":"1093"},[8802,8804],"[BillServ, getFacilities]",[9216,9242],"[selectedOrders, state.financeModule.show]",[17716,17718],"[state.DispenseModule.selectedDispense, state.currentClients]",[18543,18545],"[BillServ, state.currentClients]",[11447,11453],"[date, documentNo, quantity, sellingprice, source, totalamount, type]",[17373,17394],"[getFacilities, medication, productItem.length, source, state.financeModule]",[17952,17965],"[getTotal, productItem]",[19821,19823],"[SubwalletServ, getFacilities, setState]",[3294,3296],"[reAuth, setUser, user]",[1278,1280],"[handleChangeStore, selectedStore]",[1106,1108],"[selectedClinic]",[2746,2752],"[setValue, user]",[14951,14953],"[EmployeeServ, getFacilities, user]",[16336,16338],"[InventoryServ, getFacilities, user]",[16478,16511],"[getFacilities, state.StoreModule.selectedStore]",[22406,22417],"[Inventory, getFacilities]",[28104,28106],"[handleSetPrice]",[16336,16338],[16478,16511],[22339,22350],[28037,28039],[21183,21185],"[ProductEntryServ, getFacilities, state.StoreModule.selectedStore]",[21387,21420],[7305,7311],[25911,25913],[26115,26148],[16336,16338],[16478,16511],[22351,22362],[28049,28051],[14984,14986],"[ClinicServ, getFacilities, user]",[5864,5866],"[OrderServ, getFacilities]",[6347,6353],[7642,7644],"[ClinicServ, getFacilities, page, user]",[10690,10692],"[facilityServ, getFacilities]",[12109,12115],[19059,19071],"[billMode, medication, source]",[8955,8957],"[BillServ, cleanup, getFacilities]",[9811,9837],[18317,18319],[19144,19146],[7409,7415],[26208,26210],[26412,26445],[3526,3528],"[setUser, user]",[26998,27000],"[ClientServ, getFacilities, user]",[21183,21185],[21387,21420],[8196,8198],[15602,15604],[16433,16435],"[OrderServ, state.currentClients]",[11271,11273],"[DocumentClassServ, getFacilities]",[9033,9035],"[user.currentEmployee.facilityDetail._id, user.currentEmployee.facilityDetail.facilityName]",[20188,20190],[48269,48276],"[simpa, value]",[7409,7415],[12809,12830],"[getTotal, medication, productItem.length, source, state.financeModule]",[13186,13199],"[getTotal, productItem, totalamount]",[28393,28395],[28597,28630],[10381,10383],[14869,14871],"[LocationServ, getFacilities, user]",[14978,14980],"[ProductServ, getFacilities, user]",[19050,19052],[1234,1236],[14939,14941],"[StoreServ, getFacilities, user]",[25087,25089],[14927,14929],[25064,25066]]